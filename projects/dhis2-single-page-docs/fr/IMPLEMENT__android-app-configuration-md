---
revision_date: "2021-09-17"
template: single.html
---

# À propos de ce guide { #about*this_guide* }

<!--DHIS2-SECTION-ID:about_this_guide_-->

La documentation du DHIS 2 est le fruit d'un effort collectif de la part de l'équipe de développement et des utilisateurs. Ce guide se veut complet, mais il se peut que certaines fonctionnalités y soient omises ou qu'elles nécessitent encore une documentation approfondie. Cette section présente certaines des conventions utilisées dans l'ensemble du document.

DHIS2 est une application fonctionnant dans un navigateur. Dans la plupart des cas, des impressions d'écran ont été incluse pour une meilleure compréhension. Des raccourcis vers diverses fonctionnalités sont affichés comme par exemple **Élément de données** \> **Groupe d'éléments de données**. Le symbole "\>" indique que vous devez cliquer sur **Élément de données** et ensuite sur **Groupe d'éléments de données**

Différents styles de texte ont été utilisés pour mettre en avant des parties importantes ou des types particuliers de texte, tels que le code source. Chacune des conventions utilisées dans le document est expliquée ci-dessous.

> **Note**
>
> Une note contient des informations supplémentaires qui doivent être prises en considération ou une référence à des informations supplémentaires pouvant être utiles.

> **Conseil**
>
> Un conseil peut être utile, par exemple sur la manière de réaliser une tâche particulière de manière plus efficace.

> **Important**
>
> Les informations importantes ne doivent pas être ignorées et indiquent généralement une exigence de l'application.

> **Attention**
>
> Les informations contenues dans ces sections doivent être examinées avec soin et, à défaut d'être prises en compte, elles pourraient entraîner des résultats inattendus en matière d'analyse, de performance ou de fonctionnalité.

> **Avertissement**
>
> Les informations contenues dans ces sections, si elles ne sont pas prises en compte, pourraient entraîner une perte permanente de données ou affecter la convivialité globale du système.

> **Complet**
>
> Les informations contenues dans ces sections indiqueront qu'il s'agit de points qui ont été entièrement traités.

> **Incomplet**
>
> Les informations contenues dans ces sections, indiqueront qu'il s'agit de questions qui ne sont pas traitées et qui seront ignorées.

> **Not_applicable (Non applicable)**
>
> Les informations contenues dans ces sections, indiqueront qu'il s'agit de questions non pertinentes.

> **Work_in_progress (Tâches en cours)**
>
> Les informations contenues dans ces sections indiqueront qu'il s'agit de problèmes ou de menaces qui n'ont pas été complètement traités ou dont le comportement inattendu a déjà été signalé.

    Les programmes répertoriés contiennent généralement du code informatique
    Ils sont affichés sur un fond sombre et avec une police distincte

`Les commandes sont affichées en gras et représentent une commande à exécuter sur le système d'exploitation ou dans la base de données.`

Les liens vers des sites web externes ou les références croisées seront affichés en bleu et soulignés comme [ceci.](http://www.dhis2.org).

<!-- 
Les références bibliographiques seront affichées entre crochets comme suit
Store2007. La liste complète des références peut être trouvée dans la bibliographie fournie
à la fin de ce document.
-->

# Introduction { #capture_app_introduction }

Ce guide est conçu de manière à vous aider lors de la configuration de DHIS 2 en vue de son utilisation avec l'application Android Capture.

Il ne s'agit pas d'un tutoriel ou d'un manuel de formation ; il est conçu pour compléter la documentation et le matériel de formation de base de DHIS 2 par un matériel de référence spécifique à l'application Android.

Le document est subdivisé en sections, dont l'objectif est de décrire toutes les fonctionnalités mises en œuvre dans l'application, celles qui ne le sont pas encore et celles qui ne seront pas prises en charge. Le cas échéant, une explication des problèmes liés à l'utilisation d'une fonctionnalité particulière dans l'application Android sera fournie. Des recommandations ou des conseils seront également présentés pour une meilleure compréhension et utilisation de l'application.

En outre, le document comporte des sections consacrées aux nouvelles fonctionnalités de connexion, aux configurations visuelles, à la gestion de la synchronisation et à une liste des erreurs importantes identifiées.

# Recommandations relatives à un déploiement de DHIS 2 sur mobile { #capture_app_recommendations }

Si vous prévoyez le déploiement de l'application Android DHIS2 sur le terrain, nous vous recommandons vivement de lire les [Lignes directrices pour la mise en œuvre sur les appareils mobiles] (https://docs.dhis2.org/master/en/dhis2_android_implementation_guideline/about-this-guide.html) publiées par UiO. Ce document contient des chapitres consacrés aux exigences technologiques, aux aspects de sécurité et de configuration, ainsi qu'aux recommandations de test et de déploiement. Vous trouverez ci-dessous une présentation succincte de certains aspects clés ; nous vous recommandons également de lire le document détaillé.

## Spécifications des appareils mobiles { #capture_app_recommendations_mobile_specs }

The Android App is compatible and supported for DHIS 2 versions 2.30 to 2.36. And has no breaking changes with 2.29.

It requires a device that is running Android v4.4 (not recommended but supported) or higher. The minimum recommended for new devices: Android 7 or higher.

Dans [la section spécifique des lignes directrices sur la mise en œuvre sur appareils mobiles] (https://docs.dhis2.org/master/en/dhis2_android_implementation_guideline/mobile-device-specifications.html) vous trouverez des recommandations relatives à l'acquisition de nouveaux appareils mobiles pour un déploiement Android du Dhis2.

## Test et pilotage { #capture_app_recommendations_testing }

Si vous prévoyez un déploiement de l'application Android DHIS 2 sur le terrain, vous devez d'abord effectuer une série complète de tests de l'application dans votre propre configuration.

L'application a été largement testée avec les serveurs de démo. De plus, lors des tests bêta, elle a également été testée avec des configurations réelles. Nous savons cependant que chaque configuration DHIS 2 est particulière à bien des égards, et peut entraîner des incohérences que nous n'avons pas pu identifier.

Il est fortement recommandé d'effectuer un test complet de l'application sur votre propre serveur avant de procéder au pilotage.

## Comment migrer vers l'application Android Capture { #capture_app_recommendations_migration }

Lorsque vous êtes sur le point de déployer la nouvelle application Android sur le terrain et que vos utilisateurs utilisent déjà Event Capture ou Tracker Capture, vous devez suivre les étapes suivantes :

1.  Synchronisez les données de l'application que vous utilisez actuellement

    > **Warning**
    >
    > Deleting the app without syncing can cause information loss.

2.  Téléchargez et installez l'application Android DHIS 2
3.  Connectez-vous à l'aide de vos identifiants et toutes les données seront synchronisées.

# Contribuez à l'application { #capture_app_contribute }

## Comment signaler un bogue { #capture_app_contribute_report }

Tout d'abord, veuillez consulter la [Liste des bugs déjà signalés dans la JIRA](https://jira.dhis2.org/issues/?filter=10872)

La liste est toujours mise à jour au fur et à mesure que vous ajoutez de nouveaux bugs que notre équipe se charge de corriger. Vous devez disposer d'un compte DHIS 2 Jira actif et gratuit.

Lorsque vous signalez un bug, veuillez le préciser avec votre descriptif :

- Version DHIS 2 et révision de build
- Version de l'application Android DHIS 2
- Version Android OS
- Appareil (si possible)
- Journal d'erreurs (si possible)

## Proposer des icônes à la bibliothèque { #capture_app_contribute_icons }

DHIS 2 et la nouvelle application Android DHIS 2 vous donne la possibilité de sélectionner des icônes pour les programmes, les ensembles de données et les options d'un ensemble d'options. La version 2.30 de DHIS 2 comprend 125 icônes. Nous prévoyons d'étendre la collection d'icônes sur chaque version future de DHIS 2 et pour cela nous avons besoin de votre collaboration : nous sommes à la recherche d'idées pour de nouvelles icônes - veuillez soumettre les vôtres en utilisant [ce formulaire] (https://forms.gle/FkUmwfZGYAScd2326).

## Ajouter des traductions { #capture_app_contribute_translations }

Voici les étapes à suivre pour contribuer à la traduction de l'application :

1. Créer un compte sur [Transifex](https://www.transifex.com/signin/?next=/hisp-uio/)
2. Faire partie d'une organisation existante
3. Rechercher HISP UiO et sélectionner l'organisation et non les projets
4. Sélectionner ANDROID : Projet Capture
5. Rejoindre l'équipe en charge de la langue choisie

Veuillez nous informer en cas de dysfonctionnement ou si vous devez ajouter une nouvelle langue en envoyant un message à l'utilisateur dhis2-android au sein de la communauté.

# Configurations visuelles { #capture_app_visual }

## Erreur de synchronisation des meta-données { #capture_app_visual_sync_error }

En cas d'erreur dans le processus de synchronisation, un message s'affiche dans le menu des paramètres (section "Synchroniser des données" ou "Synchroniser la configuration"). De plus, une icône de synchronisation rouge s'affiche à côté du programme sur l'écran d'accueil. Le journal des erreurs de synchronisation fournit des détails sur l'erreur et peut être partagé avec les administrateurs.

![](resources/images/capture-app-image43.jpg){ width=25%} ![](resources/images/capture-app-image11.png){ width=25%}

Vous pouvez également ouvrir le journal des erreurs de synchronisation en cliquant sur **Paramètres** :

![](resources/images/capture-app-image15.jpg){ largeur=25%}

## Personnaliser votre icône { #capture_app_visual_icon }

Vous pouvez définir votre icône dans le fond d'écran en utilisant le widget DHIS 2 App. L'icône correspondra au drapeau configuré dans votre serveur.

![](resources/images/capture-app-image32.jpg){ largeur=25%}

> **N.B.**
>
> Comment ajouter un widget :
>
> - Faites un appui long dans votre fond d'écran
> - Sélectionnez Widgets
> - Recherchez le widget DHIS 2
> - Sélectionnez
>
> Un raccourci sera alors ajouté à votre application.

## Personnaliser la couleur de l'application { #capture_app_visual_colour }

Vous pouvez définir le thème générique de l'application en les configurant dans notre serveur :

![](resources/images/capture-app-image28.png){largeur=80% }

> **Note**
>
> How to set the server theme and flag:
>
> Go to **System Settings > Appearance > Style**
>
> - Select your style
>   - Green,
>   - India (Orange),
>   - Light Blue,
>   - Myanmar (red),
>   - Vietnam
> - Select your flag
>
> ![](resources/images/capture-app-image23.png){ width=25%}

## Bibliothèque d'icônes des métadonnées { #capture_app_visual_icon_lib }

Vous pouvez actuellement choisir parmi 134 icônes. Vous pouvez effectuer une recherche par nom dans le widget de sélection des icônes. Les icônes sont disponibles en positif, en négatif et sous forme de contour. De nombreuses autres icônes seront ajoutées dans les versions à venir.

Des icônes peuvent être associées aux programmes, aux étapes, aux éléments de données et aux options d'un ensemble d'options. La configuration est possible via l'application Maintenance.

> **N.B.**
>
> Cette fonction est disponible à partir de la version 2.30 du DHIS2

![](resources/images/capture-app-image13.png){ .largeur centrale=80% }

In the Android App icons render in the home screen to illustrate all the programs available to a user, or while adding an stage. For data elements and options, the icons render for single event programs, when a section contains a single DE, showing the option set as a matrix or sequence of images.

![](resources/images/capture-app-image19.png){ largeur=25%} ![](resources/images/capture-app-image26.png){ largeur=25%}

> **N.B.**
>
> Dans un premier temps, les icônes ne s'afficheront que dans la nouvelle application Android. La nouvelle application de capture basée sur le web les intégrera dans un avenir proche.

We plan to expand the collection of icons on each future version of DHIS2- for that we need your help: we are seeking ideas for new icons - please submit yours using [this form](https://www.google.com/url?q=https://drive.google.com/open?id%3D1LmfYJQAu3KyDfkY3X6ne7qSsuTa9jXZhoQHzkDxeCdg&sa=D&ust=1557433016147000).

## Palette de couleurs pour les métadonnées { #capture_app_visual_colour_palette }

Les fonctions de suivi et de capture d'événements permettent désormais d'afficher des couleurs pour les programmes, les étapes, les éléments de données et les options dans les séries d'options. Un sélecteur de couleurs est intégré à l'application de maintenance. Il s'agit d'une palette, hormis les options qui permettent de sélectionner une couleur quelconque.

![](resources/images/capture-app-image20.png){ .largeur centrale=80% }

Dans l'application Android, la couleur sera utilisée comme couleur d'arrière-plan pour les programmes et les étapes, combinée à une icône (si elle est sélectionnée). Pour les options, elle est affichée comme couleur d'arrière-plan dans le formulaire de saisie des données pour les programmes à événement unique. Lorsque l'utilisateur sélectionne un programme auquel une couleur a été attribuée, cette couleur devient le thème d'arrière-plan de tous les écrans dans le domaine du programme.

![](resources/images/capture-app-image19.png){ largeur=25%} ![](resources/images/capture-app-image2.jpg){ largeur=25%}

> **N.B**
>
> Les couleurs seront d'abord disponibles dans la nouvelle application Android, puis, dans les prochaines versions, sur le site web de la nouvelle application de saisie.

## Types de rendu pour les sections de programme { #capture_app_visual_rendering_type }

![](resources/images/capture-app-image16.png){largeur=80% }

**Program Section**: when used in combination with icons, a Program Section with a single data element and associated Option Set can render the options in sequential or matrix layout (see screenshots). If the icon is not found, the app displays the DHIS logo.

![](resources/images/capture-app-image26.png){largeur=25%} ![](resources/images/capture-app-image36.png){largeur=25%}

> **N.B**
>
> Le type de rendu pour les sections sera d'abord disponible dans l'application Android, puis, dans les prochaines versions, dans la nouvelle interface utilisateur de l'application de saisie basée sur le web.

## Calendrier { #capture_app_visual_calendar }

Il est désormais possible d'utiliser deux calendriers différents. Celui de gauche est le premier à apparaître, mais vous pouvez le modifier en cliquant sur l'icône de calendrier dans le coin inférieur gauche.

Cette option est disponible lorsque :

1. Une nouvelle inscription est faite.
2. Création d'un nouvel événement (programmes avec et sans inscription).
3. Utilisation de filtres de période dans des ensembles de données et des programmes avec et sans enregistrement.

![](resources/images/capture-app-image60.png){ width=25%} ![](resources/images/capture-app-image61.png){ width=25%}

> **Note**
>
> Pour les versions Android 4.4, 5.1 et les petits appareils, l'option Accepter n'est pas visible dans la deuxième fenêtre du calendrier.

## Types de rendu { #capture_app_visual_render }

Les options de rendu disponibles ont été étendues pour inclure les boutons radio horizontaux et verticaux, les cases à cocher et les bascules. Les options autorisées dépendent du type de valeur.

- Oui uniquement : peut être rendu sous forme de bouton radio ou de case à cocher.

![](resources/images/capture-app-image111.jpg){ width=25%}

- Oui/Non : peut être rendu sous forme de boutons radio horizontaux/verticaux ou de cases à cocher ou de basculement horizontal/vertical.

![](resources/images/capture-app-image112.jpg){ width=25%}

- Texte : Lorsqu'il est lié à un ensemble d'options, il peut être affiché sous forme de boutons radio horizontaux/verticaux ou de cases à cocher horizontales/verticales. L'ensemble d'options doit être configuré avec le type de valeur "Texte" ; tout autre type de valeur sera affiché sous la forme d'une liste déroulante.

![](resources/images/capture-app-image110.jpg){ width=25%}

> **Note**
>
> The default rendering option will automatically display a search box whenever there are more than 15 elements in the option set to ease the selection.
>
> ![](resources/images/capture-app-options_no_search.png){ width=25% } ![](resources/images/capture-app-options_search.png){ width=60% }

### QR et codes-barres{ #capture_app_visual_render_qr }

Les éléments de données ou les attributs de type texte peuvent également être configurés comme des codes QR ou des codes-barres. Lorsqu'un élément de données ou un attribut est rendu sous forme de code QR ou de code-barres, l'application ouvre l'appareil photo de l'appareil pour lire l'image du code. Lorsque le QR/code-barres est un attribut TEI configuré comme consultable, l'utilisateur sera autorisé à scanner le code afin de rechercher et d'identifier l'instance de l'entité suivie. Cela fonctionne également pour les ensembles d'options.

Les codes-barres permettent également à l'utilisateur de saisir manuellement la valeur.

![](resources/images/capture-app-image118.png){ largeur=20%} ![](resources/images/capture-app-image119.png){ largeur=20%} ![](resources/images/capture-app-image120.png){ largeur=20%} ![](resources/images/capture-app-image121.png){ largeur=20%}

# Paramètres { #capture_app_settings }

![New Settings](resources/images/capture-app-image17.jpg){ width=25%} ![New Settings](resources/images/capture-app-image85.jpg){ width=25%}

<!-- PALD: I don't think the next image adds to the manual ![](resources/images/capture-app-image29.png){ width=35%} -->

**Data sync process**: User is able to choose from a drop-down list if the data entered in the app is uploaded to the server manually or scheduled every 15 min, 1 hour or 1 Day. By default the app will sync every 24h. This kind of Syncing includes new and updated events and TEI’s.

**Configuration sync process (Metadata syncing)**: User is able to choose from a drop-down list if the data entered in the app is uploaded to the server manually or scheduled every day or week. By default the app will sync every 24h. This sync will update changes in programs or configurations in web.

**Sync Parameters**: these parameters allow the user to specify the maximum number of TEI’s and events that can be stored in the local device. The user can also specify if limits apply per organisation unit or in total. Values can be set to default by clicking on “Reset to default”.

> **Note**
>
> Sync data, Sync configuration and Sync parameters can be overwritten using the Android Settings Web App.

**Reserved Values**: this will specify the number of reserved Id's available in your device and will allow you to refill them.

**Open sync errors log**: The sync error log gives details about the error and is prepared to be shared with admins.

**Delete Data**: this action will delete local data without having to log out.

**Reset App**: this action will log out the user and delete all data and metadata. It is similar to resetting the App.

**SMS Settings**: This sections allows to check or edit the parameters related to the sms gateway.

# Fonctionnalités génériques { #capture_app_generic }

## Connexion { #capture_app_generic_login }

Il existe deux façons d'accéder à l'application :

1. Manuelle : L'utilisateur doit entrer l'URL correspondante du serveur à utiliser et saisir le nom d'utilisateur et le mot de passe.

   > **Note**
   >
   > Take note that login is only possible with servers from version 2.29.

2. QR : L'utilisateur peut utiliser un code QR au lieu de saisir l'URL. Le nom d'utilisateur et le mot de passe doivent être saisis manuellement.

   > **Note**
   >
   > After the first login, the app will suggest URL and username of all successful connections.
   >
   > You are able to make an _offline_ login only if using the same user as the last online session.

![](resources/images/capture-app-image62.PNG){ width=25%} ![](resources/images/capture-app-image63.jpg){ width=25%}

> **Warning**
>
> In DHIS2 versions up to 2.30 if a user attemps an on-line login and their account has been disabled as explained in the [DHIS 2 Manual - Disable User](https://docs.dhis2.org/master/en/user/html/dhis2_user_manual_en_full.html#disable_user) all the data will be wiped from the phone. Make sure that before disabling a user all the data has been synced or that you are using this feature to remotely wipe sensitive data in case of a device getting lost.
>
> Due to a change in the login API this feature is not available in 2.31 and above versions.

## Récupération de compte { #capture_app_generic_recovery }

Les utilisateurs pourront restaurer leur propre mot de passe si ce paramètre est activé : Activer la Récupération du compte d'utilisateur.

![](resources/images/capture-app-image64.PNG){ largeur=25%}

## Session de blocage (code PIN) { #capture_app_generic_PIN }

L'utilisateur peut verrouiller la session à l'aide d'un code PIN à 4 chiffres. Cela permet de passer à d'autres applications dans votre téléphone sans effacer les données locales. Si l'utilisateur oublie son code PIN, il peut également se connecter en entrant ses identifiants.

![](resources/images/capture-app-image65.PNG){width=25%} ![](resources/images/capture-app-image63.jpg){width=25%}

## Empreinte digitale { #capture_app_generic_fingerprint }

L'utilisateur peut utiliser le scanner d'empreintes digitales si cette fonction est activée dans l'appareil.

- Lorsque le lecteur d'empreintes digitales est activé et non le code PIN, la session est verrouillée à chaque fois que l'application se ferme, passe en arrière-plan ou que l'appareil est bloqué. Lorsque l'application est à nouveau ouverte, l'utilisateur doit appuyer sur l'icône de l'empreinte digitale pour activer le scanner.
- Si le code PIN et l'empreinte digitale sont définis, lorsque la session est verrouillée et que l'utilisateur ouvre à nouveau l'application, le code PIN lui est demandé.

![](resources/images/capture-app-image104.jpg){largeur=25%} ![](resources/images/capture-app-image105.jpg){largeur=25%}

## Boutons d'instructions/informations { #capture_app_generic_instructions }

Un guide contextuel est disponible dans l'écran Détails de l'événement et Tableau de bord TEI.

![](resources/images/capture-app-image42.jpg){width=25%} ![](resources/images/capture-app-image66.png){width=25%}

> **Tip**
>
> L'utilisateur peut réouvrir<!-- PALD : unnecessary : (trigger)--> les instructions en cliquant sur les trois points situés dans le coin supérieur droit de l'écran.

## Filtre { #capture_app_generic_filter }

<!-- PALD alternative: "The Filter allows you to narrow down the data available from the ..." -->

The app has new and improved filters for all listing screens (home, event listing, tei search and dataSets).

Filter by period, org. Unit, sync state, event status, category option combination and "assigned to me".

![](resources/images/capture-app-image19.png){ width=25%} ![](resources/images/capture-app-image97.png){ width=25%} ![](resources/images/capture-app-image123.png){ width=25%} ![](resources/images/capture-app-image134.png){ width=25%}

Les filtres s'adapteront aux différents programmes et ensembles de données.

1. Programme sans enregistrement : Date, Unité d'Organisation, État de Synchronisation, État de l'Événement et Combinaison de Catégories. 
2. Programme avec inscription : Date de l'événement, Date de l'inscription, Unité d'org. , Synchronisation, Statut de l'inscription, Statut de l'événement et Affecté à moi. L'icône de filtre ne s'affichera que si une liste d'événements est disponible (affichage de la fonction de liste de la page d'accueil ou recherche).
3. Ensembles de données : Période, Unité d'Org. , et État de synchronisation.

### Attribué à moi{ #capture_app_generic_filter_assigned }

Il est possible de filtrer les événements en fonction de leur affectation à l'utilisateur actuel. Le filtre " Attribué à moi " a été ajouté à la liste des programmes d'événements individuels, à la liste des TEI, au tableau de bord des TEI et aux vues cartographiques. Il ne s'affiche que lorsque le programme actif est configuré pour attribuer des événements à des utilisateurs.

### Date de l'événement/Date/Période { #capture_app_generic_filter_date }

Filtrez les événements, les TEI (sur la base de leurs événements) et les ensembles de données, les périodes suivantes sont disponibles :

- Aujourd'hui
- Cette semaine
- Ce mois
- Hier
- Semaine dernière
- Mois dernier
- Demain
- Semaine prochaine
- Mois prochain
- De - à
- Autre (ouvre un sélecteur de date)
- À tout moment

### Unité d'Organisation { #capture_app_generic_filter_orgunit }

Permet à l'utilisateur de saisir la recherche ou de sélectionner une unité d'organisation dans l'arbre.

### Syncronisation { #capture_app_generic_filter_sync }

Filtrer par :

- Synchronisés (Événements, TEI, Ensembles de données)
- Non synchronisé
- Erreur de synchronisation
- SMS Synchronisé

###  Status de l'Evenement { #capture_app_generic_filter_event }

Filtrer les événements en fonction de :

- Ouvrir
- Horaire
- Retard
- Terminée
- Ignoré

La sélection de plusieurs statuts est autorisée. Lorsque vous ouvrez un TEI, le filtre est conservé dans le tableau de bord et n'affiche que les événements ayant l'état sélectionné.

Les événements affichés ont jusqu'à 5 ans d'âge.

### Date d'inscription { #capture_app_generic_filter_date_enroll }

La " Date d'inscription " s'applique à la date d'inscription du TEI dans le programme. S'il y a plusieurs dates d'inscription, les résultats seront triés en fonction de la date la plus récente. L'étiquette de ce filtre s'affichera lorsqu'elle sera disponible.

### Statut de l'inscription { #capture_app_generic_filter_enroll_status }

Le filtre "Statut de l'inscription" offre trois options : Actif, Terminé, Annulé. Une seule option peut être sélectionnée à la fois. Si vous filtrez par "terminé" et que le TEI a plus d'une inscription, l'application ouvrira l'inscription "active". Pour voir l'inscription terminée, sélectionnez le menu à trois points dans le coin supérieur droit du tableau de bord et sélectionnez "inscriptions au programme".

### Filtrage ajouté dans le tableau de bord TEI : { #capture_app_generic_filter_tei }

Des filtres ont été ajoutés au tableau de bord du TEI. Il est possible de filtrer les événements d'une inscription d'entité suivie par période, par unité d'organisation, par statut de synchronisation, par statut d'événement et par affectation d'utilisateur.

![](resources/images/capture-app-image114.png){ largeur=25%}

## Triage { #capture_app_generic_sorting }

Le tri a été intégré dans le menu filtre.

Le bouton de tri se trouve sur les barres de filtre et se présente de la manière suivante :

- Un seul tri s'applique à la fois. Si l'utilisateur clique sur un autre tri, le précédent se désactive.
- L'icône du tri appliqué indique qu'il est actif, les autres sont inactifs.
- Des clics répétés modifient l'ordre en l'inversant.

![](resources/images/capture-app-image135.png){ largeur=25%}

### Dates (période, date, date d'événement ou date d'inscription) { #capture_app_generic_sorting_dates }

- La date de l'événement précède la date d'échéance, n'utilisez la date d'échéance que lorsqu'il n'y a pas de date d'événement.
- L'ordre va du plus récent au moins récent. Les événements à venir (date d'échéance) sont placés en premier.

### Org units { #capture_app_generic_sorting_orgunits }

- La liste sera triée par ordre alphabétique du nom de l'unité d'organisation.

### Statut de l'inscription { #capture_app_generic_sorting_enrollment }

- La liste sera triée par ordre alphabétique du nom du statut.

![](resources/images/capture-app-image123.png){ largeur=25%}

## Informations sur la synchronisation { #capture_app_generic_sync_info }

Allows the user to check sync information for a specific program. Now the synced records will not show any icon. Only unsynced, error or SMS icons will be displayed.

![](resources/images/capture-app-image67.png){ width=20%} ![](resources/images/capture-app-image69.png){ width=20%}

### Synchronisation granulaire { #capture_app_generic_sync_granular }

Elle permet de synchroniser des enregistrements individuels (Programme, Événement, TEI, Ensemble de données, Valeurs de données) avec le serveur.

![](resources/images/capture-app-image89.png){ largeur=25%} ![](resources/images/capture-app-image161.png){ largeur=25%}

### Synchronisation des SMS { #capture_app_generic_sync_sms }

Lorsqu'il n'y a pas de connexion internet, cette fonction permet d'envoyer un enregistrement via plusieurs SMS. L'enregistrement est marqué comme "SMS synchronisé".

![](resources/images/capture-app-image91.png){ width=25%}

> **Tip**
>
> Edit parameters related to SMS gateway in the SMS Settings (Settings Menu)

![](resources/images/capture-app-image90.png){ largeur=25%}

> **Note**
>
> Note that in order to user the SMS sync capabilities the SMS services needs to be enabled in the server side as described in the (official documentation)[https://docs.dhis2.org/master/en/dhis2_user_manual_en/mobile.html#sms-service]. You can also find more information on how to use different gateways in the (Android Implementation Guidelines)[https://docs.dhis2.org/master/en/dhis2_android_implementation_guideline/about-this-guide.html].

## Unité d'organisation { #capture_app_generic_orgunit }

![](resources/images/capture-app-image30.png){ largeur=25%}

The whole organisation unit tree is displayed. Organisation units not available for data entry will be colored in grey. User must check the box to select the org unit wanted.

> **Avertissement**
>
> Les utilisateurs mobiles ne sont pas censés accéder à la hiérarchie des unités organisationnelles d'un pays entier. Le nombre maximum d'unités d'organisation est difficile à fixer, car ce n'est pas l'application qui fixe la limite, mais les ressources de l'appareil (mémoire, processeur). Nous pourrions dire qu'un nombre inférieur à 250 unités d'organisation devrait être sûr, mais nous pensons toujours que c'est un nombre très élevé pour un cas d'utilisation mobile.

## Ensembles de données { #capture_app_generic_datasets }

L'utilisateur peut maintenant saisir des données agrégées pour une unité d'organisation, une période et un ensemble d'éléments de données et les envoyer au serveur.

![](resources/images/capture-app-image87.png){ largeur=25%} ![](resources/images/capture-app-image93.png){ largeur=25%} ![](resources/images/capture-app-image92.png){ largeur=25%}

## Différencier les ensembles de données, les programmes de suivi et les programmes d'événements { #capture_app_generic_differentiating }

![](resources/images/capture-app-image87.png){largeur=25%}

> **Guide**
>
> Un moyen facile de les différencier est de regarder le mot dans le coin inférieur gauche. Le mot "événement" apparaît toujours dans les programmes d'événements. Dans tracker apparaîtra le nom du type d'entité suivie (personne, patient, bâtiment, etc.). Pour les ensembles de données, le mot "DataSets" sera affiché à côté du nombre d'enregistrements.

## Partage de données { #capture_app_generic_shargin }

![](resources/images/capture-app-image72.png){largeur=25%} ![](resources/images/capture-app-image73.png){ largeur=25%}

## Coordonnées de saisie { #capture_app_generic_capture_coord }

### Coordonnées TEI{ #capture_app_generic_capture_coord_tei }

Saisir les coordonnées TEI dans le formulaire d'enregistrement. Activer cette fonctionnalité dans le champ "TET".

![](resources/images/capture-app-image94.png){ largeur=25%}

### Polygones { #capture_app_generic_capture_coord_polygons }

L'application prend désormais en charge le format geoJSON et l'utilisateur peut saisir des polygones.

![](resources/images/capture-app-image95.png){largeur=25%}

## Images { #capture_app_generic_images }

ValueType image has been implemented app side. This allows to pick an image for a data element or attribute and send it to the server. For TEIs, the first data element/attribute with this value type and marked as displayed in list will be used as the TEI profile image.

![](resources/images/capture-app-image99.png){ largeur=25%} ![](resources/images/capture-app-image98.png){ largeur=25%} ![](resources/images/capture-app-image100.png){ largeur=25%}

Ouvrez l'image du profil TEI en cliquant dessus.

![](resources/images/capture-app-image138.png){ largeur=25%}

## Afficher les événements et les TEI sur des cartes { #capture_app_generic_display_events }

Lorsqu'une étape du programme ou un type d'entité suivi possède un type de caractéristique (et pour les programmes avec enregistrement, l'option "affichage de la liste de la page d'accueil" est activée), les listes peuvent être modifiées afin d'afficher les informations sur une carte. Pour ce faire, cliquez sur l'icône de la carte dans le panneau de navigation.

![](resources/images/capture-app-image101.png){ largeur=25%} ![](resources/images/capture-app-image102.png){ largeur=25%}

If the TEI has a profile image, the map will display it. ![](resources/images/capture-app-image103.png){ width=25%}

# Ensembles de données { #capture_app_datsets }

## Data Sets in Android { #capture_app_datsets_android }

### Navigation Bar (NEW 2.4) { #navigation-bar-new-24 }

Use the new navigation bar to switch between the data entry form and the overview screen.

![](resources/images/capture-app-image139.png){ largeur=25%}

### Overview Screen { #overview-screen }

Le nouvel onglet Aperçu contient les détails suivants :

- Nom de l'ensemble de données
- Dernière mise à jour
- Statut ouvert/fermé
- Période
- Unité d'organisation
- Combo d'options de catégorie

![](resources/images/capture-app-image122.png){ largeur=25%}

#### Sauvegarder un ensemble de données { #saving-a-data-set }

Les règles de validation et la constitution des ensembles de données sont intégrées dans les opérations effectuées à l'aide du bouton de sauvegarde :

- Lorsqu'un ensemble de données est configuré de manière à ne s'achever que si la validation est réussie. Si la validation est réussie, une fenêtre de dialogue s'affiche vous demandant de marquer comme complet. L'application ne permet l'achèvement que si tous les champs obligatoires disposent de valeurs.

![](resources/images/capture-app-image131.png){ largeur=25%}

- en cas d'échec, une boîte de dialogue d'erreur devrait s'afficher et l'ensemble de données ne sera pas marqué comme complet. La description et les instructions de la règle de validation seront affichées pour aider l'utilisateur à identifier l'erreur.

![](resources/images/capture-app-image128.png){ width=25%}

- On a dataset that does not have setup "Complete allowed only if validation passes". When clicking on the save button; if the dataset has validation rules associated to it, then the app will ask the user to run the validation rules.

![](resources/images/capture-app-image130.png){ largeur=25%}

- Si la validation n'est pas réussie, une boîte de dialogue d'erreur devrait s'afficher, mais avec la possibilité de compléter tout de même l'ensemble de données. La description et les instructions de la règle de validation seront affichées pour aider l'utilisateur à identifier l'erreur.

![](resources/images/capture-app-image129.png){ largeur=25%}

- Si l'ensemble de données ne dispose pas de règles de validation, il sera marqué comme complet si tous les champs obligatoires ont une valeur.

### Agrandir les en-têtes de rangée { #increase-row-headers }

La longueur de la première colonne des ensembles de données est désormais calculée de manière à afficher le texte intégral des noms des éléments de données. Les utilisateurs peuvent également ajuster la largeur pour mieux l'adapter à la taille de leur écran.

![](resources/images/capture-app-image113.png){ width=25%}

### Indicators (NEW 2.4) { #indicators-new-24 }

Les indicateurs sont maintenant disponibles dans les formulaires par défaut et de section et sont affichés au bas du formulaire de saisie de données.

![](resources/images/capture-app-image140.png){ largeur=25%}

## Aperçu des fonctionnalités prises en charge { #capture_app_datsets_supported_features }

Vous trouverez ci-dessous une liste complète de toutes les fonctionnalités disponibles pour les ensembles de données dans DHIS2 et des notes indiquant si elles ont été implémentées ou non dans l'application Android de Saisie.

Dans les notes, « administrateur » fait référence à une personne qui développe et configure un système DHIS2, et « utilisateur »  à une personne qui utilise des applications pour saisir des données, les mettre à jour et examiner les rapports.

| Légende | Description |
| :-: | :-- |
| ![](resources/icons/icon-complete.png) | Fonctionnalité implémentée |
| ![](resources/icons/icon-incomplete.png) | Fonctionnalité non implémentée&nbsp; (sera ignoré) |
| ![](resources/icons/icon-na.png) | Non applicable |
| ![](resources/icons/icon-wip.png) | Travail en cours. La fonctionnalité n'est pas encore complètement implémentée (pour le moment) ou présente une attitude inattendue déjà signalée. |

| Fonctionnalité | Description de la fonctionnalité | Statut | Notes relatives à la mise en œuvre |
| --- | --- | :-: | --- |
| Type de période | Détermine la période couverte par la saisie des données. | ![](resources/icons/icon-complete.png) |  |
| Jours d'expiration | Définit le délai (jours après la période) après lequel DHIS2 verrouille toutes les entrées de données pour la période (0 signifie aucun verrouillage). Les périodes peuvent toujours être ouvertes, mais les cellules seront grisées. | ![](resources/icons/icon-complete.png) |  |
| Ouvrir les futures périodes pour la saisie de données | Ce paramètre peut être utilisé pour déverrouiller la période en cours ou toutes les périodes jusqu'à un certain moment futur. | ![](resources/icons/icon-complete.png) |  |
| Périodes de saisie des données | Vous permet de définir une plage de dates spécifique pour la saisie des données d'une période et empêche la saisie des données des périodes qui ne font pas partie de cette plage de dates. | ![](resources/icons/icon-complete.png) |  |
| Jours accordés après le délai pour entrer des données | Définit la date limite (jours après la période) après laquelle DHIS2 considère la saisie des données comme « en retard ». | ![](resources/icons/icon-complete.png) |  |
| [Attribut] combinaison de catégories | Permet à un administrateur de joindre une catégorie (ensemble d'options) à l'ensemble de données, en générant un écran de saisie de données distinct pour chaque option (Il s'agit dans le DHIS2 d'une combinaison de catégories d'attributs2). | ![](resources/icons/icon-complete.png) |  |
| [Attributs] Restrictions sur les options de combinaison de catégories | Si des combinaisons de catégories d'attributs (voir ci-dessus) sont utilisées, cette fonctionnalité donne aux administrateurs la possibilité de restreindre les options spécifiques disponibles dans le menu déroulant. Chaque option peut être limitée à une plage particulière de dates et/ou d'unités d'organisation, et cette option ne s'affichera pas si les données sont saisies en dehors de ces dates ou unités d'organisation. | ![](resources/icons/icon-complete.png) |  |
| Compléter les destinataires de la notification | Envoie un message DHIS2 au groupe d'utilisateurs sélectionné lorsque l'ensemble de données est marqué "complet". | ![](resources/icons/icon-incomplete.png) |  |
| Envoyer une notification à l'utilisateur qui saisie des données | Envoie un message DHIS2 à l'utilisateur saisisseur de données lorsque l'ensemble de données est marqué « complet ». | ![](resources/icons/icon-incomplete.png) |  |
| Tous les champs des éléments de données sont obligatoires | Lorsqu'une ou plusieurs catégories sont utilisées pour désagréger un élément de données, ce paramètre oblige l'utilisateur soit à effectuer toutes les désagrégations, soit à les laisser toutes vides. | ![](resources/icons/icon-complete.png) |  |
| Compléter seulement en cas de validation | Permet seulement à l'ensemble de données d'être marqué complété lorsqu'aucune règle de validation n'est activée. | ![](resources/icons/icon-complete.png) |  |
| Ignorer l'option hors connexion | Exige de l'utilisateur qu'il ajoute un "commentaire" si une valeur n'est pas compléter (ou si l'ensemble de données ne peut pas être "complété"). Cette fonction permet à l'ensemble de données de n'être sélectionné que pour la saisie de données lorsque vous êtes connecté à Internet (bien qu'une fois sélectionné, la saisie puisse continuer hors connexion). | ![](resources/icons/icon-incomplete.png) |  |
| Décoration des éléments de données | Affiche la description de l'élément de données lorsque la souris survole son Nom. | ![](resources/icons/icon-complete.png) |  |
| Formulaires de section - Présenter les sections comme des onglets | Présente chaque section du formulaire comme un onglet distinct, au lieu de toutes les regrouper sur une même page. | ![](resources/icons/icon-incomplete.png) |  |
| Formulaires de section - rendre vertical |  | ![](resources/icons/icon-incomplete.png) |  |
| Élément de données - Combinaisons de catégories | Permet à un élément de données distinct d'être automatiquement désagrégé en une ou plusieurs catégories (par exemple, hommes/femmes et enfants/adultes), avec des champs/valeurs séparés et collectés pour chacune de ces désagrégations. | ![](resources/icons/icon-complete.png) |  |
| Indicateurs intégrés / total des formulaires de section | Active la combinaison de catégorie par défaut pour chaque élément de données qui doit être remplacé par une combinaison différente, pour cet ensemble de données uniquement. | ![](resources/icons/icon-complete.png) |  |
| Formulaires de section - Présenter les sections comme des onglets | L'ajout d'indicateurs aux ensembles de données les rend utilisables dans les formulaires de section et les formulaires personnalisés ; le total des lignes et/ou des colonnes peut également être ajouté à ces formulaires. (Les deux sont affichés à l'écran à côté des cellules de saisie de données et se mettent à jour automatiquement au fur et à mesure que les valeurs sont ajoutées.) | ![](resources/icons/icon-incomplete.png) |  |
| Attribution d'unité d'organisation | Garantit que l'ensemble de données ne soit disponible que pour les unités d'organisation auxquelles il a été attribué. | ![](resources/icons/icon-complete.png) |  |
| Éléments de données obligatoires | Cela permet de marquer des éléments de données/Combinaisons de catégories spécifiques comme « obligatoires », ce qui signifie que les utilisateurs doivent saisir une valeur (ces parties ne doivent pas être laissées vides). | ![](resources/icons/icon-complete.png) |  |
| Formulaires - formulaires par défaut | DHIS2 affiche automatiquement le formulaire sous forme de tableau(x), avec un nouveau tableau qui apparait chaque fois que les combinaisons de catégories changent (= différents en-têtes de colonne). | ![](resources/icons/icon-complete.png) |  |
| Formulaires - formulaires de section | Les formulaires de section et les titres de section peuvent être spécifiés, ce qui vous donne plus de contrôle sur le regroupement et la présentation de formulaires (mais cela se fait toujours automatiquement). Ce formulaire de section remplace automatiquement le formulaire par défaut s'il est implémenté. | ![](resources/icons/icon-complete.png) |  |
| Formulaires - formulaires personnalisés | Un formulaire HTML personnalisé peut être conçu, donnant un contrôle total sur la mise en forme et permettant d'inclure un code JavaScript dans le formulaire. Ce formulaire personnalisé remplace automatiquement les formulaires par défaut et les formulaires de section lorsqu'ils sont implémentés. | ![](resources/icons/icon-incomplete.png) |  |
| Formulaires de section - désactiver des champs (griser) | Avec les formulaires de section, cette fonction vous permet de "griser" distinctement les champs (tout un élément de données ou des options de combinaison de catégories spécifiques) afin que les utilisateurs ne puissent pas y saisir de données. | ![](resources/icons/icon-complete.png) |  |
| Formulaires de plusieurs unités d'organisation | Lorsque ce paramètre de serveur est activé, la présentation  des formulaires est modifiée pour afficher plusieurs unités d'organisation sous forme de lignes et tous les éléments de données/combinaisons de catégorie sous forme de colonnes (c'est-à-dire un formulaire très plat et large par unité d'organisation). | ![](resources/icons/icon-incomplete.png) |  |
| Fenêtre contextuelle des valeurs de données : marquer la valeur pour le suivi | Permet à l'utilisateur de marquer cette valeur de données spécifique pour le suivi (les valeurs marquées peuvent être examinées dans l'application web Qualité des Données). | ![](resources/icons/icon-incomplete.png) |  |
| Fenêtre contextuelle des valeurs de données : ajouter un commentaire à la valeur | Permet à l'utilisateur d'ajouter un commentaire à cette valeur de données spécifique. | ![](resources/icons/icon-incomplete.png) |  |
| Fenêtre contextuelle des valeurs de données : affiche l'historique des éléments de données | Affiche l'historique de cet élément de données spécifique (c'est-à-dire les valeurs des 12 mois précédents). | ![](resources/icons/icon-incomplete.png) |  |
| Fenêtre contextuelle des valeurs de données : afficher le journal d'audit | Affiche un historique des précédentes modifications apportées à cette valeur de données spécifique. | ![](resources/icons/icon-incomplete.png) |  |
| Fenêtre contextuelle des valeurs de données : plages min/max (également accessibles via l'application Administration de Données) | Cette fonctionnalité permet aux utilisateurs de définir des valeurs minimales et maximales attendues pour un élément de données, permettant au DHIS2 de mettre en évidence les valeurs en dehors de cette page lors de la saisie des données (mais cela n'empêche pas l'enregistrement ou l' "achèvement"). Vous pouvez définir les plages min/max automatiquement/en masse (via l'application Administration des Données) ou manuellement/individuellement (via l'application Saisie des Données). | ![](resources/icons/icon-incomplete.png) |  |
| Imprimer le formulaire / imprimer le formulaire vierge | Rend possible l'impression d'un formulaire de saisie de données, pour permettre la saisie de données sur papier et  ultérieurement. | ![](resources/icons/icon-incomplete.png) |  |
| Enregistrer des données | Les données saisies sur l'écran ne sont conservées que lorsqu'elles sont "enregistrés". Jusque-là, elles ne sont conservées qu'en mémoire. Elles sont perdues si l'alimentation est coupée, etc. | ![](resources/icons/icon-complete.png) |  |
| Compléter l'ensemble de données | Cette fonction permet à l'utilisateur de marquer la saisie de données pour une période/unité d'organisation, etc. comme "complète". Notez que cela n'est valable que pour le suivi de la saisie des données et le respect des délais, et ne verrouille pas l'ensemble de données ni n'empêche d'autres modifications. | ![](resources/icons/icon-complete.png) |  |
| Éléments de données : règles de validation | Permet l'établissement de règles (au niveau de l'élément de données) afin de mettre en application la qualité des données, sur la base de la comparaison de différentes valeurs/collections de valeurs. (Par exemple, le nombre de patients vus au cours du mois doit être inférieur au nombre de visites pour le mois.) | ![](resources/icons/icon-complete.png) |  |
| Niveaux de partage des données/Peut saisir des données | Permet à l'utilisateur d'ajouter de nouvelles valeurs, de modifier des valeurs ou de les supprimer dans l'ensemble de données. | ![](resources/icons/icon-complete.png) |  |
| Niveaux de partage de données/Peut afficher les données | Permet à l'utilisateur de consulter les valeurs dans l'ensemble de données. | ![](resources/icons/icon-complete.png) |  |
| Niveaux de partage des données/Pas d'accès | L'utilisateur ne pourra pas voir l'ensemble de données. | ![](resources/icons/icon-complete.png) |  |
| Processus d'approbation des données | Si un administrateur sélectionne un processus d'approbation des données préconfiguré, celui-ci sera utilisé pour appliquer un flux « d'approbation » ou « d'acceptation et d'approbation », permettant aux utilisateurs d'approuver et de verrouiller les données. | ![](resources/icons/icon-complete.png) | Le processus d'approbation doit être effectuer en ligne. Une fois qu'un ensemble de données est approuvé, les données ne seront plus modifiables dans l'application. |
| Les valeurs manquantes nécessitent un commentaire complet | Toute valeur manquante nécessitera un commentaire pour justifier son absence. | - |  |

# Programmes { #capture_app_programs }

## Programs in Android { #capture_app_programs_android }

### New Navigation Bar (NEW 2.4) { #new-navigation-bar-new-24 }

Use the new navigation bar to move from one screen to another.

#### Événements { #events }

1. Détails
2. Saisie des données
3. Analyses
4. Notes

![](resources/images/capture-app-image141.jpg){ largeur=25%}

#### Tableau de bord des TEI { #tei-dashboard }

1. Détails
2. Analyses
3. Relations 
4. Notes

![](resources/images/capture-app-image142.jpg){ largeur=25%}

#### Liste des événements pour les programmes d'événements et de Tracker { #event-listing-for-event-and-tracker-programs }

1. Vue en liste
2. Affichage de la carte

![](resources/images/capture-app-image143.jpg){ largeur=25%} ![](resources/images/capture-app-image144.jpg){ largeur=25%}

### Complete/Re-open event { #capture_app_programs_complete_reopen }

User must enter the event and then click the complete icon in the bottom right corner.

![](resources/images/capture-app-image37.jpg){ width=25%} ![](resources/images/capture-app-image74.png){ width=25%}

Two options will be presented:

1. Finish and Complete
2. Finish

![](resources/images/capture-app-image75.png){ width=25%}

> **Note**
>
> To verify if an event is completed look at the icon, it must be a green checked box.

> **Note**
>
> The app needs to take into consideration if the user has the correct authority (‘Uncomplete events’) to reopen a completed event.

### Field completion percentage { #capture_app_programs_field_percentage }

Le pourcentage de données achevées pour chaque événement est affiché dans le coin supérieur droit de l'événement lorsqu'il est ouvert après le premier enregistrement.

![](resources/images/capture-app-image80.png){ largeur=25%}

> **Note**

### Sections Navigation { #capture_app_programs_sections_nav }

The display for sections has been redesigned for a more simple user experience. In addition, the sections in enrollment form are now supported and are aligned with the design of the event sections.

![](resources/images/capture-app-image115.png){ largeur=25%} ![](resources/images/capture-app-image116.png){ largeur=25%}

### Error messages { #capture_app_programs_errors }

The app will now list the name of the mandatory fields missing when the user tries to complete an event or enrollment. The sections containing the missing fields will be highlighted to help the user find the missing fields.

![](resources/images/capture-app-image117.png){ largeur=25%}

The errors and warnings are also shown as an indicator next to the section name.

![](resources/images/capture-app-image145.png){ largeur=25%}

### Event Notes { #capture_app_programs_event_notes }

Il est possible d'ajouter des notes aux événements dans les programmes d'événements uniques et dans les événements des étapes du programme. Les notes sont disponibles dans un nouvel onglet du formulaire de saisie des données.

![](resources/images/capture-app-image106.png){ largeur=25%} ![](resources/images/capture-app-image107.jpg){ largeur=25%}

### Cartes { #capture_app_programs_maps }

#### Map Layers { #capture_app_programs_map_layers }

The possible layers to display in maps are:

- Afficher les événements (Pour les programmes sans enregistrement)
- Vue par satellite
- Coordonnées de TEI (Par défaut dans les programmes avec enregistrement)
- Coordonnées d'inscription (uniquement pour les programmes avec enregistrement)
- Coordonnées d'étape de programme (uniquement pour les programmes avec enregistrement)
- Relations (Uniquement pour les programmes avec enregistrement)
- Carte thermique (Uniquement pour les programmes avec enregistrement)
- Attributs d'entité suivie (type de valeur des coordonnées - uniquement pour les programmes avec enregistrement)
- Éléments de données (type de valeur des Coordonnées)

The user can select one or more layers to be displayed.

The maps will display coordinates and polygons.

![](resources/images/capture-app-image125.png){ width=25%} ![](resources/images/capture-app-image146.png){ width=25%} ![](resources/images/capture-app-image136.png){ width=25%}

#### Map Carousel { #capture_app_programs_map_carousel }

On the map view of the program, a carousel of cards is displayed, one for each enrolled TEI (Tracker programs) or Event(Event programs).

- Les cartes de TEI sur le carrousel se présentent de la même façon que la liste de TEI.

- En défilant horizontalement dans le carrousel, la carte agrandit les coordonnées sélectionnées. Si le champ des coordonnées est vide, un message s'affiche à la place.

![](resources/images/capture-app-image126.jpg){ width=25%} ![](resources/images/capture-app-image133.png){ width=25%}

Chaque carte affiche les attributs d'entité suivie (pour les programmes Tracker) et les éléments de données (pour les programmes d'événement) configurés « Afficher dans la liste ».

![](resources/images/capture-app-image147.png){ largeur=25%}

#### Map Relationships { #capture_app_programs_map_relationships }

In tracker, the user can see relationships on a map by tapping the map icon on the relationships tab.

- Une flèche indique le sens de la relation.
- Pour les relations bidirectionnelles, la flèche pointe vers les deux côtés.
- Chaque type de relation affiche une couleur différente.
- Si un ou les deux TEI ont un polygone pour coordonnée, la ligne va du (et vers le) point le plus proche des deux TEI dans le polygone.

![](resources/images/capture-app-image132.png){ width=25%}

#### Map Current Location (NEW 2.4) { #map-current-location-new-24 }

If the user grants location permissions to the App, the map will show the current location represented as a blue color dot.

![](resources/images/capture-app-image148.png){ largeur=25%}

#### Map Navigation to Location (NEW 2.4) { #map-navigation-to-location-new-24 }

If the TEI or event has coordinates a navigation icon will be displayed at the top right of the card. Click to open the location in a maps App.

![](resources/images/capture-app-image149.jpg){ width=25%} ![](resources/images/capture-app-image150.jpg){ width=25%} ![](resources/images/capture-app-image151.jpg){ width=25%}

### Working Lists (NEW 2.4) { #working-lists-new-24 }

Working lists are now compatible with the Android app. Once a list is selected, the filters will be blocked and not allowed to change until the user resets the search.

Working lists are available in Event and Tracker Programs.

![](resources/images/capture-app-image152.jpg){ width=25%} ![](resources/images/capture-app-image153.jpg){ width=25%}

### Program Indicators (NEW 2.4) { #program-indicators-new-24 }

The new analytics tab now supports displaying text and key/value pair in feedback or indicator section.

![](resources/images/capture-app-image154.jpg){ width=25%}

### Legends (NEW 2.4) { #legends-new-24 }

Legends are now available in Android App. It will be shown next to value with the respective color and label.

![](resources/images/capture-app-image155.jpg){ width=25%}

## Program with registration in Android { #capture_app_programs_with_reg }

### Conception de cartes TEI { #capture_app_programs_tei_design }

The new TEI Card design includes:

- Date de la dernière mise à jour
- Other enrollments in programs with displayFrontPageList
- At least **3 main attributes**.
  - If there are more, there will be an arrow to display the full list (only attributes with displayInList option)
- Libellé du statut de l'inscription lorsqu'il est **terminé** ou **annulé**
- Icône En retard, si un événement en retard existe avec la date de l'événement en retard le plus récent
- Image de la carte (l'une des options suivantes) :
  - Photo de profil si disponible ou
  - Première lettre du premier attribut ou
  - Icône du type d'entité suivie
  - Un tiret sera affiché si aucune des options n'est disponible

![](resources/images/capture-app-image124.png){ width=25%}

### Terminer/désactiver l'inscription { #capture_app_programs_complete_deactivate_enrollment }

To complete or deactivate an enrollment, click on three dot menu in the right upper corner and select "Complete" or "Deactivate".

![](resources/images/capture-app-image76.jpg){ largeur=25%}

### Réinitialiser les champs de recherche { #capture_app_programs_reset_search }

All tracker programs will take the user to the search screen. The search fields are used to look up for a specific entity, and the circled arrow to reset the search. All fields will be blank for the user to do a new search.

At first, the user is obligated to do a search. if there are no coincidences, the search button will change to an ‘Add’ button for the user to create a new enrollment.

![](resources/images/capture-app-image78.PNG){ width=25%} ![](resources/images/capture-app-image79.PNG){ width=25%}

### Écran de recherche pour tous les types d'entités suivies { #capture_app_programs_search_screen }

User is able to search across all program of one tracked entity type (TET). In the Search screen there is a drop down which shows all the programs available for the active TET (active TET is defined by the selection of the program in the home screen). That drop down should also have an option with TET name. (for example: person)

Lorsque l'utilisateur sélectionne cette option, les champs de recherche disponibles seront uniquement des attributs de TET (pas d'attributs spécifiques à un programme). Les restrictions de recherche ne s'appliquent pas, car elles concernent tous les programmes.

![](resources/images/capture-app-image44.png){ largeur=25%} ![](resources/images/capture-app-image22.png){ largeur=25%}

La recherche renverra les TEI trouvées dans la base de données locale ainsi que celles de l'OU de recherche de l'utilisateur (lorsque l'utilisateur est en ligne). Pour celles trouvées en ligne, l'utilisateur devra les sélectionner pour qu'elles soient téléchargées.

> **Remarque**
>
> Lors de la configuration des unités d'organisde recherche, assurez-vous que votre org. unités sont contenues dans votre organisation de recherche. unités, pour ce faire, capturez org. unités doivent être sélectionnés ainsi que recherche org. unités.

### Tableau de bord de TEI dans les programmes { #capture_app_programs_tei_dashboard }

L'utilisateur peut voir le tableau de bord TEI sans aucun programme s'il sélectionne le TEI dans la liste alors que la recherche était sans programme.

Les tableaux de bord afficheront la liste des inscriptions actives.

![](resources/images/capture-app-image22.png){ largeur=25%} ![](resources/images/capture-app-image38.png){ largeur=25%}

### Historique des inscriptions TEI et nouvelle inscription { #capture_app_programs_tei_history }

User is able to see the complete historical record of the TEI. Clicking on the top right corner menu, select "Program Enrollments" and a list of Active enrollments will be displayed, followed by a list of past enrollments (completed or cancelled), followed by the programs in which the TEI could be enrolled. User can also return to the 'TEI Dashboard without any program' by selecting 'All enrollments'.

Users should be able to navigate to the different enrollments from the list.

![](resources/images/capture-app-image40.jpg){ width=25%} ![](resources/images/capture-app-image7.png){ width=25%}

### Supprimer les TEI et les inscriptions { #capture_app_programs_delete_tei }

To delete a TEI or an enrollment, select In the TEI dashboard, the three dots menu.

Local TEI or Enrollment will be deleted from the database. Records that has been previously synced with the server will be marked for deletion if the user has the authority:

- F_INSCRIPTION_CASCADE_SUPPRIMER
- F_TEI_SUPPRIMER_CASCADE

They will show in the TEI search list, but will not be accessible.

> **Note**
>
> When users enter a TEI and while it is not synced to the server they will be able to delete the TEI and the enrollment even if they have not been asigned these authorities. This is by design and to allow users rolling back in case of having entered wrong data (TEI and/or enrollment) and thus preventing it reaching the server and requiring another user with higher privileges to fix the issue.

![](resources/images/capture-app-image86.jpg){ largeur=25%}

### Vue de groupe des étapes du programme dans le tableau de bord des TEI { #capture_app_programs_group_view }

The TEI Dashboard offers now the possibility to change the list of events from the chronological view to a stage grouping view. The stage grouping view will group and collapse the events per program stage. Each program stage group can be expanded by the user and the events will be displayed chronologically.

![](resources/images/capture-app-image108.png){ largeur=25%} ![](resources/images/capture-app-image109.jpg){ largeur=25%}

### Hériter des valeurs { #capture_app_programs_inherit_values }

Lors de la création d'une nouvelle TEI pour une relation, héritez de tous les attributs de programme marqués du signe d'héritage, sur le web.

Cela signifie que tous les attributs existants dans la première TEI doivent être transmis à la nouvelle et être affichés dans le formulaire d'enregistrement.

### Briser le verre { #capture_app_programs_breaking_the_glass }

The ‘breaking the glass’ feature is not yet supported in DHIS2 Android Capture App. If the program is configured as ‘Protected’, the default behavior for Android will be the same as if the program is configured as ‘closed.’ This means that an Android user will not be able to read or edit enrollments of a TEI outside of their capture org units. TEIs registered in a Search OU will be returned by the TE Type search but if the program is closed or protected the user will not be allowed to see or create a new enrollment. If Android users must be able to access TEI outside of their data capture org unit, the program should be configured with access level ‘Open.’

![](resources/images/capture-app-image137.jpg){ width=25%}

### Analytic charts (NEW 2.4) { #analytic-charts-new-24 }

Il est possible d'afficher l'évolution des éléments de données sous forme de graphiques, de valeurs ou de tableaux. Ces éléments de données doivent être présentés sous forme de valeurs numériques et configurés dans une étape répétable.

1. Valeur unique : Elle affichera la valeur la plus récente du programme.

![](resources/images/capture-app-image156.jpg){ width=25%}

2. Graphiques : Il est possible d'afficher les valeurs dans un graphique linéaire ou un graphique à barres.

![](resources/images/capture-app-image157.jpg){ width=25%} ![](resources/images/capture-app-image158.jpg){ width=25%}

Les graphiques sur la croissance nutritionnelle sont présentés selon les normes de l'OMS. Cette option permet d'afficher une image en arrière-plan et d'appliquer l'axe (0 à 5 mois) suivant le modèle de l'OMS.

![](resources/images/capture-app-image159.jpg){ width=25%}

3. Les tableaux :  afficheront les éléments de données ou les indicateurs dans les lignes et périodes au sein les colonnes.

![](resources/images/capture-app-image160.jpg){ width=25%}

## Aperçu des fonctionnalités prises en charge { #capture_app_programs_supported_features }

The following is a comprehensive list of all features available for Programs with and without registration in DHIS2, and notes on whether or not these have been implemented in the Android Capture app.

Dans les notes, « administrateur » fait référence à une personne qui développe et configure un système DHIS2, et « utilisateur »  à une personne qui utilise des applications pour saisir des données, les mettre à jour et examiner les rapports.

| Légende | Description |
| :-: | :-- |
| ![](resources/icons/icon-complete.png) | Fonctionnalité implémentée |
| ![](resources/icons/icon-incomplete.png) | Fonctionnalité non implémentée&nbsp; (sera ignoré) |
| ![](resources/icons/icon-na.png) | Non applicable |
| ![](resources/icons/icon-wip.png) | Travail en cours. La fonctionnalité n'est pas encore complètement implémentée (pour le moment) ou présente une attitude inattendue déjà signalée. |

### Programme { #capture_app_programs_supported_features_program }

| Fonctionnalité | Description de la fonctionnalité | Programme avec inscription | Programme sans inscription | Notes relatives à la mise en œuvre |
| --- | --- | :-: | :-: | --- | --- |
| Méthode de saisie des données pour les ensembles d'options | Permet à un administrateur de choisir le mode d'affichage des options sur l'écran, à travers tout le programme (c'est-à-dire sous forme de listes déroulantes ou de boutons radio) | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-incomplete.png) | Ce sera remplacé par les nouvelles options. |
| Combination of categories<br />(Attribute CatCombo) | Permet à un administrateur de joindre une catégorie (ensemble d'options) au programme, obligeant les utilisateurs à catégoriser chaque inscription. (Il s'agit dans le DHIS2 d'une combinaison de catégories d'attributs) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Processus d'approbation des données | If an admin selects a pre-configured Data Approval Workflow, this will be used to enforce an &lsquo;approval&rsquo; or &lsquo;acceptance and approval&rsquo; cascade, enabling users to sign-off and lock data. | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-incomplete.png) |  |
| Afficher la liste de la première page | If this option is ticked, the landing page displays a list of active enrolments once an Org Unit and Program have been chosen. (Attributes shown are those ticked as &lsquo;display in list&rsquo;.) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| La première étape apparaît sur la page d'enregistrement | Lorsque cette option est choisie lors de l'inscription au programme, l'écran de la première étape du programme s'affiche également (l'inscription et le premier événement sont entrés ensemble sur un seul écran). | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) | Avec Android, cette fonctionnalité est implémentée en ouvrant automatiquement l'événement une fois l'inscription terminée, au lieu d'ajouter le formulaire au même écran. |
| Jours d'expiration des événements complétés | Permet aux administrateurs de verrouiller la saisie de données quelque temps après la fin d'un événement. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Type de périodes d'expiration + jours d'expiration | Permet aux administrateurs de définir une période (hebdomadaire ou mensuelle par exemple) et de verrouiller la saisie de données quelques jours suivant la fin de la période. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Autoriser les dates d'inscription futures | Lorsque cette option est cochée, l'utilisateur peut entrer des dates d'inscription futures pour des inscriptions à un programme ; dans le cas contraire, les utilisateurs sont limités au jour présent ou à des dates passées. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Autoriser les dates d'inscription futures | Lorsque cette option est cochée, l'utilisateur peut entrer des dates d'incident futures lors des inscriptions à un programme ; dans le cas contraire, les utilisateurs sont limités au jour présent ou à des dates passées. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Inscrire une seule fois (par durée de vie d'instance d'entité suivie) | Cette option, lorsqu'elle est cochée, empêche une TEI (par exemple, une personne) d'être inscrite à ce programme plus d'une fois. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Afficher la date de l'incident | Lorsque cette option est cochée, les dates d'inscription et d'incident sont présentées à l'utilisateur pour la saisie des données ; dans le cas contraire, seule la date d'inscription est affichée/saisie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Description de la date de l'incident | Permet à un administrateur de personnaliser le libellé utilisé pour la date de l'incident. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Description de la date d'inscription | Permet à un administrateur de personnaliser le libellé utilisé pour la date d'inscription. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Saisir les coordonnées (inscription) | Permet aux utilisateurs de saisir des coordonnées géographiques lors de l'inscription au programme. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Entrer un polygone (inscription) | Permet aux utilisateurs d'entrer les positions (zones fermées) lors de l'inscription au programme. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Coordonnées des TEI | Permet aux utilisateurs de saisir les coordonnées géographiques de la TEI lors de l'inscription au programme. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Relations : créer et mettre à jour | Permet aux utilisateurs de créer et de mettre à jour des relations. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Relations - lien direct pour ajouter un parent | Cette fonction permet aux administrateurs d'ajouter un lien pour une relation spécifique sur le tableau de bord ; ce qui permet aux utilisateurs de créer directement une TEI avec lien (par exemple, un patient "enfant"). | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-na.png) |  |
| Attributs : afficher dans la liste | Ce paramètre détermine si un attribut peut être affiché dans des listes telles que les résultats de recherche, et s'il peut l'être dans la liste restreinte des attributs affichés dans la rubrique "Profil" du tableau de bord. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) | Les trois premiers attributs seront affichés |  |
| Attributs : obligatoires | This enables an admin to mark an Attribute as "mandatory";, meaning the enrolment can&rsquo;t be saved until a value is captured. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Attributs : date dans le futur | Pour les attributs de date, cette fonction permet à un administrateur d'empêcher ou d'autoriser l'entrée de dates futures. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Formulaire d'enregistrement- par défaut | Le formulaire de saisie de données par défaut répertorie tous les attributs définis pour la TEI. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Formulaire d'inscription - personnaliser | Cette fonction permet à un administrateur de définir une disposition personnalisée (en utilisant le format HTML) pour le formulaire d'inscription. | - | ![](resources/icons/icon-na.png) | Les dispositions personnalisées ne sont pas prises en charge par l'application Android |  |
| Notifications de programme | Vous pouvez configurer des notifications automatiques en cas d'inscriptions ou d'achèvements de programme, ou à un intervalle défini avant/après les dates d'incident ou d'inscription. Ces derniers peuvent être envoyés sous forme de messages internes de DHIS 2, d'e-mails ou de SMS. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | Cette fonctionnalité s'exécute au niveau du serveur, dès que les données sont reçues. Elle ne s'exécutera pas si l'application fonctionne hors ligne. |  |
| Activer/désactiver l'inscription | Si vous désactivez un tableau de bord d'une TEI, celui-ci passe "en lecture seule". Vous ne pouvez donc pas saisir de données, ni inscrire la TEI, ni modifier le profil de la TEI. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Compléter seulement en cas de validation | Cochez la case pour qu'un événement créé par ce programme ne soit terminé que si toutes les règles de validation sont respectées. | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-incomplete.png) |  |
| Dates d'ouverture/fermeture de l'unité d'organisation | Permet à un administrateur de définir des dates d'ouverture et de fermeture pour une unité d'organisation, ce qui empêche les utilisateurs d'ajouter ou de modifier des événements en dehors de ces dates. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Niveaux de partage des données/Peut saisir des données | Permet à l'utilisateur d'ajouter un nouvel événement, de modifier des données et de supprimer des événements dans le programme. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Niveaux de partage de données/Peut afficher les données | Permet à l'utilisateur de visualiser la liste des événements dans le programme. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Niveaux de partage des données/Pas d'accès | L'utilisateur ne pourra pas consulter le programme | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |

### Étape du programme { #capture_app_programs_supported_features_program_stage }

| Fonctionnalité | Description de la fonctionnalité | Programme avec inscription | Programme sans inscription | Notes relatives à la mise en œuvre |
| --- | --- | :-: | :-: | --- |
| Formulaire d'événement - par défaut | Le formulaire de saisie de données par défaut répertorie tous les attributs appartenant à une inscription de programme | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Formulaire d'événement - formulaires de section | Les formulaires de sections vous permettent de diviser les formulaires existants en segments | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Formulaire d'événement - personnaliser | Définissez un formulaire d'événement personnalisé en tant que page HTML. | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-incomplete.png) | Les dispositions personnalisées ne sont pas prises en charge par l'application Android |
| Notifications d'étape de programme | Vous pouvez configurer des notifications automatiques en cas d'achèvement de l'étape du programme ou à un intervalle défini avant/après les dates d'événements programmés. Ces derniers peuvent être envoyés sous forme de messages internes de DHIS 2, d'e-mails ou de SMS. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) | Cette fonctionnalité s'exécute au niveau du serveur, dès que les données sont reçues. Elle ne s'exécutera pas si l'application fonctionne hors ligne. |
| Répétable | Si l'option Répétable est cochée, cette étape peut être répétée lors d'une inscription à un programme. Dans le cas contraire, l'étape ne peut se produire qu'une seule fois lors d'une inscription à un programme. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Répétable | Si l'option Répétable est cochée, cette étape peut être répétée lors d'une inscription à un programme. Dans le cas contraire, l'étape ne peut se produire qu'une seule fois lors d'une inscription à un programme. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Répétable + Jours d'intervalle standard | Le système proposera la date d'échéance en additionnant la date du dernier événement aux dates d'intervalle standard. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Type de période | Permet à un administrateur de configurer un ensemble de périodes (par exemple, des semaines ou des mois) pour chaque événement de l'étape du programme, au lieu d'une simple date. Lors de la création d'événements, les utilisateurs seront invités à choisir une période (au lieu d'une date) pour chaque nouvel événement qu'ils créent au cours de cette étape du programme. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Evénement généré automatiquement | Si cette option est cochée, une "réservation" est générée pour cette étape du programme lors de l'inscription, en fonction des "jours programmés depuis le début". | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Générer des événements en fonction de la date d'inscription (et non de la date de l'incident) | Cochez cette option pour générer automatiquement les dates d'échéance des événements des étapes de ce programme, en fonction de la date d'inscription. Si elle n'est pas cochée, les dates d'échéance sont générées en fonction de la date de l'incident. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Ouvrir le formulaire de saisie de données après l'inscription + date de rapport à utiliser | If selected, once an enrolment is complete, an event&rsquo;s data entry form should open directly afterwards. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Demander à l'utilisateur de compléter le programme lorsque l'étape est terminée | Si ce paramètre est sélectionnée, à la fin de l'étape du programme, l'utilisateur doit être invité à compléter le programme. (Il est ignoré si le paramètre "Demander à l'utilisateur de créer un nouvel événement" est également coché.) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Demander à l'utilisateur de créer un nouvel événement lorsque l'étape est terminée | Si cette option est sélectionnée, lorsque l'étape du programme est terminée, l'utilisateur est invité à réserver. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Masquer la date d'échéance | La date réelle des événements est affichée et la date d'échéance est masquée. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Entrer les coordonnées (événement) / Fonctionnalité Type-Point | Enables the user to capture geographical coordinates when each event is created ![](resources/icons/icon-incomplete.png) particularly useful in devices that have GPS (eg Android), as instead of having to type in coordinates, the user can automatically populate them with the press of a button. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Entrer un polygone (événement) / Type de fonctionnalité -Polygone | Cette fonction permet aux utilisateurs d'entrer des positions (zones fermées) lors de la création de chaque événement. Un polygone doit contenir au moins 4 points. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Description de la date de rapport | Allows an admin to customize the label that is used for the event&rsquo;s date. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Éléments de données - obligatoires | Cette fonctionnalité permet à un administrateur de marquer un élément de données comme "obligatoire", ce qui signifie qu'un évènement n'est enregistrée que si valeur est saisie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Éléments de données-autoriser l'extraction de données à partir d'autres sources | Sur le formulaire, une case à cocher est placée à côté de l'élément de données sélectionné et permet d'extraire les données précédentes vers l'élément de données. | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-na.png) |  |
| Éléments de données - afficher dans les rapports | La valeur de cet élément de données est affichée dans l'événement unique avec la fonction de saisie de données d'enregistrement désactivée. | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-complete.png) |  |
| Éléments de données-date dans le futur | Pour les éléments de données de date, cette fonction permet à un administrateur d'empêcher ou d'autoriser l'entrée de dates futures. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Eléments de données - radio comme options de rendu | Permet à un administrateur de choisir le mode d'affichage des options sur l'écran, pour chaque élément de données (c'est-à-dire sous forme de listes déroulantes ou de boutons radio) | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-incomplete.png) |  |
| Bloquer le formulaire de saisie une fois complété | Empêche toute modification apportée aux événements dès qu'elles sont terminés. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Commentaires sur l'événement | Permet à l'utilisateur d'ajouter des commentaires à un événement. Ces commentaires sont cumulatifs (les nouveaux commentaires sont ajoutés à la suite des commentaires déjà existants). | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-na.png) |  |

### Programme avec enregistrement : Tableau de bord des entités suivies { #capture_app_programs_supported_features_program_with_reg }

| Fonctionnalité | Description de la fonctionnalité | Statut | Notes relatives à la mise en œuvre |
| --- | --- | :-: | --- | --- |
| Messagerie | Cette fonction permet aux utilisateurs d'envoyer des messages en texte libre ponctuels aux TEI (par exemple, les patients) par SMS ou par e-mail. | ![](resources/icons/icon-incomplete.png) |  |
| Marquer pour suivi (bouton avec le triangle d'exclamation) | Permet à un utilisateur de marquer une TEI (par exemple, un patient) comme nécessitant un suivi. | ![](resources/icons/icon-complete.png) |  |
| Afficher l'historique des audits des TEI | Permet à l'utilisateur de consulter un historique de toutes les modifications apportées aux attributs de cette TEI (par exemple, un patient). | - |  |
| Indicateurs de programme en ligne | Si la case "afficher dans le formulaire" d'un indicateur de programme est cochée, l'indicateur apparaît sur le tableau de bord de saisie de Tracker et est mis à jour au fur et à mesure que les données sont saisies. | ![](resources/icons/icon-complete.png) |  |  |
| Supprimer des événements | Permet à l'utilisateur de supprimer un événement. | ![](resources/icons/icon-complete.png) |  |
| Planifier des événements | Dans la fenêtre de dialogue de création d'événement, l'utilisateur devrait également avoir la possibilité de programmer un événement. Le processus est similaire à la création d'un événement, sauf que l'utilisateur sera renvoyé au tableau de bord des TEI après la programmation de l'événement. | ![](resources/icons/icon-complete.png) |  |
| Transfert de patients  | Dans la fenêtre de dialogue de création d'événement, l'utilisateur devrait également avoir la possibilité de référer un patient. Le processus est similaire à la création/planification d'un événement, sauf que l'utilisateur peut changer l'unité d'organisation et doit préciser s'il s'agit d'un renvoi ponctuel ou permanent. S'il s'agit d'un transfert ponctuel, il suffit de créer l'événement dans l'unité d'organisation spécifiée. | ![](resources/icons/icon-complete.png) |  |
| Réinitialiser les champs de recherche | L'utilisateur peut nettoyer les champs de recherche en appuyant sur l'icône en forme de flèche arrondie dans le coin supérieur droit de l'écran de recherche. | ![](resources/icons/icon-complete.png) |  |
| Écran de recherche pour tous les types d'entité suivie (TET) | L'utilisateur peut effectuer une recherche dans tous les programmes d'un type d'entité suivie (TET). L'écran de recherche comporte un menu déroulant affichant tous les programmes disponibles pour le TET actif (le TET actif est défini par la sélection du programme dans l'écran d'accueil). Ce menu déroulant doit également comporter une option avec le nom du TET (Personne dans notre serveur). Lorsque l'utilisateur sélectionne cette option, les champs de recherche disponibles seront uniquement les attributs du TET (aucun attribut spécifique au programme). Toutes les restrictions de recherche ne s'appliquent pas, étant donné qu'elles appartiennent aux programmes. | ![](resources/icons/icon-complete.png) |  |
| Tableau de bord TEI sans programme | L'utilisateur peut voir le tableau de bord TEI sans aucun programme en sélectionnant la TEI dans la liste si la recherche a été effectuée sans programme. Les tableaux de bord afficheront les attributs du TET dans la fiche détaillée suivie d'une liste des inscriptions actives. | ![](resources/icons/icon-complete.png) |  |
| Historique d'inscriptions de la TEI et nouvelle inscription | L'utilisateur peut consulter l'historique complet de la TEI. En cliquant sur l'icône dans l'angle supérieur droit, il pourra voir une liste des inscriptions actives, suivie d'une liste des inscriptions passées (terminées ou annulées), puis des programmes auxquels la TEI pourrait être inscrite. Les utilisateurs doivent pouvoir accéder aux différentes inscriptions à partir de la liste. | ![](resources/icons/icon-complete.png) |  |
| Niveau d'accès - Briser la vitre | Si le programme est configuré avec le niveau d'accès "protégé", et que l'utilisateur recherche et trouve des instances d'entités suivies qui appartiennent à une unité d'organisation pour laquelle l'utilisateur n'est pas autorisé à saisir des données, l'utilisateur a la possibilité de briser la vitre. L'utilisateur trouvera une raison de briser la vitre, puis obtiendra la propriété temporaire de l'instance de l'entité traquée. | ![](resources/icons/icon-incomplete.png) |  |

### Programme sans enregistrement : Programme d'événement unique { #capture_app_programs_supported_features_program_without_reg }

| Fonctionnalité | Description de la fonctionnalité | Statut | Notes relatives à la mise en œuvre |
| --- | --- | :-: | --- | --- |
| Liste des événements (grille) | Il s'agit d'une liste des événements existants qui s'affiche une fois qu'un programme est sélectionné. | ![](resources/icons/icon-complete.png) |  |
| Trier et filtrer les événements dans la grille | Cette fonction permet à l'utilisateur de trier les événements répertoriés ou de filtrer les événements en fonction de mots-clés ou de plages de dates/numéros spécifiques. | ![](resources/icons/icon-complete.png) | Les événements sont classés par ordre chronologique. L'utilisateur peut peut effectuer un filtrage par période et par unité d'organisation. |  |
| Modifier les événements dans la grille | Cela permet à l'utilisateur de modifier directement les éléments de données affichés dans la liste/grille des événements. | ![](resources/icons/icon-incomplete.png) |  |
| Consulter l'historique d'audit des événements | Enables the user to see a history of all changes to the event&rsquo;s data elements. | ![](resources/icons/icon-incomplete.png) |  |
| Afficher/masquer les colonnes (dans la liste/grille des événements) | Permet à l'utilisateur de modifier les éléments de données affichés dans la liste/grille des événements (s'applique uniquement à cet utilisateur). | ![](resources/icons/icon-incomplete.png) |  |
| Pourcentage de remplissage des champs | Le pourcentage de données complétées pour chaque événement est affiché dans l'angle supérieur droit de événement lorsqu'il est ouvert après le premier enregistrement. Les pourcentages doivent être adaptés aux règles du programme dans les formulaires. | ![](resources/icons/icon-complete.png) | Le pourcentage d'avancement ne tient pas compte des types de valeur qui ne sont pas pris en charge dans les formulaires. |  |
| Supprimer des événements | Permet à l'utilisateur de supprimer un événement. | ![](resources/icons/icon-complete.png) |  |

# Règles de programme prises en charge par l'application de saisie Android { #capture_app_pr }

The following is a comprehensive list of all Program rule components (variable types and actions) available in DHIS 2, and notes on whether or not these have been implemented in the Android Capture app.

Tout problème lié à l'utilisation d'une fonctionnalité particulière avec Android est signalé par un point d'exclamation\!.

| légende | Description |
| :-: | :-- |
| ![](resources/icons/icon-complete.png) | Type de valeur mis en œuvre |
| ![](resources/icons/icon-incomplete.png) | Type de valeur non appliqué, mais ignoré en toute sécurité (s'il n'est pas obligatoire) |
| ![](resources/icons/icon-na.png) | Non applicable |
| ![](resources/icons/icon-wip.png) | Travail en cours. La fonctionnalité n'est pas encore complètement implémentée ou présente une attitude inattendue déjà signalée. |

## Règle de programme Types de sources variables prises en charge { #capture_app_pr_prv }

| Type de variable | Description du type de variable | Programme avec inscription | Programme sans inscription | Notes relatives à la mise en œuvre |
| --- | --- | :-: | :-: | --- |
| Data element from the newest event for a program stage | Ce type de source fonctionne de la même manière que "Élément de données de l'événement le plus récent du programme en cours", sauf qu'il n'évalue que les valeurs d'une étape spécifique du programme. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Élément de données de l'événement le plus récent du programme actuel (avec inscription) | This source type is populated with the newest data value collected for the specified data element within the enrollment. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Data element from the newest event in the current program (without registration) | Cette variable de règle de programme sera alimentée par la valeur de données la plus récente trouvée parmi les 10 événements les plus récents dans la même unité d'organisation. | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-complete.png) |  |
| Data element in current event (with registration) | La variable prend la valeur des éléments&rsquo;s de données de l'événement en cours. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Data element in current event (without registration) | Contient la valeur des données de l'événement ouvert par l'utilisateur. | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-complete.png) |  |
| Data element from previous event (with registration) | Les variables de règles de programme avec ce type de source contiendront la valeur la plus récente de tous les événements précédents pour l'élément de données spécifié. L'événement en cours n'est pas évalué. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Data element from previous event (without registration) | Cette variable de règle de programme sera alimentée par la valeur de données la plus récente trouvée dans les 10 événements précédant la date de l'événement en cours ( sans compter l'événement en cours). | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-complete.png) |  |
| Attribut d’entité suivie | Remplit la variable de la règle de programme avec un attribut d'entité suivie spécifié pour le TEI actuel (par exemple, le patient actuel). | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Valeur calculée | Valeur calculée. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |

## Règle de programme Actions prises en charge (Élément de données dans l'événement en cours) { #capture_app_pr_pra }

| Action | Description d'une action | Programme avec inscription | Programme sans inscription | Notes relatives à la mise en œuvre |
| --- | --- | :-: | :-: | --- |
| Masquer le champ | Masque un élément de données individuel si la règle est vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ! Si vous modifiez la valeur après que le champ a été masqué, l'action sera inversée en fonction de la valeur par défaut du moteur de la règle de type de valeur. Nous recommandons de l'utiliser en combinaison avec la fonction hasvalue. |
| Masquer une section | Masque une section entière et ses éléments de données si la règle est vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Masquer une option | Hide a single option for an option set in a given data element/tracked entity attribute. When combined with **show option group** the **hide option** takes precedence | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Masquer un groupe d'options | Hide all options in a given option group and data element/tracked entity attribute. When combined with **show option group** the **hide option** takes precedence | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Afficher un groupe d'options | Utilisé pour afficher uniquement les options d'un groupe d'options donné dans un élément de données/attribut d'entité suivi donné. L'affichage d'un groupe d'options masque implicitement toutes les options qui ne font pas partie du ou des groupe(s) affiché(s). | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Attribuer une valeur | Attribue une valeur à un élément de données ou à un attribut spécifié si la règle est vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | Pour évaluer un texte, celui-ci doit être placé entre apostrophes . Par exemple : '2+2' affichera le texte 2+2 et 2+2, sans les apostrophes, affichera 4. |
| Afficher un avertissement | Affiche une fenêtre d'avertissement à l'intention de l'utilisateur si la règle est vraie ; n'empêche pas l'utilisateur de continuer. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Avertissement sur Complete(terminé) | Affiche une fenêtre d'avertissement à l'intention de l'utilisateur si, au moment où il clique sur "completé", une règle est vraie ; cela n'empêche pas l'utilisateur de continuer. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Afficher une erreur | Affiche un message d'erreur à l'utilisateur dès qu'une règle est vraie et l'empêche de continuer jusqu'à ce que la règle ne soit plus vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | La valeur n'est pas sauvegardée, en revanche le texte n'est pas effacé, permettant à l'utilisateur de le corriger facilement. |
| Erreur sur la fin | Affiche une fenêtre d'avertissement à l'intention de l'utilisateur si, lorsqu'il clique sur " terminé ", une règle est vraie, et empêche l'utilisateur de continuer jusqu'à ce que la règle ne soit plus vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Rendre un champ obligatoire | Définit un élément de données comme "obligatoire"; si la règle est vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Afficher le texte (programmes d'événements) | Permet d'afficher des informations autres qu'une erreur ou un avertissement, par exemple un feedback. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | Indépendamment du type de variable source, le texte sera affiché dans le formulaire en tant que dernier élément de la dernière section. Le texte sera affiché sous forme de messages dans l'onglet des indicateurs. |
| Afficher le texte (programmes tracker) | Permet d'afficher des informations autres qu'une erreur ou un avertissement, par exemple un feedback. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | **1. Program rule configured as "Trigger rule only for program stage".** Text will be displayed ONLY in the form as the last element of the last section. Text will be displayed as the messages in the indicators tab. </br>-> If the program rule uses any variable type which is not from the current stage, the rule will not be able to evaluate and the message will not be shown.</br>**2. Program rule NOT configured as "Trigger rule only for program stage".** Text will be displayed ONLY in the indicators tab and NOT in the form.</br>--> If the program rule uses any variable of type Current event, the rule will not be able to evaluate and the message will not be shown. |
| Valeur de la touche d'affichage/paire (programmes d'événements) | Utilisé pour afficher des informations tirées d'un élément de données. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | **Variable Type:** </br>_ Data element from the newest event in the current program</br>_ Data element from previous event</br>_ Data element in current event</br>_ Built-in variable</br>Key/Value Pair will be displayed in the form ONLY in the specified section. |
| Display Key Value/Pair (Tracker Programs) | Utilisé pour afficher des informations tirées d'un élément de données. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | **1. Variable Type:**</br>_ Data element in current event</br>Key/Value Pair will be displayed in the form ONLY in the specified section.</br>**2. Variable Type:**</br>_ Data element from the newest event in the current program</br>_ Data element from previous event</br>_ Data element from the newest event for a program stage</br>_ Tracked entity attribute</br>_ Built-in variable</br>Key/Value Pair will be displayed ONLY in the indicators tab and NOT in the form. |
| Masquer l'étape du programme | Masque une étape entière du programme à l'utilisateur si la règle est vraie. | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | Action rule only supported for **Data element from the newest event in the current program type and tracked entity ** attribute variables. |
| Envoyer un message | L'envoi d'un message déclenche une notification basée sur le modèle de message fourni. Cette action sera entreprise chaque fois qu'il y aura un changement dans la valeur des données. Toutefois, ce comportement peut être contrôlé en fournissant le statut d'inscription à l'événement dans l'expression de la règle du programme. | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | Cette fonction est exécutée au niveau du serveur. |
| Planifier un message | Programmer le message programme la notification à la date indiquée par Expression dans le champ de données. | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | Cette fonction est exécutée au niveau du serveur. |

## Règle de programme Actions prises en charge (Autres variables) { #capture_app_pr_pra_other }

| Action | Description d'une action | Élément de données de l'événement le plus récent du programme actuel (avec inscription) | Élément de données de l'événement le plus récent du programme actuel (sans inscription) | Élément de données de l'événement précédent (avec inscription) | Élément de données de l'événement précédent (sans inscription) | Élément de données de l'événement le plus récent pour une étape du programme (avec inscription) | Attribut d'entité suivie (avec inscription) | Notes relatives à la mise en œuvre |
| --- | --- | :-: | :-: | :-: | :-: | :-: | :-: | --- |
| Masquer le champ | Masque un élément de données individuel si la règle est vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Masquer une section | Masque une section entière et ses éléments de données si la règle est vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Masquer une option | Hide a single option for an option set in a given data element/tracked entity attribute. When combined with **show option group** the **hide option** takes precedence. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Masquer un groupe d'options | Masque toutes les options d'un groupe d'options donné et un attribut d'élément de données/d'entité suivie. Lorsqu'elle est combinée avec le groupe d'options afficher , l'option masquer est prioritaire. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Attribuer une valeur | Attribue une valeur à un élément de données ou à un attribut spécifié si la règle est vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | Pour évaluer un texte, celui-ci doit être placé entre apostrophes . Par exemple : '2+2' affichera le texte 2+2 et 2+2, sans les apostrophes, affichera 4. |
| Afficher un avertissement | Affiche une fenêtre d'avertissement à l'intention de l'utilisateur si la règle est vraie ; n'empêche pas l'utilisateur de continuer. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Avertissement sur Complete(terminé) | Affiche une fenêtre d'avertissement à l'intention de l'utilisateur si, au moment où il clique sur "completé", une règle est vraie ; cela n'empêche pas l'utilisateur de continuer. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Afficher une erreur | Affiche un message d'erreur à l'utilisateur dès qu'une règle est vraie et l'empêche de continuer jusqu'à ce que la règle ne soit plus vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | La règle permet à l'utilisateur de terminer l'inscription mais l'empêche de terminer les événements jusqu'à ce que la règle ne soit plus vraie. La valeur n'est pas enregistrée, cependant le texte n'est pas effacé afin que l'utilisateur puisse le corriger facilement. |
| Erreur sur la fin | Affiche une fenêtre d'avertissement à l'intention de l'utilisateur si, au moment où il clique sur "completé", une règle est vraie ; cela n'empêche pas l'utilisateur de continuer. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) |  |
| Rendre un champ obligatoire | Définit un élément de données comme "obligatoire" si la règle est vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Afficher le texte (programmes d'événements) | Permet d'afficher des informations autres qu'une erreur ou un avertissement, par exemple un feedback. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | Indépendamment du type de variable source, le texte sera affiché dans le formulaire en tant que dernier élément de la dernière section. Le texte sera affiché sous forme de messages dans l'onglet des indicateurs. |
| Afficher le texte (programmes tracker) | Permet d'afficher des informations autres qu'une erreur ou un avertissement, par exemple un feedback. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | **1. Program rule configured as "Trigger rule only for program stage".** Text will be displayed ONLY in the form as the last element of the last section. Text will be displayed as the messages in the indicators tab. </br>-> If the program rule uses any variable type which is not from the current stage, the rule will not be able to evaluate and the message will not be shown.</br>**2. Program rule NOT configured as "Trigger rule only for program stage".** Text will be displayed ONLY in the indicators tab and NOT in the form.</br>--> If the program rule uses any variable of type Current event, the rule will not be able to evaluate and the message will not be shown. |
| Valeur de la touche d'affichage/paire (programmes d'événements) | Utilisé pour afficher des informations tirées d'un élément de données. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | **Variable Type:** </br>_ Data element from the newest event in the current program</br>_ Data element from previous event</br>_ Data element in current event</br>_ Built-in variable</br>Key/Value Pair will be displayed in the form ONLY in the specified section. |
| Valeur de la touche d'affichage/paire (programmes traker) | Utilisé pour afficher des informations tirées d'un élément de données. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | **1. Variable Type:**</br>_ Data element in current event</br>Key/Value Pair will be displayed in the form ONLY in the specified section.</br>**2. Variable Type:**</br>_ Data element from the newest event in the current program</br>_ Data element from previous event</br>_ Data element from the newest event for a program stage</br>_ Tracked entity attribute</br>_ Built-in variable</br>Key/Value Pair will be displayed ONLY in the indicators tab and NOT in the form. |
| Masquer l'étape du programme | Masque une étape entière du programme à l'utilisateur si la règle est vraie. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-complete.png) | Action rule only supported for **Data element from the newest event in the current program variable ** type. If the event is auto-generated, the rule will not apply. |
| Envoyer un message | L'envoi d'un message déclenche une notification basée sur le modèle de message fourni. Cette action sera entreprise chaque fois qu'il y aura un changement dans la valeur des données. Toutefois, ce comportement peut être contrôlé en fournissant le statut d'inscription à l'événement dans l'expression de la règle du programme. | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | Cette fonction est exécutée au niveau du serveur. |
| Planifier un message | Programmer le message programme la notification à la date indiquée par Expression dans le champ de données. | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | ![](resources/icons/icon-na.png) | Cette fonction est exécutée au niveau du serveur. |

## Fonctions à utiliser dans les expressions des règles du programme { #capture_app_pr_pre }

| Fonction | Description de la fonction | Statut | Notes relatives à la mise en œuvre |
| --- | --- | :-: | --- |
| d2:limite | Arrondit l'argument d'entrée au nombre entier le plus proche. | ![](resources/icons/icon-complete.png) |  |
| d2:floor | Arrondit l'argument d'entrée au niveau inférieur du nombre entier le plus proche. | ![](resources/icons/icon-complete.png) |  |
| d2:round | Arrondit l'argument d'entrée au nombre entier le plus proche. | ![](resources/icons/icon-complete.png) |  |
| d2:modulus | Produit le module en divisant le premier argument par le second. | ![](resources/icons/icon-complete.png) |  |
| d2:zing | Évalue l'argument d'un numéro de type à zéro si la valeur est négative, sinon à la valeur elle-même. | ![](resources/icons/icon-complete.png) |  |
| d2:oizp | Évalue l'argument du numéro de type à un si la valeur est zéro ou positive, sinon à zéro. | ![](resources/icons/icon-complete.png) |  |
| d2:concatenate | Produit une chaîne concaténée à partir des paramètres d'entrée. Prend en charge un nombre illimité de paramètres. | ![](resources/icons/icon-complete.png) | Utilisez la fonction d2:concatenate au lieu de "+", car l'évaluateur d'expression de l'application ajoutera des nombres s'il le peut. |
| d2:daysBetween | Produces the number of days between the first and second argument. If the second argument date is before the first argument,  the return value will be the negative number of days between the two dates. The static date format is 'yyyy-MM-dd'. | ![](resources/icons/icon-complete.png) |  |
| d2:weeksBetween | Produces the number of full weeks between the first and second argument. If the second argument date is before the first argument,  the return value will be the negative number of weeks between the two dates. The static date format is 'yyyy-MM-dd'. | ![](resources/icons/icon-complete.png) |  |
| d2:monthsBetween | Indique le nombre de mois entiers entre le premier et le deuxième argument. Si la date du deuxième argument est antérieure à celle du premier argument, la valeur de retour sera le nombre négatif de mois entre les deux dates. Le format statique de la date est 'aaaa-MM-jj'. | ![](resources/icons/icon-complete.png) |  |
| d2:yearsBetween | Indique le nombre d'années entre le premier et le deuxième argument. Si la date du deuxième argument est antérieure à celle du premier argument, la valeur de retour sera le nombre négatif d'années entre les deux dates. Le format statique de la date est 'aaaa-MM-jj'. | ![](resources/icons/icon-complete.png) |  |
| d2:addDays | Produit une date basée sur le premier argument qu'est la date, en ajoutant le deuxième argument qu'est le nombre de jours. | ![](resources/icons/icon-complete.png) |  |
| d2:count | Compte le nombre de valeurs saisies pour le champ source dans l'argument. | ![](resources/icons/icon-complete.png) |  |
| d2:countIfValue | Compte le nombre de valeurs correspondantes saisies pour le champ source dans le premier argument. Seules les occurrences correspondant au deuxième argument sont comptabilisées. | ![](resources/icons/icon-complete.png) |  |
| d2:countIfZeroPos | Compte le nombre de valeurs nulles ou positives saisies pour le champ source dans l'argument. Le paramètre du champ source est le nom de l'un des champs source définis dans le programme. | ![](resources/icons/icon-complete.png) |  |
| d2:hasValue | Détermine le nombre de valeurs numériques nulles et positives parmi les arguments de l'objet donné. Peut être doté de tout nombre d'arguments. | ![](resources/icons/icon-complete.png) |  |
| d2:validatePattern | Prend la valeur vrai si le texte saisi correspond exactement au motif de l'expression régulière fournie. L'expression régulière doit être esquivée. | ![](resources/icons/icon-complete.png) |  |
| d2:left | Évalue la partie gauche d'un texte, en nombre de caractères à partir du premier caractère. | ![](resources/icons/icon-complete.png) |  |
| d2:right | Évalue la partie droite d'un texte, en nombre de caractères à partir du dernier caractère. | ![](resources/icons/icon-complete.png) |  |
| d2:substring | Évalue la partie d'une chaîne de caractères spécifiée par les numéros des caractères de début et de fin. | ![](resources/icons/icon-complete.png) |  |
| d2:split | Répartie le texte en fonction du délimiteur et conserve le nième élément (0 est le premier). | ![](resources/icons/icon-complete.png) |  |
| d2:length | Trouver la longueur d'une chaîne. | ![](resources/icons/icon-complete.png) |  |
| d2:zpvc | Affiche le nombre de valeurs numériques nulles et positives parmi les arguments de l'objet donné. Le nombre d'arguments peut être illimité.  | ![](resources/icons/icon-complete.png) |  |
| d2:inOrgUnitGroup\* | Détermine si l'unité d'organisation actuelle fait partie du groupe d'arguments. L'argument peut être défini avec l'ID ou le code du groupe d'unités d'organisation. | ![](resources/icons/icon-complete.png) |  |
| d2:hasUserRole\*\* | Indique vrai si l'utilisateur actuel joue ce rôle, sinon faux. | ![](resources/icons/icon-complete.png) |  |
| d2:zScoreWFA\*\*\* | La fonction calcule le z-score sur la base des données fournies par l'indicateur de poids pour l'âge de l'OMS. Sa valeur varie entre -3,5 et 3,5 en fonction de la valeur du poids. | ![](resources/icons/icon-complete.png) |  |

> **Notes**
>
> \* Available in DHIS 2 v2.30
>
> \*\* Available in DHIS 2 v2.31 onwards
>
> \*\*\* Available in DHIS 2 v2.32

## Variables standard à utiliser dans les expressions des règles du programme { #capture_app_pr_standard_vars }

Disponible dans DHIS2 v2.30

| Variable | Description de la fonction | Statut | Notes relatives à la mise en œuvre |
| --- | --- | :-: | --- |
| V{current_date} | Contient la date du jour lorsque la règle est exécutée. | ![](resources/icons/icon-complete.png) |  |
| V{event_date} | Contient la date de l'événement en cours d'exécution. N'aura pas de valeur au moment où la règle est exécutée dans le cadre du formulaire d'enregistrement. | ![](resources/icons/icon-complete.png) |  |
| V{event_status} | Contient le statut de l'événement ou de l'inscription en cours. | ![](resources/icons/icon-complete.png) |  |
| V{due_date} \* | Cette variable contient la date actuelle à laquelle la règle est exécutée. Remarque : cela signifie que la règle peut produire des résultats différents à des moments différents, même si rien d'autre n'a changé. | ![](resources/icons/icon-complete.png) |  |
| V{event_count} | Contient le nombre total d'événements dans l'inscription. | ![](resources/icons/icon-complete.png) |  |
| V{enrollment_date} \* | Contient la date d'inscription de l'inscription actuelle. N'a pas de valeur pour les programmes à événement unique. | ![](resources/icons/icon-complete.png) |  |
| V{incident_date} \* | Contient la date d'incident de l'inscription actuelle. N'a pas de valeur pour les programmes à événement unique. | ![](resources/icons/icon-complete.png) |  |
| V{enrollment_id} \* | Chaîne d'identification universelle (UID) de l'inscription en cours. N'aura pas de valeur pour les programmes à événement unique. | ![](resources/icons/icon-complete.png) |  |
| V{event_id} | Chaîne d'identification universelle (UID) du contexte de l'événement en cours. N'aura pas de valeur au moment où la règle est exécutée dans le cadre du formulaire d'enregistrement. | ![](resources/icons/icon-complete.png) |  |
| V{orgunit_code} | Contient le code de l'unité d'organisation liée à l'inscription en cours. Pour les programmes à événement unique, le code de l'unité d'organisation de l'événement en cours sera utilisé à la place. | ![](resources/icons/icon-complete.png) |  |
| V{environnement} | Contient un code représentant l'environnement d'exécution actuel des règles. Les valeurs possibles sont "le WebClient", " l'AndroidClient" et "le Serveur". Peut être utilisé lorsqu'une règle de programme n'est censée s'exécuter que dans un ou plusieurs types de clients. | ![](resources/icons/icon-complete.png) |  |
| V{program_stage_id} | Contient l'ID de l'étape du programme en cours qui a déclenché les règles. Cette variable peut être utilisée pour exécuter les règles dans des étapes spécifiques du programme, ou pour éviter l'exécution dans certaines étapes. Lorsque les règles sont exécutées dans le contexte d'un formulaire d'enregistrement TEI, la variable est vide. | ![](resources/icons/icon-complete.png) |  |
| V{program_stage_name} | Contient le nom de l'étape du programme en cours qui a déclenché les règles. Cette variable peut être utilisée pour exécuter les règles dans des étapes spécifiques du programme, ou pour éviter l'exécution dans certaines étapes. Lorsque les règles sont exécutées dans le contexte d'un formulaire d'enregistrement TEI, la variable est vide. | ![](resources/icons/icon-complete.png) |  |

> **Remarque**
>
> \* S'applique uniquement au tracker

## Différences entre les règles du programme dans la version web et la version Android{ #capture_app_pr_differences_web_android }

Comme les applications web et Android utilisent actuellement un _moteur de règles de programme_ différent, il se peut que certaines règles de programme fonctionnent dans un système et pas dans l'autre. D'une manière générale, on peut dire que le _moteur de règles de programme_ d'Android est plus strict et que, par conséquent, certaines règles de programme qui fonctionnent dans la version web du DHIS2 échoueront dans Android. Cette sous-section décrit les principales différences et explique comment adapter les règles pour qu'elles fonctionnent dans les deux systèmes.

### Évaluation du type booléen { #capture_app_pr_differences_web_android_bool }

La version web du DHIS2 considère le type booléen comme 0 ou 1 (qui peut être évalué comme vrai ou faux), alors qu'Android les évalue uniquement comme vrai ou faux. Bien que cela rende possible l'ajout de booléens dans la version web, cela échouera dans Android ; afin de résoudre ce problème, une _variable de règle de programme_ supplémentaire est nécessaire pour transformer le booléen en un nombre qui peut être exploité. Consultez le tableau ci-dessous pour des exemples et des solutions possibles.

For the examples below consider the following:

- yn_prv1: est une variable de règle de programme qui a été configurée pour obtenir la valeur d'un élément de données "Oui/Non".
- yn_prv2: est une variable de règle de programme qui a été configurée pour obtenir la valeur d'un élément de données "Oui/Non".
- prv_booléen_un: est une variable de règle de programme qui a été configurée pour obtenir la valeur d'un éelément de données "Oui/Non".
- prv_booléen_deux: est une variable de règle de programme qui a été configurée pour obtenir la valeur d'un éelément de données "Oui/Non".
- prv_boolean_one_to_number : est une variable de règle de programme avec une valeur calculée
- prv_boolean_two_to_number : est une variable de règle de programme avec une valeur calculée
- Parfois, le terme "true" est utilisé comme condition d'une règle de programme, ce qui signifie que l'action est toujours exécutée.
- Les acronymes suivants sont utilisés :
  - ED (Élément de données)
  - RP (Règles du programme)
  - ERP (Expression de la Règle du Programme)
  - CRP (Condition de la Règle du Programme)
  - VRP (Variable de la Règle du Programme)
  - ARP (Action de la Règle du Programme)

| Condition(s) de la règle du programme | Actions(s) de la règle du programme | Version web | Version Android | Commentaire |
| --- | --- | :-: | :-: | --- |
| d2:hasValue('yn_prv1') \|\| d2:hasValue('yn_prv2') | Attribuer une valeur fixe à ED | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| #{yn_prv1} \|\| #{yn_prv2} | Attribuer une valeur fixe à ED | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| d2:hasValue('yn_prv1') \|\| d2:hasValue('yn_prv2') | Attribuer une valeur fixe à l'ED: #{yn_prv1} + #{yn_prv2} + 1 | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-negative.png) | Crash dans Android lorsqu'un booléen est marqué comme l'expression résulterait en _vrai_+_faux_+1 |
| PR1: #{prv_boolean_one} <br /><br />PR2: #{prv_boolean_two} <br /><br />PR3: #{prv_boolean_one} \|\| #{prv_boolean_two} | PRA1. Assign value "1" to PRV "#{prv_bool_one_to_number}" <br /><br />PRA2. Assign value: "1" to PRV "#{prv_bool_two_to_number}" <br /><br />PRA3. Assign value to DE: "#{prv_bool_one_to_number} + #{prv_bool_two_to_number} + 1" | ![](resources/icons/icon-negative.png) | ![](resources/icons/icon-negative.png) | Il existe deux variables pour les booléens, l'une obtient la valeur via une définition de la VRP " valeur formulaire de l'ED " et l'autre via une ARP. Si une variable booléenne n'est pas marquée, elle est comptée comme une chaîne de caractères au lieu d'un nombre. |
| Four PR to assign 1 or 0 to the booleans and an additional for the addition. Priorities go from top to bottom <br /><br />PRC1: !d2:hasValue('prv_boolean_one')  \|\| !#{prv_boolean_one} <br /><br />PRC2: d2:hasValue('prv_boolean_one') && #{prv_boolean_one}<br /><br />PRC3: !d2:hasValue('prv_boolean_two')  \|\| !#{prv_boolean_two} <br /><br />PRC4: d2:hasValue('prv_boolean_two') && #{prv_boolean_two} <br /><br />PRC5: true | PRA1: Assign value: "0" to PRV "#{prv_bool_one_to_number}" <br /><br />PRA2: Assign value: "1" to PRV "#{prv_bool_one_to_number}" <br /><br />PRA3: Assign value: "0" to PRV "#{prv_bool_two_to_number}" <br /><br />PRA4: Assign value: "1" to PRV "#{prv_bool_two_to_number}" <br /><br />PRA5: Assign value: "#{prv_bool_one_to_number} + #{prv_bool_two_to_number} + 1" to DE <br /> | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | Il y a 2 variables pour les booléens, l'une obtient la valeur via une définition de la VRP " formulaire de valeur de l'ED " et l'autre via une ARP. |

### Évaluation des nombres{ #capture_app_pr_differences_web_android_numbers }

DHIS2 web version evaluate numbers in a more flexible way casting values from integer to floats if required for a division, however, Android take numbers as such (without a casting) which my end up giving unexpected results. Check the table below for examples and possible solutions.

| Condition(s) de la règle du programme | Actions(s) de la règle du programme | Version web | Version Android | Commentaire |
| --- | --- | :-: | :-: | --- |
| vrai | Attribuer une valeur à l'ED: d2:daysBetween('2020-05-13', '2020-05-17') / 3 | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-negative.png) | L'utilisateur s'attendrait à ce que la division soit calculée comme 4/3 avec un résultat de 1,3333. Cependant, Android ne convertit pas 4 en flottant (4.0 comme le fait la version web), de sorte que le résultat dans Android est un pur 1 comme résultat de la division entière 4/3. |
| vrai | Attribuer une valeur à l'ED: d2:daysBetween('2020-05-13', '2020-05-17') / 3.0 | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | La division donne 1.33333 pour le web et l'Android. |

## Changes in Program Rules (as from version 2.2 of the app ) { #capture_app_pr_changes }

Dans la version 2.2 de l'application (publiée en août 2020), un nouveau moteur de règles a été inclus. Ce moteur de règles exige que certaines modifications facultatives et obligatoires soient apportées aux expressions des règles du programme afin qu'elles fonctionnent dans la nouvelle application. Une liste de ces changements, comment les détecter et comment les corriger est incluse dans les sous-sections suivantes.

### Évaluation de 'd2:hasValue' { #capture_app_pr_changes_hasvalue }

#### Description { #description }

Il s'agit d'une modification facultative. _d2:hasValue_ fonctionne désormais avec des apostrophes ou des expressions de variables complètes. Les expressions suivantes sont valides : `(d2:hasValue('nom_de la variable') et d2:hasValue(#{nom_de la variable}))`

#### Comment s'identifier via l'API ? { #how-to-identify-via-api }

Obtenir les règles de programme dont la condition ou l'action utilise la fonction d2:hasValue.

`https://example.org/api/programRules?fields=program[name],name,programRuleActions[data],condition&filter=programRuleActions.data:like:hasValue&filter=condition:like:hasValue&rootJunction=OR`

```xml
<programRule name="PR01 - Check variable with hasValue(#{variable})">
<condition>d2:hasValue(#{Âge en années})</condition>
<program name="JB_Testing_2.2"/>
<programRuleActions>
<programRuleAction/>
</programRuleActions>
</programRule>
<programRule name="PR01 - Check variable with hasValue('variable')">
<condition>d2:hasValue('Âge en années')</condition>
<program name="JB_Testing_2.2"/>
<programRuleActions>
<programRuleAction/>
</programRuleActions>
</programRule>
```

#### Comment y remédier ?{ #how-to-fix-it }

L'exemple ci-dessus montre comment différentes manières d'utiliser la fonction hasValue auront le même effet à partir de la version 2.2. Il n'y a pas de changement obligatoire, mais gardez à l'esprit que lorsque vous écrivez de nouvelles règles de programme, la cohérence peut aider à éviter les problèmes.

### Évaluation d'une variable { #capture_app_pr_changes_eval_var }

#### Description { #description }

Il s'agit d'une modification obligatoire. _!#{nom_de la variable}_ ne peut être utilisé que pour les variables de type booléen ( BOLÉEN et VRAI_ UNIQUEMENT).

#### Comment s'identifier via l'API ? { #how-to-identify-via-api }

Obtenir des variables de règles de programme avec des éléments de données de type NON BOLÉEN ou VRAI_ UNIQUEMENT

`https://example.org/api/programRuleVariables?fields=name&filter=dataElement.valueType:!in:[TRUE_ONLY,BOOLEAN]&paging=False`

Get all programRule.conditions `https://example.org/api/programRules?fields=displayName,condition&paging=False`

Vérifiez manuellement (ou par programme via un script) si, dans la liste des conditions de programRule(obtenue via le deuxième appel API), l'une des variables des règles du programme (obtenue via le premier appel API) est utilisée.

Par exemple, à partir de la première liste, nous obtenons :

```xml
<programRuleVariable name="AdditionalMedication"/>
<programRuleVariable name="age"/>
<programRuleVariable name="Age in years"/>
<programRuleVariable name="AgeYears"/>
<programRuleVariable name="allergies"/>
<programRuleVariable name="apgarcomment"/>
```

Nous pouvons faire une comparaison avec la seconde liste :

```xml
<programRule>
<condition>!#{Pregant}</condition>
<displayName>PR03- !#{variable_name} - BOOLEAN</displayName>
</programRule>
<programRule>
<condition>!#{Age in years}</condition>
<displayName>PR03- !#{variable_name} - NOT BOOLEAN</displayName>
</programRule>
<programRule>
<condition>#{PregnancyStatus} != 'YES'</condition>
<displayName>Pregnancy status : false</displayName>
</programRule>
```

Ceci montre qu'une variable NON BOLÉENNE est utilisée de manière erronée.

#### Comment y remédier ?{ #how-to-fix-it }

Assurez-vous que vous évaluez des variables BOLÉENES ou VRAIES_UNIQUEMENT dans vos conditions. Si la variable de la règle de programme n'est pas de ce type, mettez à jour la condition de la règle de programme avec d2:hasValue(#{nom_de la variable}) ou d2:hasValue('nom_de la variable').

Dans l'exemple ci-dessus, la condition doit passer de :

`<condition>!#{Age in years}</condition>`  
To:  
`<condition>d2:hasValue(‘Age in years’)</condition>`

### Evaluation des textes { #capture_app_pr_changes_eval_text }

#### Description { #description }

Il s'agit d'un changement important. Dans les actions de règles de programme du type AFFECTER, AFFICHER LE TEXTE, AFFICHER LA PAIRE TOUCHE/VALEUR, AFFICHER L'AVERTISSEMENT, AFFICHER L'ERREUR, AVERTISSEMENT A LA FIN DU PROGRAMME ou ERREUR A LA FIN DU PROGRAMME, si l'expression à évaluer et à affecter/afficher est un texte, elle doit être encadrée par des apostrophes .

#### Comment s'identifier via l'API ? { #how-to-identify-via-api }

Get the Program Rules which actions are of type text, with something on the field `data` and verify their data content to find strings without quotes.

`https://example.org/api/programRules?fields=program[name],name,programRuleActions[programRuleActionType,content,data]&filter=programRuleActions.programRuleActionType:in:[ASSIGN,DISPLAYTEXT,DISPLAYKEYVALUEPAIR,SHOWWARNING,SHOWERROR,WARNINGONCOMPLETE,ERRORONCOMPLETE]&filter=programRuleActions.data:!null&paging=false`

Par exemple, nous pouvons détecter ici une erreur de champ de texte sans apostrophes dans la première action de règle de programme, alors que la seconde est correcte.

```xml
<programRule name="PR04- !#{variable_name} - BOOLEAN - Assign text without quotes">
<program name="JB_Testing_2.2"/>
<programRuleActions>
<programRuleAction>
<programRuleActionType>SHOWWARNING</programRuleActionType>
<data>embarazada</data>
<content>PR04 text with quotes is: </content>
</programRuleAction>
</programRuleActions>
</programRule>
```

```xml
<programRule name="PR04- !#{variable_name} - BOOLEAN - Assign text with quotes">
<program name="JB_Testing_2.2"/>
<programRuleActions>
<programRuleAction>
<programRuleActionType>SHOWWARNING</programRuleActionType>
<data>'embarazada'</data>
<content>PR04 text with quotes is: </content>
</programRuleAction>
</programRuleActions>
</programRule>
```

#### Comment y remédier ?{ #how-to-fix-it }

Scan the generated list (via the suggested API calls) to find `data` components of the Program Rule Action where text is not quoted, then go to each of the identified Program Rules and update them.

### Concaténation de chaînes et d'objets { #capture_app_pr_changes_concat }

#### Description { #description }

Il s'agit d'un changement important. Dans les actions de règles de programme du type ATTRIBUER, AFFICHER LE TEXTE, AFFICHER LA PAIRE TOUCHE/VALEUR, AFFICHER L'AVERTISSEMENT, AFFICHER L'ERREUR, AVERTISSEMENT A LA FIN DU PROGRAMME ou ERREUR A LA FIN DU PROGRAMME, si l'expression à évaluer et à attribuer/afficher est un texte, elle doit être placée entre apostrophes (même changement que précédemment) ; mais, en plus, s'il faut concaténer deux chaînes de caractères ou une combinaison de fonctions, il est obligatoire d'utiliser la fonction _d2:concatenate_.

#### Comment s'identifier via l'API ? { #how-to-identify-via-api }

Get the Program Rules which actions are of type text, with any content on the field `data` and verify their data content to check if in case of two or more strings (or other objects) are being joined the d2:concatenate function is used

Obtenez les règles de programme dont les actions sont de type texte et vérifiez le contenu de leurs données pour trouver des chaînes de caractères sans guillemets.

`http://localhost:8034/api/programRules?fields=program[name],name,programRuleActions[programRuleActionType,content,data]&filter=programRuleActions.programRuleActionType:in:[ASSIGN,DISPLAYTEXT,DISPLAYKEYVALUEPAIR,SHOWWARNING,SHOWERROR,WARNINGONCOMPLETE,ERRORONCOMPLETE]&filter=programRuleActions.data:!null&paging=false`

Par exemple, nous pouvons détecter ici une erreur de deux chaînes de caractères dans une action sans utiliser d2:concatenate.

```xml
<programRule name="PR08- Assign text and variable without concatenate">
<program name="JB_Testing_2.2"/>
<programRuleActions>
<programRuleAction>
<programRuleActionType>AFFICHER L'AVERTISSEMENT</programRuleActionType>
<data>'L'âge est de 10 ans et le module est une autre chaîne.'</data>
<content>PR05 le texte sans concat est: </content>
</programRuleAction>
</programRuleActions>
</programRule>
```

#### Comment y remédier ?{ #how-to-fix-it }

Scan the generated list (via the suggested API calls) to find `data` components of the Program Rule Action where two or more objects are being concatenated and update them to use the _d2:concatenate_ function.

In the example above the `data` should change from:

`<data>'Age is 10 and modulus' 'another string'</data>`  
To:  
`<data>d2:concatenate('Age is 10 and modulus','another string')</data>`

# Indicateurs de programme { #capture_app_program_ind }

The following is a comprehensive list of all Program indicator variables available in DHIS2, and notes on whether or not these have been implemented in the Android Capture app.

Tout problème lié à l'utilisation d'une fonctionnalité particulière avec Android est signalé par un point d'exclamation.

| légende | Description |
| :-: | :-- |
| ![](resources/icons/icon-complete.png) | Composante implémentée |
| ![](resources/icons/icon-incomplete.png) | Composant non implémenté (règle échouée) |
| ![](resources/icons/icon-na.png) | Non applicable |
| ![](resources/icons/icon-wip.png) | Travail en cours. La fonctionnalité n'est pas encore complètement implémentée (pour le moment) ou présente une attitude inattendue déjà signalée. |

## Fonctions courantes à utiliser dans un programme d'expression indicateur ou de filtre { #capture_app_program_ind_common_functions }

| Fonction | Description | Statut | Notes relatives à la mise en œuvre |
| --- | --- | :-: | --- |
| si | Évalue l'expression booléenne et, si elle est vraie, renvoie la valeur vraie de l'expression, si elle est fausse, renvoie la valeur fausse de l'expression. Les arguments doivent suivre les règles de toute expression d'indicateur. | ![](resources/icons/icon-complete.png) |  |
| isNull | Renvoie vrai si la valeur de l'élément est manquante (null), sinon faux. | ![](resources/icons/icon-complete.png) |  |
| isNotNull | Retourne vrai si la valeur de l'élément n'est pas manquante (non nulle), sinon faux. | ![](resources/icons/icon-complete.png) |  |
| firstNonNull | Renvoie la valeur du premier élément non manquant (non nul). Le nombre d'arguments est illimité. Tout argument peut également être un texte numérique ou de chaîne, qui sera renvoyé si tous les objets précédents ont des valeurs manquantes. | ![](resources/icons/icon-complete.png) |  |
| plus grand | Renvoie la plus grande valeur (la plus élevée) des expressions données. Le nombre d'arguments peut être illimité. | ![](resources/icons/icon-complete.png) |  |
| moins | Renvoie le moins (plus petite) des valeur des expressions données. Le nombre d'arguments peut être illimité. | ![](resources/icons/icon-complete.png) |  |

## (d2) Fonctions à utiliser dans l'expression d'un indicateur de programme ou d'un filtre { #capture_app_program_ind_d2_functions }

| Fonction | Description | Statut | Notes relatives à la mise en œuvre |
| --- | --- | :-: | --- |
| addDays | Produit une date basée sur le premier argument qu'est la date, en ajoutant le deuxième argument qu'est le nombre de jours. | ![](resources/icons/icon-complete.png) |  |
| limit | Arrondit l'argument d'entrée au nombre entier le plus proche. | ![](resources/icons/icon-complete.png) |  |
| condition | Évalue l'expression booléenne et, si elle est vraie, renvoie la valeur vraie de l'expression, si elle est fausse, renvoie la valeur fausse de l'expression . L'expression conditionnelle doit être citée. Les arguments vrai-expr et fausse-expr doivent suivre les règles de toute expression d'indicateur de programme (y compris les fonctions). | ![](resources/icons/icon-complete.png) |  |
| compter | Compte le nombre de valeurs de données qui ont été collectées pour l'étape du programme et l'élément de données donnés au cours de l'inscription. L'élément de données de l'argument est fourni avec la syntaxe #{programStage.dataElement}. | ![](resources/icons/icon-complete.png) |  |
| countIfCondition | Compte le nombre de valeurs de données qui correspondent aux critères de condition donnés pour l'étape du programme et l'élément de données indiqués au cours de l'inscription. L'élément de données de l'argument est fourni avec la syntaxe #{programStage.dataElement}. La condition est fournie sous la forme d'une expresssion entre guillemets | ![](resources/icons/icon-complete.png) |  |
| countIfValue | Compte le nombre de valeurs de données qui correspondent à la valeur littérale donnée pour l'étape du programme et l'élément de données indiqués au cours de l'inscription. L'élément de données de l'argument est fourni avec la syntaxe #{programStage.dataElement}. La valeur peut être un texte ou un nombre codé en dur. | ![](resources/icons/icon-complete.png) |  |
| countIfZeroPos | Compte le nombre de valeurs nulles ou positives saisies pour le champ source dans l'argument. | ![](resources/icons/icon-complete.png) |  |
| daysBetween | Produit le nombre de jours entre deux éléments de données/attributs sur le modèle de la date. | ![](resources/icons/icon-complete.png) |  |
| floor | Arrondit l'argument d'entrée au niveau inférieur du nombre entier le plus proche. | ![](resources/icons/icon-complete.png) |  |
| hasUserRole | Renvoie  vrai si l'utilisateur actuel joue ce rôle, sinon faux. | ![](resources/icons/icon-complete.png) |  |
| hasValue | Renvoie vrai si l'élément/attribut de données a une valeur. | ![](resources/icons/icon-complete.png) |  |
| inOrgUnitGroup | Détermine si l'unité d'organisation actuelle fait partie du groupe d'arguments. L'argument peut être défini avec l'ID ou le code du groupe d'unités d'organisation. | ![](resources/icons/icon-complete.png) |  |
| gauche | Évalue la partie gauche d'un texte, en nombre de caractères à partir du premier caractère. | ![](resources/icons/icon-complete.png) |  |
| longueur | Trouver la longueur d'une chaîne. | ![](resources/icons/icon-complete.png) |  |
| minutesBetween | Produit le nombre de minutes entre deux éléments de données/attributs de type "date et heure". | ![](resources/icons/icon-complete.png) |  |
| modulus | Produit le module en divisant le premier argument par le second. | ![](resources/icons/icon-complete.png) |  |
| monthsBetween | Produit le nombre de mois entiers entre le premier et le deuxième argument. | ![](resources/icons/icon-complete.png) |  |
| oizp | Renvoie un si l'expression est nulle ou positive, sinon renvoie zéro. | ![](resources/icons/icon-complete.png) |  |
| relationshipCount | Produit le nombre de relations du même type qui sont liées à l'affiliation ou à l'événement. Si aucun type n'est indiqué, tous les types sont comptés. | ![](resources/icons/icon-incomplete.png) |  |
| droite | Évalue la partie droite d'un texte, en nombre de caractères à partir du dernier caractère. | ![](resources/icons/icon-complete.png) |  |
| Arrondir | Arrondit l'argument d'entrée au nombre entier le plus proche. | ![](resources/icons/icon-complete.png) |  |
| Diviser | RRépartie le texte en fonction du délimiteur et conserve le nième élément (0 est le premier). | ![](resources/icons/icon-complete.png) |  |
| substring | Évalue la partie d'une chaîne de caractères spécifiée par les numéros des caractères de début et de fin. | ![](resources/icons/icon-complete.png) |  |
| validatePatten | Prend la valeur " vrai " si le texte saisi correspond exactement au motif de l'expression régulière fournie. | ![](resources/icons/icon-complete.png) |  |
| weeksBetween | Produit le nombre de semaines complètes entre deux éléments de données/attributs de type date. | ![](resources/icons/icon-complete.png) |  |
| yearsBetween | Produit le nombre d'années entre le premier et le deuxième argument. | ![](resources/icons/icon-complete.png) |  |
| zing | Retourne à zéro si l'expression est négative, sinon retourne à la valeur de l'expression. | ![](resources/icons/icon-complete.png) |  |
| zpvc | Détermine le nombre de valeurs numériques nulles et positives parmi les arguments de l'objet donné. | ![](resources/icons/icon-complete.png) |  |

## Variables à utiliser dans une expression ou un filtre d'indicateur de programme { #capture_app_program_ind_variables }

| Type de variable | Description du type de variable | Statut | Notes relatives à la mise en œuvre |
| --- | --- | :-: | --- | --- |
| Event Date<br/>event_date | La date à laquelle l'événement a eu lieu. | ![](resources/icons/icon-complete.png) |  |
| Creation Date\*<br/>creation_date | La date de création d'un événement ou d'une affiliation dans le système. | ![](resources/icons/icon-complete.png) |  |
| Due Date<br/>due_date | La date à laquelle un événement est prévu. | ![](resources/icons/icon-complete.png) |  |
| Sync Date\*<br/>sync_date | Date de la dernière synchronisation de l'événement ou de l'inscription avec l'application Android. | ![](resources/icons/icon-incomplete.png) |  |
| Incident Date<br/>incident_date | la date de l'incidence de l'événement. | ![](resources/icons/icon-complete.png) |  |
| Enrollment Date (not visible on UI)<br/>enrollment_date | La date à laquelle l'instance de l'entité suivie a été inscrite au programme. | ![](resources/icons/icon-complete.png) |  |
| Enrollment Status<br/>enrollment_status | Peut être utilisé pour inclure ou exclure des affiliations dans certains statuts. | ![](resources/icons/icon-complete.png) |  |
| Current Date<br/>current_date | La date du jour. | ![](resources/icons/icon-complete.png) |  |
| Date de fin | La date à laquelle l'événement est terminé. | ![](resources/icons/icon-complete.png) |  |
| Value Count<br/>value_count | Nombre de valeurs non nulles dans la partie expression de l'événement. | ![](resources/icons/icon-complete.png) |  |
| Zero or positive value count<br/>zero_pos_value_count | Le nombre de valeurs numériques positives dans la partie expression de l'événement. | ![](resources/icons/icon-complete.png) |  |
| Event Count<br/>event_count | Le nombre d'événements (utile en combinaison avec les filtres). | ![](resources/icons/icon-complete.png) |  |
| Enrollment Count<br/>enrollment_count | Le nombre d'inscriptions (utile en combinaison avec les filtres). | ![](resources/icons/icon-complete.png) | Les indicateurs de l'application Android sont calculés dans le domaine d'une inscription TEI. La valeur est toujours 1. |  |
| TEI Count<br/>tei_count | Le nombre d'instances d'entités suivies (utile en combinaison avec les filtres). | ![](resources/icons/icon-na.png) | Les indicateurs de l'application Android sont calculés dans le domaine d'une inscription TEI. La valeur est toujours 1. |  |
| Program Stage Name<br/>program_stage_name | Peut être utilisé dans les filtres pour inclure uniquement certaines étapes du programme dans un filtre pour les programmes tracker. | ![](resources/icons/icon-incomplete.png) |  |
| Program Stage ID<br/>program_stage_id | Peut être utilisé dans les filtres pour inclure uniquement certaines étapes du programme dans un filtre pour les programmes tracker. | ![](resources/icons/icon-incomplete.png) |  |
| Reporting Period Start<br/>reporting_period_start | Peut être utilisé dans des filtres ou des expressions pour comparer une date quelconque à la première date de chaque période de déclaration. | ![](resources/icons/icon-na.png) | Les indicateurs de l'application Android sont calculés dans le domaine d'une inscription au TEI. |  |
| Reporting Period End<br/>reporting_period_end | Peut être utilisé dans des filtres ou des expressions pour comparer une date quelconque à la dernière date incluse dans chaque période de déclaration. | ![](resources/icons/icon-na.png) | Les indicateurs de l'application Android sont calculés dans le domaine d'une inscription au TEI. |  |
| Organisation Unit Count<br/>organisationunit_count | . | ![](resources/icons/icon-na.png) |  |  |

[Documentation Référence](https://docs.dhis2.org/master/en/user/html/configure_program_indicator.html%23program_indicator_functions_variables_operators&sa=D&ust=1557433016643000)

# Types de valeur pris en charge { #capture_app_value_types }

Vous trouverez ci-dessous une liste complète de tous les types de valeurs disponibles dans DHIS 2, ainsi que des remarques sur leur mise en œuvre ou non dans l'application de saisie Android.

Tout problème lié à l'utilisation d'une fonctionnalité particulière avec Android est signalé par un point d'exclamation\!.

|  |  |
| :-: | :-- |
| ![](resources/icons/icon-complete.png) | Type de valeur mis en œuvre |
| ![](resources/icons/icon-incomplete.png) | Type de valeur non appliqué, mais ignoré en toute sécurité (s'il n'est pas obligatoire) |
| ![](resources/icons/icon-wip.png) | Travail en cours. Fonctionnalité pas encore totalement développée ou dont le fonctionnement inattendu a déjà été signalé. |

| Type de valeur | Description du type de valeur | Programme avec inscription | Programme avec inscription | Programme sans inscription | Ensemble de données | Notes relatives à la mise en œuvre |
| :-- | :-- | :-: | :-: | :-: | :-: | :-- |
|  |  | **Attributs** | **Éléments de données** | **Éléments de données** | **Éléments de données** |
| Heure | Heure uniquement | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Date & heure | Date et heure | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Date | Date uniquement | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Âge | Permet de saisir soit un âge en années/mois/jours, soit une date de naissance (les deux sont stockés sous forme de date de naissance). | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Numéro de téléphone | Numéro de téléphone valide | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Adresses électronique | Une adresse électronique sous un format valide | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| oui/non | Booléen oui/non (ou pas de réponse) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Oui uniquement | réponse de oui ou non | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |
| Nombre | tout nombre valid y compris les décimaux | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Entier | Tout entier (nombres entiers, sans décimales) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Entier positif | Uniquement des entiers positifs (pas de zéro ni de valeurs négatives) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Entier positif ou zéro | Uniquement zéro ou des entiers positifs (pas de valeurs négatives) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Entier négatif | Uniquement des entiers négatifs (pas de zéro ni de valeurs positives) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Pourcentage | Toute valeur décimale comprise entre 0 et 100 | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Intervalle unité | Toute valeur décimale comprise entre 0 et 1 | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Texte | Texte (longueur du texte pouvant atteindre 50 000 caractères) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Texte long | Texte (aucune contrainte quant à la longueur) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Lettre | Une seule lettre | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Fichier | Permet de télécharger des fichiers dans différents formats (nécessite la configuration d'un espace de stockage approprié) | ![](resources/icons/icon-wip.png) | ![](resources/icons/icon-wip.png) | ![](resources/icons/icon-wip.png) | ![](resources/icons/icon-incomplete.png) |  |
| Unité d’organisation | Permet la sélection d'une unité d'organisation DHIS2 comme valeur choisie | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-incomplete.png) |  |
| Chargé de suivi | Permet de sélectionner une instance existante, "instance d'entité suivie" (par exemple une personne) comme valeur. | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-incomplete.png) | ![](resources/icons/icon-incomplete.png) |  |
| Nom d'utilisateur | Permet la sélection d'un nom d'utilisateur valide de DHIS2 comme valeur | ![](resources/icons/icon-wip.png) | ![](resources/icons/icon-wip.png) | ![](resources/icons/icon-wip.png) | ![](resources/icons/icon-incomplete.png) |
| Coordonnée | Permet la saisie manuelle des coordonnées géographiques (ne permet pas la saisie automatique des coordonnées) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| URL | Permet la saisie manuelle d'un URL. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) |  |
| Image | Permet le chargement des images. | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-complete.png) | ![](resources/icons/icon-incomplete.png) |  |

# Android Settings Web App { #capture_app_andoid_settings_webapp }

## Aperçu { #capture_app_andoid_settings_webapp_overview }

This section focuses on the Android Settings Web App implementation.

The Android Settings Web App allows admins to configure synchronization parameters for the DHIS2 Android Capture App, encrypt the local database of the android devices, customize the appearance of Programs, Data sets, and Home screen, and add TEI Analytics items. The configuration parameters defined within this web app will overwrite the settings of all android devices using the DHIS2 Android Capture App.

Please note that in this version of the web app, only users with 'ALL' authority are able to define those parameters in the configuration. Other users having access to the web app can see the value of the parameters, but cannot edit them.

> **Attention**
>
> Cette version présente des améliorations et des fonctionnalités dérangeantes. De ce fait, les versions précédentes ne sont plus prises en charge, les paramètres qui y sont stockés seront supprimés.

## Paramètres généraux { #capture_app_andoid_settings_webapp_general }

Elles incluent des configurations telles que l'URL Matomo et l'identifiant du projet, le nombre de valeurs réservées à télécharger par TEI et chiffre la base de données de l'appareil.

![](resources/images/capture-app-general-settings.png)

**Matomo configuration:** If you already have a Matomo instance, add the Matomo URL and the project ID.

**Mobile configuration:** This section allows admin users to edit the SMS gateway ad result sender phone number.

**Reserved values:** This will specify the number of values per TEI attribute reserved to download in the devices.

**Encrypt device database:**

> **Warning**
>
> This is a critical action and will affect the local database of all android devices synchronizing with the server (it won't affect the server DHIS2 database).
>
> By default, the android app database is not encrypted, but an admin can check the _Encrypt device database_ to encrypt the metadata and data stored in every device. Encrypting the database will have an impact on the database volume and performance of the android app. Note that at the moment of selecting or unselecting this option, no data is lost (even if it hasn't been previously synchronized with the server)

**Disable all settings:** By clicking this button, the user will remove all android configuration settings. No configuration will be applied to the Android Capture app (if this is the case, the sync parameters applied are the ones defined in the Android Capture app).

## Synchronization { #capture_app_andoid_settings_webapp_synchronization }

Cette fonction propose des paramètres supplémentaires pour contrôler la synchronisation des métadonnées et/ou des données.

### Global { #capture_app_andoid_settings_webapp_synchronization_global }

**Metadata sync:** Admin users can choose how often the metadata will sync. e.g. Sync metadata every 24 hours.

**Data sync:** Admin users can choose how often the data will sync. e.g. Syncing data every 6 hours.

![](resources/images/capture-app-sync-global.png)

### Programme { #capture_app_andoid_settings_webapp_synchronization_program }

Cette section contrôle les paramètres de synchronisation de données du programme. Il possède une section permettant de définir les paramètres généraux ou par défaut qui seront utilisés lors de la synchronisation de tous les programmes.

#### Paramètres généraux { #capture_app_andoid_settings_webapp_synchronization_program_global }

Les paramètres généraux s'appliquent à tous les programmes auxquels un utilisateur de l'application Android a accès.

![](resources/images/capture-app-program-global-settings.png)

**TEI to download:** Maximum number of TEIs to download from the server.

**TEI download period:** It downloads the TEIs that have been updated within a period. e.g. TEIs that have been updated within last month

**Event to download:** Maximum number of Events to download.

**Event download period:** It downloads Events which event date belongs to a specific period.

#### Paramètres spécifiques { #capture_app_andoid_settings_webapp_synchronization_program_specific }

Cette section permet aux utilisateurs administrateurs de spécifier le comportement d'un ou de plusieurs programmes particuliers lors de la synchronisation des données. La configuration spécifique écrase les paramètres généraux des programmes répertoriés dans cette section. Pour ajouter un paramètre à un programme spécifique :

- Cliquez sur _Ajouter un paramètre spécifique au programme_. Une boîte de dialogue apparaît.
- Cliquez sous le titre "Valeurs par programme" et vous aurez une liste de programmes.
- Lorsque vous cliquez sur un programme, les différents paramètres à configurer seront affichés. Le nombre de paramètres dépend du type de programme (avec ou sans enregistrement).

**Paramètres des programmes sans enregistrement**

![](resources/images/capture-app-program-specific-dialog-without_registration.png)

**Paramètres des programmes avec des enregistrements**

![](resources/images/capture-app-program-specific-dialog-with_registration.png)

Si des paramètres spécifiques ont été enregistrés, un tableau en présentera un résumé avec la configuration propre à chaque programme ainsi que les options pour modifier ou supprimer ces paramètres.

![](resources/images/capture-app-program-specific-table.png)

> **Caution**
>
> Using specific settings per program might have unexpected results in the number of TEIs downloaded and the total amount might exceed the one defined in the Global Settings. This is due to how the appliation download the TEIs from the server. The Android client will first download a max number of TEIs from the server based on the Organistation Units where the user has access and based on the lastUpdate field. Afterwards it will download a max munumber of TEIs from the specific programs. Therefore, if the TEIs downloaded from the Global setting (500 in the example above) have been updated more recently than any of the TEIs from a specific program (500 for Malaria case diagnosis, treatment and investigation) the Android client will end up downloading 1000 TEI.
>
> This might look confusing at first, but once understood can be used to ensure a minium (and maximum) number of TEIs for a specific program will be downloaded which can be very useful in specific implementations.
>
> Imagine an implementation where it must be ensured that the Android user has all the TEIs of a specific program in a server where the same user has access to other Organisation Units where other TEIs might be enrolled in another program. The program is called Community Care and it has 17 TEIs which have been updated very long time ago. The administrator can ensure that the 17 TEIs will be donwloaded by setting anything in Global Settings (if needed to reduce bandwidth a very low value should be set) and a at least 17 for the specific program as show in the image below:
>
> ![](resources/images/capture-app-program-specific-example-web.png)
>
> When the initial synchronization is triggered the Android device will first download the last TEIs updated on the server (which according to our example do not belong to the specific program) and secondly up to 20 TEI from the specific program resulting in the following (notice all the TEIs for the program were downloaded):
>
> ![](resources/images/capture-app-program-specific-example-mobile1.png)
>
> And by going to the settings it can be appreciated how the total number of TEIs is the expected 37, 20 from the Global Setting, and 17 from the program specific.
>
> ![](resources/images/capture-app-program-specific-example-mobile2.png)

#### Réinitialiser toutes les valeurs { #capture_app_andoid_settings_webapp_synchronization_program_reset_all }

En cliquant sur _Réinitialiser toutes les valeurs_, l'utilisateur admin restaurera les valeurs des paramètres par défaut de la section du programme. Veuillez noter que dans ce cas, les paramètres spécifiques à chaque programme ne sont pas rétablis.

Pour enregistrer une configuration, l'utilisateur administrateur doit cliquer sur le bouton _Enregistrer_ (ce bouton est désactivé pour les utilisateurs qui n'ont pas 'TOUS' les droits)

### Data set { #capture_app_andoid_settings_webapp_synchronization_data }

Cette section contrôle les paramètres de synchronisation des données agrégées.

#### Paramètres généraux { #capture_app_andoid_settings_webapp_synchronization_data_global }

La première partie concerne les paramètres généraux qui s'appliquent à tous les ensembles de données auxquels un utilisateur de l'application Android a accès.

![](resources/images/capture-app-dataset-global-settings.png)

**Number of Periods:** Maximum number of periods to download.

#### Paramètres spécifiques { #capture_app_andoid_settings_webapp_synchronization_data_specific }

Pour ajouter un paramètre spécifique :

- Cliquez sur _Ajouter un paramètre spécifique à un ensemble de données_, vous accéderez à une fenêtre de  dialogue comportant une liste d'ensembles de données,
- Cliquez sur un ensemble de données pour compléter automatiquement ce champ avec la valeur par défaut en fonction du type de période de l'ensemble de données.

![](resources/images/capture-app-dataset-specific-dialog.png)

![](resources/images/capture-app-dataset-specific-table.png)

### User Sync Test { #capture_app_andoid_settings_webapp_synchronization_user_sync_test }

Cette section vérifie la quantité de données et de métadonnées qu'un utilisateur pourrait synchroniser avec son appareil. Vous pouvez tester cette fonctionnalité sur n'importe quel utilisateur auquel vous avez accès. Ce test permet de voir le nombre d'unités d'organisation, d'ensembles de données, de règles de programme, de programmes, etc., auxquels un utilisateur de l'application Android a accès (les ressources que l'application Android va télécharger), ainsi que la taille des métadonnées et des données téléchargées (estimation). Notez qu'un utilisateur n'a pas besoin d'avoir 'TOUS' les droits pour mener ce test.

![](resources/images/capture-app-user-sync-test.png)

> **Remarque :**
>
> Les valeurs surlignées en rouge sont dues au fait que la valeur est considérée supérieure à la valeur maximale recommandée.

## Appearance { #capture_app_andoid_settings_webapp_appearance }

Ces paramètres permettent de contrôler l'aspect des formulaires de saisie de données et de listes.

- Filtre : il définit les filtres qui peuvent être activés dans les différents menus de l'application.
- Spinner d'achèvement : il active/désactive le spinner d'achèvement, lequel montre la progression des entrées de données dans les formulaires.

These settings refer to visual components, so they must be consumed by the app.

### Home screen { #capture_app_andoid_settings_webapp_appearance_home_screen }

Il permet à l'utilisateur administrateur d'activer ou de désactiver l'option d'affichage des filtres liés à la date, à l'unité d'organisation, à l'état de la synchronisation et à l'utilisateur lui-même, sur l'écran d'accueil.

![](resources/images/capture-app-appearance-home.png)

### Programme { #capture_app_andoid_settings_webapp_appearance_program }

Il permet à l'utilisateur administrateur de spécifier les filtres qui vont être affichés et d'activer ou de désactiver l'option d'affichage du pourcentage d'achèvement du formulaire de saisie de données.

#### Paramètres généraux { #capture_app_andoid_settings_webapp_appearance_program_global }

Les paramètres généraux s'appliquent à tous les programmes auxquels un utilisateur de l'application Android a accès.

![](resources/images/capture-app-appearance-program-global.png)

#### Paramètres spécifiques { #capture_app_andoid_settings_webapp_appearance_program_specific }

Cette section permet à l'utilisateur administrateur de personnaliser l'option contrôlant l'affichage du filtre et du pourcentage d'achèvement. Pour ajouter un paramètre spécifique :

- Cliquez sur _Ajouter des paramètres de programme_. Une boîte de dialogue apparaîtra.
- Cliquez sur le menu déroulant ; il affichera une liste de programmes.
- Lorsque vous cliquez sur un programme, les différents filtres à configurer seront affichés. Le filtre de la combinaison de catégorie dépend du nom de la combinaison de catégorie.

![](resources/images/capture-app-appearance-program-specific.png)

Si des paramètres spécifiques ont été enregistrés, un tableau présentera le résumé de la configuration de chaque programme ainsi que les options pour modifier ou supprimer ces paramètres.

![](resources/images/capture-app-appearance-program-table.png)

### Data set { #capture_app_andoid_settings_webapp_appearance_data }

It allows admins to enable/disable filters for the data set section

#### Paramètres généraux { #capture_app_andoid_settings_webapp_appearance_data_global }

La première partie concerne les paramètres généraux qui s'appliquent à tous les ensembles de données auxquels un utilisateur de l'application Android a accès.

![](resources/images/capture-app-appearance-dataset-global.png)

#### Paramètres spécifiques { #capture_app_andoid_settings_webapp_appearance_data_specific }

Pour ajouter un paramètre spécifique :

- Cliquez sur _Ajouter des paramètres à un ensemble de données_. Un dialogue avec liste déroulante apparaît, présentant une liste d'ensembles de données.
- Cliquez sur un ensemble de données. Une liste d'options permettant d'activer ou de désactiver les filtres s'affichera.

![](resources/images/capture-app-appearance-dataset-specific.png)

![](resources/images/capture-app-appearance-dataset-table.png)

## Analytics { #capture_app_andoid_settings_webapp_analytics }

Analytics settings define the TEI analytics items (charts, tables) that will be displayed to the user. The scope of the analysis is the TEI, so the visualizations will be displayed in the TEI dashboard of the android app.

Any item defined in the settings app will overwrite the default behaviour of the android app, only showing the items defined in the settings app. The purpose of this section is to define visualizations to show evolution of dataelements and program indicators over time. Based on that, it will only take into cosideration dataelements that belongs to a repeatable program stage, or programindicators which formula contains at least one dataelement that belongs to a repeatable program stage.

Pour créer un élément d'**Analyses des TEI ** :

- Cliquez sur _Ajouter des Analyses de TEI _. Une boîte de dialogue apparaît avec un petit formulaire.
- Choisissez un programme et une étape de programme répétable, puis remplissez le formulaire. **Nom abrégé** est le seul champ facultatif.
- Si une visualisation d'élément autre que Nutrition OMS a été choisie, les prochains champs à sélectionner seront le type de période (mensuel, hebdomadaire, quotidien), un type d'élément (indicateur de programme, élément de données) et un élément qui sera basé sur le type d'élément précédemment sélectionné. Rappelez-vous que ces éléments sont liés au programme et à l'étape du programme répétable choisis au début.

![](resources/images/capture-app-analytics-item.png)

Pour créer un élément d'**Analyses de Nutrition OMS** :

- Sélectionnez un programme, une étape de programme et Nutrition OMS comme type de visualisation.
- Choisissez un type de visualisation OMS qui peut être la taille pour l'âge (HFA), le poids pour l'âge (WFA) ou le poids pour la taille (WFH).
- Select the trackedentityattribute that represents the gender. You have then to specify the option for Male 'Male title' and the option for Female 'Female title'. Normally they will be option codes.
- Choose the dataelement/programindicator that will be displayed in the Horizontal (x) axis
- Choose the dataelement/programindicator that will be displayed in the Vertical (y) axis

![](resources/images/capture-app-analytics-who-item.png)

Si un élément d'Analyses de TEI a été créé, un tableau affichera le titre de l'élément et le nom du programme, ainsi que des boutons d'action permettant de supprimer ou de modifier cet élément.

![](resources/images/capture-app-analytics-table.png)

## Installation { #capture_app_andoid_settings_webapp_installation }

Un utilisateur peut facilement installer Android Settings Web App en se connectant à DHIS2 et en accédant à **Gestion des applications**.

- Click on **App Store**
- Accédez à _Android Settings App (Application Paramètres Android)_
- Click on _Install V2.0.0_

![](resources/images/capture-app-app-hub-install.png)

## Log in and first time setup { #capture_app_andoid_settings_webapp_login }

Lorsqu'un utilisateur installe et lance Android Settings Web App pour la première fois, l'application Web devra définir et enregistrer les valeurs par défaut de la configuration. Par cette action, les paramètres par défaut seront appliqués à tous les appareils Android connectés à l'instance.

![](resources/images/capture-app-first-time-setup.png)

> **Attention**
>
> Les versions précédentes sont obsolètes. Vous débuterez donc avec une nouvelle configuration par défaut.

![](resources/images/capture-app-first-setup-with-deprecation-message.png)

> **Attention**
>
> Seuls les utilisateurs disposant de 'TOUS' les droits peuvent _sauvegarder ou mettre à jour_ la configuration. Cependant, tout utilisateur pourra la consulter, une fois l'accès créée.

![](resources/images/capture-app-first-setup-no-authorities.png)

## Enter and save configuration parameters { #capture_app_andoid_settings_webapp_enter_and_save }

### Datastore { #capture_app_andoid_settings_webapp_datastore }

En interne, tous les paramètres sont stockés dans le [Datastore](https://docs.dhis2.org/master/en/developer/html/webapi_data_store.html) au format JSON.

Structure du Datastore :

| Élément      | Description                                 | Type de données |
| --------- | ------------------------------------------- | --------- |
| Espace de noms | Espace-noms pour l'organisation des entrées       | Chaîne    |
| Clé       | Clé d'identification des valeurs            | Chaîne    |
| Valeur     | Valeur contenant les informations à entrer | JSON      |

### Save configuration parameters { #capture_app_andoid_settings_webapp_save_config }

Au bas du formulaire de toutes les sections de paramètres, les utilisateurs administrateurs peuvent trouver un bouton _Enregistrer_.

![](resources/images/capture-app-save_button.png)

C'est seulement si un utilisateur administrateur clique sur ce bouton que toutes les modifications apportées à la section en cours sont enregistrées sur le Datastore. Ces modifications s'appliqueront aux Applications Android Capture lorsqu'elles synchroniseront leur configuration.

**Modifications non sauvegardées :**

In case an admin user wants to go to another section when there are still some unsaved changes, an alert will be displayed before navigating away from the current section. In case the user accepts leaving the page, the unsaved changes will be lost.

![](resources/images/capture-app-unsaved-changes.png)

#### Reset all values to default { #capture_app_andoid_settings_webapp_reset_all }

Un utilisateur administrateur peut restaurer les paramètres à tout moment. Un bouton _Réinitialiser toutes les valeurs par défaut_ situé au bas du formulaire de toutes les sections de paramètres permet d'exécuter cette fonction.

![](resources/images/capture-app-reset-default.png)

Les valeurs par défaut ne seront restaurées que sur le Datastore et appliquées que si l'utilisateur clique sur _Enregistrer_.
