---
revision_date: "2022-02-08"
template: single.html
---

# 什么是DHIS2？ { #what_is_dhis2 }

阅读本章后，您将能够理解：

-   DHIS2 是什么以及它在卫生信息系统 (HIS) 方面的用途是什么？

-   部署 DHIS2 时主要的技术考虑是什么，以及使用新模块扩展 DHIS2 的选项有哪些？

-   基于患者的数据和汇总数据有什么区别？

-   将免费和开源软件 (FOSS) 用于 HIS 有哪些好处和挑战？

## DHIS2背景 { #mod1_1 }

DHIS2 是一个用于收集、验证、分析和展示的工具
汇总和基于患者的统计数据，量身定制（但不是
限于）综合健康信息管理活动。它是一个
通用工具而不是预配置的数据库应用程序，具有
开放的元数据模型和灵活的用户界面，允许用户
无需设计特定信息系统的内容
用于编程。 DHIS2 是一个模块化的基于 Web 的软件包
使用免费和开源的 Java 框架。

DHIS2 是在 BSD 许可下发布的开源软件，可以
免费获得。它可以在任何带有 Java 运行时的平台上运行
已安装环境（JRE 7 或更高版本）。

DHIS2 由健康信息系统计划 (HISP) 开发为
一个开放的全球分布式流程，开发人员目前
印度、越南、坦桑尼亚、爱尔兰和挪威。发展是
由奥斯陆大学协调，并得到 NORAD 和其他机构的支持
捐助者。

DHIS2 软件在非洲、亚洲、
和拉丁美洲，以及采用 DHIS2 作为其
全国范围的 HIS 软件包括肯尼亚、坦桑尼亚、乌干达、卢旺达、加纳、
利比里亚和孟加拉国。越来越多的国家和地区
组织正在开始新的部署。

随附的文档将尝试提供
应用程序的全面概述。鉴于抽象的性质
应用程序，本手册不会作为一个完整的逐步
在每种情况下如何使用应用程序的指南，但是
相反，将寻求提供 DHIS2 如何可以的插图和示例
通过通用示例在各种情况下实现。

在新环境中实施 DHIS2 之前，我们强烈建议阅读
DHIS2 实施指南（与本手册分开的手册），也
可在主 DHIS2 [网站](http://dhis2.org/documentation/) 获得。

## DHIS2的主要功能和目的 { #key-features-and-purpose-of-dhis2 }

DHIS2的主要功能和目的可归纳如下：

-   提供基于数据仓库原理和模块化结构的综合数据管理解决方案，可轻松针对管理信息系统的不同需求进行定制，支持组织层级不同层次的分析。

-   通过用户界面进行定制和本地适配。在新环境（国家、地区、地区等）中开始使用 DHIS2 无需编程。

-   提供数据输入工具，可以是标准列表或表格的形式，也可以定制为复制纸质表格。

-   为数据验证和提高数据质量提供不同类型的工具。

-   使用数据收集工具的设计，为选定的指标或摘要报告提供易于使用的一键式报告和图表。允许与流行的外部报告设计工具（例如 JasperReports）集成以添加更多自定义或高级报告。

-   分析模块（即 GIS、数据透视表、数据可视化器、事件报告等）中的灵活和动态（即时）数据分析。

-   一个用户特定的仪表板，用于快速访问相关的监控和评估工具，包括指标图表和指向最喜欢的报告、地图和系统中其他关键资源的链接。

-   易于使用的元数据管理用户界面，例如用于添加/编辑数据集或卫生设施。无需编程即可在新环境中设置系统。

-   设计和修改计算指标公式的功能。

-   用于密码、安全性和细粒度访问控制（用户角色）的用户管理模块。

-   可以向系统用户发送消息以获取反馈和通知。消息也可以发送到电子邮件和 SMS。

-   用户可以使用 Interpretations 在图表和报告中共享和讨论他们的数据，从而建立一个活跃的信息驱动的用户社区。

-   数据和元数据的导出导入功能，支持离线安装的同步以及与其他应用程序的互操作性。

-   使用 DHIS2 Web-API，允许与外部软件集成并通过使用自定义应用程序扩展核心平台。

-   可以根据用户需要开发和集成更多模块，作为 DHIS2 门户用户界面的一部分或通过 DHIS2 Web-API 交互的更松散耦合的外部应用程序。

综上所述，DHIS2 为
任何健康信息用户的报告和分析需求
等级。

## DHIS2在HIS中的使用：数据收集，处理，解释和分析。 { #use-of-dhis2-in-his-data-collection-processing-interpretation-and-analysis }

HIS 的更广泛背景可以通过
信息循环如下图 1.1 所示。信息循环
以图形方式描绘了不同的组件、阶段和过程
通过它收集数据、检查质量、处理、
分析和使用。

![The health information
cycle](resources/images/dhis2UserManual/dhis2_information_cycle.png)

DHIS2支持信息周期的不同方面，包括：

-   收集数据。

-   运行质量检查。

-   多个级别的数据访问。

-   正在报告。

-   制作图形和地图以及其他形式的分析。

-   实现跨时间（例如，前几个月）和空间（例如，跨设施和区域）的比较。

-   查看趋势（以时间序列显示数据以查看其最低和最高水平）。

作为第一步，DHIS2 用作数据收集、记录和
编译工具，所有数据（无论是数字还是文本形式）都可以
进入了它。数据输入可以在数据元素列表中完成，也可以在
定制的用户定义表格，可以开发成模仿纸张
以简化数据输入过程。

下一步，DHIS2 可用于提高数据质量。首先，在
数据输入点，可以检查数据是否在
任何特定的最小值和最大值的可接受范围水平
数据元素。例如，这种检查可以帮助识别打字
数据输入时的错误。此外，用户可以定义各种
验证规则，DHIS2可以通过验证运行数据
识别违规行为的规则。这些类型的检查有助于确保
输入系统的数据从一开始就是高质量的，并且可以
由最熟悉它的人改进。

输入并验证数据后，DHIS2 可以帮助
不同类型的报告。第一种是例行报告，
可以预定义，以便所有需要例行的报告
单击按钮即可生成。此外，DHIS2 可以帮助
通过比较例如生成分析报告
跨设施或随时间变化的指标。图表、地图、报告和
健康档案是 DHIS2 可以产生的输出之一，这些
应由卫生部门定期生成、分析和处理
经理。

## 技术背景 { #technical-background }

### DHIS2作为平台 { #dhis2-as-a-platform }

可以将 DHIS2 视为多个级别的平台。首先，
应用程序数据库的设计充分考虑了灵活性。
数据结构，例如数据元素、组织单元、表单和
用户角色可以通过应用程序用户完全自由定义
界面。这使得系统可以适应
大量的语言环境和用例。我们已经看到 DHIS2
支持常规数据捕获和分析的大多数主要要求
在国家实施中出现。它还使 DHIS2 成为可能
作为物流、实验室等领域的管理系统
金融。

其次，由于DHIS2的模块化设计，它可以扩展
附加软件模块或通过自定义应用程序。这些软件
模块/应用程序可以与 DHIS2 的核心模块并存
可以集成到 DHIS2 门户和菜单系统中。这是一个
强大的功能，因为它可以通过额外的方式扩展系统
需要时的功能，通常用于特定国家/地区的要求
如前所述。

软件模块可扩展性的缺点是它把
开发过程中的几个限制。开发人员创造
额外的功能仅限于 DHIS2 技术
编程语言和软件框架，除了
DHIS2 门户解决方案对模块设计的限制。
此外，这些模块必须包含在 DHIS2 软件中，当
软件是在网络服务器上构建和部署的，而不是动态的
运行。

为了克服这些限制并实现更松散的耦合
在 DHIS2 服务层和附加软件制品之间，一个
基于 REST 的 API 已作为 DHIS2 的一部分开发。这个 Web API
符合REST架构风格的规则。这意味着
那：

-   Web API 为完整的 DHIS2 数据模型提供了一个可导航和机器可读的接口。例如，可以访问数据元素的完整列表，然后使用提供的 URL 导航到感兴趣的特定数据元素，然后使用提供的 URL 导航到数据元素所属的数据集列表。

-   （元）数据通过使用普通 HTTP 请求的统一接口 (URL) 访问。不涉及花哨的传输格式或协议——只有经过充分测试、易于理解的 HTTP 协议，它是当今 Web 的主要构建块。这意味着第三方开发人员可以使用 DHIS2 数据模型和数据开发软件，而无需了解 DHIS2 2 特定技术或遵守 DHIS2 设计约束。

-   所有数据，包括元数据、报告、地图和图表，在 REST 术语中称为资源，都可以以当今 Web 的大多数流行表示格式进行检索，例如 XML、JSON、PDF 和 PNG。这些格式在应用程序和编程语言中得到广泛支持，并为第三方开发人员提供了广泛的实施选项。

### 了解平台独立性 { #understanding-platform-independence }

所有计算机都有一个操作系统 (OS) 来管理它和
运行它的程序。操作系统作为中间层
软件应用程序（如 DHIS2）和硬件（如
作为 CPU 和 RAM。 DHIS2 运行在 Java 虚拟机上，并且可以
因此可以在任何支持 Java 的操作系统上运行。平台
独立性意味着软件应用程序可以在任何操作系统上运行 -
Windows、Linux、Macintosh 等。 DHIS2 是独立于平台的，因此
可以在许多不同的上下文中使用，具体取决于确切的
要使用的操作系统的要求。

此外，DHIS2 支持三大数据库管理系统
系统 (DBMS)。 DHIS2 使用 Hibernate 数据库抽象框架
并与以下数据库系统兼容：PostgreSQL、MySQL
和 H2。 PostgreSQL 和 MySQL 是高质量的生产就绪
数据库，而 H2 是用于小规模的有用的内存数据库
应用程序或开发活动。

最后，也许是最重要的，因为 DHIS2 是一个基于浏览器的
应用程序，与系统交互的唯一真正要求是
使用网络浏览器。 DHIS2 支持大多数网络浏览器，尽管目前
推荐使用 Google Chrome、Mozilla Firefox 或 Opera。

### 部署策略-在线与离线 { #deployment-strategies-online-vs-offline }

DHIS2 是一个支持网络的应用程序，可以通过
Internet、本地 Intranet 以及本地安装的系统。这
DHIS2 的部署替代方案在本章中定义为 i)
离线部署 ii) 在线部署和 iii) 混合部署。这
以下部分将讨论含义和差异。

#### 离线部署 { #offline-deployment }

离线部署意味着多个独立的离线
实例是为最终用户安装的，通常是在地区级别。
该系统主要由最终用户/地区卫生部门维护
输入数据并从运行的系统生成报告的官员
他们的本地服务器。该系统通常也将由一个
国家超级用户团队定期访问该地区
部署。数据由最终用户在层次结构中向上移动
生成通过电子邮件或电子方式发送的数据交换文件
身体上通过邮件或个人旅行。 （注意简短的 Internet
发送电子邮件所需的连接不符合被
定义为在线）。这种部署方式有明显的好处
当适当的 Internet 连接不可用时，它可以工作。
另一方面，这种风格存在重大挑战，
将在下一节中描述。

-   **硬件：**运行独立系统需要在服务器和可靠电源方面安装先进的硬件，通常在全国各地的地区级别。这需要适当的采购资金和长期维护计划。

-   **软件平台：** 本地安装意味着需要大量维护。根据经验，最大的挑战是病毒和其他恶意软件，从长远来看，它们往往会感染本地安装。主要原因是最终用户使用记忆棒在私人计算机、其他工作站和运行应用程序的系统之间传输数据交换文件和文档。在离线环境中使防病毒软件和操作系统补丁保持最新是具有挑战性的，并且最终用户经常采用安全方面的不良做法。解决此问题的首选方法是为不允许使用记忆棒的应用程序运行专用服务器，并使用不像 MS Windows 那样容易感染病毒的基于 Linux 的操作系统。

-   **软件应用程序：** 能够向用户分发健康信息软件的新功能和错误修复对于系统的维护和改进至关重要。依靠最终用户执行软件升级需要广泛的培训和高水平的能力，因为升级软件应用程序可能是一项技术上具有挑战性的任务。依靠国家级的超级用户团队来维护软件意味着很多旅行。

-   **数据库维护：**高效系统的先决条件是所有用户都使用标准化的元数据集（数据元素、表单等）输入数据。与前面关于软件升级的观点一样，如果以电子方式发送更新或组织良好的超级用户团队，则将元数据集的更改分发到大量离线安装需要最终用户的能力。未能保持元数据集同步将导致失去从地区移动数据的能力和/或不一致的国家数据库，因为例如在地区级别输入的数据将与国家级别的数据不兼容。

#### 在线部署 { #online-deployment }

在线部署意味着应用程序的单个实例设置在连接到 Internet 的服务器上。所有用户（客户）使用网络浏览器通过互联网连接到在线中央服务器。由于全球（移动）互联网覆盖范围的增加，以及随时可用且廉价的云计算资源，这种部署方式越来越可能。这些发展使得使用移动互联网调制解调器（也称为_dongles_）甚至可以在最偏远的农村地区访问在线服务器成为可能。

这种在线部署方式对
实施过程和应用程序维护相比
传统的离线独立风格：

-   **硬件：** 最终用户方面的硬件要求仅限于相当现代的计算机/笔记本电脑和通过固定线路或移动调制解调器的 Internet 连接。无需为每个用户配备专门的服务器，任何支持 Internet 的计算机就足够了。在线部署需要一台服务器，但由于只有一台（或多台）服务器需要采购和维护，这比在不同位置维护许多单独的服务器要简单得多（也更便宜）。鉴于云计算资源的价格持续稳步下降，同时计算能力不断提高，在云中建立强大的服务器比采购硬件便宜得多。

-   **软件平台：**最终用户只需要一个网络浏览器即可连接到在线服务器。当今所有流行的操作系统都附带 Web 浏览器，并且对什么类型或版本没有特殊要求。这意味着，如果出现病毒感染或软件损坏等严重问题，您可以随时重新格式化和安装计算机操作系统或获取新的计算机/笔记本电脑。用户可以继续输入数据，不会丢失任何数据。

-   **软件应用程序：**中央服务器部署方式意味着应用程序可以以集中的方式升级和维护。当发布具有新功能和错误修复的应用程序的新版本时，可以将其部署到单个在线服务器。下次最终用户通过 Internet 连接时，所有更改都将反映在客户端。这显然对改进系统的过程产生了巨大的积极影响，因为新功能可以立即分发给用户，所有用户都将访问相同的应用程序版本，并且可以即时整理和部署错误和问题。

-   **数据库维护：**与上一点类似，元数据的更改可以集中在在线服务器上进行，并在下次连接到服务器时自动传播到所有客户端。这有效地消除了与维护与传统离线部署方式相关的升级和标准化元数据集相关的大量问题。例如，在初始数据库开发阶段和年度数据库修订过程中非常方便，因为即使经常发生更改，最终用户也将访问一致且标准化的数据库。

在 Internet 连接的情况下，此方法可能会出现问题
在很长一段时间内不稳定或丢失。然而 DHIS2 有
某些需要 Internet 连接才能使用的功能
只有系统正常工作的一部分时间，例如离线
数据输入。然而，一般来说，DHIS2 确实需要互联网连接
某种意义上，但这也越来越容易解决，即使在
偏远地区。

#### 混合部署 { #hybrid-deployment }

从到目前为止的讨论中，人们意识到在线部署
风格优于离线风格，但需要体面的互联网
将使用的连接。重要的是要注意，
提到的样式可以在共同部署中共存。它是完美的
可以在一个单一的范围内进行在线和离线部署
国家。一般规则是地区和设施应
在互联网足够的情况下通过互联网访问系统
存在连通性，离线系统应部署到地区
情况并非如此。

准确定义合适的互联网连接很难，但作为一个规则
拇指下载速度应至少为 10 KB/秒
客户端和至少 1 Mbit/sec（专用）带宽用于服务器。

在这方面，可以连接到移动互联网调制解调器
电脑或笔记本电脑和访问移动网络是一个非常有能力的
和可行的解决方案。移动互联网覆盖快速增长
在世界各地，通常以低廉的价格提供出色的连接
并且是本地网络和维护不善的固定网络的绝佳替代品
互联网线路。与全国移动网络取得联系
关于后付费订阅和潜在大订单的公司
好处是值得的。每个网络覆盖
应调查相关国家的网络运营商
决定选择哪种部署方法，因为它可能不同，并且
覆盖全国不同地区。

#### 服务器托管 { #server-hosting }

在线部署方法提出了在何处以及如何部署的问题
托管将运行 DHIS2 应用程序的服务器。通常有
有几个选项：

1.  卫生部内部托管

2.  在政府数据中心内托管

3.  通过外部托管公司托管

选择第一个选项的主要原因往往是政治性的
拥有数据库“物理所有权”的动机。这是
为了“拥有”和控制数据，许多人认为这很重要。
还希望为服务器管理建立本地能力
与项目的可持续性有关。这通常是捐助者驱动的
倡议，因为它被视为一项具体而有益的使命。

关于第二种方案，有些地方是政府数据中心
旨在促进和改善使用和
公共数据的可访问性。另一个原因是扩散
内部服务器环境对资源的要求很高，而且更多
有效地建立集中的基础设施和能力。

关于外部托管，最近有一种转向外包的趋势
对外部计算机资源的操作和管理
提供者，这些资源通常通过网络访问
称为“云计算”或“软件即服务”。那些
通常使用 Web 浏览器通过 Internet 访问资源。

在线服务器部署的主要目标是提供长期的
对预期服务的稳定和高性能可访问性。什么时候
决定为服务器环境选择哪个选项有很多
需要考虑的方面：

1.  服务器管理和操作的人力。必须有具备服务器管理一般技能的人力资源以及用于提供服务的应用程序的特定技术。此类技术的示例是 Web 服务器和数据库管理平台。

2.  可靠的自动化备份解决方案，包括本地服务器外备份和远程备份。

3.  稳定的连接和高网络带宽用于进出服务器的流量。

4.  稳定的电源，包括备用解决方案。

5.  物理服务器的安全环境，涉及访问、盗窃和火灾等问题。

6.  存在灾难恢复计划。该计划必须包含一个切合实际的策略，以确保在发生硬件故障、网络停机等事件时，服务只会遭受短暂的停机时间。

7.  可行，强大而强大的硬件。

必须涵盖所有这些方面才能创建适当的
托管环境。硬件要求特意放在最后
因为有一个明显的趋势是给予它太多的关注。

回顾三个主要的托管选项，经验来自
发展中国家的执行任务表明，所有
在可行的情况下，选项一和选项二中很少出现托管方面
等级。在所有这些方面都达到可接受的水平具有挑战性
在人力资源和金钱方面，尤其是与
选项三的成本。它的好处是可以容纳
提到政治方面和建立服务器的本地能力
管理，另一方面，这可以在
替代方式。

选项三 - 外部托管 - 的好处是它支持所有
以非常实惠的价格提供上述托管方面的服务。一些
托管提供商 - 虚拟服务器或软件即服务 - 提供
运行大多数类型的应用程序的可靠服务。示例
此类提供商是 [Linode](http://www.linode.com) 和 [Amazon Web
服务](http://aws.amazon.com)。此类服务器的管理发生
通过网络连接，最常见的情况是
本地服务器管理。服务器在此的物理位置
案例变得无关紧要，因为此类提供商在大多数情况下提供服务
世界的一部分。该解决方案正日益成为标准
托管应用程序服务的解决方案。建筑方面
服务器管理的本地容量与此选项兼容
因为本地 ICT 团队可以负责维护外部
托管服务器，但不必担心电源
通常存在于主要之外的供应和带宽限制
数据中心。

一种将外部托管的好处与需求相结合的方法
对于本地托管和物理所有权是使用外部托管
主要事务系统的提供者，同时反映这一点
服务器到本地托管的非关键服务器，用于
只读目的，例如数据分析和通过内联网访问。

## HIS中汇总数据和患者数据之间的差异 { #difference-between-aggregated-and-patient-data-in-a-his }

_患者数据_是与单个患者相关的数据，例如他/她的诊断、姓名、年龄、早期病史等。此数据通常基于单个患者与医护人员的交互。例如，当患者访问医疗保健诊所时，可能会记录各种详细信息，例如患者的体温、体重和各种血液检查。如果该患者被诊断为与 ICD-10 代码 D51.9 相对应的“维生素 B 12 缺乏性贫血，未指定”，这种特定的相互作用最终可能会在基于聚合的系统中被记录为“贫血”的实例。当您想要纵向跟踪患者随时间的进展时，基于患者的数据非常重要。例如，如果我们想跟踪患者对结核病治疗过程的坚持和反应（通常需要 6-9 个月），我们将需要基于患者的数据。

_汇总数据_是与多个患者相关的数据的合并，因此无法追溯到特定患者。它们只是计数，例如疟疾、结核病或其他疾病的发病率。通常，卫生机构处理的常规数据是这种汇总统计数据，用于生成常规报告和指标，最重要的是，用于卫生系统内的战略规划。汇总数据无法提供患者级别数据可以提供的详细信息类型，但对于卫生系统绩效的规划和指导至关重要。

在两者之间，您有基于案例的数据，或匿名的“患者”
数据。可以收集有关特定健康事件的大量详细信息
不必确定所涉及的患者。
住院或门诊就诊、霍乱新病例、孕产妇死亡
等是人们想要收集更多的常见用例
只是添加到案例或访问总数中的详细信息。这
数据通常以行列表类型的形式收集，或者更多
详细的审计表格。它不同于某种意义上的汇总数据
它包含有关特定事件的许多详细信息，而
汇总数据将计算某种类型的事件数量，例如如何
主要诊断为“疟疾”的门诊就诊次数，或有多少
死者没有参加 ANC 的孕产妇死亡人数，或有多少
5 岁以下儿童的霍乱爆发。在 DHIS2 中，这个数据是
通过单一事件类型的程序收集，没有
登记。

患者数据是高度机密的，因此必须加以保护
除了医生，没有人能得到它。在纸上时，它必须是
妥善存放在安全的地方。对于计算机，患者数据需求
使用密码、限制访问和审计日志来保护系统。

聚合数据的安全问题不像对患者那么重要
数据，因为通常不可能识别特定的人
汇总统计。然而，数据仍然可能被滥用和
被他人误解，不应在没有足够的情况下分发
数据发布政策到位。

## 自由和开源软件（FOSS）：好处和挑战 { #free-and-open-source-software-foss-benefits-and-challenges }

软件是带有指示计算机如何操作的指令。这些指令的人工创作结果和人类的可读形式被称为源代码。在计算机实际执行指令之前，必须将源代码编译为机器可读（二进制）格式，称为目标代码。所有发布的软件都包含目标代码，但是FOSS软件也包括可获得的源代码。

专有软件所有者将其受版权保护的对象代码授权给用户，从而允许用户运行该程序。另一方面，FOSS程序同时许可目标代码和源代码，从而允许用户运行，修改并可能重新分发程序。通过访问源代码，用户可以自由地出于任何目的运行程序，重新分发，探查，改编，学习，自定义软件以适应他们的需求，并为社区的利益向公众发布改进内容。因此，某些FOSS也被称为自由软件，其中“自由”首先是指上述自由，而不是用金钱这个词来形容。

在公共卫生部门内，FOSS 可能具有一系列
好处，包括：

-   降低成本，因为它不涉及支付高昂的许可费用。

-   鉴于卫生部门的信息需求不断变化和发展，用户需要有根据用户要求进行更改的自由。这通常在专有系统中受到限制。

-   访问源代码以实现集成和互操作性。在卫生部门，不同软件应用程序之间的互操作性变得越来越重要，这意味着使两个或多个系统能够通信元数据和数据。这项工作要容易得多，有时还依赖于创建集成的开发人员可用的源代码。在专有软件的情况下，这种可用性通常是不可能的。如果是这样，它会带来高昂的成本和合同义务。

-   像 DHIS2 这样的 FOSS 应用程序通常由全球开发人员网络支持，因此可以获得尖端的研发知识。

# 使用数据输入应用 { #data_entry_app }

## 关于数据输入应用 { #about_data_entry_app }

在**数据输入**应用程序中，您可以在DHIS2中手动输入汇总数据。您一次注册一个组织单位，一个期间和一组数据元素（数据集）的数据。数据集通常对应于基于纸张的数据收集工具。您可以在**维护**应用程序中配置数据集。

> **注意**
>
> 如果一个数据集同时有一个部分表格和一个自定义表格，系统在数据输入过程中显示自定义表格。输入数据的用户无法选择他们想要使用的表单。在基于 Web 的数据输入中，显示偏好的顺序是：
>
> 1. 自定义表单（如果存在）
>
> 2. 截面形式（如果存在）
>
> 3. 默认形式
>
> 移动设备不支持自定义表单。在基于移动的数据输入中，显示偏好的顺序是：
>
> 1. 截面形式（如果存在）
>
> 2. 默认形式

关闭组织机构时，您无法在**数据输入**应用程序中向该组织单位注册或编辑数据。

## 以数据输入形式输入数据 { #enter_data_in_data_entry_form }

![](resources/images/data_entry/data_entry_overview.png)

1.  打开**数据输入**应用。

2.  在左侧的组织单位树中，选择一个组织单位。

3.  选择一个**数据集**。

4.  选择一个**期间**。

    可用时段由数据集的时段类型（报告频率）控制。您可以单击**上一年**或**下一年**来后退一年。

    > **Note**
    >
    > Depending on how you've configured the data entry form, you might have to enter additional information before you can open the date entry form. This can for example be a project derived from a category combination.

5.  在数据输入表单中输入数据。

    -   绿色字段表示系统已保存该值。

    -   灰色字段表示该字段已禁用，您无法输入值。光标将自动跳转到下一个打开的字段。

    -   若要移动到下一个字段，请按 Tab 键或向下箭头键。

    -   要返回上一个字段，请按 Shift+Tab 或向上箭头键。

    -   如果您输入了无效值，例如字段中仅接受数值的字符，您将看到一个解释问题的弹出窗口，并且该字段将显示为黄色（未保存），直到您更正了该值.

    -   如果您为该字段定义了一个最小最大值范围并且您输入了一个超出此范围的值，您将收到一条弹出消息，指出该值超出范围。在您更改值或更新值范围并重新输入值之前，该值将保持未保存状态。

6.  填写表单后，点击数据输入表单右上角或下方的**运行验证**。

    然后针对新数据运行涉及当前数据输入表单（数据集）中的数据元素的所有验证规则。如果没有违反验证规则，您将看到一条消息：_数据输入屏幕已成功通过验证_。如果存在验证违规，它们将显示在列表中。

    ![](resources/images/dhis2UserManual/Validation_Rule_Result.png)

7.  （可选）更正验证冲突。

    > **Note**
    >
    > Zero (0) will delete the value if the data element has been configured to not store zeros.

8.  改正错误并完成数据输入后，请点击**完成**。

    系统在为区、县、省或国家级生成完整性报告时使用此信息。

## 将数据值标记为后续 { #mark_data_for_followup_in_data_entry_form }

![](resources/images/data_entry/data_entry_section_history.png)

例如，如果您有需要进一步调查的可疑值，则可以将其保留为系统，但将其标记为后续。然后，在 **数据质量** 应用中，您可以运行后续分析以查看和更正所有标记的值。

1.  打开**数据输入**应用。

2.  打开一个现有的数据输入表单。

3.  双击您要标记为后续的值的字段。

4.  单击星号图标。

## 在完整的数据输入表单中编辑数据值 { #edit_data_value_in_completed_form }

1.  打开**数据输入**应用。

2.  打开一个现有的数据输入表单。

3.  点击**未完成**。

4.  更改相关数据值。

    > **Note**
    >
    > Zero (0) will delete the value if the data element has been configured to not store zeros,

5.  点击**完成**。

## 显示数据值的历史记录 { #display_data_value_history }

![](resources/images/data_entry/data_entry_section_history.png)

您可以显示为一个字段注册的最后12个值。

1.  打开**数据输入**应用。

2.  打开一个现有的数据输入表单。

3.  双击具有要查看其历史记录的值的字段。

4.  点击**数据元素历史记录**。

## 显示数据值的审核记录 { #display_data_value_audit_trail }

![](resources/images/data_entry/data_entry_audit_trail.png)

审计跟踪允许您查看其他数据值
在当前值之前输入。审计跟踪还显示何时
数据值已更改以及进行更改的用户。

1.  打开**数据输入**应用。

2.  打开一个现有的数据输入表单。

3.  双击您要查看其审计跟踪值的字段。

4.  点击**审核记录**。

## 手动创建最小值最大值范围 { #change_min_max_range_manually }

![](resources/images/data_quality/set_min_max_manually.png)

1.  在**数据输入**应用中，打开一个数据输入表单。

2.  双击要设置最小最大值范围的字段。

3.  输入**最小限制**和**最大限制**。

4.  点击**保存**。 

    如果下次输入数据时值不在新值范围内，则数据输入单元格将以橙色背景显示。

5.  （可选）输入注释以解释差异的原因，例如可能产生大量客户的设施中的事件。

6.  （可选）点击**保存评论**。

> **提示**
>
>单击星号图标以标记该值以进行进一步跟踪。

## 离线输入数据 { #enter_data_offline }

即使您在数据输入过程中没有稳定的Internet连接，**数据输入**应用程序仍能正常工作。没有互联网连接时，输入的数据将保存到本地计算机。当Internet连接恢复时，该应用程序会将数据推送到服务器。由于不再从服务器为每个渲染检索数据输入表单，因此减少了总带宽使用量。

> **注意**
>
> 要使用此功能，您必须在有 Internet 连接时登录服务器。

-   当您连接到 Internet 时，该应用程序会在数据输入表单的顶部显示以下消息：

    ![](resources/images/data_entry/data_entry_online1.png)

-   如果您的 Internet 连接在数据输入期间中断，应用程序会检测到它并显示以下消息：

    ![](resources/images/data_entry/data_entry_offline1.png)

    现在您的数据将存储在本地。您可以继续正常输入数据。

-   一旦您输入了所有必要的数据并且应用程序检测到 Internet 连接已恢复，您将看到以下消息：

    ![](resources/images/data_entry/data_entry_offline_upload.png)

    单击**上传**以与服务器同步数据。

-   当数据与服务器成功同步后，您将看到以下确认消息：

    ![](resources/images/data_entry/data_entry_offline_upload_success1.png)

## 启用多组织单位数据输入 { #data_entry_multiple_organisation_units }

![](resources/images/data_entry/data_entry_multiple_org_unit.png)

为多个组织单位输入数据可能很有用
相同的数据输入表单，例如，如果数据元素很少
形式和层次结构中的大量组织单位。在那里面
在这种情况下，您可以启用多组织单位数据输入。

> **注意**
>
>多组织单位数据输入仅适用于部分表格。

1.  打开**系统设置**应用。

2.  选择**启用多组织机构表格**。

3.  在**数据输入**应用中，选择要在组织单位层次结构中输入数据的组织单位正上方的组织单位。

    数据元素将在表单中显示为列，组织单元显示为行。

    > **Note**
    >
    > The data entry forms should still be assigned to the facilities that you actually enter data for, that is the organisation units now appearing in the form.

## 也可以看看 { #data_entry_app_see_also }

-   [控制数据质量](https://docs.dhis2.org/master/en/user/html/control_data_quality.html)

-   [管理数据集和数据输入表格](https://docs.dhis2.org/master/en/user/html/manage_data_set.html)

-   [使用维护应用程序](https://docs.dhis2.org/master/en/user/html/maintenance_app.html)

# 控制数据质量 { #control_data_quality }

## 关于数据质量检查 { #about_data_quality }

**数据质量**应用程序包含用于验证系统中数据的准确性和可靠性的工具。您可以评估下表中概述的数据质量的不同维度：

 <table>
 <colgroup>
 <col style="width: 50%" />
 <col style="width: 50%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>尺寸</p> </th>
 <th> <p>说明</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p>正确</p> </td>
 <td> <p>数据应在该设施收集的数据的正常范围内。与来自相关数据元素的数据相比，应该没有明显的差异。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p>完整性</p> </td>
 <td> <p>应该已经提交了所有报告组织单位的所有数据元素的数据。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p>一致性</p> </td>
<td><p> 数据应与前几个月和几年中输入的数据保持一致，同时允许进行重组，增加工作量等方面的更改，并与其他类似设施保持一致。</p></td> 
 </tr>
 <tr class="even">
 <td><p> 及时性 </p></td>
 <td><p>来自所有报告组织单位的所有数据都应在指定的时间提交。 </p></td>
 </tr>
 </tbody>
 </table>

您可以通过多种方式验证数据质量，例如：

-   在数据输入点，DHIS 2 可以检查输入的数据以查看它是否在该数据元素的最小最大值范围内（基于所有先前注册的数据）。

-   通过定义验证规则，一旦用户完成数据输入就可以运行。用户还可以对照验证规则检查特定时期和组织单位的输入数据，并显示违反这些验证规则的情况。

-   通过分析数据集，即检查数据中的差距。

-   通过数据三角剖分，即比较来自不同来源的相同数据或指标。

## 验证规则分析 { #validation_rule_analysis }

### 关于验证规则分析 { #about-validation-rule-analysis }

验证规则基于定义数据元素值之间的数字关系的表达式。该表达式形成一个条件，该条件应断言满足某些逻辑标准。

该表达式包括：

-   左侧

-   右边

-   操作员

验证规则可以断言“已检测疑似疟疾病例”\>=“确诊疟疾病例”。

左侧和右侧必须返回数字值。

验证规则分析针对数据测试验证规则
在系统中注册。当
验证规则表达式中定义的条件不满足，其中
表示条件为假时。

您可以配置验证规则分析，以将有关验证违规的信息自动发送给选定的用户组。这些消息称为_validation notifications_，您可以在**维护**应用中创建它们。验证通知是通过内部DHIS 2消息系统发送的。

### 工作流程 { #workflow }

1.  在**维护**应用中，创建验证规则和验证规则组。

2.  （可选）在**维护**应用中，创建验证通知。

3.  自动或手动运行验证规则分析。

    -   在 **Scheduler** 应用程序中，您安排验证规则分析以自动运行一个或多个验证规则组中包含的所有验证规则。系统运行分析后，您将在通过内部 DHIS 2 消息系统发送的验证通知中看到验证违规（如果有）。

    -   在**数据质量**应用中，您可以针对选定的验证规则手动运行验证规则分析。分析过程完成后，您将看到验证违规列表（如果有）。

### 安排验证规则分析以自动运行 { #schedule-a-validation-rule-analysis-to-run-automatically }

> **注意**
>
> 只有包含在一个或多个验证通知中的验证规则才会成为验证规则分析的一部分。如果验证规则没有对应的验证通知，则不会发送通知。

> **注意**
>
> 在自动运行验证规则分析时，任何尚未持久化的结果都将在此运行期间持久化。目前只能通过 API 访问持久化结果。有关如何访问持久验证规则违规的更多信息，请参阅开发人员指南。

1.  确认您已创建所需的所有验证规则、验证规则组和验证通知。

2.  打开** Scheduler **应用程序，然后单击右下角的添加按钮。

3.  为新作业选择合适的名称。

4.  使用下拉菜单选择**监控**作业类型。

5.  选择作业的运行频率，即作业应在何时以及多久运行一次。

6.  填写**参数**部分，包括 验证 规则组。

7.  按**添加作业**按钮以确认作业创建。有关添加作业的更多信息，请参见[Scheduling]（data-administration.html＃scheduling）。

### 手动运行验证规则分析 { #run-a-validation-rule-analysis-manually }

![](resources/images/data_quality/validation_rule_analysis.png)

1.  确认您已创建所需的所有验证规则、验证规则组和验证通知。

2.  打开**数据质量**应用，然后单击**验证规则分析**。

3.  选择**开始日期**和**结束日期**。

4.  选择要包括在分析中的**验证规则组**。

    您可以从单个验证规则组中选择所有验证规则或所有验证规则。

5.  （可选）选择**发送通知**以触发验证通知。

    > **Note**
    >
    > If you want to send out validation notifications, you must first create them in the **Maintenance** app.

6.  （可选）选择 _Persist new results_ 以保留分析期间发现的任何非持久结果

7.  选择一个**父级组织单位**。

8.  点击**验证**。

    分析过程持续时间取决于正在分析的数据量。如果没有违反验证规则，您将看到一条消息说_验证成功通过_。如果存在验证违规，它们将显示在列表中。

    ![](resources/images/data_quality/validation_rule_analysis_result.png)

9.  （可选）单击显示详细信息图标以获取有关验证违规的更多信息。在弹出窗口中，您将找到有关验证规则中包含的数据元素及其相应数据值的信息。您可以使用此信息来识别验证规则违规的来源。

10. （可选）单击**以 PDF 格式下载**、**以 Excel 格式下载**或**以 CSV 格式下载**以下载 PDF、Excel 或 CSV 格式的验证违规列表。

### 也可以看看 { #see-also }

-   [管理验证规则](https://docs.dhis2.org/master/en/user/html/manage_validation_rule.html)

-   [数据管理应用](https://docs.dhis2.org/master/en/user/html/data_admin.html)

## 标准差离群分析 { #standard_deviation_analysis }

### 关于标准偏差离群分析 { #about-standard-deviation-outlier-analysis }

标准偏差离群分析确定的值是
与其余数据在数值上相距遥远，可能表明它们是异常值。
该分析基于标准正态分布。 DHIS 2计算
组织单位，数据元素，类别选项的所有值
组合和属性选项组合。异常可能发生
当然有机会，但可能表示测量或数据输入错误。

> **注意**
>
> 如上所述，此数据质量分析仅适用于实际正态分布的数据。具有较大季节性变化的数据，或者可能根据其他统计模型（例如逻辑模型）分布的数据可能会导致值被标记，而这些值实际上应该被认为是有效的。因此，建议在运行标准偏差异常值分析之前先确认数据是否实际上是正态分布的。

### 运行标准偏差离群分析 { #run-a-standard-deviation-outlier-analysis }

![](resources/images/data_quality/std_dev_analysis.png)

1.  打开**数据质量**应用，然后点击**标准开发者异常值分析**。

2.  选择**从日期**和**到日期**。

3.  选择数据集。

4.  选择**父组织单位**。

    将包括组织单位的所有子项。分析是基于上级组织单位“下”的原始数据，而不是汇总数据。

5.  选择标准偏差数。

    这是指在将数据归类为异常值之前，允许数据偏离平均值的标准差数。

6.  点击**开始**。

    分析过程持续时间取决于正在分析的数据量。如果存在标准偏差异常值，它们将显示在列表中。

    ![](resources/images/data_quality/std_dev_analysis_outlier_result.png)

    对于每个异常值，您将看到数据元素、组织单位、期间、最小值、实际值和最大值。最小值和最大值是指从为分析选择的标准偏差数得出的边界值。

> **提示**
>
>单击星号以标记异常值，以进行进一步的跟踪。

## 最小最大离群值分析 { #min_max_analysis }

### 关于基于最小最大值的离群分析 { #about-minimum-maximum-value-based-outlier-analysis }

您可以通过设置一个
每个数据值的最小/最大值范围。您可以定义值
手动设置范围或自动生成它们。

自动生成的最小值最大值范围仅适用于正态分布的数据。 DHIS2将确定给定数据元素，类别选项，组织单位和属性组合的所有值的算术平均值和标准偏差。然后，系统将根据在**系统设置**应用中指定的**数据分析标准差因子**计算最小最大值范围。

对于高度偏斜或零膨胀的数据（通常是这种情况）
包含汇总数据），DHIS2自动生成的值可能不会
提供准确的最小最大值范围。这可能导致
过多的虚假违规行为，例如，如果您分析与
季节性疾病。

> **注意**
>
> 计算给定数据元素、类别选项和组织单位组合的所有属性组合选项的最小最大值范围。

### 工作流程 { #workflow }

1.  自动或手动创建最小最大值范围。

    -   在**数据管理**应用程序中，您会自动生成值范围。

    -   在**数据输入**应用中，您可以手动设置值范围。

2.  在**数据质量**应用中，运行**最小-最大离群值分析**。

### 配置最小最大离群值分析 { #configure-a-minimum-maximum-outlier-analysis }

#### 自动创建最小值最大值范围 { #create-minimum-maximum-value-range-automatically }

![](resources/images/data_quality/generate_min_max.png)

> **注意**
>
> 自动生成的最小最大值范围在许多情况下都可能有用，但建议在使用此功能之前验证数据实际上是正态分布的。

您将生成由**数据管理**应用程序中的数据集计算得出的最小最大值范围。新的值范围将覆盖系统先前计算的任何值范围。

1.  设置**数据分析标准偏差（std dev）系数**：

    1.  打开**系统设置**应用，然后单击**常规**。

    2.  在“**数据分析标准差因子**字段中，输入一个值。

        这将设置在异常值分析中使用的标准差数。默认值为 2。较高的值表示分布范围更广，这可能会导致分析无法正确标记异常值。

2.  打开**数据管理**应用程序，然后单击**最小-最大值生成**。

3.  选择数据集。

4.  选择一个**组织机构**。

5.  点击**生成**。

    为选定组织单位的所有组织单位（包括后代）的选定数据集中的所有数据元素生成新的最小最大值范围。

#### 手动创建最小值/最大值范围 { #create-minimummaximum-value-range-manually }

![](resources/images/data_quality/set_min_max_manually.png)

1.  在**数据输入**应用中，打开一个数据输入表单。

2.  双击要为其设置最小/最大值范围的字段。

3.  在出现的对话框中输入**最小限制**和**最大限制**。

4.  点击**保存**。 

    如果下次输入数据时值不在新值范围内，则数据输入单元格将以橙色背景显示。

5.  （可选）输入注释以解释差异的原因，例如可能产生大量客户的设施中的事件。

6.  （可选）点击**保存评论**。

> **提示**
>
>单击星号图标以标记该值以进行进一步跟踪。

#### 删除最小最大值范围 { #delete-minimum-maximum-value-range }

您可以在**数据管理**应用程序中永久删除所选数据集和组织单位的所有最小最大值范围。

1.  打开**数据管理**应用程序，然后单击**最小-最大值生成**。

2.  选择数据集。

3.  选择一个**组织单位**。请注意，选择将级联到下属组织单位！

4.  点击**删除**。

### 运行最小最大离群值分析 { #run-a-minimum-maximum-outlier-analysis }

![](resources/images/data_quality/min_max_analysis.png)

1.  确认您已创建最小最大值范围。

2.  打开**数据质量**应用，然后单击**最小-最大离群值分析**。

3.  选择**从日期**和**到日期**。

4.  选择要包含在分析中的数据集。

5.  选择**父组织单位**。

    将包括组织单位的所有子项。分析是基于上级组织单位“下”的原始数据，而不是汇总数据。

6.  点击**开始**。

    分析过程持续时间取决于正在分析的数据量。如果存在验证违规，它们将显示在列表中。

    ![](resources/images/data_quality/min_max_result.png)

7.  （可选）单击**下载为 PDF**、**下载为 Excel** 或**下载为 CSV** 以下载 PDF、Excel 或 CSV 格式的列表。

> **提示**
>
>单击星号图标以标记该值以进行进一步跟踪。

## 后续分析 { #follow_up_analysis }

### 关于后续分析 { #about-follow-up-analysis }

后续分析将创建一个标记为后续的所有数据值的列表。您可以在**数据输入**应用程序中将数据标记为后续数据，并在结果列表中从标准偏差离群值或最小最大离群值分析中获得。

### 创建标记为后续数据值的列表 { #create-list-of-data-values-marked-for-follow-up }

![](resources/images/data_quality/follow_up_analysis.png)

1.  打开**数据质量**应用，然后单击**后续分析**。

2.  选择一个或多个数据集。

3.  选择上级**组织单位**。

    分析过程持续时间取决于正在分析的数据量。如果有标记为跟进的数据值，它们将显示在列表中。

4.  选择一个**开始日期**和**结束日期**，它们定义了您想要查找标记为要跟踪的值的期间。

5.  按 **Follow up** 生成已标记为跟进的值列表。

6.  （可选）单击**以 PDF 格式下载**、**以 Excel 格式下载**或**以 CSV 格式下载**以下载 PDF、Excel 或 CSV 格式的验证违规列表。

![](resources/images/data_quality/follow_up_analysis_result.png)

> **提示**
>
> 单击星形图标可从数据值中删除后续标记。您还可以在字段中输入注释以指示有关该值的任何其他信息。

# 使用捕获应用 { #capture_app }

## 关于Capture应用 { #about_capture_app }

Capture应用程序可替代Event Capture应用程序。将来，我们打算将Tracker Capture应用程序和Data Entry应用程序合并到Capture应用程序中。

在Capture应用程序中，您可以注册在特定时间和地点发生的事件。事件可以在任何给定的时间点发生。这与常规数据相反，常规数据可以按预定义的定期间隔进行捕获。事件有时称为案例或记录。在DHIS2中，事件链接到程序。通过捕获应用程序，您可以在输入事件信息之前选择组织单位和程序，并指定事件发生的日期。

## 实施者/管理员信息 { #implementer_info }

### 元数据缓存 { #metadata_caching }

出于性能原因，Capture应用程序在客户端浏览器中缓存元数据。在服务器上更新元数据时，需要将更改传播到已经缓存了元数据的客户端。根据更改，可以通过以下三种方式之一完成此操作：

1. 如果更改绑定到某个程序，则需要为该特定程序增加程序版本。例如，如果您更改程序或程序规则中的数据元素，则需要增加绑定程序的版本。

2. 如果更改未绑定到程序，则需要增加任何程序版本，以将更改传播到客户端。这里的示例是对常量，组织单位级别或组织单位组的更改。

3. 上面两个规则的例外是选项集。选项集具有自己的版本属性，即，增加选项集版本应确保将选项集元数据传播到客户端。

## 注册活动 { #capture_register_event }

1. 打开**捕获**应用。

2. 选择一个组织单位。

3. 选择一个程序。

    您只会看到与所选组织单位相关联的程序和您有权访问的程序，这些程序通过数据级别共享与您的用户组共享。

4. 如果程序具有类别组合设置，则必须选择类别选项。

5. 点击**新建**。

    ![创建新事件](resources/images/capture_app/create_new_event.png)

6. 填写必填信息。如果将程序程序阶段配置为捕获位置：

    - 如果该字段是坐标字段，您可以直接输入坐标，也可以单击坐标字段左侧的**地图**图标。后者将打开一张地图，您可以在其中搜索位置或通过单击地图直接进行设置。

    - 如果该字段是一个多边形字段，您可以单击该字段左侧的 **map** 图标。这将打开一个地图，您可以在其中搜索位置并捕获多边形（地图右上角的按钮）。

7. 如果需要，您可以通过单击表单底部的**写评论**按钮来添加评论。

8. 如果需要，您可以通过点击底部的**添加**按钮来添加关系形式。有关更多信息，请参见相关**添加关系**的部分。

9. 单击**保存并退出**或单击按钮旁边的箭头以选择**保存并添加另一个**。
    - **保存并添加另一个** 将保存当前事件并清除表单。您捕获的所有事件都将显示在页面底部的列表中。当您想要完成捕获事件时，如果表单为空白，请单击完成按钮，或者如果您的表单包含数据，请单击 **Save and add another** 旁边的箭头，然后选择 **Save and exit**。

> 注 1：事件中的某些数据元素可能是强制性的（在数据元素标签旁边标有红色星号）。这意味着在允许用户完成事件之前，必须填写所有必需的数据元素。例外情况是，如果用户拥有名为**“忽略跟踪器和事件捕获中的必填字段的验证”的权限。** 如果用户拥有此权限，则在保存之前不需要填写必填数据元素并且红色星号不会显示在数据元素标签旁边。请注意，拥有 **"ALL"** 权限的超级用户自动拥有此权限。

> 注2：数据输入表也可以显示在**行视图**中。在这种模式下，数据元素水平排列。这可以通过单击数据输入表单右上角的**切换到行视图**按钮来实现。如果您当前处于**行视图**，您可以通过单击数据输入表单右上角的**切换到表单视图**按钮切换到默认表单视图。

## 添加关系 { #capture_add_relationship }

Relationships can be added either during registration, editing or viewing of an event. Currently the **Capture App** only supports _Event to Tracked Entity Instance_ relationships.

1. 如果发生事件，请单击**添加关系**。

2. 选择您要创建的关系类型。

-   现在，您有两个选择：**链接到现有的跟踪实体实例**或**创建新的跟踪实体实例**。

![关系选项](resources/images/capture_app/relationship_options.png)

### 链接到现有的跟踪实体实例 { #link-to-an-existing-tracked-entity-instance }

3. Click **Link to an existing Tracked Entity Instance**.

-   您现在应该看到一些用于搜索 **Tracked Entity Instance** 的选项。您可以选择一个**程序**。如果选择了 **program**，则属性派生自所选的 **program**。如果没有选择 **program**，则只有属于 **Tracked Entity Instance** 的属性可见。

      ![搜索跟踪实体实例](resources/images/capture_app/search_tei.png)

    -   If the **Tracked Entity Instance** or **program** is configured with a unique attribute, this attribute can be used for finding a specific **Tracked Entity Instance** or **program**. This attribute should be presented alone. When the unique attribute field has been filled out, click the **Search** button located right below the unique attribute field.

    -   如果**跟踪实体Instance** 或 **program** 具有属性，这些属性可通过展开 **Search by attributes** 框用于搜索。填写完所有所需的属性字段后，单击位于底部的**按属性搜索** 按钮。您还可以通过设置**组织单位范围**来限制搜索。如果设置为 _All 可访问_，您将搜索 **跟踪实体您有权访问的所有组织单位中的实例**。如果您选择 _Selected_，系统会要求您选择要在哪些组织单位内进行搜索。

4. 成功搜索后，您将看到 ** 列表跟踪实体符合搜索条件的实例**。要创建关系，请单击 ** 上的 **Link** 按钮跟踪实体 您想与之建立关系的实例**。

-   如果你没有找到**追查实体您正在寻找的实例**，您可以点击**新搜索**或**编辑搜索**按钮。**新搜索**将带您进入新的空白搜索，而**编辑搜索**将带您返回到您只需执行的搜索，并保留搜索条件。

### 创建新的跟踪实体实例 { #create-new-tracked-entity-instance }

3. 点击**新建 追查实体 实例**。

-   您现在会看到一个 形式 用于注册新的**跟踪实体实例**。您可以选择注册或不注册程序。如果选择了一个程序，新的**跟踪实体实例**将被注册到所述程序中。您还可以通过删除自动设置的组织单位并选择新的组织单位来更改 **组织单位**。

    ![注册新的跟踪实体实例](resources/images/capture_app/register_tei.png)

4. 填写所需的（可能是必填的）属性和注册详细信息。

5. Click **Create Tracked Entity Instance and Link**.

> 注意：填写数据时，您可能会收到一条警告，告诉您已发现可能的重复项。您可以单击警告来查看这些重复项，如果重复项匹配，您可以选择通过单击 **链接** 按钮来链接该 **跟踪的实体实例**。如果填充数据后警告仍然存在，您将看不到 **创建跟踪实体实例和链接** 按钮。相反，您将看到一个名为**查看重复项**的按钮。当您单击此按钮时，将显示可能重复的列表。如果这些重复项中的任何一个与您尝试创建的 **跟踪实体实例** 匹配，您可以单击 **链接** 按钮，如果没有，您可以单击 **另存为新人** 按钮来注册新的 **跟踪的实体实例**。

## 编辑活动 { #capture_edit_event }

1. 打开**捕获**应用。

2. 选择一个组织单位。

3. 选择一个程序。

   注册到所选程序的所有事件均显示在列表中。

4. 单击您要修改的事件。

5. 点击**编辑事件**按钮。

6. 修改 事件 详细信息，然后单击**保存**。

## 删除活动 { #capture_delete_event }

1. 打开**捕获**应用。

2. 选择一个组织单位。

3. 选择一个程序。

   注册到所选程序的所有事件均显示在列表中。

4. 单击 **三点** 图标 事件 你想删除。

5. 在显示的菜单中点击**删除事件**。

    ![删除事件](resources/images/capture_app/delete_event.png)

## 修改事件列表布局 { #capture_modify_event_list_layout }

您可以选择在事件列表中显示或隐藏哪些列。这个可以
例如当您有很长的数据元素列表时很有用
分配到程序阶段。

1. 打开**捕获**应用。

2. 选择一个组织单位。

3. 选择一个程序。

   注册到所选程序的所有事件均显示在列表中。

4. Click the **gear** icon on the top right of the event list.

5. Select the columns you want to display and click **Save**.

    ![修改事件列表](resources/images/capture_app/modify_event_list.png)

>注意：您可以通过将数据元素拖放到列表中来重新组织它们的顺序。

## 过滤事件列表 { #capture_filter_event_list }

1. 打开**捕获**应用。

2. 选择一个组织单位。

3. 选择一个程序。

   注册到所选程序的所有事件均显示在列表中。

    事件列表顶部是按钮，其名称与列表中的列标题相同。

4. 使用列表顶部的按钮可根据报告日期或特定数据元素进行过滤。

    ![过滤事件](resources/images/capture_app/filter_event.png)

>注意：数据元素的过滤方式略有不同。例如，** Number **数据元素将显示要过滤的范围，而** Text **数据元素将要求您输入搜索查询以进行过滤。

## 排序活动清单 { #capture_sort_event_list }

1. 打开**捕获**应用。

2. 选择一个组织单位。

3. 选择一个程序。注册到所选程序的所有事件都显示在列表中。

4. 单击列标题之一，以按升序对该数据元素上的列表进行排序。

   列旁边会显示一个向上的小箭头，以表明列表是按升序排序的。

5. 再次单击列标题，以降序对该数据元素上的列表进行排序。

   该列旁边会显示一个小的向下箭头，以显示该列表以降序排列。

    ![排序事件](resources/images/capture_app/sort_event.png)

## 下载活动清单 { #capture_download_event_list }

1. 打开**捕获**应用。

2. 选择一个组织单位。

3. 选择一个程序。注册到所选程序的所有事件都显示在列表中。

4. Click the **downward arrow** icon on the top right of the event list.

5. 选择您要下载的格式。

    ![下载活动列表](resources/images/capture_app/download_event_list.png)

>注意：您可以下载JSON，XML或CSV格式的事件列表。

## 预定义列表视图 { #capture_views }

您可以设置自己的视图并保存以供以后使用。这些视图也可以与其他人共享。视图由过滤器，列顺序和事件排序顺序组成。

### 保存新视图 { #capture_view_save }

1. 选择一个组织单位和一个程序。

2. 使用事件列表上方的过滤器按钮设置过滤器（在此处详细说明（#capture_filter_event_list））。

![](resources/images/capture_app/view_save_filters.png)

3. 通过单击齿轮图标来设置列顺序，然后在弹出窗口中根据您的偏好指定布局（如何修改布局在[此处]（＃capture_modify_event_list_layout）详细说明）。

![](resources/images/capture_app/view_save_column_order.png)

4. 通过单击列标题之一对事件进行排序（在[此处]（＃capture_sort_event_list）详细说明）。

![](resources/images/capture_app/view_save_sort_order.png)

5. 打开右侧的更多菜单（三个点图标），然后选择“保存当前视图...”

![](resources/images/capture_app/view_save_menu.png)

6. 填写视图的名称，然后单击“保存”。

![](resources/images/capture_app/view_save_name.png)

### 加载视图 { #capture_view_load }

1. 选择具有预定义视图的组织单位和程序。

2. 这些视图应在事件列表本身上方。单击一个视图以加载它。

![](resources/images/capture_app/view_load_unselected.png)

3. 加载视图的示例。

![](resources/images/capture_app/view_load_selected.png)

### 更新视图 { #capture_view_update }

1. 加载您要更新的视图（请参见[加载视图]（＃capture_view_load））。

2. 对过滤器，列顺序和/或事件排序顺序进行更改。

> **注意**
>
> 当视图有未保存的更改时，星号 (\*) 会附加到视图名称。

3. 打开右侧的更多菜单（三个点图标），然后选择“更新视图”。

![](resources/images/capture_app/view_update.png)

### 分享观点 { #capture_view_share }

1. 加载您要共享的视图（请参见[加载视图]（＃capture_view_load））。

2. 打开右侧的更多菜单（三个点图标），然后选择“共享视图...”

![](resources/images/capture_app/view_share.png)

3. 进行更改。通常，您将添加用户/组（1）和/或更改先前添加的用户/组的访问权限（2）。

![](resources/images/capture_app/view_share_access.png)

### 删除视图 { #capture_view_delete }

1. 加载您要删除的视图（请参见[加载视图]（＃capture_view_load））。

2. 打开右侧的更多菜单（三个点图标），然后选择“删除视图”。

![](resources/images/capture_app/view_delete.png)

## 用户分配 { #capture_user_assignment }

可以将事件分配给用户。必须为每个程序启用此功能。

### 分配新事件 { #capture_user_assignment_new }

1. 选择启用了用户分配的组织单位和程序。

2. Click **New Event** in the upper right corner.

3. 您会在数据输入页面底部附近找到受让人部分。搜索并选择要将事件分配给的用户。保存事件时将保留受让人。

    ![](resources/images/capture_app/user_assignment_new.png)

    ![](resources/images/capture_app/user_assignment_new_filled.png)

### 变更受让人 { #capture_user_assignment_edit }

1. 选择启用了用户分配的组织单位和程序。

2. 单击列表中的事件

3. 在右列中，您将找到“受让人”部分。

    ![](resources/images/capture_app/user_assignment_edit.png)

4. Click the edit button, or the **Assign** button if the event is not currently assigned to anyone.

    ![](resources/images/capture_app/user_assignment_edit_button.png)

    ![](resources/images/capture_app/user_assignment_edit_add.png)

5. 搜索并选择要将事件重新分配给的用户。作业将立即保存。

### 事件列表中的受让人 { #capture_user_assignment_event_list }

在事件列表中，您将可以查看每个事件的受让人。此外，您可以由受让人对列表进行排序和过滤。

#### 按受让人过滤 { #filter-by-assignee }

1. 单击**分配给**过滤器。

    ![](resources/images/capture_app/user_assignment_event_list.png)

2. 选择您的首选受理人筛选器，然后单击“更新”。

    ![](resources/images/capture_app/user_assignment_event_list_options.png)

## 追踪程式 { #capture_tracker_programs }

Capture应用程序尚不支持跟踪程序，但是仍列出了跟踪程序。如果您选择一个跟踪程序，该应用程序将引导您进入“跟踪器捕获”应用程序，如下所示。

![](resources/images/capture_app/tracker_program.png)

# 使用事件捕获应用 { #event_capture_app }

## 关于事件捕获应用 { #about_event_capture_app }

![](resources/images/event_capture/event_list.png)

在**事件捕获**应用中，您可以注册在特定时间和地点发生的事件。事件可以在任何给定的时间点发生。这与常规数据相反，常规数据可以按预定义的定期间隔进行捕获。事件有时称为案例或记录。在DHIS2中，事件链接到程序。通过**事件捕获**应用程序，您可以在输入事件信息之前选择组织单位和程序，并指定事件发生的日期。

**事件捕获**应用程序可在线和离线使用。如果互联网连接中断，您可以继续连接事件。事件将本地存储器客户端浏览。当恢复时，系统会要求您上传本地存储的数据。然后系统将数据发送到存储数据的服务器。

> **注意**
>
> 如果您在离线模式下关闭 Web 浏览器，则无法重新打开新的 Web 浏览器窗口并继续工作会话。但是数据仍然会保存在本地，下次机器在线并且您已登录服务器时，可以将数据上传到服务器。

-   您只能看到与您选择的组织单位相关联的计划以及您有权通过您的用户角色查看的计划。

-   注册期间支持跳过逻辑和验证错误/警告消息。

-   当您关闭一个组织单位时，您将在**中向该组织单位注册或编辑活动事件捕捉**应用程序。您还可以查看和过滤事件并查看详细信息。

-   支持动态指标表达式评估。如果一个程序有为其定义的指标，并且与指标表达式相关的所有值都被填充，系统将计算指标并显示结果。

    ![](resources/images/event_capture/event_editing.png)

-   **排序：**这可以通过单击每个列标题的排序图标来完成。红色排序图标表示当前排序列。但是，排序功能仅在显示的页面内有效。目前，无法从服务器端进行排序。

-   **过滤：**这是通过单击每个列标题右侧显示的小搜索图标来完成的。单击它们会提供一个输入字段以键入过滤条件。系统在用户开始键入时开始应用过滤器。在过滤期间，可以定义日期类型数据元素的开始和结束日期以及数字类型的下限和上限。目前不支持服务器端过滤。

## 注册活动 { #event_capture_register_event }

1.  打开**事件采集**应用。

2.  选择一个组织单位。

3.  选择一个程序。

    您只会看到与所选组织单位相关联的计划以及您可以通过您的用户角色访问的计划。

4.  点击**注册事件**。

5.  选择一个日期。

6.  填写必填信息。

    如果程序的程序阶段配置为捕获GPS坐标，则可以通过两种方式输入坐标：

    -   直接在相应字段中输入值。

    -   在地图中选择一个位置。地图选项还显示为组织单位定义的多边形和点。

7.  点击**保存并添加新**或**保存并返回**。

> 注意：事件中的某些数据元素可能是强制性的（在数据元素标签旁边标有红星）。这意味着在允许用户保存事件之前，必须填写所有必需的数据元素。例外情况是，如果用户拥有名为**“忽略跟踪器和事件捕获中的必填字段的验证”的权限。** 如果用户拥有此权限，则在保存之前不需要填写必填数据元素并且红色星号不会显示在数据元素标签旁边。请注意，拥有 **"ALL"** 权限的超级用户自动拥有此权限。

## 编辑活动 { #event_capture_edit_event }

1.  打开**事件采集**应用。

2.  选择一个组织单位。

3.  选择一个程序。

    注册到所选程序的所有事件均显示在列表中。

4.  点击事件您要修改并选择**编辑**。

5.  修改事件详细信息并点击**更新**。

## 编辑网格中的事件 { #event_capture_edit_event_grid }

**在网格中编辑**功能允许您编辑选定的 事件在表格中，但只有那些列（数据元素）在网格中可见。如果您需要更多列，请使用**显示/隐藏列** 指定应在列表中显示哪些列。

1.  打开**事件采集**应用。

2.  选择一个组织单位。

3.  选择一个程序。

    注册到所选程序的所有事件均显示在列表中。

4.  点击 事件 您要修改并选择**在网格中编辑**。

5.  修改事件详细信息。

6.  单击另一个事件以关闭编辑模式。

## 在编辑模式下分享活动 { #event_capture_share_event_edit_mode }

您可以通过事件的网址以编辑模式共享事件。

1.  打开**事件采集**应用。

2.  在编辑模式下打开要共享的事件。

3.  复制URL。

    确保 URL 包含“event”和“ou”（组织单位）参数。

4.  将 URL 粘贴到您选择的共享方法中，例如 DHIS2 中的电子邮件或消息。

    如果您在单击链接时未登录 DHIS2，系统会要求您登录，然后转到仪表板。

## 查看事件审核历史记录 { #event_capture_view_event_audit_history }

1.  打开**事件采集**应用。

2.  选择一个组织单位。

3.  选择一个程序。

    注册到所选程序的所有事件均显示在列表中。

4.  单击一个 事件 并选择**审计历史**。

## 删除活动 { #event_capture_delete_event }

1.  打开**事件采集**应用。

2.  选择一个组织单位。

3.  选择一个程序。

    注册到所选程序的所有事件均显示在列表中。

4.  单击一个 事件 并选择**删除**。

5.  点击**删除**确认删除。

## 修改事件列表的布局 { #event_capture_modify_event_list_layout }

您可以选择在事件列表中显示或隐藏哪些列。这个可以
例如当您有很长的数据元素列表时很有用
分配到程序阶段。一旦你修改了布局，它就会被保存
在您的用户个人资料上。您可以针对不同的布局使用不同的布局
程式。

1.  打开**事件采集**应用。

2.  选择一个组织单位。

3.  选择一个程序。

    注册到所选程序的所有事件均显示在列表中。

4.  点击**显示/隐藏列**图标。

5.  选择要显示的列，然后单击**关闭**。

## 打印事件列表 { #event_capture_print_event_list }

1.  打开**事件采集**应用。

2.  选择一个组织单位。

3.  选择一个程序。

    注册到所选程序的所有事件均显示在列表中。

4.  点击**打印列表**。

## 下载活动清单 { #event_capture_download_event_list }

1.  打开**事件采集**应用。

2.  选择一个组织单位。

3.  选择一个程序。

    注册到所选程序的所有事件均显示在列表中。

4.  点击** Downlad **图标，然后选择一种格式。

    您可以下载XML，JSON或CSV格式的事件列表。

# 使用Tracker Capture应用 { #tracker_capture_app }

## 关于Tracker Capture应用 { #about_tracker_capture_app }

![](resources/images/tracker_capture/tracker-capture-tei-list.png)

**Tracker Capture **应用程序是** Event Capture **”应用程序的高级版本。

-   **事件 捕获**：处理单个事件_无需_注册

-   **Tracker Capture**：处理多个事件（包括单个事件）_with_注册。

-   您为已注册的被跟踪实体实例 (TEI) 捕获事件数据。

-   您只能看到与您选择的组织单位相关联的计划，以及您有权通过您的用户角色查看的计划。

-   您在搜索和注册功能中看到的选项取决于您选择的程序。程序属性控制这些选项。这些属性还决定了 TEI 列表中的列名。

    如果未选择程序，则系统将选择默认属性。

-   注册期间支持跳过逻辑和验证错误/警告消息。

-   关闭单位部门后，您将无法在**跟踪随访**应用程序中注册或编辑事件到该单位部门。您仍然可以搜索TEI并过滤搜索结果。您还可以查看特定TEI的仪表板。

## 关于跟踪的实体实例（TEI）仪表板 { #about_tracked_entity_instance_dashboard }

![](resources/images/tracker_capture/tei_dashboard.png)

您可以通过 **Tracker Capture** 应用程序中的 TEI 仪表板管理 TEI。

-   仪表板由小部件组成。拖放小部件以将它们按顺序放置在您想要的位置。

-   单击图钉图标将小部件的右列固定到固定位置。这在数据输入期间尤其有用。

    如果您有许多数据元素或大表格要填写，请粘贴正确的小部件列。然后，当您在数据输入部分滚动时，您放置在右栏中的所有小部件仍然可见。

-   为您选择的程序定义的任何指标都将计算其值并显示在 **Indicators** 小部件中。

-   导航：

    -   **返回**：带您返回搜索和注册页面

    -   上一个和下一个按钮：将您带到 TEI 搜索结果列表中的上一个或下一个 TEI 仪表板

    <!-- end list -->

    -   **其他计划** 字段：如果 TEI 注册了其他计划，则会在此处列出。单击一个程序以更改您为所选 TEI 输入数据的程序。当您更改程序时，小部件中的内容也会发生变化。

## 工作流程 { #workflow_tracker_capture }

母婴健康工作流程
程序

![](resources/images/patients_programs/name_based_information_tracking_process.png)

1.  创建新的或找到现有的TEI。

    您可以搜索已定义的属性，例如名称或地址。

2.  将TEI注册到程序中。

3.  该应用程序根据该计划的服务时间，为 TEI 创建一个活动计划。

4.  TEI 根据项目提供各种服务。记录所有服务。

5.  使用有关个别案例的信息来创建报告。

## 链接到Tracker Capture应用 { #linking_to_the_tracker_capture_app }

### 链接到“主屏幕”上的特定程序 { #link-to-a-specific-program-on-the-home-screen }

您可以在“主屏幕上共享程序选择。

1. 打开 **随访采集** 应用程序。

2. 选择要链接的程序。

3. 复制URL。

    - 确保URL包含“ program”参数。

4. 将 URL 粘贴到您选择的共享方法中，例如 DHIS2 中的电子邮件或消息。

> 注意：如果所选组织单元中不存在程序（存储在本地缓存中），系统将改为选择该组织单元的第一个可用程序。如果本地缓存为空/干净且当前用户的根组织单元没有指定的程序，系统也会在此处为根组织单元选择第一个可用的程序。

### 链接到TEI仪表板 { #linking-to-tei-dashboard }

您可以通过其网址共享TEI仪表板。

1.  打开 **随访采集** 应用程序。

2.  打开您要共享的仪表板。

3.  复制URL。

    确保 URL 包含“tei”、“program”和“ou”（组织单位）参数。

4.  将 URL 粘贴到您选择的共享方法中，例如 DHIS2 中的电子邮件或消息。

    如果您在单击链接时未登录 DHIS2，系统会要求您登录，然后转到仪表板。

## 创建TEI并将其注册到程序中 { #create_and_enroll_tracked_entity_instance }

您可以创建TEI并通过一次操作将该TEI注册到程序中：

1.  打开 **随访采集** 应用程序。

2.  在左侧窗格的组织单位树中，选择一个组织单位。

3.  选择一个程序。

4.  点击**注册**。

5.  填写必填信息。

    被跟踪实体类型和程序都可以配置为使用特征类型。这使得捕获 TEI 或注册的几何图形成为可能。支持的要素类型是点和多边形。请参阅**如何使用几何图形**。

6.  如果所选程序配置为在注册期间显示第一阶段，则必须填写该阶段中的所有必填字段。在该阶段结束时，还会询问您是否要完成已为其输入数据的阶段. 如果您选择**是**，则该阶段将在保存后处于完成状态。如果您选择 **No**，舞台将处于活动状态。

7.  如果配置了搜索程序，将对可搜索字段执行后台搜索，以帮助您防止注册重复。如果有任何匹配的 TEI，表格右侧将显示一个蓝色框，可以查看这些匹配的 TEI。

![](resources/images/tracker_capture/tracker_capture_register_integrated_search.png)

If there is any matching TEIs, click **Continue** to review possible duplicates before registering a new one.

If there is no matching TEIs, click **Save and continue** or **Save and add new**

-   **保存并继续**：完成注册并打开注册的 TEI 的仪表板

-   **保存并添加新的**：完成注册但停留在同一页面上。如果您想在不输入数据的情况下一个接一个地注册和注册 TEI，请使用此选项。

> 注意：必须填写所有必填属性才能保存。强制属性在属性标签旁边用红星标记。如果用户拥有名为**“忽略跟踪器和事件捕获中的必填字段的验证”**的权限，则不需要填写必填属性，也不会看到属性标签旁边的红星。请注意，拥有 **"ALL"** 权限的超级用户自动拥有此权限。

## 打开现有的TEI仪表板 { #open_existing_tracked_entity_instance_dashboard }

有多种方法可以找到 TEI：使用“列表”
当前选择中的预定义列表，或“搜索”全局
抬头。

### 清单 { #simple_tracked_entity_instance_search }

列表用于查找和显示所选组织单位中的 TEI
和程序。

1.  打开跟踪的捕获应用程序

2.  在左侧窗格的组织单位树中，选择一个组织单位

3.  选择一个程序

4.  如果尚未选择，请单击“列表”按钮

如果未配置，则一组预定义列表将可用：

1.  具有任何注册状态的任何TEI

2.  积极注册当前计划的TEI

3.  已完成当前课程注册的TEI

4.  已取消当前课程注册的TEI

![](resources/images/tracker_capture/tracker_capture_lists.png)

您可以选择在列表中为每个列显示或隐藏哪些列
程序。这将保存在您的用户设置中。

1.  单击**网格**图标按钮

2.  检查您要包括的列

3.  点击**保存**

还可以选择使用自己的方式创建自定义工作列表
过滤器。这可用于动态创建自定义列表。

![](resources/images/tracker_capture/tracker_capture_lists_custom.png)

列表也可以下载或打印。

![](resources/images/tracker_capture/tracker_capture_lists_download.png)

#### 自定义预定义列表 { #custom-predefined-lists }

如果程序有任何与之关联的自定义跟踪实体过滤器，
这些将取代上面提到的四个预定义列表。
预定义列表在配置良好时将成为查找的有效方法
或在该程序中使用与用户相关的数据。

可以使用多种选项定义工作列表，这里有一些
例子：

-   在给定的程序阶段显示至少一个事件的所有TEI
-   截止日期为当前日期。
-   显示至少具有一个分配给该事件的事件的所有TEI
-   登录用户。
-   显示所有活动的但未分配给任何用户的TEI。

![跟踪器捕获中的预定义工作列表](resources/images/tracker_capture/predefined_working_list_based_on_user_assignment.png)

有关支持的功能的完整列表，请参阅 API 文档
这些预定义的跟踪实体实例过滤器。

### 搜索 { #advanced_tracked_entity_instance_search }

搜索用于在用户拥有的组织单位中搜索 TEI
搜索访问。如果您想查找 TEI，这可以使用，但您
不知道 TEI 注册的是哪个组织单位或项目。
有两种方法可以做到这一点：有和没有程序上下文。
需要配置可搜索字段。用于配置搜索
程序上下文，这是针对程序中的每个程序单独完成的
程序维护应用程序。用于在没有程序的情况下配置搜索
上下文中，这是针对每个跟踪的实体类型单独完成的
跟踪实体类型维护应用程序。

**在没有程序上下文的情况下进行搜索：**

1.  打开 **Tracker Capture 应用程序**

2.  点击**搜索**按钮

3.  可搜索的字段将按组显示。唯一属性只能单独搜索。可以组合非唯一属性。

4.  填写搜索条件并点击**搜索**图标按钮。

**在程序上下文中搜索：**

1.  打开 **Tracker Capture 应用程序**

2.  选择具有您要搜索的程序的组织单位

3.  选择程序

4.  点击**搜索**按钮

5.  可搜索的字段将按组显示。唯一属性只能单独搜索。可以组合非唯一属性。

6.  填写搜索条件并点击**搜索**图标按钮

![](resources/images/tracker_capture/tracker_capture_search_screen.png)

搜索完成后，您将看到搜索
结果。显示的内容取决于搜索结果。

对于唯一属性搜索：

-   如果未找到匹配的 TEI，您将可以打开注册表。

-   如果在所选组织单位中找到 TEI，则 TEI 仪表板将自动打开。

-   如果在所选组织单位之外发现 TEI，您将有可能打开 TEI。

对于非唯一属性搜索：

-   如果没有找到匹配的 TEI，您将可以打开注册表。

-   如果找到匹配的 TEI，您可以单击结果列表中的任何 TEI，或打开注册表单。

-   如果找到的匹配项过多，系统将提示您优化搜索条件

![](resources/images/tracker_capture/tracker_capture_search_results.png)

搜索结果具有标记跟踪实体实例的功能
尽可能重复，请参阅下一章。

选择打开注册表时，搜索值将
自动填写到注册表中。

### 将跟踪的实体实例标记为潜在重复项 { #flagging-tracked-entity-instance-as-potential-duplicate }

寻找时被追踪实体在追踪器应用程序的实例中，用户有时会选择怀疑一个或多个搜索匹配与其他搜索匹配被追踪的实体实例。用户点击搜索结果追踪中可以列的**标记可能重复**链接。

以这种方式标记的跟踪实体实例将被标记为“可能重复”
在 DHIS2 数据库中。该标志表示被跟踪的实体实例是/具有
复制。用户可以在两个位置看到此类标志的存在。一个是
结果列表本身（在这个例子中，Mark Robinson 已经被标记为潜在的
复制）：

![Tracker 捕获搜索结果](resources/images/tracker_capture/tracker_capture_search_results.png)

另一个位置在跟踪的实体实例仪表板中：

![被跟踪的实体实例标记为重复](resources/images/tracker_capture/tracked_entity_instance_flagged_as_duplicate.png)

除了潜在地通知用户被跟踪的实体实例
作为重复，该标志将被底层系统用于查找和
在即将发布的 DHIS2 版本中合并重复项。

### 打破玻璃 { #break_glass }

如果程序配置了访问级别**protected**，并且用户搜索并找到 被跟踪实体如果用户没有数据捕获权限的组织单位拥有的实例，则向用户提供打破玻璃的选项。用户将给出打破玻璃的原因，然后获得该玻璃的临时所有权被跟踪实体 实例。

## 在程序中注册现有的TEI { #enroll_existing_tracked_entity_instance_in_program }

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  选择一个程序。

4.  在**注册**小元件中，点击**添加新**。

5.  填写需要信息，然后点击**注册**。

## 输入TEI的事件数据 { #enter_event_data_for_tracked_entity_instance }

### 数据输入小部件 { #widgets-for-data-entry }

####

在TEI仪表板中，您输入事件**时间线数据输入**或**表格数据输入**小元件中的数据。

 <table>
 Tracker Capture应用程序中的<caption>数据输入小部件</caption>
 <colgroup>
 <col style="width: 31%" />
 <col style="width: 68%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>小部件名称</p> </th>
 <th> <p>说明</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p> <strong>时间轴数据条目</strong> </p> </td>
 <td> <p>使用默认或自定义格式输入数据。 </p>
 <p>根据程序定义，特别是程序阶段，将及时显示事件。单击任何一个将显示相应的数据条目。如果某个阶段需要新事件，则会显示一个加号图标以创建新事件。要进行数据输入，必须具有事件日期。指定事件日期后，将无法更改到期日期。假设通过指定事件日期，事件已经发生。如果尚未发生该事件，则可以更改到期日-这实际上只是在重新安排时间。底部的按钮有助于更改所选事件的状态。 </p>
 <p>此小部件的另一个关键功能是为事件添加多个注释。通常，数据记录是通过数据元素进行的，但是在某些情况下，有必要记录其他信息或注释。这是笔记部分方便的地方。但是，无法删除便笺。这个想法是笔记更像是日志。数据输入期间同时支持跳过逻辑消息和验证错误/警告消息。 </p>
 <p>时间线数据条目中还包含用于将数据条目与以前的条目进行比较的选项。可以通过单击&quot;开关以比较“时间轴数据”输入小部件右上角的form&quot;按钮（两张纸）来启用此功能。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <strong>表格数据条目</strong> </p> </td>
 <td> <p>用于表格式数据输入。 </p>
 <p>该小部件将程序阶段列表显示为左侧标签。事件将在表中列出以供可重复的程序阶段使用，并允许对事件数据值进行在线编辑。 </p> </td>
 </tr>
 </tbody>
 </table>

### 建立活动 { #creating-an-event }

您可以通过以下方式为TEI创建事件：

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在 **时间线数据条目** 或 **表格数据条目** 小部件中，单击 **+** 按钮。

4.  选择 **Programstage** 并设置 **Report date**。

    程序阶段可以配置为使用功能类型。这使得捕获事件的几何图形成为可能。支持的要素类型是点和多边形。请参阅**如何使用几何**。

5.  点击**保存**。 

### 安排活动 { #schedule-an-event }

您可以通过以下方式取消事件的将来日期：

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在**时间线数据条目** 或**表格数据条目** 小部件中，单击**日历** 图标。

4.  选择 **Programstage** 并设置 **Schedule date**。

5.  点击**保存**。 

### 推荐活动 { #refer-an-event }

有时，将患者转诊至不同的**组织单位** 可能会令人感到害怕。要引用 TEI：

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在 **时间轴数据条目** 或 **表格数据条目** 小部件中，单击 **箭头** 图标。

4.  选择**节目阶段**、**组织单位**并设置\***\*报告日期\*\***。

5.  点击任一**一次性推荐**，这将只推荐一个单一的 TEI 事件或**永久移动**，这会将 TEI 所有权移至选定的**组织单位**。对 TEI 的进一步访问将基于所有权组织单位。

### 事件中的强制数据元素 { #mandatory-data-elements-in-events }

事件中的某些数据元素可能是强制性的（在数据元素标签旁边用红星标记）。这意味着在允许用户完成事件之前，必须填写所有必需的数据元素。例外情况是，如果用户拥有名为**“忽略跟踪器和事件捕获中的必填字段的验证”的权限。**如果用户拥有此权限，则在保存之前不需要填写必填数据元素并且红色星号不会显示在数据元素标签旁边。请注意，拥有 **"ALL"** 权限的超级用户自动拥有此权限。

## 如何使用几何 { #how-to-use-geometry }

跟踪实体类型、程序和程序阶段可以配置为
使用特征类型。这使得捕获几何图形成为可能
TEI、计划或活动。支持的特征类型是点和多边形。

### 捕捉坐标 { #capture-coordinate }

**选项1：**在字段中填写纬度和经度。

**选项2：**

1.  点击**地图图标**
2.  通过搜索或在地图上找到您想要的位置
3.  详细您的目的的位置，然后选择**设置坐标**
4.  点击底部的**捕获**

### 捕捉多边形 { #capture-polygon }

1.  点击**地图图标**
2.  通过搜索或在地图上找到您想要的位置
3.  在地图左上角，点击**多边形图标**
4.  在地图上画一个多边形。最后，将最后一个点与第一个点连接起来
5.  点击底部的**捕获**

![](resources/images/tracker_capture/capture_geometry.png)

多边形也可以删除

1.  点击**地图图标**
2.  点击地图左侧的**垃圾桶图标**，然后选择**全部清除**

## 如何为事件分配用户 { #how-to-assign-a-user-to-an-event }

在维护应用程序中，可以配置程序阶段以允许用户分配。
如果启用了用户分配，您将能够为事件分配用户。

1. 单击**分配的用户** 字段。
2. 滚动或搜索用户。
3. 单击用户。

## 管理TEI的注册 { #manage_tracked_entity_instance_enrollment }

注册小部件提供对信息和功能的访问
用于注册所选课程。

![注册小部件](resources/images/tracker_capture/enrollment_widget.png)

### TEI 所有权 { #tei-ownership }

显示所选程序中所有注册的当前所有权
在注册小部件的“所有者”部分中。所有权将始终开始
作为首先将 TEI 注册到给定计划的组织单位。

TEIS 不同项目的所有权可能不同，例如一个诊所可以
对 HIV 患者进行随访，而另一家诊所则对 MCH 中的同一患者进行随访。

要更新 TEI/程序组合的所有权，用户必须使用
推荐功能并在推荐时选择“永久移动”选项。

对作为当前所有者的组织单位具有捕获访问权限的用户
TEI/计划将拥有对该 TEI/计划组合的所有注册的写访问权限。
对作为当前所有者的组织单位具有搜索权限的用户将拥有
访问搜索和查找 TEI/程序组合。

### 停用TEI的注册 { #deactivate_tracked_entity_instance_enrollment }

如果您停用 TEI 仪表板，TEI 将变为“只读”。你
无法输入数据、注册 TEI 或编辑 TEI 的配置文件。

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在里面**注册**小点，点击**手指**。

4.  单击**是**进行确认。

### 激活TEI的注册 { #activate_tracked_entity_instance_enrollment }

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在里面 **注册** 小部件，单击 **激活**。

4.  单击**是**进行确认。

### 将TEI的注册标记为已完成 { #mark_tracked_entity_instance_enrollment_complete }

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在里面 **注册** 小部件，单击 **完成**。

4.  单击**是**进行确认。

### 重新打开已完成的注册 { #reopen_complete_tracked_entity_instance_enrollment }

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在里面**注册**小点，点击**打开**。

4.  单击**是**进行确认。

### 显示TEI的注册历史 { #display_tracked_entity_instance_enrollment_history }

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在**Profile**小元件中，点击**Audit history**图标。

### 创建TEI注册说明 { #create_tracked_entity_instance_enrollment_note }

注册说明可用于记录有关例如原因的信息
取消了注册。

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在** Notes **小部件中，键入您的注释，然后单击** Add **。

## 发信息给TEI { #send_message_to_tracked_entity_instance }

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在 **Messaging** 小部件中并选择 **SMS** 或 **E-mail**。

4.  输入所需的联系信息。

    如果 TEI 的个人资料包含电子邮件地址或电话号码，则会自动填写这些字段。

5.  键入一条消息。

6.  点击**发送**。

## 将TEI标记为后续 { #mark_tracked_entity_instance_for_follow_up }

您可以使用标记 TEI 注册用于跟进，然后在您创建 **即将发生的事件** 和 **过期事件** 报告时将此状态用作过滤器。例如，这对于在怀孕计划期间监测高风险病例非常有用。

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在里面 **注册** 小部件，单击 **标记为跟进** 图标。

## 编辑TEI的个人资料 { #edit_tracked_entity_instance_profile }

您编辑 TEI 的个人资料或 被跟踪实体 **Profile** 小部件中的属性。

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在 **Profile** 小部件中，单击 **Edit**。

4.  修改配置文件并单击**保存**。

## 将关系添加到TEI { #add_relationship_to_tracked_entity_instance }

例如，您可以创建从一个 TEI 到另一个 TEI 的关系
将母亲和孩子或丈夫和妻子联系在一起。依赖
关于如何配置关系类型，亲属可以继承
属性。

假设有两个项目：母亲的产前护理和
为孩子接种疫苗。如果名字、姓氏和地址
两个程序都需要属性，可以配置
姓氏和地址属性是可继承的。然后在孩子期间
注册，不需要输入这些可继承的属性。
您可以根据母亲的值自动添加它们。如果你想
要为孩子设置不同的值，您可以覆盖
自动生成的值。

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在**关系** 小部件中，单击**添加**。

4.  选择一种关系类型。

5.  搜索亲戚并选择它。搜索遵循与从跟踪器首页搜索被跟踪实体实例时相同的模式。默认情况下，搜索覆盖用户的搜索范围。

6.  在弹出窗口中选择与搜索条件匹配的跟踪实体实例。

7.  点击**保存**。 

> 注意：如果关系是双向关系，则该关系将显示在创建该关系的 TEI 和该关系链接到的 TEI 中。此外，如果关系是双向的，则关系的每一端都有一个唯一的名称，该名称将显示在“关系”列下的关系小部件中。

## 共享TEI仪表板 { #share_tracked_entity_instance_dashboard }

您可以通过其网址共享TEI仪表板。

1.  打开 **随访采集** 应用程序。

2.  打开您要共享的仪表板。

3.  复制URL。

    确保 URL 包含“tei”、“program”和“ou”（组织单位）参数。

4.  将 URL 粘贴到您选择的共享方法中，例如 DHIS2 中的电子邮件或消息。

    如果您在单击链接时未登录 DHIS2，系统会要求您登录，然后转到仪表板。

## 停用TEI { #deactivate_tracked_entity_instance }

如果您停用某个 TEI，该 TEI 将变为“只读”。相关数据
与 TEI 不删除。

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在右上角，单击 ![](resources/images/tracker_capture/tc_tei_red_icon.png) 按钮 \> **Deactivate**。

4.  单击**是**进行确认。

## 激活TEI { #activate_tracked_entity_instance }

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在右上角，单击 ![](resources/images/tracker_capture/tc_tei_red_icon.png) 按钮 \> **Activate**。

4.  单击**是**进行确认。

## 删除TEI { #delete_tracked_entity_instance }

> **警告**
>
>删除TEI时，将删除与TEI相关的所有数据。

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  在右上角，单击 ![](resources/images/tracker_capture/tc_tei_red_icon.png) 按钮 \> **Delete**。

4.  单击**是**进行确认。

## 配置TEI仪表板 { #configure_tracked_entity_instance_dashboard }

### 显示或隐藏小部件 { #tracked_entity_instance_dashboard_show_hide_widget }

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  单击**设置** 图标，然后选择**显示/隐藏小部件**。

4.  选择要显示或隐藏的小部件。

5.  点击**关闭**。

### 将仪表板的布局保存为默认布局 { #tracked_entity_instance_dashboard_save_layout }

您可以将仪表板的布局保存为程序的默认设置。

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  单击**设置**图标，然后选择**保存仪表板 布局 默认**。

### 锁定仪表板的布局 { #lock-dashboards-layout }

如果您是**管理员**，您可以选择锁定 布局 所有用户的仪表板。

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  将小部件组织到所需的布局并将其保存为默认布局（请参阅上面的部分）。

4.  单击**设置**图标，然后选择**锁定 布局 对于所有用户**。

用户仍然可以暂时重新组织小部件，但
页面刷新后，布局将重置为管理员保存的布局。这
当仪表板布局为时，删除小部件按钮将被隐藏
锁定。

### 顶栏 { #top-bar }

顶部栏是一个有用的工具，可以快速查看重要数据。
简单的方法。要开始使用顶部栏：

1.  打开 **随访采集** 应用程序。

2.  打开现有的TEI仪表板。

3.  单击**设置**图标，然后选择**顶栏设置**。

4.  单击 **Activate top bar** 并单击要在顶部栏中显示的数据。

![](resources/images/tracker_capture/top_bar.png)

### 更改 **时间线数据输入** 小部件 { #change-table-display-mode-for-timeline-data-entry-widget } 的表格显示模式 { #change-table-display-mode-for-timeline-data-entry-widget }

**时间线数据输入**小控件有5种不同的表格模式选择。不同的选项是：

-   **默认格式**-垂直显示所有数据元素。

-   **比较之前的表格**-在当前选定的程序阶段旁边显示prevoius（可重复）程序阶段。

-   **全部比较表格**-在当前所选程序阶段旁边显示所有prevoius（可重复）程序阶段。

-   **网格形式**-水平显示数据元素。

-   ** POP表单**-与** Grid表单**相同，但是单击时，数据元素将显示在弹出窗口中。

要更改当前的显示模式，请单击小部件顶部栏中的第二个图标（请参见下图）：

![](resources/images/tracker_capture/compareForm.png)

一旦选择了一个选项，该选择将存储在该特殊程序阶段。这意味着您可以为程序中的不同程序阶段使用不同的表模式。

> **注意事项：**
>
> 1. _The **Compare 形式** 如果您有多个可重复事件（同一程序阶段），选项将发挥最佳作用。_
> 2. _The **Grid 形式** 和 **POP-over 形式** 如果程序阶段有超过 10 个数据元素，则选项不可选。_
> 3. _小部件栏中的图标将根据您选择的选项而变化。_

## 建立报告 { #create_report_tracker_capture }

1.  打开 **随访采集** 应用程序。

2.  点击**报告**。

3.  选择报告类型。

    <table>
    <caption>Report types in the Tracker Capture app</caption>
    <colgroup>
    <col style="width: 50%" />
    <col style="width: 50%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th>Report type</th>
    <th>Description</th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Program summary</p></td>
    <td><p>A summary report for a particular program, organisation unit and time frame. The report consist of a list of TEIs and their records organised based on program stages.</p></td>
    </tr>
    <tr class="even">
    <td><p>Program statistics</p></td>
    <td><p>A statistics report for a particular program. The report provides for example an overview of drop-outs or completion rates in a given time frame at a particular organisation unit.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Upcoming events</p></td>
    <td><p>A tabular report showing tracked entity instances and their upcoming events for a selected program and time. You can sort the columns and search the values. Show/hide operations are possible on the columns. You can also export the table to Microsoft Excel.</p></td>
    </tr>
    <tr class="even">
    <td><p>Overdue events</p></td>
    <td><p>A list of events for a selected program. The report displays a list of TEIs and their events that are not completed on time. You can sort the columns and search the values You can also export the table to Microsoft Excel.</p></td>
    </tr>
    </tbody>
    </table>

![](resources/images/tracker_capture/program_summary_report.png)

摘要报告显示 TEI 列表及其记录
“MNCH/PNC（成年女性）”计划。记录按以下形式组织
选项卡，其中每个选项卡是一个程序阶段。表中的列是
配置为显示在报告中的数据元素
程序阶段定义。

# 数据审批 { #data_approval }

DHIS2 有一个可选功能，允许授权用户批准
输入的数据。它允许审查和批准数据
在组织单位层次结构中的选定级别，因此批准
遵循从低到高的层次结构
水平。

数据被批准用于 (a) 期间、(b) 组织单位的组合
(c) 工作流程。可以为组织单位批准数据
它被输入，以及为更高级别的组织单位
数据是聚合的。作为系统设置的一部分，您可以选择
批准数据的组织单位级别。有可能
只有在所有这些都得到批准后才能在更高级别上批准
同一工作流的较低级别的组织单位的后代
和时期。当您批准工作流程时，它会批准任何数据的数据
已分配给该工作流的集合。

一段时间后，组织单元和工作流组合已经
批准后，与该工作流关联的数据集将被锁定
那个时期和组织单位，以及任何进一步的数据输入或
除非首先未经批准，否则将禁止修改。

例如，下图说明数据已经
已批准用于组织单位 C 和 D，在特定时期内，并且
工作流程。现在可以为组织单位 B 批准相同的
期间和工作流程。但它还没有准备好被组织批准
单元 A。在它被批准为组织单元 A 之前，它必须是
批准用于 B，以及组织单元 A 的任何其他子级，用于
那个时期和工作流程。

![组织批准
单位](resources/images/data_approval/approval_hierarchy.png){.center width=50% }

## 批准并接受 { #data_approvals_approving_accepting }

DHIS2 支持两种不同类型的审批流程：
在每个级别批准数据的一步过程，或两步
数据首先被批准然后在每个级别被接受的过程。
如下图所示：

![批准和
接受](resources/images/data_approval/approval_level_steps.png){.center width=69% }

在一步流程中，数据经过一级审批，然后
上一级批准。直到下次批准
更高级别，可能在第一级未获批准。 （例如，如果
数据被批准我的错误，这允许批准者撤消他们的
错误。）一旦数据被上一级批准，它可能不会
除非在下一级未经批准，否则不得在较低级别获得批准
更高层次。

In the two-step process, data is approved at one level, and then the approval is accepted at the same level. This acceptance is done by a user who is authorized to approve data at the next higher level. Once the data is accepted, it may not be changed or unapproved unless it is first _unaccepted_.

DHIS2 不需要两步过程。这是一个可选步骤
供用户查看下一个更高级别的数据。它有好处
从下面的级别锁定接受，因此审稿人不会
必须担心数据可能会从下面发生变化
正在审核中。它也可以被更高级别的用户用来保持
跟踪哪些较低级别的数据已被审查。

Two-step process can be activated by checking **Acceptance required before approval** in SystemSettings app under General section.

## 数据审批机关 { #data_approvals_authorities }

要批准数据，您必须被分配一个包含以下其中一项的角色
当局：

-   **批准数据** - 您可以批准分配给您的组织单位的数据。请注意，此权限不允许您批准您被分配到的组织单位以下较低级别的数据。这有助于将授权在一级批准的用户与授权在下一级批准的用户分开。

-   **批准较低级别的数据** - 允许您批准分配给您的组织单位以下所有较低级别的数据。例如，如果您是一个地区级用户，其角色包括批准该地区内所有设施的数据，但不批准该地区本身的数据，这将非常有用。如果您被分配了此权限以及_批准数据_权限，您可以在您被分配到的组织单位级别以及以下任何级别批准数据。

-   **接受较低级别的数据** - 允许您接受仅低于分配给您的组织单位的级别的数据。此权限可以授予与批准数据相同的用户。或者，如果您希望有一些用户接受来自下一层的数据，并且有一组不同的用户批准数据进入上一层，那么它可能会分配给不同的用户。

## 配置数据批准 { #data_approvals_configuration }

在_数据审批级别_下的_维护应用程序_部分中，您可以指定要在系统中审批数据的级别。单击此页面上的添加新按钮，然后选择您想要批准的组织单位级别。它将被添加到批准设置列表中。您可以将系统配置为在每个组织单位级别或仅在选定的组织单位级别批准数据。

请注意，当您添加新的批准级别时，您可以选择一个
类别选项组集。此功能将在本文后面讨论
章节。

Also in maintenance under _Data approval workflow_, you can define the workflows that will be used for approving data. Each workflow can be associated with one or more approval levels. Any two workflows may operate at all the same approval levels as each other, some of the same and some different levels, or completely different levels.

如果您希望根据工作流程批准数据集的数据，
然后在添加或编辑数据时将工作流分配给数据集
放。如果您不希望某个数据集的数据受到批准，
然后不要为该数据集分配任何工作流程。对于您的数据集
想同时审批，分配给同一个
工作流程。对于要独立审批的数据集，分配
每个数据集到自己的工作流程。

在_系统设置_ -> _分析_下，您可以控制哪些未经批准的数据（如果有）将出现在分析中。请参阅本用户指南的“分析设置”部分。请注意，分配到数据已准备好待批准的组织单位的用户始终可以在分析中查看此数据，如果分配到更高级别的组织单位的用户具有_批准较低级别的数据_权限或_查看未批准的数据_权限，他们也可以查看此数据。

## 数据可视性 { #data_approvals_data_visibility }

If the option _Hide unapproved data in analytics_ is enabled, data will be hidden from viewing by users associated with higher levels. When determining whether a data record should be hidden for a specific user, the system associates a user with a specific approval level and compares it to the level to which the data record has been approved up to. A user is associated with the approval level which matches the level of the organisation unit(s) she is linked to, or if no approvel level exists at that level, the next approval level linked to an organisation unit level below herself. A user will be allowed to see data which has been approved up to the level immediately below her associated approval level. The rationale behind this is that a user must be ablet to view the data that has been approved below so that she can eventually view and approve it herself.

请注意，如果用户被授予_查看未批准的数据_或_ALL_权限，她将能够查看数据而不管批准状态如何。

_让我们考虑以下示例：_ 有四个组织单位级别，审批级别与级别 2 和 4 相关联。国家级别 (1) 的_用户 A_ 与审批级别 1 相关联，因为审批级别与组织处于同一级别单位级别。 _用户 B_ 与批准级别 2 相关联，因为没有直接链接到她的组织单位级别的批准级别，而批准级别 2 是下面的直接级别。 _用户 C_ 与批准级别 2 相关联。_用户 D_ 低于所有批准级别，这意味着她可以看到在她的组织单位级别或低于她的组织单位级别输入的所有数据。

![隐藏未经批准的
数据](resources/images/data_approval/approval_data_hiding.png){.center}

使用此示例，让我们考虑一些方案：

-   在设施级别输入数据：只有_用户 D_ 可以看到数据，因为数据还没有被批准。

-   数据由_用户 D_ 在设施级别批准：数据对用户 C 和用户 B 可见，因为数据现在在他们的级别获得批准。

-   数据在地区级别由_用户 C_ 批准：数据对用户 A 可见，因为数据现在在她自己下面的级别上得到批准。

## 批准数据 { #data_approvals_approving_data }

要批准数据，请转到 _Reports_ 并选择 _Data Approval_。当此报表显示配置为审批的数据时，它会显示报表中数据的审批状态。批准状态将是以下之一：

-   **等待较低级别的组织单位批准** - 此数据尚未准备好批准，因为它首先需要为该组织单位的所有子组织单位批准，用于相同的工作流和时间段。

-   **准备批准** - 此数据现在可以由授权用户批准。

-   **已批准**-此数据已被批准。

-   **已批准并接受** - 此数据已获得批准，也已接受。

如果您正在查看的数据处于可以采取行动的批准状态，并且如果您有足够的权限，您可以在_数据批准_表单上执行以下一项或多项操作：

-   **Approve** - 批准尚未批准的数据，或以前批准但未批准的数据。

-   **未批准** - 返回已批准或接受的未批准状态数据。

-   **接受**-接受已批准的数据。

-   **Unaccept** - 返回已接受的未接受（但仍被批准）状态数据。

要取消批准给定单位部门的数据，您必须拥有
批准该组织单位的数据或批准
数据所属的更高级别组织单位的数据
汇总。其原因如下： 如果您正在查看数据
要获得更高组织单位级别的批准，您应该考虑
下级组织单位的数据是否合理。我摔倒
下级数据看起来不错，可以在上级批准数据
等级。如果某些较低级别的数据看起来可疑，您可以取消批准
较低级别的数据。这允许在以下位置再次查看数据
下级，必要时更正，并通过审核重新批准
根据层次结构划分的组织单位级别。

## 按类别选项组批准 { #data_approvals_approving_by_cogs }

定义审批级别时，指定组织单位级别
届时将批准数据。您还可以选择指定一个
类别选项组集。如果您使用类别，这很有用
选项组来定义数据的其他维度，并且您想要
批准基于这些尺寸。下面的例子
说明如何在单个类别选项组中完成此操作
集，并通过使用多个类别选项组集。

### 按一个类别选项组集批准 { #approving-by-one-category-option-group-set }

例如，假设您定义了一个类别选项组集来表示
在一个或多个组织单位担任医疗保健合作伙伴的非政府组织。
此集合中的每个类别选项组代表一个不同的
伙伴。合作伙伴 1 的类别选项组可以组合在一起
使用的类别选项（例如资金帐户代码）
合作伙伴作为数据的一个维度。所以合作伙伴 1 输入的数据是
归因于合作伙伴 1 的类别选项组中的类别选项。
而合作伙伴 2 输入的数据归因于
合作伙伴 2 的类别选项组：

<table align="center">
<caption>Example Category Option Groups</caption>
<thead>
<tr class="header">
<th>Category option group set</th>
<th>Category option group</th>
<th>Category options</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Partner</td>
<td>Partner 1</td>
<td>Account 1A, Account 1B</td>
</tr>
<tr class="even">
<td>Partner</td>
<td>Partner 2</td>
<td>Account 2A, Account 2B</td>
</tr>
</tbody>
</table>

每个合作伙伴都可以独立于他们的帐户输入数据
其他，对于相同或不同的工作流程，相同或不同
设施。例如，数据可以在
每个合作伙伴的以下级别，彼此独立：

![示例类别选项
组](resources/images/data_approval/approval_partner_example.png){.center}

> **提示**
>
> 您可以使用类别选项和类别选项组的共享功能，以确保用户只能为某些类别选项和组输入数据（和/或查看数据）。如果您不希望用户看到超出其分配的类别选项和/或类别选项组的聚合数据，您可以在添加或更新用户时分配_用于数据分析的选定维度限制_。

您可以选择在任何或
所有这些组织单位级别。例如，您可以定义任何
或以下所有批准级别：

 <table align="center">
 <caption> 示例类别选项组 设置批准级别 </caption>
 <thead>
 <tr class="header">
 <th> 批准级别 </th>
 <th> 组织单位级别 </th>
 <th> 类别选项组设置 </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> 1 </td>
 <td> 国家 </td>
 <td> 合作伙伴 </td>
 </tr>
 <tr class="even">
 <td> 2 </td>
 <td> 区 </td>
 <td> 合作伙伴 </td>
 </tr>
 <tr class="odd">
 <td> 3 </td>
 <td> 设施 </td>
 <td> 合作伙伴 </td>
 </tr>
 </tbody>
 </table>

## 通过多个类别选项组集批准 { #approving-by-multiple-category-option-group-sets }

您还可以为不同的类别选项组定义批准级别
套。继续这个例子，假设你有不同的机构
管理向不同合作伙伴提供的资金。例如，机构 A
资金账户 1A 和 2A，而机构 B 资金账户 1B 和 2B。你
可以为机构 A 和机构 B 设置类别选项组，并使
它们都是名为 Agency 的类别选项组集的一部分。那么你
将有：

<table align="center">
<caption>Example Multiple Category Option Group Sets</caption>
<thead>
<tr class="header">
<th>Category option group set</th>
<th>Category option group</th>
<th>Category options</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Partner</td>
<td>Partner 1</td>
<td>Account 1A, Account 1B</td>
</tr>
<tr class="even">
<td>Partner</td>
<td>Partner 2</td>
<td>Account 2A, Account 2B</td>
</tr>
<tr class="odd">
<td>Agency</td>
<td>Agency A</td>
<td>Account 1A, Account 2A</td>
</tr>
<tr class="even">
<td>Agency</td>
<td>Agency B</td>
<td>Account 1B, Account 2B</td>
</tr>
</tbody>
</table>

现在假设在国家/地区级别，您希望每个合作伙伴批准
该合作伙伴输入的数据。完成此批准后，您需要
每个机构然后批准来自由管理的帐户的数据
那个机构。最后，您要批准国家/地区级别的数据
跨越所有机构。您可以通过定义以下内容来做到这一点
审批级别：

<table align="center">
<caption>Example Multiple Category Option Group Set approval levels</caption>
<thead>
<tr class="header">
<th>Approval level</th>
<th>Organisation unit level</th>
<th>Category option group set</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Country</td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td>Country</td>
<td>Agency</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Country</td>
<td>Partner</td>
</tr>
</tbody>
</table>

请注意，可以为相同的权限定义多个审批级别
组织单位层面。在我们的示例中，合作伙伴 1 将批准
来自类别选项账户 1A 的批准级别 3 的全国数据
和账户 1B。接下来，A 机构将批准全国范围的数据
类别选项帐户 1A 中的批准级别 2（经批准后
合作伙伴 1) 和账户 2A（经合作伙伴 2 批准后。）最后，在
获得所有机构的批准，全国范围的数据可以在
所有类别选项的批准级别为 1。请注意，批准级别 1
不指定类别选项组集，这意味着它用于
批准所有类别选项的数据。

此示例仅用于说明。你可以定义尽可能多的
您需要的类别选项组，以及尽可能多的审批级别
不同类别选项需要在同一组织单位级别
组套。

如果您对同一组织单位级别的不同类别选项组集有多个审批级别，您可以在_系统审批设置_下的_设置_部分更改审批顺序。只需单击您要移动的批准级别，然后选择_Move up_ 或_Move down_。如果您的审批级别未设置类别选项组，则它必须是该组织单位级别的最高审批级别。

# 管理仪表板 { #dashboard }

## 关于仪表盘 { #about-dashboards }

仪表板旨在提供对不同分析的快速访问
对象（地图、图表、报告、表格等）给单个用户。
仪表板可以与用户组共享。仪表板也可以打印。

用户或管理员可以创建一个名为“产前保健”的仪表板
其中可能包含有关产前保健的所有相关信息。这
然后可以与名为“ANC 控制”的用户组共享仪表板，
可能包括 ANC 控制程序的所有用户。所有用户
然后，该组内将能够查看相同的仪表板。

## 仪表板和控制栏 { #dashboards_setup }

仪表板具有标题、描述和任意数量的仪表板项目。
仪表板项目可以是许多不同的类型，包括图表、
地图、报告、表格、资源、消息和文本项目。以上
仪表板是控制栏，显示所有可用的仪表板，
包括一个仪表板搜索字段和一个 **+** 按钮，用于创建一个
新仪表板。

仪表板有两种模式：查看和编辑/创建。第一次登录时
到 DHIS2，您最近使用的仪表板将显示在视图中
模式，如果您与之前在同一台计算机上。如果你是
使用不同的计算机，那么第一个加星标的仪表板将是
显示。如果没有加星标的仪表板，则是第一个仪表板（按字母顺序）
将显示。已加星标的仪表板始终首先显示在仪表板中
列表。

下面的屏幕截图显示了一个名为“产前护理”的仪表板，其中
已经填充了图表和地图。

![](resources/images/dashboard/dashboard-view-mode.png)

### 在仪表板列表中搜索 { #searching-in-the-list-of-dashboards }

您可以使用搜索栏中的搜索字段搜索特定仪表板
标题为“搜索仪表板”的控制栏左上角。这
搜索不区分大小写，当您键入时，仪表板列表将
过滤到与您的搜索文本匹配的那些。

### 自定义控制栏的高度 { #customizing-the-height-of-the-control-bar }

您可以通过右键单击并拖动控制栏的底部边缘来为仪表板控制栏设置特定的高度。完成拖动后，将设置新的高度。单击**显示更多**，将控制栏扩展到最大高度（10个“”行”）。单击**显示较少 **会将高度重置为您自定义的高度。

## 创建仪表板 { #creating-a-dashboard }

要创建新仪表板，请单击左侧的绿色 **+** 按钮
控制栏的一角进入创建模式。在标题中添加
标题字段，以及可选的描述字段中的描述。如果您不添加标题，仪表板将自动命名为“未命名仪表板”。

![](resources/images/dashboard/dashboard-add-new.png)

**创建模式：**

![](resources/images/dashboard/dashboard-create-mode.png)

### 将项目添加到仪表板 { #adding-items-to-the-dashboard }

通过从项目选择器中的搜索添加项目到仪表板
仪表板区域的右上角。可用项目包括：

-   可视化

-   地图

-   活动报告

-   活动图

-   报告

-   资源资源

-   应用

-   电子邮件

-   文字框

-   垫片

根据您输入的搜索文本，下拉列表中的项目列表最初显示10个可视化效果（图表和表格），以及其他每个类别中的5个。在下拉菜单中还可以找到电子邮件，文本框和分隔符项目。要查看更多项目，请单击**显示更多**，该类型的列表将扩展为25个项目。如果仍然找不到所需的项目，请尝试输入更具体的搜索文本。

![](resources/images/dashboard/dashboard-item-selector.png)

一旦您选择了一个项目，它将被添加到左上角的位置
仪表板。添加的项目可以使用鼠标移动
向下单击该项目并将其拖动到所需位置。它
也可以通过向下单击拖动手柄来使用鼠标调整大小
并拖动到所需大小。

#### 垫片项目 { #spacer-items }

仪表板配置了“反重力”设置
定位项。这意味着项目将“上升”直到它们
遇到另一个项目。为了强制空的垂直空间之间
项（如空行），您可以向仪表板添加间隔项。
它们仅在编辑/创建模式下可见。在查看模式下，它们不是
显示，但占用定义的空间。

**编辑/创建模式**中的空格：

![](resources/images/dashboard/dashboard-spacer-edit-mode.png)

**查看模式下的垫片**：

![](resources/images/dashboard/dashboard-spacer-view-mode.png)

### 移除物品 { #removing-items }

单击右上角的红色垃圾桶删除项目
物品。请注意，由于“反重力”设置
仪表板，当您删除一个项目时，位于下方的项目
被移除的物品将向上“升起”。

### 打印预览 { #print-preview }

单击**打印预览**按钮，以查看仪表板在仪表板布局打印中的外观。

![](resources/images/dashboard/dashboard-edit-print-preview.png)

单击**退出打印预览**以返回到编辑仪表板。

请注意，某些项目可能会向下移动以避免分页符。项目也可能会缩短以适合一页。缩短的项目在预览的右上角显示一个信息图标。该图标在实际打印中被删除。

### 保存仪表板 { #saving-the-dashboard }

创建或编辑仪表板时，仅在单击页面顶部的仪表板编辑栏中的**保存更改**按钮时才保存更改。如果您不想保存所做的更改，请单击右上角的**不保存退出**按钮。然后，您将使用之前查看的仪表板返回查看模式。

## 编辑现有的仪表板 { #editing-an-existing-dashboard }

如果您有权编辑当前活动的仪表板，则在查看模式下，仪表板标题的右侧将有一个**编辑**按钮。单击此按钮进入编辑模式。

![](resources/images/dashboard/dashboard-title-bar.png)

有关创建仪表板的信息，请参阅上述部分
向仪表板添加和删除项目。

![](resources/images/dashboard/dashboard-edit-mode.png)

### 翻译仪表板标题和描述 { #translating-dashboard-title-and-description }

您可以在仪表板标题和描述中添加翻译
编辑模式。该对话框提供了要翻译成的语言列表，以及
在名称输入字段下方显示原始仪表板标题。

![](resources/images/dashboard/dashboard-translation-dialog.png)

1.  点击位于仪表盘上方的**翻译**按钮

2.  选择您要为其添加翻译的语言。

3.  添加标题和/或描述，然后单击**保存**

## 删除仪表板 { #deleting-a-dashboard }

如果您有权删除仪表板，则在编辑模式下，仪表板上方将有一个**删除**按钮。首先将显示一个确认对话框，以确认您要删除仪表板。

## 查看仪表板 { #viewing-a-dashboard }

在查看模式下，您可以切换显示说明，为仪表板加注星标，应用过滤器，打印仪表板以及与其他用户和组共享仪表板。

### 显示说明 { #show-description }

要切换说明，请点击** ...更多**按钮，然后选择**显示说明**（或**隐藏说明**）。您打开的所有仪表板都会记住该设置。此设置适用于您，不适用于其他用户。

![](resources/images/dashboard/dashboard-title-bar.png)

### 已加星标的仪表板 { #starred-dashboards }

已加星标的仪表板首先列在仪表板列表中。至
为仪表板加星标，单击标题右侧的星标按钮。您还可以从 **...更多** 菜单切换星号。
当星号为“填充”时，表示仪表板已加星标。主演
仪表板仅适用于您，不适用于其他用户。

### 筛选仪表板 { #filtering-a-dashboard }

可以将多个过滤器应用于仪表板以更改数据
显示在各种仪表板项目中。
过滤器以相同的方式应用于每个仪表板项目：
每个添加的过滤器都会覆盖该维度的原始值
原始图表、表格或地图（可视化）。
可以过滤组织单位、期间和其他
动态维度取决于 DHIS2 实例。

要添加过滤器，请点击**添加过滤器**按钮，然后选择尺寸：

![添加过滤器](resources/images/dashboard/dashboard-filters.png)

将打开一个对话框，您可以在其中选择过滤器。

![组织单位过滤器选择](resources/images/dashboard/dashboard-orgunit-filter-dialog.png)

在对话框中单击**确认**，以将过滤器应用于当前仪表板。

过滤器不会被存储，所以当切换到不同的仪表板时，它们
丢失了。
筛选器徽章显示在仪表板项目上方以
指示仪表板项目中显示的内容不是原始内容
可视化，但过滤器覆盖的操纵
存储维度的值。

![当前过滤器显示为仪表板上方的标志](resources/images/dashboard/dashboard-filter-badges.png)

可以单击过滤器标记以打开过滤器选择对话框，从而可以进行过滤器编辑。通过单击徽章中的**删除**按钮，可以删除过滤器。每当添加，编辑或删除过滤器时，仪表板项目都会重新加载以显示更新的数据。滚动仪表板内容时，过滤器徽标始终在页面顶部可见。

### 打印仪表板 { #printing-a-dashboard }

从** ...更多**菜单中，您可以打印活动的仪表板。仪表板打印有两种样式：仪表板布局和每页一项。对于这两种样式，将添加一个标题页，以显示仪表板标题，描述（如果启用了“显示描述”设置）以及所有应用的仪表板过滤器。

![](resources/images/dashboard/dashboard-print-menu.png)

为了获得最佳打印效果：

-   使用Chrome或Edge
-   等到所有仪表板项目都已加载后再打印
-   使用具有默认边距的A4横向设置

#### 打印仪表板布局 { #print-dashboard-layout }

仪表板布局打印将近似显示在浏览器中的仪表板布局。请注意，可能需要对布局进行一些调整以避免分页符：某些项目的位置可能会向下调整，而高于一页的项目则会缩短。

单击右上角的**打印**按钮以触发浏览器打印功能。

![](resources/images/dashboard/dashboard-print-layout.png)

#### 每页打印一项 { #print-one-item-per-page }

这种打印样式会将每个仪表板项目打印在单独的页面上，从而最大程度地利用纸张。

单击右上角的**打印**按钮以触发浏览器打印功能。

![](resources/images/dashboard/dashboard-print-oipp.png)

## 带有图表，数据透视表和地图的仪表板项目 { #dashboard-items-with-charts-pivot-tables-and-maps }

### 在可视化之间切换 { #switching-between-visualizations }

可以切换显示图表，数据透视表和地图的仪表板项目
在这些可视化之间。单击项目右上角的项目菜单按钮，然后选择所需的视图：

![](resources/images/dashboard/dashboard-item-menu.png)

## 释义 { #interpretations }

您可以为图表，数据透视表，地图，事件编写解释
报告和事件图表项目。在仪表板项目菜单上，单击**显示解释和详细信息**：

![](resources/images/dashboard/dashboard-item-menu-interpretations.png)

该项目将在下方垂直展开以显示说明，
解释和答复。您可以喜欢一种解释，回复
解释，并添加您自己的解释。您可以编辑，共享或删除
您自己的解释和答复，并且如果您拥有版主访问权限，
您可以删除其他人的解释。

可以格式化描述字段和解释
使用Markdown样式标记\*和\ _带有**粗体**，_italic_
分别代表**粗体**和_italic_。用于编写新文本的文本字段
解释具有用于添加富文本的工具栏。键盘快捷键
也可以使用：Ctrl / Cmd + B和Ctrl / Cmd +I。
smilies受支持，可以通过键入以下命令之一来使用
字符组合：:) :-) :( :-(：+1：-1。URL是自动的
检测并转换为可点击的链接。

解释按日期降序排列，最新的显示在顶部。
解释回复按日期升序排列，最早的显示在顶部。

![](resources/images/dashboard/dashboard-interpretations.png)

## 共享仪表板 { #dashboard_sharing }

为了与用户组共享仪表板，请单击**分享**
仪表板标题右侧的按钮以显示仪表板
共享设置选项。与特定用户共享仪表板或
用户组，在输入字段中输入名称以将其添加到
仪表板共享设置

![](resources/images/dashboard/dashboard-sharing-dialog.png)

默认情况下，所有仪表板都有两个共享组。

-   外部访问（无需登录）

    选中此选项后，可通过 API 作为外部资源访问仪表板。当您创建外部 Web 门户但希望从您在 DHIS2 内部创建的仪表板中调用信息时，这很有用。默认情况下，未选择此选项。有关详细信息，请参阅开发者指南中的[查看分析资源表示](https://docs.dhis2.org/master/en/developer/html/webapi_viewing_analytical_resource_representations.html#)。

-   公共访问（登录）

    此选项允许将所选仪表板推送给您的 DHIS2 实例中的所有用户。这也可以通过选择“无”选项从公共视图中隐藏，这是新仪表板的默认选项。

手动添加的用户组可以分配两种类型
仪表板中的权限

-   可以查看

    为用户组提供对仪表板的仅查看权限。

-   可以编辑和查看

    除了查看仪表板外，还允许用户组编辑仪表板。编辑允许更改布局、调整大小和删除项目、重命名/删除仪表板等。

您可以向用户提供仪表板的 url，允许他们
直接导航到仪表板。要获取仪表板网址，只需
在查看模式下访问仪表板，并复制浏览器 url。为了
例如，play.dhis2.org/demo 中产前保健仪表板的网址
是：

https://play.dhis2.org/demo/dhis-web-dashboard/\#/nghVC4wtyzi

# 使用数据可视化器应用 { #data_visualizer }

![](resources/images/data-visualizer/data-visualizer-overview.png)

## 创建和编辑可视化 { #creating-and-editing-visualizations }

当从dhis2菜单打开data-visualizer应用程序时，将显示空白面板，您可以立即开始创建可视化。

![](resources/images/data-visualizer/data-visualizer-new.png)

### 选择可视化类型 { #select-visualization-type }

从左上角的选择器中选择所需的可视化类型。
对于每种可视化类型，都有一个简要说明，并提供有关在布局中的何处使用主要维度的建议。

![](resources/images/data-visualizer/data-visualizer-visualization-type.png)

| 可视化类型 | 描述 |
| --- | --- |
| 柱 | 将信息显示为垂直矩形列，其长度与它们代表的值成比例。<br><br>示例：比较不同地区的性能。<br><br>  布局限制：正好为1个尺寸系列，正好为1个尺寸类别。 |
| 堆积柱 | 将信息显示为垂直的矩形列，其中代表多个类别的条形图相互堆叠。<br><br>示例：显示趋势或相关数据元素的总和。 <br><br> 布局限制：与“列”相同。 |
| 酒吧 | 与Column相同，仅带有水平条。 |
| 叠杆 | 与堆积列相同，仅带有水平条。 |
| 线 | 将信息显示为由直线连接的一系列点。也称为时间序列。<br><br>示例：可视化指标数据在一定时间间隔内的趋势。 <br><br> 布局限制：与“列”相同。 |
| 区 | 基于一条线（上方），轴与线之间的空间充满了颜色，并且线彼此堆叠。 <br> <br>示例：比较相关指标的趋势。 <br> <br>布局限制：与“列”相同。 |
| 堆积面积 | 与“面积”相同，但是各个尺寸项目的面积彼此堆叠。 <br> <br>示例：比较相关指标的趋势。 <br> <br>布局限制：与区域相同。 |
| 馅饼 | 将圆圈划分为多个扇区（或多个切片）。<br><br>示例：可视化单个数据元素的数据比例与所有数据元素的总和之比较。 <br><br> 布局限制：正好是1个尺寸的系列，没有类别。 |
| 雷达 | 在从同一点开始的轴上显示数据。也称为蜘蛛图。 <br> <br>布局限制：与“列”相同。 |
| 测量 | 半圆形，显示单个值，通常不超过100％（可配置起始值和终止值）。 <br> <br>布局限制：正好1个维，正好有1个项目作为序列，数据维被锁定为序列。 |
| 逐年（行） | 当您想要将一年的数据与其他年份的数据进行比较时很有用。基于日历年。 <br> <br>布局限制：期间尺寸已禁用。 |
| 逐年（列） | 与逐年（行）相同，仅具有列。 |
| 单值 | 以仪表板友好的方式显示单个值。 <br> <br>布局限制：与仪表相同。 |
| 数据透视表 | 汇总更广泛的表的数据，并可能包括总和，平均值或其他统计数据，数据透视表以有意义的方式将它们分组在一起。 <br> <br>布局限制：无。 |

### 选择尺寸 { #select-dimensions }

从左侧的维度菜单中，您可以选择要在可视化中显示的维度，包括数据，期间，组织单位和动态维度。可以通过单击尺寸，将尺寸拖放到布局区域或将鼠标悬停在尺寸上并使用其上下文菜单（三个点）来添加这些尺寸。

![](resources/images/data-visualizer/data-visualizer-dimensions.png)

就像在尺寸菜单中一样，在布局区域中，您还可以通过单击尺寸，拖放尺寸或使用尺寸的上下文菜单（三个点）来更改选择。

![](resources/images/data-visualizer/data-visualizer-layout-area.png)

-   **系列**：系列是一组连续的相关元素（例如期间或数据元素），您希望将其可视化以强调其数据中的趋势或关系。也称为数据透视表可视化的列。

<!-- end list -->

-   **类别**：类别是您要比较其数据的一组元素（例如指标或组织单位）。也称为数据透视表可视化的行。

<!-- end list -->

-   **过滤器**：过滤器选择将过滤可视化中显示的数据。请注意，如果您使用数据维度作为过滤器，您只能将单个指标或数据集指定为过滤器项，而对于其他维度类型，您可以选择任意数量的项。

### 选择尺寸项目 { #data_vis_select_dim_items }

维度是指描述系统中数据值的元素。系统中有三个主要维度：

-   **数据**：包括数据元素、指标和数据集（报告率），描述数据的现象或事件。

<!-- end list -->

-   **时段**：描述事件发生的时间。

<!-- end list -->

-   **组织单位**：描述事件发生的地点。

Data Visualizer在允许您将这些维度用作系列，类别和过滤器方面具有高度的灵活性。

要选择尺寸项目，请通过单击尺寸打开尺寸模式窗口。在向布局中添加没有选定项目的尺寸时，该窗口也会自动打开。通过双击某个项目或单击一次并使用中间的箭头选择一个项目，选择要添加到可视化中的项目。出现的顺序将与它们的选择顺序相同。通过将所选项目拖放到“所选”部分中，可以对它们进行重新排序。

![](resources/images/data-visualizer/data-visualizer-dimension-modal.png)

#### 选择时期 { #select-periods }

选择期间时，您必须选择在固定期间和相对期间之间进行选择。这些也可以组合。重叠时间段被过滤，因此它们仅出现一次。对于相对期间，名称是相对于当前日期的，例如如果当前月份为3月，并且选择了**上个月**，则2月将显示在可视化文件中。

![](resources/images/data-visualizer/data-visualizer-period-dimension-modal.png)

#### 选择组织单位 { #select-organisation-units }

组织单位对话框非常灵活，提供了三种选择组织单位的方式：

-   显式选择：使用**树**显式选择要在可视化中显示的组织单位。如果您右键单击组织单位，则可以轻松选择以选择其下的所有组织单位。

-   级别和组：**级别**和**组**下拉菜单是一种方便的方法，可以选择一个或多个组织单位组或特定级别的所有单位。示例：选择_Chiefdom_（级别3）以获取该级别的所有单位部门。

    请注意，一旦至少选择了一个级别或组，组织单位树现在将作为级别/组的边界。例如：如果在树中选择_Chiefdom_（第3级）和_Kailahun_ org单位（第2级），则将获得Kailahun地区内的所有酋长单位。

-   用户的组织单位：

    -   用户组织单位：这是一种动态选择已登录用户所关联的组织单位的方法。

    -   用户子单位：选择用户组织单位的子单位。

    -   User sub-x2-units：选择用户组织单位下两级的单位。

![](resources/images/data-visualizer/data-visualizer-organisation-unit-dimension-modal.png)

### 两个类别图 { #two-category-charts }

大多数图表可视化类型可以显示两个类别。
从 Pivot Table 切换到 Column、Bar、Area（以及它们的堆叠版本）和 Line 将前两个维度保留在 Category 中，任何额外的维度都移动到 Filter。
类别中第一个维度的标签显示在图表顶部，第二个维度的标签显示在底部。
生成的可视化由单独的图表组成，第一维中的每个项目一个。

![](resources/images/data-visualizer/data-visualizer-two-category.png)

## 更改可视化的显示 { #change-the-display-of-your-visualization }

可视化的显示可以通过启用/禁用和配置多个选项来更改。每种可视化类型可以具有一组不同的可用选项。选项在**选项对话框**中的选项卡中以及每个选项卡内的部分中进行组织。

1.  单击**选项**以打开**选项 对话框**。

2.  浏览对话框中的选项卡以查看可用选项。

3.  根据需要配置所需的选项。

4.  单击**更新**以将更改应用于可视化。

### 可用选项列表 { #list-of-available-options }

| 选项 | 描述 |
| --- | --- |
|  | **数据标签** |
| 聚集类型 | 定义如何在可视化中汇总数据元素或指标。一些聚合类型为“按数据元素”，“计数”，“最小”和“最大”。 |
| 基准线 | 在给定的域值上显示一条水平线。例如，在您想要可视化自流程开始以来性能如何变化时很有用。 |
| 列小计 | 在数据透视表中显示每个维的小计。 <br>如果仅选择一个维度，则这些列的小计将被隐藏。这是因为值将等于小计。 |
| 列总计 | 在数据透视表中显示每一列的总计值，以及表中所有值的总计。 |
| 累计值 | 在列，堆积列，条形图，堆积条形图，线和面积可视化图中显示累积值 |
| 自定义排序顺序 | 控制值的排序顺序。 |
| 尺寸标签 | 将维度名称显示为数据透视表的一部分。 |
| 隐藏空类别 | 隐藏可视化中没有数据的类别项目。 <br> **在第一个**之前：仅在第一个值之前隐藏缺少的值<br> **在last **之后：仅在最后一个值之后隐藏缺少的值<br> **在第一个和最后一个之前**：仅在第一个之前值和最后一个值之后<br> **全部**：隐藏所有缺少的值<br>例如，当您创建列和条形图时，这很有用。 |
| 隐藏空列 | 隐藏数据透视表中的空列。当您查看大型表时，其中很大一部分的维项目没有数据以保持表的可读性，这很有用。 |
| 隐藏空行 | 隐藏数据透视表中的空行。当您查看大型表时，其中很大一部分的维项目没有数据以保持表的可读性，这很有用。 |
| 号码类型 | 设置要在数据透视表中显示的值的类型：“值”，“行百分比”或“列百分比”。 <br>选项行百分比和列百分比意味着您将以行总百分比或列总百分比显示值，而不是合计值。当您想查看数据元素，类别或组织单位对总价值的贡献时，此功能很有用。 |
| 仅包括已完成的事件 | 在聚合过程中仅包括已完成的事件。例如，这对于在指标计算中排除部分事件很有用。 |
| 行小计 | 在数据透视表中显示每个维的小计。 <br>如果仅选择一个维度，则这些行的小计将被隐藏。这是因为值将等于小计。 |
| 行总计 | 显示数据透视表中每一行的总计值以及表中所有值的总计。 |
| 跳过舍入 | 跳过数据值的舍入，提供数据值的全精度。对于需要全额美元金额的财务数据很有用。 |
| 堆叠的值总计为100％ | 在堆积列和堆积条形图中显示100％堆积值。 |
| 目标线 | 在给定的域值上显示一条水平线。例如，当您想将性能与当前目标进行比较时很有用。 |
| 趋势线 | 显示趋势线，以可视化方式显示数据随时间的变化。例如，如果性能正在改善或恶化。选择期间作为类别时很有用。 |
| 值标签 | 在可视化中显示序列上方的值。 |
|  | 轴标签 |
| 轴范围 | 定义在范围轴上可见的最大值和最小值。 |
| 轴标题 | 在此处输入标题以在x或y轴旁边显示标签。当您想为可视化提供上下文信息时，例如有关度量单位的信息时很有用。 |
| 小数点 | 定义将用于范围轴值的小数位数。 |
| 脚步 | 定义在范围轴上可见的刻度线数。 |
|  | **传奇标签** |
| 显示图例 | 将图例应用于值。这意味着您可以将颜色应用于值。您可以在维护应用程序中配置图例。 <br>图例类型部分允许控制应用哪种颜色。选择“对每个数据项使用预定义图例”以根据每个数据元素或指示符分别为数据点着色。选择“为整个可视化选择一个图例以使用单个图例”，该图例是在可用图例的下拉列表中选择的。 <br>“图例样式”部分允许控制颜色的应用位置，基于所选图例的文本或背景。您可以使用此选项对记分卡一眼识别高值和低值。不适用于单值可视化。 |
|  | **系列标签** |
|  | 在此选项卡中设置了用于添加更多轴和更改不同系列显示方式的选项。请在下面的相应部分中查看有关其工作原理的详细说明。 |
|  | **样式标签** |
| 数字组分隔符 | 控制使用哪个字符来分隔数字或“千”组。您可以将其设置为逗号，空格或无。 |
| 显示密度 | 控制数据透视表中单元格的大小。您可以将其设置为“舒适”，“普通”或“紧凑”。当您要将大型表放入浏览器屏幕时，<br> Compact很有用。 |
| 显示组织单位层次结构 | 显示组织单位的所有祖先的名称，例如，“三亚CHP”的名称为"塞拉利昂/孟买/塔马巴卡/三亚CHP”。然后，<br>按字母顺序对组织单位进行排序，这将根据层次结构对组织单位进行排序。 <br>当您下载以单位部门为行的数据透视表并选择了显示单位部门层次结构时，每个单位部门级别均显示为单独的列。例如，当您在本地计算机上创建Excel数据透视表时，这很有用。 |
| 字体大小 | 控制数据透视表文本字体的大小。您可以将其设置为大，普通或小。 |
| 图表/表格标题 | 控制显示在可视化文件上方的标题。自动生成的<br>使用从可视化的尺寸/过滤器生成的默认标题。 <br>无将删除标题。 <br>“自定义”选项允许您键入自定义标题。 |
| 图表/表格字幕 | 控制显示在可视化效果上方的字幕。自动生成的<br>使用从可视化的尺寸/过滤器生成的默认字幕。 <br>无将删除字幕。 <br>“自定义”选项允许您键入自定义字幕。 |
| 显示图例键 | 打开和关闭图例，为可视化本身留出更多空间。 |
| 条/列之间没有空格 | 删除可视化中的列或条之间的空间。对于将可视化显示为EPI曲线很有用。 |
| 值标签 | 在可视化中显示序列上方的值。 |
| 图表/表格标题 | 控制显示在可视化文件上方的标题。自动生成的<br>使用从可视化的尺寸/过滤器生成的默认标题。 <br>无将删除标题。 <br>“自定义”选项允许您键入自定义标题。 |
| 颜色集 | 控制图表中使用的颜色。将显示可用颜色集的列表以及这些颜色的预览。还有一个“单声道图案”选项，该选项使用彩色图案而不是纯色。 |
|  | **限制值标签** |
| 限制最小值/最大值 | 允许在服务器端过滤数据。<br>您可以指示系统仅返回聚合数据值等于，大于，大于或等于，小于或小于或等于某些值的记录。<br> 如果同时使用了过滤器的两个部分，则可以过滤掉一系列数据记录。 |
|  | **参数标签** |
| 自定义排序顺序 | 控制值的排序顺序。 |
| 包括累积 | 包含具有数据透视表累积值的列。 |
| 包括回归 | 包括具有对数据透视表的回归值的列。 |
| 组织单位 | 控制在“报告”应用中创建标准报告时是否要求用户输入组织单位。 |
| 上级组织单位 | 控制在“报告”应用中创建标准报告时是否要求用户输入上级组织单位。 |
| 报告期 | 控制在“报告”应用中创建标准报告时是否要求用户输入报告期间。 |
| 最高限额 | 控制要包含在数据透视表中的最大行数。 |

### 图表中文本和图例的自定义样式 { #custom-styling-for-text-and-legend-in-charts }

可以使用文本样式工具自定义以下选项：`图表标题`，`图表字幕`，`显示图例键`，`目标线`，`基准线`，`轴标题`和`标签`（水平和垂直）垂直轴。文本样式工具允许选择字体大小，颜色和斜体/粗体变体。也可以选择文本的位置。

![](resources/images/data-visualizer/data-visualizer-text-styling-tool.png)

## 添加分配的类别 { #adding-assigned-categories }

分配的类别是一个组合维，表示与所选数据元素的类别组合相关的类别选项组合。可以通过从左侧维度菜单中将**分配的类别**维度拖动到可视化布局中来添加此维度：

![](resources/images/data-visualizer/data-visualizer-assigned-categories.png)

添加分配的类别的另一种方法是访问`数据`维度的上下文菜单中的**添加分配的类别**选项（不适用于`计量`，`年度`或`单个值`）。

## 添加更多轴 { #adding-more-axes }

当将数据与不同的测量比例组合在一起时，通过拥有多个轴，您将获得更有意义的可视化效果。对于`栏`，`栏`，`区域`和`线`，您可以通过单击`选项`对话框中的**系列标签**来实现。如果禁用该选项，请确保`数据`维度位于`系列`轴上，并且至少添加了两个项目。

有四个轴可用，两个在图表的左侧（轴 1 和 3），两个在右侧（轴 2 和 4）。
每个轴都有不同的颜色，图表项目将相应地着色。

注意：当使用多个轴时，其他选项选项卡中的某些选项（如`线`，`垂直（y）轴`和`颜色设置`）将被禁用。

![](resources/images/data-visualizer/data-visualizer-series-tab-multi-axis.png)

## 使用多种可视化类型 { #using-multiple-visualization-types }

可以将`柱形图`与`线形`项目组合在一起，反之亦然。这是通过单击`选项`对话框中的 **系列选项卡 **并更改 `可视化类型 `来完成的。也可以将其与使用多个轴组合（如上节所述）。

![](resources/images/data-visualizer/data-visualizer-series-tab-multi-axis-multi-type.png)

这将产生一个结合了`列`和`线`类型的图表。

![](resources/images/data-visualizer/data-visualizer-multi-type-chart.png)

## 数据钻探 { #data-drilling }

`数据透视表`可视化类型启用了此功能，并允许通过单击表中的值单元格来钻取数据。将打开一个包含各种选项的上下文菜单。

您可以按组织单位钻取数据，这意味着在组织单位树中上下浏览。数据钻取会影响布局区域中的当前尺寸选择。

![](resources/images/data-visualizer/data-visualizer-pt-drill.png)

## 管理保存的可视化 { #manage-saved-visualizations }

保存可视化文件可以方便以后查找。您也可以选择与其他用户共享或在仪表板上显示它们。

### 打开可视化 { #open-a-visualization }

1.  点击**文件** \> **打开**。

2.  在搜索字段中输入可视化的名称，或单击** <** and **> **箭头在不同页面之间导航。还可以使用右上角的相应菜单按类型和所有者过滤结果。

3.  单击您要打开的名称。

![](resources/images/data-visualizer/data-visualizer-open-dialog.png)

### 保存可视化 { #save-a-visualization }

1. a）单击**文件** \> **保存**。

2. 为您的可视化输入 **名称 **和 **描述 **。

3. 点击**保存**。 

![](resources/images/data-visualizer/data-visualizer-save-dialog.png)

### 重命名可视化 { #rename-a-visualization }

1.  点击**文件** \> **重命名**。

2.  输入新名称和/或描述。

3.  点击 **重命名 **。

![](resources/images/data-visualizer/data-visualizer-rename-dialog.png)

### 删除可视化 { #delete-a-visualization }

1.  点击**文件** \>  **删除**。

2.  点击**删除**。

### 获取可视化链接 { #get-the-link-to-the-visualization }

1. 点击**文件** \> **获取链接**。

2. 可以通过右键单击链接时打开的浏览器上下文菜单复制URL。

![](resources/images/data-visualizer/data-visualizer-delete-dialog.png)

## 可视化解释 { #visualization-interpretations }

查看保存的可视化文件时，可以通过单击右上角的“解释”按钮来扩展右侧的解释。还将显示可视化说明。说明支持RTF格式。

可以通过在右下角的文本字段中键入来添加新的解释。其他用户可以用`@ username`提及。首先输入` @`，再加上用户名或真实姓名的首字母，然后将显示匹配的用户列表。提及的用户将收到内部DHIS2消息以及解释或评论。解释也可以在 **仪表板 **应用中看到。

可以通过分别使用Markdown样式标记`*`和`_`分别代表**bold**和_italic_来用 **粗体**，_italic_设置文本格式（也提供键盘快捷键：`Ctrl `/ `Cmd `+`B`和`Ctrl` /`Cmd` +`I`）。支持有限的表情符号集，可通过键入以下字符组合之一来使用： `:)` `:-)` `:(` `:-(` `:+1` `:-1`. 。URL被自动检测并转换为可点击的链接。

要根据特定解释的日期查看可视化效果，请单击解释或它的`查看`按钮。这将重新生成具有相关日期的可视化文件，该日期显示在可视化文件标题旁边。单击`返回所有解释`将重新生成具有当前日期的可视化文件。

要订阅已保存的可视化，请单击右上角的响铃图标。每当其他用户喜欢/创建/更新此已保存的可视化中的解释时，您将收到内部消息。

![](resources/images/data-visualizer/data-visualizer-view-interpretation.png)

## 共享可视化 { #share-a-visualization }

可以通过单击 **File** \> **Share** 访问共享设置。更改要修改的用户组的共享设置，可用设置有：

-   **可以编辑和查看**：可以查看和编辑可视化。

-   **只能查看**：仅可以查看可视化。

-   **无访问权限**：无权访问可视化。此设置仅适用于**公共访问**和**外部访问**。

可以通过在`添加用户和用户组`下按名称搜索新用户来添加新用户。

![](resources/images/data-visualizer/data-visualizer-share-dialog.png)

## 下载 { #download }

可视化可以使用 **下载 **菜单下载。除`数据透视表`类型外，所有可视化类型均支持`图形`和`纯数据源`下载，可将其下载为`表格布局`和`纯数据源`。

### `图形`下载 { #graphics-download }

将图像（.png）或PDF（.pdf）文件下载到您的计算机。

### `表格布局`下载 { #table-layout-download }

将Excel（.xls），CSV（.csv）或HTML（.html）文件下载到您的计算机。

### `普通数据源`下载 { #plain-data-source-download }

您可以下载 JSON、XML、Excel 格式的可视化数据源，
具有不同标识方案的 CSV、JXRML 或原始数据 SQL 格式
（ID、代码和名称）。数据文档使用以下标识符
维度项目并在新的浏览器窗口中打开以显示
地址栏中对 Web API 的请求。这对
基于 DHIS2 Web API 的应用程序和其他客户端模块的开发人员
或者对于那些需要计划数据源的人，例如用于导入
进入统计包。

**可用格式**

| 格式 | 行动 | 描述 |
| --- | --- | --- |
| JSON格式 | 点击JSON | 根据ID，Code或Name属性下载JSON格式。 |
| XML格式 | 单击XML | 根据ID，Code或Name属性下载XML格式。 |
| 微软Excel | 单击Microsoft Excel | 根据ID，Code或Name属性下载Microsoft Excel格式。 |
| CSV | 点击CSV | 根据ID，代码或名称属性下载CSV格式。 |
| XML数据值集 | 单击高级> XML。 | 将原始数据值下载为XML，而不是沿各个维度聚合的数据。 |
| JSON数据值集 | 单击高级> JSON | 将原始数据值下载为JSON，而不是沿各个维度聚合的数据。 |
| JRXML | 单击高级> JRXML | 生成Jasper报告的模板，该模板可根据您的确切需求进行进一步定制，并用作DHIS 2中标准报告的基础。 |
| 原始数据SQL | 单击高级>原始数据SQL | 提供用于生成数据可视化的实际SQL语句。您可以将其用作Jasper报表中的数据源，或用作SQL视图的基础。 |

## 以地图查看可视化 { #see-visualization-as-map }

要查看可视化效果在地图上的外观，请在完成可视化效果构建后选择`打开为地图`可视化效果类型。

![](resources/images/data-visualizer/data-visualizer-open-as-map.png)

# 使用地图应用 { #using_maps }

## 关于地图应用 { #about_maps }

地图应用程序在 2.29 版中引入并作为替代
GIS 应用程序提供更直观和用户友好的界面。
2.34 版本的映射引擎基于 WebGL 技术，
能够同时在地图上显示数千个特征。

使用地图应用程序，您可以覆盖多个图层并从中选择
不同的底图。您可以创建区域和点的专题地图，
根据分类查看设施，并可视化集水区
每个设施。您可以为区域和点添加标签，并搜索
并使用各种标准进行过滤。您可以移动点并设置位置
在飞行中。地图可以保存为收藏夹并与其他用户共享
和组，或作为图像下载。

> **注意**
>
> 要在 **Maps** 应用程序中使用预定义图例，您需要先在 **Maintenance** 应用程序中创建它们。

![](resources/images/maps/maps_main.png)

-   工作区左侧的 **图层面板 **显示了当前地图的图层概览：

    -   随着图层的添加，使用 **(+) 添加图层** 按钮，它们在此面板中进行排列和管理。

    -    **底图 **始终显示在面板中。默认底图是OSM Light，默认情况下处于选中状态。 OpenStreetMap Details包含更多地图特征和地名。 Bing Maps提供了4种底图，替代了先前版本中提供的Google Maps。必应之路和必应之暗显示了道路，边界和地方。如果地图图层上的颜色较亮，请使用深色版本。 Bing航空和Bing航空标签shos卫星和详细的航空影像。通过选择所需的图像在它们之间切换。

    -   顶部图层面板右侧的小箭头按钮允许隐藏或显示面板。

<!-- end list -->

-   左上角的 **文件**按钮可用于打开和保存地图：

    -   新

        将清除所有现有地图图层以创建新地图。

    -   打开

        将显示一个对话框，其中包含现有地图的列表，这些地图将在其中打开，重命名，共享和删除。 _当前地图的标题显示在文件按钮上方的标题栏中_。

    -   保存

        会将所有更改保存到当前地图。

    -   另存为

        将使用新名称保存当前地图。

    -   改名

        允许您更改当前地图的名称和/或描述。

    -   翻译

        允许您翻译当前地图的名称和/或描述。

    -   分享

        将打开一个对话框，可以在其中与所有人或一组用户共享当前地图。

    -   获取链接

        将提供直接链接到当前地图。

    -   删除

        删除当前地图。

<!-- end list -->

-   文件按钮旁边的 **下载**按钮可让您将当前地图下载为PNG图像。

<!-- end list -->

-   右上角的**解释**按钮将在工作区的右侧打开一个解释面板。仅在保存了地图的情况下该按钮才可单击。

    -   **地图详细信息**显示有关当前地图的信息。

    -   **解释**允许您查看、添加、编辑和分享有关当前地图的解释。

<!-- end list -->

-   地图上的 **+** 和 **-** 按钮允许您分别放大和缩小地图。鼠标滚轮缩放是连续的，使我们能够将地图完美地适应您的内容。

-   使用**旋转地图**按钮（三角形箭头）可以旋转和倾斜地图，以增强数据视图。在移动鼠标时按下按钮（或键盘上的Control键）以更改地图视图。再次单击以重置视图。

-   **全屏**（四个箭头）允许您全屏查看地图。要退出全屏，请再次单击该按钮或键盘上的退出键。

*   **缩放到内容**（有界放大镜符号）会自动调整缩放级别和地图中心位置，以使地图上的数据成为焦点。

*   **搜索**（放大镜符号）允许搜索并跳转到地图上的某个位置。

*   使用**直尺**按钮，您可以测量地图上的距离和面积。

*   右键单击地图以显示该位置的经度和纬度。

**底图**

底图图层由图层面板中的图层 _cards_ 表示，例如
作为：

![](resources/images/maps/maps_basemap_card.png)

在底图卡的顶部，从左到右分别是：

-   所选底图的标题

-   折叠和展开底图卡的箭头符号

底图卡片的中间是可用底图的列表。这
当前底图突出显示。

底图卡的底部是：

-   用于切换图层可见性的眼睛符号

-   用于修改图层透明度的滑块

## 建立新地图 { #using_maps_create_map }

1.  在**应用**菜单中，单击**地图**。随即打开**DHIS2 Maps**窗口。

2.  单击左上角的 (+) 添加图层按钮。您将看到图层选择对话框：

    ![](resources/images/maps/maps_layer_selection.png)

3.  选择要添加到当前地图的图层。可能的选项是：

    -   [专题](#using_maps_thematic_layer)

    -   [事件](#using_maps_event_layer)

    -   [跟踪实体](#using_maps_tracked_entity_layer)

    -   [设施](#using_maps_facility_layer)

    -   [边界](#using_maps_boundary_layer)

    此外，Google Earth Engine 和其他服务还提供了几层：

    -   人口密度

    -   海拔

    -   温度

    -   沉淀

    -   土地覆盖

    -   夜间灯

    _Labels overlay_ 是在维护应用程序中定义的 [external layer](#using_maps_external_map_layers)。

## 管理主题层 { #using_maps_thematic_layer }

_专题图_代表地理分布的空间变化。
选择您想要的指标/数据元素、周期和
组织单位层面。如果您的数据库有坐标并聚合
这些组织单位的数据值，它们将出现在地图上。

> **注意**
>
> 您必须生成 DHIS2 分析表才能获得可用的聚合数据值。

![](resources/images/maps/maps_thematic_mapping.png)

专题图层由图层面板中的图层 _cards_ 表示，例如
作为：

主题卡的顶部从左到右分别是：

-   抓取字段，允许使用鼠标拖动和重新排序图层

-   与图层关联的标题和时期

-   折叠和展开主题卡片的箭头符号

主题卡的中间是一个图例，表示价值
显示在图层上的范围。

主题卡的底部从左到右分别是：

-   编辑（铅笔）按钮以打开图层配置对话框

-   用于切换图层可见性的眼睛符号

-   用于修改图层透明度的滑块

-   具有更多选项的更多操作（三个点）按钮：

    -   **数据表**切换按钮可显示或隐藏与图层关联的数据表

    -   **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

    -   **编辑图层**与上方的编辑按钮相同

    -   **移除图层**将从当前地图中移除该图层。

### 创建一个主题层 { #create-a-thematic-layer }

要创建事件层，请在**添加层**选择上选择**主题**。这将打开“事件”层配置对话框。

1.  在**数据**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_DATA.png)

    -   选择数据类型，然后分别选择组和目标元素。可用字段取决于所选项目的类型。

    -   从**汇总类型**字段中选择一个值，以将数据值显示在地图上。默认情况下，“按数据元素”处于选中状态。替代值是：计数；平均数;和;标准偏差方差;敏最大限度。另请参阅[聚合运算符] [Aggregation operators](https://dhis2.github.io/dhis2-docs/master/en/user/html/ch10s05.html#d0e8082)。

2.  在**期间**标签中

    ![](resources/images/maps/maps_thematic_layer_dialog_PERIOD.png)

    -   选择专题数据映射的时间跨度。您可以选择相对周期或固定周期。

        -   相对时期

            在**期间类型**字段中，选择**相对**，然后在**期间**字段中选择一个相对期间，例如**去年**或**过去12个月**。

            可以在**系统设置**应用中设置**分析的默认相对周期**。

            如果您选择涵盖多年/月/周/日的相对时期，则图层可以显示为

            -   单（合计）

                显示所选相对期间的汇总值（默认）。

            -   时间线

                包括一个时间线，让您可以逐步了解各个时期。同一地图只能添加一个时间线图层。

            -   拆分地图视图

                显示多张地图，让您并排比较不同时期。支持 12 项或以下的相对期间。不能与其他图层类型组合。

        -   固定期间

            在**期间类型**字段中，选择期间长度，然后在**期间**字段中选择目标。

        -   开始/结束日期

            在**期间类型**字段中，选择**开始/结束日期**，然后填写开始日期和结束日期。

3.  在**ORG UNITS**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_ORG_UNITS.png)

    -   选择要包含在图层中的组织单位。可以选择

        -   一个或多个特定的组织单元、层次结构中的组织单元级别、组织单元组，或

        -   组织单位层次结构中相对于用户的相对级别。通过选择**用户组织单位**，对于组织单位层次结构中不同级别的用户，地图数据将以不同的方式显示。

4.  在**过滤器**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_FILTER.png)

    -   单击添加过滤器并选择可用数据项以将新过滤器添加到数据集。

        -   从下拉框中选择数据维度。您可以使用搜索字段减少显示的维数。单击名称以选择维度。

        -   选择维度后，您将获得第二个包含维度项目的下拉菜单。检查要包含在过滤器中的项目。

        可以添加多个过滤器。单击过滤器右侧的垃圾桶按钮将其删除。

5.  在**样式**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_STYLE.png)

    -   选择**钟形**或**气泡图**。

        -   Choropleth 将根据数据值为每个组织单位形状分配颜色。如果数据是标准化的（人均），这是推荐的技术。

        -   气泡图将数据值显示为比例圆圈。如果数据未标准化（绝对数字），请使用此技术。圆圈位于每个组织单位的中心。

    -   为比例圆或点设施设置**低半径**和**高半径**。圆将根据数据值在低半径和高半径之间缩放。半径必须在0到50像素之间。

    -   **显示标签**：允许在图层上显示组织单位名称。可以在此处修改字体大小、粗细、样式和颜色。

    -   **不显示数据**：默认情况下，缺少数据值的组织单位不会显示在地图上。如果您想用颜色显示它们，请选中此框。单击颜色进行更改。

    -   选择图例类型：

        -   **自动颜色图例**：应用程序将根据您选择的分类方法、类数和色标为您创建一个图例。将**分类**设置为：

            -   等间隔

                每个间隔的范围将是（最高数据值-最低数据值/类数）

            -   均数

                图例创建者将尝试平均分配组织单位。

        -   **预定义的颜色图例**：在预定义的图例之间进行选择。

        -   **单色图例**：选择气泡或圆圈的颜色。仅适用于气泡图。

6.  点击**添加图层**。

### 修改主题层 { #modify-a-thematic-layer }

1.  在图层面板中，单击专题图层卡片上的编辑（铅笔）图标。

2.  根据需要修改任何选项卡上的设置。

3.  点击**更新图层**。

### 筛选主题层中的值 { #filter-values-in-a-thematic-layer }

专题图层有一个 **data table** 选项，可以打开或
从专题图层卡上关闭。

![](resources/images/maps/maps_thematic_layer_data_table.png)

数据表显示构成主题层的数据。

-   单击标题将根据该列对表格进行排序；在上升和下降之间切换。

-   在标题下方的过滤器字段中输入文本或表达式会将这些过滤器应用于数据，并且显示将根据过滤器进行调整。过滤器的应用如下：

    -   名称

        按包含给定文本的名称过滤

    -   值

        按给定的数字和/或范围过滤值，例如：2,\>3&\<8

    -   传说

        按图例过滤并包含给定的文本

    -   范围

        按包含给定文本的范围过滤

    -   水平

        按数字和/或范围过滤级别，例如：2，\> 3＆\ <8

    -   父母

        按包含给定文本的父项名称过滤

    -   ID

        按包含给定文本的ID进行过滤

    -   类型

        按包含给定文本的GIS显示类型过滤

    -   颜色

        按包含给定文本的颜色名称过滤

> **注意**
>
> 数据表过滤器是临时的，不会与地图图层一起保存为收藏夹的一部分。

### 搜索组织单位 { #search-for-an-organisation-unit }

数据表中的 NAME 过滤器字段提供了一种有效的方法
搜索单个组织单位。

### 在组织层次结构之间导航 { #navigate-between-organisation-hierarchies }

当地图上有可见的组织单位时，您可以轻松地
在不使用级别/父级的情况下在层次结构中上下导航
用户界面。

1.  右键单击组织单位之一。

2.  选择**向上钻取一级**或**向下钻取一级**。

    如果您在最低级别或如果在下面的级别上没有可用的坐标，则会禁用向下钻取选项。同样，从最高级别禁用向上钻取选项。

### 删除主题层 { #remove-thematic-layer }

要清除主题层中的所有数据：

1.  在左侧的图层卡中，单击_more actions_（三个点）图标，然后在**删除图层**上单击。

    该图层将从当前地图中删除。

## 管理事件层 { #using_maps_event_layer }

事件层显示注册事件的地理位置
在 DHIS2 跟踪器中。只要事件具有关联的点或多边形
坐标，您可以使用此图层从聚合的
显示在专题层中的数据给底层个人
事件或案例。

您还可以在设施或在
边界水平。您可以使用事件数据通过专题图层执行此操作
项目。当您只有 Org 的坐标时，这很有用
记录事件的单位。

![](resources/images/maps/maps_event_layer.png)

事件层由层面板中的层 _cards_ 表示，例如
作为：

在事件卡的顶部，从左到右分别是：

-   抓取字段，允许使用鼠标拖动和重新排序图层

-   与图层关联的标题和时期

-   折叠和扩展事件卡的箭头符号

在事件卡的中间是一个说明样式的图例
层。

在事件卡的底部，从左到右分别是：

-   编辑（铅笔）按钮以打开图层配置对话框

-   用于切换图层可见性的眼睛符号

-   用于修改图层透明度的滑块

-   具有更多选项的更多操作（三个点）按钮：

    -   **数据表**切换按钮可显示或隐藏与图层关联的数据表

    -   **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

    -   **编辑图层**与上方的编辑按钮相同

    -   **移除图层**将从当前地图中移除该图层。

### 创建一个事件层 { #maps_create_event_layer }

要创建事件层，请在**添加层**选择上选择**事件**。这将打开事件层配置对话框。

1.  在**数据**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_DATA.png)

    -   选择一个项目，然后选择一个项目阶段。仅在选择项目后才显示**阶段**字段。

        如果所选程序只有一个阶段可用，则自动选择阶段。

    -   从**坐标字段**中为地图上显示的位置选择一个值。默认情况下，选择“事件位置”。根据属于程序的数据元素或属性，还可以使用其他坐标，例如“住所位置”。

    -   默认情况下，所有带有坐标的事件都显示在地图上。使用**事件状态**字段仅显示具有以下一种状态的事件：有效，已完成，计划，过期或已跳过。

2.  在**期间**标签中

    ![](resources/images/maps/maps_event_layer_dialog_PERIOD.png)

    -   选择事件发生的时间跨度。您可以选择固定期间或相对期间。

        -   相对时期

            在 **Period** 字段中，选择一个相对时期，例如 **This month** 或 **Last year**。

            可以在**系统设置**应用中设置**分析的默认相对周期**。

        -   固定期间

            在**期间**字段中，选择**开始/结束日期**，然后填写开始日期和结束日期。

3.  在**ORG UNITS**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_ORG_UNITS.png)

    -   选择要包含在图层中的组织单位。可以选择

        -   一个或多个特定的组织单位，或

        -   组织单位层次结构中相对于用户的相对级别。通过选择**用户组织单位**，对于组织单位层次结构中不同级别的用户，地图数据将以不同的方式显示。

4.  在**过滤器**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_FILTER.png)

    -   单击添加过滤器并选择可用数据项以将新过滤器添加到数据集。

        -   对于 _option set_ 类型的数据项，您可以使用向下箭头从下拉框中选择任何选项，或者直接在框中开始输入以过滤选项。

        -   对于_number_类型的数据项，可以选择等于、不等于、大于或小于等运算符。

        -   对于 _boolean_ 类型的数据项（是/否），您可以选中该框是否条件应为有效或为真。

        -   对于_text_类型的数据项，您将有两种选择：**包含**表示查询将匹配包含您的搜索值的所有值，**是精确**表示仅与搜索查询完全相同的值将被退回。

        可以添加多个过滤器。单击过滤器右侧的垃圾桶按钮将其删除。

5.  在**样式**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_STYLE.png)

    -   选择**分组事件**以将附近的事件（集群）分组，或选择**查看所有事件**以单独显示事件。

    -   为事件或聚类点选择一种**颜色**。

    -   为事件选择**半径**（1到20之间）。

    -   选择**显示缓冲区**以在每个事件周围显示可视缓冲区。缓冲区的半径可以在这里修改。仅当您选择上面的**查看所有事件**时，此选项才可用。

    -   选择**按数据元素样式 **以根据数据值为事件着色。如果您还选择对事件进行分组，则用户将显示为小的甜甜圈图，以显示数据值的分布。这些选项因不同的数据类型而异：

        -   **选项集**：为选项集中的每个选项选择一种颜色。您可以在维护应用程序中为选项设置默认颜色。

        -   **数字**：您可以使用自动或预定义的图例以 [与专题图层相同的方式](#using_maps_thematic_layer_style) 设置数字数据元素的样式。

        -   **布尔值**：为真/是选择一种颜色，为假/否选择另一种颜色。

6.  点击**添加图层**。

### 修改事件层 { #modify-an-event-layer }

1.  在图层面板中，单击事件图层卡片上的编辑（铅笔）图标。

2.  根据需要修改 DATA、PERIOD、FILTER、ORG UNIT 和 STYLE 选项卡上的设置。

3.  点击**更新图层**。

### 列出和过滤事件 { #listing-and-filtering-events }

事件层有一个 **data table** 选项，可以打开或
从事件层卡上关闭。

![](resources/images/maps/maps_event_layer_data_table.png)

数据表显示构成事件层的数据。

-   单击标题将根据该列对表格进行排序；在上升和下降之间切换。

-   在标题下方的过滤器字段中输入文本或表达式会将这些过滤器应用于数据，并且显示将根据过滤器进行调整。过滤器应用如下：

    -   ID

        按包含给定文本的事件ID进行过滤

    -   组织单位

        按包含给定文本的组织单位名称过滤

    -   活动时间

        按包含给定文本的事件时间过滤

    -   类型

        按包含给定文本的GIS显示类型过滤

    -   **按数据元素设置样式**：如果事件由数据元素（例如性别）设置样式，则可以过滤数据值和颜色。

    -   **在报告中显示**：选中以显示在报告中的数据元素将显示在单独的列中（请参阅下文如何添加它们）。

    -   数字数据值可以按给定的数字和/或范围过滤，例如：2,\>3&\<8

> **注意**
>
> 数据表过滤器是临时的，不会与地图图层一起保存为收藏夹的一部分。

### 修改事件数据表和弹出窗口中的信息 { #modify-information-in-event-data-table-and-popups }

您可以修改事件弹出窗口中显示的信息。

![](resources/images/maps/maps_eventlayer_eventinfopopup.png)

1.  打开**维护**应用程序。

2.  选择**程序**。

3.  单击要修改的程序，然后选择** 2分配数据元素**。

4.  对于要在弹出窗口中显示的每个数据元素，选择相应的**在报告中显示**。

5.  点击**保存**。 

### 下载原始事件层数据 { #download-raw-event-layer-data }

可以以GeoJSON格式下载事件层的原始数据，以便在桌面GIS软件（例如[QGIS]https://www.qgis.org/）中进行更高级的地理分析和处理。下载的数据包括所有单独的事件，作为GeoJSON功能，包括为**在报告中显示**选择的每个数据元素的属性。

![](resources/images/maps/maps_data_download_dialog.png)

-   在左侧的图层卡中，点击_more actions_（三个点）图标，然后点击**下载数据**

-   选择** ID格式**用作下载的GeoJSON文件中数据元素值的键。共有三个选项：

    -   ** ID **-使用数据元素的唯一ID
    -   **名称**-使用数据元素的人性化名称（翻译）
    -   **代码**-使用数据元素的代码

-   选择是否对其他事件属性（例如程序阶段，纬度，经度，事件数据以及组织单位ID，名称和代码）**使用人类可读的键**。如果**未**选中此选项，则这些值将是计算机友好的ID，而不是人类可读（和翻译）的名称。

-   单击**下载**按钮以生成和下载GeoJSON文件。数据将从DHIS2服务器请求并由地图应用程序处理。此操作可能需要几分钟才能完成。

-   一旦下载了GeoJSON文件，就可以将其导入大多数标准GIS软件应用程序中。

>请注意，下载的数据不包含样式信息，因为GeoJSON格式本身不支持它。可以选择使用每个要素的属性在外部GIS应用程序中重新创建样式。

### 清除事件层 { #clear-event-layer }

要清除地图中的所有事件层数据：

1.  在左侧的图层卡中，单击_more actions_（三个点）图标，然后在**删除图层**上单击。

    该图层将从当前地图中删除。

## 管理跟踪的实体层 { #using_maps_tracked_entity_layer }

被追踪实体图层显示被追踪的地理位置
在 DHIS2 中注册的实体。前提是被跟踪的实体有
关联的点或多边形坐标，您可以在地图上探索这些。

![](resources/images/maps/maps_tracked_entity_layer.png)

跟踪实体图层由图层面板中的图层卡片表示
如：

沿着跟踪实体卡的顶部，从左到右分别是：

-   允许使用鼠标拖动和重新排序图层的抓取字段。

-   与图层关联的标题和时期。

-   箭头符号，用于折叠和展开被跟踪的实体卡。

被追踪实体卡片的中间是一个图例，表明
图层样式。

跟踪实体卡的底部从左到右分别是：

-   编辑（铅笔）按钮以打开图层配置对话框

-   用于切换图层可见性的眼睛符号

-   用于修改图层透明度的滑块

-   具有更多选项的更多操作（三个点）按钮：

    -   **编辑图层**与上方的编辑按钮相同

    -   **移除图层**将从当前地图中移除该图层。

### 创建一个跟踪实体层 { #maps_create_tracked_enity_layer }

要创建跟踪实体层，请在**添加层**选择上选择**跟踪实体**。这将打开跟踪的实体层配置对话框。

1.  在**数据**标签中：

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_DATA.png)

    -   选择要在地图上显示的**跟踪实体类型**。

    -   选择被跟踪实体所属的**程序**。

    -   使用**计划状态**字段选择要跟踪的实体的注册状态，包括：全部，活动，已完成或已取消。

    -   设置给定程序的被跟踪实体的**跟踪**状态。

2.  在**关系**标签中

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_RELATIONSHIPS.png)

    > **Caution**
    >
    > Displaying tracked entity relationships in Maps is an experimental feature

    -   如果选择了跟踪的实体类型，则可以选中**显示跟踪的实体关系**复选框

    -   选中后，您可以从下拉列表中选择要显示在地图上的关系类型。仅来自所选“跟踪的实体”类型的关系可用。

3.  在**期间**标签中

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_PERIOD.png)

    -   如果未选择任何程序，您可以设置上次更新跟踪实体的开始和结束日期。

    -   如果选择了某个计划，您可以设置跟踪实体最后一次更新的时间段，或者它们在该计划中注册或注册的时间。

4.  在**ORG UNITS**标签中：

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_ORG_UNITS.png)

    -   选择要包含在图层中的组织单位。您有 3 种选择模式：

        -   **仅选定**：仅包括属于选定组织单位的跟踪实体。

        -   **选定及以下**：包括在选定组织单位中和正下方的跟踪实体。

        -   **选定和以下所有**：包括在选定组织单位中和所有以下的跟踪实体。

5.  在**样式**标签中：

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_STYLE.png)

    -   为跟踪的实体点和多边形选择一种**颜色**。

    -   为点选择**点大小**（半径在 1 到 20 之间）。

    -   选择**显示缓冲区**以在每个被跟踪实体周围显示可视缓冲区。可以在此处修改以米为单位的缓冲距离。

    -   如果在关系选项卡上选择了关系类型，则可以为关系和相关的跟踪实体实例选择**颜色**，**点大小**和**线颜色**

6.  点击**添加/更新图层**。

### 修改跟踪的实体层 { #modify-a-tracked-entity-layer }

1.  在图层面板中，单击被跟踪实体图层卡上的编辑（铅笔）图标。

2.  根据需要修改 DATA、PERIOD、ORG UNIT 和 STYLE 选项卡上的设置。

3.  点击**更新图层**。

### 清除跟踪的实体层 { #clear-a-tracked-entity-layer }

要从地图上清除跟踪的实体层：

1.  在左侧的图层卡中，单击_more actions_（三个点）图标，然后在**删除图层**上单击。

    该图层将从当前地图中删除。

## 管理设施层 { #using_maps_facility_layer }

设施层显示代表设施类型的图标。
多边形不会显示在地图上，因此请确保选择一个
具有设施的组织单位级别。

_多边形是表示国家，地区或公园的地图上的封闭区域_。

![](resources/images/maps/maps_facility_layer.png)

设施层由层面板中的层 _cards_ 表示，例如
作为：

在设施卡的顶部，从左到右分别是：

-   抓取字段，允许使用鼠标拖动和重新排序图层

-   **设施**标题

-   用于切换图层可见性的眼睛符号

-   折叠和扩展设施卡的箭头符号

在设施卡的中间是一个指示组的图例
设置表示。

设施卡的底部从左到右分别是：

-   编辑（铅笔）按钮以打开图层配置对话框

-   用于修改图层透明度的滑块

-   具有更多选项的更多操作（三个点）按钮：

    -   **数据表**切换按钮可显示或隐藏与图层关联的数据表

    -   **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

    -   **编辑图层**与上方的编辑按钮相同

    -   **移除图层**将从当前地图中移除该图层。

### 创建设施层 { #create-a-facility-layer }

要创建设施层，请在“添加层**选择上选择**设施**。这将打开“设施层**配置对话框。

1.  在**组集**标签中：

    ![](resources/images/maps/maps_facility_layer_dialog_GROUPSET.png)

    -   从为您的DHIS2实例定义的组织单位组集的列表中选择一个**组集**。

2.  在**组织单位**标签中

    ![](resources/images/maps/maps_facility_layer_dialog_ORG_UNITS.png)

    -   从右侧的选择字段中选择组织单位级别和/或组。

    -   选择要包含在图层中的组织单位。可以选择

        -   一个或多个特定的组织单位，或

        -   组织单位层次结构中相对于用户的相对级别。通过选择**用户组织单位**，对于组织单位层次结构中不同级别的用户，地图数据将以不同的方式显示。

3.  在**样式**标签中：

    ![](resources/images/maps/maps_facility_layer_dialog_STYLE.png)

    -   选择您想要应用于设施的任何样式。

        -   显示标签

            允许在图层上显示标签。字体大小、粗细和颜色可以在这里修改。

        -   显示缓冲区

            允许在每个设施周围的图层上显示视觉缓冲区。可以在此处修改缓冲区的半径。

4.  点击**添加图层**。

### 创建或修改设施层 { #create-or-modify-a-facility-layer }

1.  在图层面板中，单击设施图层卡上的编辑（铅笔）图标。

2.  根据需要修改 GROUP SET、ORGANIZATION UNITS 和 STYLE 选项卡上的设置。

3.  点击**更新图层**。

### 过滤设施层中的值 { #filter-values-in-a-facility-layer }

设施层有一个**数据表**选项，可以打开或
离设施层卡。

![](resources/images/maps/maps_facility_layer_data_table.png)

数据表显示构成设施层的数据。

-   单击标题将根据该列对表格进行排序；在上升和下降之间切换。

-   在标题下方的过滤器字段中输入文本或表达式会将这些过滤器应用于数据，并且显示将根据过滤器进行调整。过滤器应用如下：

    -   名称

        按包含给定文本的名称过滤

    -   ID

        按包含给定文本的ID进行过滤

    -   类型

        按包含给定文本的GIS显示类型过滤

> **注意**
>
> 数据表过滤器是临时的，不会与地图图层一起保存为收藏夹的一部分。

### 搜索设施 { #search-for-a-facility }

数据表中的 NAME 过滤器字段提供了一种有效的方法
寻找个人设施。

### 删除设施层 { #remove-facility-layer }

要清除设施层中的所有数据：

1.  在左侧的图层卡中，单击_more actions_（三个点）图标，然后在**删除图层**上单击。

    该图层将从当前地图中删除。

### 分层管理设施 { #manage-facilities-in-a-layer }

您可以在**设施**，**边界**和**主题**层中使用设施。

#### 搬迁设施 { #relocate-a-facility }

1.  右键单击设施，然后单击**重新定位**。

2.  将光标放在新位置。

    新坐标将永久存储。这不能被撤消。

#### 交换设施的经度和纬度 { #swap-longitude-and-latitude-of-a-facility }

1.  右键单击设施，然后单击**交换经度/纬度**。

    如果用户在创建组织单位时反转纬度和经度坐标，这很有用。

#### 显示设施信息 { #display-facility-information }

您可以查看管理员设置的组织单位信息为
如下：

 <table>
 <caption>查看组织单位信息</caption>
 <colgroup>
 <col style="width: 40%" />
 <col style="width: 59%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th>功能</th>
 <th>操作</th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p>查看当前期间的信息</p> </td>
  <ol type="1"><td>
 <li><p>单击设施。 </p></li>
 </ol> </td>
 </tr>
 <tr class="even">
 <td> <p>查看选定时间段的信息 </p></td>
 <td> <ol type="1">
  <li><p>右键单击设施，然后单击<strong>显示信息</strong></p>
</li>  
<li><p> 在<strong>基础数据</strong>部分中，选择一个周期。 </p></li>
 </ol>
 <blockquote>
 <p><strong>注意</strong></p>
 <p>您可以在<strong>系统设置</strong>应用中配置显示的基础数据。 </p>
 </blockquote> </td>
 </tr>
 </tbody>
 </table>

## 管理边界层 { #using_maps_boundary_layer }

边界层显示您的边界和位置
组织单位。如果您处于离线状态，此层特别有用
并且无法访问背景地图。

![](resources/images/maps/maps_bound_layers.png)

边界层由层面板中的层 _cards_ 表示，例如
作为：

边界卡的顶部从左到右分别是：

-   抓取字段，允许使用鼠标拖动和重新排序图层

-   **边界**标题

-   箭头符号，用于折叠和展开边界卡

边界卡的底部从左到右分别是：

-   编辑（铅笔）按钮以打开图层配置对话框

-   用于切换图层可见性的眼睛符号

-   用于修改图层透明度的滑块

-   具有更多选项的更多操作（三个点）按钮：

    -   **数据表**切换按钮可显示或隐藏与图层关联的数据表

    -   **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

    -   **编辑图层**与上方的编辑按钮相同

    -   **移除图层**将从当前地图中移除该图层。

### 创建边界层 { #create-a-boundary-layer }

要创建边界层，请在**添加层**选择上选择**边界**。这将打开边界层配置对话框。

1.  在**组织单位**标签中

    ![](resources/images/maps/maps_boundary_layer_dialog_ORG_UNITS.png)

    -   从右侧的选择字段中选择组织单位级别和/或组。

    -   选择要包含在图层中的组织单位。可以选择

        -   一个或多个特定的组织单位，或

        -   组织单位层次结构中相对于用户的相对级别。通过选择**用户组织单位**，对于组织单位层次结构中不同级别的用户，地图数据将以不同的方式显示。

2.  在**样式**标签中：

    ![](resources/images/maps/maps_boundary_layer_dialog_STYLE.png)

    -   选择要应用于边界的任何样式。

        -   显示标签

            允许在图层上显示标签。字体大小和粗细可以在这里修改。

        -   点半径

            当点类型元素（例如设施）出现在边界层上时，设置基本半径。

3.  点击**添加图层**。

### 修改边界层 { #modify-a-boundary-layer }

1.  在图层面板中，单击边界图层卡上的编辑（铅笔）图标。

2.  根据需要修改 ORGANIZATION UNITS 和 STYLE 选项卡上的设置。

3.  点击**更新图层**。

### 过滤边界层中的值 { #filter-values-in-a-boundary-layer }

边界层有一个**数据表**选项，可以从边界层卡上打开或关闭。

![](resources/images/maps/maps_bound_layer_data_table.png)

数据表显示构成边界层的数据。

-   单击标题将根据该列对表格进行排序；在上升和下降之间切换。

-   在标题下方的过滤器字段中输入文本或表达式会将这些过滤器应用于数据，并且显示将根据过滤器进行调整。过滤器应用如下：

    -   名称

        按包含给定文本的名称过滤

    -   水平

        按数字和/或范围过滤级别，例如：2，\> 3＆\ <8

    -   父母

        按包含给定文本的父项名称过滤

    -   ID

        按包含给定文本的ID进行过滤

    -   类型

        按包含给定文本的GIS显示类型过滤

> **注意**
>
> 数据表过滤器是临时的，不会与地图图层一起保存为收藏夹的一部分。

### 搜索组织单位 { #search-for-an-organisational-unit }

数据表中的 NAME 过滤器字段提供了一种有效的方法
搜索边界中显示的单个组织单位
层。

### 在组织层次结构之间导航 { #navigate-between-organisation-hierarchies }

您可以在层次结构中修改边界层的目标，而无需
使用级别/父用户界面。

1.  用鼠标右键单击边界之一。

2.  选择**向上钻取一级**或**向下钻取一级**。

    如果您处于最低级别，则会禁用向下钻取选项。同样，从最高级别禁用向上钻取选项。

### 移除边界层 { #remove-boundary-layer }

要清除边界层中的所有数据：

1.  在左侧的图层卡中，单击_more actions_（三个点）图标，然后在**删除图层**上单击。

    该图层将从当前地图中删除。

## 管理地球引擎层 { #using_maps_gee }

![](resources/images/maps/maps_earth_eng_layer.png)

Google Earth Engine图层可让您显示卫星图像和
Google庞大目录中的地理空间数据集。这些层很有用
结合主题和事件层以增强分析。的
支持以下层：

-   人口密度估计值与国家总数调整以匹配联合国人口划分估计值。 100 x 100 m 网格单元中的人口（从 2010 年开始）。

-   海拔高度。您可以调整最小值和最大值，以便更好地代表您所在地区的地形。

-   温度：从卫星收集的地表温度。空白点将出现在持续云层覆盖的区域。

-   从地面卫星和气象站收集的降水。这些值在 5 天内以毫米为单位。每月更新一次，在下个月的第三周。

-   土地覆盖：从卫星收集的17种不同的土地覆盖类型。

-   夜间灯光：来自城市、城镇和其他具有持续照明的地点的灯光，包括气体耀斑（从 2013 年开始）。

### 创建地球引擎图层 { #create-an-earth-engine-layer }

要创建地球引擎图层，请从**添加图层**选择中选择所需的图层。这将打开图层配置对话框。

1.  在**样式**标签中

    ![](resources/images/maps/maps_ee_layer_dialog_POPULATION.png)

    -   修改特定于图层类型的参数。

    -   根据需要调整图例范围，步长和颜色。

2.  点击**添加图层**。

## 添加外部地图图层 { #using_maps_external_map_layers }

外部地图图层表示为：

-   底图

    这些可在图层面板的**底图**卡中找到，并被选择为其他任何底图。

-   叠加层

    这些在**添加图层**选择中可用。与底图不同，可以将叠加层放置在任何其他叠加层的上方或下方。

叠加层由层中的附加层_cards_表示
面板如：

覆盖卡的顶部从左到右分别是：

-   抓取字段，允许使用鼠标拖动和重新排序图层

-   外部地图图层的标题

-   折叠和展开覆盖卡的箭头符号

覆盖卡的底部从左到右分别是：

-   用于修改图层透明度的滑块

-   删除（垃圾桶）图标，用于从当前专题图中删除图层。

以下是一些外部层的示例：

![](resources/images/maps/maps_black_basemap_and_nighttime_lights.png)

![](resources/images/maps/maps_terrain_imagery.png)

![](resources/images/maps/maps_aerial_imagery.png)

## 文件菜单 { #using_maps_file_menu }

使用**文件”菜单**来管理您的地图。在打开或保存地图之前，将禁用几个菜单项。

保存您的地图可以轻松地在以后恢复它们。它还给你
有机会与其他用户分享它们作为解释或
把它放在仪表板上。您可以保存所有类型的图层配置
作为最爱。

### 建立新地图 { #create-a-new-map }

点击**文件** \> **新建**。

注意！这将清除您当前拥有的地图图层，而不进行保存。

### 开启新地图 { #open-a-new-map }

1.  点击**文件** \> **打开**。将打开一个对话框，其中包含地图列表。

2.  查找您要打开的收藏夹。您可以使用\ < and \>或搜索字段来查找已保存的地图。该列表将根据您输入的每个字符进行过滤。您可以通过选择**显示全部**，**由我创建**或**由其他人创建**来过滤列表。

3.  点击要打开的地图的名称。

### 保存地图 { #save-a-map }

创建地图后，可以方便地将其保存以备后用：

1.  单击**文件** \> **保存**。

2.  首次保存地图时输入**名称**（必填）和**描述**（可选）。

3.  点击**保存**。

### 保存地图副本 { #save-a-copy-of-a-map }

1.  单击**文件** \> **另存为... **

2.  输入地图的**名称**（必填）和**描述**（可选）。

3.  点击**保存**。

### 重命名地图 { #rename-a-map }

1.  点击**文件** \> **重命名**。

2.  为您的地图输入新的**名称**和/或**描述**。

3.  点击**重命名**。地图已更新。

### 翻译地图 { #translate-a-map }

1.  点击**文件** \>**翻译**。

2.  选择您的翻译的**地方语言**（语言）。

3.  输入翻译后的**名称**和**说明**。原始文本将显示在该字段下方。

4.  点击**保存**。

### 修改地图的共享设置 { #modify-sharing-settings-for-a-map }

创建并保存地图后，您可以与以下人员共享地图
每个人或一个用户组。要修改共享设置：

1.  点击**文件** \>**共享**。共享设置对话框打开。

2.  在文本框中，搜索您要与之共享最爱的用户或组的名称并选择它。

    所选的用户或组将添加到收件人列表中。

    重复该步骤以添加更多用户组。

3.  如果要允许外部访问，请选择相应的框。

4.  对于每个用户组，选择一个访问设置。选项包括：

    -   无（仅适用于默认组，因为它们无法删除）

    -   可以查看

    -   可以编辑和查看

5.  单击**关闭**以关闭对话框。

### 获取地图链接 { #get-the-link-to-a-map }

1.  点击**文件** \> **获取链接**。将打开一个链接对话框。

2.  复制链接。

### 删除地图 { #delete-a-map }

1.  点击**文件** \>**删除**。显示确认对话框。

2.  单击 **DELETE** 以确认您要删除收藏夹。您的地图将被删除，图层将从视图中清除。

## 地图解译 { #mapsInterpretation }

解释是对给定时间段内地图的描述。此信息在“仪表板应用程序”中可见。单击工作区右上方的**解释”**以打开**解释**面板。仅在保存了地图的情况下，该按钮才可单击。

![](resources/images/maps/maps_interpretations_panel.png)

### 查看基于相对期间的解释 { #view-interpretations-based-on-relative-periods }

要查看相对时期的解释，例如一年前：

1.  用解释打开收藏夹。

2.  单击工作区右上方的**解释**以打开解释面板。

3.  单击解释。您的地图会根据创建解释的时间显示数据和日期。要查看其他解释，请单击它们。

### 为地图写解释 { #write-interpretation-for-a-map }

要创建解释，您首先需要创建地图并保存。
如果您与其他人分享了您的地图，您的解释
write 对那些人是可见的。

1.  用解释打开收藏夹。

2.  单击工作区右上方的**解释**以打开解释面板。

3.  对于对收藏夹具有读取权限的用户，将出现一个带有占位符“写一个解释”的文本字段。

4.  在文本字段中，输入评论，问题或解释。您也可以使用' @username'提及其他用户。首先输入' @'，再加上用户名或真实姓名的首字母，然后出现一个提述栏，以显示可用的用户。提及的用户将收到内部DHIS2消息以及解释或评论。您可以在**仪表板应用程序**中查看解释。

5.  如果您希望您的解释与地图具有相同的共享设置，请单击**保存**。

    如果要更改共享设置（请参阅下文）以进行解释，请单击**保存并共享**。

### 更改解释的共享设置 { #change-sharing-settings-for-an-interpretation }

1.  单击一个解释（请参阅上面的查看解释）。

2.  单击解释下方的**共享**。共享设置对话框打开。

3.  搜索并添加要与之共享地图的用户和用户组。

4.  更改要修改的用户的共享设置：

    -   **可以编辑和查看**：每个人都可以查看和编辑对象。

    -   **只能查看**：每个人都可以查看对象。

    -   **无权访问**：公众无权访问该对象。此设置仅适用于公共访问。

5.  共享设置更新后，单击**关闭**。

## 将地图另存为图像 { #using_maps_image_export }

您可以通过单击顶部菜单中的“下载”按钮将地图下载为图像

![](resources/images/maps/maps_download.png)

Internet Explorer 或 Safari 不支持地图下载，我们建议您
使用谷歌浏览器或火狐浏览器。

1.  选择是否要包含地图名称。此选项仅在保存地图时可用。

2.  选择是否要包含地图图例。您可以将图例放置在地图的 4 个角之一。

3.  点击**下载**以下载地图。

## 搜索位置 { #using_maps_search }

地点搜索功能可让您搜索几乎任何位置
或地址。此功能可用于定位例如
地图上的地点、设施、村庄或城镇。

![](resources/images/maps/maps_place_search.png)

1.  在“地图”窗口的右侧，单击放大镜图标。

2.  输入您要查找的位置。

    键入时会显示匹配位置的列表。

3.  从列表中选择一个位置。大头针指示地图上的位置。

## 测量地图中的距离和面积 { #using_maps_measure_distance }

1.  在地图的左上角，将光标放在**测量距离和面积**（标尺）图标上，然后单击**创建新测量**。

2.  在地图上添加点。

3.  点击**完成测量**。

![](resources/images/maps/maps_measure_distance.png)

## 获取任意位置的纬度和经度 { #using_maps_latitude_longitude }

右键点击地图上的一个点，然后选择**显示经度/纬度**。值显示在弹出窗口中。

## 也可以看看 { #see-also }

-   [管理图例](https://docs.dhis2.org/master/en/user/html/manage_legend.html)

# 分析数据透视表中的数据 { #pivot }

## 关于数据透视表应用 { #pivot_about }

借助**数据透视表**应用，您可以基于DHIS2中的所有可用数据维度创建数据透视表。数据透视表是用于数据分析的动态工具，可让您根据数据的维度汇总和排列数据。 DHIS2中的数据维度示例如下：

-   数据维度本身（例如数据元素、指标和事件）

-   时间段（代表数据的时间段）

-   组织层次结构（表示数据的地理位置）

从这些维度中，您可以自由选择要包含在数据透视表中的_维度项目_。您可以使用组集功能在 DHIS2 中创建其他维度。这允许不同的聚合途径，例如按“合作伙伴”或设施类型的聚合。

数据透视表可以在 _columns_、_rows_ 和 _filters_ 上排列数据维度。当您在列上放置数据维度时，数据透视表将为每个维度项显示一列。如果您在列上放置多个数据维度，则数据透视表会为选定维度中项目的所有组合显示一列。当您将数据维度放在行上时，数据透视表会以类似的方式为每个维度项目显示一行。您选择作为过滤器的维度不会包含在数据透视表中，但会根据选定的过滤器项目聚合和过滤表数据。

> **提示**
>
> - 您必须在列或行上至少选择一个维度。
>
> - 您必须至少包含一个句点。
>
> - 数据元素组集和报告率不能出现在同一个数据透视表中。
>
> - 数据透视表不能包含超过系统设置中指定的最大分析记录数。最大记录数也可能受浏览器可用的最大 RAM 限制。如果您请求的表格超出特定大小，您将收到警告提示。在此提示中，您可以取消请求或继续构建表。考虑制作更小的表格，而不是一张将所有数据元素和指标一起显示的表格。
>
> - **数据透视表**应用程序支持期间和组织单位的向下和向上钻取。这意味着您可以在数据透视表中从年度期间向下钻取到季度、月和周。您还可以从全球组织单位向下钻取到国家、省和设施。

## 创建数据透视表 { #pivot_create }

1.  打开**数据透视表**应用。

2.  在左侧的菜单中，选择要分析的维度项，例如数据元素或指标。

3.  单击**布局**，然后将数据维排列为列，行和过滤器。

    您可以根据需要保留默认选择。

4.  点击**更新**。

在此示例中，指标被列为列，周期被列为行。

![](resources/images/pivot_table/basic_pivot.png)

### 选择尺寸项目 { #select-dimension-items }

左侧菜单列出了所有可用数据维度的部分。从
每个部分都可以选择任意数量的维度项。作为
例如，您可以打开数据元素部分并选择任何
可用列表中的数据元素数。您可以选择一个项目
通过标记它并单击部分标题中的箭头或简单地
双击该项目。在您可以使用数据维度之前
数据透视表您必须至少选择一个维度项目。如果你安排
一个维度作为列或行，但不选择任何维度项目，
维度被忽略。

您必须至少选择一种数据维度类型才能创建数据透视表
桌子。下表描述了可用的类型：

 <table>
 <caption>数据维度类型</caption>
 <colgroup>
 <col style="width: 33%" />
 <col style="width: 33%" />
 <col style="width: 33%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th>数据维度类型</th>
 <th>定义</th>
 <th>示例</th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td>指示灯</td>
 <td>指标是基于数据元素的计算公式。 </td>
 <td>特定地区的免疫覆盖率。 </td>
 </tr>
 <tr class="even">
 <td>数据元素</td>
 <td>代表已捕获数据的现象。 </td>
 <td>疟疾病例数；给予的卡介苗剂量。 </td>
 </tr>
 <tr class="odd">
 <td>数据集</td>
 <td>为数据收集分组的数据元素的集合。您可以选择：
 <ul>
 <li> <p> <strong>报告率</strong>：实际报告数与预期报告数的百分比</p> </li>
 <li> <p> <strong>时间报告率</strong>：基于及时提交表单的报告率。在报告期后的几天内必须及时提交。 </p> </li>
 <li> <p> <strong>实际报告</strong>：实际报告数量</p> </li>
 <li> <p> <strong>时间上的实际报告</strong>：基于及时提交表单的实际报告数。在报告期后的几天内必须及时提交。 </p> </li>
 <li> <p> <strong>预期报告</strong>：基于已分配数据集和报告频率的组织单位的预期报告数。 </p> </li>
 </ul> </td>
 <td>免疫和发病率报告率。 </td>
 </tr>
 <tr class="even">
<td> 事件数据项 </td>
 <td>一个数据元素，它是表示已捕获事件的程序的一部分。 </td>
 <td>营养计划中儿童的平均体重和身高。 </td>
 </tr>
 <tr class="odd">
 <td>程序指示器</td>
 <td>基于表示事件的程序中的数据元素计算得出的公式。</td> 
 <td>营养计划中儿童的BMI平均得分。 </td>
 </tr>
 </tbody>
 </table>

您可以组合这些维度来显示例如聚合数据
与报告率，或事件数据项与程序
指标，都在同一个数据透视表中。对于“数据元素”数据
维度，您还可以选择“总计”和“详细信息”，
将允许您一起查看不同的类别组合选项
在同一个数据透视表上。

对于期间维度，您可以选择使用固定期间或
相对时期。固定时间段的一个示例是“2012 年 1 月”。至
选择固定期间首先从期间中选择期间类型
类型列表。然后，您可以从可用的列表中选择期间
期间。

相对期间是相对于当前日期的期间。示例
相对期间为“上个月”、“过去 12 个月”、“过去 5 年”。
可以通过勾选每个旁边的复选框来选择相对期间
时期。使用相对期间的主要优点是，当您
保存一个喜欢的数据透视表，它会保持最新数据的更新
随着时间的推移，无需不断更新它。

对于组织单位维度，您可以选择任意数量的
层次结构中的组织单位。选择所有组织单位
在特定上级组织单位下方，右键单击并单击“选择
所有子级”。要手动选择多个组织单位，请单击
单击组织单位时按住 **Ctrl** 键。你可以打勾
“用户组织单位”、“用户子单位”或“用户子 x2 单位”以便
动态插入一个或多个与您的组织单位相关的单位
用户帐号。这在您保存数据透视表收藏夹时很有用，并且
想与其他用户共享，因为组织单位与
查看收藏夹时将使用其他用户的帐户。

![](resources/images/pivot_table/period_dimension.png)

动态维度可以由组织单位组集、数据
元素组集或类别选项组集
配置为“分解”类型。一旦组集有
已配置，它们将在数据透视表中可用，并且
可以用作额外的分析维度，例如分析
按组织单位或实施伙伴的类型汇总数据。
动态尺寸与固定尺寸的工作方式相同。

> **提示**
>
> 一些动态维度可能包含许多项目。由于选择了许多维度成员时，由于URL的长度，这可能会导致某些浏览器的问题。一个特殊的“全部”复选框可用于动态维度，它允许您在数据透视表中隐式包含所有可用维度，而无需指定每个维度成员。

### 修改数据透视表布局 { #modify-pivot-table-layout }

选择数据维度后，是时候安排您的数据透视表了。
单击顶部菜单中的“布局”以打开布局屏幕。在这个画面
您可以将数据维度定位为表格列、行或过滤器
通过单击尺寸列表中的尺寸并将其拖到
相应的列、行和过滤器列表。您可以设置任意数量
任何列表中的维度。例如，您可以单击
“组织单位”并将其拖到行列表中以定位
组织单位维度作为表行。注意指标，
数据元素和数据集报告率是共同“数据”的一部分
维度并将一起显示在数据透视表中。为了
例如，在左侧菜单中选择指标和数据元素后，
您可以将“组织单位”从可用维度列表中拖到
行维度列表，以便将它们排列为枢轴中的行
桌子。

![](resources/images/pivot_table/table_layout.png)

设置数据透视表后，您可以单击“更新”进行渲染
您的数据透视表，或单击“隐藏”以隐藏布局屏幕而没有任何
更改生效。由于我们在我们的示例中同时选择了
期间和组织单位维度作为行，数据透视表将
生成这些维度中项目的所有组合并生成一个
像这样的表：

![](resources/images/pivot_table/pivot_rows.png)

## 更改数据透视表的显示 { #pivot_change_display }

1.  打开**数据透视表**应用。

2.  创建一个新的数据透视表或打开收藏夹。

3.  点击**选项**。

4.  根据需要设置选项。

    <table>
    <caption>Pivot table options</caption>
    <colgroup>
    <col style="width: 21%" />
    <col style="width: 35%" />
    <col style="width: 42%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Option</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p><strong>Data</strong></p></td>
    <td><p><strong>Show column totals</strong></p>
    <p><strong>Show row totals</strong></p></td>
    <td><p>Displays total values in the table for each row and column, as well as a total for all values in the table.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Show column sub-totals</strong></p>
    <p><strong>Show row sub-totals</strong></p></td>
    <td><p>Displays subtotals in the table for each dimension.</p>
    <p>If you only select one dimension, subtotals will be hidden for those columns or rows. This is because the values will be equal to the subtotals.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Show dimension labels</strong></p></td>
    <td><p>Shows the dimension names as part of the pivot tables.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Hide empty rows</strong></p></td>
    <td><p>Hides empty rows from the table. This is useful when you look at large tables where a big part of the dimension items don't have data in order to keep the table more readable.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Hide empty columns</strong></p></td>
    <td><p>Hides empty columns from the table. This is useful when you look at large tables where a big part of the dimension items don't have data in order to keep the table more readable.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Skip rounding</strong></p></td>
    <td><p>Skips the rounding of data values, offering the full precision of data values. Can be useful for finance data where the full dollar amount is required.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Aggregation type</strong></p></td>
    <td><p>The default aggregation operator can be over-ridden here, by selecting a different aggregation operator. Some of the aggregation types are <strong>Count</strong>, <strong>Min</strong> and <strong>Max</strong>.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Number type</strong></p></td>
    <td><p>Sets the type of value you want to display in the pivot table: <strong>Value</strong>, <strong>Percentage of row</strong> or <strong>Percentage of column</strong>.</p>
    <p>The options <strong>Percentage of row</strong> and<strong>Percentage of column</strong> mean that you'll display values as percentages of row total or percentage of column total instead of the aggregated value. This is useful when you want to see the contribution of data elements, categories or organisation units to the total value.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Measure criteria</strong></p></td>
    <td><p>Allows for the data to be filtered on the server side.</p>
    <p>You can instruct the system to return only records where the aggregated data value is equal, greater than, greater or equal, less than or less or equal to certain values.</p>
    <p>If both parts of the filter are used, it's possible to filter out a range of data records.</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Events</strong></p></td>
    <td><p><strong>Include only completed events</strong></p></td>
    <td><p>Includes only completed events in the aggregation process. This is useful for example to exclude partial events in indicator calculations.</p></td>
    </tr>
    <tr class="odd">
    <td><p><strong>Organisation units</strong></p></td>
    <td><p><strong>Show hierarchy</strong></p></td>
    <td><p>Shows the name of all ancestors for organisation units, for example &quot;Sierra Leone / Bombali / Tamabaka / Sanya CHP&quot; for Sanya CHP.</p>
    <p>The organisation units are then sorted alphabetically which will order the organisation units according to the hierarchy.</p>
    <p>When you download a pivot table with organisation units as rows and you've selected <strong>Show hierarchy</strong>, each organisation unit level is rendered as a separate column. This is useful for example when you create Excel pivot tables on a local computer.</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Legend</strong></p></td>
    <td><p><strong>Apply legend</strong></p></td>
    <td><p>Applies a legend to the values. This mean that you can apply a colour to the values.</p>
    <p>Select <strong>By data item</strong> to color the table cells individually according to each data element or indicator.</p>
    <p>You configure legends in the <strong>Maintenance</strong> app.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Style</strong></p></td>
    <td><p>Colors the text or background of cells in pivot tables based on the selected legend.</p>
    <p>You can use this option for scorecards to identify high and low values at a glance.</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Style</strong></p></td>
    <td><p><strong>Display density</strong></p></td>
    <td><p>Controls the size of the cells in the table. You can set it to <strong>Comfortable</strong>, <strong>Normal</strong> or <strong>Compact</strong>.</p>
    <p><strong>Compact</strong> is useful when you want to fit large tables into the browser screen.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Font size</strong></p></td>
    <td><p>Controls the size of the table text font. You can set it to <strong>Large</strong>, <strong>Normal</strong> or <strong>Small</strong>.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Digit group separator</strong></p></td>
    <td><p>Controls which character to separate groups of digits or &quot;thousands&quot;. You can set it to <strong>Comma</strong>, <strong>Space</strong> or <strong>None</strong>.</p></td>
    </tr>
    <tr class="odd">
    <td><p><strong>General</strong></p></td>
    <td><p><strong>Table title</strong></p></td>
    <td><p>Type a title here to display it above the table.</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Parameters (for standard reports only)</strong></p></td>
    <td><blockquote>
    <p><strong>Note</strong></p>
    <p>You create standard reports in the <strong>Reports</strong> app.</p>
    <p>In the <strong>Pivot Table</strong> app you set which parameters the system should prompt the user for.</p>
    </blockquote></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Reporting period</strong></p></td>
    <td><p>Controls whether to ask user to enter a report period.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Organisation unit</strong></p></td>
    <td><p>Controls whether to ask user to enter an organisation unit.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Parent organisation unit</strong></p></td>
    <td><p>Controls whether to ask user to enter a parent organisation unit.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Include regression</strong></p></td>
    <td><p>Includes a column with regression values to the pivot table.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Include cumulative</strong></p></td>
    <td><p>Includes a column with cumulative values to the pivot table.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Sort order</strong></p></td>
    <td><p>Controls the sort order of the values.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Top limit</strong></p></td>
    <td><p>Controls the maximum number of rows to include in the pivot table.</p></td>
    </tr>
    </tbody>
    </table>

5.  点击**更新**。

## 管理收藏夹 { #manage-favorites }

将您的图表或数据透视表保存为收藏夹，便于查找
他们后来。您还可以选择与其他用户共享它们作为
解释或显示在仪表板上。

您可以在**数据透视表**，**数据可视化器**，**事件可视化器**，**事件报告**应用中查看收藏夹的详细信息和解释。使用**收藏夹**菜单来管理您的收藏夹。

### 打开收藏夹 { #open-a-favorite }

1.  点击**收藏夹** \> **打开**。

2.  在搜索字段中输入收藏夹的名称，或单击 **Prev** 和 **Next** 以显示收藏夹。

3.  单击您要打开的收藏夹的名称。

### 保存收藏夹 { #save-a-favorite }

1.  点击**收藏夹** \> **另存为**。

2.  输入您喜欢的**名称**和**描述**。 description字段支持RTF格式，有关更多详细信息，请参见解释部分。

3.  点击**保存**。 

### 重命名收藏夹 { #rename-a-favorite }

1.  点击**收藏** \> **重命名**。

2.  输入您喜欢的新名称。

3.  点击**更新**。

### 为最喜欢的人写一个诠释 { #write-an-interpretation-for-a-favorite }

解释是到资源的链接，该资源具有给定时间段的数据描述。该信息在**仪表板**应用中可见。要创建解释，您首先需要创建收藏夹。如果您已经与其他人分享了自己的最爱，那么这些人就可以看到您编写的解释。

1.  点击**收藏夹** \> **写入解释**。

2.  在文本字段中，输入评论，问题或解释。您也可以使用'@username'提及其他用户。首先输入' @'，再加上用户名或真实姓名的首字母，然后出现一个提述栏，以显示可用的用户。提及的用户将收到内部DHIS2消息以及解释或评论。您可以在**仪表板**应用中查看解释。

    可以通过使用 Markdown 样式标记 \* 和 \_ 分别为 **bold** 和 _italic_ 来格式化文本为 **bold** 和 _italic_。键盘快捷键也可用：Ctrl/Cmd + B 和 Ctrl/Cmd + I。支持一组有限的表情符号，可以通过键入以下字符组合之一来使用：:) :-) :( :-( :+ 1 :-1. URL 被自动检测并转换为可点击的链接。

3.  搜索您想与之分享您最爱的用户组，然后单击 **+** 图标。

4.  更改要修改的用户组的共享设置。

    -   **可以编辑和查看**：每个人都可以查看和编辑对象。

    -   **只能查看**：每个人都可以查看对象。

    -   **无**：公众将无法访问该对象。此设置仅适用于**公共访问**。

5.  点击**共享**。

### 订阅收藏 { #subscribe-to-a-favorite }

当您订阅收藏时，您会收到内部消息
每当另一个用户喜欢/创建/更新解释或
创建/更新此收藏夹的解释注释。

1.  打开收藏夹。

2.  单击工作区右上方的** \> \> \> **。

3.  单击右上角的响铃图标以订阅此收藏。

### 创建指向收藏夹的链接 { #create-a-link-to-a-favorite }

1.  点击**收藏夹** \> **获取链接**。

2.  选择以下之一：

    -   **在此应用中打开**：您将获得收藏夹的 URL，您可以通过电子邮件或聊天与其他用户分享。

    -   **在 web api 中打开**：您将获得 API 资源的 URL。默认情况下，这是一个 HTML 资源，但您可以将文件扩展名更改为“.json”或“.csv”。

### 删除收藏夹 { #delete-a-favorite }

1.  点击**收藏** \> **删除**。

2.  点击**确定**。

### 查看基于相对期间的解释 { #view-interpretations-based-on-relative-periods }

要查看相对时期的解释，例如一年前：

1.  用解释打开收藏夹。

2.  单击工作区右上方的** \> \> \> **。

3.  单击解释。您的图表根据创建解释的时间显示数据和日期。要查看其他解释，请单击它们。

## 从数据透视表下载数据 { #pivot_download_data }

### 下载表格布局数据格式 { #download-table-layout-data-format }

要下载当前数据透视表中的数据：

1.  点击**下载**。

2.  在**表格布局**下，单击您要下载的格式：Microsoft Excel，CSV或HTML。

    数据表每个维度有一列，并包含维度项的名称。

    > **Tip**
    >
    > When you download a pivot table with organisation units as rows and you've selected **Show hierarchy** in **Table options**, each organisation unit level is rendered as a separate column. This is useful for example when you create Excel pivot tables on a local computer.

> **提示**
>
> 您可以从下载的 Excel 文件在 Microsoft Excel 中创建数据透视表。

### 下载纯数据源格式 { #download-plain-data-source-format }

您可以下载 JSON、XML、Excel 格式的当前数据透视表中的数据，
和 CSV 作为具有不同标识方案（ID、
代码和名称）。数据文档使用维度的标识符
项目并在新的浏览器窗口中打开以显示项目的 URL
地址栏中的 Web API 请求。这对开发人员很有用
基于 DHIS2 Web API 的应用程序和其他客户端模块
谁需要计划数据源，例如导入统计数据
包。

要下载纯数据源格式：

1.  点击**下载**。

2.  在**普通数据源**下，单击要下载的格式。

    <table>
    <caption>Available formats</caption>
    <colgroup>
    <col style="width: 18%" />
    <col style="width: 33%" />
    <col style="width: 47%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Format</p></th>
    <th><p>Action</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>JSON</p></td>
    <td><p>Click <strong>JSON</strong></p></td>
    <td><p>Downloads JSON format based on ID property.</p>
    <p>You can also download JSON format based on <strong>Code</strong> or <strong>Name</strong> property.</p></td>
    </tr>
    <tr class="even">
    <td><p>XML</p></td>
    <td><p>Click <strong>XML</strong></p></td>
    <td><p>Downloads XML format based on ID property.</p>
    <p>You can also download XML format based on <strong>Code</strong> or <strong>Name</strong> property.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Microsoft Excel</p></td>
    <td><p>Click <strong>Microsoft Excel</strong></p></td>
    <td><p>Downloads XML format based on ID property.</p>
    <p>You can also download Microsoft Excel format based on <strong>Code</strong> or <strong>Name</strong> property.</p></td>
    </tr>
    <tr class="even">
    <td><p>CSV</p></td>
    <td>Click <strong>CSV</strong></td>
    <td><p>Downloads CSV format based on ID property.</p>
    <p>You can also download CSV format based on <strong>Code</strong> or <strong>Name</strong> property.</p></td>
    </tr>
    <tr class="odd">
    <td><p>JRXML</p></td>
    <td><p>Put the cursor on <strong>Advanced</strong> and click <strong>JRXML</strong></p></td>
    <td><p>Produces a template of a Jasper Report which can be further customized based on your exact needs and used as the basis for a standard report in DHIS2.</p></td>
    </tr>
    <tr class="even">
    <td><p>Raw data SQL</p></td>
    <td><p>Put the cursor on <strong>Advanced</strong> and click <strong>Raw data SQL</strong></p></td>
    <td><p>Provides the actual SQL statement used to generate the pivot table. You can use it as a data source in a Jasper report, or as the basis for an SQL view.</p></td>
    </tr>
    </tbody>
    </table>

### 下载CSV格式，而不在网络浏览器中呈现数据 { #download-a-csv-format-without-rendering-data-in-the-web-browser }

可以直接下载CSV格式的数据，无需渲染数据
在网络浏览器中。这有助于减少系统中的任何约束
已设置的关于最大数量的设置
分析记录。这使您可以下载更大批量的数据
可用于以后的离线分析。

以 CSV 格式下载数据，而无需先在 Web 中呈现数据
浏览器：

1.  单击**更新**旁边的箭头。

    ![](resources/images/pivot_table/data_dump.png)

2.  单击** CSV **以根据ID属性下载格式。

    该文件下载到您的计算机。

    > **Tip**
    >
    > You can also download CSV format based on **Code** or **Name** property.

## 在外部网页中嵌入数据透视表 { #pivot_embed }

DHIS2 中某些与分析相关的资源，如数据透视表、图表和地图，可以使用插件嵌入到任何网页中。您将在_DHIS2 开发人员手册_ 的 Web API 章节中找到有关插件的更多信息。

生成可用于显示数据透视表的 HTML 片段
在外部网页中：

1.  点击**嵌入**。

2.  单击**选择**以突出显示HTML片段。

## 将数据透视表数据可视化为图表或地图 { #pivot_integration }

制作数据透视表后，您可以在数据透视表之间切换，
数据的图表和地图可视化。

### 打开数据透视表作为图表 { #open-a-pivot-table-as-a-chart }

1.  单击**图表** \> **以图表形式打开此表**。

    当前的数据透视表将以图表的形式打开。

![](resources/images/pivot_table/pivot_integration.png)

### 打开数据透视表选择作为图表 { #open-a-pivot-table-selection-as-a-chart }

如果您想将数据透视表的一小部分可视化为图表，您可以
可以直接点击表格中的一个值而不是打开整个
桌子。

1.  在数据透视表中，单击一个值。

        ![](resources/images/pivot_table/pivot_integration_table.png)

2.  要验证选择，请将光标悬停在**按图表打开选择**上。表格中突出显示的维度标题指示将哪些数据可视化为图表。

3.  点击**打开选择为图表**。

### 打开数据透视表作为地图 { #open-a-pivot-table-as-a-map }

1.  点击**图表** \> **以地图形式打开该表格**

    当前的数据透视表将作为地图打开。

### 打开数据透视表选择作为地图 { #open-a-pivot-table-selection-as-a-map }

1.  在数据透视表中，单击一个值。

    显示菜单。

2.  点击**将选择作为地图打开**。

    您的选择将作为地图打开。

# 使用事件报告应用 { #event_reports_app }

## 关于事件报告应用 { #event_reports_about }

![](resources/images/event_report/event_report.png)

使用**事件报告**应用程序，您可以分析两种类型的报告中的事件：

-   聚合事件报告：具有聚合事件数量的数据透视表式分析

    By selecting **Aggregated values** from the top-left menu you can use the **Event Reports** app to create pivot tables with aggregated numbers of events. An event report is always based on a program. You can do analysis based on a range of dimensions. Each dimension can have a corresponding filter. Dimensions can be selected from the left-side menu. Similar to the pivot tables app, aggregated event reports may be limited by the amount of RAM accessible by the browser. If your requested table exceeds a set size, you will recieve a warning prompt asking whether or not you want to continue.

-   个别事件报告：事件列表

    By selecting **Events** from the top-left menu you can use the **Event Reports** app to make searches or queries for events based on a flexible set of criteria. The report will be displayed as a table with one row per event. Each dimension can be used as a column in the table or as a filter. Each dimension can have a criteria (filter). Data elements of type option set allows for "in" criteria, where multiple options can be selected. Numeric values can be compared to filter values using greater than, equal or less than operators.

## 创建事件报告 { #event_reports_create }

1.  Open the **Event Reports** app.

2.  Select **Aggregated values** or **Events**.

3.  在左侧菜单中，选择要分析的元数据。

4.  Click **Layout** and arrange the dimensions.

    您可以根据需要保留默认选择。

5.  点击**更新**。

## 选择尺寸项目 { #event_reports_select_dimensions }

事件报告始终基于程序，您可以进行分析
基于一系列维度。对于具有类别组合的程序，
您可以使用程序类别和类别选项组集作为
表格和图表的维度。每个维度项可以有一个
相应的过滤器。

1.  选择数据元素：

    1.  点击**数据**。

    2.  选择一个程序和一个程序阶段。

        The data elements associated with the selected program are listed under **Available**. Each data element acts as a dimension.

    3.  通过双击它们的名称来选择您需要的数据元素。

        数据元素可以按类型（数据元素、程序属性、程序指示符）进行过滤，并添加前缀以使其易于识别。

        After selecting a data element, it is visible under **Selected data items**.

    4.  （可选）对于每个数据元素，使用“大于”、“在”或“等于”等运算符以及过滤器值指定过滤器。

2.  选择期间。

    1.  点击**期间**。

    2.  选择一个或多个期间。

        您有三个期间选项：相对期间、固定期间和开始/结束日期。您可以在同一图表中组合固定期间和相对期间。您不能将固定期间和相对期间与同一图表中的开始/结束日期结合起来。重叠的时段被过滤，以便它们只出现一次。

        -   Fixed periods: In the **Select period type** box, select a period type. You can select any number of fixed periods from any period type. Fixed periods can for example be "January 2014".

        -   Relative periods: In the lower part of the **Periods** section, select as many relative periods as you like. The names are relative to the current date. This means that if the current month is March and you select **Last month**, the month of February is included in the chart. Relative periods has the advantage that it keeps the data in the report up to date as time goes.

        -   Start/end dates: In the list under the **Periods** tab, select **Start/end dates**. This period type lets you specify flexible dates for the time span in the report.

3.  选择组织单位。

    1.  Click **Organisation units**.

    2.  点击齿轮箱图标。

    3.  Select a **Selection mode** and an organisation unit.

        共有三种不同的选择模式：

        <table>
        <caption>Selection modes</caption>
        <colgroup>
        <col style="width: 38%" />
        <col style="width: 61%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Selection mode</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p><strong>Select organisation units</strong></p></td>
        <td><p>Lets you select the organisation units you want to appear in the chart from the organization tree.</p>
        <p>Select <strong>User org unit</strong> to disable the organisation unit tree and only select the organisation unit that is related to your profile.</p>
        <p>Select <strong>User sub-units</strong> to disable the organisation unit tree and only select the sub-units of the organisation unit that is related to your profile.</p>
        <p>Select <strong>User sub-x2-units</strong> to disable the organisation unit tree and only select organisation units two levels down from the organisation unit that is related to your profile.</p>
        <p>This functionality is useful for administrators to create a meaningful &quot;system&quot; favorite. With this option checked all users find their respective organisation unit when they open the favorite.</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>Select levels</strong></p></td>
        <td><p>Lets you select all organisation units at one or more levels, for example national or district level.</p>
        <p>You can also select the parent organisation unit in the tree, which makes it easy to select for example, all facilities inside one or more districts.</p></td>
        </tr>
        <tr class="odd">
        <td><p><strong>Select groups</strong></p></td>
        <td><p>Lets you select all organisation units inside one or several groups and parent organisation units at the same time, for example hospitals or chiefdoms.</p></td>
        </tr>
        </tbody>
        </table>

4.  点击**更新**。

## 选择系列，类别和过滤器 { #event_reports_select_series_category_filter }

您可以定义要显示为列、行的数据维度
和数据透视表中的过滤器。每个数据元素都显示为单独的
尺寸，可以放置在任何轴上。

> **注意**
>
> 连续值类型（实数/十进制数）的数据元素只能用作过滤器，并在布局对话框中自动定位为过滤器。这样做的原因是连续数字不能分组到合理的范围内并用于列和行。

1.  Click **Layout**.

2.  将尺寸拖放到适当的空间。

3.  点击**更新**。

## 更改表格的显示 { #event_reports_change_display }

您可以自定义事件报告的显示。

1.  点击**选项**。

2.  根据需要设置选项。聚合事件报告和单个事件报告之间的可用选项不同。

    <table style="width:100%;">
    <caption>Event reports options</caption>
    <colgroup>
    <col style="width: 22%" />
    <col style="width: 22%" />
    <col style="width: 33%" />
    <col style="width: 22%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Option</p></th>
    <th><p>Description</p></th>
    <th><p>Available for report type</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p><strong>Data</strong></p></td>
    <td><p><strong>Show column totals</strong></p></td>
    <td><p>Displays totals at the end of each column in the pivot table.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Show column sub-totals</strong></p></td>
    <td><p>Displays sub-totals for each column in the pivot table.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Show row totals</strong></p></td>
    <td><p>Displays totals at the end of each row in the pivot table.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Show row sub-totals</strong></p></td>
    <td><p>Displays sub-totals for each row in the pivot table.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Show dimension labels</strong></p></td>
    <td>Displays labels for dimensions.</td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Hide empty rows</strong></p></td>
    <td><p>Hides empty rows in the pivot table.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Hide n/a data</strong></p></td>
    <td><p>Hides data tagged as N/A from the chart.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Include only completed events</strong></p></td>
    <td><p>Includes only completed events in the aggregation process. This is useful when you want for example to exclude partial events in indicator calculations.</p></td>
    <td><p>Aggregated event report</p>
    <p>Individual event report</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Limit</strong></p></td>
    <td><p>Sets a limit of the maximum number of rows that you can display in the table, combined with a setting for showing top or bottom values.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Output type</strong></p></td>
    <td><p>Defines the output type. The output types are <strong>Event</strong>, <strong>Enrollment</strong> and<strong>Tracked entity instance</strong>.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Program status</strong></p></td>
    <td><p>Filters data based on the program status: <strong>All</strong>, <strong>Active</strong>, <strong>Completed</strong> or <strong>Cancelled</strong>.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Event status</strong></p></td>
    <td><p>Filters data based on the event status: <strong>All</strong>, <strong>Active</strong>, <strong>Completed</strong>, <strong>Scheduled</strong>, <strong>Overdue</strong> or <strong>Skipped</strong>.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="odd">
    <td><strong>Organisation units</strong></td>
    <td><p><strong>Show hierarchy</strong></p></td>
    <td><p>Includes the names of all parents of each organisation unit in labels.</p></td>
    <td><p>Aggregated event report</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Style</strong></p></td>
    <td><p><strong>Display density</strong></p></td>
    <td><p>Controls the size of the cells in the table. You can set it to <strong>Comfortable</strong>, <strong>Normal</strong> or <strong>Compact</strong>.</p>
    <p><strong>Compact</strong> is useful when you want to fit large tables into the browser screen.</p></td>
    <td><p>Aggregated event report</p>
    <p>Individual event report</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Font size</strong></p></td>
    <td><p>Controls the size of the table text font. You can set it to <strong>Large</strong>, <strong>Normal</strong> or <strong>Small</strong>.</p></td>
    <td><p>Aggregated event report</p>
    <p>Individual event report</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Digit group separator</strong></p></td>
    <td><p>Controls which character to separate groups of digits or &quot;thousands&quot;. You can set it to <strong>Comma</strong>, <strong>Space</strong> or <strong>None</strong>.</p></td>
    <td><p>Aggregated event report</p>
    <p>Individual event report</p></td>
    </tr>
    </tbody>
    </table>

3.  点击**更新**。

## 下载图表数据源 { #event_reports_download_report }

您可以下载 HTML、JSON、
XML、Microsoft Excel 或 CSV 格式。

1.  点击**下载**。

2.  在**普通数据源**下，单击要下载的格式。

    <table>
    <caption>Available formats</caption>
    <colgroup>
    <col style="width: 27%" />
    <col style="width: 72%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Format</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>HTML</p></td>
    <td><p>Creates HTML table based on selected meta data</p></td>
    </tr>
    <tr class="even">
    <td><p>JSON</p></td>
    <td><p>Downloads data values in JSON format based on selected meta data</p></td>
    </tr>
    <tr class="odd">
    <td><p>XML</p></td>
    <td><p>Downloads data values in XML format based on selected meta data</p></td>
    </tr>
    <tr class="even">
    <td><p>Microsoft Excel</p></td>
    <td><p>Downloads data values in Microsoft Excel format based on selected meta data</p></td>
    </tr>
    <tr class="odd">
    <td><p>CSV</p></td>
    <td><p>Downloads data values in CSV format based on selected meta data</p></td>
    </tr>
    </tbody>
    </table>

## 管理收藏夹 { #manage-favorites }

将您的图表或数据透视表保存为收藏夹，便于查找
他们后来。您还可以选择与其他用户共享它们作为
解释或显示在仪表板上。

您可以在**数据透视表**，**数据可视化器**，**事件可视化器**，**事件报告**应用中查看收藏夹的详细信息和解释。使用**收藏夹**菜单来管理您的收藏夹。

### 打开收藏夹 { #open-a-favorite }

1.  点击**收藏夹** \> **打开**。

2.  在搜索字段中输入收藏夹的名称，或单击 **Prev** 和 **Next** 以显示收藏夹。

3.  单击您要打开的收藏夹的名称。

### 保存收藏夹 { #save-a-favorite }

1.  点击**收藏夹** \> **另存为**。

2.  输入您喜欢的**名称**和**描述**。 description字段支持RTF格式，有关更多详细信息，请参见解释部分。

3.  点击**保存**。 

### 重命名收藏夹 { #rename-a-favorite }

1.  点击**收藏** \> **重命名**。

2.  输入您喜欢的新名称。

3.  点击**更新**。

### 为最喜欢的人写一个诠释 { #write-an-interpretation-for-a-favorite }

解释是到资源的链接，该资源具有给定时间段的数据描述。该信息在**仪表板**应用中可见。要创建解释，您首先需要创建收藏夹。如果您已经与其他人分享了自己的最爱，那么这些人就可以看到您编写的解释。

1.  点击**收藏夹** \> **写入解释**。

2.  在文本字段中，输入评论，问题或解释。您也可以使用'@username'提及其他用户。首先输入' @'，再加上用户名或真实姓名的首字母，然后出现一个提述栏，以显示可用的用户。提及的用户将收到内部DHIS2消息以及解释或评论。您可以在**仪表板**应用中查看解释。

    可以通过使用 Markdown 样式标记 \* 和 \_ 分别为 **bold** 和 _italic_ 来格式化文本为 **bold** 和 _italic_。键盘快捷键也可用：Ctrl/Cmd + B 和 Ctrl/Cmd + I。支持一组有限的表情符号，可以通过键入以下字符组合之一来使用：:) :-) :( :-( :+ 1 :-1. URL 被自动检测并转换为可点击的链接。

3.  搜索您想与之分享最爱的用户组，然后单击 **+** 图标。

4.  更改要修改的用户组的共享设置。

    -   **可以编辑和查看**：每个人都可以查看和编辑对象。

    -   **只能查看**：每个人都可以查看对象。

    -   **无**：公众将无法访问该对象。此设置仅适用于**公共访问**。

5.  点击**共享**。

### 订阅收藏 { #subscribe-to-a-favorite }

当您订阅收藏时，您会收到内部消息
每当另一个用户喜欢/创建/更新解释或
创建/更新此收藏夹的解释注释。

1.  打开收藏夹。

2.  单击工作区右上方的** \> \> \> **。

3.  单击右上角的响铃图标以订阅此收藏。

### 创建指向收藏夹的链接 { #create-a-link-to-a-favorite }

1.  点击**收藏夹** \> **获取链接**。

2.  选择以下之一：

    -   **在此应用中打开**：您将获得收藏夹的 URL，您可以通过电子邮件或聊天与其他用户分享。

    -   **在 web api 中打开**：您将获得 API 资源的 URL。默认情况下，这是一个 HTML 资源，但您可以将文件扩展名更改为“.json”或“.csv”。

### 删除收藏夹 { #delete-a-favorite }

1.  点击**收藏** \> **删除**。

2.  点击**确定**。

### 查看基于相对期间的解释 { #view-interpretations-based-on-relative-periods }

要查看相对时期的解释，例如一年前：

1.  用解释打开收藏夹。

2.  单击工作区右上方的** \> \> \> **。

3.  单击解释。您的图表根据创建解释的时间显示数据和日期。要查看其他解释，请单击它们。

## 将事件报告可视化为图表 { #event_reports_open_as_chart }

制作事件报告后，可以将其作为图表打开：

单击**图表** \> **以表形式打开此图表**。

# 使用事件可视化器应用 { #event_visualizer_app }

## 关于事件可视化器应用 { #about-the-event-visualizer-app }

![](resources/images/event_visualizer/event_visualizer.png)

With the **Event Visualizer** app, you can create charts based on event data.

## 创建图表 { #create-a-chart }

1.  \<Open the **Event Visualizer** app and select a chart type.

2.  在左侧菜单中，选择要分析的元数据。

3.  Click **Layout** and arrange the dimensions.

    您可以根据需要保留默认选择。

4.  点击**更新**。

## 选择图表类型 { #select-a-chart-type }

The **Event Visualizer** app has eight different chart types, each with different characteristics. To select a chart type:

1.  In **Chart type**, click the chart type you need.

    <table>
    <caption>Chart types</caption>
    <colgroup>
    <col style="width: 33%" />
    <col style="width: 66%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Chart type</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Column chart</p></td>
    <td><p>Displays information as vertical rectangular columns with lengths proportional to the values they represent.</p>
    <p>Useful when you want to, for example, compare performance of different districts.</p></td>
    </tr>
    <tr class="even">
    <td><p>Stacked column chart</p></td>
    <td><p>Displays information as vertical rectangular columns, where bars representing multiple categories are stacked on top of each other.</p>
    <p>Useful when you want to, for example, display trends or sums of related data elements.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Bar chart</p></td>
    <td><p>Same as column chart, only with horizontal bars.</p></td>
    </tr>
    <tr class="even">
    <td><p>Stacked bar chart</p></td>
    <td><p>Same as stacked column chart, only with horizontal bars.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Line chart</p></td>
    <td><p>Displays information as a series of points connected by straight lines. Also referred to as time series.</p>
    <p>Useful when you want to, for example, visualize trends in indicator data over multiple time periods.</p></td>
    </tr>
    <tr class="even">
    <td><p>Area chart</p></td>
    <td><p>Is based on line chart, with the space between the axis and the line filled with colors and the lines stacked on top of each other.</p>
    <p>Useful when you want to compare the trends of related indicators.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Pie chart</p></td>
    <td><p>Circular chart divided into sectors (or slices).</p>
    <p>Useful when you want to, for example, visualize the proportion of data for individual data elements compared to the total sum of all data elements in the chart.</p></td>
    </tr>
    <tr class="even">
    <td><p>Radar chart</p></td>
    <td><p>Displays data on axes starting from the same point. Also known as spider chart.</p></td>
    </tr>
    </tbody>
    </table>

2.  点击**更新**。

## 选择尺寸项目 { #event_visualizer_select_dimensions }

事件图表始终基于程序，您可以进行分析
基于一系列维度。对于具有类别组合的程序，
您可以使用程序类别和类别选项组集作为
表格和图表的维度。每个维度项可以有一个
相应的过滤器。您从左侧选择维度项目
菜单。

1.  选择数据元素：

    1.  点击**数据**。

    2.  选择一个程序和一个程序阶段。

        The data elements associated with the selected program are listed under **Available**. Each data element acts as a dimension.

    3.  通过双击它们的名称来选择您需要的数据元素。

        数据元素可以按类型（数据元素、程序属性、程序指示符）进行过滤，并添加前缀以使其易于识别。

        After selecting a data element, it is visible under **Selected data items**.

    4.  （可选）对于每个数据元素，使用“大于”、“在”或“等于”等运算符以及过滤器值指定过滤器。

2.  选择期间。

    1.  点击**期间**。

    2.  选择一个或多个期间。

        您有三个期间选项：相对期间、固定期间和开始/结束日期。您可以在同一图表中组合固定期间和相对期间。您不能将固定期间和相对期间与同一图表中的开始/结束日期结合起来。重叠的时段被过滤，以便它们只出现一次。

        -   Fixed periods: In the **Select period type** box, select a period type. You can select any number of fixed periods from any period type. Fixed periods can for example be "January 2014".

        -   Relative periods: In the lower part of the **Periods** section, select as many relative periods as you like. The names are relative to the current date. This means that if the current month is March and you select **Last month**, the month of February is included in the chart. Relative periods has the advantage that it keeps the data in the report up to date as time goes.

        -   Start/end dates: In the list under the **Periods** tab, select **Start/end dates**. This period type lets you specify flexible dates for the time span in the report.

3.  选择组织单位。

    1.  Click **Organisation units**.

    2.  点击齿轮箱图标。

    3.  Select a **Selection mode** and an organisation unit.

        共有三种不同的选择模式：

        <table>
        <caption>Selection modes</caption>
        <colgroup>
        <col style="width: 38%" />
        <col style="width: 61%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Selection mode</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p><strong>Select organisation units</strong></p></td>
        <td><p>Lets you select the organisation units you want to appear in the chart from the organization tree.</p>
        <p>Select <strong>User org unit</strong> to disable the organisation unit tree and only select the organisation unit that is related to your profile.</p>
        <p>Select <strong>User sub-units</strong> to disable the organisation unit tree and only select the sub-units of the organisation unit that is related to your profile.</p>
        <p>Select <strong>User sub-x2-units</strong> to disable the organisation unit tree and only select organisation units two levels down from the organisation unit that is related to your profile.</p>
        <p>This functionality is useful for administrators to create a meaningful &quot;system&quot; favorite. With this option checked all users find their respective organisation unit when they open the favorite.</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>Select levels</strong></p></td>
        <td><p>Lets you select all organisation units at one or more levels, for example national or district level.</p>
        <p>You can also select the parent organisation unit in the tree, which makes it easy to select for example, all facilities inside one or more districts.</p></td>
        </tr>
        <tr class="odd">
        <td><p><strong>Select groups</strong></p></td>
        <td><p>Lets you select all organisation units inside one or several groups and parent organisation units at the same time, for example hospitals or chiefdoms.</p></td>
        </tr>
        </tbody>
        </table>

4.  点击**更新**。

## 选择系列，类别和过滤器 { #select-series-category-and-filter }

您可以定义要显示为系列的数据维度，
类别和过滤器。每个数据元素都显示为单独的维度
并且可以放置在任何轴上。系列和类别面板可以
当时只有一维。

> **注意**
>
> 连续值类型（实数/十进制数）的数据元素只能用作过滤器，并且会在布局对话框中自动定位为过滤器。这样做的原因是连续数字不能分组到合理的范围内并用于列和行。

1.  Click **Layout**.

2.  将尺寸拖放到适当的空间。每个部分只能有一个维度。

3.  点击**更新**。

## 更改图表的显示 { #event_visualizer_change_display }

您可以自定义事件报告的显示。

1.  点击**选项**。

2.  根据需要设置选项。

    <table>
    <caption>Chart options</caption>
    <colgroup>
    <col style="width: 28%" />
    <col style="width: 28%" />
    <col style="width: 42%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Option</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p><strong>Data</strong></p></td>
    <td><p><strong>Show values</strong></p></td>
    <td><p>Displays values as numbers on top of each series.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Use 100% stacked values</strong></p></td>
    <td><p>Displays 100 % stacked values in column charts.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Use cumulative values</strong></p></td>
    <td><p>Displays cumulative values in line charts.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Hide n/a data</strong></p></td>
    <td><p>Hides data tagged as N/A from the chart.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Include only completed events</strong></p></td>
    <td><p>Includes only completed events in the aggregation process. This is useful when you want for example to exclude partial events in indicator calculations.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Hide empty categories</strong></p></td>
    <td><p>Hides the category items with no data from the chart.</p>
    <p><strong>None</strong>: doesn't hide any of the empty categories</p>
    <p><strong>Before first</strong>: hides missing values only before the first value</p>
    <p><strong>After last</strong>: hides missing values only after the last value</p>
    <p><strong>Before first and after last</strong>: hides missing values only before the first value and after the last value</p>
    <p><strong>All</strong>: hides all missing values</p>
    <p>This is useful for example when you create column and bar charts.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Trend line</strong></p></td>
    <td><p>Displays the trend line which visualizes how your data evolves over time. For example if performance is improving or deteriorating. Useful when periods are selected as category.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Target line value/title</strong></p></td>
    <td><p>Displays a horizontal line and title (optional) at the given domain value. Useful for example when you want to compare your performance to the current target.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Base line value/title</strong></p></td>
    <td><p>Displays a horizontal line and title (optional) at the given domain value. Useful for example when you want to visualize how your performance has evolved since the beginning of a process.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Sort order</strong></p></td>
    <td><p>Allows you to sort the values on your chart from either low to high or high to low.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Output type</strong></p></td>
    <td><p>Defines the output type. The output types are <strong>Event</strong>, <strong>Enrollment</strong> and<strong>Tracked entity instance</strong>.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Program status</strong></p></td>
    <td><p>Filters data based on the program status: <strong>All</strong>, <strong>Active</strong>, <strong>Completed</strong> or <strong>Cancelled</strong>.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Event status</strong></p></td>
    <td><p>Filters data based on the event status: <strong>All</strong>, <strong>Active</strong>, <strong>Completed</strong>, <strong>Scheduled</strong>, <strong>Overdue</strong> or <strong>Skipped</strong>.</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Axes</strong></p></td>
    <td><p><strong>Range axis min/max</strong></p></td>
    <td><p>Defines the maximum and minimum value which will be visible on the range axis.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Range axis tick steps</strong></p></td>
    <td><p>Defines the number of ticks which will be visible on the range axis.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Range axis decimals</strong></p></td>
    <td><p>Defines the number of decimals which will be used for range axis values.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Range axis title</strong></p></td>
    <td><p>Type a title here to display a label next to the range axis (also referred to as the Y axis). Useful when you want to give context information to the chart, for example about the unit of measure.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Domain axis title</strong></p></td>
    <td><p>Type a title here to display a label below the domain axis (also referred to as the X axis). Useful when you want to give context information to the chart, for example about the period type.</p></td>
    </tr>
    <tr class="odd">
    <td><p><strong>General</strong></p></td>
    <td><p><strong>Hide chart legend</strong></p></td>
    <td><p>Hides the legend and leaves more room for the chart itself.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Hide chart title</strong></p></td>
    <td><p>Hides the title (default or custom) of your chart.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Chart title</strong></p></td>
    <td><p>Type a title here to display a custom title above the chart. If you don't enter a title, the default title is displayed.</p></td>
    </tr>
    <tr class="even">
    <td></td>
    <td><p><strong>Hide chart subtitle</strong></p></td>
    <td><p>Hides the subtitle of your chart.</p></td>
    </tr>
    <tr class="odd">
    <td></td>
    <td><p><strong>Chart subtitle</strong></p></td>
    <td><p>Type a subtitle here to display a custom subtitle above the chart but below the title. If you don't enter a subtitle, no subtitle is displayed in the chart.</p></td>
    </tr>
    </tbody>
    </table>

3.  点击**更新**。

## 将图表下载为图像或PDF { #download-a-chart-as-an-image-or-a-pdf }

创建图表后，您可以将其下载到本地
计算机作为图像或 PDF 文件。

1.  点击**下载**。

2.  在**图形**下，单击** PNG（.png）**或** PDF（.pdf）**。

    该文件会自动下载到您的计算机。例如，现在您可以将图像文件作为报告的一部分嵌入到文本文档中。

## 下载图表数据源 { #download-chart-data-source }

您可以下载 HTML、JSON、XML 格式的图表背后的数据源，
Microsoft Excel 或 CSV 格式。数据文档使用以下标识符
维度项并在新的浏览器窗口中打开以显示 URL
地址栏中对 Web API 的请求。这对
基于 DHIS2 Web API 的应用程序和其他客户端模块的开发人员
或者对于那些需要计划数据源的人，例如用于导入
进入统计包。

要下载纯数据源格式：

1.  点击**下载**。

2.  在**普通数据源**下，单击要下载的格式。

    <table>
    <caption>Available formats</caption>
    <colgroup>
    <col style="width: 27%" />
    <col style="width: 72%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Format</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>HTML</p></td>
    <td><p>Creates HTML table based on selected meta data</p></td>
    </tr>
    <tr class="even">
    <td><p>JSON</p></td>
    <td><p>Downloads data values in JSON format based on selected meta data</p></td>
    </tr>
    <tr class="odd">
    <td><p>XML</p></td>
    <td><p>Downloads data values in XML format based on selected meta data</p></td>
    </tr>
    <tr class="even">
    <td><p>Microsoft Excel</p></td>
    <td><p>Downloads data values in Microsoft Excel format based on selected meta data</p></td>
    </tr>
    <tr class="odd">
    <td><p>CSV</p></td>
    <td><p>Downloads data values in CSV format based on selected meta data</p></td>
    </tr>
    </tbody>
    </table>

## 管理收藏夹 { #manage-favorites }

将您的图表或数据透视表保存为收藏夹，便于查找
他们后来。您还可以选择与其他用户共享它们作为
解释或显示在仪表板上。

您可以在**数据透视表**，**数据可视化器**，**事件可视化器**，**事件报告**应用中查看收藏夹的详细信息和解释。使用**收藏夹**菜单来管理您的收藏夹。

### 打开收藏夹 { #open-a-favorite }

1.  点击**收藏夹** \> **打开**。

2.  在搜索字段中输入收藏夹的名称，或单击 **Prev** 和 **Next** 以显示收藏夹。

3.  单击您要打开的收藏夹的名称。

### 保存收藏夹 { #save-a-favorite }

1.  点击**收藏夹** \> **另存为**。

2.  输入您喜欢的**名称**和**描述**。 description字段支持RTF格式，有关更多详细信息，请参见解释部分。

3.  点击**保存**。 

### 重命名收藏夹 { #rename-a-favorite }

1.  点击**收藏** \> **重命名**。

2.  输入您喜欢的新名称。

3.  点击**更新**。

### 为最喜欢的人写一个诠释 { #write-an-interpretation-for-a-favorite }

解释是到资源的链接，该资源具有给定时间段的数据描述。该信息在**仪表板**应用中可见。要创建解释，您首先需要创建收藏夹。如果您已经与其他人分享了自己的最爱，那么这些人就可以看到您编写的解释。

1.  点击**收藏夹** \> **写入解释**。

2.  在文本字段中，输入评论，问题或解释。您也可以使用'@username'提及其他用户。首先输入' @'，再加上用户名或真实姓名的首字母，然后出现一个提述栏，以显示可用的用户。提及的用户将收到内部DHIS2消息以及解释或评论。您可以在**仪表板**应用中查看解释。

    可以通过使用 Markdown 样式标记 \* 和 \_ 分别为 **bold** 和 _italic_ 来格式化文本为 **bold** 和 _italic_。键盘快捷键也可用：Ctrl/Cmd + B 和 Ctrl/Cmd + I。支持一组有限的表情符号，可以通过键入以下字符组合之一来使用：:) :-) :( :-( :+ 1 :-1. URL 被自动检测并转换为可点击的链接。

3.  搜索您想与之分享您最爱的用户组，然后单击 **+** 图标。

4.  更改要修改的用户组的共享设置。

    -   **可以编辑和查看**：每个人都可以查看和编辑对象。

    -   **只能查看**：每个人都可以查看对象。

    -   **无**：公众将无法访问该对象。此设置仅适用于**公共访问**。

5.  点击**共享**。

### 订阅收藏 { #subscribe-to-a-favorite }

当您订阅收藏时，您会收到内部消息
每当另一个用户喜欢/创建/更新解释或
创建/更新此收藏夹的解释注释。

1.  打开收藏夹。

2.  单击工作区右上方的** \> \> \> **。

3.  单击右上角的响铃图标以订阅此收藏。

### 创建指向收藏夹的链接 { #create-a-link-to-a-favorite }

1.  点击**收藏夹** \> **获取链接**。

2.  选择以下之一：

    -   **在此应用中打开**：您将获得收藏夹的 URL，您可以通过电子邮件或聊天与其他用户分享。

    -   **在 web api 中打开**：您将获得 API 资源的 URL。默认情况下，这是一个 HTML 资源，但您可以将文件扩展名更改为“.json”或“.csv”。

### 删除收藏夹 { #delete-a-favorite }

1.  点击**收藏** \> **删除**。

2.  点击**确定**。

### 查看基于相对期间的解释 { #view-interpretations-based-on-relative-periods }

要查看相对时期的解释，例如一年前：

1.  用解释打开收藏夹。

2.  单击工作区右上方的** \> \> \> **。

3.  单击解释。您的图表根据创建解释的时间显示数据和日期。要查看其他解释，请单击它们。

## 将图表可视化为数据透视表 { #visualize-a-chart-as-a-pivot-table }

制作图表后，可以将其作为数据透视表打开：

单击**图表** \> **以表形式打开此图表**。

# 报告应用程序中的报告功能 { #using_the_reports_app }

该报告应用程序可用于罐装，标准报告，数据集报告，资源和组织单位分布报告。

## 使用标准报告 { #standard_reports_in_the_beta_reports_app }

您可以通过导航到 Apps-\>Reports 来访问可用的报告。在里面
在左侧栏中的报告菜单中，单击标准报告。所有的清单
预定义的报告将出现在主窗口中。

![](resources/images/dhis2UserManual/react_reports_app_standard_reports.png)

您可以通过单击报告的三点图标来运行/查看报告，然后
从上下文菜单中选择“创建”。如果有任何
预定义的参数，您将看到一个报告参数窗口，您可以在其中
必须填写组织单位和/或报告月份所需的值，
取决于在基础报告表中定义的内容。
准备好后，单击“生成报告”。报告要么出现
直接在您的浏览器中或作为 PDF 文件下载，
取决于您处理 PDF 文件的浏览器设置。你可以保存
文件并将其保存在本地计算机上以备后用。

## 使用数据集报告 { #dataset_reports_in_the_beta_reports_app }

数据集报告是数据输入屏幕的打印机友好视图，其中填充了原始数据或汇总数据。

您可以从Apps-> Reports访问数据集报告。

将出现一个标准窗口，您可以在其中填写您的详细信息
报告：

**数据集：**您要显示的数据集。

**报告期间：** 您想要数据的实际期间。这可以是
聚合期和原始期。这意味着您可以要求
季度或年度报告，即使收集了数据集
每月。数据集的周期类型（收集频率）定义在
数据集维护。首先选择期间类型（Monthly、Quarterly、
每年等）在 Prev 和 Next 按钮旁边的下拉菜单中，然后
从下面的下拉列表中选择一个可用的时间段。用
Prev 和 Next 可向后或向前跳跃一年。

**仅使用所选单位的数据：** 如果您想要一个
报告有孩子的组织单位，但只想要数据
直接为本单位收集的数据，而不是其收集的数据
孩子们。如果您想要一个组织单位的典型汇总报告，您可以
不想勾选这个选项。

**报告组织单位：** 在这里选择你想要的组织单位
的报告。这可以在层次结构中的任何级别作为数据
将自动聚合到此级别（如果您不勾选
上面的选项）。

填写完报告标准后，单击
“产生”。该报告将以 HTML 格式以打印机友好的格式显示。
使用浏览器中的打印和另存为功能进行打印或保存（如
HTML) 报告。您还可以在 Excel 中导出数据集报告和
PDF 格式。

## 使用报告率摘要 { #reporting_rate_summary_in_the_beta_reports_app }

从应用程序-\>报告菜单访问报告率摘要。
报告率摘要将显示有多少数据集（表格）
由组织单位和时间提交。

报告率是根据完整的数据集注册计算得出的。
完整的数据集注册是指用户将数据输入表单标记为
完成，通常通过单击数据输入屏幕中的完成按钮，
特此向系统表明她认为该表格是
完全的。这是一种主观的计算方法
完整性。

报告率摘要将为每一行显示一系列度量：

-   实际报告：表示相关数据集的数据输入完成注册数。

-   预期报告：指示预期有多少数据输入完成注册。此数字基于相关数据集已分配到的组织单位的数量（已启用数据输入）。

-   报告率：根据预期数量登记为完整的报告的百分比。

-   及时报告：与实际报告相同，仅在报告期结束后的最大天数内登记为完整的报告。可以在数据集管理中为每个数据集定义报告期之后的天数。

-   报告准时率：与百分比相同，仅作为分子记录为按时完成的报告。

要运行报告，您可以按照以下步骤操作：

-   从树中选择一个组织单位。
-   选择一个数据集。

-   从该期间类型的可用期间列表中选择期间类型和期间。

-   然后将呈现报告。更改上面的任何参数，然后再次单击“获取报告”查看相应的结果。

![](resources/images/dhis2UserManual/react_reports_app_reporting_rate_summary.png)

## 使用资源 { #resources_in_the_beta_reports_app }

资源工具允许您从本地上传这两个文件
计算机到 DHIS 服务器并添加到其他资源的链接
通过 URL 上网。如果您的系统配置了云存储，
资源将保存在那里。

要创建新资源：

1.  打开**报告**应用，然后单击**资源**。

2.  点击**添加新**。

3.  输入一个**名称**。

4.  选择**类型**：**上传文件**或**外部URL**。

5.  点击**保存**。 

## 使用组织单位分布报告 { #orgunit_distribution_reports_in_the_beta_reports_app }

您可以从左侧菜单访问 Orgunit Distribution 报告
在应用程序-\>报告中。

组织单位分布报告是显示组织单位如何
分布在各种属性上，如类型和所有权，以及
地理区域。

结果可以显示在基于表的报告或图表中。

**运行报告：**

要运行报告，首先在左上角的组织单位中选择一个组织单位
树。该报告将基于位于所选
单位。选择要使用的组织单位组集，
通常这些是类型、所有权、农村/城市，但可以是任何
用户定义的组织单位组集。您可以单击获取报告
获取基于表格的演示或获取图表以获得相同的结果
在图表中。您还可以将基于表格的报告下载为 Excel 或
CSV。

![](resources/images/dhis2UserManual/react_reports_app_org_unit_dist.png)

# 讯息传递 { #messages }

## 关于消息和反馈消息 { #about-messages-and-feedback-messages }

![](resources/images/messaging/view_inbox.png)

在 DHIS2 中，您可以向用户发送消息和反馈消息，用户
团体和组织单位。当您发送反馈消息时，它是
路由到称为反馈接收者组的特定用户组。
如果您是该用户组的成员，您可以访问反馈
处理工具。例如，您可以设置传入的状态
在您等待信息时向“待定”反馈。

除了用户对用户和反馈消息外，取决于您的
配置系统还会向您发送系统生成的消息。
这些消息可以由不同的事件触发，包括系统
或后台作业失败和验证分析结果。反馈
处理工具也可用于验证结果和
优先级将设置为违反验证规则的重要性。

要访问该应用程序，请点击标**题栏中的消息图标**或在应用程序搜索框中找到**消息传递**应用程序。

> **注意**
>
> 消息和反馈消息不会发送到用户的电子邮件地址，消息仅出现在 DHIS2 中。
>
> 在 2.30 中，我们引入了一个新的消息传递应用程序，它提供了更丰富的消息传递体验。具体来说：
>
> - 通过单击右上角的图标在列表视图和紧凑视图之间切换。
>
> - 列表视图非常简单，可以很好地概述所有消息，特别适合反馈和验证消息。
> - 紧凑视图是一种查看消息的现代方式，用户在一个视图中拥有更多信息，因此查看和回复多条消息更容易。
>
> 此部分的第一个屏幕截图显示列表视图，而**阅读消息**部分的屏幕截图显示紧凑视图。
>
> - 添加了一个新的搜索字段，使用户能够搜索消息。搜索过滤不同消息属性的消息；主题、文本和发件人。这意味着您可以通过输入搜索来缩小消息对话列表的范围。
>
> - 添加了自动刷新功能，以便应用以设定的时间间隔（每 5 分钟一次）获取新消息。默认情况下禁用此功能。
>
> - 对于每个消息对话，您都可以将参与者添加到对话中。如果您想对特定对话进行输入，或者如果有人也应该看到信息，这将非常有用。无法从对话中删除参与者。

## 建立讯息 { #create-a-message }

![](resources/images/messaging/create_private_message.png)

1.  点击**撰写**。

2.  定义您希望接收消息的人。您可以向组织单位、用户和用户组发送消息。

    -   在 **To** 字段中，您可以搜索组织单位、用户和用户组并选择所需的收件人。

3.  键入一个主题和一条消息。

4.  点击**发送**。

## 阅读讯息 { #read-a-message }

![](resources/images/messaging/read_message.png)

1.  在左侧选择适当的消息类型。

2.  单击一条消息。

    如果消息是对话的一部分，您将看到此对话中的所有消息。

## 创建反馈消息 { #create-a-feedback-message }

1.  按照创建消息的步骤进行操作，仅选择**反馈消息 **，而不输入收件人。

2.  该消息将被创建为反馈消息，并将出现在所有指定用户的 ** Ticket**文件夹中。

## 附件 { #attachments }

在 2.31 中，我们为消息引入了附件。创建时或
回复您可以添加的消息对话
附件。目前没有对类型或大小的限制
文件。

## 管理验证和反馈消息 { #manage-validation-and-feedback-messages }

> **注意**
>
> 如果您是设置为处理反馈消息的用户组的成员，您将只能看到反馈消息并可以访问扩展的处理工具。
>
> 使用新应用程序，您可以通过查看消息或检查对话列表中的消息时出现的图标菜单来管理票证和验证消息的扩展工具。

### 选择所有消息 { #all-messages-selected }

![已选择所有消息](resources/images/messaging/view_validation_select_all.png)

### 选择所有邮件并选择扩展选择器 { #all-messages-selected-and-extended-choice-picker-selected }

![选择了所有消息并选择了扩展选择器](resources/images/messaging/view_validation_select_all_icon_menu.png)

您将收到反馈信息到**Ticket**文件夹，并收到确认消息到**Validation**文件夹。对于反馈和验证消息，除了消息选项外，还具有以下选项：

 <table style="width:100%;">
 <caption>反馈处理工具</caption>
 <colgroup>
 <col width="23%" />
 <col width="76%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th>功能</th>
 <th>说明</th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p> <strong>优先级</strong> </p> </td>
 <td> <p>您可以标记具有不同优先级的反馈/验证消息：<strong>无</strong>，<strong>低</strong>，<strong>中</strong>或<strong>高</strong>， </p>
 <p>设置优先级可以更轻松地跟踪您首先需要解决的反馈消息以及可以等待的反馈消息。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p><strong> 状态 </strong></p> </td>
 <td> <p>所有反馈/验证消息的状态均为创建后<strong>打开</strong>。 </p>
 <p>要跟踪现有的反馈消息，可以将状态更改为<strong>待处理</strong><strong>无效</strong>或<strong>已解决</strong>。</p>
 <p>您可以使用内部标题栏中的两个下拉菜单，根据反馈/验证消息的状态过滤反馈/验证消息。</p> </td>
 </tr>
 <tr class="odd">
 <td>  <p><strong>分配给</strong></p>  </td>
 <td><p>您可以将反馈消息分配给设置为处理反馈消息的用户组的任何成员。 </p>
 <p>您可以将验证消息分配给系统中的任何用户。 </p>
 <p><strong> -</strong>表示您尚未将用户分配给反馈消息。  </p></td>
 </tr>
 <tr class="even">
  <td><p><strong> 内部回复  </strong></p></td> 
<td><p>在反馈处理小组中工作时，您可能需要先讨论反馈，然后再将答案发送给发件人。您可以将此讨论与反馈本身保持在同一消息对话中。 </p>
 <p>要在反馈处理用户组中发送答复，请单击<strong>内部答复</strong>。 </p></td>
 </tr>
 </tbody>
 </table>

## 配置反馈信息功能 { #configure-feedback-message-function }

要配置反馈消息功能，您必须：

1.  创建一个包含所有应接收反馈消息的用户的用户组（例如“反馈消息收件人”）。

2.  打开**系统设置**应用程序，然后单击**常规**\>**反馈收件人**并选择您在上一步中创建的用户组。

# 设置用户帐户首选项 { #user_account_preferences }

在**用户设置**中，您可以更改DHIS2的显示语言和数据库的语言。数据库语言是元数据的翻译内容，例如数据元素和指示符。您还可以选择一种显示样式，并启用或禁用SMS和电子邮件通知。如果愿意，可以选择在分析模块中显示一个短名称，例如“ Joe”，而不是全名。

在**用户个人资料**中，您可以将个人信息添加到个人资料中，例如电子邮件地址，手机号码，出生日期，个人资料图片等。当您发送消息时，接收消息的人可以看到这些个人资料详细信息。您还可以提供系统将使用的各种直接消息传递服务的帐户名。

在**帐户设置**中，您可以重设密码并设置2-Factor身份验证。设置2-Factor身份验证将需要您在移动设备上下载Google Authenticator应用。

在**查看完整的个人资料**部分，您可以找到个人资料详细信息的摘要。本节包含一些您无法编辑的字段，例如用户角色和用户组织单位。

在**关于DHIS2**部分中，您找到有关DHIS2实例的详细信息列表。

# 配置元数据 { #maintenance_app }

## 关于维护应用 { #about_maintenance_app }

In the **Maintenance** app you configure all the metadata objects you need to collect and analyze data:

-   分类目录

-   资料元素

-   数据集和数据输入表格

-   指标

-   组织单位

-   程序元数据：被跟踪实体、被跟踪实体属性和关系类型

-   验证规则

-   属性

-   常数

-   选项集

-   传说

-   预测变量

-   推送报告

-   外部地图图层

> **注意**
>
> 您有权访问的功能取决于您的用户角色的访问权限。

### 导航元数据对象 { #navigating_metadata }

元数据对象以列表的形式显示，其中包含与每个对象相关的预定义列。
您可以自定义当前对象列表中显示的列。这些自定义是针对每个用户的，因此不会影响其他用户。请注意，这些更改不会编辑任何元数据，只会编辑列表的显示方式。

#### 管理可见列 { #managing-visible-columns }

![](resources/images/maintainence/configurable_columns_dialog.png)

1. 单击要配置的对象列表右上角的 ![settings-icon](resources/images/maintainence/icon_settings.png) -图标。
2. A dropdown-menu will appear, select **Manage columns**.
3. 将出现一个对话框，并选择默认列。
4. Click any column-name in the list of **Available columns** to add them to the list of selected columns.
5. 您可以通过拖放 ![reorder-icon](resources/images/maintainence/icon_reorder.png) -icon 对选定的列重新排序。
6. 您也可以通过单击名称旁边的X图标，从视图中删除任何列。
7. Click **Save** once you are satisified with your changes.

You may easily reset to the default values by clicking the **Reset to default** button.

##### 下载元数据 { #download-metadata }

您可以下载当前正在查看的对象的元数据。元数据下载将遵守您对该列表有效的所有过滤器。

1. 单击要配置的对象列表右上角的 ![settings-icon](resources/images/maintainence/icon_settings.png) -图标。
2. 将会出现一个下拉菜单，选择**下载**。
3. 将出现一个对话框，您可以在其中选择所需的格式和压缩率。
4. 可以选择**具有共享**以包括元数据的共享数据。

## 管理类别 { #manage_category }

### 关于类别 { #about_category }

类别通常是一个概念，例如“性别”，“年龄”或“
“疾病状态”。数据元素，例如“已确认病例数
疟疾”通常分为较小的组成部分，以便确定
例如，已确认的特定年龄组的疟疾病例数。

使用类别将数据元素分解为单个组件。
您还可以使用类别为所有数据分配元数据属性
记录在特定的数据集中，例如“实施伙伴”或
“资金代理机构。”

创建三个类别：“ 1岁以下”，“ 1-5”和“ 5岁以上”。将它们分配为
数据元素的类别。这将为创建三个单独的字段
此数据以数据输入形式：

-   确诊的疟疾病例数（1岁以下）

-   确诊的疟疾病例数（1-5）

-   确诊的疟疾病例数（5例以上）

没有类别，您将不得不创建每个数据
上面单独列出的元素。

In the **Maintenance** app, you manage the following and category objects:

<table>
<caption>Category objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Category option</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Category</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Category combination</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Category option combination</p></td>
<td><p>Edit and show details</p></td>
</tr>
<tr class="odd">
<td><p>Category option group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Category option group set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_category }

1.  创建所有类别选项。

2.  创建由您创建的多个类别选项组成的类别。

3.  创建由一个或多个类别组成的类别组合。

4.  创建数据元素并将其分配给类别组合。

### 创建或编辑类别选项 { #create_category_option }

如果可能，请回收类别选项。例如，可能有
可能共享特定类别选项的两个类别（对于
例如\ <1岁）。创建类别时，此类别
选项可以重复使用。如果特定类别选项很重要
（或类别选项组合）需要一起分析。

1.  Open the **Maintenance** app and click **Category** \> **Category option**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **开始日期**

    3.  **结束日期**

4.  选择组织单位并分配它们。

    > **Tip**
    >
    > You can automatically select all organisation units that belong to an organisation unit level or organisation unit group, for example "Chiefdom" or "Urban. To do this:
    >
    > Select an **Organisation unit level** or **Organisation unit group** and click **Select**.

5.  点击**保存**。 

### 创建或编辑类别 { #create_category }

为特定类别创建所有类别选项后，
您可以创建该类别。

1.  Open the **Maintenance** app and click **Category** \> **Category**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **码**

    3.  **数据维度类型**

        A category either be of type "Disaggregation" or "Attribute". For disaggregation of data elements, you select **Disaggregation**. The data dimension type "Attribute" allows the category to be used to assign a combination of categories to data recorded through a data set.

    4.  **数据尺寸**

        If you select **Data dimension**, the category will be available to the analytics as another dimension, in addition to the standard dimensions of "Period" and "Organisation unit".

4.  选择类别选项并分配它们。

5.  点击**保存**。 

### 创建或编辑类别组合 { #create_category_combination }

类别组合可让您将多个类别组合成一个
相关集。

您可以分解数据元素“新感染艾滋病毒的数量”
分为以下几类：

-   艾滋病毒服务：“其他”，“ PMTCT”，“结核病”

-   性别：“男”，“女”

在此示例中，有两个分解级别，包括
两个单独的数据元素类别。每个数据元素类别包括
几个数据元素类别选项。

在DHIS2中，根据
常见的一组类别。通过将这些不同的类别合并为一个
类别组合并将这些组合分配给数据元素，
您可以将适当的分类级别快速应用于大型
数据元素数。

1.  Open the **Maintenance** app and click **Category** \> **Category combination**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **码**

    3.  **数据维度类型**

    4.  **报告中的跳过类别总计**

4.  选择类别并分配它们。

5.  点击**保存**。 

### 创建或编辑类别选项组 { #create_category_option_group }

您可以使用类别选项对类别选项进行分组和分类
组。类别选项组集的主要目的是添加更多
您捕获的数据的维数，以便在例如
**数据透视表**或**数据可视化器**应用。

考虑一个由“项目”收集数据并为项目建模的系统
作为类别选项。系统必须能够基于
哪个捐助者支持该项目。在这种情况下，创建一个类别
选项组集称为“捐赠者”。每个捐赠者都可以创建为一个类别
选项组，其中每个类别选项/项目都放在
适当的组。在数据分析应用程序中，“捐赠者”组
集将显示为数据维度，而每个供体显示为
尺寸项目，准备包含在报告中。

要创建类别选项组：

1.  Open the **Maintenance** app and click **Category** \> **Category option group**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **短名称**：为数据元素定义一个短名称。

    3.  **码**

    4.  **数据维度类型**

4.  选择**类别选项**并分配它们。

5.  点击**保存**。 

### 创建或编辑类别选项组集 { #create_category_option_group_set }

您可以将类别选项组分组在类别选项组集中。的
类别选项组集的主要目的是添加更多
您捕获的数据的维数，以便在例如
**数据透视表**或**数据可视化器**应用。

1.  Open the **Maintenance** app and click **Category** \> **Category option group set**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **描述**

    3.  **数据尺寸**

    4.  **数据维度类型**

4.  Select **Category option groups** and assign them.

5.  点击**保存**。 

### 对数据集使用类别组合 { #use_category_combo_for_data_set }

当类别和类别组合具有数据维类型时
“属性”，他们可以将一组通用属性应用于相关的一组
包含在数据集中的数据值。当类别组合为
用作属性，它们用作另一个维度（类似于
您可以在分析中使用的“期间”和“组织单位”。

假设非政府组织在给定的设施中提供ART服务。他们
需要每个月在“ ART每月摘要”中进行报告，
将包含许多数据元素。非政府组织和项目可以
可能会随着时间而改变。为了将数据归因于给定的NGO
和项目在任何时间点，您需要记录此信息
在输入数据时使用每个数据值。

1.  使用数据维度类型“属性”创建两个类别：“实施伙伴”和“项目”。

2.  创建具有数据维度类型“属性”的类别组合：“实施合作伙伴和项目”。

3.  将您创建的类别分配给类别组合。

4.  创建一个名为“ART 月度总结”的数据集，并选择“实施合作伙伴和项目”类别组合。

When you enter data in the **Data entry** app, you can select an "Implementing partner" and a "Project". Each recorded data value, is assigned a specific combination of these categories as an attribute. These attributes (when specified as a dimension) can be used in the analysis applications similar to other dimensions, for example the period and organisation unit.

![](resources/images/maintainence/categories_dataset_attributes.png)

### 将代码分配给类别选项组合 { #assign_code_category_option_combo }

您可以将代码分配给类别选项组合。这使得数据
DHIS2与外部系统之间的交换更加容易。系统创建
类别选项组合自动。

1.  打开 **Maintenance** 应用程序并单击 **Category** \> **Category 选项组合**。

2.  在列表中，找到要修改的对象。

3.  点击选项菜单，然后选择**编辑**。

4.  输入验证码。

5.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
> 默认设置是每个人（**公共访问**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  （可选）添加用户或用户组：搜索用户或用户组并选中。用户或用户组被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **No access**（仅适用于**Public access**）：公众将无权访问该对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组将无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理数据元素 { #manage_data_element }

### 关于数据元素 { #about_data_element }

数据元素是DHIS2的基础。数据元素定义什么
实际记录在系统中，例如免疫接种次数或
疟疾病例数。

诸如“确诊疟疾病例数”之类的数据元素通常
分解成较小的组成部分，例如确定
特定年龄段已确诊的疟疾病例数。

In the **Maintenance** app, you manage the following data elements objects:

<table>
<caption>Data element objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Data element</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Data element group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Data element group set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_data_element }

1.  创建所有类别选项。

2.  创建由您创建的多个类别选项组成的类别。

3.  创建由一个或多个类别组成的类别组合。

4.  创建数据元素并将其分配给类别组合。

### 创建或编辑数据元素 { #create_data_element }

![](resources/images/maintainence/create_data_element.png)

1.  Open the **Maintenance** app and click **Data elements** \> **Data element**.

2.  点击添加按钮。

3.  In the **Name** field, define the precise name of the data element.

    每个数据元素必须具有唯一的名称。

4.  In the **Short name** field, define a short name for the data element.

    通常，短名称是完整数据元素名称的缩写。此属性通常在报表中用于显示数据元素的名称，但空间有限。

5.  （可选）在 **Code** 字段中，分配一个代码。 

    在许多国家/地区，为数据元素分配了代码。

6.  (Optional) In the **Color** field, assign a color which will be used for this data element in the data capture apps.

7.  (Optional) In the **Icon** field, assign an icon which will be used for this data element in the data capture apps.

8.  In the **Description** field, type a description of the data element. Be as precise as possible and include complete information about how the data element is measured and what its purpose is.

9.  (Optional) In the **Field mask** field, you may type a template that's used to provide hints for correct formatting of the data element.

    > **NOTE**
    >
    > So far this is only implemented in the DHIS2 Android Capture app; not in the Capture and Tracker Capture web apps.

    以下是可在遮罩中使用的特殊字符。特殊字符与给定类型的一个字符完全匹配。

    |性格匹配|
    | --------- | -------------------------- |
    | \\ d |数字|
    | \\ x |小写字母|
    | \\ X |大写字母|
    | \\ w |任何字母数字字符|

    例如，该模式可用于根据需要在数据元素的输入字段中显示连字符。例如 "\d\d\d-\d\d\d-\d\d\d，每三位数显示一个连字符。

10. In the **Form name** field, type an alternative name of the data element. This name can be used in either section or automatic data entry forms. The form name is applied automatically.

11. In the **Domain type** field, select whether the data element is an aggregate or tracker type of data element.

12. In the **Value type** field, select the type of data that the data element will record.

    <table>
    <caption>Value types</caption>
    <colgroup>
    <col style="width: 53%" />
    <col style="width: 46%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Value type</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Age</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>Coordinate</p></td>
    <td><p>A point coordinate specified as longitude and latitude in decimal degrees. All coordinate should be specified in the format &quot;-19.23 , 56.42&quot; with a comma separating the longitude and latitude.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Date</p></td>
    <td><p>Dates rendered as calendar widget in data entry.</p></td>
    </tr>
    <tr class="even">
    <td><p>Date &amp; time</p></td>
    <td><p>Is a combination of the <strong>DATE</strong> and <strong>TIME</strong> data elements.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Email</p></td>
    <td><p>Email.</p></td>
    </tr>
    <tr class="even">
    <td><p>File</p></td>
    <td><p>A file resource where you can store external files, for example documents and photos.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Image</p></td>
    <td><p>A file resource where you can store photos.</p>
    <p>Unlike the <strong>FILE</strong> data element, the <strong>IMAGE</strong> data element can display the uploaded image directly in forms.</p></td>
    </tr>
    <tr class="even">
    <td><p>Integer</p></td>
    <td><p>Any whole number (positive and negative), including zero.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Letter</p></td>
    <td><p>A single letter.</p></td>
    </tr>
    <tr class="even">
    <td><p>Long text</p></td>
    <td><p>Textual value. Renders as text area with no length constraint in forms.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Negative integer</p></td>
    <td><p>Any whole number less than (but not including) zero.</p></td>
    </tr>
    <tr class="even">
    <td><p>Number</p></td>
    <td><p>Any real numeric value with a single decimal point. Thousands separators and scientific notation is not supported.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Percentage</p></td>
    <td><p>Whole numbers inclusive between 0 and 100.</p></td>
    </tr>
    <tr class="even">
    <td><p>Phone number</p></td>
    <td><p>Phone number.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Positive integer</p></td>
    <td><p>Any whole number greater than (but not including) zero.</p></td>
    </tr>
    <tr class="even">
    <td><p>Positive or zero integer</p></td>
    <td><p>Any positive whole number, including zero.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Organisation unit</p></td>
    <td><p>Organisation units rendered as a hierarchy tree widget.</p>
    <p>If the user has assigned &quot;search organisation units&quot;, these will be displayed instead of the assigned organisation units.</p></td>
    </tr>
    <tr class="even">
    <td><p>Unit interval</p></td>
    <td><p>Any real number greater than or equal to 0 and less than or equal to 1.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Text</p></td>
    <td><p>Textual value. The maximum number of allowed characters per value is 50,000.</p></td>
    </tr>
    <tr class="even">
    <td><p>Time</p></td>
    <td><p>Time is stored in HH:mm format.</p>
    <p>HH is a number between 0 and 23</p>
    <p>mm is a number between 00 and 59</p></td>
    </tr>
    <tr class="odd">
    <td><p>Tracker associate</p></td>
    <td><p>Tracked entity instance. Rendered as dialog with a list of tracked entity instances and a search field.</p></td>
    </tr>
    <tr class="even">
    <td><p>Username</p></td>
    <td><p>DHIS2 user. Rendered as a dialog with a list of users and a search field. The user will need the "View User" authority to be able to utilise this data type</p></td>
    </tr>
    <tr class="odd">
    <td><p>Yes/No</p></td>
    <td><p>Boolean values, renders as drop-down lists in data entry.</p></td>
    </tr>
    <tr class="even">
    <td><p>Yes only</p></td>
    <td><p>True values, renders as check-boxes in data entry.</p></td>
    </tr>
    </tbody>
    </table>

13. In the **Aggregation type** field, select the default aggregation operation that will be used on the data element.

    Most data elements should have the **Sum** operator. This includes all data elements which should be added together. Other data elements, such as staffing levels, should be set to use the **Average** operator, when values along the time dimension should not be added together, but rather averaged.

    <table>
    <caption>Aggregation operators</caption>
    <colgroup>
    <col style="width: 50%" />
    <col style="width: 50%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Aggregation operator</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Average</p></td>
    <td><p>Average the values in both the period as and the organisation unit dimensions.</p></td>
    </tr>
    <tr class="even">
    <td><p>Average (sum in organisation unit hierarchy)</p></td>
    <td><p>Average of data values in the period dimension, sum in the organisation unit dimensions.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Count</p></td>
    <td><p>Count of data values.</p></td>
    </tr>
    <tr class="even">
    <td><p>Min</p></td>
    <td><p>Minimum of data values.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Max</p></td>
    <td><p>Maximum of data values.</p></td>
    </tr>
    <tr class="even">
    <td><p>None</p></td>
    <td><p>No aggregation is performed in any dimension.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Sum</p></td>
    <td><p>Sum of data values in the period and organisation unit dimension.</p></td>
    </tr>
    <tr class="even">
    <td><p>Standard deviation</p></td>
    <td><p>Standard deviation (population-based) of data values.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Variance</p></td>
    <td><p>Variance (population-based) of data values.</p></td>
    </tr>
    </tbody>
    </table>

14. If you want to save zeros for a particular reason, select **Store zero data values**. By default, DHIS2 does not store zeros entered in the data entry module.

15. In the **URL** field, enter a link to an in-depth description of the data element.

    例如，指向元数据存储库或注册表的链接，其中包含有关数据元素定义和测量的详细技术信息。

16. In the **Category combination** field, define which category combination the data element should have. This is also known as the "disaggregation".

17. 选择一个**选项集**。

    选项集是可用于数据输入的预定义选项列表。

18. Select an **Option set for comments**.

    注释选项集是预定义的选项列表，可用于为数据输入中的数据值指定标准化注释。

19. 分配一个或多个**传奇**。

    Legends are used in for example the **Maps** app to display certain data elements with certain icons.

20. Set the **Aggregation levels** to allow the data element to be aggregated at one or more levels:

    1.  在左窗格中，选择要分配给数据元素的级别。

    2.  单击右箭头以指定聚合级别。

    默认情况下，聚合将从分配的最低组织单位开始。例如，如果选择“Chiefdom”，则表示“Chiefdom”、“District”和“National”聚合使用“Chiefdom”（可用的最高聚合级别）作为数据源，不会包含 PHU 数据。 PHU 数据仍可用于 PHU 级别，但不包含在上述级别的汇总中。

    如果同时选择“District”和“Chiefdom”，则表示“District”和“National”级别的聚合使用 District 数据作为来源，“Chiefdom”将使用 Chiefdom，“PHU”将使用 PHU。

21. 如果适用，请输入自定义属性值，例如 **Classification** 或 **Collection method**。

    > **Note**
    >
    > You create custom attributes in the **Maintenance** app: **Other** > \> **Attributes**.

22. 如果适用，请选择强制性数据元素组集，例如**主要数据元素组**或**基于跟踪器的数据**。

    > **Note**
    >
    > You'll only see data element group sets in this form if you've created them and set them to **Compulsory**.
    >
    > You create data element group sets in the **Maintenance** app: **Data element** \> **Date element group set**.

23. 点击**保存**。 

### 创建或编辑数据元素组 { #create_data_element_group }

数据元素组可让您将相关数据元素分类为
共同的主题。例如，两个数据元素“麻疹免疫”和
“ BCG免疫”可以分组为一个数据元素组
“儿童免疫”。

要创建数据元素组：

1.  Open the **Maintenance** app and click **Data elements** \> **Data element group**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **简称**

    3.  **码**

4.  选择数据元素并分配它们。

5.  点击**保存**。 

### 创建或编辑数据元素组集 { #create_data_element_group_set }

数据元素组集可让您对多个数据元素进行分类
组成一组。系统在以下过程中使用数据元素组集
分析和报告，以将相似的数据元素组合并为一个
共同的主题。一个数据元素组可以是多个数据元素的一部分
组集。

1.  Open the **Maintenance** app and click **Data elements** \> **Data element group set**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **码**

    3.  **描述**

    4.  **必修**

    5.  **数据尺寸**

4.  选择数据元素组并分配它们。

    可用的数据元素组显示在左侧面板中。当前是数据元素组集成员的数据元素组显示在右侧面板中。

5.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
> 默认设置是每个人（**公共访问**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  （可选）添加用户或用户组：搜索用户或用户组并选中。用户或用户组被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **No access**（仅适用于**Public access**）：公众将无权访问该对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组将无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理数据集和数据输入表单 { #manage_data_set }

### 关于数据集和数据输入表格 { #about_dataset_dataform }

All data entry in DHIS2 is organised in data sets. A data set is a collection of data elements grouped together for data entry and data export between instances of DHIS2. To use a data set to collect data for a specific organisation unit, you must assign the organisation unit to the data set. Once you have assigned the data set to an organisation unit, that data set is available in the **Data entry** app. Only the organisation units that you have assigned the data set to can use the data set for data entry.

A category combination can link to both data elements and data sets. If you use a category combination for a data set, the category combinations is applicable for the whole form. This means that you can use categories to capture information which is common to an entire form, for example the name of the a project or grant. When a data set is linked to a category combination, those categories will be displayed as drop-down boxes in the **Data entry** app. Data captured in the form will then be linked to the selected category options from those drop-down boxes. For information about how to create categories and category combinations, see section "Manage data elements and categories". Make sure that you set the type of categories and category combinations to "Attribute".

类别有用的一种情况是您需要捕获一个类别
实施伙伴组织和项目的数据输入表。
在这种情况下：

1.  为所有合作伙伴组织和项目创建类别选项和类别，并将它们链接到新的类别组合中。

2.  将类别组合分配给您需要为其捕获此信息的数据集（表单）。

    在数据录入模块中打开该数据集时，合作伙伴组织和项目类别将自动呈现为下拉框，您可以在继续进行数据录入之前选择具体的实施合作伙伴组织和项目。

You create and edit data sets in the **Maintenance** app. Here you define, for example, which data elements you want to include in the data set and the data collection frequency.

You enter data in the **Data entry** app. The **Data entry** app uses data entry forms to display the data sets. There are three types of data entry forms:

<table>
<caption>Data entry form types</caption>
<colgroup>
<col style="width: 37%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="header">
<th>Data entry form type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Default form</p></td>
<td><p>Once you have assigned a data set to an organisation unit, a default form is created automatically. The default form is then available in the <strong>Data entry</strong> app for the organisation units you have assigned it to.</p>
<p>A default form consist of a list of the data elements belonging to the data set together with a column for inputting the values. If your data set contains data elements with a non-default category combination, for example age groups or gender, additional columns are automatically created in the default form based on the different categories.</p>
<p>If you use more than one category combination you get multiple columns in the default form with different column headings for the options.</p></td>
</tr>
<tr class="even">
<td><p>Section form</p></td>
<td><p>If the default form doesn't meet your needs, you can modify it to create a section form. Section forms give you more flexibility when it comes to using tabular forms.</p>
<p>In a section form you can, for example, create multiple tables with subheadings and disable (grey out) cells in a table.</p>
<p>When you have added a section form to a data set, the section form is available in the <strong>Data entry</strong> app.</p></td>
</tr>
<tr class="odd">
<td><p>Custom form</p></td>
<td><p>If the form you want to design is too complicated for default or section forms, you can create a custom form. A custom form takes more time to create than a section form, but you have full control over the design.</p>
<p>You can, for example, mimic an existing paper aggregation form with a custom form. This makes data entry easier, and should reduce the number incorrectly entered data elements.</p>
<p>When you have added a custom form to a data set, the custom form is available in the <strong>Data entry</strong> app.</p></td>
</tr>
</tbody>
</table>

> **注意**
>
> 如果一个数据集同时有一个部分表格和一个自定义表格，系统在数据输入过程中显示自定义表格。输入数据的用户无法选择他们想要使用的表单。在基于 Web 的数据输入中，显示偏好的顺序是：
>
> 1. 自定义表单（如果存在）
>
> 2. 截面形式（如果存在）
>
> 3. 默认形式
>
> 移动设备不支持自定义表单。在基于移动的数据输入中，显示偏好的顺序是：
>
> 1. 截面形式（如果存在）
>
> 2. 默认形式

In the **Maintenance** app, you manage the following data set objects:

<table>
<caption>Data set objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Data set</p></td>
<td><p>Create, assign to organisation units, edit, share, delete, show details and translate</p>
<p>Edit compulsory data elements</p>
<p>Add and remove multiple data sets to organisation units at once</p></td>
</tr>
<tr class="even">
<td><p>Section form</p></td>
<td><p>Create, edit and manage grey fields</p></td>
</tr>
<tr class="odd">
<td><p>Section</p></td>
<td><p>Change display order, delete and translate</p></td>
</tr>
<tr class="even">
<td><p>Custom form</p></td>
<td><p>Create, edit and script</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_data_set }

您需要具有数据元素和类别才能创建数据集和
数据输入表格。

1.  创建一个数据集。

2.  将数据集分配给组织单位。

    默认形式是自动创建的。

3.  创建节形式或自定义形式。

    Now you can register data in the **Data entry** app.

### 创建或编辑数据集 { #create_data_set }

![](resources/images/datasets/data_set_create.png)

1.  打开 **Maintenance** 应用程序并单击 **Data set** \> **Data set**。

2.  点击添加按钮。

3.  In the **Name** field, type the precise name of the data set.

4.  In the **Short name** field, define a short name for the data set.

    通常，短名称是完整数据集名称的缩写。该属性通常用于显示空间有限的数据集的名称。

5.  （可选）在 **Code** 字段中，分配一个代码。 

6.  In the **Description** field, type a description of the data set.

7.  Enter the number of **Expiry days**.

    The number of expiry days controls for how long it should be possible to enter data in the **Data entry** app for this data set. Expiry days refer to the number of days after the end date of the selected data entry period where the data entry form should be open for entry. After the number of days has expired, the data set will be locked for further entry.

    You can set manual exceptions to this using the lock exception functionality in the **Data Administration** app.

    > **Note**
    >
    > To allow data entry into all possible historical time periods, set the number of expiry days to zero.

8.  If you want it to be possible to enter data for future periods, type the number of periods in the **Open future periods for data entry** field.

    该值是可用于数据输入的未来期间的数量。

    对于每月数据集，值 2 允许您提前输入 2 个月的数据。例如，这对于人口、目标和规划数据很有用。

9.  In the **Days after period to qualify for timely submission** field, type the number of days in which data can be entered to be considered reported on time.

    要验证及时提交的报告数量，请转到 **Reports** \> **Reporting rate summary**。

10. Select a **Period type**.

    周期类型定义特定数据集的报告频率。例如，频率可以是每天、每季度或每年。

11. Select a **Category combination** to assign it to the data set.

    > **Tip**
    >
    > Click **Add new** to create category combinations that you're missing. In the form that opens, create the category combinations you need. When you're done, click **Refresh values**.

12. If you selected a category combination other than **None**, you may enter zero or a positive number for **Open periods after category option end date**. This lets you enter data in this data set for a category option up to the specified number of periods after that category option's end date.

13. In the **Complete notification recipients** list, select a user group that should receive a message when the data set is marked as complete in the **Data Entry** app.

    该消息是通过DHIS2消息传递系统传递的。

14. If you want the user who entered the data to receive a message when the data set is marked as complete in the **Data entry** app, select **Send notification to completing user**.

    该消息是通过DHIS2消息传递系统传递的。

15. If applicable, select, a **Data approval workflow**.

16. If you want it to be possible to use the data set within the Java mobile DHIS2 application, select **Enable for Java mobile client**.

17. If you want it to be mandatory to fill all values for a data element in data entry if one or more values have been filled, select **All fields for data elements required**.

    这意味着，如果您在输入字段（即类别选项组合）中为数据元素输入一个数据值，则必须为属于该数据元素的所有字段（即所有类别选项组合）输入数据。

18. If you want it to be possible to mark a data entry form as complete only if the validation of that form is successful, select **Complete allowed only if validation passes**.

    如果选择此选项，则如果验证失败，您将无法将表单标记为完成。

19. If you want it to be mandatory that any missing values require a comment to justify their absence, select **Missing values requires comment on complete**.

20. （可选）分配一个或多个**传奇**。

21. If applicable, select **Skip offline**.

    This option controls whether this data entry form should be downloaded and saved in the user's web browser. Normally you shouldn't select **Skip offline**. This is the default setting. If you have big forms which are rarely used you can consider selecting this option to speed up initial loading in the data entry module.

22. If applicable, select **Data element decoration**

    If you select this option, descriptions of data elements render in call-outs in downloaded data sets in offline mode in the **Data entry** app.

23. If applicable, select **Render sections as tabs**.

    此选项仅适用于部分表单。该选项允许您将每个部分呈现为数据集上方水平的选项卡。这对于长数据集很有用，因为它允许快速选择适当的部分而无需遍历整个表单。

24. If applicable, select **Render vertically**.

    此选项仅适用于部分表格。

25. 选择数据元素并分配它们。

    您可以通过单击所选数据元素列表上方的齿轮图标来覆盖每个所选数据集的类别组合。这允许您利用当前数据集中的特定类别组合（分解），而不是与数据元素本身直接关联的类别组合。

26. 选择指标并分配它们。

27. 在组织单位树中，选择要将数据集分配到的组织单位。

    > **Tip**
    >
    > -   Click **Organisation unit level** to select all organisation units that belong to a certain organisation level.
    >
    > -   Click **Organisation unit group** to select all organisation units that belong to a certain organisation unit group.

28. 点击**保存**。 

You can now use the data set in the **Data Entry** app for the organisation units that you have assigned to and for periods according to the selected frequency (period type).

### 创建或编辑数据集通知 { #create_data_set_notification }

1.  Open the **Maintenance** app and click **Data set** \> **Data set notification**.

2.  点击添加按钮。

#### 发送什么？ { #what-to-send }

![](resources/images/datasets/dataset_notification_create.png)

1.  In the **Name** field, type the precise name of the data set notification.

2.  （可选）在 **Code** 字段中，分配一个代码。 

3.  输入**数据集**。

    这些数据集将与此通知相关联。如果其中任何一个在一定时期和组织单位内完成，系统将生成通知。

    > **Note**
    >
    > Nothing will happen if no data set is selected

4.  In **Message template** section there are two parameters.

    -   **主题模板** 在通知中发送的通知主题。它可以具有右侧可用变量列表中的值。

    -   **消息模板** 通知中发送的实际消息。它可以具有右侧可用变量列表中的值。

    > **Note**
    >
    > Subject is only relevant in case of Email and internal DHIS2 messages. It is ignored in case of SMS.

#### 何时发送？ { #when-to-send }

![](resources/images/datasets/when_to_send.png)

1.  **数据集通知触发器**字段确定何时发送通知。

    -   **Data Set Completion** will trigger notification as soon as data set is completed.

    -   **Schedule Days** 将根据相对于预定日期的天数安排通知。计划日期将由与数据集关联的期间决定。

        -   **发送通知为**提供两种不同类型的通知

            -   **汇总摘要**以摘要心情发送通知

            -   **单一通知** 以单一心情发送通知

    > **Note**
    >
    > **Send notification as** option is only available in case of scheduled notification. This option is set to default which is **Single notification** in case of completion notification

#### 寄给谁？ { #who-to-send }

![](resources/images/datasets/who_to_send.png)

1.  **通知收件人** 字段确定通知的收件人。

    -   **组织单位联系人** 将向分配给已从中收集数据的组织单位的联系人发送通知。

    -   **UserGroup** 将向所选用户组的所有成员发送通知。

    > **Note**
    >
    > An internal DHIS2 message will be sent in case if recipient is UserGroup. Moreover user will also receive SMS/EMAIL if phone number and email address exist for that user and SMS/EMAIL notifications are enabled in SystemSettings

### 覆盖数据集中的数据元素的类别组合 { #override_dataelement_catcombo_in_dataset }

您可以覆盖要用于数据元素的类别组合
在数据集范围内。这意味着数据元素可以使用
不同数据集内的不同类别组合。这是
当您想重复使用数据元素时很有用，因为您不必
复制数据元素以允许多个类别组合。

如果组织单位层次结构中的不同区域使用
不同的分类，或者如果分类随时间变化，
您可以通过创建不同的数据集来表示
适当的类别组合。

1.  打开 **Maintenance** 应用程序并单击 **Data set** \> **Data set**。

2.  在列表中，找到要修改的数据集。

3.  点击选项菜单，然后选择**编辑**。

4.  转到数据元素部分，然后单击扳手图标。

5.  选择新的类别组合，然后单击**关闭**。

6.  点击**保存**。 

### 编辑数据集中的强制数据元素 { #edit_compulsory_dataelement_in_dataset }

您可以添加或删除将被标记为强制性的数据元素
在数据输入期间。

1.  打开 **Maintenance** 应用程序并单击 **Data set** \> **Data set**。

2.  在列表中，找到要编辑的数据集。

3.  Click the options menu and select **Edit compulsory data elements**.

4.  分配必填数据元素。

5.  点击**保存**。 

### 下载PDF格式的默认数据表格 { #download_defaultform_pdf }

您可以从PDF格式下载默认数据以获取离线数据
条目。

1.  打开 **Maintenance** 应用程序并单击 **Data set** \> **Data set**。

2.  在列表中，找到要下载的对象。

3.  Click the options menu and select **Get PDF for data entry**.

### 管理板块表格 { #manage_section_form }

#### 创建部分表格 { #create-a-section-form }

截面表单按数据元素类别自动分隔
组合，从而为每个表单生成电子表格，例如数据输入表单
部分。

1.  打开 **Maintenance** 应用程序并单击 **Data set** \> **Data set**。

2.  在列表中，找到要为其创建分区表单的数据集。

3.  Click the options menu and select **Manage sections**.

4.  点击添加按钮。

5.  (Optional) In the **Name** field, type the name of the section.

6.  (Optional) In the **Description** field, type a description of the section.

7.  (Optional) To display totals for rows in the section form during data entry, select **Show row totals**.

8.  (Optional) To display totals for columns in the section form during data entry, select **Show column totals**.

9.  将数据元素分配给该部分：

    1.  (Optional) Select a **Category combination filter**.

        > **Note**
        >
        > You can only use one category combination per section.

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Option</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p><strong>None</strong></p></td>
        <td><p>Displays all data elements that don't have a category combination.</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>&lt;No filter&gt;</strong></p></td>
        <td><p>Displays all data elements.</p></td>
        </tr>
        </tbody>
        </table>

    2.  选择数据元素并分配它们。

10. （可选）使用分配的数据元素字段左侧的向上和向下箭头对部分内的数据元素进行排序。

11. 点击**保存**。 

12. 为要在分区表单中包含的每个分区重复添加分区步骤。

    In the **Data Entry** app you can now use the section form. The section form appears automatically when sections are available for the selected data set. Data sets which have section forms will automatically display the section form.

注意如何将每个数据元素类别都分为一个单独的
部分，并且数据输入表已由
系统。将节形式与数据元素类别结合使用
可以大大减少创建所需的时间
数据集的数据输入表单。

![](resources/images/dhis2UserManual/section_form.png)

#### 编辑部分表格 { #edit-a-section-form }

1.  打开 **Maintenance** 应用程序并单击 **Data set** \> **Data set**。

2.  在列表中，找到您要为其编辑部分表单的数据集。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要编辑的部分。

5.  点击选项菜单，然后选择**编辑**。

6.  Edit the section and click **Save**.

7.  对要编辑的每个节重复编辑节的步骤。

#### 管理分区表单中的灰色字段 { #manage-grey-fields-in-a-section-form }

您可以禁用数据输入的数据元素和类别选项。那
表示在数据处理期间将无法在这些字段中输入数据
条目。

![](resources/images/datasets/section_form_grey_fields.png)

1.  打开 **Maintenance** 应用程序并单击 **Data set** \> **Data set**。

2.  在列表中，找到您要为其编辑部分表单的数据集。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要编辑的部分。

5.  Click the options menu and select **Manage grey fields**.

6.  选择要禁用的字段。

    > **Note**
    >
    > If you've sections that contain data elements assigned to multiple category combinations, switch between the category combinations to view all fields.

7.  点击**保存**。 

#### 在部分表格中更改部分显示顺序 { #change-section-display-order-in-a-section-form }

您可以控制以节形式显示节的顺序。

1.  打开 **Maintenance** 应用程序并单击 **Data set** \> **Data set**。

2.  在列表中，找到您要为其编辑部分表单的数据集。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要移动的部分。

5.  点击选项菜单，然后选择**上移**或**下移**。

    如果您要移动的部分是列表中的第一个或最后一个部分，您只会看到一个移动选项。

#### 删除部分表格中的部分 { #delete-a-section-in-a-section-form }

1.  打开 **Maintenance** 应用程序并单击 **Data set** \> **Data set**。

2.  在列表中，找到您要为其编辑部分表单的数据集。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要删除的部分。

5.  Click the options menu and select **Delete**.

#### 以节形式翻译节 { #translate-a-section-in-a-section-form }

1.  打开 **Maintenance** 应用程序并单击 **Data set** \> **Data set**。

2.  在列表中，找到您要为其编辑部分表单的数据集。

3.  Click the options menu and select **Translate**.

4.  选择一个语言环境。

5.  输入所需的信息。

6.  点击**关闭**。

### 管理自定义表单 { #manage_customform }

#### 创建一个自定义表格 { #create-a-custom-form }

您可以在内置的WYSIWYG HTML编辑器中设计自定义表单。如果选择
**来源**，您可以直接将HTML代码粘贴到编辑区域中。为一个
有关如何使用编辑器的完整指南，请参阅
 <http://docs.ckeditor.com/>。

![](resources/images/datasets/data_set_custom_form_create.png)

创建自定义表单：

1.  Open the **Maintenance** app and click **Data set**.

2.  在列表中，找到要添加自定义表单的数据集。

3.  Click the options menu and select **Design data entry form**.

4.  在编辑区域中，创建自定义表单。

    -   双击左侧列表中的对象以将其插入到表单中。

    -   If you already have the HTML code for your form, click **Source** and paste the code.

5.  Select a **Form display style**.

6.  点击**保存**。 

#### 自定义形式的脚本 { #scripting-in-custom-forms }

在自定义数据输入表单中，您可以使用JavaScript创建动态
行为和自定义。例如，您可以隐藏表单部分
根据数据元素的特定用户输入，或显示特定
表单加载时的信息。

##### 大事记 { #events }

DHIS2数据输入模块提供了一系列事件，您可以
注册并用于在特定时间执行操作。这些事件是
注册在document元素上。 jQuery事件对象和数据
集标识符始终是提供给
回调函数。下表概述了事件
以及何时触发它们。

 <table>
 <caption>数据输入事件</caption>
 <colgroup>
 <col style="width: 32%" />
 <col style="width: 39%" />
 <col style="width: 27%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th>键</th>
 <th>说明</th>
 <th>参数</th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p> dhis2.de.event.formLoaded </p> </td>
 <td> <p>在呈现数据输入表单之后但在输入字段中设置数据值之前触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="even">
 <td> <p> dhis2.de.event.dataValuesLoaded </p> </td>
 <td> <p>在输入字段中设置数据值后触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> dhis2.de.event.formReady </p> </td>
 <td> <p>当数据输入表单完全呈现并加载了所有元素时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="even">
 <td> <p> dhis2.de.event.dataValueSaved </p> </td>
 <td> <p>成功保存数据值时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID |数据值对象</p> </td>
 </tr>
 <tr class="odd">
 <td> <p> dhis2.de.event.completed </p> </td>
 <td> <p>当数据集成功标记为完成时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID |完成注册对象</p> </td>
 </tr>
 <tr class="even">
 <td> <p> dhis2.de.event.uncompleted </p> </td>
 <td> <p>将数据集成功标记为不完整时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> dhis2.de.event.validation成功</p> </td>
 <td> <p>在完成验证并且没有违规时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="even">
 <td> <p> dhis2.de.event.validationError </p> </td>
 <td> <p>完成验证并存在一个或多个违规时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> dhis2.ou.event.orgUnitSelected </p> </td>
 <td> <p>在组织单位网页树中选择一个或多个组织单位时触发。 </p> </td>
 事件| <td> <p>事件|组织单位编号|组织单位名称|子单位部门ID </p> </td>
 </tr>
 </tbody>
 </table>

要注册活动：

     <script type="text/javascript">

    dhis2.util.on（'dhis2.de.event.formReady'，function（event，ds）{
      console.log（'ID为'+ ds +'的表单已加载！'）;
    }）；

    dhis2.util.on（'dhis2.de.event.dataValueSaved'，function（event，ds，dv）{
      console.log（'数据值：'+ dv.value +'与数据元素：'+ dv.de一起保存）;
    }）；

    dhis2.util.on（'dhis2.de.event.completed'，function（event，ds，cr）{
      console.log（'组织单位的表格已完成：'+ cr.ou）;
    }）；

     </script>

> **注意**
>
> 注意只使用像上面示例中的“命名空间”事件，而不是像“click”这样的通用事件，因为 dhis2.util.on 方法将首先取消注册事件。

如果您的功能仅适用于某些数据集，则可以使用
提供的数据集标识符和快捷方式，可避免不必要的功能
像这样的数据集
    这个：

    dhis2.de.on（'dhis2.de.event.validationSuccess'，function（event，ds）{
      if（$ .inArray（ds，['utXOiGbEj14'，'Re7qzHEThSC']）== -1）{
        返回false；
      }
      console.log（'ID为：'+ ds +'的表单已成功验证！'）;
    }）；

数据输入表单中输入字段的标识符位于
格式如下所述。此格式可用于选择输入
脚本中的字段并对其执行操作：

     <dataelementid>-<optioncomboid> -val

由于为所有事件提供了数据集标识符，因此可行
另一种方法是利用“文件” Web API资源并保留您的
回调函数在一个文件中，您可以在其中让JavaScript代码
根据当前加载的数据集采取措施。

##### 职能 { #functions }

DHIS2数据输入模块包含JavaScript API函数，该函数可以
可从自定义数据输入表单访问。

** dhis2.de.api.getSelections **：此函数返回一个JavaScript
包含所有尺寸的属性以及相应属性的对象
所选选项的标识符的值。它包含
“ ds”（数据集），“ pe”（句号），“ ou”（组织单位）的属性
和所有数据集类别的标识符。

一个示例响应如下所示：

    {
     + ds：“ lyLU2wR22tC”，
     + pe：“ 201605”，
     + ou：“ g8upMTyEZGZ”，
     + LFsZ8v5v7rq：“ CW81uF03hvV”，
     + yY2bQYqNt0o：“ yMj2MnmNI8L”
     +}

此功能的示例JavaScript用法：

    var sel = dhis2.de.api.getSelections（）;
     + var orgUnit = sel [“ ou”];
     + var partner = sel [“ LFsZ8v5v7rq”];

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
> 默认设置是每个人（**公共访问**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  （可选）添加用户或用户组：搜索用户或用户组并选中。用户或用户组被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **No access**（仅适用于**Public access**）：公众将无权访问该对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组将无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理指标 { #manage_indicator }

### 关于指标 { #about_indicator }

指标是一个可以包含多个数据元素的公式，
常数，组织单位组数和数学运算符。
指标通常由分子和分母组成。你用
用于计算覆盖率，发生率和其他值的指标
是已输入到数据元素值的结果
系统。计算得出的总数没有分母。

> **注意**
>
>您永远不会直接在DHIS2中输入指标值，而是进行计算。

指标公式可以包含数学运算符，例如
加号和减号；功能（见下文）；和以下元素：

<table>
<caption>Indicator elements</caption>
<colgroup>
<col style="width: 36%" />
<col style="width: 30%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>Indicator element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Constant</p></td>
<td><p>Component</p></td>
<td><p>Constants are numerical values which remain the same for all indicator calculations. This is useful in order to have a single place to change values that might change over time.</p>
<p>Constants are applied AFTER data element values have been aggregated.</p></td>
</tr>
<tr class="even">
<td><p>Data elements</p></td>
<td><p>Component</p></td>
<td><p>Data elements are substituted by the data value captured for the data element.</p></td>
</tr>
<tr class="odd">
<td><p>Days</p></td>
<td><p>Operator</p></td>
<td><p>&quot;Days&quot; is special operator that always provides the number of days for a given indicator calculation.</p>
<p>For example: if you want to calculate the &quot;Percentage of time vaccine refrigerator was non-functional&quot;, you could define the numerator as:</p>
<p>(&quot;Days-&quot;Number of days vaccine refrigerator was available&quot;&quot;)/&quot;Days&quot;</p>
<p>If the fridge was available 25 days in June, the indicator would be calculated as:</p>
<p>(30-25/25)*100 = 17 %</p>
<p>If you want to calculate the total for Quarter 1, the number of days (&quot;Days&quot;) would be:</p>
<p>31+28+31 = 90</p>
<p>The &quot;Days&quot; parameter will always be the number of days in the period of interest.</p></td>
</tr>
<tr class="even">
<td><p>Organisation unit counts</p></td>
<td><p>Component</p></td>
<td><p>You can use organisation unit groups in formulas. They will be replaced by the number of organisation units in the group. During aggregation, the organisation units in the group will be intersected with the part of the organisation unit hierarchy being requested.</p>
<p>This lets you use the number of public facilities in a specific district in indicators. This is useful for example when you create facility infrastructure surveys and reports.</p></td>
</tr>
<tr class="odd">
<td><p>Programs</p></td>
<td><p>Component</p></td>
<td><p>Click <strong>Programs</strong> and select a program to view all data elements, attributes and indicators related to a specific program.</p>
<p>The program components you include in your formula will have a program tag assigned to them.</p></td>
</tr>
</tbody>
</table>

您可以在指标公式中使用以下功能：

 <table>
 <caption>指示器功能</caption>
 <colgroup>
 <col style="width: 33%" />
 <col style="width: 33%" />
 <col style="width: 33%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>指示灯功能</p> </th>
 <th> <p>参数</p> </th>
 <th> <p>说明</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 如果</p> </td> <td> <p>
 <td> <p>（布尔表达式，true表达式，false表达式）</p> </td>
 <td> <p>计算布尔表达式，如果为true，则返回true表达式值；如果为false，则返回false表达式值。参数必须遵循任何指标表达的规则。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> isNull </p> </td>
 <td> <p>（元素）</p> </td>
 <td> <p>如果元素值缺失（空），则返回true，否则返回false。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> isNotNull </p> </td>
 <td> <p>（元素）</p> </td>
 <td> <p>如果元素值不丢失（不为null），则返回true，否则返回false。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> firstNonNull </p> </td>
 <td> <p>（元素[，元素...]）</p> </td>
 <td> <p>返回不丢失的第一个元素的值（不为null）。可以提供任意数量的参数。任何参数也可以是数字或字符串文字，如果所有先前的对象都缺少值，则将返回该参数。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p>最大</p> </td>
 <td> <p>（表达式[，表达式...]）</p> </td>
 <td> <p>返回给定表达式的最大（最高）值。可以提供任意数量的参数。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p>至少</p> </td>
 <td> <p>（表达式[，表达式...]）</p> </td>
 <td> <p>返回给定表达式的最小（最小）值。可以提供任意数量的参数。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> .periodOffset </p> </td>
 <td> <p>（整数常量）</p> </td>
 <td> <p>放置在数据值或表达式之后，返回相对于报告期间的期间偏移量中的值。它可以嵌套。请参阅下面的示例。 </p> </td>
 </tr>
 </tbody>
 </table>

指标表达式中的.periodOffset（）函数示例：

| 指标表达 | 手段 |
| --- | --- |
| ＃ | 前一时期的数据元素FH8ab5Rog83 |
| ＃ | 之后的数据元素FH8ab5Rog83 |
| ＃ | 之后的数据元素FH8ab5Rog83 |
| #{FH8ab5Rog83} - 2 \* D{IpHINAT79UW.uf3svrmp8Oj}.periodOffset(-1) | 报告期间的数据元素FH8ab5Rog83减去前一时期的程序数据元素IpHINAT79UW.uf3svrmp8Oj的两倍 |
| （＃{FH8ab5Rog83}-<br />＃{QOlfIKgNJ3D2}）.periodOffset（-2） | 前2个周期的数据元素FH8ab5Rog83减去前2个周期的数据元素QOlfIKgNJ3D2 |
| ＃ | 前2个周期的数据元素FH8ab5Rog83加前1个周期的值 |
| （＃{FH8ab5Rog83} .periodOffset（-1）+ <br />＃{FH8ab5Rog83}）.periodOffset（-1） | 前2个周期的数据元素FH8ab5Rog83加上前1个周期的值（请注意，函数是嵌套的） |

 <br />

In the **Maintenance** app, you manage the following indicator objects:

<table>
<caption>Indicator objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Indicator</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Indicator type</p></td>
<td><p>Create, edit, clone, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Indicator group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Indicator group set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_indicator }

1.  创建指标类型。

2.  创建指标。

3.  创建指标组。

4.  创建指标组集。

### 创建或编辑指标类型 { #create_indicator_type }

![](resources/images/maintainence/indicator_type_create.png)

指标类型定义了在聚合期间应用的因素。
在数据集市导出或报告期间计算的指标值
表生成过程将显示正确的格式，并且
因此不需要额外的乘法器（例如，
百分比），以使值显示正确的格式。

> **注意**
>
> 从 DHIS2 的 2.4 版开始，“计算数据元素”对象已被弃用。相反，您可以通过创建系数为“1”的指标类型并将“数字”选项设置为“是”来创建计算数据元素。将“数字”选项设置为“是”的效果将是指标实际上没有分母。因此，您将只能定义一个分子，该分子将用作计算数据元素的公式。

1.  Open the **Maintenance** app and click **Indicator** \> **Indicator type**.

2.  点击添加按钮。

3.  In the **Name** field, type the name of the indicator type, for example "Per cent", "Per thousand", "Per ten thousand".

4.  键入一个**因子**。

    因子是在指标计算过程中将乘以指标公式的数值因子。

5.  点击**保存**。 

### 创建或编辑指标 { #create_indicator }

![](resources/images/maintainence/indicator_create.png)

1.  打开 **Maintenance** 应用程序并单击 **Indicator** \> **Indicator**。

2.  点击添加按钮。

3.  In the **Name** field, type the full name of the indicator, for example "Incidence of confirmed malaria cases per 1000 population".

4.  In the **Short name** field, type an abbreviated name of the indicator, for example "Inc conf. malaria per 1000 pop".

    短名称必须少于或等于 25 个字符，包括空格。

5.  （可选）在 **Code** 字段中，分配一个代码。 

    在许多国家/地区，指标均分配有代码。

6.  (Optional) In the **Color** field, assign a color to reprersent the indicator.

7.  (Optional) In the **Icon** field, assign an icon to illustrate the meaning of the indicator.

8.  In the **Description** field, type a brief, informative description of the indicator and how it is calculated.

9.  If you want to apply an annualization factor during the calculation of the indicator, select **Annualized**.

    通常，年化指标的分子乘以因子 12，分母是例如年度人口数字。这允许使用年度人口数字计算每月覆盖值。

10. Select the number of **Decimals in data output**.

11. 选择**指标类型**。

    该字段确定在指标计算期间将自动应用的因子。可能的选择由指标类型决定。例如，“百分比”指标在导出到数据集市时会自动乘以 100 倍，从而显示为百分比。

12. （可选）分配一个或多个**传奇**。

13. In the **URL** field, enter a link, for example a link to an indicator registry, where a full metadata description of the indicator can be made available.

14. （可选）输入一个**用于汇总数据导出的类别选项组合。**。

    您可以使用此设置将作为原始数据导出的聚合数据映射到另一台服务器。通常，当您希望从程序中记录的患者数据（事件数据）中创建匿名聚合数据时，您会执行此类数据交换映射。

15. （可选）输入一个**用于汇总数据导出的属性选项组合。**。

    您可以使用此设置将作为原始数据导出的聚合数据映射到另一台服务器。通常，当您希望从程序中记录的患者数据（事件数据）中创建匿名聚合数据时，您会执行此类数据交换映射。

16. 如果适用，请输入自定义属性值，例如 **Classification** 或 **Collection method**。

    > **Note**
    >
    > You create custom attributes in the **Maintenance** app: **Other** > \> **Attributes**.

17. 点击**编辑分子**。

    1.  键入分子的清晰描述。

    2.  通过双击右侧字段中的组件来定义分子。然后，组件将作为公式的一部分出现在左侧字段中。通过双击左侧字段下方的图标来添加数学运算符。

        您的公式必须在数学上有效。这包括必要时正确使用括号。

    3.  Click **Done** to save all changes to the numerator.

18. Click **Edit denominator**.

    1.  键入分母的清晰描述。

    2.  通过双击右侧字段中的组件来定义分母。然后，组件将作为公式的一部分出现在左侧字段中。通过双击左侧字段下方的图标来添加数学运算符。

        您的公式必须在数学上有效。这包括必要时正确使用括号。

    3.  Click **Done** to save all changes to the denominator.

19. 如果适用，请选择强制性指标组集，例如**人力资源**。

    > **Note**
    >
    > You'll only see indicator group sets in this form if you've created them and set them to **Compulsory**.
    >
    > You create indicator group sets in the **Maintenance** app: **Indicator** \> **Indicator group set**.

20. 点击**保存**。 

### 创建或编辑指标组 { #create_indicator_group }

![](resources/images/maintainence/indicator_group_create.png)

1.  Open the **Maintenance** app and click **Indicator** \> **Indicator group**.

2.  点击添加按钮。

3.  输入名称。

4.  选择指标并分配它们。

5.  点击**保存**。 

### 创建或编辑指标组集 { #create_indicator_group_set }

![](resources/images/maintainence/indicator_group_set_create.png)

指标组集创建相似指标的组合组。对于
例如，您可能有一组称为“疟疾”的指标，
“利什曼病”。这两个组可以合并为一组
称为“媒介传播疾病”。指标组集用于
数据分析以结合指标的相似主题。

1.  打开 **Maintenance** 应用程序并单击 **Indicators** \> **Indicator group**。

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **描述**

    3.  **必修**

4.  选择指标组并分配它们。

    可用的指标组显示在左侧面板中。当前是指标组集成员的指标组显示在右侧面板中。

5.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
> 默认设置是每个人（**公共访问**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  （可选）添加用户或用户组：搜索用户或用户组并选中。用户或用户组被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **No access**（仅适用于**Public access**）：公众将无权访问该对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组将无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理组织单位 { #manage_organisation_unit }

在本节中，您将学习如何：

-   创建新的组织单元并建立组织单元层次结构

-   创建组织单位组、组集，并将组织单位分配给它们

-   修改组织单位的层次结构

### 关于组织单位 { #about_organisation_unit }

组织单位层次结构定义了
DHIS2，例如卫生设施，行政区域等
地理区域彼此相对排列。它是
DHIS2的“何处”维度，类似于句点如何表示“何时”
尺寸。

组织单位层次结构是通过父子关系建立的。
在DHIS2中，每个节点都是一个组织单位。一个国家可能
例如有八个省，每个省可能有一个
地区的儿童。通常，最低级别包括
收集数据的设施。数据收集设施也可以
位于较高的级别，例如国家或省级
医院。因此，您可以在DHIS2中创建倾斜的组织树。

-   您一次只能拥有一个组织层次结构。

-   层次结构中可以有任意多个级别。

    通常，公共卫生领域的国家组织层次结构有四到六个级别。

-   您可以使用组织组和组织组集创建其他分类。

    例如，为医疗保健部门创建平行的行政边界。

-   建议使用组织单位组来创建非地理层次结构。

-   一个组织单元只能是一个组织单元组集中的单个组织单元组的成员。

-   一个组织单位组可以是多个组织单位组集的一部分。

-   组织单位层次结构是地理维度上数据聚合的主要载体。

-   When you close an organisation unit, you can't register or edit events to this organisation unit in the **Event Capture** and **Tracker Capture** apps.

> **重要**
>
> 您可以在创建组织单位层次结构后更改它，甚至是收集数据的组织单位。但是，DHIS2 始终使用最新的层次结构进行数据聚合。因此，如果您更改层次结构，就会随着时间的推移失去层次结构的时间表示。
>
> A 区被细分为 B 区和 C 区。属于 A 区的设施被重新分配给 B 区和 C 区。您在拆分之前输入的任何历史数据仍被注册为属于 B 区和 C 区，而不是过时的A区。

In the **Maintenance** app, you manage the following organisation unit objects:

<table>
<caption>Organisation unit objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Organisation unit</p></td>
<td><p>Create, edit, clone, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Organisation unit group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Organisation unit group set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Organisation unit level</p></td>
<td><p>Edit and translate</p></td>
</tr>
<tr class="odd">
<td><p>Hierarchy operations</p></td>
<td><p>Move organisation units</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_organisation_unit }

推荐的工作流程是：

1.  创建组织单位。

2.  创建组织单位组。

3.  创建组织单位组集。

### 创建或编辑组织单位 { #create_organisation_unit }

![](resources/images/orgunits/create_new_orgunit.png)

您可以将组织单位一个或一个地添加到层次结构中
单位或作为所选组织单位的子级。你只能有
一个根单元。

1.  Open the **Maintenance** app and click **Organisation unit** \> **Organisation unit**.

2.  点击添加按钮。

3.  选择您的新组织单位将属于哪个组织单位：

    1.  点击**父组织单位**。

    2.  在组织单元树中，找到父组织单元并选中它。您的选择标记为黄色。

        > **Tip**
        >
        > Click the arrows to expand the organisation unit tree.

    3.  点击**选择**。

4.  Enter a **Name** of the organisation unit.

    每个组织单位必须具有唯一的名称。

5.  Enter a **Short name** for the organisation unit.

    通常，短名称是完整的组织单位名称的缩写。该属性常用于报表中显示组织单位的名称，空间有限。

6.  （可选）分配**代码**。

    在许多国家/地区，为组织单位分配了代码。

7.  (Optional) Type a **Description** of the organisation unit.

8.  Select an **Opening date**.

    开放日期控制在某个时间点存在哪些组织单位，例如在分析历史数据时。

9.  If applicable, select a **Closed date**.

10. In the **Comment** field, enter any additional information that you would like to add.

11. (Optional) In the **URL** field, enter a link to an external web site that has additional information about the organisation unit.

12. 输入联系信息：

    -   联系人

    -   地址

    -   电子邮件

    -   电话号码

13. (Optional) Enter **Latitude** and **Longitude**.

    You must have latitude and longitude values to create maps in the **Maps** app. Then your organisation units can be represented as points on a map, for example a health facility. Without this information, the **Maps** app will not work.

    It might be more efficient to import coordinates later as a batch job for all organisation units using the **Import-Export** app. You also use the **Import-Export** app to create polygons. A polygon is an organisation unit that represent an administrative boundary.

14. If applicable, select **Data sets** and assign them.

    > **Note**
    >
    > You control whether a user should be able to assign data sets to an organisation unit in the **System Settings** app:
    >
    > Open the **System Settings** app, click **Access** and select **Allow assigning object to related objects during add or update**.

15. If applicable, select **Programs** and assign them.

    > **Note**
    >
    > You control whether a user should be able to assign programs to an organisation unit in the **System Settings** app:
    >
    > Open the **System Settings** app, click **Access** and select **Allow assigning object to related objects during add or update**.

16. If applicable, enter custom attributes values, for example **HR identifier**.

    > **Note**
    >
    > You configure the custom attributes in the **Maintenance** app:
    >
    > Open the **Maintenance** app and click **Other** \> **Attribute**.

17. 点击**保存**。 

### 创建或编辑组织单位组 { #create_organisation_unit_group }

Organisation unit groups allow you to classify related organisation units into a common theme. You can for example group all organisation units that are hospitals in an **Hospital** group.

1.  Open the **Maintenance** app and click **Organisation unit** \> **Organisation unit group**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**：为组织单位组提供准确、唯一和描述性的名称。

    2.  **短名称**：短名称应少于 25 个字符。通常，短名称是完整的组织单位名称的缩写。此属性用于 DHIS2 中空间有限的某些地方。

    3.  **码**

    4.  **符号**：当图层显示在**地图**应用程序中时，选择将用于显示组织单位（仅限点）的符号。

4.  在组织树中，单击要添加到组织单元组的组织单元。

    您可以通过展开分支（单击箭头符号）或通过名称搜索来在树中定位组织单位。

    所选组织单位显示为橙色。

5.  点击**保存**。 

### 创建或编辑组织单位组集 { #create_organisation_unit_group_set }

组织单位组集允许您创建其他
组织单位的分类。组集创建新
尺寸，以便您可以进行更详细的数据分析。你一个
轻松按组集中的组过滤，组织或汇总数据。

-   您可以具有任意数量的组织单位组集。

-   The default organisation unit group sets are **Type** and **Ownership**.

-   一个组织单元只能是一个组织单元组集中的单个组织单元组的成员。

-   一个组织单位组可以是多个组织单位组集的一部分。

-   您可以定义一个组织单元组集是否是强制性的，这将影响数据的完整性。强制意味着所有组织单位都必须是该组集中某个组的成员。

> **Note**
>
> In the **Data integrity** part of the **Data administration** app you can verify if you've accidentally assigned the same organisation unit to multiple groups within the same group set. In this app you also find information about organisation units that are not members of a compulsory organisation unit group set.

1.  Open the **Maintenance** app and click **Organisation unit** \> **Organisation unit group set**.

2.  点击添加按钮。

3.  填写：

    1.  **名称**：为组织单位组集提供准确的名称。

    2.  **码**

    3.  **描述**：描述组织单位组集测量或捕获的内容。

4.  如果您希望所有组织单位都成为组集中某个组的成员，请选择**必填**。

5.  (Optional) Select **Data dimension**.

6.  (Optional) Select **Include subhierarchy in analytics**.

    如果您选择此项，子组织单位将从其最近的“父”组织单位继承组织单位组属性。子组织单位的任何属性都将覆盖继承值。

    如果组织单位没有关联的组织单位组，则该组织单位可以继承其最近的父组织单位组。如果父组织单位组没有给定组织单位组集的组织单位组，则结果仍将为“空白”，但如果至少有一个父组织单位组具有组织单位组，则子组织单位将继承它。

    在分析中包含子层次结构”已启用，这意味着如果组织单位是白色的（没有与之关联的组织单位组），则组织单位继承其最近的父组织单位组。

7.  选择组织单位组并分配它们。

    在左侧列表中，您可以找到可用的组织单位组。使用箭头在两个列表之间移动选定的组。

    If there are no organisation unit groups in the left-hand list, click **Add new**. In the form that opens, create the organisation units group you need. When you're done, click **Refresh values**.

    > **Note**
    >
    > An organisation unit can only be a member of a single organisation unit group within an organisation unit group set.

8.  点击**保存**。 

![](resources/images/implementation_guide/organisation_unit_hiearchy.png)

您希望根据设施的所有权分析数据。所有设施都有一个所有者，因此您需要确保所有组织单位都获得此分类。为此，您可以使用 **Compulsory** 选项：

1.  为每种所有权类型创建一个组，例如“MoH”、“Private”和“Faith-based”。

2.  将数据库中的所有设施分配给这些组之一。

3.  Create an organisation unit group set called "Ownership" and select **Compulsory**.

4.  将组织单元组“MoH”、“Private”和“Faith-based”分配到“Ownership”组织组集。

！[]（资源/图像/维护/analytics-include-org-unit-subhierarchy.png）

![](resources/images/maintainence/include-subhierarchy-analytics.png)

通过两种方式对组织单位进行分组，并汇总这两种数据
并行层次结构

用于汇总数据（仅在分析应用程序中）

组织单位组设置的附加设置将创建一个
动态“成员资格”到组织单位组的集合。

您无需更改组织单位的层次结构

可扩展和动态

动态包含层次

动态附加分类

### 为组织单位级别分配名称 { #name_organisation_unit_level }

当您将子级添加到组织单位时，DHIS2 会在必要时自动创建新的组织单位级别。系统还会为该级别分配一个通用名称，例如“Level 5”。您可以将通用名称替换为上下文名称，例如“Country”、“Province”、“District”或“Health Facility”。 DHIS2 在任何涉及级别的地方都使用上下文名称，例如在 **Maps** 应用程序中。

1.  Open the **Maintenance** app and click **Organisation unit** \> **Organisation unit level**.

    列表的加载时间取决于组织单元层次树的深度。

2.  对于要修改的组织单位级别，输入名称。

3.  选择离线级别的数量。

    > **Note**
    >
    > You configure the default value in the **System Settings** app:
    >
    > Open the **System Settings** app, click **General** and select a level in the **Max offline organisation unit levels** list.

4.  点击**保存**。 

### 在层次结构中移动组织单位 { #move_organisation_unit }

您可以通过以下方式在层次结构中移动组织单位：
所选组织单位的父级。

1.  Open the **Maintenance** app and click **Organisation unit** \> **Hierarchy operations**.

2.  在左侧层次结构树中，选择要移动的组织单位。

    > **Note**
    >
    > If the selected organisation unit is has sub-organisation units, all of them move to the new parent organisation unit.

3.  在右侧层次结构树中，选择要将所选组织单位移动到哪个组织单位。

4.  Click **Move x organisation units**, where x stands for the number of organisation units you have selected.

    您的更改会立即反映在左侧的层次结构树中。

### 关闭组织单位 { #close_organisation_unit }

When you close an organisation unit, you can't register or edit events to this organisation unit in the **Event Capture** and **Tracker Capture** apps.

1.  Open the **Maintenance** app and click **Organisation unit** \> **Organisation unit**.

2.  In the object list, click the options menu and select **Edit**.

3.  Select a **Closed date**.

4.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
> 默认设置是每个人（**公共访问**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  （可选）添加用户或用户组：搜索用户或用户组并选中。用户或用户组被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **No access**（仅适用于**Public access**）：公众将无权访问该对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组将无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## \ [进行中\]管理验证规则 { #manage_validation_rule }

### 关于验证规则 { #about_validation_rule }

验证规则基于表达式。该表达式定义了一个
数据元素值之间的关系。该表达式形成一个
条件符合某些逻辑条件。

该表达式包括：

-   左侧

-   右边

-   操作员

验证规则断言所接种的疫苗总数
婴儿小于或等于婴儿总数。

左侧和右侧必须返回数字值。

In the **Maintenance** app, you manage the following validation rule objects:

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>What you can do</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Validation rule</p></td>
<td><p>Create, edit, clone, delete, show details, and translate</p></td>
</tr>
<tr class="even">
<td><p>Validation rule group</p></td>
<td><p>Create, edit, clone, delete, share, show details, and translate</p></td>
</tr>
<tr class="odd">
<td><p>Validation notification</p></td>
<td><p>Create, edit, clone, delete, show details, and translate</p></td>
</tr>
</tbody>
</table>

#### 关于推拉窗 { #sliding_windows }

You can use sliding windows to group data _across multiple periods_ as opposed to selecting data for _a single period_. Sliding windows have a size, that is to say, the number of days to cover, a starting point and an end point. The example below shows disease surveillance data:.

-   橙色部分中的数据，根据当前期间选择数据。有一个阈值，每个星期或每个周期计算一次，这显示在“结果”部分。

-   蓝色部分的数据是滑动窗口。它选择过去 7 天的数据。 “结果”显示了一种疾病的确诊病例总数。

-   验证规则确保当案例总数超过该时段的阈值时通知用户。

![](resources/images/maintainence/validation_rules_sliding_window.gif)

<table>
<caption>Different behaviour of validation rules</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>With sliding windows</p></th>
<th><p>Without sliding windows</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Used only for event data.</p></td>
<td><p>Used for event data and aggregate data.</p></td>
</tr>
<tr class="even">
<td><p>Data selection is based on a fixed number of days (periodType).</p></td>
<td><p>Data selection is always based on a period.</p></td>
</tr>
<tr class="odd">
<td><p>The position of the sliding window is always<em>relative to</em> the period being compared.</p></td>
<td><p>Data is always selected for the <em>same period</em> as the period being compared.</p></td>
</tr>
</tbody>
</table>

另请参阅：[创建或编辑广告时，如何使用滑动窗口
验证
规则]（https://docs.dhis2.org/master/en/user/html/manage_validation_rule.html#create_validation_rule）。

#### 关于验证规则组 { #about-validation-rule-groups }

验证规则组允许您对相关的验证规则进行分组。当您运行_[验证规则分析](https://docs.dhis2.org/master/en/user/html/validation_rule_analysis.html)_ 时，您可以选择运行系统中的所有验证规则，或者只运行一组中的验证规则。

#### 关于验证通知 { #validation_notifications }

您可以配置验证规则分析以自动向选定用户组发送有关验证错误的通知。这些消息称为_验证通知_。它们通过内部 DHIS2 消息系统发送。

您可以将验证规则通知作为单独的消息或作为
消息摘要。这很有用，例如，如果您要发送
有关高优先级疾病暴发的个别消息和摘要
用于低优先级常规数据验证错误。

### 创建或编辑验证规则 { #create_validation_rule }

1.  打开 **Maintenance** 应用并单击 **Validation** \> **Validation rule**。

2.  点击添加按钮。

3.  Type a **Name**.

    在验证规则中，名称必须唯一。

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  （可选）输入**说明**。

6.  选择**重要性**：**高**，**中**或**低**。

7.  Select a **Period type**.

8.  选择一个**运算符**：**强制对**、**等于**、**排除对**、**大于**、**大于或等于**或**不等于至**。

    **Compulsory pair** 运算符允许要求必须为表达式的左侧和右侧或任一侧的表单输入数据值。这意味着您可以要求，如果填写了表单中的一个字段，则还必须填写一个或多个其他字段。

    **Exclusive pair** 允许断言如果左侧存在任何值，则右侧不应该有任何值（反之亦然）。这意味着在给定的时间段/组织单位/属性选项组合中，构成任一侧规则的数据元素应该相互排斥。

9.  创建表达式的左侧：

    1.  Click **Left side**.

    2.  Select **Sliding window** if you want to view data relative to the period you are comparing. See also [About validation rules](https://docs.dhis2.org/master/en/user/html/manage_validation_rule.html#about_validation_rule).

    3.  Select a **Missing value strategy**. This selection sets how the system evaluates a validation rule if data is missing.

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Option</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>Skip if any value is missing</p></td>
        <td><p>The validation rule will be skipped if any of the values which compose the expression are missing. This is the default option.</p>
        <p>Always select this option you use the <strong>Exclusive pair</strong> or <strong>Compulsory pair</strong> operator.</p></td>
        </tr>
        <tr class="even">
        <td><p>Skip if all values are missing</p></td>
        <td><p>The validation rule will be skipped only if all of the operands which compose it are missing.</p></td>
        </tr>
        <tr class="odd">
        <td><p>Never skip</p></td>
        <td><p>The validation rule will never be skipped in case of missing data, and all missing operands will be treated effectively as a zero.</p></td>
        </tr>
        </tbody>
        </table>

    4.  输入**说明**。

    5.  根据可用的数据元素、程序对象、组织单位、计数和常数构建表达式。

        在右窗格中，双击要包含在表达式中的数据对象。结合位于左窗格下方的数学运算符。

    6.  点击**保存**。 

10. 创建表达式的右侧：

    1.  Click **Right side**.

    2.  Select a **Missing value strategy**. This selection sets how the system evaluates a validation rule if data is missing.

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Option</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>Skip if any value is missing</p></td>
        <td><p>The validation rule will be skipped if any of the values which compose the expression are missing. This is the default option.</p>
        <p>Always select this option you use the <strong>Exclusive pair</strong> or <strong>Compulsory pair</strong> operator.</p></td>
        </tr>
        <tr class="even">
        <td><p>Skip if all values are missing</p></td>
        <td><p>The validation rule will be skipped only if all of the operands which compose it are missing.</p></td>
        </tr>
        <tr class="odd">
        <td><p>Never skip</p></td>
        <td><p>The validation rule will never be skipped in case of missing data, and all missing operands will be treated effectively as a zero.</p></td>
        </tr>
        </tbody>
        </table>

    3.  Select **Sliding window** if you want to view data relative to the period you are comparing. See also [About validation rules](https://docs.dhis2.org/master/en/user/html/manage_validation_rule.html#about_validation_rule).

    4.  输入**说明**。

    5.  根据可用的数据元素、程序对象、组织单位、计数和常数构建表达式。

        在右窗格中，双击要包含在表达式中的数据对象。结合位于左窗格下方的数学运算符。

    6.  点击**保存**。 

11. （可选）选择应针对哪些**组织单位级别**评估此规则。将此留空将导致在所有级别评估验证规则。

12. (Optional) Click **Skip this rule during form validation** to avoid triggering this rule while doing data entry

13. 点击**保存**。 

### 创建或编辑验证规则组 { #create_validation_rule_group }

1.  Open the **Maintenance** app and click **Validation** \> **Validation rule group**.

2.  点击添加按钮。

3.  Type a **Name**.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  （可选）输入**说明**。

6.  Double-click the **Validation rules** you want to assign to the group.

7.  点击**保存**。 

### 创建或编辑验证通知 { #create_validation_notification }

1.  打开 **Maintenance** 应用并点击 **Validation** \> **Validation notification**。

2.  点击添加按钮。

3.  Type a **Name**.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  Select **Validation rules**.

6.  Select **Recipient user groups**.

7.  (Optional) Select **Notify users in hierarchy only**.

    如果选择此选项，系统将过滤收件人用户。 （系统从收件人用户组中派生收件人用户。）过滤器基于收件人用户所属的组织单位。链接到作为发生违规的组织单位的祖先的组织单位的用户将收到验证通知。系统将忽略其他用户，这些用户将不会收到验证通知。

8.  创建消息模板：

    1.  创建**主题模板**。

        Double-click the parameters in the **Template variables** field to add them to your subject.

    2.  创建**消息模板**。

        Double-click the parameter names in the **Template variables** field to add them to your message.

9.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
> 默认设置是每个人（**公共访问**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  （可选）添加用户或用户组：搜索用户或用户组并选中。用户或用户组被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **No access**（仅适用于**Public access**）：公众将无权访问该对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组将无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理属性 { #manage_attribute }

### 关于属性 { #about_attribute }

您可以使用元数据属性将其他信息添加到
元数据对象。除了每个标准属性
这些对象可能有助于存储其他信息
属性，例如数据元素的收集方法。

![](resources/images/maintainence/attribute_create.png)

In the **Maintenance** app, you manage the following attribute objects:

<table> 
<caption>维护应用中的属性对象</caption> 
<colgroup> 
<col style="width: 50%" /> 
<col style="width: 50%" /> 
</colgroup> 
<thead> 
<tr class="header"> 
<th><p>对象类型</p></th> 
<th><p>可用函数</p></th> 
</tr> 
</thead> 
<tbody > 
<tr class="odd"> 
<td><p>属性</p></td> 
<td><p>创建、编辑、克隆、删除、显示详细信息和翻译</p></td > 
</tr> 
</tbody> 
</table>

### 创建或编辑属性 { #create-or-edit-an-attribute }

1.  打开**维护**应用程序并点击**属性**。

2.  点击添加按钮。

3.  在 **名称** 字段中，输入属性的名称。

    每个属性必须具有唯一的名称

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  选择**值类型**。

    如果为属性提供的值与值类型不匹配，您将收到警告。

6.  选择一个**选项集**。

7.  选择所需的选项，例如：

    -   如果您希望对象始终具有动态属性，请选择 **强制**。

    -   如果您希望系统强制特定对象类型的值是唯一的，请选择**唯一**。

8.  点击**保存**。 

    动态属性现在可用于您分配给它的对象。

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理常数 { #manage_constant }

### 关于常数 { #about_constant }

常量是可以供用户使用的静态值
在数据元素和指标中。一些指标，例如“夫妇年
保护率”取决于通常不会转换的常数
时间。

![](resources/images/maintainence/constant_create.png)

在 **维护** 应用程序中，您管理以下常量对象：

<table> 
<caption>维护应用中的常量对象</caption> 
<colgroup> 
<col style="width: 50%" /> 
<col style="width: 50%" /> 
</colgroup> 
<thead> 
<tr class="header"> 
<th><p>对象类型</p></th> 
<th><p>可用函数</p></th> 
</tr> 
</thead> 
<tbody > 
<tr class="odd"> 
<td><p>常量</p></td> 
<td><p>创建、编辑、克隆、共享、删除、显示详细信息和翻译</p></td> 
</tr>
</tbody> 
</table>

### 创建或编辑常量 { #create_constant }

1.  打开 **Maintenance** 应用并单击 **Other** \> **Constant**。

2.  点击添加按钮。

3.  在 **名称** 字段中，输入常量的名称。

4.  （可选）在 **简称** 字段中，键入常量的缩写名称。

5.  （可选）在 **Code** 字段中，分配一个代码。 

6.  在 **描述** 字段中，键入常量的简短信息说明。

7.  在 **值** 字段中，定义常量的值。

8.  点击**保存**。 

    现在可以使用该常数。

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
> 默认设置是每个人（**公共访问**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  （可选）添加用户或用户组：搜索用户或用户组并选中。用户或用户组被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **No access**（仅适用于**Public access**）：公众将无权访问该对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组将无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理选项集 { #manage_option_set }

### 关于选项集 { #about_option_set }

选项集提供了一个预定义的下拉列表（枚举），用于
DHIS2。您可以定义任何类型的选项。

一个名为“投放类型”的选项集将具有以下选项：“普通”，
“违反”，“剖腹产”和“协助”。

![](resources/images/maintainence/option_set_create.png)

<table>
<caption>Option set objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Option set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Option group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Option group set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 创建或编辑选项集 { #create_option_set }

> **重要**
>
> 选项集必须有代码和名称。您可以更改名称，但不能更改代码。所有选项的名称和代码都必须是唯一的，即使跨不同的选项集也是如此。

1.  打开 **Maintenance** 应用程序，然后单击 **Other** \> **Option set**。

2.  点击添加按钮。

3.  In the **Primary details** tab, define the option set:

    1.  在 **名称** 字段中，输入常量的名称。

    2.  In the **Code** field, assign a code.

    3.  选择**值类型**。

    4.  点击**保存**。 

4.  对于您需要的每个选项，执行以下任务：

    1.  Click the **Options** tab.

    2.  点击添加按钮。

    3.  Type a **Name** and a **Code**. Optionally also select a **Color** and an **Icon** which will be used for this option in the data capture apps.

    4.  按名称，代码/值或手动对选项进行排序。

    5.  点击**保存**。 

### 创建或编辑选项组 { #create_option_group }

You can group and classify **options** within an **option set** by using **option groups**. This way you can create a subset of options in an option set. The main purpose of this is to be able to filter huge option sets into smaller, related parts.

可以通过程序规则在跟踪器和事件捕获中将分组的选项隐藏或一起显示。

> **Note**
>
> You cannot change the **Option set** selected in an **Option group** once it has been created.

1. 打开 **Maintenance** 应用程序，然后单击 **Other** \> **Option group**。

2. 点击添加按钮。

3. 填写表格：

    1. **名称**
    2. **简称**
    3. **码**
    4. **选项集**

4. 选择**选项集**后，您可以分配要分组的**选项**。

5. 点击**保存**。 

### 创建或编辑选项组集 { #create_option_group_set }

**选项组集**允许您将多个**选项组**归为一组。
选项组集的主要目的是为捕获的数据添加更多维度以进行分析。

> **Note**
>
> You cannot change the **Option set** selected in an **Option group set** once it has been created.

1. 打开** Maintenance **应用程序，然后单击** Other ** \> ** Option group set **。

2. 点击添加按钮。

3. 填写表格：

    1. **名称**
    2. **码**
    3. **描述**
    4. **选项集**
    5. **数据尺寸**

        如果您选择**数据维度**，除了“期间”和“组织单位”的标准维度之外，该组集将作为另一个维度提供给分析。

4. 选择选项组并分配它们。

   可用选项组显示在左面板中。当前为选项组集成员的选项组显示在右侧面板中。

5. 点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
> 默认设置是每个人（**公共访问**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  （可选）添加用户或用户组：搜索用户或用户组并选中。用户或用户组被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **No access**（仅适用于**Public access**）：公众将无权访问该对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组将无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理图例 { #manage_legend }

### 关于传说 { #about_legend }

You can create, edit, clone, delete, show details and translate legends to make the maps you're setting up for your users meaningful. You create maps in the **Maps** app.

> **注意**
>
> 连续图例必须由以相同值结束和开始的图例项组成，例如：0-50 和 50-80。不要像这样设置图例项：0-50 和 51-80。这将在您的传奇中造成空白。

### 创建或编辑图例 { #create_legend }

> **注意**
>
>不允许在图例中留有空白。
>
>不允许有重复的图例项。

1.  打开** Maintenance **应用程序，然后单击** Other ** \> ** Legend **。

2.  点击添加按钮。

3.  In the **Name** field, type the legend name.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  创建您想在图例中包含的图例项：

    1.  选择**起始值**和**结束值**。

    2.  Select **Number of legend items**.

    3.  选择一种配色方案。

    4.  点击**创建图例项**。

    > **Tip**
    >
    > Click the options menu to edit or delete a legend item.

6.  （可选）添加更多图例项：

    1.  点击添加按钮。

    2.  输入名称，然后选择一个开始值，一个结束值和一种颜色。

    3.  点击**确定**。

7.  （可选）更改色阶。

    1.  单击色标以查看色标选项列表，然后选择色标。

    2.  To customize a color scale, click the add button. In the **Edit legend item** dialog, click the color scale button and hand-pick colors, or enter your color values.

8.  点击**保存**。 

<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>Legend item</th>
<th>Start value</th>
<th>End value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Low bad</td>
<td>0</td>
<td>50</td>
</tr>
<tr class="even">
<td>Medium</td>
<td>50</td>
<td>80</td>
</tr>
<tr class="odd">
<td>High good</td>
<td>80</td>
<td>100</td>
</tr>
<tr class="even">
<td>Too high</td>
<td>100</td>
<td>1000</td>
</tr>
</tbody>
</table>

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
> 默认设置是每个人（**公共访问**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  （可选）添加用户或用户组：搜索用户或用户组并选中。用户或用户组被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **No access**（仅适用于**Public access**）：公众将无权访问该对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组将无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

### 将图例分配给指标或数据元素 { #assign-a-legend-to-indicator-or-data-element }

You can assign a legend to an indicator or a data element in the **Maintenance** app, either when you create the object or edit it. When you then select the indicator or data element in the **Maps** app, the system automatically selects the assigned legend.

### 也可以看看 { #see_also_legend }

-   [使用 GIS 应用程序](https://docs.dhis2.org/master/en/user/html/using_gis.html)

## 管理预测变量 { #manage_predictor }

### 关于预测变量 { #about-predictors }

预测变量定义如何从表达式生成聚合数据值
包含汇总和/或事件数据。预测值可以基于：

-   来自与预测值相同时期的数据，和/或

-   来自预测值之前期间的数据

#### 同期数据 { #data_from_the_same_period }

预测器可以使用与预测值相同周期的数据。
例如，您可以计算具有
通过使用预测器表达式，例如：数据元素的非零值：

 <pre> <code> if（＃{ji7o0ILHuU2}！= 0，1，0）</code> </pre>

在数据所在的组织单位级别运行此预测变量时
收集的数据，如果数据元素具有
该组织单位的非零值，否则为0。
（如果您预测的数据元素未存储零，则
zeors不会存储在数据库中，以节省空间。）
然后，您可以在更高的分析中将这个预测值求和
组织单位级别，以计算组织单位的数量
报告中每个组织单位下的非零值。

#### 前期数据 { #data_from_previous_periods }

当您指定汇总时，预测变量将使用以前期间的数据
函数，例如sum（）或avg（）。例如，以下生成器表达式
标识一个值，该值是平均值加上标准偏差的两倍
前期数据：

 <pre> <code> avg（＃{ji7o0ILHuU2}）+ 2 * stddev（＃{ji7o0ILHuU2}）</code> </pre>

#### 上一时期的数据 { #data_from_the_same_and_previous_periods }

预测变量表达式可以访问与
通过访问两个
汇总函数（针对先前期间），以及任何汇总函数之外
（同一时期）。例如，如下所示的表达式可以是
用来平衡上一时期（＃{KOh02hHko7C}）
加上此期间的净变化（＃{ji7o0ILHuU2}），
得出此期间的余额：

 <pre> <code> sum（＃{KOh02hHko7C}）+＃{ji7o0ILHuU2} </code> </pre>

第一个数据值在聚合表达式（总和）内，以指示
它正在采样前一时期的数据（即使只有一个前一时期），
而第二个数据值不在聚合函数中以表明它
正在引用同一时期的数据。

如果需要，可以在同一引用中引用预测变量的输出数据元素
预测变量的表达。例如，此示例中的表达式可以
用于预测一段时间内的余额，然后将该值与
下一个期间的变化以计算下一个期间的余额。
当预测变量跨多个期间运行时，将在以下期间处理这些期间
按时间顺序排列，可以使用较早时期的结果
作为以后的输入。

#### 预测器组织单位级别 { #predictor_organisation_unit_levels }

您需要为预测变量的输出选择一个或多个组织单位级别。
预测变量生成的所有值都存储在组织单位的
您选择的级别。预测变量表达式中的每个项目都是值的总和
为该组织单位存储的信息（如果有的话）以及组织中存储的所有值
低于该单位（如果有）的单位。

> **注意**
>
> 在配置预测器时，您必须选择一个或多个组织单位级别，预测数据将在哪个级别输出。如果未选择任何级别，则不会生成预测值。

> **警告**
>
> 如果您想在分析报告中使用预测值，或进行其他预测，_不要选择多个组织单位级别_。当您选择多个级别时，较高级别的预测还将包括在较低级别预测中使用的任何数据。如果多个级别的预测随后用于分析或其他预测变量的表达式中，则可能导致重复计算，因为较高级别的预测值包含较低级别的预测值。

如果使用预测的组织单位级别，则可以选择多个组织单位级别
值仅在验证规则中。例如在疾病监测中，您
如果实际值高于
根据上一期间数据得出的该期间的期望值范围。
为此，您可以创建一个预测变量以计算平均值加上两倍的
前期数据的标准偏差。您可以使用验证
将该最高期望值与实际值进行比较的规则。
您可以在多个级别上运行预测变量和验证规则
以检测不同的爆发情况。在一种情况下，可能会有
一个设施的显着增加超出了预期范围，但是
包含该设施的地区可能不会超出其预期范围
因为地区价值与许多其他设施结合在一起。
但在另一种情况下，
设施不超出每个设施的预期范围（因为
每个设施的标准偏差可能很高），但确实超过了
该地区的预期范围（因为
整个地区的标准偏差可能会更低）。

如果要生成多个级别的预测，则还可以
在不同级别使用不同的预测变量。例如，您可能想要
如果某一级别的值超过平均值再加上标准的两倍，则会收到警报
偏差，但如果超出平均值加1.8倍，则会在另一个级别发出警报
标准偏差。如果需要，可以配置不同的预测变量
具有相同的输出数据元素。如果您使用相同的输出数据元素，
这仍然适用于不同组织单位级别的有效规则，
但您也必须注意不要在分析或其他结果中使用结果
预测器计算以避免重复计算。

In the **Maintenance** app, you manage the following predictor objects:

<table>
<caption>Predictor objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Predictor</p></td>
<td><p>Create, edit, clone, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 抽样前期 { #sampling-previous-periods }

预测变量可以生成过去一段时间的数据值，
现在或将来。这些值基于预测期间的数据，
和/或来自预测时期之前的时期的采样数据。

如果您只需要进行预测的同一时期的数据，
那么您无需阅读本节。本节介绍如何
从预测周期之前的周期中采样数据。

#### 顺序样本计数 { #sequential_sample_count }

预测器的 _Sequential sample count_ 给出要采样的前一个周期的数量。例如，如果预测变量的周期类型是 _Weekly_ 并且 _Sequential sample count_ 是 4，这意味着在紧接预测值周之前对前四个周进行采样。因此，第 9 周的预测值将使用第 5、6、7 和 8 周的样本：

![](resources/images/maintainence/predictor_sequential.png){.center width=50% }

If a predictor's period type is _Monthly_ and the _Sequential sample count_ is 4, this means to sample four previous months immediately preceding the predicted value month. So the predicted value for May would use samples from weeks January, February, March, and April:

![](resources/images/maintainence/predictor_sequential_month.png){.center width=51% }

The _Sequential sample count_ can be greater than the number of periods in a year. For example, if you want to sample the 24 months immediately preceding the predicted value month, set the _Sequential sample count_ to 24:

![](resources/images/maintainence/predictor_24_months.png){.center width=57% }

#### 顺序跳过计数 { #sequential_skip_count }

预测器的 _Sequential skip count_ 告诉在 _Sequential sample count_ 内，在预测值周期之前应该跳过多少个周期。这可以用于，例如，在爆发检测中跳过一个或多个紧接在前面的样本，这些样本实际上可能包含您尝试检测的爆发开始时的值。

例如，如果 _Sequential sample count_ 为 4，但 _Sequential skip count_ 为 2，则将跳过紧接在预测周期之前的两个样本，导致仅对两个周期进行采样：

![](resources/images/maintainence/predictor_skip.png){.center width=50% }

#### 年度样本数 { #annual_sample_count }

A predictor's _Annual sample count_ gives the number of previous years for which samples should be collected at the same time of year. This could be used, for instance, for disease surveillance in cases where the expected incidence of the disease varies during the year and can best be compared with the same relative period in previous years. For example, if the _Annual sample count_ is 2 (and the _Sequential sample count_ is zero), then samples would be collected from periods in the immediately preceding two years, at the same time of year.

![](resources/images/maintainence/predictor_annual.png){.center width=53% }

#### 顺序和年度样本计数一起 { #sequential_annual_sample_count }

您可以同时使用连续样本计数和年度样本计数，从过去几年的多个连续周期中收集样本。执行此操作时，将在与预测值期间相同的时间段内收集前几年的样本，并在一年中的同一时间之前和之后收集前几年的样本，具体由_Sequential sample count_数量确定.

例如，如果 _Sequential sample count_ 为 4，而 _Annual sample count_ 为 2，则将从紧接在预测值周期之前的 4 个周期中收集样本。此外，还将收集前 2 年同期的样本，以及两边的 4 个时期：

![](resources/images/maintainence/predictor_sequential_annual.png){.center width=66% }

#### 顺序，年度和跳过样本计数一起 { #sequential_annual_skip_sample_count }

您可以将 _Sequential skip count_ 与连续和年度样本计数一起使用。当您执行此操作时，_Sequential skip count_ 会告诉您在同一年要跳过多少个周期作为预测值周期。例如，如果 _Sequential sample count_ 为 4，_Sequential skip count_ 为 2，则将跳过紧接在预测值 period period 之前的两个周期，但将采样之前的两个周期：

![](resources/images/maintainence/predictor_skip_2_weeks.png){.center width=66% }

如果_Sequential 跳过计数_ 等于或大于_Sequential 样本计数_，则将不收集包含预测值周期的年份的样本；仅对过去几年的时期进行抽样：

![](resources/images/maintainence/predictor_skip_current_year.png){.center width=66% }

#### 样品跳过测试 { #sample_skip_test }

您可以使用 _Sample skip test_ 根据在这些时期内测试表达式的结果跳过某些时期的样本，否则这些样本将被包括在内。例如，这可以用于疾病暴发检测，其中样本跳过测试可以识别以前的疾病暴发，以将这些样本排除在非暴发基线预期值的预测之外。

_Sample skip test_ 是一个表达式，应该返回 true 或 false 值，以指示是否应该跳过句点。它可以是一个表达式，用于测试上一时期的任何数据值。例如，它可以测试明确输入的数据值，以指示应跳过前一个时期。或者，它可以将某个时期的先前预测值与该时期记录的实际值进行比较，以确定是否应该跳过该时期。

_Sample skip test_ 为_true_ 的任何时段都不会被采样。例如：

![](resources/images/maintainence/predictor_sample_skip_test.png){.center width=66% }

### 创建或编辑预测变量 { #create_predictor }

1.  打开** Maintenance **应用程序，然后单击** Other ** \> ** Predictor **。

2.  点击添加按钮。

3.  In the **Name** field, type the predictor name.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  （可选）输入**说明**。

6.  Select an **Output data element**. Values generated by this predictor are stored as aggregate data associated with this data element and the predicted period.

    该值根据数据元素的值类型进行四舍五入：如果值类型是整数类型，则将预测值四舍五入到最接近的整数。对于所有其他值类型，该数字四舍五入为四位有效数字。 （但是，如果小数点左侧的位数超过四位，则不会用零替换。）

7.  (Optional) Select an **Output category combo**. This dropdown will only show if the selected data element has categoryCombos attached to it. If this is the case, you can select which categoryCombo you would like to use.

8.  Select a **Period type**.

9.  分配一个或多个组织单位级别。输出值将分配给此级别（或这些级别）的组织单元。输入值将来自分配输出的组织单元，或来自输出组织单元下的任何更低级别。

10. 创建一个**生成器**。生成器是用于计算预测值的表达式。

    1.  Type a **Description** of the generator expression.

    2.  Select a **Missing value strategy**. This selection sets how the system evaluates a validation rule if data is missing.

        |选项|说明|
        | --- | --- |
        |如果缺少任何值，则跳过 |如果缺少任何组成表达式的值，则将跳过验证规则。这是默认选项。 <br> <br> 始终选择此选项，您使用 **Exclusive pair** 或 **Compulsory pair** 运算符。 |
        |如果所有值均缺失，则跳过|仅当组成该值的所有值均缺失时，才跳过验证规则。
        |永不跳过|如果缺少数据，将永远不会跳过验证规则，并且所有缺失值都将被有效地视为零。

    3.  输入生成器表达式。您可以通过选择聚合数据的数据元素或程序数据元素，属性或指标来构建表达式。尚不支持组织单位计数。

        要使用过去的采样数据，应将选择的所有项目包含在以下聚合函数之一中（请注意，这些函数名区分大小写）：
        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Aggregate function</p></th>
        <th><p>Means</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>avg(x)</p></td>
        <td><p>Average (mean) value of x</p></td>
        </tr>
        <tr class="even">
        <td><p>count(x)</p></td>
        <td><p>Count of the values of x</p></td>
        </tr>
        <tr class="odd">
        <td><p>max(x)</p></td>
        <td><p>Maximum value of x</p></td>
        </tr>
        <tr class="even">
        <td><p>median(x)</p></td>
        <td><p>Median value of x</p></td>
        </tr>
        <tr class="odd">
        <td><p>min(x)</p></td>
        <td><p>Minimum value of x</p></td>
        </tr>
        <tr class="even">
        <td><p>percentileCont(p, x)</p></td>
        <td><p>Continuous percentile of x, where p is the percentile as a floating point number between 0 and 1. For example, p = 0 will return the lowest value, p = 0.5 will return the median, p = 0.75 will return the 75th percentile, p = 1 will return the highest value, etc. Continuous means that the value will be interpolated if necessary. For example, percentileCont( 0.5, #{FTRrcoaog83} ) will return 2.5 if the sampled values of data element FTRrcoaog83 are 1, 2, 3, and 4.</p></td>
        </tr>
        <tr class="odd">
        <td><p>stddev(x)</p></td>
        <td><p>Standard deviation of x. This function is eqivalent to stddevSamp. It's suggested that you use the function stddevSamp instead for greater clarity.</p></td>
        </tr>
        <tr class="even">
        <td><p>stddevPop(x)</p></td>
        <td><p>Population standard deviation of x: sqrt( sum( (x - avg(x))^2 ) / n )</p></td>
        </tr>
        <tr class="even">
        <td><p>stddevSamp(x)</p></td>
        <td><p>Sample standard deviation of x: sqrt( sum( (x - avg(x))^2 ) / ( n - 1 ) ). Note that this value is not computed when there is only one sample.</p></td>
        </tr>
        <tr class="odd">
        <td><p>sum(x)</p></td>
        <td><p>Sum of the values of x</p></td>
        </tr>
        </tbody>
        </table>

        聚合函数内的任何项目都将针对所有采样的过去期间进行评估，然后根据聚合函数内的公式进行组合。将在进行预测的期间评估聚合函数之外的任何项目。

        您可以通过单击（或键入）表达式字段下方的任何元素来构建更复杂的表达式：( ) \* / + - Days。可以通过键入来添加常数。 Days 选项将 \[days\] 插入到表达式中，该表达式解析为数据来自期间的天数。

        您还可以在表达式中使用以下非聚合函数，或者在聚合函数内部，或者包含聚合函数，或者独立于聚合函数：

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Function</p></th>
        <th><p>Means</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>if(test, valueIfTrue, valueIfFalse)</p></td>
        <td><p>Evaluates <strong>test</strong> which is an expression that evaluates to a boolean value -- see <strong>Boolean expression notes</strong> below. If the test is <strong>true</strong>, returns the <strong>valueIfTrue</strong> expression. If it is <strong>false</strong>, returns the <strong>valueIfFalse</strong> expression.</p></td>
        </tr>
        <tr class="even">
        <td><p>isNull(item)</p></td>
        <td><p>Returns the boolean value <strong>true</strong> if the <strong>item</strong> is null (missing), otherwise returns <strong>false</strong>. The <strong>item</strong> can be any selected item from the right (data element, program data element, etc.).</p></td>
        </tr>
        <tr class="odd">
        <td><p>isNotNull(item)</p></td>
        <td><p>Returns <strong>true</strong> if the <strong>item</strong> value is not missing (not null), otherwise <strong>false</strong>.</p></td>
        </tr>
        <tr class="even">
        <td><p>firstNonNull(item [, item ...])</p></td>
        <td><p>Returns the value of the first <strong>item</strong> that is not missing (not null). Can be provided any number of arguments. Any argument may also be a numeric or string literal, which will be returned if all the previous items have missing values.</p></td>
        </tr>
        <tr class="odd">
        <td><p>greatest(expression [, expression ...])</p></td>
        <td><p>Returns the greatest (highest) value of the expressions given. Can be provided any number of arguments.</p></td>
        </tr>
        <tr class="even">
        <td><p>least(expression [, expression ...])</p></td>
        <td><p>Returns the least (lowest) value of the expressions given. Can be provided any number of arguments.</p></td>
        </tr>
        </tbody>
        </table>

        **Boolean expression notes:** A boolean expression must evaluate to **true** or **false**. The following operators may be used to compare two values resulting in a boolean expression: \<, \>, \!=, ==, \>=, and \<=. The following operators may be used to combine two boolean expressions: && (logical and), and || (logical or). The unary operator \! may be used to negate a boolean expression.

        生成器表达式示例：

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Generator expression</p></th>
        <th><p>Means</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>sum(#{FTRrcoaog83.tMwM3ZBd7BN})</p></td>
        <td><p>Sum of the sampled values of data element FTRrcoaog83 and category option combination (disaggregation) tMwM3ZBd7BN</p></td>
        </tr>
        <tr class="even">
        <td><p>avg(I{GSae40Fyppf}) + 2 * stddevSamp(I{GSae40Fyppf})</p></td>
        <td><p>Average of the sampled values of of program indicator GSae40Fyppf plus twice its sample standard deviation</p></td>
        </tr>
        <tr class="odd">
        <td><p>sum(D{IpHINAT79UW.eMyVanycQSC}) / sum([days])</p></td>
        <td><p>Sum of all sampled values of data element eMyVanycQSC from porgram IpHINAT79UW divided by the number of days in all sample periods (resulting in the overall average daily value)</p></td>
        </tr>
        <tr class="even">
        <td><p>sum(#{FTRrcoaog83}) + #{T7OyqQpUpNd}</p></td>
        <td><p>Sum of all sampled values of data element FTRrcoaog83 plus the value of data element T7OyqQpUpNd in the period being predicted for (includes all disaggregations)</p></td>
        </tr>
        <tr class="odd">
        <td><p>1.2 * A{IpHINAT79UW.RKLKz1H20EE}</p></td>
        <td><p>1.2 times the value of attribute RKLKz1H20EE of program IpHINAT79UW, in the period being predicted for</p></td>
        </tr>
        <tr class="even">
        <td><p>if(isNull(#{T7OyqQpUpNd}), 0, 1)</p></td>
        <td><p>If the data element T7OyqQpUpNd is null in the period being predicted, then 0, otherwise 1.</p></td>
        </tr>
        <tr class="odd">
        <td><p>percentileCont(0.5, #{T7OyqQpUpNd})</p></td>
        <td><p>Continuous 50th percentile of the sampled values for data element T7OyqQpUpNd. Note that this is the same as median(#{T7OyqQpUpNd})</p></td>
        </tr>
        <tr class="even">
        <td><p>if(count(#{T7OyqQpUpNd}) == 1, 0, stddevSamp(#{T7OyqQpUpNd}))</p></td>
        <td><p>If there is one sample value present for data element T7OyqQpUpNd, then 0, otherwise the sample standard deviation of these sample values. (Note that if no samples are present then the stddevSamp returns no value, so no value is predicted.)</p></td>
        </tr>
        </tbody>
        </table>

11. (Optional) Create a **Sample skip test**. The sample skip test tells which previous periods if any to exclude from the sample.

    1.  Type a **Description** of the skip test.

    2.  输入样本跳过测试表达式。您可以通过选择聚合数据的数据元素或程序数据元素、属性或指标来构建表达式。尚不支持组织单位计数。与生成器函数一样，您可以单击（或键入）表达式字段下方的任何元素：( ) \* / + - Days。

        上述非聚合函数也可用于跳过测试。

        The expression must evaluate to a boolean value of **true** or **false**. See **Boolean expression notes** above.

        跳过测试表达式示例：

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Skip test expression</p></th>
        <th><p>Means</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>#{FTRrcoaog83} &gt; #{M62VHgYT2n0}</p></td>
        <td><p>The value of data element FTRrcoaog83 (sum of all disaggregations) is greater than the value of data element M62VHgYT2n0 (sum of all disaggregations)</p></td>
        </tr>
        <tr class="even">
        <td><p>#{uF1DLnZNlWe} &gt; 0</p></td>
        <td><p>The value of data element uF1DLnZNlWe (sum of all disaggregations) is greater than the zero</p></td>
        </tr>
        <tr class="odd">
        <td><p>#{FTRrcoaog83} &gt; #{M62VHgYT2n0} || #{uF1DLnZNlWe} &gt; 0</p></td>
        <td><p>The value of data element FTRrcoaog83 (sum of all disaggregations) is greater than the value of data element M62VHgYT2n0 (sum of all disaggregations) or the value of data element uF1DLnZNlWe (sum of all disaggregations) is greater than the zero</p></td>
        </tr>
        </tbody>
        </table>

12. Enter a **Sequential sample count** value.

    这是计算应该及时返回多少个连续周期以对计算数据进行采样。

13. Enter an **Annual sample count** value.

    这是计算应及时回溯多少年以对计算数据进行采样。

14. (Optional) Enter a **Sequential skip count** value.

    这是在对数据进行采样之前应跳过紧接在预测值周期之前的连续周期的数量。

15. 点击**保存**。 

### 创建或编辑预测变量组 { #create_predictor_group }

1.  打开 **Maintenance** 应用并单击 **Other** \> **Predictor group**。

2.  点击添加按钮。

3.  Type a **Name**. This field needs to be unique.

4.  (Optional) In the **Code** field, assign a code. This field needs to be unique.

5.  （可选）输入**说明**。

6.  Double-click the **Predictors** you want to assign to the group.

7.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理推送报告 { #manage_push_report }

### 关于推送报告 { #about_push_report }

推送报告使您可以提高对数据分析的认识和使用
通过将带有图表，表格和地图的报告直接发送到用户电子邮件
地址。

-   推送报告从现有仪表板获取其内容。

-   推送报告以与仪表板上相同的顺序列出仪表板项目。

-   推送报告只能包含带有图表、地图或表格的仪表板项目。

-   You create the push report and its schedule in the **Maintenance** app.

-   您在**维护**应用程序中设置的**标题**和**消息** 有参数可以在每个报告中。您为报告提供的**名称**不包括在报告中。相反，应该名称用于标识系统中的分析对象。这样，报告可以为一件事，而报告的标题可以是另一件事。

-   当您运行推送报告作业时，系统会从您选择的用户组中编译一个收件人列表。然后，系统会为所选用户组的每个成员生成一份报告。每个仪表板项目都是专门为每个用户生成的。这意味着报告中包含的数据反映了用户有权访问的数据。因此，所有用户都可以获得相同的报告（如果所有数据都是“静态”）或自定义报告（如果所有数据都是“动态”），或者两者的组合。

-   推送报告通过电子邮件发送给收件人，而不是通过内部 DHIS2 消息系统。如果用户没有有效的电子邮件，或者作业失败，则不会发送电子邮件。在这种情况下，问题会记录在服务器上。

> **注意**
>
> 推送报告中生成的数据是公开的，因此请确认您没有包含任何敏感数据。

![](resources/images/maintainence/push_report_ex.png)

In the **Maintenance** app, you manage the following push reports objects:

<table> 
<caption>发送维护应用中的报告对象</caption> 
<colgroup> 
<col style="width: 50%" /> 
<col style="width: 50%" /> 
</colgroup> 
<thead > 
<tr class="header"> 
<th><p>对象类型</p></th> 
<th><p>可用函数</p></th> 
</tr> 
</thead> 
<tbody> 
<tr class="odd"> 
<td><p>翻译分析</p></td> 
<td><p>创建、编辑、克隆、删除、显示细节、预览和运行</p></td> 
</tr> 
</tbody> 
</table>

### 创建或编辑推送报告 { #create_push_report }

1.  打开 **Maintenance** 应用并点击 **Other** \> **Push analysis**。

2.  点击添加按钮。

3.  在**名称** 字段中，输入计划报告的名称。

    此名称不包含在报告电子邮件中。相反，该名称用于标识系统中的推送分析对象。

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  添加报告**标题**。

    该标题包含在报告电子邮件中。

6.  （可选）添加**消息**。

    此消息包含在报告电子邮件中。

7.  选择一个 **仪表板** 作为报告的基础。

8.  选择并分配您要向其发送报告的用户组。

9.  选择**计划频率**：**每天**、**每周**或**每月**。

    > **Note**
    >
    > If you schedule a push report to "Monthly" and "31", the scheduled report job will not run if the month has less than 31 days.

10. （可选）选择**启用**以激活推送报告作业。

    作业只有激活后才能运行。

11. 点击**保存**。 

### 预览推送报告 { #preview_push_report }

1.  打开 **Maintenance** 应用并点击 **Other** \> **Push analysis**。

2.  在推送报告列表中，找到要预览的推送报告。

3.  单击选项菜单并选择**预览**。

    推送报告的预览在新窗口中打开。

### 运行推送报告作业 { #run_push_report }

1.  打开 **Maintenance** 应用并点击 **Other** \> **Push analysis**。

2.  在推送报告列表中，找到要运行的推送报告。

3.  单击选项菜单并选择 **立即运行**。

    推送报告作业立即运行。

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理外部地图图层 { #manage_external_maplayer }

### 关于外部地图图层 { #about_gis_map_layers }

您可以通过包含来自各种来源和
将它们与您在DHIS2中的数据结合起来。 DHIS2支持通用地图
服务格式，例如Web Map Service（WMS），Tile Map Service（TMS）
和XYZ磁贴。

### 创建或编辑外部地图图层 { #create_external_map_layer }

> **注意**
>
> DHIS2 仅支持 Web 墨卡托投影 ([EPSG:3857](https://epsg.io/3857))，因此请确保外部服务支持此投影。

<table> 
<caption>维护应用中的外部地图图层对象</caption> 
<colgroup> 
<col style="width: 50%" /> 
<col style="width: 50%" /> 
</colgroup> 
<thead> 
<tr class="header"> 
<th><p>对象类型</p></th> 
<th><p>可用函数</p></th> 
</tr> 
</thead> 
<tbody> 
<tr class="odd"> 
<td><p>外部地图层</p></td> 
<td><p>创建、编辑、克隆、删除、显示细节和翻译</p > </td> 
</tr> 
</tbody> 
</table>

1.  打开 **Maintenance** 应用并点击 **Other** \> **External map layer**。

2.  点击添加按钮。

3.  在 **Name** 字段中，输入描述外部地图层内容的名称。 

    这是您将在 **Maps** 应用程序中看到的名称。 

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  选择 **地图服务** 格式。 

    DHIS2支持三种常见的地图服务格式：

    -   网络地图服务（WMS）

        **图像格式**：PNG 格式允许图层透明，JPG 格式提供更好的压缩并且通常加载速度更快。

        **图层**：WMS 可以包含多个单独的图层，您可以指定要包含的图层（逗号分隔）。请参阅 WMS GetCapabilities 文档以查看可用层。

    -   平铺地图服务（TMS）

    -   XYZ磁贴（也可用于WMTS）

6.  输入地图服务的**URL**。

    > **Note**
    >
    > XYZ and TMS URLs must contain placeholders {}, for example: http://{s}.tile.osm.org/{z}/{x}/{y}.png.

7.  （可选）输入地图图层的**来源**。如果您想链接到源，该字段可以包含 HTML 标记。

    当您使用外部地图服务时，突出显示数据的来源很重要。

8.  选择一个**放置**：

    -   **底部 - 底图**：对于地图应用程序，这使得外部地图图层可选择作为底图（即作为 DHIS2 底图的替代品）。

    -   **顶部 - 覆盖**：对于地图应用程序，这允许从“添加图层”选择添加外部地图，并将其放置在基本地图上方的任何位置。

9.  （可选）添加图例。

    您可以通过两种方式添加图例：

    -   选择一个预定义的 **Legend** 来描述地图层的颜色。

        > **Tip**
        >
        > Click **Add new** to create legends that you're missing. In the form that opens, create the legends you need. When you're done, click **Refresh values**.

    -   在 **图例图像URL** 中输入指向外部图像图例的链接。

        这些通常是为 WMS 提供的。请参阅 WMS GetCapabilites 文档中的 LegendURL 下。

10. 点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理SQL视图 { #maintenance_sql_view }

DHIS2的SQL View功能将存储SQL视图定义
内部，然后在需要时实例化视图。

数据库管理员在创建数据库视图时必须小心
直接在DHIS2数据库中。例如，当资源表
生成，所有这些都将首先被删除然后重新创建。如果
任何SQL视图都依赖于这些表，完整性违规异常
将被抛出并且该过程将被中止。

SQL视图基于它们的反向字母顺序删除
DHIS2中的名称，并按常规字母顺序创建。这允许
您要在SQL视图之间具有依赖关系，因为视图仅取决于
其他按字母顺序排列的观点。对于
例如，“ ViewB”可以安全地依赖于“ ViewA”。否则，有意见
取决于其他视图会导致完整性违规错误。

### 创建一个新的SQL视图 { #creating-a-new-sql-view }

要创建新的 SQL 视图，请单击 **Apps** \> **维护** \> **其它** \> **SQL View** 并单击 添加 **+** 按钮。

![](resources/images/maintainence/create_sql_view.PNG)

SQL视图的“名称”属性将用于确定名称
当视图实现时，DHIS2将创建的表的
用户。 “描述”属性允许提供一些描述性的
有关SQL视图实际功能的文本。最后，“ SQL查询”
应该包含SQL视图定义。只有SQL“ SELECT”语句是
允许，某些敏感表（即用户信息）不是
可访问按“保存”以存储SQL视图定义。

### SQL视图管理 { #sql-view-management }

为了利用SQL视图，只需点击视图，然后从
在上下文菜单中，选择“执行查询”。该过程完成后，您将
系统将通知您已创建一个表。表格名称
将由“描述”属性提供
在SQL视图定义中提供。生成视图后，
您可以通过再次单击视图并选择“显示SQL
视图”。

> **提示**
>
> 如果您的视图依赖于另一个视图，则应注意视图的命名方式。在 DHIS2 服务器上运行分析时，必须删除所有视图，然后重新创建。分析开始时，视图会按字母顺序删除，然后按字母倒序重新创建。因此，如果视图 A 依赖于视图 B，则它必须按字母顺序出现在视图 B 之前。如果它按字母顺序出现在视图 B 之后，则分析可能会失败，因为具有依赖关系的视图不会以正确的顺序被删除。

## 管理语言环境 { #maintenance_locale_management }

可以在DHIS2中创建自定义语言环境。除了
系统提供的语言环境，您可能需要添加自定义
系统的语言环境（例如“英语”和“赞比亚”）。这将允许
您可以将元数据对象翻译成本地语言，或解决
使用共同元数据的国家之间的细微差异
定义。

![](resources/images/maintainence/locale_management.png)

语言环境由语言和国家/地区组成。选择
所需的值，然后按“添加”。此自定义语言环境现已可用
作为系统中的翻译语言环境之一。

## 一次编辑多个对象组 { #edit_multiple_object_groups }

**维护**应用程序中的**元数据组编辑器**可让您
同时编辑多个对象组。您可以编辑以下内容
对象类型：

<table> 
<caption>元数据组编辑器中的对象类型</caption> 
<colgroup> 
<col style="width: 50%" /> 
<col style="width: 50%" /> 
</colgroup> 
<thead> 
<tr class="header"> 
<th><p>对象类型</p></th> 
<th><p>可用函数</p></th> 
</tr> 
</thead > 
<tbody> 
<tr class="odd"> 
<td><p>类别选项</p></td> 
<td></td> 
</tr> 
<tr class="even"> 
<td> <p>类别选项组</p></td> 
<td></td> 
</tr> 
<tr class="odd"> 
<td><p>数据元素</p></td> 
<td><p>将一个数据元素添加到多个数据元素组</p> 
<p>从多个数据元素组中删除一个数据元素</p></td> 
</tr> 
<tr class="even"> 
<td><p>数据元素组</p></td>
<td><p>将多个数据元素添加到一个数据元素组</p> 
<p>从一个数据元素组中删除多个数据元素</p></td> 
</tr> 
<tr class ="odd"> 
<td><p>指标</p></td> 
<td><p>将一个指标添加到多个指标组</p> 
<p>从多个指标组中删除一个指标</p></td> 
</tr> 
<tr class="even"> 
<td><p>指标组</p></td> 
<td><p>将多个指标添加到一个指标组</p> 
<p>从一个指标组中删除一些指标</p></td> 
</tr> 
</tbody> 
</table>

### 编辑对象组中的多个对象 { #edit-multiple-objects-in-an-object-group }

1.  打开 **维护** 应用程序并单击 **元数据组编辑器**。

2.  单击**管理组中的项目**。 

3.  选择对象组类型，例如**指标组**。

4.  选择一个对象组，例如** HIV **。

5.  在左侧列表中，选择要添加到对象组的对象，然后单击向右箭头。

6.  在右侧列表中，选择要从对象组中删除的对象，然后单击向左箭头。

### 编辑多个对象组中的一个对象 { #edit-an-object-in-multiple-object-groups }

1.  打开 **维护** 应用程序并单击 **元数据组编辑器**。

2.  单击**管理组条目**。

3.  选择一个对象类型，例如**指标**。

4.  选择一个对象，例如 **ANC LLITN 覆盖范围**。 

5.  在左侧列表中，选择要将对象添加到的对象组，然后单击向右箭头。

6.  在右侧列表中，选择要从中删除对象的对象组，然后单击向左箭头。

# 在维护应用中配置程序 { #configure_programs_in_maintenance_app }

## 关于程序 { #about_program_maintenance_app }

传统上，公共卫生信息系统一直在报告
整个健康计划中服务提供的汇总数据。这个
不允许您跟踪提供这些服务的人员。在
DHIS2，您可以分阶段定义自己的程序。这些程序是
“跟踪器”功能的重要部分，可让您跟踪
个人记录。您还可以跟踪其他“实体”，例如井或
保险。您可以创建两种类型的程序：

<table>
<caption>节目类型</caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><p>节目类型</p></th>
<th><p>描述</p></th>
<th><p>使用示例</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>活动程序</p></td>
<td><p>单一事件 <em>没有</em> 注册程序（匿名程序或 SEWoR）</p>
<p>匿名的个人事件通过卫生系统进行跟踪。这些个人交易不涉及任何个人或实体。</p>
<p>只有一个程序阶段。</p></td>
<td><p>记录健康案例，无需在系统中注册任何信息。</p>
<p>记录测量数据或监视线路列表。</p></td>
</tr>
<tr class="even">
<td><p>跟踪程序</p></td>
<td><p>单一事件 <em>和</em> 注册程序 (SEWR)</p>
<p>通过与卫生系统的每个单独交易来跟踪实体（人、商品等）</p>
<p>只有一个程序阶段。</p>
<p>一个跟踪实体实例 (TEI) 只能注册一次该计划。</p></td>
<td><p>记录出生证明和死亡证明。</p></td>
</tr>
<tr class="odd">
<td></td>
<td><p>多事件 <em>和</em> 注册计划 (MEWR)</p>
<p>通过与卫生系统的每个单独交易来跟踪实体（人、商品等）</p>
<p>有多个程序阶段。</p></td>
<td><p>母亲健康计划，包括 ANC 访问 (2-4+)、分娩、PNC 访问等阶段。</p></td>
</tr>
</tbody>
</table>

To create a program, you must first configure several types of metadata objects. You create these metadata objects in the **Maintenance** app.

<table>
<caption>Program metadata objects in the Maintenance app</caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th>Description</th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Event program</p></td>
<td><p>A program to record single event without registration</p></td>
<td><p>Create, edit, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
+<td><p>Tracker program</p></td>
+<td><p>A program to record single or multiple events with registration</p></td>
+<td><p>Create, edit, share, delete, show details and translate</p></td>
+</tr>
<tr class="even">
<td><p>Program indicator</p></td>
<td><p>An expression based on data elements and attributes of tracked entities which you use to calculate values based on a formula.</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Program rule</p></td>
<td><p>Allows you to create and control dynamic behaviour of the user interface in the <strong>Tracker Capture</strong> and <strong>Event Capture</strong> apps.</p></td>
<td><p>Create, edit, clone, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Program rule variable</p></td>
<td><p>Variables you use to create program rule expressions.</p></td>
<td><p>Create, edit, clone, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Relationship type</p></td>
<td><p>Defines the relationship between tracked entity A and tracked entity B, for example mother and child.</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Tracked entity type</p></td>
<td><p>Types of entities which can be tracked through the system. Can be anything from persons to commodities, for example a medicine or a person.</p>
<p>A program must have one tracked entity. To enrol a tracked entity instance into a program, the tracked entity of an entity and tracked entity of a program must be the same.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>A program must be specified with only one tracked entity. Only tracked entity as same as the tracked entity of program can enroll into that program.</p>
</blockquote></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Tracked entity attribute</p></td>
<td><p>Used to register extra information for a tracked entity.</p>
<p>Can be shared between programs.</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Program</p></td>
<td><p>A program consist of program stages.</p></td>
<td><p>Create, edit, share, delete, assign to organisation units, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Program stage</p></td>
<td><p>A program stage defines which actions should be taken at each stage.</p></td>
<td><p>Create, edit, share, change sort order, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Program indicator group</p></td>
<td><p>A group of program indicators</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Validation rule</p></td>
<td><p>A validation rule is based on an expression which defines a relationship between data element values.</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Program notification</p></td>
<td><p>Automated message reminder</p>
<p>Set reminders to be automatically sent to enrolled tracked entity instances before scheduled appointments and after missed visits.</p></td>
<td><p>Create, edit and delete</p></td>
</tr>
<tr class="odd">
<td><p>Program stage notification</p></td>
<td><p>Automated message reminder</p>
<p>Set reminders to be automatically sent whenever a program stage is completed, or before or after the due date.</p></td>
<td><p>Create, edit and delete</p></td>
</tr>
</tbody>
</table>

## 在维护应用程序中配置事件程序 { #configure_event_program_in_maintenance_app }

### 关于活动计划 { #about_event_program }

Single event _without_ registration programs are called event programs. You configure them in the **Maintenance** app. Event programs can have three types of data entry forms:

<table>
<caption>Types of data entry forms for event programs</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Form type</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Basic</p></td>
<td><p>Lists all data elements which belong to the program. You can change the order of the data elements.</p></td>
</tr>
<tr class="even">
<td><p>Section</p></td>
<td><p>A section groups data elements. You can then arrange the order of the sections to create the desired layout of the data entry form.</p></td>
</tr>
<tr class="odd">
<td><p>Custom</p></td>
<td><p>Defines the data entry form as HTML page.</p></td>
</tr>
</tbody>
</table>

> **注意**
>
> - 如果两者都存在，自定义表单优先于部分表单。
>
> - 如果没有定义自定义或部分形式，将使用基本形式。
>
> - Android 应用程序仅支持部分表单。

You can create _program notifications_ for event programs. The notifications are sent either via the internal DHIS2 messaging system, via e-mail or via text messages (SMS). You can use program notifications to, for example, send an automatic reminder to a tracked entity 10 days before a scheduled appointment. You use the program’s tracked entity attributes (for example first name) and program parameters (for example enrollment date) to create a notification template. In the **Parameters** field, you'll find a list of available tracked entity attributes and program parameters.

### 工作流程：创建事件程序 { #workflow_event_program }

1.  输入事件程序详细信息。

2.  分配数据元素。

3.  创建数据输入表单：**基本**，**部分**或**自定义**。

4.  将程序分配给组织单位。

5.  创建程序通知。

### 创建或编辑事件程序 { #create_event_program }

#### 输入活动计划详细信息 { #enter-event-program-details }

1.  打开 **Maintenance** 应用程序并单击 **Program** \> **Program**。

2.  单击添加按钮，然后在弹出菜单中选择**事件程序**。

3.  输入程序详细信息，然后单击下一步。

     <table>
     <colgroup>
     <col style="width: 50%" />
     <col style="width: 50%" />
     </colgroup>
     <thead>
     <tr class="header">
     <th> <p>字段</p> </th>
     <th> <p>说明</p> </th>
       </tr>
     </thead>
     <tbody>
       <tr class="odd">
     <td> <p> <strong>名称</strong> </p> </td>
     <td> <p>程序的名称。 </p> </td>
       </tr>
       <tr class="even">
     <td> <p> <strong>颜色</strong> </p> </td>
     <td> <p>在数据捕获应用程序中用于此程序的颜色。 </p> </td>
       </tr>
       <tr class="odd">
     <td> <p> <strong>图标</strong> </p> </td>
     <td> <p>在数据捕获应用程序中用于此程序的图标。 </p> </td>
       </tr>
       <tr class="even">
     <td> <p> <strong>短名称</strong> </p> </td>
     <td> <p>程序的简称。在分析应用程序中，短名称用作默认图表或表标题。 </p> </td>
       </tr>
       <tr class="odd">
     <td> <p> <strong>说明</strong> </p> </td>
     <td> <p>程序的详细说明。 </p> </td>
       </tr>
       <tr class="even">
     <td> <p> <strong>版本</strong> </p> </td>
     <td> <p>程序的版本。例如，当人们在Android实现中离线收集数据时，将使用此功能。当他们上网并同步其元数据时，他们应该获得该程序的最新版本。 </p> </td>
       </tr>
       <tr class="odd">
     <td> <p> <strong>类别组合</strong> </p> </td>
     <td> <p>您要使用的类别组合。默认设置为<strong>无</strong>。 </p> </td>
       </tr>
       <tr class="even">
     <td> <p> <strong> 数据审批工作流程 </strong> </p> </td>
     <td> <p>您要使用的数据批准工作流。默认设置为<strong>无值</strong>。 </p> </td>
       </tr>
       <tr class="odd">
    <td><p><strong>已完成的事件到期日期</strong></p></td>
     <td> <p>定义您可以编辑已完成事件的天数。这意味着，当事件完成且指定的到期天数已过时，该事件将被锁定。 </p>
     <p>如果将&quot;完成事件设置为&quot;到10&quot;，则事件在完成日期后十天被锁定。在此日期之后，您将无法再编辑事件。 </p> </td>
       </tr>
       <tr class="even">
     <td> <p> <strong>有效期类型</strong> </p>
     <p><strong>有效期</strong></p></td>
     <td> <p>到期天数定义了上一个周期结束后可以编辑事件的天数。期限类型由到期期限类型定义。这意味着自上一个期间的结束日期起经过指定的到期天数后，该期间的事件将被锁定。 </p>
     <p>如果将到期类型设置为&quot;Monthly&quot;，将到期日设置为&quot;10&quot;，则月份为10月，那么您无法在11月10日之后向10月添加或编辑事件。 </p> </td>
       </tr>
       <tr class="odd">
     完成后的块输入表格<td> <strong> </strong> </td>
    <td><p>Select checkbox to block the entry form after completion of the event of this program.</p>
     <p>这意味着在将状态重置为不完整之前，无法更改输入表单中的数据。 </p> </td>
       </tr>
       <tr class="even">
     <td> <strong>功能类型</strong> </td>
     <td> <p>设置程序是否要捕获地理特征类型。

-   **无**没有捕获任何内容。
-   **多边形** 一个区域被捕获。对于单个事件程序，该区域将是代表正在捕获的事件的区域。对于跟踪程序，该区域将代表注册区域。
-   **Point** A point/coordinate is captured. For single event programs the point will be representing the event being captured. For tracker programs, the point will represent the enrollment. </p></td> </tr> <tr class="odd"> <td><strong>Validation strategy</strong></td> <td>Sets the server and client side validation requirement.
    >无论验证策略如何，总是执行数据类型验证。例如，从不存储包含文本的整数字段。
-   **完成时** 此选项将强制在完成事件时修复必填字段和错误消息，但无需通过这些验证要求即可将事件保存到服务器。
    -   出于遗留原因，这始终是跟踪器程序的验证策略，在该策略中，事件中的每个数据值在获取数据时都会存储到服务器。
-   **更新和插入时**此选项将在将事件保存到服务器时强制执行必填字段验证，无论完成状态如何。使用此选项时，如果不通过验证，则无法存储任何事件。
       </td>
       </tr>
       <tr class="even">
       <td> <strong>预先生成的事件UID </strong> </td>
       <td>选中复选框以预先生成唯一的事件ID号。 </td>
       </tr>
       <tr class="odd">
       报告日期的描述<td> <strong>报告日期的描述</strong> </td>
       <td> <p>键入报告日期的描述。 </p>
       <p>此描述以案例输入表单显示。 </p> </td>
       </tr>
       </tbody>
       </table>

1.  点击下一步。

#### 分配数据元素 { #assign_data_elements }

1.  点击**分配数据元素**。

2.  在可用项目列表中，双击要分配给事件程序的数据元素。

3.  （可选）为每个数据元素添加其他设置：

    <table>
    <colgroup>
    <col style="width: 50%" />
    <col style="width: 50%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Setting</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p><strong>Compulsory</strong></p></td>
    <td><p>The value of this data element must be filled into data entry form before you can complete the event.</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Allow provided elsewhere</strong></p></td>
    <td><p>Specify if the value of this data element comes from other facility, not in the facility where this data is entered.</p></td>
    </tr>
    <tr class="odd">
    <td><p><strong>Display in reports</strong></p></td>
    <td><p>Displays the value of this data element into the single event without registration data entry function.</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Date in future</strong></p></td>
    <td><p>Will allow user to select a date in future for date data elements.</p></td>
    </tr>
    <tr class="odd">
    <td><p><strong>Mobile render type</strong></p></td>
    <td><p>Can be used to select different render types for mobile devices. Available options vary depending on the data element's value type. For example, for a numerical value you may select &quot;Default&quot;, &quot;Value&quot;, &quot;Slider&quot;, &quot;Linear scale&quot;, and &quot;Spinner&quot;.</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Desktop render type</strong></p></td>
    <td><p>WARNING: NOT IMPLEMENTED YET.</p>
    <p>Can be used to select different render types for desktop (i.e. the web interface). Available options vary depending on the data element's value type. For example, for a numerical value you may select &quot;Default&quot;, &quot;Value&quot;, &quot;Slider&quot;, &quot;Linear scale&quot;, and &quot;Spinner&quot;.</p></td>
    </tr>
    </tbody>
    </table>

4.  点击下一步。

#### 创建数据输入表单 { #create_data_entry_forms }

The data entry forms decide how the data elements will be displayed to the user in the **Event Capture** app.

1.  点击**创建数据输入表单**。

2.  点击**基本**，**部分**或**自定义**。

3.  To create a **Basic** data entry form: Drag and drop the data elements in the order you want.

4.  要创建**部分**数据输入表单，请执行以下操作：

    1.  单击添加按钮并为桌面和移动设备输入部分的名称、描述和渲染类型。

    2.  单击该部分，使其以黑线突出显示。

    3.  通过单击数据元素名称旁边的加号来添加数据元素。

    4.  重复上述步骤，直到获得所需的所有部分。

    5.  更改部分顺序：单击选项菜单，然后将部分拖动到您想要的位置。

5.  从以下位置创建**自定义**数据条目：使用所见即所得编辑器创建完全自定义的表单。如果选择**Source**，则可以直接在编辑区粘贴HTML代码。您还可以插入图像，例如标志或徽标。

6.  点击下一步。

#### 访问 { #access }

Access options decide who can capture data for the program or view/edit the program's metadata. A program can be shared to organisation units, and in addition, the main program and any program stages' access options can be configured through the **Sharing dialog**. Access options are available in the **Access** tab.

分配组织单位：

1.  在组织树中，双击要添加到程序的组织单位。

    您可以通过展开分支（单击箭头符号）或通过名称搜索来在树中定位组织单位。选定的组织单位显示为橙色。

更改角色和访问权限：

1.  向下滚动到**角色和访问权限**部分。

    第一行显示主程序的访问选项，随后的每一行显示一个程序阶段的选项。带有警告图标（感叹号）的程序阶段包含与主程序不同的访问选项，这意味着它们由不同的用户组合访问。

2.  单击任一行，将显示**共享对话框**。

3.  相应地修改访问选项。有关详细信息，请参阅有关共享对话框的文档。

4.  点击**应用**按钮。

5.  对每个程序/程序阶段重复该过程。您还可以将所有访问选项从主程序复制到您的子程序：

    1.  Select the program stages you want to have similar access options as the main program by toggling the checkboxes on the right hand side of the program stages. You can also choose to **Select all** program stages, **Deselect all** program stages or **Select similar** stages, in terms of access options, to that of the main program. Similar stages are toggled by default.

    2.  点击**应用于选定阶段**

#### 创建程序通知 { #create_program_notifications }

1.  创建您要发送的消息：

    1.  点击**发送什么？**。

    2.  输入一个**名称**。

    3.  创建**主题模板**：双击**模板变量**字段中的参数以将它们添加到您的主题。

        > **Note**
        >
        > The subject is not included in text messages.

    4.  创建**消息模板**：双击**模板变量**列表中的参数名称，将它们添加到您的消息中。

        亲爱的 A{w75KJ2mc4zz}，您现在已注册 V{program_name}。

2.  Define _when_ you want to send the message:

    1.  单击**什么时候发送？**。

    2.  选择一个**通知触发器**。

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Notification trigger</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>Program stage completion</p></td>
        <td><p>The program stage notification is sent when the program stage is completed</p></td>
        </tr>
        <tr class="even">
        <td><p>Days scheduled (due date)</p></td>
        <td><p>The program stage notification is sent XX number of days before or after the due date</p>
        <p>You need to enter the number of days before or after the scheduled date that the notification will be send.</p></td>
        </tr>
        </tbody>
        </table>

3.  定义您要将消息发送给的_who_：

    1.  单击**将其发送给谁？**。

    2.  选择**通知**。

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Notification recipient</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>Tracked entity instance</p></td>
        <td><p>Receives program notifications via e-mail or text message.</p>
        <p>To receive a program notification, the recipient must have an e-mail address or a phone number attribute.</p></td>
        </tr>
        <tr class="even">
        <td><p>Organisation unit contact</p></td>
        <td><p>Receives program notifications via e-mail or text message.</p>
        <p>To receive a program notification, the receiving organisation unit must have a registered contact person with e-mail address and phone number.</p></td>
        </tr>
        <tr class="odd">
        <td><p>Users at organisation unit</p></td>
        <td><p>All users registered to the selected organisation unit receive program notifications via the internal DHIS2 messaging system.</p></td>
        </tr>
        <tr class="even">
        <td><p>User group</p></td>
        <td><p>All members of the selected user group receive the program notifications via the internal DHIS2 messaging system</p></td>
        </tr>
        <tr class="odd">
        <td><p>Program</p></td>
        <td><p>TBA</p></td>
        </tr>
        </tbody>
        </table>

    3.  点击**保存**。 

4.  重复上述步骤，创建所需的所有程序通知。

5.  点击**保存**。 

> **注意**
>
> 您可以在 **数据管理** 应用程序中配置何时发送程序通知 \> **调度** \> **程序通知调度程序**。
>
> - 点击**立即运行**立即发送程序通知。
>
> - 选择一个时间并单击**开始**以安排在特定时间发送程序通知。

### 参考信息：程序通知参数 { #reference_information_event_program_notification_parameters }

<table>
<caption>Program notification parameters to use in program notifications</caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Notification type</p></th>
<th><p>Variable name</p></th>
<th><p>Variable code</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Program</p></td>
<td><p>Current date</p></td>
<td><pre><code>V{current_date}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Days since enrollment date</p></td>
<td><pre><code>V{days_since_enrollment_date}</code></pre></td>
</tr>
<tr class="odd">
<td></td>
<td><p>Enrollment date</p></td>
<td><pre><code>V{enrollment_date}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Incident date</p></td>
<td><pre><code>V{incident_date}</code></pre></td>
</tr>
<tr class="odd">
<td></td>
<td><p>Organisation unit name</p></td>
<td><pre><code>V{org_unit_name}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Program name</p></td>
<td><pre><code>V{program_name}</code></pre></td>
</tr>
<tr class="odd">
<td><p>Program stage</p></td>
<td><p>Current date</p></td>
<td><pre><code>V{current_date}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Days since due date</p></td>
<td><pre><code>V{days_since_due_date}</code></pre></td>
</tr>
<tr class="odd">
<td></td>
<td><p>Days until due date</p></td>
<td><pre><code>V{days_until_due_date}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Due date</p></td>
<td><pre><code>V{due_date}</code></pre></td>
</tr>
<tr class="odd">
<td></td>
<td><p>Organisation unit name</p></td>
<td><pre><code>V{org_unit_name}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Program name</p></td>
<td><pre><code>V{program_name}</code></pre></td>
</tr>
<tr class="odd">
<td></td>
<td><p>Program stage name</p></td>
<td><pre><code>V{program_stage_name}</code></pre></td>
</tr>
</tbody>
</table>

## 在维护应用程序中配置跟踪器程序 { #configure_tracker_program_in_Maintenance_app }

### 关于跟踪器程序 { #about-tracker-programs }

Single or multiple event programs _with_ registration are called Tracker programs. A program must be specified with only one tracked entity. Only tracked entities that are the same as the tracked entity of program can enroll into that program. A program needs several types of metadata that you create in the **Maintenance** apps.

### 工作流程：创建一个跟踪程序 { #workflow_tracker_program }

1.  输入跟踪器程序的详细信息。

2.  输入注册详细信息。

3.  分配属性并创建**部分**或**自定义**注册表格。

4.  创建程序阶段。

5.  配置访问权限，并分配给组织单位。

6.  创建程序和程序阶段通知。

### 创建或编辑Tracker程序 { #create-or-edit-a-tracker-program }

1. 打开 **Maintenance** 应用程序并单击 **Program** \> **Program**。

2. 单击添加按钮并在弹出菜单中选择**随访项目**。

#### 输入程序详细信息 { #tracker_enter_programs_details }

 <table>
     <colgroup>
         <col style="width: 50%" />
         <col style="width: 50%" />
     </colgroup>
     <thead>
         <tr class="header">
             <th> <p> 字段 </p> </th>
             <th> <p> 说明 </p> </th>
         </tr>
     </thead>
     <tbody>
         <tr class="odd">
             <td>
                 <p> <strong> 名称 </strong> </p>
             </td>
             <td> <p> 程序的名称。 </p> </td>
         </tr>
         <tr class="even">
             <td>
                 <p> <strong> 颜色 </strong> </p>
             </td>
             <td> <p> 在跟踪器捕获中用于此程序的颜色。 </p> </td>
         </tr>
         <tr class="odd">
             <td>
                 <p> <strong> 图标 </strong> </p>
             </td>
             <td> <p> 跟踪器捕获中用于此程序的图标 </p> </td>
         </tr>
         <tr class="even">
             <td>
                 <p> <strong> 简称 </strong> </p>
             </td>
             <td>
                 <p>
                    程序的简称。简称用作
                    分析应用程序中的默认图表或表格标题。
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p> <strong> 说明 </strong> </p>
             </td>
             <td> <p> 程序的详细说明。 </p> </td>
         </tr>
         <tr class="even">
             <td>
                 <p> <strong> 版本 </strong> </p>
             </td>
             <td>
                 <p>
                    程序的版本。例如，当
                    人们在 Android 实现中离线收集数据。
                    当他们上线并同步他们的元数据时，他们
                    应该得到最新版本的程序。
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p> <strong> 被跟踪实体类型 </strong> </p>
             </td>
             <td>
                 <p>
                    您要使用的跟踪实体类型。一个程序只能
                    有一种类型的被跟踪实体。
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <p> <strong> 类别组合 </strong> </p>
             </td>
             <td>
                 <p>
                    您要使用的类别组合。默认
                    设置为 <strong> 无 </strong> 。
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p> <strong> 显示首页列表 </strong> </p>
             </td>
             <td>
                 <p>
                    选择复选框以显示被跟踪实体的列表
                    Tracker Capture 中的实例。如果未选中，则搜索
                    将显示。
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <p> <strong> 第一阶段出现在注册页面 </strong> </p>
             </td>
             <td>
                 <p>
                    选中复选框以一起显示第一个程序阶段
                    与注册（注册）。
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p> <strong> 访问级别 </strong> </p>
             </td>
             <td> <p> 选择程序的访问级别。 </p> </td>
         </tr>
         <tr class="even">
             <td>
                 <p> <strong> 已完成的事件到期天数 </strong> </p>
             </td>
             <td>
                 <p>
                    定义可以编辑的天数
                    完成的事件。这意味着当一个事件完成时
                    并且指定的到期天数已过，则
                    事件被锁定。
                 </p>
                 <p>
                    如果您将 &quot;Completed events expiry days&quot; 设置为
                    10&quot;，一个事件在完成十天后被锁定
                    日期。在此日期之后，您将无法再编辑该事件。
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p> <strong> 到期期限类型 </strong> </p>
                 <p> <strong> 到期天数 </strong> </p>
             </td>
             <td>
                 <p>
                    到期日定义了到期后的天数
                    上一期间，可以编辑事件。期间类型
                    由有效期类型定义。这意味着当
                    自结束以来已过去指定的到期天数
                    上一期间的日期，该期间的事件是
                    锁定。
                 </p>
                 <p>
                    如果您将到期类型设置为 &quot;Monthly&quot; 并且
                    &quot;10&quot; 的到期日，月份是 10 月，然后
                    您无法在 10 月 10 日之后添加或编辑活动
                    十一月。
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <strong> 搜索所需的最小属性数 </strong>
             </td>
             <td>
                 <p>
                    指定需要跟踪的实体属性的数量
                    用于搜索 Tracked Entities 中的
                    程序。
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <strong> 要返回的最大跟踪实体实例数
                    搜索 </strong>
             </td>
             <td>
                 <p>
                    指定跟踪实体实例的最大数量
                    应该在搜索中返回。输入 0 表示无限制。
                 </p>
             </td>
         </tr>
     </tbody>
 </table>

#### 输入注册详细信息 { #enter_enrollment_details }

 <table>
     <colgroup>
         <col style="width: 50%" />
         <col style="width: 50%" />
     </colgroup>
     <thead>
         <tr class="header">
             <th> <p> 字段 </p> </th>
             <th> <p> 说明 </p> </th>
         </tr>
     </thead>
     <tbody>
         <tr class="odd">
             <td> <strong> 允许未来的注册日期 </strong> </td>
             <td>
                 <p>
                    如果要允许跟踪实体，请选中复选框
                    将在未来某个日期注册该计划的实例。
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td> <strong> 允许未来的事件日期 </strong> </td>
             <td>
                 <p>
                    如果您想允许事件日期在
                    该计划将在未来的某个日期进行。
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <strong> 仅注册一次（每个跟踪的实体实例生命周期） </strong>
             </td>
             <td>
                 <p>
                    如果您希望被跟踪的实体能够
                    只注册一次。此设置适用于
                    例如在儿童疫苗接种或尸检中
                    注册跟踪的程序没有意义
                    实体不止一次。
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td> <strong> 显示事件日期 </strong> </td>
             <td>
                 <p>
                    此设置允许您显示或隐藏事件日期
                    被跟踪实体注册该计划时的字段。
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td> <strong> 事件日期描述 </strong> </td>
             <td>
                 <p> 键入事件日期的描述 </p>
                 <p> 例如：</p>
                 <p> 在针对 1 岁以下儿童的免疫计划中，
                    事发日期是孩子的生日。 </p>
                 <p> 在产妇程序中，事件日期是最后一次的日期
                    月经期。 </p>
             </td>
         </tr>
         <tr class="even">
             <td> <strong> 键入注册日期的描述 </strong> </td>
             <td>
                 <p>
                    被跟踪实体注册的日期
                    程序
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td> <strong> 忽略过期事件 </strong> </td>
             <td>
                 <p>
                    当被跟踪实体注册到该计划时，事件
                    对应于程序阶段被创建。如果你
                    勾选此复选框，系统不会产生逾期
                    事件。
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td> <strong> 特征类型 </strong> </td>
             <td>
                 <p>
                    设置程序是否要捕获地理
                    特征类型与否。
                 </p>
                 <ul>
                 <li> <strong> 无：</strong> 未捕获任何内容。 </li>
                 <li> <strong> 多边形：</strong> 捕获一个区域。对于单身
                活动节目该地区将是代表该地区
                被捕获的事件。对于跟踪程序，该区域将
                代表招生区域。 </li>
                 <li> <strong> 点：</strong> ：捕获点/坐标。为了
                单个事件程序该点将代表
                被捕获的事件。对于跟踪程序，该点将
                代表招生。 </li>
                 </ul>
             </td>
         </tr>
         <tr class="odd">
             <td> <strong> 相关程序 </strong> </td>
             <td>
                 <p>
                    选择与您的程序相关的跟踪程序
                    例如，正在创建 ANC 和子程序。
                 </p>
             </td>
         </tr>
     </tbody>
 </table>

#### 分配跟踪的实体属性。 { #assign_tracked_entity_attributes }

1. In the list of **Available program tracked entity attributes**, double-click the attributes you want to assign to the program.

2. （可选）对于每个分配的属性，添加其他设置：
 <table>
         <colgroup>
             <col style="width: 50%" />
             <col style="width: 50%" />
         </colgroup>
         <thead>
             <tr class="header">
                 <th><p>Setting</p></th>
                 <th><p>Description</p></th>
             </tr>
         </thead>
         <tbody>
             <tr class="odd">
                 <td>
                     <p><strong>Display in list</strong></p>
                 </td>
                 <td>
                     <p>
                         Displays the value of this attribute in the list of tracked
                         entity instances in Tracker capture.
                     </p>
                 </td>
             </tr>
             <tr class="even">
                 <td>
                     <p><strong>Mandatory</strong></p>
                 </td>
                 <td>
                     <p>
                         The value of this attribute must be filled into data entry
                         form before you can complete the event.
                     </p>
                 </td>
             </tr>
             <tr class="odd">
                 <td>
                     <p><strong>Date in future</strong></p>
                 </td>
                 <td>
                     <p>
                         Will allow user to select a date in future for date
                         attributes.
                     </p>
                 </td>
             </tr>
             <tr class="even">
                 <td>
                     <p><strong>Mobile render type</strong></p>
                 </td>
                 <td>
                     <p>
                         Can be used to select different render types for mobile
                         devices. Available options vary depending on the attribute's
                         value type. For example, for a numerical value you may
                         select &quot;Default&quot;, &quot;Value&quot;,
                         &quot;Slider&quot;, &quot;Linear scale&quot;, and
                         &quot;Spinner&quot;.
                     </p>
                 </td>
             </tr>
             <tr class="odd">
                 <td>
                     <p><strong>Desktop render type</strong></p>
                 </td>
                 <td>
                     <p>WARNING: NOT IMPLEMENTED YET.</p>
                     <p>
                         Can be used to select different render types for desktop
                         (i.e. the web interface). Available options vary depending
                         on the attribute's value type. For example, for a numerical
                         value you may select &quot;Default&quot;, &quot;Value&quot;,
                         &quot;Slider&quot;, &quot;Linear scale&quot;, and
                         &quot;Spinner&quot;.
                     </p>
                 </td>
             </tr>
         </tbody>
 </table>

3. 创建注册表

   注册表单定义了如何在使用中的应用（例如Android和Tracker Capture）中向用户显示属性。

    1. 点击**创建注册表格**。

    2. 点击**部分**或**自定义**。

    3. 创建**部分**表格：

        1. 点击添加按钮，然后为台式机和移动设备输入版块的名称，说明和渲染类型。
        2. 单击该部分，使其以黑色边框突出显示。
        3. 通过单击要添加的数据元素名称旁边的加号来添加数据元素。
        4. 重复上述步骤，直到您拥有所需的所有部分。要更改部分顺序：单击选项菜单，然后将部分拖动到您想要的位置。

    4. 创建** Custom **注册表：使用WYSIWYG编辑器创建一个完全定制的表单。如果选择“源”，则可以将HTML代码直接粘贴到编辑区域中。您还可以插入图像，例如标志或徽标。

    5. 单击添加阶段。

#### 创建程序阶段 { #create_program_stages }

一个程序由程序阶段组成。程序阶段定义哪个
每个阶段都应采取行动。

> **注意**
>
>在保存程序之前，不会保存对程序阶段的更改。

1. 单击加号创建一个程序阶段。
2. Enter program stage details: 1. Enter a **Name**. 2. (Optional) select a **Color** and an **Icon** that will be used by the data capture apps to identify this program stage. 3. Enter a **Description**. 4. In the **Scheduled days from start** field, enter the minimum number of days to wait for starting the program stage.
3. 输入可重复的程序阶段详细信息。
    1. Specify if the program stage is **Repeatable** or not.
    2. Select a **Period type**.
    3. 如果您不想在数据输入表单中为可重复阶段的事件单击_完成_后显示_创建新事件框_为可重复阶段创建新事件，请清除**完成后显示生成事件框**。默认选择该字段。
    4. Enter **Standard interval days**. The number of days to repeat the repeatable program stage.
    5. (Optional) Select a **Default next scheduled date**. This will show a list of assigned data elements of type **date**. If an element is selected, the Tracker client will use this as the default starting date. The data element can be used by program rules to dynamically schedule intervals between events.
4. 输入表格详细信息

 <table>
     <colgroup>
         <col style="width: 50%" />
         <col style="width: 50%" />
     </colgroup>
     <thead>
         <tr class="header">
             <th><p>Option</p></th>
             <th><p>Action</p></th>
         </tr>
     </thead>
     <tbody>
         <tr class="odd">
             <td>
                 <p><strong>Auto-generate event</strong></p>
             </td>
             <td>
                 <p>
                     Clear check box to prevent creating an event of this program
                     stage automatically when a entity is enrolled in the program.
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <p><strong>Open data entry form after enrollment</strong></p>
             </td>
             <td>
                 <p>
                     Select check box to automatically open the event of this
                     stage as soon as the entity has enrolled into the program.
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p><strong>Report date to use</strong></p>
             </td>
             <td>
                 If you have selected the
                 <strong>Open data entry form after enrollment</strong> check
                 box, also select a <strong>Report date to use</strong>:
                 <strong>Date of incident</strong> or
                 <strong>Date of enrollment</strong>.
                 <p>
                     This is the date used as report date for an event that has
                     been opened automatically.
                 </p>
                 <p>
                     If the <strong>Report date to use</strong> is selected as
                     one of those two ('incident date'/'enrollment date'), in
                     Dashboard, the 'Report date' of the event will be set as one
                     of those two.
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <p><strong>User assignment of events</strong></p>
             </td>
             <td>
                 <p>
                     Select check box to enable user assignment of the program
                     stage.
                 </p>
                 <p>
                     This means that in Tracker capture there will be a list of
                     users to which the event can be assigned.
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p><strong>Block entry form after completed</strong></p>
             </td>
             <td>
                 <p>
                     Select check box to block the entry form after completion of
                     the event of this stage.
                 </p>
                 <p>
                     This means that the data in the entry form can't be changed
                     until you reset the status to incomplete.
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <p>
                     <strong>Ask user to complete program when stage is
                         completed</strong>
                 </p>
             </td>
             <td>
                 <p>
                     Select check box to trigger a pop-up which asks the user if
                     he/she wants to create the event of next stage.
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p>
                     <strong>Ask user to create new event when stage is
                         complete</strong>
                 </p>
             </td>
             <td>
                 <p>
                     Select check box to trigger a pop-up which asks the users if
                     he/she wants to create a new event of this stage when an
                     event of this stage is completed.
                 </p>
                 <p>
                     This property is active only if you have selected
                     <strong>Repeatable</strong>.
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <p><strong>Generate events by enrollment date</strong></p>
             </td>
             <td>
                 <p>
                     Check on it for auto-generating due dates of events from
                     program-stages of this program based on the enrollment date.
                     If it is not checked, the due dates are generated based on
                     incident date.
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p><strong>Hide due dates</strong></p>
             </td>
             <td><p>Select checkbox to hide due dates for events.</p></td>
         </tr>
         <tr class="even">
             <td><strong>Feature type</strong></td>
             <td>
                 <p>
                     Sets wether the program is going to capture a geographical
                     feature type or not.
                 </p>
                 <ul>
                 <li><strong>None:</strong>Nothing is captured.</li>
                 <li>
                     <strong>Polygon: </strong> An area is captured. For single
                     event programs the area will be the area representing the
                     event being captured. For tracker programs, the area will
                     represent the area of the enrollment.
                 </li>
                 <li>
                     <strong>Point:</strong>: A point/coordinate is captured. For
                     single event programs the point will be representing the
                     event being captured. For tracker programs, the point will
                     represent the enrollment.
                 </li>
                 </ul>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p><strong>Pre-generate event UID</strong></p>
             </td>
             <td>
                 <p>Select check box to pre-generate unique event id numbers.</p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <p><strong>Description of report date</strong></p>
             </td>
             <td>
                 <p>Type a description of the report date.</p>
                 <p>This description is displayed in the data entry form.</p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p><strong>Description of due date</strong></p>
             </td>
             <td><p>Type a description of the due date.</p></td>
         </tr>
     </tbody>
 </table>

5. 将数据元素分配给程序阶段：

    1. In the list of **Available data elements**, double-click the data elements you want to assign to the program stage.

    2. 对于每个分配的数据元素，查看属性。您可以选择：

 <table>
     <colgroup>
         <col style="width: 50%" />
         <col style="width: 50%" />
     </colgroup>
     <thead>
         <tr class="header">
             <th> <p>选项</p> </th>
             <th> <p>操作</p> </th>
         </tr>
     </thead>
     <tbody>
         <tr class="odd">
             <td>
                 <p> <strong>必选</strong> </p>
             </td>
             <td>
                 <p>
                    此数据元素的值必须填写到数据中
                    完成活动前的报名表。
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <p> <strong>允许在其他地方提供</strong> </p>
             </td>
             <td>
                 <p>
                    指定此数据元素的值是否来自其他
                    设备，而不是在输入此数据的设备中。
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p> <strong>在报告中显示</strong> </p>
             </td>
             <td>
                 <p>
                    在单个事件中显示此数据元素的值
                    没有注册数据输入功能。
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <p> <strong>将来的日期</strong> </p>
             </td>
             <td>
                 <p>允许为日期数据元素选择将来的日期。 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p> <strong>跳过同步</strong> </p>
             </td>
             <td>
                 <p>
                    运行数据时允许跳过数据元素
                    同步作业。
                 </p>
             </td>
         </tr>
         <tr class="even">
             <td>
                 <p> <strong>移动渲染类型</strong> </p>
             </td>
             <td>
                 <p>
                    可以用来为手机选择不同的渲染类型
                    设备。可用选项取决于属性的
                    值类型。例如，对于数字值，您可以
                    选择&quot;Default&quot;，&quot;Value&quot;，
                    &quot;Slider&quot;，&quot;线性比例&quot;和
                    &quot;Spinner&quot;。
                 </p>
             </td>
         </tr>
         <tr class="odd">
             <td>
                 <p> <strong>桌面渲染类型</strong> </p>
             </td>
             <td>
                 <p>警告：尚未实施。 </p>
                 <p>
                    可用于为桌面选择不同的渲染类型
                    （即网络界面）。可用选项因情况而异
                    在属性的值类型上。例如，对于数字
                    您可以选择&quot;Default&quot;，&quot;Value&quot;，
                    &quot;Slider&quot;，&quot;线性比例&quot;和
                    &quot;Spinner&quot;。
                 </p>
             </td>
         </tr>
     </tbody>
 </table>

6. 创建程序阶段的数据输入表单

    数据输入表单决定了数据元素将如何在 **Tracker Capture** 应用程序中显示给用户。

    1. 点击**创建数据输入表单**。

    2. 点击**基本**，**部分**或**自定义**。

    3. To create a **Basic** data entry form: Drag and drop the data elements in the order you want.

    4. 要创建**部分**数据输入表单，请执行以下操作：

        1. 单击添加按钮并为桌面和移动设备输入部分的名称、描述和渲染类型。

        2. 单击该部分，使其以黑色边框突出显示。

        3. 通过单击数据元素名称旁边的加号来添加数据元素。

        4. 重复上述步骤，直到获得所需的所有部分。

        5. 更改部分顺序：单击选项菜单，然后将部分拖动到您想要的位置。

    5. 从以下位置创建**自定义**数据条目：使用所见即所得编辑器创建完全自定义的表单。如果选择**Source**，则可以直接在编辑区粘贴HTML代码。您还可以插入图像，例如标志或徽标。

    6. 单击添加阶段。

#### 访问 { #tracker_program_access }

Access options decide who can capture data for the program or view/edit the program's metadata. A program can be shared to organisation units, and in addition, the main program and any program stages' access options can be configured through the **Sharing dialog**. Access options are available in the **Access** tab.

分配组织单位：

1.  在组织树中，双击要添加到程序的组织单位。

    您可以通过展开分支（单击箭头符号）或通过名称搜索来在树中定位组织单位。选定的组织单位显示为橙色。

更改角色和访问权限：

1.  向下滚动到**角色和访问权限**部分。

    第一行显示主程序的访问选项，随后的每一行显示一个程序阶段的选项。带有警告图标（感叹号）的程序阶段包含与主程序不同的访问选项，这意味着它们由不同的用户组合访问。

2.  单击任一行，将显示**共享对话框**。

3.  相应地修改访问选项。有关详细信息，请参阅共享对话框的文档。

4.  点击**应用**按钮。

5.  对每个程序/程序阶段重复该过程。您还可以将所有访问选项从主程序复制到您的子程序：

    1.  Select the program stages you want to have similar access options as the main program by toggling the checkboxes on the right hand side of the program stages. You can also choose to **Select all** program stages, **Deselect all** program stages or **Select similar** stages, in terms of access options, to that of the main program. Similar stages are toggled by default.

    2.  点击**应用于选定阶段**

#### 创建程序通知 { #create_tracker_program_notifications }

您可以通过注册和创建程序的程序通知
他们的计划阶段。通知通过内部发送
DHIS2邮件系统，通过电子邮件或文本消息（SMS）。您可以
使用程序通知，例如，将自动提醒发送给
预定约会前10天跟踪的实体。您使用
程序的跟踪实体属性（例如名字）和程序
参数（例如注册日期）以创建通知
模板。

1.  Open the **Maintenance** app and click **Program and then notifications**.

    所选程序的现有程序通知列表将打开。如果程序没有任何程序通知，则列表为空。

2.  Click on add button and select **Program notification**.
![](resources/images/program/what_to_send.png)

    ![](resources/images/program/where_to_send.png) ![](resources/images/program/who_to_send.png)

3.  输入一个**名称**。

4.  创建**主题模板**。

    Double-click the parameters in the **Parameters** field to add them to your subject.

    > **Note**
    >
    > The subject is not included in text messages.

5.  创建**消息模板**。

    Double-click the parameter names in the **Parameters** field to add them to your message.

    亲爱的 A{w75KJ2mc4zz}，您现在已注册 V{program_name}。

6.  In the **When-to-send it** field, select what should trigger the notification.

    <table>
    <colgroup>
    <col style="width: 33%" />
    <col style="width: 33%" />
    <col style="width: 33%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Trigger</p></th>
    <th><p>Description</p></th>
    <th><p>Note</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Program enrollment</p></td>
    <td><p>The program notification is sent when the TEI enrols in the program.</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>Program completion</p></td>
    <td><p>The program notification is sent when the program of TEI is completed</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="odd">
    <td><p>Days scheduled (incident date)</p></td>
    <td><p>The program notification is sent XX number of days before or after the incident date</p></td>
    <td><p>You need to enter the number of days before or after the scheduled date that the notification will be send.</p></td>
    </tr>
    <tr class="even">
    <td><p>Days scheduled (enrollment date)</p></td>
    <td><p>The program notification is sent XX number of days before or after the enrollment date</p></td>
    <td><p>You need to enter the number of days before or after the scheduled date that the notification will be send.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Program Rule</p></td>
    <td><p>Notification will be triggered as a result of program rule exeuction.</p></td>
    <td><p>Program rule with ProgramRuleActionType.SENDMESSAGE need to be in place to make this trigger successful.</p></td>
    </tr>
    </tbody>
    </table>

7.  在 **Who-to-send-it** 字段中，选择应接收计划通知的人员。

    <table>
    <colgroup>
    <col style="width: 33%" />
    <col style="width: 33%" />
    <col style="width: 33%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Recipient type</p></th>
    <th><p>Description</p></th>
    <th><p>Note</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Tracked entity instance</p></td>
    <td><p>Receives program notifications via e-mail or text message.</p></td>
    <td><p>To receive a program notification, the recipient must have an e-mail address or a phone number attribute.</p></td>
    </tr>
    <tr class="even">
    <td><p>Organisation unit contact</p></td>
    <td><p>Receives program notifications via e-mail or text message.</p></td>
    <td><p>To receive a program notification, the receiving organisation unit must have a registered contact person with e-mail address and phone number.</p></td>
    </tr>
    <tr class="odd">
    <td>Users at organisation unit:</td>
    <td><p>All users registered to the selected organisation unit receive program notifications via the internal DHIS2 messaging system.</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>User group</p></td>
    <td><p>All members of the selected user group receive the program notifications via the internal DHIS2 messaging system</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="odd">
    <td><p>Limit To Hierarchy</p></td>
    <td><p>Send notification only to those users who belong to any of the organisation unit in the hierarchy.</p></td>
    <td><p>This option is only available when User Group is selected as recipient.</p></td>
    </tr>
    <tr class="even">
    <td><p>Parent OrgUnit Only</p></td>
    <td><p>Send notification only to those users who belong to parent organisation unit.</p></td>
    <td><p>This option is only available when User Group is selected as recipient.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Program Attribute</p></td>
    <td><p>TrackedEntityAttribute can also be selected as recipient.</p></td>
    <td><p>This parameter will only be effective if TrackedEntityAttribute value type is PHONE_NUMBER/EMAIL.</p></td>
    </tr>
    </tbody>
    </table>

8.  点击**保存**。 

### 创建程序阶段通知 { #create-a-program-stage-notification }

![](resources/images/program/what_to_send-psnt.png)

![](resources/images/program/what_to_send-psnt.png)

![](resources/images/program/what_to_send-psnt.png)

1.  Open the **Maintenance** app and click **Program and then notifications**.

    将打开所选程序阶段的现有程序阶段通知列表。如果程序阶段没有任何程序阶段通知，则列表为空。

2.  点击添加按钮，然后选择**程序阶段通知**。

3.  点击**添加新**。

4.  输入一个**名称**。

5.  创建**主题模板**。

    Double-click the parameter names in the **Parameters** field to add them to your subject.

    > **Note**
    >
    > The subject is not included in text messages.

6.  创建**消息模板**。

    Double-click the parameter names in the **Parameters** field to add them to your message.

    亲爱的 A{w75KJ2mc4zz}，请来预约 V{due_date}。

7.  In the **When-to-send-it** field, select what should trigger the notification.

    <table>
    <colgroup>
    <col style="width: 33%" />
    <col style="width: 33%" />
    <col style="width: 33%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Trigger</p></th>
    <th><p>Description</p></th>
    <th><p>Note</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Program stage completion</p></td>
    <td><p>The program stage notification is sent when the program stage is completed</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>Days scheduled (due date)</p></td>
    <td><p>The program stage notification is sent XX number of days before or after the due date</p></td>
    <td><p>You need to enter the number of days before or after the scheduled date that the notification will be send.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Program Rule</p></td>
    <td><p>Notification will be triggered as a result of program rule execution.</p></td>
    <td><p>Program rule with ProgramRuleActionType.SENDMESSAGE need to be in place to make this trigger successful.</p></td>
    </tr>
    </tbody>
    </table>

8.  In the **Recipients** field, select who should receive the program stage notification. You can select:

    <table>
    <colgroup>
    <col style="width: 33%" />
    <col style="width: 33%" />
    <col style="width: 33%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Recipient type</p></th>
    <th><p>Description</p></th>
    <th><p>Note</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Tracked entity instance</p></td>
    <td><p>Receives program notifications via e-mail or text message.</p></td>
    <td><p>To receive a program stage notification, the recipient must have an e-mail address or a phone number attribute.</p></td>
    </tr>
    <tr class="even">
    <td><p>Organisation unit contact</p></td>
    <td><p>Receives program notifications via e-mail or text message.</p></td>
    <td><p>To receive a program stage notification, the receiving organisation unit must have a registered contact person with e-mail address and phone number.</p>
    <p>The system selects the same organisation unit as where the event took place.</p></td>
    </tr>
    <tr class="odd">
    <td>Users at organisation unit:</td>
    <td><p>All users registered to the selected organisation unit receive program notifications via the internal DHIS2 messaging system.</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>User group</p></td>
    <td><p>All members of the selected user group receive the program notifications via the internal DHIS2 messaging system</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="odd">
    <td><p>Limit To Hierarchy</p></td>
    <td><p>Send notification only to those users who belong to any of the organisation unit in the hierarchy.</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>Parent OrgUnit Only</p></td>
    <td><p>Send notification only to those users who belong to parent organisation unit.</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="odd">
    <td><p>Data Element</p></td>
    <td><p>Data Element associated with ProgramStage can be selected as recipient.</p></td>
    <td><p>Data Element will only be effective if DataElement has value type PHONE_NUMBER/EMAIL.</p></td>
    </tr>
    </tbody>
    </table>

9.  点击**保存**。 

### 参考信息：程序通知参数 { #reference_information_event_program_notification_parameters }

<table>
<caption>Program notification parameters to use in program notifications</caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Notification type</p></th>
<th><p>Variable name</p></th>
<th><p>Variable code</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Program</p></td>
<td><p>Current date</p></td>
<td><pre><code>V{current_date}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Days since enrollment date</p></td>
<td><pre><code>V{days_since_enrollment_date}</code></pre></td>
</tr>
<tr class="odd">
<td></td>
<td><p>Enrollment date</p></td>
<td><pre><code>V{enrollment_date}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Incident date</p></td>
<td><pre><code>V{incident_date}</code></pre></td>
</tr>
<tr class="odd">
<td></td>
<td><p>Organisation unit name</p></td>
<td><pre><code>V{org_unit_name}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Program name</p></td>
<td><pre><code>V{program_name}</code></pre></td>
</tr>
<tr class="odd">
<td><p>Program stage</p></td>
<td><p>Current date</p></td>
<td><pre><code>V{current_date}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Days since due date</p></td>
<td><pre><code>V{days_since_due_date}</code></pre></td>
</tr>
<tr class="odd">
<td></td>
<td><p>Days until due date</p></td>
<td><pre><code>V{days_until_due_date}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Due date</p></td>
<td><pre><code>V{due_date}</code></pre></td>
</tr>
<tr class="odd">
<td></td>
<td><p>Organisation unit name</p></td>
<td><pre><code>V{org_unit_name}</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><p>Program name</p></td>
<td><pre><code>V{program_name}</code></pre></td>
</tr>
<tr class="odd">
<td></td>
<td><p>Program stage name</p></td>
<td><pre><code>V{program_stage_name}</code></pre></td>
</tr>
</tbody>
</table>

## 配置程序指示器 { #configure_program_indicator }

### 关于计划指标 { #about_program_indicators }

程序指示符是基于数据元素和属性的表达式
跟踪实体的数量，可用于基于
式。计划指标包括汇总类型，分析
类型，表达式和过滤器。

根据分配的汇总类型评估计划指标，
表达式和过滤器。评估顺序为：

1.  _filter_ 将过滤成为评估/聚合例程一部分的事件。

2.  _expression_ 将根据事件进行评估。

3.  根据程序指标的聚合类型，所有评估的表达式值将是_聚合_。

<table>
<caption>Program indicator components</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Program rule component</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Aggregation type</p></td>
<td><p>The aggregation type determines how the program indicator will be aggregated. The following aggregation types are available:</p>
<ul>
<li><p>Average</p></li>
<li><p>Average (number)</p></li>
<li><p>Average (number, disaggregation)</p></li>
<li><p>Average (sum in organisation unit hierarchy)</p></li>
<li><p>Average (sum of numbers)</p></li>
<li><p>Average (sum of numbers, disaggregation)</p></li>
<li><p>Average (Yes/No)</p></li>
<li><p>Count</p></li>
<li><p>Custom</p>
<p>The &quot;custom&quot; aggregation type allows you to specify the aggregation type in-line in the expression. All other aggregation  types are applied to the entire expression.</p>
<p>Using the &quot;custom&quot; aggregation type might lead to an exception of the order of evaluation described above where individual parts of the expression can be evaluated and aggregated, as opposed to the entire expression being evaluated prior to aggregation.</p></li>
<li><p>Default</p></li>
<li><p>Max</p></li>
<li><p>Min</p></li>
<li><p>None</p></li>
<li><p>Standard deviation</p></li>
<li><p>Sum</p></li>
<li><p>Variance</p></li>
</ul></td>
</tr>
<tr class="even">
<td><p>Analytics type</p></td>
<td><p>The available analytics types are <em>event</em> and <em>enrollment</em>.</p>
<p>The analytics type defines whether the program indicator is calculated based on events or program enrollments. This has an impact on what type of calculations can be made.</p>
<ul>
<li><p>Events implies a data source where each event exists as an independent row. This is suitable for performing aggregations such as counts and sums.</p></li>
<li><p>Enrollments implies a data source where all events for a single enrollment is combined on the same row. This allows for calculations which can compare event data from various program stages within a program enrollment.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td><p>Analytics period boundaries</p></td>
<td><p>Defines the boundaries for the program indicator calculation. The boundaries determine which events or enrollments gets included in aggregations, always relative to the aggregate reporting period start and end. When creating the program indicator, the default boundaries will get preselected based on analytics type.</p>
<ul>
<li><p>For analytics type <em>event</em>, the default boundaries will be configured to encapsulate any events with an event date after the reporting period starts and before the reporting period ends.</p></li>
<li><p>For analytics type <em>enrollment</em>, the default boundaries will encapsulate all enrollments with an enrollment date after the reporting date starts and before the reporting period ends. In addition, the default enrollment program indicator evaluates the newest event for all program stages regardless of date.</p></li>
</ul>
<p>It is possible to change the upper and lower boundaries to include a longer or shorter period relative to the reporting period, or delete one of the boundaries - in effect returning all data before or after a certain period. It is also possible to add more constraints, for example to make an enrollment program indicator only include event data up to a given point in time.</p>
<ul>
<li><p>Boundary target: Can be <em>incident date</em>, <em>event date</em>, <em>enrollment date</em> or <em>custom</em>. Designates what is being constrained by the boundary.</p>
<p><em>custom</em> is used make boundary that target either a date data element, tracked entity attribute or the presence of an event in a program stage. This is done with a custom expression on the form:</p>
<ul>
<li><p>Data element of type date: #{programStageUid.dataElementUid}.</p>
<pre><code>#{A03MvHHogjR.a3kGcGDCuk6}</code></pre></li>
<li><p>Tracked entity attribute of type date: #{attributeUid}.</p>
<pre><code>A{GPkGfbmArby}</code></pre></li>
<li><p>Presence of one event in a specific program stage: PS_EVENTDATE:programStageUid.</p>
<pre><code>PS_EVENTDATE:A03MvHHogjR</code></pre>
<blockquote>
<p><strong>Note</strong></p>
This boundary target is only applicable to
Analytics type Enrollment
</blockquote></li>
</ul></li>
<li><p>Analytics period boundary type: Defines whether the boundary is an end boundary - starting with &quot;before...&quot;, or a start boundary - &quot;after...&quot;. Also defines whether the boundary relates to the end of the aggregate reporting period or the start of the aggregate reporting period.</p></li>
<li><p>Offset period by amount: In some cases, for example cohort analytics, the boundary should be offset relative to the aggregate reporting period when running pivots and reports. The offset period by amount is used to move the current boundary either back(negative) or forward(positive) in time. The amount and period type together will determine how big the offset will be. An example can be when making a simple enrollment cohort program indicator for a 1 year cohort, it might be enough to offset each boundary of the program indicator with &quot;-1&quot; and &quot;Years&quot;</p></li>
<li><p>Period type: See above. Can be any period, e.g. <em>Weekly</em> or <em>Quarterly</em>.</p></li>
</ul></td>
</tr>
<tr class="even">
<td><p>Expression</p></td>
<td><p>The expression defines how the indicator is being calculated. The expression can contain references to various entities which will be substituted with a related values when the indicator is calculated:</p>
<ul>
<li><p>Data elements: Will be substituted with the value of the data element for the time period and organisation unit for which the calculation is done. Refers to both program stage and data element.</p></li>
<li><p>Attributes: Will be substituted with the value of the attribute for the person / tracked entity for which the calculation is done.</p></li>
<li><p>Variables: Will be substituted with special values linked to the program, including incident date and date of enrollment for the person, current date and count of values in the expression for the time period and organisation unit for which the calculation is done.</p></li>
<li><p>Constants: Will be substituted with the value of the constant.</p></li>
</ul>
<p>The expression is a mathematical expression and can also contain operators.</p>
<p>For single event programs and tracker programs with analytics type <em>event</em>, the expression will be evaluated <em>per event</em>, then aggregated according to its aggregation type.</p>
<p>For tracker programs with analytics type <em>enrollment</em>, the expression will be evaluated <em>per enrollment</em>, then aggregated according to its aggregation type.</p></td>
</tr>
<tr class="odd">
<td><p>Filter</p></td>
<td><p>The filter is applied to events and filters the data source used for the calculation of the indicator. I.e. the filter is applied to the set of events before the indicator expression is being evaluated. The filter must evaluate to either true or false. It filter is applied to each individual event. If the filter evaluates to true then the event is included later in the expression evaluation, if not it is ignored. The filter can, in a similar way as expressions, contain references to data elements, attributes and constants.</p>
<p>The program indicator filter can in addition use logical operators. These operators can be used to form logical expressions which ultimately evaluate to either true or false. For example you can assert that multiple data elements must be a specific value, or that specific attributes must have numerical values less or greater than a constant.</p></td>
</tr>
</tbody>
</table>

In the **Maintenance** app, you manage the following program indicator objects:

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Program indicator</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Program indicator group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 创建或编辑程序指示器 { #create_program_indicator }

> **注意**
>
>程序指示器完全属于一个程序。

1.  打开 **Maintenance** 应用程序并单击 **Indicator** \> **Program indicator**。

2.  点击添加按钮。

3.  Select a **Program** and enter:

    -   **名称**

    -   **简称**

    -   **码**

    -   **颜色**

    -   **图标**

    -   **描述**

4.  Select number of **Decimals in data output**.

5.  Select an **Aggregation type**.

6.  如果要**以表格显示**，请选择一个。

7.  Assign one or multiple **Legend**s.

8.  （可选）输入一个**用于汇总数据导出的类别选项组合**。

9.  (Optional) Enter an **Attribute option combination for aggregate data export**.

10. 创建表达式。

    1.  点击**编辑表达式**。

    2.  根据数学运算符以及右侧列出的属性、变量和常量创建表达式。

11. 创建过滤器。

    1.  点击**编辑过滤器**。

    2.  根据数学运算符以及右侧列出的属性、变量和常量创建表达式。

12. 点击**保存**。 

### 创建或编辑程序指示器组 { #create_program_indicator_group }

1.  打开 **Maintenance** 应用程序并单击 **Indicator** \> **Program indicator group**。

2.  点击添加按钮。

3.  Enter **Name** and **Code**.

4.  在可用程序指示器列表中，双击要分配给您的组的程序指示器。

5.  点击**保存**。 

### 参考信息：每种值类型的表达式和过滤器示例 { #reference_information_program_indicator }

下表显示了如何编写表达式和过滤器的示例
对于不同的数据元素和属性值类型：

<table>
<caption>Expression and filter examples per value type</caption>
<thead>
<tr class="header">
<th>Value types</th>
<th>Example syntax</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Integer</p>
<p>Negative integer</p>
<p>Positive or zero integer</p>
<p>Positive integer</p>
<p>Number</p>
<p>Percentage</p></td>
<td><p>Numeric fields, can be used for aggregation as an expression, or in filters:</p>
<pre><code>#{mCXR7u4kNBW.K0A4BauXJDl} &gt;= 3</code></pre></td>
</tr>
<tr class="even">
<td><p>Yes/No</p>
<p>Yes only</p></td>
<td><p>Boolean fields. Yes is translated to numeric 1, No to numeric 0. Can be used for aggregation as an expression, or in filters:</p>
<pre><code>#{mCXR7u4kNBW.Popa3BauXJss} == 1</code></pre></td>
</tr>
<tr class="odd">
<td><p>Text</p>
<p>Long text</p>
<p>Phone number</p>
<p>Email</p></td>
<td><p>Text fields. Can be checked for equality in filters:</p>
<pre><code>#{mCXR7u4kNBW.L8K4BauIKsl} == &#39;LiteralValue&#39;</code></pre></td>
</tr>
<tr class="even">
<td><p>Date</p>
<p>Age</p></td>
<td><p>Date fields. Most useful when combined with a d2:daysBetween function, which produces a number that can be aggregated as an expression or used in filters:</p>
<pre><code>d2:daysBetween(#{mCXR7u4kNBW.JKJKBausssl},V{enrollment_date}) &gt; 100</code></pre>
<p>Can also directly be checked for equality in filters:</p>
<pre><code>#{mCXR7u4kNBW.JKJKBausssl} == &#39;2011-10-28&#39;</code></pre></td>
</tr>
</tbody>
</table>

### 参考信息：在程序指示器表达式和过滤器中使用的函数，变量和运算符 { #program_indicator_functions_variables_operators }

包含属性，数据元素和常量的表达式
看起来像这样：

    （A {GPkGfbmArby} +＃{mCXR7u4kNBW.NFkjsNiQ9PH}）* C {bCqvfPR02Im}

使用自定义聚合类型的表达式，因此可以使用
内联聚合类型看起来像
    这个：

    （sum（＃{mCXR7u4kNBW.K0A4BauXJDl} *＃{mCXR7u4kNBW.NFkjsNiQ9PH}）/ sum（＃{mCXR7u4kNBW.NFkjsNiQ9PH}）））* 100

注意在表达式内部如何使用“ sum”聚合运算符
本身。

#### 程序指示符表达式或过滤器中使用的函数 { #functions-to-use-in-a-program-indicator-expression-or-filter }

程序指示符表达式和过滤器支持以下范围
职能。这些函数可以应用于数据元素和属性：

 <table>
 <caption> 在程序指示符表达式或过滤器中使用的函数 </caption>
 <colgroup>
 <col style="width: 15%" />
 <col style="width: 30%" />
 <col style="width: 54%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p> 功能 </p> </th>
 <th> <p> 参数 </p> </th>
 <th> <p> 说明 </p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p> d2:hasValue </p> </td>
 <td> <p>（对象） </p> </td>
 <td> <p> 如果数据元素/属性有值，则返回 true。可用于过滤器以区分数字 0 和无值，并区分显式 &quot;No&quot; 和是/否字段的无选择。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> d2：</p> </td> 之间的分钟数
 <td> <p>（日期时间，日期时间） </p> </td>
 <td> <p> 生成 &quot;date 和 time&quot; 类型的两个数据元素/属性之间的分钟数。当第一个参数 datetime 出现在第二个参数 datetime 之前时，该数字将为正数 - 在相反的情况下，该数字将为负数。静态日期时间格式为“yyyy-MM-dd hh:mm”。任何参数都可以替换为 PS_EVENTDATE:(programStageUid) 以比较给定程序阶段的最新事件日期。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> d2:daysBetween </p> </td>
 <td> <p>（日期，日期） </p> </td>
 <td> <p> 产生两个日期类型的数据元素/属性之间的天数。当第一个参数日期在第二个参数日期之前，该数字将为正数 - 在相反的情况下，该数字将为负数。静态日期格式为“yyyy-MM-dd”。任何参数都可以替换为 PS_EVENTDATE:(programStageUid) 以比较给定程序阶段的最新事件日期。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> d2:weeksBetween </p> </td>
 <td> <p>（日期，日期） </p> </td>
 <td> <p> 产生两个日期类型的数据元素/属性之间的完整周数。当第一个参数日期在第二个参数日期之前，该数字将为正数 - 在相反的情况下，该数字将为负数。静态日期格式为“yyyy-MM-dd”。任何参数都可以替换为 PS_EVENTDATE:(programStageUid) 以比较给定程序阶段的最新事件日期。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> d2:monthsBetween </p> </td>
 <td> <p>（日期，日期） </p> </td>
 <td> <p> 产生两个日期类型的数据元素/属性之间的完整月数。当第一个参数日期在第二个参数日期之前，该数字将为正数 - 在相反的情况下，该数字将为负数。静态日期格式为“yyyy-MM-dd”。任何参数都可以替换为 PS_EVENTDATE:(programStageUid) 以比较给定程序阶段的最新事件日期。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> d2:yearsBetween </p> </td>
 <td> <p>（日期，日期） </p> </td>
 <td> <p> 产生两个日期类型的数据元素/属性之间的完整年数。当第一个参数日期在第二个参数日期之前，该数字将为正数 - 在相反的情况下，该数字将为负数。静态日期格式为“yyyy-MM-dd”。任何参数都可以替换为 PS_EVENTDATE:(programStageUid) 以比较给定程序阶段的最新事件日期。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> d2：条件 </p> </td>
 <td> <p> (boolean-expr, true-expr, false-expr) </p> </td>
 <td> <p> 计算布尔表达式，如果为真则返回真表达式值，如果为假则返回假表达式值。条件表达式必须加引号。 true-expr 和 false-expr 参数必须遵循任何程序指示符表达式（包括函数）的规则。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> d2:zing </p> </td>
 <td> <p> (表达式) </p> </td>
 <td> <p> 如果表达式为负，则返回零，否则返回表达式值。该表达式必须遵循任何程序指示符表达式（包括函数）的规则。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> d2:oizp </p> </td>
 <td> <p> (表达式) </p> </td>
 <td> <p> 如果表达式为零或正数，则返回 1，否则返回 0。该表达式必须遵循任何程序指示符表达式（包括函数）的规则。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> d2:zpvc </p> </td>
 <td> <p> (object, [,object ...]) </p> </td>
 <td> <p> 返回给定对象参数中数字零和正值的数量。可以提供任意数量的参数。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> d2:relationshipCount </p> </td>
 <td> <p> ([relationshipTypeUid]) </p> </td>
 <td> <p> 生成与注册或事件相关的给定类型的关系数。如果没有给出类型，则计算所有类型。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> d2：计数 </p> </td>
 <td> <p> (dataElement) </p> </td>
 <td> <p> 仅对注册计划指标有用。计算在注册过程中为给定程序阶段和数据元素收集的数据值的数量。参数数据元素由 #{programStage.dataElement} 语法提供。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> d2:countIfValue </p> </td>
 <td> <p>（数据元素，值） </p> </td>
 <td> <p> 仅对注册计划指标有用。计算注册过程中与给定程序阶段和数据元素的给定文字值匹配的数据值的数量。参数数据元素由 #{programStage.dataElement} 语法提供。如果只计算包含此文本的值，则该值可以是硬编码文本或数字，例如“No_anemia”。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> d2:countIfCondition </p> </td>
 <td> <p>（数据元素，条件）</p> </td>
 <td> <p> 仅对注册计划指标有用。计算注册过程中与给定程序阶段和数据元素的给定条件标准匹配的数据值的数量。参数数据元素由 #{programStage.dataElement} 语法提供。如果只计算小于 10 的值，则条件以单引号中的表达式形式提供，例如 '&lt;10'。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> 如果 </p> </td>
 <td> <p> (boolean-expr, true-expr, false-expr) </p> </td>
 <td> <p> 计算布尔表达式，如果为真则返回真表达式值，如果为假则返回假表达式值。这与 d2:condition 函数相同，只是没有引用 boolean-expr。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> 为空 </p> </td>
 <td> <p>（对象） </p> </td>
 <td> <p> 如果缺少对象值（null），则返回 true，否则返回 false。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> isNotNull </p> </td>
 <td> <p>（对象） </p> </td>
 <td> <p> 如果对象值不丢失（非空），则返回 true，否则返回 false。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> firstNonNull </p> </td>
 <td> <p> (对象 [, 对象 ...]) </p> </td>
 <td> <p> 返回第一个不丢失的对象的值（非空）。可以提供任意数量的参数。任何参数也可以是数字或字符串文字，如果所有先前的对象都缺少值，则将返回该参数。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> 最大 </p> </td>
 <td> <p> (表达式 [, 表达式 ...]) </p> </td>
 <td> <p> 返回给定表达式的最大（最高）值。可以提供任意数量的参数。每个表达式必须遵循任何程序指示符表达式（包括函数）的规则。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> 至少 </p> </td>
 <td> <p> (表达式 [, 表达式 ...]) </p> </td>
 <td> <p> 返回给定表达式的最小（最低）值。可以提供任意数量的参数。每个表达式必须遵循任何程序指示符表达式（包括函数）的规则。 </p> </td>
 </tr>
 </tbody>
 </table>

使用“ hasValue”函数的过滤器如下所示：

    d2：hasValue（＃{mCXR7u4kNBW.NFkjsNiQ9PH}）

使用“ relationshipCount（relationshipTypeUid）”函数的过滤器如下所示：

    d2：relationshipCount（'KLkjshoQ90U'）

使用“ zing”和“ oizp”函数的表达式如下所示：

    d2：zing（A {GPkGfbmArby}）+ d2：oizp（＃{mCXR7u4kNBW.NFkjsNiQ9PH}））

使用“ daysBetween”函数的表达式如下所示：

    d2：daysBetween（＃{mCXR7u4kNBW.k8ja2Aif1Ae}，'2015-06-01'）

使用“ yearBetween”函数将程序阶段“ mCXR7u4kNBW”的最新事件与注册日期进行比较的表达式如下所示：

    d2：daysBetween（V {enrollment_date}，PS_EVENTDATE：mCXR7u4kNBW）

使用“条件”函数的表达式如下所示：

    d2：condition（'＃{mCXR7u4kNBW.NFkjsNiQ9PH}> 100'，150,50）

使用“ countIfValue”函数的表达式仅计算收集值10的次数，如下所示：

    d2：countIfValue（＃{mCXR7u4kNBW.NFkjsNiQ9PH}），10）

使用“ zpvc”函数的表达式如下所示：

    d2：zpvc（A {GPkGfbmArby}），＃{mCXR7u4kNBW.NFkjsNiQ9PH}），4，-1）

使用“ if”和“ isnull”函数的表达式如下所示：

    if（isNull（A {GPkGfbmArby}），10,20）

使用“ firstNonNull”函数的表达式如下所示：

    firstNonNull（A {GPkGfbmArby}），＃{mCXR7u4kNBW.NFkjsNiQ9PH}，44）

使用“最大”函数的表达式如下所示：

    最好的（＃{mCXR7u4kNBW.k8ja2Aif1Ae}，＃{mCXR7u4kNBW.NFkjsNiQ9PH}，1）

#### 程序指示符表达式或过滤器中使用的变量 { #variables-to-use-in-a-program-indicator-expression-or-filter }

程序指示符表达式和过滤器支持以下范围
变量：

<table>
<caption>Variables to use in a program indicator expression or filter</caption>
<colgroup>
<col style="width: 21%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Variable</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p>event_date</p></td>
<td><p>The date of when the event or the last event in the enrollment took place.</p></td>
</tr>
<tr>
<td><p>creation_date</p></td>
<td><p>The date of when an event or enrollment was created in the system.</p></td>
</tr>
<tr>
<td><p>due_date</p></td>
<td><p>The date of when an event is due.</p></td>
</tr>
<tr>
<td><p>sync_date</p></td>
<td><p>The date of when the event or enrollment was last syncronized with the Android app.</p></td>
</tr>
<tr>
<td><p>incident_date</p></td>
<td><p>The date of the incidence of the event.</p></td>
</tr>
<tr>
<td><p>enrollment_date</p></td>
<td><p>The date of when the tracked entity instance was enrolled in the program.</p></td>
</tr>
<tr>
<td><p>enrollment_status</p></td>
<td><p>Can be used to include or exclude enrollments in certain statuses.</p>
<p>When calculating the haemoglobin improvement/deterioration throughout a pregnancy, it might make sense to only consider completed enrollments. If non-completed enrollments is not filtered out, these will represent half-finished ANC followups, where the final improvement/deterioration is not yet established.</p></td>
</tr>
<tr>
<td><p>current_date</p></td>
<td><p>The current date.</p></td>
</tr>
<tr>
<td><p>value_count</p></td>
<td><p>The number of non-null values in the expression part of the event.</p></td>
</tr>
<tr>
<td><p>zero_pos_value_count</p></td>
<td><p>The number of numeric positive values in the expression part of the event.</p></td>
</tr>
<tr>
<td><p>event_count</p></td>
<td><p>The count of events (useful in combination with filters).</p></td>
</tr>
<tr>
<td><p>enrollment_count</p></td>
<td><p>The count of enrollments (useful in combination with filters). Aggregation type for the program indicator must be COUNT. </p></td>
</tr>
<tr>
<td><p>tei_count</p></td>
<td><p>The count of tracked entity instances (useful in combination with filters). Aggregation type for the program indicator must be COUNT.</p></td>
</tr>
<tr>
<td><p>org_unit_count</p></td>
<td><p>The count of organisation units (useful in combination with filters). Aggregation type for the program indicator must be COUNT.</p></td>
</tr>
<tr>
<td><p>program_stage_name</p></td>
<td><p>Can be used in filters for including only certain program stages in a filter for tracker programs. Uses the name of the program stage:</p>
<pre><code>V{program_stage_name} == &#39;ANC first visit&#39;</code></pre></td>
</tr>
<tr>
<td><p>program_stage_id</p></td>
<td><p>Can be used in filters for including only certain program stages in a filter for tracker programs. Uses the unique identifier of the program stage:</p>
<pre><code>V{program_stage_id} == &#39;YPSSfbmAtt1&#39;</code></pre></td>
</tr>
<tr>
<td><p>analytics_period_start</p></td>
<td><p>Can be used in filters or expressions for comparing any date to the first date in each reporting period.</p>
<pre><code>d2:daysBetween(#{WZbXY0S00lP.w4ky6EkVahL}, V{analytics_period_start})</code></pre></td>
</tr>
<tr>
<td><p>analytics_period_end</p></td>
<td><p>Can be used in filters or expressions for comparing any date to the last inclusive date in each reporting period.</p></td>
</tr>
</tbody>
</table>

使用“ Analytics（分析）期末”变量的过滤器仅包含
拥有LMP的女性
    三个月：

    d2：daysBetween（＃{WZbXY0S00lP.w4ky6EkVahL}，V {analytics_period_end}）<= 84

使用“值计数”变量的表达式看起来像
    这个：

    （＃{A03MvHHogjR.a3kGcGDCukuk6} +＃{A03MvHHogjR.wQLfBvPrXqq}）/ V {value_count}

使用“event_date”和“incident_date”变量的表达式如下所示：

    d2：daysBetween（V {incident_date}，V {event_date}）

#### 操作员要在程序指示器过滤器中使用 { #operators-to-use-in-a-program-indicator-filter }

 <table>
 <caption>在程序指示器过滤器中使用的运算符</caption>
 <colgroup>
 <col style="width: 16%" />
 <col style="width: 83%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>运算符</p> </th>
 <th> <p>说明</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p>和</p> </td>
 <td> <p>逻辑与</p> </td>
 </tr>
 <tr class="even">
 <td> <p>或</p> </td>
 <td> <p>逻辑或</p> </td>
 </tr>
 <tr class="odd">
 <td> <p> == </p> </td>
 <td> <p>等于</p> </td>
 </tr>
 <tr class="even">
 <td> <p>！= </p> </td>
 <td> <p>不等于</p> </td>
 </tr>
 <tr class="odd">
 <td> <p> &lt; </p> </td>
 <td> <p>小于</p> </td>
 </tr>
 <tr class="even">
 <td> <p> &lt; = </p> </td>
 <td> <p>小于或等于</p> </td>
 </tr>
 <tr class="odd">
 <td> <p> &gt; </p> </td>
 <td> <p>大于</p> </td>
 </tr>
 <tr class="even">
 <td> <p> &gt; = </p> </td>
 <td> <p>大于或等于</p> </td>
 </tr>
 </tbody>
 </table>

这些运算符可用于形成逻辑表达式，最终
评估为真或假。例如，您可以断言
多个数据元素必须是一个特定的值，或者那个特定的
属性的数值必须小于或大于常数。

同时使用属性和数据元素的过滤器如下所示：

    A {cejWyOfXge6} =='Female'和＃{A03MvHHogjR.a3kGcGDCuk6} <= 2

> **提示**
>
> DHIS2 使用 JEXL 库来评估表达式，它支持超出本文档所涵盖的其他语法。请参阅 [项目主页](http://commons.apache.org/proper/commons-jexl/reference/syntax.html) 中的参考资料，了解如何创建更复杂的表达式

## 配置程序规则 { #configure_program_rule }

### 关于计划规则 { #about_program_rules }

Program rules allows you to create and control dynamic behaviour of the user interface in the **Tracker Capture** and **Event Capture** apps. During data entry, the program rules expressions are evaluated each time the user interface is displayed, and each time a data element is changed. Most types of actions will take effect immediately when the user enters values in the **Tracker Capture** and **Event Capture** apps.

<table>
<caption>Program rule components</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Program rule component</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Program rule action</p></td>
<td><p>Each program rule contains one or multiple actions. These are the behaviours that are triggered in the user interface when the expression is true. Actions will be applied at once if the expression is true, and will be reverted if the expression is no longer true. There are several types of actions and you can have several actions in one program rule.</p></td>
</tr>
<tr class="even">
<td><p>Program rule expression</p></td>
<td><p>Each program rule has a single expression that determines whether the program rule actions should be triggered, if the expression evaluates to true. If the expression is true the program rule is in effect and the actions will be executed. If the expression is false, the program rule is no longer in effect and the actions will no longer be applied.</p>
<p>You create the expression with standard mathematical operators, custom functions, user-defined static values and program rule variables. The program rule variables represent attribute and data element values which will be evaluated as part of the expression.</p></td>
</tr>
<tr class="odd">
<td><p>Program rule variable</p></td>
<td><p>Program rule variables lets you include data values and attribute values in program rule expressions. Typically, you'll have to create one or several program rule variables before creating a program rule. This is because program rules expressions usually contain at least one data element or attribute value to be meaningful.</p>
<p>The program rule variables are shared between all rules in your program. When you create multiple program rules for the same program, these rules will share the same library of program rule variables.</p></td>
</tr>
</tbody>
</table>

In the **Maintenance** app, you manage the following program rule objects:

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Program rule</p></td>
<td><p>Create, edit, clone, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Program rule variable</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_program_rule }

1.  In the **Maintenance** app, create program rule variable(s) if needed.

2.  In the **Maintenance** app, create the program rule:

    1.  输入程序规则详细信息。

    2.  创建程序规则表达式。

    3.  定义程序规则操作。

3.  In the **Tracker Capture** or **Event Capture** apps, verify that the program rule behaves as expected.

### 创建或编辑程序规则变量 { #create_program_rule_variable }

1.  打开 **Maintenance** 应用并单击 **Program** \> **Program rule variable**。

2.  点击添加按钮。

3.  Select a **Program** and enter a **Name**.

4.  Select if you want to **Use code for option set**.

    此选项仅在数据元素或跟踪实体属性连接到选项集时有效。如果您不选择此选项，程序规则变量将填充选项集的名称。如果您选择该选项，程序规则变量将改为使用选项集的代码填充。

5.  选择**来源类型**，然后输入所需信息。

    Depending on the source type, you'll have to select, for example, a **Program stage,** **Data element** or **Tracked entity attribute**.

    源类型确定程序规则变量如何填充值。

    <table>
    <colgroup>
    <col style="width: 50%" />
    <col style="width: 50%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Source type</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p><strong>Data element from the newest event for a program stage</strong></p></td>
    <td><p>This source type works the same way as <strong>Data element from the newest event in the current program</strong>, except that it only evaluates values from one program stage.</p>
    <p>This source type can be useful in program rules where the same data element is used in several program stages, and a rule needs to evaluate the newest data value from within one specific stage.</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Data element from the newest event in the current program</strong></p></td>
    <td><p>This source type is used when a program rule variable needs to reflect the newest known value of a data element, regardless of what event the user currently has open.</p>
    <p>This source type is populated slightly differently in <strong>Tracker Capture</strong> and <strong>Event Capture</strong> apps:</p>
    <p><strong>Tracker Capture</strong>: the program rule variable will be populated with the newest data value collected for the given data element within the enrollment.</p>
    <p><strong>Event Capture</strong>: the program rule variable will be populated with the newest data value found within the 10 newest events in the same organisation unit.</p>
    <p>The newest data value is determined with event date.</p></td>
    </tr>
    <tr class="odd">
    <td><p><strong>Data element in current event</strong></p></td>
    <td><p>Program rule variables with this source type will contain the data value from the same event that the user currently has open.</p>
    <p>This is the most commonly used source type, especially for skip logic (hide actions) and warning/error rules.</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Data element from previous event</strong></p></td>
    <td><p>Program rule variables with this source type will contain the value from a specified data element from a previous event. Only older events is evaluated, not including the event that the user currently has open.</p>
    <p>This source type is commonly used when a data element only should be collected once during an enrollment, and should be hidden in subsequent events.</p>
    <p>Another use case is making rules for validating input where there is an expected progression from one event to the next - a rule can evaluate whether the previous value is higher/lower and give a warning if an unexpected value is entered.</p>
    <p>This source type is populated slightly differently in <strong>Tracker Capture</strong> and <strong>Event Capture</strong> apps:</p>
    <p><strong>Tracker Capture</strong>: the program rule variable will be populated with the newest data value collected for the given data element within the enrollment - but only evaluating the events that comes before the current event date.</p>
    <p><strong>Event Capture</strong>: the program rule variable will be populated with the newest data value collected within the 10 events preceding the current event date - not including the current event.</p>
    <p>The newest data value is determined with event date.</p></td>
    </tr>
    <tr class="odd">
    <td><p><strong>Calculated value</strong></p></td>
    <td><p>Program rule variable with this source type is not connected directly to any form data - but will be populated as a result of some other program rules <strong>ASSIGN</strong> action.</p>
    <p>This variable will be used for making preliminary calculations, having a <strong>ASSIGN</strong> program rule action and assigning a value, this value can be used by other program rules - potentially making the expressions simpler and more maintanable.</p>
    <p>These variables will not be persisted and will stay in memory only during the exectution of the set of program rules. Any program rule that assigns a data value to a preliminary calculated value would normally also have a <strong>priority</strong> assigned - to make sure that the preliminary caculation is done before the rule that consumes the calculated value.</p>
    </td>
    </tr>
    <tr class="even">
    <td><p><strong>Tracked entity attribute</strong></p></td>
    <td><p>Populates the program rule variable with a specified tracked entity attribute for the current enrollment.</p>
    <p>Use this is the source type to create program rules that evaluate data values entered during registration.</p>
    <p>This source type is also useful when you create program rules that compare data in events to data entered during registration.</p>
    <p>This source type is only used for tracker programs (programs with registration).</p></td>
    </tr>
    </tbody>
    </table>

6.  点击**保存**。 

### 创建或编辑程序规则 { #create_program_rule }

> **注意**
>
>程序规则完全属于一个程序。

1.  Open the **Maintenance** app and click **Program** \> **Program rule**.

2.  点击添加按钮。

3.  输入程序规则详细信息。这些字段不会显示给最终用户，它们仅适用于程序管理员。

    -   **程序**

    -   **仅适用于计划阶段的触发规则**

        如果选择了程序阶段，则程序规则将仅针对所选程序阶段运行，而不是针对程序中的每个程序阶段运行。

    -   **名称**

    -   **描述**

    -   **优先**

        假设您的程序中有 16 条程序规则。您可以使用以下优先级设置配置程序规则：

        -   程序规则A的优先级1

        -   计划规则B-K的优先级2

        -   程序规则L-P没有优先级

        结果：系统按以下顺序运行程序规则：

        1.  计划规则A

        2.  程序规则 B - K（您无法找出或配置系统运行这些程序规则的顺序）

        3.  程序规则L-P。

4.  Click **Enter program rule expression** and create the program rule expression with the help of variables, functions and operators.

5.  Click **Define program rule actions** and create the actions executed when the expression is true.

    1.  Click the add button, select an **Action** and enter the required information.

        根据操作类型，您必须执行不同类型的设置。对于某些操作类型，您还必须输入自由文本或创建表达式。

        <table>
        <colgroup>
        <col style="width: 33%" />
        <col style="width: 33%" />
        <col style="width: 33%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Action type</p></th>
        <th><p>Required settings</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td></td>
        <td></td>
        <td></td>
        </tr>
        <tr class="even">
        <td><p><strong>Assign value</strong></p></td>
        <td><p><strong>Data element to assign value to</strong></p>
        <p><strong>Program rule variable to assign value to</strong></p>
        <p><strong>Expression to evaluate and assign</strong></p></td>
        <td><p>Used to help the user calculate and fill out fields in the data entry form. The idea is that the user shouldn’t have to fill in values that the system can calculate, for example BMI.</p>
        <p>When a field is assigned a value, the user sees the value but the user can't edit it.</p>
        <p>Example from Immunization stock card i Zambia: The data element for vaccine stock outgoing balance is calculated based on the data element for incoming stock balance minus the data elements for consumption and wastage.</p>
        <p>Advanced use: configure an 'assign value' to do a part of a calculation and then assign the result of the calculation to a program rule variable. This is the purpose with the &quot;Calculated value&quot; program rule variable.</p></td>
        </tr>
        <tr class="odd">
        <td><p><strong>Display text</strong></p></td>
        <td><p><strong>Display widget</strong></p>
        <p><strong>Static text</strong></p>
        <p><strong>Expression to evaluate and display after static text</strong></p></td>
        <td><p>Used to display information that is not an error or a warning, for example feedback to the user. You can also use this action to display important information, for example the patient's allergies, to the user.</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>Display key/value pair</strong></p></td>
        <td><p><strong>Display widget</strong></p>
        <p><strong>Key label</strong></p>
        <p><strong>Expression to evaluate and display as value</strong></p></td>
        <td><p>Used to display information that is not an error or a warning.</p>
        <p>Example: calculate number of weeks and days in a pregnancy and display it in the format the clinician is used to see it in. The calculation is based on previous recorded data.</p></td>
        </tr>
        <tr class="odd">
        <td><p><strong>Error on complete</strong></p></td>
        <td><p><strong>Data element to display error next to</strong></p>
        <p><strong>Tracked entity attribute to display error next to</strong></p>
        <p><strong>Static text</strong></p>
        <p><strong>Expression to evaluate and display after static text</strong></p></td>
        <td><p>Used whenever you've cross-consistencies in the form that must be strictly adhered to. This action prevents the user from continuing until the error is resolved.</p>
        <p>This action differs from the regular <strong>Show error</strong> since the error is not shown until the user tries to actually complete the form.</p>
        <p>If you don't select a data element or a tracked entity attribute to display the error next to, make sure you write a comprehensive error message that helps the user to fix the error.</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>Hide field</strong></p></td>
        <td><p><strong>Data element to hide</strong></p>
        <p><strong>Tracked entity attribute to hide</strong></p>
        <p><strong>Custom message for blanked field</strong></p></td>
        <td><p>Used when you want to hide a field from the user.</p>
        <p><strong>Custom message for blanked field</strong> allows you to define a custom message displayed to the user in case the program rule hides and blanks out the field after the user typed in or selected a value.</p>
        <p>If a hide field action hides a field that contains a value, the field will always removed. If no message is defined, a standard message will be displayed to alert the user.</p></td>
        </tr>
        <tr class="odd">
        <td><p><strong>Hide section</strong></p></td>
        <td><p><strong>Program stage section to hide</strong></p></td>
        <td><p>TBA</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>Hide program stage</strong></p></td>
        <td><p><strong>Program stage to hide</strong></p></td>
        <td><p>Used when you want to hide a program stage section from the user.</p></td>
        </tr>
        <tr class="odd">
        <td><p><strong>Make field mandatory</strong></p></td>
        <td><p><strong>Data element to make mandatory</strong></p>
        <p><strong>Tracked entity attribute to make mandatory</strong></p></td>
        <td><p>TBA</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>Show error</strong></p></td>
        <td><p><strong>Data element to display error next to</strong></p>
        <p><strong>Tracked entity attribute to display error next to</strong></p>
        <p><strong>Static text</strong></p>
        <p><strong>Expression to evaluate and display after static text</strong></p></td>
        <td><p>Used whenever there are rules which must strictly be adhered to. The show error action prevents the user from continuing until the error is resolved.</p>
        <p>Such a strict validation should only be used when it's certain that the evaluated expression is never true unless the user has made a mistake in data entry.</p>
        <p>It's mandatory to define a message that is shown to the user when the expression is true and the action is triggered.</p>
        <p>You can select which data element or tracked entity attribute to link the error to. This will help the user to fix the error.</p>
        <p>In case several data elements or attributes are involved, select the one that is most likely that the user would need to change.</p></td>
        </tr>
        <tr class="odd">
        <td><p><strong>Show warning</strong></p></td>
        <td><p><strong>Data element to display warning next to</strong></p>
        <p><strong>Tracked entity attribute to display warning next to</strong></p>
        <p><strong>Static text</strong></p>
        <p><strong>Expression to evaluate and display after static text</strong></p></td>
        <td><p>Used to give the user a warning about the entered data, but at the same time to allow the user to save and continue.</p>
        <p>You can use warnings to help the user avoid errors in the entered data, while at the same time allow the user to consciously disregard the warnings and save a value that is outside preset expectations.</p>
        <p><strong>Static text</strong> defines the message shown to the user when the expression is true and the action is triggered.</p>
        <p>You can select which data element or tracked entity attribute to link the error to. This will help the user to fix the error.</p>
        <p>In case several data elements or attributes are involved, select the one that is most likely that the user would need to change.</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>Warning on complete</strong></p></td>
        <td><p><strong>Data element to display warning next to</strong></p>
        <p><strong>Tracked entity attribute to display warning next to</strong></p>
        <p><strong>Static text</strong></p>
        <p><strong>Expression to evaluate and display after static text</strong></p></td>
        <td><p>Used to give the user a warning if he/she tries to complete inconsistent data, but at the same time to allow the user to continue. The warning is shown in a dialog when the user completes the form.</p>
        <p><strong>Static text</strong> defines the message shown to the user when the expression is true and the action is triggered. This field is mandatory.</p>
        <p>You can select which data element or tracked entity attribute to link the error to. This will help the user to fix the error.</p>
        <p>If you don't select a data element or a tracked entity attribute to display the error next to, make sure you write a comprehensive error message that helps the user to fix the error.</p></td>
        </tr>
        <tr class="odd">
        <td><p><strong>Send Message</strong></p></td>
        <td><p><strong>Message template to send</strong></p></td>
        <td><p>Send Message triggers a notification based on provided message template. This action will be taken immediately. The message template will be parsed and variables will be substituted with actual values.</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>Schedule Message</strong></p></td>
        <td><p><strong>Message template to send</strong></p>
        <p><strong>Data field which contains expression to evaluate the date which notification should be sent at. If this expression results in any value other than Date, then resultant will be discarded and notification will not get scheduled.</strong></p></td>
        <td><p>Schedule Message will schedule notification at date provided by Expression in the data field. Sample expression is given below</p>
        <pre><code>d2:addDays( &#39;2018-04-20&#39;, &#39;2&#39; )</code></pre>
        <p>Message template will be parsed and variables will be substituted with actual values.</p></td>
        </tr>
        <tr class="odd">
        <td><p><strong>Hide option</strong></p></td>
        <td><p><strong>Data element to hide option for</strong></p>
        <p><strong>Tracked entity attribute to hide option for</strong></p>
        <p><strong>Option that should be hidden</strong></p></td>
        <td><p>Used to selectively hide a single option for an option set in a given data element/tracked entity attribute.</p>
        <p>When combined with <strong>show option group</strong> the <strong>hide option</strong> takes presedence.</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>Hide option group</strong></p></td>
        <td><p><strong>Data element to hide option group for</strong></p>
        <p><strong>Tracked entity attribute to hide option group for</strong></p>
        <p><strong>Option group that should be hidden</strong></p></td>
        <td><p>Used to hide all options in a given option group and data element/tracked entity attribute.</p>
        <p>When combined with <strong>show option group</strong> the <strong>hide option group</strong> takes precedence.</p></td>
        </tr>
        <tr class="odd">
        <td><p><strong>Show option group</strong></p></td>
        <td><p><strong>Data element to show option group for</strong></p>
        <p><strong>Tracked entity attribute to show option group for</strong></p>
        <p><strong>Option group that should be shown</strong></p></td>
        <td><p>Used to show only options from a given option group in a given data element/tracked entity attribute. To show an option group implicitly hides all options that is not part of the group(s) that is shown.</p></td>
        </tr>
        </tbody>
        </table>

    2.  点击**保存**。 

    3.  （可选）重复上述步骤以添加更多操作。

6.  点击**保存**。 

### 示例：程序规则 { #program_rule_examples }

> **注意**
>
> 您可以在演示服务器上查看所有示例：<https://play.dhis2.org/dev/dhis-web-maintenance/#/list/programSection/programRule>

本示例说明如何配置程序规则
怀孕的周数和天数，并将结果显示在
临床医生用来查看的格式。计算基于
先前记录
    数据。

1.  ![](resources/images/maintainence/pg_rule_ex/keyvaluepair_details.png)

2.  ![](resources/images/maintainence/pg_rule_ex/keyvaluepair_expression.png)

3.  ![](resources/images/maintainence/pg_rule_ex/keyvaluepair_action.png)

    ** Data **字段中的完整表达式：

        d2：concatenate（d2：weeksBetween（＃{lmp}，V {current_date}），'+'，
        d2：modulus（d2：daysBetween（＃{lmp}，V {current_date}），7））

![](resources/images/maintainence/pg_rule_ex/keyvaluepair_result.png)

This example shows how to configure a program rule to display text in the Feedback widget in the **Tracker Capture** app.

1.  ![](resources/images/maintainence/pg_rule_ex/displaytext_pgrule_variable.png)

2.  ![](resources/images/maintainence/pg_rule_ex/displaytext_details.png)

3.  ![](resources/images/maintainence/pg_rule_ex/displaytext_expression.png)

4.  ![](resources/images/maintainence/pg_rule_ex/displaytext_action.png)

![](resources/images/maintainence/pg_rule_ex/displaytext_result.png)

此示例说明如何配置程序规则以始终在 **Tracker Capture** 应用程序的反馈小部件中显示某些数据。当您要确保重要数据（例如药物过敏）始终可见时，这很有用。

1.  ![](resources/images/maintainence/pg_rule_ex/displaytext2_pgrule_variable.png)

2.  ![](resources/images/maintainence/pg_rule_ex/displaytext2_details.png)

3.  ![](resources/images/maintainence/pg_rule_ex/displaytext2_expression.png)

4.  ![](resources/images/maintainence/pg_rule_ex/displaytext2_action.png)

![](resources/images/maintainence/pg_rule_ex/displaytext2_first_pgstage.png)

![](resources/images/maintainence/pg_rule_ex/displaytext2_result.png)

通过使用“分配值”类型的程序规则，您可以计算
“访问时的胎龄”值并将其填写在数据输入表单中。您
配置程序规则以基于以下条件计算“访问时的胎龄”
在“ LMP日期”或“超声估计到期
日期”。

1.  ![](resources/images/maintainence/pg_rule_ex/assign_details.png)

2.  ![](resources/images/maintainence/pg_rule_ex/assign_expression.png)

3.  ![](resources/images/maintainence/pg_rule_ex/assign_action.png)

![](resources/images/maintainence/pg_rule_ex/assign_result.png)

### 参考信息：程序规则表达式中使用的运算符和函数 { #program_rules_operators_functions }

> **提示**
>
> 您可以将函数相互嵌套并使用子表达式来形成更复杂的条件。根据末次月经日期以周为单位生成胎龄的示例：
>
> d2:floor(d2:daysBetween(#{lastMenstrualDate},V{event_date}) / 7 )

> **提示**
>
> 源类型将决定 d2: 函数调用如何评估（源字段）参数。
>
> 示例：其中 \#{hemoglobinCurrent} 设置为源类型**当前事件中的数据元素**。以下函数调用评估是否在当前事件中输入了血红蛋白。
>
> d2:hasValue('血红蛋白电流')
>
> 示例：其中 \#{hemoglobin} 设置为源类型**来自当前程序中最新事件的数据元素**。以下函数调用会评估在注册中的任何事件中是否存在血红蛋白值。
>
> d2:hasValue('血红蛋白')
>
> 示例：其中 \#{hemoglobinPrevious} 设置为源类型**来自上一个事件的数据元素**。以下函数调用评估当前事件之前的事件中是否存在血红蛋白值。
>
> d2:hasValue('hemoglobinPrevious')

<table>
<caption>Possible operators to use in a program rule expression</caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>+</p></td>
<td><p>Add numbers together</p></td>
</tr>
<tr class="even">
<td><p>-</p></td>
<td><p>Subtract numbers from each other</p></td>
</tr>
<tr class="odd">
<td><p>*</p></td>
<td><p>Multiply two numbers</p></td>
</tr>
<tr class="even">
<td><p>/</p></td>
<td><p>Divide two numbers</p></td>
</tr>
<tr class="odd">
<td><p>%</p></td>
<td><p>The modulus of two numbers</p></td>
</tr>
<tr class="even">
<td><p>&amp;&amp;</p></td>
<td><p>Logical AND. True only when the expression on the left and right side is true. The left and right side can be yes/no, yes only or a sub-expression in parenthesis.</p></td>
</tr>
<tr class="odd">
<td><p>||</p></td>
<td><p>Logical OR. True when either the expression on the left or the expression on the right side is true. The left and right side can be yes/no, yes only or a sub-expression in parenthesis.</p></td>
</tr>
<tr class="even">
<td><p>&gt;</p></td>
<td><p>Left number greater than right number</p></td>
</tr>
<tr class="odd">
<td><p>&gt;=</p></td>
<td><p>Left number greater than or equal to right number</p></td>
</tr>
<tr class="even">
<td><p>&lt;</p></td>
<td><p>Left number less than right number</p></td>
</tr>
<tr class="odd">
<td><p>&lt;=</p></td>
<td><p>Left number less than or equal to right number.</p></td>
</tr>
<tr class="even">
<td><p>==</p></td>
<td><p>Left side equal to right side. Supports numbers, text, yes/no and yes only.</p></td>
</tr>
<tr class="odd">
<td><p>!=</p></td>
<td><p>Left side not equal to right side. Supports numbers, text, yes/no and yes only.</p></td>
</tr>
<tr class="even">
<td><p>!</p></td>
<td><p>Negates the following value. Can be used for yes/no, yes only or a sub-expression in parenthesis.</p></td>
</tr>
<tr class="odd">
<td><p>()</p></td>
<td><p>Parenthesis is used to group sub-expressions.</p></td>
</tr>
</tbody>
</table>

<table>
<caption>Custom functions to use in a program rule expression</caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 30%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>d2:ceil</td>
<td>(number)</td>
<td>Rounds the input argument <strong>up</strong> to the nearest whole number.
<p>Example:</p>
<pre><code>d2:ceil(#{hemoglobinValue})</code></pre></td>
</tr>
<tr class="even">
<td>d2:floor</td>
<td>(number)</td>
<td>Rounds the input argument <strong>down</strong> to the nearest whole number.
<p>An example producing the number of weeks the woman is pregnant. Notice that the sub-expression #{gestationalAgeDays}/7 is evaluated before the floor function is executed:</p>
<pre><code>d2:floor(#{gestationalAgeDays}/7)</code></pre></td>
</tr>
<tr class="odd">
<td>d2:round</td>
<td>(number)</td>
<td>Rounds the input argument to the nearest whole number.</td>
</tr>
<tr class="even">
<td>d2:modulus</td>
<td>(number,number)</td>
<td>Produces the modulus when dividing the first with the second argument.
<p>An example producing the number of days the woman is into her current pregnancy week:</p>
<pre><code>d2:modulus(#{gestationalAgeDays},7)</code></pre></td>
</tr>
<tr class="odd">
<td>d2:zing</td>
<td>(number)</td>
<td>Evaluates the argument of type number to zero if the value is negative, otherwise to the value itself.</td>
</tr>
<tr class="even">
<td>d2:oizp</td>
<td>(number)</td>
<td>Evaluates the argument of type number to one if the value is zero or positive, otherwise to zero.</td>
</tr>
<tr class="odd">
<td>d2:concatenate</td>
<td>(object, [,object, object,...])</td>
<td>Produces a string concatenated string from the input parameters. Supports any number of parameters. Will mainly be in use in future action types, for example to display gestational age with d2:concatenate('weeks','+','gestationalageDays').</td>
</tr>
<tr class="even">
<td>d2:daysBetween</td>
<td>(date, date)</td>
<td>Produces the number of days between the first and second argument. When the first argument date comes before the second argument date, the number will be positive - in the opposite case, the number will be negative. The static date format is 'yyyy-MM-dd'.
<p>Example, calculating the gestational age(in days) of a woman, based on the last menstrual period and the current event date:</p>
<pre><code>d2:daysBetween(#{lastMenstrualDate},V{event_date})</code></pre></td>
</tr>
<tr class="odd">
<td>d2:weeksBetween</td>
<td>(date, date)</td>
<td>Produces the number of full weeks between the first and second argument. When the first argument date comes before the second argument date, the number will be positive - in the opposite case, the number will be negative. The static date format is 'yyyy-MM-dd'.</td>
</tr>
<tr class="even">
<td>d2:monthsBetween</td>
<td>(date, date)</td>
<td>Produces the number of full months between the first and second argument. When the first argument date comes before the second argument date, the number will be positive - in the opposite case, the number will be negative. The static date format is 'yyyy-MM-dd'.</td>
</tr>
<tr class="odd">
<td>d2:yearsBetween</td>
<td>(date, date)</td>
<td>Produces the number of years between the first and second argument. When the first argument date comes before the second argument date, the number will be positive - in the opposite case, the number will be negative. The static date format is 'yyyy-MM-dd'.</td>
</tr>
<tr class="even">
<td>d2:addDays</td>
<td>(date, number)</td>
<td>Produces a date based on the first argument date, adding the second argument number of days.
<p>An example calculating the pregnancy due date based on the last menstrual period:</p>
<pre><code>d2:addDays(#{lastMenstrualDate},283)</code></pre></td>
</tr>
<tr class="odd">
<td>d2:count</td>
<td>(sourcefield)</td>
<td>Counts the number of values that is entered for the source field in the argument. The source field parameter is the name of one of the defined source fields in the program - see example
<p>Example usage where #{previousPregnancyOutcome} is one of the source fields in a repeatable program stage &quot;previous pregnancy&quot;:</p>
<pre><code>d2:count(&#39;previousPregnancyOutcome&#39;)</code></pre></td>
</tr>
<tr class="even">
<td>d2:countIfValue</td>
<td>(sourcefield,text)</td>
<td>Counts the number of matching values that is entered for the source field in the first argument. Only occurrences that matches the second argument is counted. The source field parameter is the name of one of the defined source fields in the program - see example.
<p>Example usage where #{previousPregnancyOutcome} is one of the source fields in a repeatable program stage &quot;previous pregnancy&quot;. The following function will produce the number of previous pregnancies that ended with abortion:</p>
<pre><code>d2:countIfValue(&#39;previousPregnancyOutcome&#39;,&#39;Abortion&#39;)
                                    </code></pre></td>
</tr>
<tr class="odd">
<td>d2:countIfZeroPos</td>
<td>(sourcefield)</td>
<td>Counts the number of values that is zero or positive entered for the source field in the argument. The source field parameter is the name of one of the defined source fields in the program - see example.
<p>Example usage where #{fundalHeightDiscrepancy} is one of the source fields in program, and it can be either positive or negative. The following function will produce the number of positive occurrences:</p>
<pre><code>d2:countIfZeroPos(&#39;fundalHeightDiscrepancy&#39;)
                                    </code></pre></td>
</tr>
<tr class="even">
<td>d2:hasValue</td>
<td>(sourcefield)</td>
<td>Evaluates to true of the argument source field contains a value, false if no value is entered.
<p>Example usage, to find if the source field #{currentPregnancyOutcome} is yet filled in:</p>
<pre><code>d2:hasValue(&#39;currentPregnancyOutcome&#39;)
                                    </code></pre></td>
</tr>
<tr class="odd">
<td>d2:zpvc</td>
<td>(object, [,object, object,...])</td>
<td>Returns the number of numeric zero and positive values among the given object arguments. Can be provided with any number of arguments.</td>
</tr>
<tr class="even">
<td>d2:validatePattern</td>
<td>(text, regex-pattern)</td>
<td>Evaluates to true if the input text is an exact match with the supplied regular expression pattern. The regular expression needs to be escaped.
<p>Example expression, triggering actions if a number is not on the pattern 9999/99/9:</p>
<pre><code>!d2:validatePattern(A{nrc},&#39;\\d{6}\/\\d{2}\/\\d&#39;)</code></pre>
<p>Example expression, triggering actions that if the address is not consisting of letters or white spaces, then a white space, then a number:</p>
<pre><code>!d2:validatePattern(A{registrationAddress},&#39;[\\w ]+ \\d+&#39;)</code></pre>
<p>Example, triggering actions if a name contains any numbers:</p>
<pre><code>!d2:validatePattern(A{name},&#39;[^\\d]*&#39;)</code></pre>
<p>Example expression, triggering actions if a mobile number contains the illegal number sequence 555:</p>
<pre><code>d2:validatePattern(A{mobile} ,&#39;.*555.*&#39;)</code></pre></td>
</tr>
<tr class="odd">
<td>d2:left</td>
<td>(text, num-chars)</td>
<td>Evaluates to the left part of a text, num-chars from the first character.
<p>The text can be quoted or evaluated from a variable:</p>
<pre><code>d2:left(#{variableWithText}, 3)</code></pre></td>
</tr>
<tr class="even">
<td>d2:right</td>
<td>(text, num-chars)</td>
<td>Evaluates to the right part of a text, num-chars from the last character.
<p>The text can be quoted or evaluated from a variable:</p>
<pre><code>d2:right(#{variableWithText}, 2)</code></pre></td>
</tr>
<tr class="odd">
<td>d2:substring</td>
<td>(text, start-char-num, end-char-num)</td>
<td>Evaluates to the part of a string specified by the start and end character number.
<p>Example expression:</p>
<pre><code>d2:substring(#{variableWithText}, 1, 3)</code></pre>
If the #{variableWithText} in the above example was 'ABCD', then the result of the evaluation would be 'BC'</td>
</tr>
<tr class="even">
<td>d2:split</td>
<td>(text, delimiter, element-num)</td>
<td>Split the text by delimiter, and keep the nth element(0 is the first).
<p>The text can be quoted or evaluated from a variable, the delimiter must be quoted:</p>
<pre><code>d2:split(#{variableWithText}, &#39;-&#39;, 1)</code></pre>
<p>Note: comma delimiter(,) is not supported.</p></td>
</tr>
<tr class="odd">
<td>d2:length</td>
<td>(text)</td>
<td>Find the length of a string.
<p>Example:</p>
<pre><code>d2:length(#{variableWithText})</code></pre></td>
</tr>
<tr class="even">
<td>d2:inOrgUnitGroup</td>
<td>(text)</td>
<td>Evaluates whether the current organisation unit is in the argument group. The argument can be defined with either ID or organisation unit group code. The current organisation unit will be the event organisation unit when the rules is triggered in the context of an event, and the enrolling organisation unit when the rules is triggered in the event of a TEI registration form.
<p>Example expression:</p>
<pre><code>d2:inOrgUnitGroup(&#39;HIGH_RISK_FACILITY&#39;)</code></pre></td>
</tr>
<tr class="odd">
<td>d2:hasUserRole</td>
<td>(user role)</td>
<td>Returns true if current user has this role otherwise false
<p>Example expression:</p>
<pre><code>d2:hasUserRole(&#39;UYXOT4A3ASA&#39;)</code></pre></td>
</tr>
<tr class="even">
<td>d2:zScoreWFA</td>
<td>Z-Score weight for age indicator</td>
<td>Calculates z-score based on data provided by WHO weight-for-age indicator.
e varies between -3.5 to 3.5 depending upon the value of weight.
<p>Example expression:</p>
<pre><code>d2:zScoreWFA( ageInMonths, weight, gender )</code></pre>

> **Gender** Gender is concidered female by default. Any of the following codes can be used to denote male: 'Male', 'MALE', 'male', 'ma', 'm', 'M', 0, false

</td>
</tr>
<tr class="odd">
<td>d2:zScoreHFA</td>
<td>Z-Score height for age indicator</td>
<td>Calculates z-score based on data provided by WHO height-for-age indicator.
Its value varies between -3.5 to 3.5 depending upon the value of height.
<p>Example expression:</p>
<pre><code>d2:zScoreHFA( ageInMonths, height, gender )</code></pre></td>
</tr>
<tr class="even">
<td>d2:zScoreWFH</td>
<td>Z-Score weight for height indicator</td>
<td>Calculates z-score based on data derived from the WHO weight-for-length and weight-for-height indicators.
The data used for girls can be found [here](https://github.com/dhis2/dhis2-docs/blob/master/src/commonmark/en/content/user/resources/txt-files/zScoreWFH-girls-table.txt) and for boys [here](https://github.com/dhis2/dhis2-docs/blob/master/src/commonmark/en/content/user/resources/txt-files/zScoreWFH-boys-table.txt).
Its value varies between -3.5 to 3.5 depending upon the value of the weight.
<p>Example expression:</p>
<pre><code>d2:zScoreWFH( height, weight, gender )</code></pre></td>
</tr>
<tr class="odd">
<td>d2:minValue</td>
<td>Get minimum value for provided item</td>
<td>Function gets minimum value of provided data element across entire enrollment.
<p>Example expression:</p>
<pre><code>d2:minValue( 'blood-pressure' )</code></pre></td>
</tr>
<tr class="even">
<td>d2:maxValue</td>
<td>Get maximum value for provided item</td>
<td>Function gets maximum value of provided data element across entire enrollment.
<p>Example expression:</p>
<pre><code>d2:maxValue( 'blood-pressure' )</code></pre></td>
</tr>
</tbody>
</table>

<table>
<caption>Standard variables to use in program rule expressions</caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 30%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>V{current_date}</td>
<td>(date)</td>
<td>Contains the current date whenever the rule is executed.
<p>Example expression:</p>
<pre><code>d2:daysBetween(#{symptomDate},V{current_date}) &lt; 0 </code></pre></td>
</tr>
<tr class="even">
<td>V{event_date}</td>
<td>(date)</td>
<td>Contains the event date of the current event execution. Will not have a value at the moment the rule is executed as part of the registration form.</td>
</tr>
<tr class="odd">
<td>V{event_status}</td>
<td>(string)</td>
<td>Contains status of the current event or enrollment.
<p>Example expression to check status is:</p>
<pre><code>V{event_status} == &#39;COMPLETED&#39;</code></pre></td>
</tr>
<tr class="even">
<td>V{due_date}</td>
<td>(date)</td>
<td>This variable will contain the current date when the rule is executed. Note: This means that the rule might produce different results at different times, even if nothing else has changed.</td>
</tr>
<tr class="odd">
<td>V{event_count}</td>
<td>(number)</td>
<td>Contains the total number of events in the enrollment.</td>
</tr>
<tr class="even">
<td>V{enrollment_date}</td>
<td>(date)</td>
<td>Contains the enrollment date of the current enrollment. Will not have a value for single event programs.</td>
</tr>
<tr class="odd">
<td>V{incident_date}</td>
<td>(date)</td>
<td>Contains the incident date of the current enrollment. Will not have a value for single event programs.</td>
</tr>
<tr class="even">
<td>V{enrollment_id}</td>
<td>(string)</td>
<td>Universial identifier string(UID) of the current enrollment. Will not have a value for single event programs.</td>
</tr>
<tr class="odd">
<td>V{event_id}</td>
<td>(string)</td>
<td>Universial identifier string(UID) of the current event context. Will not have a value at the moment the rule is executed as part of the registration form.</td>
</tr>
<tr class="even">
<td>V{orgunit_code}</td>
<td>(string)</td>
<td>Contains the code of the orgunit that is linked to the current enrollment. For single event programs the code from the current event orgunit will be used instead.
<p>Example expression to check whether orgunit code starts with WB_:</p>
<pre><code>d2:left(V{orgunit_code},3) == &#39;WB_&#39;</code></pre></td>
</tr>
<tr class="odd">
<td>V{environment}</td>
<td>(string)</td>
<td>Contains a code representing the current runtime environment for the rules. The possible values is &quot;WebClient&quot;, &quot;AndroidClient&quot; and &quot;Server&quot;. Can be used when a program rule is only supposed to run in one or more of the client types.</td>
</tr>
<tr class="even">
<td>V{program_stage_id}</td>
<td>(string)</td>
<td>Contains the ID of the current program stage that triggered the rules. This can be used to run rules in specific program stages, or avoid execution in certain stages. When executing the rules in the context of a TEI registration form the variable will be empty.</td>
</tr>
<tr class="odd">
<td>V{program_stage_name}</td>
<td>(string)</td>
<td>Contains the name of the current program stage that triggered the rules. This can be used to run rules in specific program stages, or avoid execution in certain stages. When executing the rules in the context of a TEI registration form the variable will be empty.</td>
</tr>
<tr class="even">
<td>V{completed_date}</td>
<td>(string)</td>
<td>This variable contains completion date of event which triggered this rule. If event is not yet complete then &quot;completed_date&quot; contains nothing.</td>
</tr>

</tbody>
</table>

## 配置关系类型 { #configure_relationship_type }

### 关于关系类型 { #about_relationship_types }

关系表示跟踪器模型中两个实体之间的链接。关系被视为DHIS2中的数据，并且基于关系类型，类似于被跟踪实体实例基于被跟踪实体类型的方式。

关系始终包括两个实体，并且这些实体可以包括“跟踪的实体实例”，“注册”和“事件”，以及这些的任意组合。请注意，当前应用程序中并非所有这些组合都可用。

另外，关系可以定义为单向或双向。当前唯一的功能差异是这些功能需要不同级别的创建权限。单向关系要求用户对“从”实体具有数据写访问权限，而对“至”实体具有数据读访问权限，而双向关系则要求双方都具有数据写访问权限。

有关配置以及“从约束”和“至约束”的含义的更多信息，请参见[关系模型]（relationship_model＃relationship_model_relationship_type）。

### 创建或编辑关系类型 { #create_relationship_type }

1.  Open the **Maintenance** app and click **Program** \> **Relationship type**.

2.  点击添加按钮。

3.  Type a **Name** of the relationship type.

4.  （可选）分配**代码**。

5.  (Optional) Provide a **Description** of the relationship.

6.  （可选）选择关系是否应为双向

7.  提供**从发起实体看到的关系名称**。这是关系的名称，将显示在关系“左侧”的数据输入应用程序中。例如。在母子关系中，这可能是“母亲”。

8.  （可选）提供**从接收实体看到的关系名称**。这是关系的名称，将显示在“数据输入”应用程序中关系的“右侧”。例如。在母子关系中，这可能是“母亲”。

9.  选择“来自约束”。这限制了可以包含在关系中的实体类型。 [关系模型]（relationship_model＃relationship_model_relationship_type）。

10. 选择一个“到约束”。这限制了可以包含在关系中的实体类型。 [关系模型]（relationship_model＃relationship_model_relationship_type）。

11. 点击**保存**。 

## 配置跟踪的实体类型 { #configure_tracked_entity }

### 关于跟踪的实体类型 { #about_tracked_entity }

跟踪的实体是可以通过
系统。它可以是从人到商品的任何东西，例如
药还是一个人。

一个程序必须有一个跟踪的实体。注册被跟踪实体
实例到程序中，被跟踪的实体类型和被跟踪的
程序的实体类型必须相同。

跟踪的实体属性用于为
跟踪的实体。跟踪的实体属性可以在之间共享
程式。

### 创建或编辑跟踪的实体属性 { #create_tracked_entity_attribute }

1.  Open the **Maintenance** app and click **Program** \> **Tracked entity attribute**.

2.  点击添加按钮。

3.  In the **Name** field, type the tracked entity attribute name.

4.  (Optional) Type a **Short name**.

5.  (Optional) Type a **Form name**.

6.  （可选）在 **Code** 字段中，分配一个代码。 

7.  （可选）输入**说明**。

8.  (Optional) In the **Field mask** field, you may type a template that's used to provide hints for correct formatting of the attribute. **NOTE: So far only implemented in the DHIS2 Android Capture app, not in the Capture and Tracker Capture web apps.** The following are special characters that can be used in the mask. The special characters match exactly one character of the given type.

    |性格匹配|
    | --------- | -------------------------- |
    | \\ d |数字|
    | \\ x |小写字母|
    | \\ X |大写字母|
    | \\ w |任何字母数字字符|

例如，该模式可用于根据需要在数据元素的输入字段中显示连字符。例如 "\d\d\d-\d\d\d-\d\d\d，每三位数显示一个连字符。

8.  选择一个**选项集**。

9.  In the **Value type** field, select the type of data that the tracked entity attribute will record.

    <table>
    <caption>Value types</caption>
    <colgroup>
    <col style="width: 53%" />
    <col style="width: 46%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Value type</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Age</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>Coordinate</p></td>
    <td><p>A point coordinate specified as longitude and latitude in decimal degrees. All coordinate should be specified in the format &quot;-19.23 , 56.42&quot; with a comma separating the longitude and latitude.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Date</p></td>
    <td><p>Dates render as calendar widget in data entry.</p></td>
    </tr>
    <tr class="even">
    <td><p>Date &amp; time</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="odd">
    <td><p>E-mail</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>File</p></td>
    <td><p>A file resource where you can store external files, for example documents and photos.</p></td>
    </tr>
    <tr class="odd">
    <td>Image</td>
    <td>Similar to File, but restricted to images.</td>
    </tr>
    <tr class="even">
    <td><p>Integer</p></td>
    <td><p>Any whole number (positive and negative), including zero.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Letter</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>Long text</p></td>
    <td><p>Textual value. Renders as text area in forms.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Negative integer</p></td>
    <td><p>Any whole number less than (but not including) zero.</p></td>
    </tr>
    <tr class="even">
    <td><p>Number</p></td>
    <td><p>Any real numeric value with a single decimal point. Thousands separators and scientific notation is not supported.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Percentage</p></td>
    <td><p>Whole numbers inclusive between 0 and 100.</p></td>
    </tr>
    <tr class="even">
    <td><p>Phone number</p></td>
    <td></td>
    </tr>
    <tr class="odd">
    <td><p>Positive integer</p></td>
    <td><p>Any whole number greater than (but not including) zero.</p></td>
    </tr>
    <tr class="even">
    <td><p>Positive of zero integer</p></td>
    <td><p>Any positive whole number, including zero.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Organisation unit</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>Unit interval</p></td>
    <td><p>Any real number greater than or equal to 0 and less than or equal to 1.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Text</p></td>
    <td><p>Textual value. The maximum number of allowed characters per value is 50,000.</p></td>
    </tr>
    <tr class="even">
    <td><p>Time</p></td>
    <td><p>Time is stored in HH:mm format.</p>
    <p>HH is a number between 0 and 23</p>
    <p>mm is a number between 00 and 59</p></td>
    </tr>
    <tr class="odd">
    <td><p>Tracker associate</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>Username</p></td>
    <td><p> Rendered as a dialog with a list of users and a search field. The user will need the "View User" authority to be able to utilise this data type</p></td>
    </tr>
    <tr class="odd">
    <td><p>Yes/No</p></td>
    <td><p>Boolean values, renders as drop-down lists in data entry.</p></td>
    </tr>
    <tr class="even">
    <td><p>Yes only</p></td>
    <td><p>True values, renders as check-boxes in data entry.</p></td>
    </tr>
    </tbody>
    </table>

10. Select an **Aggregation type**.

    <table>
    <caption>Aggregation operators</caption>
    <colgroup>
    <col style="width: 50%" />
    <col style="width: 50%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Aggregation operator</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Average</p></td>
    <td><p>Average the values in both the period as and the organisation unit dimensions.</p></td>
    </tr>
    <tr class="even">
    <td><p>Average (sum in organisation unit hierarchy)</p></td>
    <td><p>Average of data values in the period dimension, sum in the organisation unit dimensions.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Count</p></td>
    <td><p>Count of data values.</p></td>
    </tr>
    <tr class="even">
    <td><p>Min</p></td>
    <td><p>Minimum of data values.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Max</p></td>
    <td><p>Maximum of data values.</p></td>
    </tr>
    <tr class="even">
    <td><p>None</p></td>
    <td><p>No aggregation is performed in any dimension.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Sum</p></td>
    <td><p>Sum of data values in the period and organisation unit dimension.</p></td>
    </tr>
    <tr class="even">
    <td><p>Standard deviation</p></td>
    <td><p>Standard deviation (population-based) of data values.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Variance</p></td>
    <td><p>Variance (population-based) of data values.</p></td>
    </tr>
    </tbody>
    </table>

11. Select **Unique** to specify that the values of the tracked entity attribute is unique.

    唯一设置有两个选项：

    -   **整个系统**：被跟踪实体属性的值可以与属于其他被跟踪实体属性的值重复。但是这个被跟踪实体属性中的值不能重复。

        Select **Automatically generated** to allow automatic generation of the tracked entity attribute value. When the generate setting is selected on, an optional field for specifying pattern also displays. This field should contain a pattern based on the TextPattern syntax. When the value is automatically generated, it will be unique for this attribute for the entire system. See the TextPattern section for more information on how it works.

    -   **组织单位**：被跟踪实体属性的值不能在同一个组织单位中重复。

12. Select **Inherit** to registry a new entity for relationship with an available entity, all inherit entity attribute values of the entity will be pre-filled in the registration form.

13. (Optional) Select **Confidential**.

    仅当您为系统配置了加密时，此选项才可用。

14. (Optional) Select **Display in list without program**.

15. （可选）分配一个或多个**传奇**。

16. 点击**保存**。 

### 创建或编辑跟踪的实体类型 { #create_tracked_entity }

1.  Open the **Maintenance** app and click **Program** \> **Tracked entity type**.

2.  Click the add button or an already existing **tracked entity type**.

3.  Type a **Name** of the tracked entity.

4.  (Optional) select a **Color** and an **Icon** that will be used by the data capture apps to identify this tracked entity type.

5.  (Optional) Enter a **Description** of the tracked entity.

6.  (Optional) Enter a **Minimum number of attributes required to search**. This specifies the amount of attributes that need to be filled out in order to be able to search for this **tracked entity type** in a _global search_. See [Configure Search](../search/search.xml#configure_search) for more information.

7.  (Optional) Enter a **Maximum number of tracked entity instances to return in search**. This specifies the amount of tracked entity instances that will be returned in a _global search_. See [Configure Search](../search/search.xml#configure_search) for more information.

8.  (Optional) Add **Tracked entity type attributes**. This is used to configure search, see [Configure Search](configure_search) for more information.

9.  (Optional) Enter an **Alternative name** of the tracked entity.

10. 点击**保存**。 

## 配置搜索 { #configure_search }

可以为用户提供搜索组织单位，从而可以
在数据捕获之外搜索跟踪的实体实例
组织单位。

搜索可以在程序的上下文中进行，也可以在
跟踪实体类型的上下文。为用户提供以下选择
在程序上下文中搜索，有必要进行配置
可以搜索哪个程序跟踪的实体属性。为了给
用户可以选择在跟踪的实体类型的上下文中进行搜索，
您将必须配置哪个跟踪实体类型属性
是可搜索的。

### 配置搜索跟踪器程序 { #configure-search-for-tracker-program }

为了能够使用程序进行搜索，您必须制作一些
程序属性可搜索。唯一的程序属性将始终是
可搜索的。

1.  打开**程序应用**

2.  打开或创建跟踪器程序

3.  Go to **Attributes**

4.  如果没有属性，请添加一个

5.  将属性设置为可搜索

可搜索的程序属性将分配给搜索组。

-   独特的群体。每个唯一程序属性一组。唯一属性不能与搜索中的其他程序属性组合。搜索结果只能是 0 或 1 个被跟踪的实体实例。

-   非唯一组。该组包含所有非唯一的程序属性，并且可以在搜索中组合多个属性。

作为 **Program** 配置的一部分，可以为程序搜索设置两个限制。

-   搜索所需的最小属性数：此属性定义在执行搜索之前必须输入多少个非唯一属性。

<!-- end list -->

-   返回的跟踪实体实例的最大数量：此属性通过限制允许用户获取其搜索条件的匹配跟踪实体实例的数量来定义搜索的具体程度。如果匹配的记录数大于此最大值，则不会返回它们。在返回匹配记录之前，用户必须提供更具体的搜索条件，以减少匹配记录的数量。

    > **NOTE**
    >
    > This maximum is only applied to search results outside the users capture org unit. Within the capture scope, the user can see any number of results.

### 配置搜索以跟踪实体类型 { #configure-search-for-tracked-entity-type }

> **注意**
>
> TET =跟踪的实体类型

为了能够在没有程序的情况下进行搜索，您必须做一些
TET属性可搜索。唯一的TET属性将始终是
可搜索的。

1.  Open **Tracked entity type app**

2.  打开一个跟踪实体类型

3.  如果TET没有属性，请添加一个

4.  将属性设置为可搜索

可搜索的TET属性将分配给搜索组。

-   独特的群体。每个唯一 TET 属性一组。唯一属性不能与搜索中的其他 TET 属性组合。搜索结果只能是 0 或 1 个被跟踪的实体实例。

-   非唯一组。该组包含所有非唯一的 TET 属性，并且可以在搜索中组合多个属性。

可以为TET搜索设置两个限制

-   搜索所需的最小属性数：此属性定义在执行搜索之前必须输入多少个非唯一属性。

<!-- end list -->

-   返回的跟踪实体类型的最大数量：此属性通过限制允许用户为其搜索条件获取的匹配跟踪实体类型的数量，定义搜索的特定程度。如果匹配的记录数大于此最大值，则不会返回它们。在返回匹配记录之前，用户必须提供更具体的搜索条件，以减少匹配记录的数量。

    > **NOTE**
    >
    > This maximum is only applied to search results outside the users capture org unit. Within the capture scope, the user can see any number of results.

### 为用户配置搜索组织单位 { #configure-search-organisation-units-for-a-user }

能够搜索用户数据以外的其他组织单位
捕获组织单位，则必须为用户分配搜索
组织单位。给用户一个搜索组织单位也将
授予其在该组织单位所有子级中进行搜索的权限。

1.  开启**使用者应用程式**

2.  点击一个用户

3.  打开**分配搜索组织单位**

4.  选择组织单位

5.  点击**保存**

## 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

## 删除元数据对象 { #delete-metadata-objects }

> **注意**
>
> 如果没有数据与数据元素本身关联，您只能删除数据元素和其他数据元素对象。

> **警告**
>
> 您从系统中删除的任何数据集都将不可挽回地丢失。所有可能已经开发的数据输入表格和部分表格也将被删除。确保在删除任何数据集之前已对数据库进行了备份，以防您需要在某个时间点恢复它。

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

## 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
> 默认设置是每个人（**公共访问**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  （可选）添加用户或用户组：搜索用户或用户组并选中。用户或用户组被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **No access**（仅适用于**Public access**）：公众将无权访问该对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组将无权访问对象的数据。

6.  点击**关闭**。

## 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

## 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

# 管理用户，用户角色和用户组 { #manage_user_role_group }

## 关于用户管理 { #about_user_userrole }

多个用户可以同时访问DHIS2，每个用户可以拥有
不同的当局。您可以微调这些权限，以便
某些用户只能输入数据，而其他用户只能生成数据
报告。

-   您可以根据需要创建任意数量的用户、用户角色和用户组。

-   您可以通过用户角色将特定权限分配给用户组或单个用户。

-   您可以创建多个用户角色，每个用户角色都有自己的权限。

-   您可以为用户分配用户角色以授予用户相应的权限。

-   您可以将每个用户分配到组织单位。然后用户可以为分配的组织单位输入数据。

 <table>
 <caption>用户管理术语和定义</caption>
 <colgroup>
 <col style="width: 20%" />
 <col style="width: 40%" />
 <col style="width: 40%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>术语</p> </th>
 <th> <p>定义</p> </th>
 <th> <p>示例</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 权限<td> <p>授权</p> </td>
 <td> <p>执行一项或多项特定任务的权限</p> </td>
 创建一个新的数据元素</p> <td> <p>
 <p>更新组织单位</p>
 <p>查看报告</p> </td>
 </tr>
 <tr class="even">
 <td> <p>用户</p> </td>
 <td> <p>一个人的DHIS2用户帐户</p> </td>
 管理员<td> <p>管理员</p>
 <p> traore </p>
 <p>客人</p> </td>
 </tr>
 <tr class="odd">
 <td> <p>用户角色</p> </td>
 <td> <p>一组权限</p> </td>
 <td> <p>数据输入职员</p>
 <p>系统管理员</p>
 <p>产前保健程序访问</p> </td>
 </tr>
 <tr class="even">
 <td> <p>用户组</p> </td>
 <td> <p>一组用户</p> </td>
 肯尼亚员工<td> <p>肯尼亚工作人员</p>
 <p>反馈消息收件人</p>
 <p> HIV计划协调员</p> </td>
 </tr>
 </tbody>
 </table>

您可以在**用户**应用中管理用户，用户角色和用户组。

 <table>
 用户应用中的<caption>对象</caption>
 <colgroup>
 <col style="width: 20%" />
 <col style="width: 80%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>对象类型</p> </th>
 <th> <p>可用功能</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p>用户</p> </td>
 <td> <p>创建，编辑，邀请，克隆，禁用，按组织单位显示，删除和显示详细信息</p> </td>
 </tr>
 <tr class="even">
 <td> <p>用户角色</p> </td>
 <td> <p>创建，编辑，共享，删除和显示详细信息</p> </td>
 </tr>
 <tr class="odd">
 <td> <p>用户组</p> </td>
 <td> <p>创建，编辑，加入，离开，共享，删除和显示详细信息</p> </td>
 </tr>
 </tbody>
 </table>

### 关于用户 { #about-users }

DHIS2中的每个用户都必须具有一个用户帐户，该帐户由
用户名。您应该为每个用户注册一个名字和姓氏
以及联系信息，例如电子邮件地址和电话
数。

注册正确的联系信息很重要。 DHIS2
使用此信息直接联系用户，例如发送
通过电子邮件通知重要事件。您也可以使用
联系人信息以共享，例如仪表板和数据透视表。

DHIS2中的用户与组织单位相关联。你应该
分配用户所在的组织单位。

为地区记录员创建用户帐户时，应
将他/她工作的地区指定为组织单位。

分配的组织单位会影响用户如何使用DHIS2：

-   In the **Data Entry** app, a user can only enter data for the organisation unit she is associated with and the organisation units below that in the hierarchy. For instance, a district records officer will be able to register data for her district and the facilities below that district only.

-   在 **Users** 应用中，除了层次结构中的组织单位之外，用户只能为与其关联的组织单位创建新用户。

-   In the **Reports** app, a user can only view reports for her organisation unit and those below. (This is something we consider to open up to allow for comparison reports.)

用户管理的重要部分是控制哪些用户是
允许创建具有权限的新用户。在DHIS2中，您可以
控制允许哪些用户执行此任务。关键原则
是用户只能授予权限并访问那些
用户本身有权访问。国家，省的用户数
和地区级别通常相对较少，可以创建和
由系统管理员管理。如果很大一部分
设施正在将数据直接输入到系统中，
用户可能会变得笨拙。建议委派和
将这项任务下放给地区官员，它将使
处理效率更高，并为设施用户提供更好的支持。

### 关于用户角色 { #about-user-roles }

DHIS2中的用户角色是一组权限。权威是指
执行一项或多项特定任务的权限。

用户角色可以包含创建新数据元素，进行更新的权限
组织单位或查看报告。

一个用户可以具有多个用户角色。如果是这样，用户的权限将
是用户角色中所有权限和数据集的总和。这个
意味着您可以出于特殊目的混合和匹配用户角色
仅创建新的。

A user role is associated with a collection of data sets. This affects the **Data Entry** app: a user can only enter data for the data sets registered for his/her user role. This can be useful when, for example, you want to allow officers from health programs to enter data only for their relevant data entry forms.

建议：

-   为组织内的每个职位创建一个用户角色。

-   在定义系统中哪个用户正在执行哪些任务的同时创建用户角色。

-   只给用户角色他们执行工作所需的确切权限，而不是更多。只有那些应该执行任务的人才能拥有执行任务的权限。

### 关于用户组 { #about-user-groups }

用户组是一组用户。设置时使用用户组
共享对象或通知，例如推送报告或程序
通知。

也可以看看：

[分享](https://ci.dhis2.org/docs/master/en/user/html/sharing.html)

[管理程序
通知]（https://docs.dhis2.org/master/zh/user/html/configure_tracker_program_in_Maintenance_app.html#create-a-program-stage-notification）

[大力推
报告]（https://docs.dhis2.org/master/zh/user/html/manage_push_report.html）

## 工作流程 { #user_mgt_workflow }

1.  定义项目所需的职位，并确定不同职位将执行的任务。

2.  为每个职位创建大约一个用户角色。

3.  创建用户。

4.  将用户角色分配给用户。

5.  将用户分配给组织单位。

6.  （可选）将用户分组到用户组中。

7.  通过维护应用程序的数据集管理部分中的共享对话框与用户或用户组共享数据集

> **提示**
>
> 为了让用户能够输入数据，您必须将他们添加到组织单位级别并与他们共享数据集。

## 管理使用者 { #mgt_user }

### 创建一个用户 { #create_user }

![](resources/images/dhis2UserManual/select_user_menu.png)

1.  打开** Users **应用程序，然后单击** Users **卡中的** + **。

2.  选择是否要填写所有个人用户信息，或通过电子邮件邀请用户填写其余用户信息：

-   **使用用户详细信息创建帐户** ![](resources/images/dhis2UserManual/user_management_details.png) 如果您想输入新用户的所有登录详细信息，例如用户名、密码等，请选择此选项。在这些条件下，字段用户名、密码、姓氏、名字、角色是强制性的。 <br/> <br/> 创建用户后，用户就可以使用您提供的用户名和密码来使用帐户了。 <br/> <br/>
-   **创建帐户的电子邮件邀请** ![](resources/images/dhis2UserManual/user_management_invite.png) 如果您想通过电子邮件向用户发送邀请，请选择此选项。然后她/他必须返回 DHIS2 并完成设置他们的用户帐户。用户完成设置的帐户将根据您配置帐户的方式受到限制。

> **注意**
>
> 为了使用此功能，系统应在 SystemSettings -\> 电子邮件中具有有效的电子邮件配置

输入邀请发送到的电子邮件地址。如果你
如果需要，您还可以输入该帐户将拥有的用户名。如果
您将用户名留空，然后用户可以选择自己的用户
他们回应邀请时的名字（只要没有被接受）
已经为另一个用户。）<br/> <br/>
创建用户后，系统会向该地址发送一封电子邮件
您提供的。它包含一个唯一的Web链接，用户可以通过该链接返回
进入系统并通过输入其余帐户来激活他们的帐户
用户信息。用户必须在4天内完成设置帐户
天后，邀请无效。

3. （可选）为以下字段提供值：**OIDC映射声明，LDAP标识符，移动电话号码，WhatsApp，Facebook Messenger，Skype，Telegram和Twitter **。

4. Select an **Interface language**.<br/> You can select a language into which fixed elements of the DHIS2 user interface have been translated.

5. Select a **Database language**. <br/> You can select a language into which implementation-supplied items have been translated in the database, for example data element names or organisation unit level names.

6. 在**可用角色**部分中，双击要分配给用户的用户角色。

7. 选择**数据采集和维护组织单位**。 <br/> ![](resources/images/dhis2UserManual/user_management_fewer_options.png) <br/> 数据采集和维护组织单位控制用户可以对哪些组织单位进行数据输入。您必须为每个用户分配至少一个数据采集和维护组织单位。 <br/> <br/> 用户将有权访问分配的组织单位的所有子组织单位。例如，如果您已将用户分配到该地区包含多个设施的地区，则该用户将有权访问该地区的数据以及该地区中包含的所有设施。

8. （任选）选择**数据输出和分析组织单位**。<br/><br/>数据输出和分析组织单位控制用户可以在分析应用程序中查看哪些组织单位的聚合数据，例如**数据透视表**和**GIS**应用程序。您可以为用户分配任意数量的数据输出和分析组织单元。<br/><br/>用户将有权访问分配的组织单位的所有子组织。例如，如果您已将用户分配到一个地区，则不能选择该地区的设施。<br/><br/>

> **注意** 
> 
> 分配数据输出和分析组织单位组织单位是可选的。如果您不指定任何组织单位，用户将有权访问完整的组织单位层次结构以查看聚合数据。与数据捕获组织单位一样，_您不应选择已选择的单位的后代组织单位_。<br/><br/>在分析应用程序的多个位置，您可以为组织单位维度选择“用户组织单位”。此机制将首先尝试使用链接到当前用户的数据视图组织单元。如果没有找到，它将使用数据捕获和维护组织单位。如果用户被分配到多个组织单位，使用“用户组织单位”可能会导致不可预知的行为。<br/><br/>

9. 点击**显示更多选项**，将显示另外一个选项。 （任选）<br/> <br/>

10. 在**搜索组织单位**中，选择您希望用户能够搜索的组织单位。<br/><br/>

11. （可选）在 **可用用户组** 部分，双击要分配给用户的用户组。<br/><br/>

12. （可选）在**数据分析的可用维度限制**部分中，双击要分配给用户的维度。 <br/><br/> 您可以通过选择将限制用户视图的维度来限制用户在数据分析应用程序中看到的值。

> **示例** 
> 
> 假您将_实施合作伙伴_定义为类别选项组集，并且您仅与该用户共享了一个或多个实施伙伴（类别选项组）。如果您想确保用户在分析中看不到包含来自其他组的值的全部，引入_Implementing Partner_分配给用户。<br/><br/> 这确保通过用户分析应用程序可以看到的任何数据将被过滤以仅选择用户可以看到的合作伙伴类别选项组。<br/><br/> 

13. 点击**保存**。 

### 编辑用户对象 { #edit-user-objects }

1.  Open the **Users** app and find the type of user object you want to edit.

2.  In the object list, directly click the relevant object, or click the menu icon and select **Edit**.

3.  修改所需的选项。

4.  点击**保存**。 

### 禁用用户 { #disable_user }

您可以禁用用户。这意味着该用户的帐户不是
已删除，但用户无法登录或使用DHIS2。

1.  打开**用户**应用，然后单击**用户**。

2.  In the list, click the menu icon of relevant user record and select **Disable**.

3.  单击**确定**以确认。

> **警告**
>
> 如果您正在使用 [Android Capture App](https://www.dhis2.org/android) 禁用用户将导致应用程序在用户下次尝试在线登录时删除手机上存储的本地数据.请确保当您使用_禁用用户_功能时，所有数据已与服务器同步。或者您正在使用此功能来确保在设备丢失时删除数据。

### 显示用户的个人资料 { #display-a-users-profile }

1.  打开**用户**应用，然后单击**用户**。

2.  In the list, click the menu icon of the relevant user and select **Profile**.

### 按组织单位过滤用户 { #filter-users-by-organisation-unit }

您可以查看已分配给特定用户的所有用户
组织单位。

1.  打开**用户**应用，然后单击**用户**。

2.  Above the user list, click on the **Organisation Unit** filter input.

3.  将出现一个弹出窗口，您可以在其中选择要过滤的组织单位。

用户列表将被过滤为仅包括已
分配给选定的组织单位。

### 克隆用户 { #clone_user }

1.  打开**用户**应用，然后单击**用户**。

2.  In the object list, click the menu icon of the relevant user and select **Replicate**.

3.  输入克隆的用户帐户的新用户名和密码。

4.  点击**复制**。

5.  In the object list, click the user you just created and click **Edit**.

6.  修改所需的选项。

7.  点击**保存**。 

### 修改用户密码 { #user_manage_password }

要更改用户密码：

1.  打开**用户**应用，然后单击**用户**。

2.  In the object list, click the menu icon of the relevant user and select **Edit**.

3.  输入新密码并重新输入。

4.  点击**保存**。 

#### 密码要求 { #password-requirements }

创建新密码时，以下规则适用。密码必须：

-   至少包含8个字符。请注意，可以通过系统设置“密码中的最小字符数”来配置此数字，最多可以输入14个字符。

-   不得超过40个字符。

-   包含至少一个特殊字符（非字母数字字符）。

-   至少包含一个大写字符。

-   至少包含一个小写字符。

-   至少包含一位数字（数字）。

-   不包含用户帐户的用户名或电子邮件地址。

-   不包含通用词，例如 _system_、_admin_、_user_、_login_ 和 _manager_。

-   不能是用户之前使用的24个密码之一。这在超级用户为另一个用户重置密码的情况下不适用。

### 删除用户对象 { #delete-user-objects }

1.  Open the **Users** app and find the type of user object you want to delete.

2.  In the object list, click the menu icon of the relevant object and select **Remove**.

3.  单击**确定**以确认。

### 显示用户对象的详细信息 { #display-details-of-user-objects }

1.  Open the **Users** app and find the type of user object you want to view.

2.  In the object list, click the menu icon of the relevant object and select **Show details**.

### 禁用用户的两因素身份验证 { #disable-two-factor-authentication-for-a-user }

如果用户启用了“双重身份验证”，然后无法访问
他/她的身份验证设备（例如智能手机丢失或损坏），
该用户将无法再登录系统。为了解决这个问题
问题，用户管理员可以为
受影响的用户，以便该用户能够使用再次访问系统
只是一个密码。

1.  打开**用户**应用，然后单击**用户**。

2.  In the object list, click the menu icon of the relevant user and select **Disable Two Factor Authentication**.

3.  点击**确定**以确认

> **注意**
>
> 禁用双因素身份验证的选项仅适用于通过用户配置文件应用程序设置了双因素身份验证的用户。

## 管理用户角色 { #mgt_userrole }

### 创建用户角色 { #create_userrole }

![](resources/images/dhis2UserManual/role_maintenance_page.png)

1.  打开**用户**应用，然后单击**用户角色**。

2.  点击**添加新**。

3.  输入一个**名称**，例如"超级用户"或"管理员用户"。

4.  输入**说明**。

5.  In the **Authorities** section, select the authorities you want to give to the user role. You can also use the filter inputs above the authority section to search for a specific authority.

6.  点击**添加**。

### 编辑用户对象 { #edit-user-objects }

1.  Open the **Users** app and find the type of user object you want to edit.

2.  In the object list, directly click the relevant object, or click the menu icon and select **Edit**.

3.  修改所需的选项。

4.  点击**保存**。 

### 删除用户对象 { #delete-user-objects }

1.  Open the **Users** app and find the type of user object you want to delete.

2.  In the object list, click the menu icon of the relevant object and select **Remove**.

3.  单击**确定**以确认。

### 显示用户对象的详细信息 { #display-details-of-user-objects }

1.  Open the **Users** app and find the type of user object you want to view.

2.  In the object list, click the menu icon of the relevant object and select **Show details**.

### 更改用户对象的共享设置 { #change-sharing-settings-for-user-objects }

1.  Open the **Users** app and find the type of user object you want to modify.

2.  In the object list, click the relevant object and select **Sharing settings**.

3.  （可选）搜索用户组并选择它，然后单击加号图标。用户组被添加到列表中。

4.  （可选）选择**外部访问（不登录）**。

5.  更改要修改的用户组的设置。

-   **没有**
-   **可以查看**：用户组中的每个人都可以查看对象
-   **可以编辑和查看**：用户组中的每个人都可以查看和编辑对象

6.  点击**保存**。 

## 管理用户组 { #mgt_usergroup }

### 创建一个用户组 { #create_usergroup }

1.  打开**用户**应用，然后单击**用户组**。

2.  点击**添加新**。

3.  在**名称**字段中，键入用户组的名称。

4.  In the **Available users** section, double-click the users you want to add to the user group.

5.  In the **Available user groups** section, double-click the user groups you want to add to the user group.

6.  点击**添加**。

### 加入用户组 { #join_usergroup }

1.  打开**用户**应用，然后单击**用户组**。

2.  In the list, click the relevant user group and select **Join group**.

### 离开使用者群组 { #leave_usergroup }

1.  打开**用户**应用，然后单击**用户组**。

2.  In the list, click the relevant user group and select **Leave group**.

### 编辑用户对象 { #edit-user-objects }

1.  Open the **Users** app and find the type of user object you want to edit.

2.  In the object list, directly click the relevant object, or click the menu icon and select **Edit**.

3.  修改所需的选项。

4.  点击**保存**。 

### 删除用户对象 { #delete-user-objects }

1.  Open the **Users** app and find the type of user object you want to delete.

2.  In the object list, click the menu icon of the relevant object and select **Remove**.

3.  单击**确定**以确认。

### 显示用户对象的详细信息 { #display-details-of-user-objects }

1.  Open the **Users** app and find the type of user object you want to view.

2.  In the object list, click the menu icon of the relevant object and select **Show details**.

### 更改用户对象的共享设置 { #change-sharing-settings-for-user-objects }

1.  Open the **Users** app and find the type of user object you want to modify.

2.  In the object list, click the relevant object and select **Sharing settings**.

3.  （可选）搜索用户组并选择它，然后单击加号图标。用户组被添加到列表中。

4.  （可选）选择**外部访问（不登录）**。

5.  更改要修改的用户组的设置。

-   **没有**
-   **可以查看**：用户组中的每个人都可以查看对象
-   **可以编辑和查看**：用户组中的每个人都可以查看和编辑对象

6.  点击**保存**。 

## 分散用户管理 { #decentralize-user-management }

DHIS2 supports a concept for user management referred to as _managed users_ which allows to explicitly define which users should be allowed to manage or modify which users. To "manage a user" implies that you can see and modify that user. The basic concept for user management is that you can see and modify users which you have been granted all of the authorities; in other words you can modify users which have a subset of your own authorities. The managed users concept gives you greater control over this.

受管用户概念使您可以定义应将哪些用户
能够管理哪些用户。这是通过用户组和
这些组中的成员身份。可以将用户组配置为
允许通过标准添加和更新来管理其他用户组
用户界面。结果是特定用户可以管理所有用户
是用户组的成员，可以由用户组管理
用户所属的成员。换句话说，用户可以由所有人管理
管理用户组的用户组成员
的。

要启用此概念，您应该授予用户“在托管组中添加/更新用户”的权限，并且_not_ 授予对标准“添加/更新用户”权限的访问权限。托管用户概念的一个含义是，当仅使用“在托管组中添加/更新用户”创建用户时，必须使用户成为当前用户可以管理的至少一个用户组的成员。否则，当前用户将失去对正在创建的用户的访问权限。这是系统验证的。

授予“在托管组中添加/更新用户”权限后，
系统允许用户向其拥有的用户组添加成员
只读访问。这样做的目的是为了分散
用户管理。您可以定义一系列用户组，其中其他用户
可以添加或删除成员，但不能删除或更改成员的名称
组。

## 示例：卫生系统中的用户管理 { #user_mgt_example }

在卫生系统中，将用户按照任务进行逻辑分组
他们的表现和所占据的位置。

1.  定义哪些用户应具有系统管理员角色。他们通常是国家 HIS 部门的一部分，应该在系统中拥有完全的权力。

2.  为每个职位创建大约一个用户角色。

常见职位的示例有：

 <table>
 <colgroup>
 <col style="width: 27%" />
 <col style="width: 21%" />
 <col style="width: 25%" />
 <col style="width: 25%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>位置</p> </th>
 <th> <p>典型任务</p> </th>
 <th> <p>推荐机构</p> </th>
 <th> <p>评论</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p>系统管理员</p> </td>
 <td><p> 设置系统的基本结构（元数据）。  </p></td>
 <td><p>添加，更新和删除系统的核心元素，例如数据元素，指标和数据集。 </p></td>
 <td><p>只有系统管理员才能修改元数据。
 如果您允许系统管理员团队之外的用户修改元数据，则可能导致协调问题。</p> 
 <p>仅应由系统管理员执行对系统的更新。</p> </td> 
 </tr>
 <tr class="even">
 <td><p>国家卫生经理 </p>
<p> 省卫生经理 </p></td>
  <td><p>监视和分析数据 </p></td>
  <td><p>访问报告模块，<strong> GIS </strong>，<strong>数据质量</strong>应用程序和仪表板。  </p></td>
  <td><p>无需访问即可输入数据，修改数据元素或数据集。</p></td>  
 </tr>
 <tr class="odd">
 <td><p>国家健康信息系统部门官员（HISO） </p> 
 <p>地区健康记录和信息官员（DHRIO）</p>
 <p>设施健康记录和信息官员（HRIO） </p></td>
  <td><p>输入无法直接从设施中获得的数据</p>
 <p>监视，评估和分析数据 </p></td>
<td><p>  访问所有分析和验证应用程序</p>
 <p>访问<strong>数据条目</strong>应用程序。</p>  </td>
<td>  <p>- </p></td>
 </tr>
 <tr class="even">
<td> <p> 数据输入文员 </p></td>
<td> <p> - </p></td>
  <td><p>- </p></td>
  <td><p>- </p></td>
 </tr>
 </tbody>
 </table>

# 用户权限 { #user_authorities }

<table>
<tbody>
<tr class="odd">
<td>Accept data at lower levels</td>
<td>F_ACCEPT_DATA_LOWER_LEVELS</td>
</tr>
<tr class="even">
<td>Access my data mart</td>
<td>F_MYDATAMART_VIEW</td>
</tr>
<tr class="odd">
<td>Add Facility</td>
<td>F_FRED_CREATE</td>
</tr>
<tr class="even">
<td>Add Locale</td>
<td>F_LOCALE_ADD</td>
</tr>
<tr class="odd">
<td>Add Option Set</td>
<td>F_OPTIONSET_ADD</td>
</tr>
<tr class="even">
<td>Add Organisation Unit Group Set</td>
<td>F_ORGUNITGROUPSET_ADD</td>
</tr>
<tr class="odd">
<td>Add Program Rule</td>
<td>F_PROGRAM_RULE_ADD</td>
</tr>
<tr class="even">
<td>Add Public Map</td>
<td>F_MAP_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add Relationship Type</td>
<td>F_RELATIONSHIPTYPE_ADD</td>
</tr>
<tr class="even">
<td>Add/Remove Members In Read-Only User Groups</td>
<td>F_USER_GROUPS_READ_ONLY_ADD_MEMBERS</td>
</tr>
<tr class="odd">
<td>Add SQL View</td>
<td>F_SQLVIEW_ADD</td>
</tr>
<tr class="even">
<td>Add Tracked Entities</td>
<td>F_TRACKED_ENTITY_ADD</td>
</tr>
<tr class="odd">
<td>Add Tracked Entity Attribute Value</td>
<td>F_TRACKED_ENTITY_ATTRIBUTEVALUE_ADD</td>
</tr>
<tr class="even">
<td>Add Tracked Entity Form</td>
<td>F_TRACKED_ENTITY_FORM_ADD</td>
</tr>
<tr class="odd">
<td>Add Tracked Entity Instance Comment</td>
<td>F_TRACKED_ENTITY_COMMENT_ADD</td>
</tr>
<tr class="even">
<td>Add Tracked Entity Relationship</td>
<td>F_RELATIONSHIP_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Attribute</td>
<td>F_ATTRIBUTE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Chart</td>
<td>F_CHART_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Concept</td>
<td>F_CONCEPT_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Constant</td>
<td>F_CONSTANT_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Data Value</td>
<td>F_DATAVALUE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Indicator Type</td>
<td>F_INDICATORTYPE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Min/max rule</td>
<td>F_DATAELEMENT_MINMAX_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Organisation Unit</td>
<td>F_ORGANISATIONUNIT_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Category Option Group</td>
<td>F_CATEGORY_OPTION_GROUP_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private Category Option Group Set</td>
<td>F_CATEGORY_OPTION_GROUP_SET_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Data Element</td>
<td>F_DATAELEMENT_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private Data Element Category</td>
<td>F_CATEGORY_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Data Element Category Combo</td>
<td>F_CATEGORY_COMBO_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private Data Element Category Option</td>
<td>F_CATEGORY_OPTION_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Data Element Category Option Combo</td>
<td>F_CATEGORY_OPTION_COMBO_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private Data Element Groups</td>
<td>F_DATAELEMENTGROUP_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Data Element Group Sets</td>
<td>F_DATAELEMENTGROUPSET_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private Data Set</td>
<td>F_DATASET_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Document</td>
<td>F_DOCUMENT_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private Indicator</td>
<td>F_INDICATOR_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Indicator Group</td>
<td>F_INDICATORGROUP_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private Indicator Group Sets</td>
<td>F_INDICATORGROUPSET_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Option Set</td>
<td>F_OPTIONSET_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private Organisation Unit Group</td>
<td>F_ORGUNITGROUP_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Organisation Unit Group Set</td>
<td>F_ORGUNITGROUPSET_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private Program</td>
<td>F_PROGRAM_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Report</td>
<td>F_REPORT_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private SQL View</td>
<td>F_SQLVIEW_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private Tracked Entity Attribute</td>
<td>F_TRACKED_ENTITY_ATTRIBUTE_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private User Group</td>
<td>F_USERGROUP_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Private User Role</td>
<td>F_USERROLE_PRIVATE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Private Validation Rule Group</td>
<td>F_VALIDATIONRULEGROUP_PRIVATE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Program Attribute</td>
<td>F_PROGRAM_ATTRIBUTE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Program Indicator</td>
<td>F_ADD_PROGRAM_INDICATOR</td>
</tr>
<tr class="odd">
<td>Add/Update Program Stage</td>
<td>F_PROGRAMSTAGE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Program Stage Section</td>
<td>F_PROGRAMSTAGE_SECTION_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Category Option Group</td>
<td>F_CATEGORY_OPTION_GROUP_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Category Option Group Set</td>
<td>F_CATEGORY_OPTION_GROUP_SET_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Chart</td>
<td>F_CHART_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Dashboard</td>
<td>F_DASHBOARD_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Data Element</td>
<td>F_DATAELEMENT_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Data Element Category</td>
<td>F_CATEGORY_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Data Element Category Combo</td>
<td>F_CATEGORY_COMBO_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Data Element Category Option</td>
<td>F_CATEGORY_OPTION_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Data Element Category Option</td>
<td>F_CATEGORY_OPTION_DELETE</td>
</tr>
<tr class="even">
<td>Add/Update Public Data Element Category Option Combo</td>
<td>F_CATEGORY_OPTION_COMBO_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Data Element Groups</td>
<td>F_DATAELEMENTGROUP_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Data Element Group Sets</td>
<td>F_DATAELEMENTGROUPSET_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Data Set</td>
<td>F_DATASET_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Document</td>
<td>F_DOCUMENT_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Indicator</td>
<td>F_INDICATOR_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Indicator Group</td>
<td>F_INDICATORGROUP_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Indicator Group Sets</td>
<td>F_INDICATORGROUPSET_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Option Set</td>
<td>F_OPTIONSET_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Organisation Unit Group</td>
<td>F_ORGUNITGROUP_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Organisation Unit Group Set</td>
<td>F_ORGUNITGROUPSET_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Program</td>
<td>F_PROGRAM_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Report</td>
<td>F_REPORT_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Report Table</td>
<td>F_REPORTTABLE_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public SQL View</td>
<td>F_SQLVIEW_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public Tracked Entity Attribute</td>
<td>F_TRACKED_ENTITY_ATTRIBUTE_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public User Group</td>
<td>F_USERGROUP_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Public User Role</td>
<td>F_USERROLE_PUBLIC_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Public Validation Rule Group</td>
<td>F_VALIDATIONRULEGROUP_PUBLIC_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Section</td>
<td>F_SECTION_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Tracked Entity</td>
<td>F_TRACKED_ENTITY_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Tracked Entity Attributes</td>
<td>F_ALLOW_EDIT_TRACKED_ENTITY_ATTRIBUTES</td>
</tr>
<tr class="even">
<td>Add/Update Tracked Entity Data Value</td>
<td>F_TRACKED_ENTITY_DATAVALUE_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update Tracked Entity Instance</td>
<td>F_TRACKED_ENTITY_INSTANCE_ADD</td>
</tr>
<tr class="even">
<td>Add/Update User</td>
<td>F_USER_ADD</td>
</tr>
<tr class="odd">
<td>Add/Update User Group Managing Relationships</td>
<td>F_USERGROUP_MANAGING_RELATIONSHIPS_ADD</td>
</tr>
<tr class="even">
<td>Add/Update User Within Managed Group</td>
<td>F_USER_ADD_WITHIN_MANAGED_GROUP</td>
</tr>
<tr class="odd">
<td>Add/Update Validation Criteria</td>
<td>F_VALIDATIONCRITERIA_ADD</td>
</tr>
<tr class="even">
<td>Add/Update Validation Rule</td>
<td>F_VALIDATIONRULE_ADD</td>
</tr>
<tr class="odd">
<td>Add Validation Rule Groups</td>
<td>F_VALIDATIONRULEGROUP_ADD</td>
</tr>
<tr class="even">
<td>Administrate data mart</td>
<td>F_DATAMART_ADMIN</td>
</tr>
<tr class="odd">
<td>Administrate data mart</td>
<td>F_DATA_MART_ADMIN</td>
</tr>
<tr class="even">
<td>Administrate data visualizer</td>
<td>F_DV_ADMIN</td>
</tr>
<tr class="odd">
<td>Administrate GIS</td>
<td>F_GIS_ADMIN</td>
</tr>
<tr class="even">
<td>Approve data</td>
<td>F_APPROVE_DATA</td>
</tr>
<tr class="odd">
<td>Approve data at lower levels</td>
<td>F_APPROVE_DATA_LOWER_LEVELS</td>
</tr>
<tr class="even">
<td>Archive data</td>
<td>F_ARCHIVE_DATA</td>
</tr>
<tr class="odd">
<td>Change GIS Configuration</td>
<td>F_GIS_CONFIGURATION_UPDATE</td>
</tr>
<tr class="even">
<td>Change Location of Tracked Entity Instance</td>
<td>F_TRACKED_ENTITY_INSTANCE_CHANGE_LOCATION</td>
</tr>
<tr class="odd">
<td>Change order in Data Set</td>
<td>F_DATASET_ORDER_CHANGE</td>
</tr>
<tr class="even">
<td>Change system settings</td>
<td>F_SYSTEM_SETTING</td>
</tr>
<tr class="odd">
<td>Change Tracked Entity Instance Location</td>
<td>F_TRACKED_ENTITY_CHANGE_LOCATION</td>
</tr>
<tr class="even">
<td>Chart External Access</td>
<td>F_CHART_EXTERNAL</td>
</tr>
<tr class="odd">
<td>Concept Management</td>
<td>F_CONCEPT_MANAGEMENT</td>
</tr>
<tr class="even">
<td>Constant Management</td>
<td>F_CONSTANT_MANAGEMENT</td>
</tr>
<tr class="odd">
<td>Copy Excel Item</td>
<td>F_COPY_EXCEL_ITEM_ADMINISTRATION</td>
</tr>
<tr class="even">
<td>Create and download backup</td>
<td>F_DASHBOARD_DOWNLOAD_BACKUP</td>
</tr>
<tr class="odd">
<td>Data Admin Locking</td>
<td>F_DATAADMIN_LOCK</td>
</tr>
<tr class="even">
<td>Data Admin Unlocking</td>
<td>F_DATAADMIN_UNLOCK</td>
</tr>
<tr class="odd">
<td>Delete Attribute</td>
<td>F_ATTRIBUTE_DELETE</td>
</tr>
<tr class="even">
<td>Delete Category Option Group</td>
<td>F_CATEGORY_OPTION_GROUP_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Category Option Group Set</td>
<td>F_CATEGORY_OPTION_GROUP_SET_DELETE</td>
</tr>
<tr class="even">
<td>Delete Chart</td>
<td>F_CHART_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Concept</td>
<td>F_CONCEPT_DELETE</td>
</tr>
<tr class="even">
<td>Delete Constant</td>
<td>F_CONSTANT_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Data Element</td>
<td>F_DATAELEMENT_DELETE</td>
</tr>
<tr class="even">
<td>Delete Data Element Category</td>
<td>F_CATEGORY_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Data Element Category Combo</td>
<td>F_CATEGORY_COMBO_DELETE</td>
</tr>
<tr class="even">
<td>Delete Data Element Groups</td>
<td>F_DATAELEMENTGROUP_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Data Element Group Sets</td>
<td>F_DATAELEMENTGROUPSET_DELETE</td>
</tr>
<tr class="even">
<td>Delete Data Set</td>
<td>F_DATASET_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Data Value</td>
<td>F_DATAVALUE_DELETE</td>
</tr>
<tr class="even">
<td>Delete Document</td>
<td>F_DOCUMENT_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Excel Template</td>
<td>F_EXCEL_TEMPLATE_MANAGEMENT_DELETE</td>
</tr>
<tr class="even">
<td>Delete Facility</td>
<td>F_FRED_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Indicator</td>
<td>F_INDICATOR_DELETE</td>
</tr>
<tr class="even">
<td>Delete Indicator Group</td>
<td>F_INDICATORGROUP_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Indicator Group Sets</td>
<td>F_INDICATORGROUPSET_DELETE</td>
</tr>
<tr class="even">
<td>Delete Indicator Type</td>
<td>F_INDICATORTYPE_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Locale</td>
<td>F_LOCALE_DELETE</td>
</tr>
<tr class="even">
<td>Delete Min/max rule</td>
<td>F_DATAELEMENT_MINMAX_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Option Set</td>
<td>F_OPTIONSET_DELETE</td>
</tr>
<tr class="even">
<td>Delete Organisation Unit</td>
<td>F_ORGANISATIONUNIT_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Organisation Unit Group</td>
<td>F_ORGUNITGROUP_DELETE</td>
</tr>
<tr class="even">
<td>Delete Organisation Unit Group Set</td>
<td>F_ORGUNITGROUPSET_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Program</td>
<td>F_PROGRAM_DELETE</td>
</tr>
<tr class="even">
<td>Delete Program Attribute</td>
<td>F_PROGRAM_ATTRIBUTE_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Program Enrollment</td>
<td>F_PROGRAM_INSTANCE_DELETE</td>
</tr>
<tr class="even">
<td>Delete Program Stage</td>
<td>F_PROGRAMSTAGE_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Program Stage Section</td>
<td>F_PROGRAMSTAGE_SECTION_DELETE</td>
</tr>
<tr class="even">
<td>Delete Relationship Type</td>
<td>F_RELATIONSHIPTYPE_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Report</td>
<td>F_REPORT_DELETE</td>
</tr>
<tr class="even">
<td>Delete Report Table</td>
<td>F_REPORTTABLE_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Section</td>
<td>F_SECTION_DELETE</td>
</tr>
<tr class="even">
<td>Delete SMS</td>
<td>F_MOBILE_DELETE_SMS</td>
</tr>
<tr class="odd">
<td>Delete SQL View</td>
<td>F_SQLVIEW_DELETE</td>
</tr>
<tr class="even">
<td>Delete Tracked Entity</td>
<td>F_TRACKED_ENTITY_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Tracked Entity Attribute</td>
<td>F_TRACKED_ENTITY_ATTRIBUTE_DELETE</td>
</tr>
<tr class="even">
<td>Delete Tracked Entity Attribute Value</td>
<td>F_TRACKED_ENTITY_ATTRIBUTEVALUE_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Tracked Entity Data Value</td>
<td>F_TRACKED_ENTITY_DATAVALUE_DELETE</td>
</tr>
<tr class="even">
<td>Delete Tracked Entity Form</td>
<td>F_TRACKED_ENTITY_FORM_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Tracked Entity Instance</td>
<td>F_TRACKED_ENTITY_INSTANCE_DELETE</td>
</tr>
<tr class="even">
<td>Delete Tracked Entity Instance Comment</td>
<td>F_TRACKED_ENTITY_COMMENT_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Tracked Entity Instance Visit</td>
<td>F_PROGRAM_STAGE_INSTANCE_DELETE</td>
</tr>
<tr class="even">
<td>Delete Tracked Entity Relationship</td>
<td>F_RELATIONSHIP_DELETE</td>
</tr>
<tr class="odd">
<td>Delete User</td>
<td>F_USER_DELETE</td>
</tr>
<tr class="even">
<td>Delete User Group</td>
<td>F_USERGROUP_DELETE</td>
</tr>
<tr class="odd">
<td>Delete User Role</td>
<td>F_USERROLE_DELETE</td>
</tr>
<tr class="even">
<td>Delete User Within Managed Group</td>
<td>F_USER_DELETE_WITHIN_MANAGED_GROUP</td>
</tr>
<tr class="odd">
<td>Delete Validation Criteria</td>
<td>F_VALIDATIONCRITERIA_DELETE</td>
</tr>
<tr class="even">
<td>Delete Validation Rule</td>
<td>F_VALIDATIONRULE_DELETE</td>
</tr>
<tr class="odd">
<td>Delete Validation Rule Group</td>
<td>F_VALIDATIONRULEGROUP_DELETE</td>
</tr>
<tr class="even">
<td>Eliminate duplicate data elements</td>
<td>F_ELIMINATE_DUPLICATE_DATA_ELEMENTS</td>
</tr>
<tr class="odd">
<td>Excel Reporting Administration</td>
<td>F_EXCEL_REPORT_ADMINISTRATION</td>
</tr>
<tr class="even">
<td>Execute SQL View</td>
<td>F_SQLVIEW_EXECUTE</td>
</tr>
<tr class="odd">
<td>Export Activity Plan to XLS file</td>
<td>F_ACTIVITY_PLAN_EXPORT</td>
</tr>
<tr class="even">
<td>Export data</td>
<td>F_EXPORT_DATA</td>
</tr>
<tr class="odd">
<td>Export events</td>
<td>F_EXPORT_EVENTS</td>
</tr>
<tr class="even">
<td>Export meta-Data</td>
<td>F_METADATA_EXPORT</td>
</tr>
<tr class="odd">
<td>Generate Activity Plans</td>
<td>F_GENERATE_ACTIVITY_PLANS</td>
</tr>
<tr class="even">
<td>Generate min-max values</td>
<td>F_GENERATE_MIN_MAX_VALUES</td>
</tr>
<tr class="odd">
<td>Generate Program Statistics Report</td>
<td>F_GENERATE_STATISTICAL_PROGRAM_REPORT</td>
</tr>
<tr class="even">
<td>Generate Program Summary Report</td>
<td>F_GENERATE_PROGRAM_SUMMARY_REPORT</td>
</tr>
<tr class="odd">
<td>Generate Tracked Entity Tabular report</td>
<td>F_GENERATE_BENEFICIARY_TABULAR_REPORT</td>
</tr>
<tr class="even">
<td>Import data</td>
<td>F_IMPORT_DATA</td>
</tr>
<tr class="odd">
<td>Import events</td>
<td>F_IMPORT_EVENTS</td>
</tr>
<tr class="even">
<td>Import from other systems</td>
<td>F_IMPORT_OTHER_SYSTEMS</td>
</tr>
<tr class="odd">
<td>Import GML</td>
<td>F_IMPORT_GML</td>
</tr>
<tr class="even">
<td>Import meta-Data</td>
<td>F_METADATA_IMPORT</td>
</tr>
<tr class="odd">
<td>Insert custom Java script and CSS</td>
<td>F_INSERT_CUSTOM_JS_CSS</td>
</tr>
<tr class="even">
<td>List Excel Template</td>
<td>F_EXCEL_TEMPLATE_MANAGEMENT_LIST</td>
</tr>
<tr class="odd">
<td>List Tracked Entity Instance</td>
<td>F_TRACKED_ENTITY_INSTANCE_LIST</td>
</tr>
<tr class="even">
<td>List User Groups</td>
<td>F_USERGROUP_LIST</td>
</tr>
<tr class="odd">
<td>List User Roles</td>
<td>F_USERROLE_LIST</td>
</tr>
<tr class="even">
<td>Load event reminder messages</td>
<td>F_PROGRAM_STAGE_INSTANCE_REMINDER</td>
</tr>
<tr class="odd">
<td>Load Tracked Entity Instance History</td>
<td>F_TRACKED_ENTITY_INSTANCE_HISTORY</td>
</tr>
<tr class="even">
<td>Lock Data Set</td>
<td>F_DATASET_LOCK</td>
</tr>
<tr class="odd">
<td>Manage integration routes</td>
<td>F_MANAGE_INTEGRATION_ROUTES</td>
</tr>
<tr class="even">
<td>Manage Program Indicators</td>
<td>F_PROGRAM_INDICATOR_MANAGEMENT</td>
</tr>
<tr class="odd">
<td>Manage Program Rule</td>
<td>F_PROGRAM_RULE_MANAGEMENT</td>
</tr>
<tr class="even">
<td>Manage Tracked Entities</td>
<td>F_TRACKED_ENTITY_MANAGEMENT</td>
</tr>
<tr class="odd">
<td>Manage Tracked Entity Instance Reminders</td>
<td>F_TRACKED_ENTITY_INSTANCE_REMINDER_MANAGEMENT</td>
</tr>
<tr class="even">
<td>Map External Access</td>
<td>F_MAP_EXTERNAL</td>
</tr>
<tr class="odd">
<td>Merge organisation units</td>
<td>F_MERGE_ORGANISATION_UNITS</td>
</tr>
<tr class="even">
<td>Move Organisation Unit</td>
<td>F_ORGANISATIONUNIT_MOVE</td>
</tr>
<tr class="odd">
<td>Multiple Individual Data Entry</td>
<td>F_NAME_BASED_DATA_ENTRY</td>
</tr>
<tr class="even">
<td>Option Set Management</td>
<td>F_OPTIONSET_MANAGEMENT</td>
</tr>
<tr class="odd">
<td>Organisation Unit Registration</td>
<td>F_ORGANISATION_REGISTRATION</td>
</tr>
<tr class="even">
<td>Perform maintenance tasks</td>
<td>F_PERFORM_MAINTENANCE</td>
</tr>
<tr class="odd">
<td>Program Enrollment</td>
<td>F_PROGRAM_ENROLLMENT</td>
</tr>
<tr class="even">
<td>Program Event Management</td>
<td>F_PROGRAM_INSTANCE_MANAGEMENT</td>
</tr>
<tr class="odd">
<td>Program Stage Section Management</td>
<td>F_PROGRAMSTAGE_SECTION_MANAGEMENT</td>
</tr>
<tr class="even">
<td>Program Tracking Management</td>
<td>F_PROGRAM_TRACKING_MANAGEMENT</td>
</tr>
<tr class="odd">
<td>Program Un-enrollment</td>
<td>F_PROGRAM_UNENROLLMENT</td>
</tr>
<tr class="even">
<td>Prune organisation units</td>
<td>F_PRUNE_ORGANISATION_UNITS</td>
</tr>
<tr class="odd">
<td>Remove Empty Tracked Entity Events</td>
<td>F_TRACKED_ENTITY_REMOVE_EMPTY_EVENTS</td>
</tr>
<tr class="even">
<td>Rename Excel Template file</td>
<td>F_EXCEL_TEMPLATE_MANAGEMENT_RENAME</td>
</tr>
<tr class="odd">
<td>Report Table External Access</td>
<td>F_REPORTTABLE_EXTERNAL</td>
</tr>
<tr class="even">
<td>Run validation</td>
<td>F_RUN_VALIDATION</td>
</tr>
<tr class="odd">
<td>Scheduling Administration</td>
<td>F_SCHEDULING_ADMIN</td>
</tr>
<tr class="even">
<td>Scheduling case aggregate query builder</td>
<td>F_SCHEDULING_CASE_AGGREGATE_QUERY_BUILDER</td>
</tr>
<tr class="odd">
<td>Scheduling send messages</td>
<td>F_SCHEDULING_SEND_MESSAGE</td>
</tr>
<tr class="even">
<td>Search Activity Plan</td>
<td>F_ACTIVITY_PLAN</td>
</tr>
<tr class="odd">
<td>Search events without registration</td>
<td>F_PROGRAM_STAGE_INSTANCE_SEARCH</td>
</tr>
<tr class="even">
<td>Search events with registration</td>
<td>F_PROGRAM_TRACKING_SEARCH</td>
</tr>
<tr class="odd">
<td>Search Tracked Entity Instance</td>
<td>F_TRACKED_ENTITY_INSTANCE_SEARCH</td>
</tr>
<tr class="even">
<td>Search Tracked Entity Instance in All Org Units</td>
<td>F_TRACKED_ENTITY_INSTANCE_SEARCH_IN_ALL_ORGUNITS</td>
</tr>
<tr class="odd">
<td>See API Module</td>
<td>M_dhis-web-api</td>
</tr>
<tr class="even">
<td>See Apps Maintenance module</td>
<td>M_dhis-web-maintenance-appmanager</td>
</tr>
<tr class="odd">
<td>See Browser Cache Cleaner module</td>
<td>M_dhis-web-cache-cleaner</td>
</tr>
<tr class="even">
<td>See Dashboard integration module</td>
<td>M_dhis-web-dashboard-integration</td>
</tr>
<tr class="odd">
<td>See Dashboard module</td>
<td>M_dhis-web-dashboard</td>
</tr>
<tr class="even">
<td>See Data Administration module</td>
<td>M_dhis-web-maintenance-dataadmin</td>
</tr>
<tr class="odd">
<td>See Data Elements and Indicators Maintenance module</td>
<td>M_dhis-web-maintenance-datadictionary</td>
</tr>
<tr class="even">
<td>See Data Entry module</td>
<td>M_dhis-web-dataentry</td>
</tr>
<tr class="odd">
<td>See Data Mart module</td>
<td>M_dhis-web-datamart</td>
</tr>
<tr class="even">
<td>See Data Set Maintenance module</td>
<td>M_dhis-web-maintenance-dataset</td>
</tr>
<tr class="odd">
<td>See Data Visualizer module</td>
<td>M_dhis-web-visualizer</td>
</tr>
<tr class="even">
<td>See Event Capture module</td>
<td>M_dhis-web-event-capture</td>
</tr>
<tr class="odd">
<td>See Event Reports module</td>
<td>M_dhis-web-event-reports</td>
</tr>
<tr class="even">
<td>See Event Visualizer module</td>
<td>M_dhis-web-event-visualizer</td>
</tr>
<tr class="odd">
<td>See Excel Report module</td>
<td>M_dhis-web-excel-reporting</td>
</tr>
<tr class="even">
<td>See Export Data Mart Module</td>
<td>M_dhis-web-exportdatamart</td>
</tr>
<tr class="odd">
<td>See FRED API Module</td>
<td>M_dhis-web-api-fred</td>
</tr>
<tr class="even">
<td>See GIS module</td>
<td>M_dhis-web-gis</td>
</tr>
<tr class="odd">
<td>See GIS module</td>
<td>M_dhis-web-mapping</td>
</tr>
<tr class="even">
<td>See Import-Export module</td>
<td>M_dhis-web-importexport</td>
</tr>
<tr class="odd">
<td>See Individual Records</td>
<td>M_dhis-web-caseentry</td>
</tr>
<tr class="even">
<td>See Light module</td>
<td>M_dhis-web-light</td>
</tr>
<tr class="odd">
<td>See Line-listing DataEntry module</td>
<td>M_dhis-web-dataentry-national</td>
</tr>
<tr class="even">
<td>See Mobile Maintenance module</td>
<td>M_dhis-web-maintenance-mobile</td>
</tr>
<tr class="odd">
<td>See NRHM Reports module</td>
<td>M_dhis-web-reports</td>
</tr>
<tr class="even">
<td>See Organisation Unit Maintenance module</td>
<td>M_dhis-web-maintenance-organisationunit</td>
</tr>
<tr class="odd">
<td>See Pivot Table module</td>
<td>M_dhis-web-pivot</td>
</tr>
<tr class="even">
<td>See Report module</td>
<td>M_dhis-web-reporting</td>
</tr>
<tr class="odd">
<td>See Settings Maintenance module</td>
<td>M_dhis-web-maintenance-settings</td>
</tr>
<tr class="even">
<td>See Smartphone module</td>
<td>M_dhis-web-mobile</td>
</tr>
<tr class="odd">
<td>See SMS module</td>
<td>M_dhis-web-sms</td>
</tr>
<tr class="even">
<td>See Tracked Entity And Programs module</td>
<td>M_dhis-web-maintenance-program</td>
</tr>
<tr class="odd">
<td>See Tracker Capture module</td>
<td>M_dhis-web-tracker-capture</td>
</tr>
<tr class="even">
<td>See User Maintenance module</td>
<td>M_dhis-web-maintenance-user</td>
</tr>
<tr class="odd">
<td>See Validation Analysis module</td>
<td>M_dhis-web-validationrule-local-in</td>
</tr>
<tr class="even">
<td>See Validation Rule module</td>
<td>M_dhis-web-validationrule</td>
</tr>
<tr class="odd">
<td>Send message</td>
<td>F_SEND_MESSAGE</td>
</tr>
<tr class="even">
<td>Send SMS</td>
<td>F_MOBILE_SENDSMS</td>
</tr>
<tr class="odd">
<td>Set mobile settings</td>
<td>F_MOBILE_SETTINGS</td>
</tr>
<tr class="even">
<td>Single Event Without Registration Data Entry</td>
<td>F_ANONYMOUS_DATA_ENTRY</td>
</tr>
<tr class="odd">
<td>Single Event With Registration Data Entry</td>
<td>F_SINGLE_EVENT_DATA_ENTRY</td>
</tr>
<tr class="even">
<td>Sql View External Access</td>
<td>F_SQLVIEW_EXTERNAL</td>
</tr>
<tr class="odd">
<td>Sql View Management</td>
<td>F_SQLVIEW_MANAGEMENT</td>
</tr>
<tr class="even">
<td>Tracked Entity Aggregation</td>
<td>F_TRACKED_ENTITY_AGGREGATION</td>
</tr>
<tr class="odd">
<td>Tracked Entity Form Management</td>
<td>F_TRACKED_ENTITY_FORM_MANAGEMENT</td>
</tr>
<tr class="even">
<td>Tracked Entity Instance Dashboard</td>
<td>F_TRACKED_ENTITY_INSTANCE_DASHBOARD</td>
</tr>
<tr class="odd">
<td>Tracked Entity Instance Management</td>
<td>F_TRACKED_ENTITY_INSTANCE_MANAGEMENT</td>
</tr>
<tr class="even">
<td>Tracked Entity Relationship Management</td>
<td>F_RELATIONSHIP_MANAGEMENT</td>
</tr>
<tr class="odd">
<td>Update Facility</td>
<td>F_FRED_UPDATE</td>
</tr>
<tr class="even">
<td>Update Organisation Unit Level</td>
<td>F_ORGANISATIONUNITLEVEL_UPDATE</td>
</tr>
<tr class="odd">
<td>Update Program Rule</td>
<td>F_PROGRAM_RULE_UPDATE</td>
</tr>
<tr class="even">
<td>Update Relationship Type</td>
<td>F_RELATIONSHIPTYPE_UPDATE</td>
</tr>
<tr class="odd">
<td>Update Tracked Entities</td>
<td>F_TRACKED_ENTITY_UPDATE</td>
</tr>
<tr class="even">
<td>Update Tracked Entity Attribute</td>
<td>F_TRACKED_ENTITY_ATTRIBUTE_EDIT</td>
</tr>
<tr class="odd">
<td>Upload Excel Template</td>
<td>F_EXCEL_TEMPLATE_MAMAGEMENT_UPLOAD</td>
</tr>
<tr class="even">
<td>View and Search Tracked Entity Attributes and Identifiers</td>
<td>F_ACCESS_TRACKED_ENTITY_ATTRIBUTES</td>
</tr>
<tr class="odd">
<td>View data browser</td>
<td>F_VIEW_DATABROWSER</td>
</tr>
<tr class="even">
<td>View Program Stage Completeness Report</td>
<td>F_PROGRAM_STAGE_COMPLETENESS</td>
</tr>
<tr class="odd">
<td>View program tracking</td>
<td>F_PROGRAM_TRACKING_LIST</td>
</tr>
<tr class="even">
<td>View Report</td>
<td>F_REPORT_VIEW</td>
</tr>
<tr class="odd">
<td>View Tracked Entity Attribute</td>
<td>F_TRACKED_ENTITY_ATTRIBUTE_VIEW</td>
</tr>
<tr class="even">
<td>View unapproved data</td>
<td>F_VIEW_UNAPPROVED_DATA</td>
</tr>
<tr class="odd">
<td>View User</td>
<td>F_USER_VIEW</td>
</tr>
<tr class="even">
<td>View User Group Managing Relationships</td>
<td>F_USERGROUP_MANAGING_RELATIONSHIPS_VIEW</td>
</tr>
<tr class="odd">
<td>View User Within Managed Group</td>
<td>F_USER_VIEW_WITHIN_MANAGED_GROUP</td>
</tr>
<tr class="even">
<td>Delete tracked entity instance and associated enrollments and events</td>
<td>F_TEI_CASCADE_DELETE</td>
</tr>
<tr class="odd">
<td>Delete enrollment and associated events</td>
<td>F_ENROLLMENT_CASCADE_DELETE</td>
</tr>
<tr class="even">
<td>Edit expired data</td>
<td>F_EDIT_EXPIRED</td>
</tr>
</tbody>
</table>

# 关于对象共享 { #sharing }

本章讨论DHIS2中的实体共享功能。

## 共享对象 { #sharing-of-objects }

DHIS2中的许多对象（例如报告，图表，地图和指标）都可以
共享。 DHIS2支持元数据共享或数据共享。分享
元数据意味着使对象（例如报告）可供阅读或
修改为一组用户或每个人。数据共享方式
将捕获的实际数据提供给其他人，并控制谁
可以捕获此类数据。例如报告，共享
单击旁边的“共享设置”按钮可以打开对话框
列表中的每个报告。实施者可以使用此功能来允许
仅某些用户组可以访问某些对象。用户可以使用
决定他们想要共享对象的功能（例如数据透视）
表格，图表，仪表板等）。

如果特定类的对象支持共享，则将出现一个对话框
称为“共享设置”，通常可以通过单击
对象的名称或在分析工具中，通过图标（共享
和其他人）。访问共享设置后，
您想要共享的对象，将出现一个类似于以下对话框。
如图所示。

![](resources/images/maintainence/mtn_sharing_dialog.png)

您可以与所有人或多个用户组共享报告。
可以启用“外部访问”以允许共享此资源
所有人，包括无法登录DHIS2的用户。这是
与外部系统共享公共资源很有用。请注意，如果
对象在外部共享，那么任何拥有
访问无需提供任何登录即可提供资源的URL
证书。

在“公共访问”旁边，您可以在下面选择公共访问选项
“ METADATA”：“无权访问”，“只能查看”或“可以编辑和查看”，以及
在“数据”下：“无访问权限”，“可以查看数据”，“可以捕获数据”。上市
访问是指登录到系统的用户。也编辑
意味着删除报告。

要与群组共享，只需开始输入群组名称和
“搜索用户组”输入字段，然后选择所需的组。
单击输入字段旁边的“ +”图标以与该组共享。
您可以为每个组设置一个访问选项，类似于公共访问。

与用户组共享意味着该组中的所有用户都将获得
访问共享对象。要创建用户组，您可以转到
仪表板模块，然后单击“组”。这将带您进入清单
您可以在其中单击右上角的“添加新”。
仪表板模块中的每个人都可以创建用户组。

## 元数据共享和访问控制 { #metadata-sharing-and-access-control }

支持元数据共享的对象是指标，指标
组，指标组集，数据字典，数据集，程序，标准
报告，资源，报告表，图表，地图和用户组。在那些之中
对象，报告表，图表，地图和用户组向所有人开放
私下创建。私有意味着对象仅可用
您自己或潜在地针对多个用户组（如果您选择
共享对象。这些对象称为“打开”对象，并且
可以由所有用户创建。其余对象要求您
用户帐户有权创建它们。这些对象是
称为“非打开”对象。

可以授予用户创建可公开访问的权限
对象或可私有访问的对象。为了公开创建
用户的可访问对象（任何人均可查看或编辑）
帐户必须有权这样做。例如，创建一个
公开图表，您的用户必须具有“创建公开图表”
授权。创建私有对象的权限仅适用
非开放对象。例如，允许用户创建指标
仅该用户而非所有人（该用户）可以访问
可以被授予“创建私有指标”权限。

与其他人共享一个未打开的对象，然后让她编辑
对象要求该人的用户帐户具有以下权限：
更新授予的那种对象。例如，如果您想让
另一个人编辑您的指标，该人的用户帐户必须具有
授予“更新指示器”权限。这不适用于公开
对象。

创建新对象时，该对象将自动变为
所有人（如果您的用户帐户有权创建公共帐户）
对象。举例来说，如果您创建一个标准报告，并且拥有
授予“创建公共标准报告”的权限，该报告将
对所有人可见。如果您没有授予该权限
该报告仅对您自己可见。创建完一个
对象，您可以导航到“共享设置”对话框并设置您的
所需的访问控制级别。

如果您需要一个可以查看绝对所有对象的用户帐户
您可以使用“ ALL”权限创建用户角色，并将用户分配给
那个角色。如果需要在对象的“完整”视图之间切换
和对象的“个人”视图，建议创建两个用户
帐户，其中一个帐户分配了“ ALL”权限，另一个帐户则没有。

## 应用了元数据共享 { #metadata-sharing-applied }

元数据共享功能在几种情况下很有用。一
用例正在为具有以下条件的全球组织设置DHIS2实例：
在多个国家/地区开展业务。通常，组织有一套
适用于所有国家的全球数据集，指标和报告
国家，而所有国家/地区都需要针对特定国家/地区
数据集，指标和报告。在这种情况下以下
方法可能有效：

-   为全球人员设置一个用户组。

-   为每个国家/地区的人员设置用户组。

-   创建全局数据集和报告，让每个人都可以查看它们，并且只能对全局用户组进行编辑。

-   创建特定国家/地区的数据集和报告，使其仅对国家用户组和全球用户组可见和可编辑。

这样，可以查看和分析全球指标和报告
由每个人，但仅由全局用户组维护。的
可以查看特定国家的数据集，指标和报告，并
由国家和全球人员维护，而看不见或
对组织中其他国家的系统产生影响。

类似的方法可能适用于有多个捐赠者的情况
用户所在国家/地区的供资机构和实施伙伴
可以为每个实体设置组。这样每个
实施合作伙伴可以在他们的内部创建并共享他们的报告
组织，而不影响或允许他人访问。报告书
也可以在结束时与主管和资助机构共享
报告期。

另一个用例是具有多个健康状况的国家卫生部门
程式。通常，需要有常规报告和
为部门制定图表，同时允许制定健康计划
供内部使用的特定报告和图表。这可以通过
为每个健康程序创建用户组。后来，在开发时
报告和图表，可以使这些视图和图表对
仅程序用户组。这样，报告将不可见
其他程序和用户。这是有益的，因为报告是
保留在程序内部，并且因为可见的报告列表
其他用户则更短，更相关。

## 数据共享和访问控制 { #data-sharing-and-access-control }

支持数据共享的对象是数据集，跟踪实体
类型，程序和程序阶段。数据共享的目的是
控制哪些用户可以捕获数据，哪些用户可以查看数据
被抓

### 基于事件的程序的数据共享 { #data-sharing-for-event-based-programs }

适用于被跟踪实体类型，程序和程序的对象类型
阶段。在事件捕获中使用单个事件程序时，用户
必须具有“ DATA：可以查看数据”共享级别才能看到
程序及其数据。没有此共享级别，该程序及其
用户将看不到数据。使用跟踪器程序时
在跟踪器捕获中，用户需要具有“数据：可以查看数据”才能
跟踪的实体类型和程序。如果是跟踪程序，
在每个程序阶段，用户还将需要“ DATA：可以查看数据”
以便能够查看程序中的数据。捕获
数据用户需要“数据：可以捕获数据”共享级别。

> **注意**
>
> 要查看和捕获程序的数据，数据捕获用户还需要报告已将程序分配到的组织单位。

<table>
<caption>Data sharing for tracker programs</caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 30%" />
<col style="width: 30%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="header">
<th>Object type</th>
<th>Can view data</th>
<th>Can capture data</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Tracked entity type</strong></p></td>
<td><ul>
<li><p>Search for tracked entities with this tracked entity type.</p></li>
<li><p>See tracked entity type attribute values for this tracked entity type.</p></li>
</ul></td>
<td><ul>
<li><p>Edit visible tracked entity attributes for tracked entity instances of this type.</p></li>
<li><p>Register/create new tracked entity instances of this type.</p></li>
<li><p>Delete tracked entity instances of this type.</p></li>
<li><p>Deactivate/reactivate tracked entity instances of this type.</p></li>
</ul></td>
<td></td>
</tr>
<tr class="even">
<td><p><strong>Program</strong></p></td>
<td><ul>
<li><p>Search for tracked entities within this program.</p></li>
<li><p>See tracked entity attributes specific to this program.</p></li>
<li><p>See enrollment details for the program.</p></li>
<li><p>See notes for the enrollment.</p></li>
</ul></td>
<td><ul>
<li><p>Enroll into the program.</p></li>
<li><p>Edit enrollment details for the program.</p></li>
<li><p>Complete/reopen enrollments into the program.</p></li>
<li><p>Add notes for the program.</p></li>
<li><p>Edit relationships for the program.</p></li>
<li><p>Send message to tracked entity instance.</p></li>
<li><p>Delete enrollments in the program.</p></li>
</ul></td>
<td><p>Both &quot;Can view data&quot; and &quot;Can capture data&quot; also requires the user to have &quot;Can view data&quot; for the tracked entity type.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Program stage</strong></p></td>
<td><ul>
<li><p>See the program stage and its events and data within an enrollment.</p></li>
<li><p>See the program stage notes.</p></li>
</ul></td>
<td><ul>
<li><p>Add/schedule/refer a new event within the program stage.</p></li>
<li><p>Complete/reopen the events within the program stage.</p></li>
<li><p>Edit tracked entity data values within events in the program stage.</p></li>
<li><p>Add notes for events in the program stage.</p></li>
<li><p>Delete events in the program stage.</p></li>
</ul></td>
<td><p>Both &quot;Can view data&quot; and &quot;Can capture data&quot; also requires the user to have &quot;Can view data&quot; for the program and the tracked entity type.</p></td>
</tr>
</tbody>
</table>

<table>
<caption>Data sharing for single event programs</caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 30%" />
<col style="width: 30%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="header">
<th>Object type</th>
<th>Can view data</th>
<th>Can capture data</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Program</strong></p></td>
<td><ul>
<li><p>See list of events within the program.</p></li>
<li><p>See tracked entity data values for events in the program.</p></li>
</ul></td>
<td><ul>
<li><p>Add new events into the program.</p></li>
<li><p>Edit data for events in the program.</p></li>
<li><p>Delete events in the program.</p></li>
</ul></td>
<td></td>
</tr>
</tbody>
</table>

### 数据集的数据共享 { #data-sharing-for-data-sets }

适用于数据集和类别选项的对象类型。什么时候
在数据输入应用程序中工作，用户需要具有“数据：可以捕获
数据”以查看和捕获数据集中的数据。
用户需要在“数据集”中输入字段：

1.  权限：F_DATAVALUE_ADD（可以添加数据值）

2.  数据集与“数据：可以捕获数据”共享

3.  数据元素与“元数据：可以查看”共享

4.  所选数据集使用的所有类别选项都与“数据：可以捕获数据”共享

> **注意**
>
> 要查看和捕获数据集的数据，数据捕获用户还需要报告已将数据集分配到的组织单位。

<table>
<caption>Data sharing for data sets</caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 30%" />
<col style="width: 30%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="header">
<th>Object type</th>
<th>Can view data</th>
<th>Can capture data</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Data set</strong></p></td>
<td><ul>
<li><p>View Data Set's data in Analytics</p></li>
</ul></td>
<td><ul>
<li><p>Can see DataSet in Data Entry app</p></li>
<li><p>Can save data for Data Set using API</p></li>
</ul></td>
<td><p>For saving data value in Data Entry app, users also need &quot;Can capture data&quot; for Category Options within selected Data Set.</p></td>
</tr>
<tr class="even">
<td><strong>CategoryOption</strong></td>
<td><ul>
<li><p>Can view data values belong to shared Category Option in analytics</p></li>
</ul></td>
<td><ul>
<li><p>Can save data value for input fields in Data Entry app which belongs to shared Category Options.</p></li>
</ul></td>
<td>For CategoryOptionCombo and AttributeOptionCombo to be writeable, all belongs CategoryOptions must be shared with &quot;Can capture data&quot;.</td>
</tr>
</tbody>
</table>

# 配置地图应用 { #gis_creating }

## 语境 { #gis_creating_context }

设置地图仅意味着存储组织的坐标
您要在数据库中的地图上显示的单位。座标经常
以专有格式分发，需要将其转换为
DHIS2可以理解的格式。 ESRI shapefile是最常见的
桌面应用程序的地理空间矢量数据格式。你可能会发现
您国家/地区的shapefile [此处]（http://www.diva-gis.org/gdata）或
网络上的许多其他地理空间数据存储库。一些工作
为了在DHIS2 GIS中使用这些坐标，需要完成操作，即
将数据转换为合适的格式并确保名称
包含在地理空间数据中的名称与
他们应该匹配的组织单位。

通过POINT只能编辑具有POINT几何类型的组织单位。
此时的维护应用程序。要修改POLYGON几何形状，请联系
GML导入功能。

To edit the POINT coordinates of an organisation unit, open the Maintenance App and navigate to the Organisation Unit section. Click on the Organisation Unit you would like to view or edit, you can search or filter the list from on the left-hand side of the screen. Once an organisation unit is selected, you can edit the **Latitude** and **Longitude** values to update the POINT coordinates. If the Organisation Unit has a POLYGON geometry, the coordinates cannot be edited.

如果要添加或更新大量单位的坐标，或者
如果您需要更新多边形的几何形状，则应使用自动GML
进口。以下部分说明了如何执行GML导入。

> **重要**
>
> DHIS2 支持的唯一坐标参考系统是 EPSG:4326，也称为地理经度/纬度。坐标必须以经度（东/西位置）在纬度（北/南位置）之前存储。如果您的矢量数据位于与 EPSG 4326 不同的 CRS 中，则需要先重新投影数据，然后再导入 DHIS2。

## 导入坐标 { #gis_creating_setup }

第1步-简化/概括您的地理数据

地理数据文件中的边界通常也非常准确
对于基于Web的GIS的需求尤其如此。这通常不影响
在本地系统上使用GIS文件时的性能，但这是
通常需要优化基于Web的地理数据
DHIS2的GIS系统。所有地理数据都需要从以下位置下载
服务器并在浏览器中呈现，因此，如果数据过于复杂，
DHIS2 GIS的性能将受到负面影响。这个
优化过程可以描述如下：

坐标：有效的小数位数（例如
23.02937874993774）应缩短为更少的数字（例如23.03）。
尽管这样做会导致地图上出现一些错误，但鉴于
在DHIS2中生成地图的通常比例（\> 1：50,000），损失
精度不应该引起注意。通常不超过四个
小数点后必须有有效数字。，
多边形：除了缩短有效位数之外，
实际点数也应减少到最佳水平。
找到这个最佳水平可能需要一些实验。减少
点的精度以及通过的点数
泛化，将导致多边形退化。但是，之后
进行一些实验，可以得出最佳的概括水平
发现，在视觉上可接受的多边形精度，以及
GIS的性能是最佳的。

对于多边形，我们需要使边界线的详细程度降低
删除一些线点。备份您的shapefile
在你开始之前。一种可能的方法是使用
[MapShaper]（http://www.mapshaper.org/）是一种在线工具，可以
用于概括地理数据。要使用MapShaper，只需上传
您的shapefile到站点。然后，在中央底部看到一个滑块
从0％开始。通常可以将其拖动到大约80％。
在左侧菜单中，您可以选中“显示原始行”以比较
结果，您可能需要尝试使用其他简化方法。
当您对结果感到满意时，请点击右上角的“导出”
角。然后检查名为“ Shapefile-
多边形”，点击“创建”，然后等待下载按钮出现。
现在，将这两个文件下载到本地计算机并覆盖
现有的。使用新的简化版继续进行下一步
shapefile。

第2步-将shapefile转换为GML

The recommended tool for geographical format conversions is called "ogr2ogr". This should be available for most Linux distributions `sudo apt-get install gdal-bin`. For Windows, go to <http://fwtools.maptools.org/>and download "FWTools", install it and open up the FWTools command shell. During the format conversion we also want to ensure that the output has the correct coordinate projection (called EPSG:4326 with geographic longitude and latitude). For a more detailed reference of geographic coordinates, please refer to this [site](http://www.epsg-registry.org/). If you have already reprojected the geographic data to the geographic latitude/longitude (EPSG:4326) system, there is no need to explicitly define the output coordinate system, assuming that `ogr2ogr` can determine the input spatial reference system. Note that most shapefiles are using the EPSG:4326 system. You can determine the spatial reference system by executing the following command.

    ogrinfo -al -so 文件名.shp

假设`ogrinfo`报告的预测为EPSG：27700，
我们可以通过执行以下命令将其转换为EPSG：4326
    命令。

    ogr2ogr -s_srs EPSG：27700 -t_srs EPSG：4326 -f GML filename.gml filename.shp

如果地理数据已经在EPSG：4326中，则只需进行转换
通过执行以下命令将shapefile转换为GML。

    ogr2ogr -f GML 文件名.gml 文件名.shp

您将在shapefile所在的文件夹中找到创建的GML文件。

第3步-准备GML文件

不幸的是，GML文件尚未准备好导入。在其中打开
强大的文本编辑器，例如Geany（Linux）或Notepad ++（Windows）。 GML是
基于XML的格式，这意味着您将识别常规XML
标签层次结构。在GML文件中，组织单位表示为
\ <gml:featureMember\>。在功能成员内部，我们通常会发现很多
属性，但是我们只是要导入它们的坐标。

In order to import geospatial data from the feature members of the GML input, DHIS2 must match each of them with an organisation unit in its database. The feature member element must, in other words, contain a reference to its corresponding organisation unit. The reference itself must be one of three possible DHIS2 identifiers: **uid**, **code** or **name**. The identifier of choice must be provided as a property for each feature member element. The importer will look for a property with the local name of either _Uid_, _Code_ or _Name_, e.g. "ogr:Name" or "anyPrefix:Code".

如果您的功能成员已经包含标识符的属性，则您
希望使用（例如区域名称）可以使用搜索和替换
在文本编辑器中将这些元素重命名为DHIS2将识别的名称
（请参见下表）。这通常是适用的工作流程
使用名称作为标识符时（源shapefile甚至GML
通常会包含其定义的每个区域的名称）。

 <table>
 <caption>GML导入支持的组织单位标识符</caption>
 <thead>
 <tr class="header">
 <th>匹配优先级</th>
 <th>标识符</th>
 <th>有效拼写</th>
 <th>保证唯一的</th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> 1 </td>
 <td> Uid </td>
 <td>uid，Uid，UID</td>
 <td>是</td>
 </tr>
 <tr class="even">
 <td> 2 </td>
 <td>代码</td>
 <td>代码，代码，代码</td>
 <td>否</td>
 </tr>
 <tr class="odd">
 <td> 3 </td>
 <td>名称</td>
<td> 名称，名称，名称</td>
 <td>否</td>
 </tr>
 </tbody>
 </table>

In the case of renaming properties one would usually find a tag named something like "ogr:DISTRICT_NAME", "ogr:NAME_1" and rename it to "ogr:Name". If using the _code_ or _uid_ identifiers on the other hand, looking up the correct values in the DHIS2 database and going through the GML file, adding the properties for each corresponding feature member might be necessary. In any of the cases it is important to realize that the identifier used must **uniquely** identify an organisation unit (e.g. if there are two organisation units in the database of the same name or code, these cannot be matched properly on either). As _uid_ is the only guaranteed-to-be-unique identifier it is the most robust choice. However, as matching on name is usually easier (given that the name is already part of your data), a viable approach to solving uniqueness conflicts can be to match any non-uniquely named organisation units on a different identifier (uid, preferably) and the rest on their names.

如上表所示，有一个匹配的优先级，即
为同一功能成员提供了两个或多个标识符，
匹配将在最高优先级的标识符上执行。另请注意
GML中可以使用的有效属性。命名空间前缀
不重要，因为仅使用本地名称。

执行 GML 文件准备的一个常见缺陷是语法或元素命名错误。因此，请确保 GML 文件的所有属性都使用正确的相应标签启动和终止。还要确保属性遵循属性名称的任一给定有效拼写。识别属性应该看起来像例如\<ogr:Name\> Moyamba 区\</ogr:Name\> , \<somePrefix:uid\> x7uuia898nJ\ </somePrefix:uid\> 或 \<CODE\> OU_12345\</CODE\> 。另一个常见错误是无法确保标识符完全匹配，尤其是在使用 _name_ 属性时。所有匹配都是在精确值上执行的，这意味着源 GML 文件中的“Moyamba”不会与数据库中的“Moyamba District”匹配。

简要查看标识符，并将其与
数据库中的相应值。如果它们看起来相当不错，
现在是时候在import-export模块中进行预览了。

转到服务->导入导出，选择“预览”，选择GML文件
然后点击“导入”。寻找新的/更新的组织单位。我们的
目的是向已经存在的组织单位添加坐标
在数据库中，因此我们需要尽可能多的更新和0个新更新。那些
列为新的将被创建为根单元并弄乱组织
DHIS2中的单位树。如果有任何列出为新的，请单击数字和
有问题的组织单位将显示在下面的列表中。如果有
与“”中的单位部门名称相比，有任何轻微的拼写错误
数据库-修复它们并再次进行预览。否则，请点击
列表下方的“全部放弃”按钮，然后“全部导入”按钮
在列表上方。

如果导入过程成功完成，您现在应该可以
利用DHIS2 GIS中的地理数据。如果没有，请检查日志
寻找提示并查找常见错误，例如：

\-名称在GML文件中重复。数据库中的名称列为
唯一，并且不接受两个具有相同名称的组织单位。

\-数据库中organizationalunit表中的“ shortname”列
varchar定义太小。将其增加到100。

\-GML文件中的特殊名称字符。确保将它们转换为
适当的XML等效项或转义序列。

\-输入GML格式错误，标签不匹配

# 配置报告功能 { #setting_up_reporting }

## 报告数据源 { #reporting_data_sources }

### 数据类型和汇总 { #types-of-data-and-aggregation }

在HIS术语的整体图中，DHIS2中的所有数据通常都是
称为汇总，因为它们是以下各项的汇总（例如每月汇总）
医护人员报告的医疗记录或某种服务记录
卫生设施。但是，DHIS2内部的聚合是主题
这里是关于如何在DHIS2中捕获原始数据（通过数据
输入或导入）随着时间的推移进一步汇总（例如，从每月到
季度值）或组织层次结构（例如来自工厂）
到地区值）。

#### 术语 { #terminology }

-   _原始数据_是指通过数据输入或数据导入注册到DHIS2中的数据，并且未经DHIS2聚合过程处理。所有这些数据都存储在名为 DataValue 的表（或 Java 对象，如果您愿意）中。

-   _Aggregated data_指的是DHIS2已经聚合的数据，这意味着它不再是原始数据，而是原始数据的某种聚合。

-   _Indicator values_ can also be understood as aggregated data, but these are special in the way that they are calculated based on user defined formulas (factor \* numerator/denominator). Indicator values are therefore processed data and not raw data, and are located in the aggregatedindicatorvalue table/object. Indicators are calculated at any level of the organisational hierarchy and these calculations are then based on the aggregated data values available at each level. A level attribute in the aggregateddatavalue table refers to the organisational level of the orgunit the value has been calculated for.

-   _Period 和 Period type_ 用于指定原始值或聚合值的时间维度，数据可以从一种时期类型聚合到另一种时期类型，例如从每月到每季度，或每天到每月。每个数据值都有一个周期，并且该周期具有一种周期类型。例如。 2009 年 1 月、2 月和 3 月期间的数据值，所有月度期间类型可以聚合在一起，形成一个期间为 2009 年第一季度和期间类型为季度的聚合数据值。

#### 汇总的基本规则 { #basic-rules-of-aggregation }

##### 什么加在一起 { #what-is-added-together }

Data (raw) can be registered at any organisational level, e.g. at national hospital at level 2, a health facility at level 5, or at a bigger PHC at level 4. This varies form country to country, but DHIS2 is flexible in allowing data entry or data import to take place at any level. This means that orgunits that themselves have children can register data, sometimes the same data elements as their children units. The basic rule of aggregation in DHIS2 is that _all raw data is aggregated together_, meaning data registered at a facility on level 5 is added to the data registered for a PHC at level 4.

用户/系统管理员/设计者应确保没有
正在进行重复的数据输入，例如在处输入的数据
级别4与报告的服务/访问次数不同
5级组织儿童。

> **注意**
>
>在某些情况下，您想拥有
在系统中复制数据，但以受控方式进行。例如。什么时候
您有两个不同的人口估计数据来源
5级流域人口数据和另一个人口数据源
基于人口普查数据的第4级（因为第5级流域的总和不是
始终与4级人口普查数据相同）。然后您可以指定使用
系统应使用的高级聚合设置（请参阅下一节）
例如不将5级人口数据添加到4级人口数据中，并且
3,2,1级人口数据汇总仅基于4级
数据，不包括5级数据。

##### 数据如何加在一起 { #how-data-gets-added-together }

数据如何聚合取决于聚合的维度（请参阅
再向下）。

沿着组织单位级别，维度总会被汇总；即简单地添加
一起。请注意，原始数据永远不会是百分比，因此可以是
总结在一起。指标值可以是百分比
不同（在每个级别上重新计算，从不总结）。

沿着时间维度，存在几种可能性，其中两种可能性最大
汇总的常用方法是求和与求平均值。用户可以指定
每个数据元素通过设置聚合使用哪种方法
运算符（请参阅下一节）。通常汇总每月服务数据
随着时间的流逝，例如一年中接种的疫苗数量是
该年每个月接种的疫苗总和。对于人口
设备，人员和其他通常称为半永久性的东西
数据，平均方法通常是一种使用的方法，例如'的数量
护士在某机构工作一年，将不会是两者之和
六个月的人员配置报告中报告的数字，但
两个数字的平均值。 “聚合”下的更多详细信息
运营商的。

#### 集合维度 { #dimensions-of-aggregation }

##### 组织单位和级别 { #organisational-units-and-levels }

组织单位用于表示“何处”维度
与数据值相关联。在DHIS2中，安排了组织单位
在层次结构中，通常对应于层次结构性质
组织或国家/地区的名称。组织单位级别对应于
层次结构中的不同级别。例如，一个国家可能是
组织成省，然后是地区，然后是设施，然后
次中心。该组织层次结构将具有五个级别。
在每个级别内，将存在许多组织单位。中
聚合过程中，数据从下层开始聚合
组织单位级别更高。取决于
聚合运算符，数据可以在给定范围内“求和”或“平均”
组织单位级别，以得出所有
较高级别中包含的组织单位
组织单位级别。例如，如果有十个区
给定数据包含在一个省和聚合运算符中
元素已定义为“ SUM”，即该省的总计
将被计算为单个十个值的总和
该省包含的地区。

##### 期 { #period }

句点用于表示与数据关联的“何时”维度
价值观。数周至数月，数月不等的数据可以轻松汇总
到季度，从季度到年份。 DHIS2使用已知的规则
这些不同的间隔包含在其他间隔中
实例2010年第一季度已知包含2010年1月，2010年2月
（2010年3月），以便汇总较小时间间隔的数据，
例如个星期，例如更长的时间间隔几个月。

##### 数据元素和类别 { #data-elements-and-categories }

数据元素维度指定“正在”记录的内容
特定数据值。数据元素类别实际上是退化的
数据元素维度的维度，用于分解
将数据元素维度划分为更精细的类别。数据元素
类别（例如“年龄”和“性别”）用于记录特定
数据元素，通常用于不同的人群。这些
然后可以使用类别来计算
类别和所有类别的总计。

#### 聚合运算符，聚合方法 { #aggregation-operators-methods-for-aggregation }

##### 和 { #sum }

“ sum”运算符仅计算所有
包含在特定的汇总矩阵中。例如，如果数据
在地区级别每月进行记录并汇总
到省的季度总数，所有地区包含的所有数据
给定的省份以及给定季度的所有星期都将被添加
一起获得总计。

##### 平均 { #average }

选择平均聚合运算符时，未加权
给定聚合矩阵内所有数据值的平均值为
计算。

重要的是要了解DHIS2如何处理
一般操作员的上下文。对于某些人来说这很普遍
组织单位不提交某些数据元素的数据。在
在平均运算符的上下文中，平均结果取自数字
数据元素中实际存在的数据元素（因此不是NULL）
给定的聚合矩阵。给定范围内是否有12个区
省，但其中只有10个提交了数据，平均
总计将由实际存在的这十个值得出
数据库，并且不会考虑缺少的值。

#### 高级聚合设置（聚合级别） { #advanced-aggregation-settings-aggregation-levels }

##### 聚合水平 { #aggregation-levels }

系统的正常规则是将所有原始数据汇总在一起
向上移动组织层次结构，系统假设数据
通过输入提供给以下用户的相同服务，该条目不会重复
在两个设施级别都具有相同的客户，
更高级别的“汇总”（所有设施的总和）数量。这是
当相同的服务是
提供给不同设施的客户/集水区
5级和PHC（相同设施的父级）在4级。
这样，第5层的设施和第4层的PHC可以共享同一设施
数据元素，然后简单地将其数字相加即可得出总数
地理区域中提供的服务。

有时不希望这样的聚合，仅仅是因为它会
表示重复有关同一人群的数据。这是当
您有两个不同组织单位级别的两个不同数据源。
例如。设施的集水人口可以来自不同的地方
来源比地区人口多，因此设施的总和
流域人口与以下地区提供的地区人口不符
例如人口普查数据。如果是这种情况，我们实际上希望复制
系统中的数据，以便每个级别可以具有与
可能，但是我们不想汇总这些数据源
一起。

在“数据元素”部分，您可以编辑数据元素，对于每个
它们指定每个级别的汇总方式。在这种情况下
如上所述，我们需要告诉系统不要包含设施数据
高于该级别（即该级别）的任何聚合中的人口
以上，在这种情况下，各区已登记了他们的人口
直接作为原始数据。然后应使用地区人口数据
在以上（包括区级）的所有级别上，而设施
级别应使用自己的数据。

##### 如何编辑数据元素聚合 { #how-to-edit-data-element-aggregation }

这是通过称为聚合级别和在
编辑数据元素屏幕的末尾有一个复选框
聚合级别。如果您勾选那个，您将看到一个清单
聚合级别，可用和已选择。默认是没有
定义了聚合级别，那么层次结构中的所有原始数据将是
加在一起。为了指定上述规则，并给出了
国家，省，地区，设施等级：选择设施和
区为您的聚合级别。基本上你选择你在哪里
数据。选择设施意味着设施将使用来自
设施（因为这是最低级别）。选择地区
表示在汇总时将使用区域级别的原始数据
区域级别的数据（因此该日期不会进行汇总
级别），而设施数据将不属于汇总数据
地区值。在省级区域汇总数据时
将使用最高级别的原始数据，因为这是最高的可用数据
已选择聚合级别。同样针对国家/地区级别
将使用地区原始数据。只是重复一下，如果我们没有指定
该区级别是一个聚合级别，然后是设施数据和
地区数据将被加在一起并导致重复
（双）地区和以上所有级别的人口数据。

### 资源表 { #resource-tables }

资源表提供有关以下方面的其他信息：
数据格式非常适合外部工具组合
与数据值表。通过将数据值表与这些
资源表可以轻松地沿着数据元素类别进行汇总
维度或数据元素/指标/组织单位组的维度。
例如。通过使用类别选项male或标记所有数据值
女性，并在另一列“性别”中提供该信息
根据收集的数据值得出的男性和女性小计
类别选项组合，例如（male，\ <5) and (male,\> 5）。见
“数据透视表”部分提供了有关如何使用它们的更多示例。
orgunitstructure是数据库中另一个重要的表，有助于
提供orgunits的层次结构以及数据。通过加入
带有数据值表的orgunitstructure表可以获取行
具有完整层次结构的数据值，例如格式：OU1，OU2，OU3，
OU4，DataElement，时间段，值（塞拉利昂，博，巴迪贾，Ngelehun CHC，
BCG \ <1，2010年1月1日，32）这种格式可以使例如枢
表或其他OLAP工具将数据汇总到层次结构中。

### 报告表 { #reportTable }

报告表是定义的，交叉列表的报告，可以用作
进一步报告的基础，例如Excel数据透视表或简单地
下载为Excel工作表。报告表旨在提供
所需数据的特定视图，例如“每月国家ANC
指标”。此报告表可能会提供
国家/地区，按月汇总整个国家/地区。该数据可以
当然可以从主要的数据集市中检索，但通常是报表表
执行速度更快，并向用户呈现定义明确的数据视图。

## 如何创建报告表 { #reporting_creating_tables }

要创建新的报告表，请转到
报告模块（报告-\>报告表）。以上标准清单
报告，请使用“添加报告表”或“添加数据元素维表”
纽扣。常规报告表可用于保存数据
元素，指标或数据集完整性，而数据元素
维度表用于在报表中包括数据元素类别
表。创建表的方法相同，但是，唯一的方法是
选择数据时例外。

要创建报告表，首先要为
表格，其中最重要的是交叉表维度。然后，
您选择哪些数据元素，指标，数据集或数据元素
您要包含的尺寸。最后，您选择哪个组织
报表中要使用的单位和时间段。每个步骤
详细说明如下。

### 常规选项 { #reporting_general_options }

![](resources/images/dhis2_creating_reporting/general_options.jpg)

**跨标签尺寸**

您可以交叉标记以下一个或多个维度：数据
元素/指标，组织单位和期间，这意味着列将是
根据所选尺寸的值创建的如果指标
选择后，您将在表中获得反映名称的列名称
所选指标中。

例如，如果您跨指标和周期进行制表，则该列
标头将显示“ \ <indicator title\> \ <period\>”。组织
单位将列为行。参见屏幕截图以进行澄清：

![](resources/images/dhis2_creating_reporting/crosstab_ind-per.jpg)

如果您交叉链接指标和组织单位，则该列
该表的标题将显示“ \ <indicator title\> \ <组织
unit \>“。现在句点将列为行。有关的信息，请参见屏幕截图
澄清：

![](resources/images/dhis2_creating_reporting/crosstab_ind-org.jpg)

请注意，此处有关交叉表尺寸的选项可能具有
使用报告表时可用选项的后果
以后用作数据源，例如用于标准报告。

**排序**

影响表中最右边的列，允许您选择排序
从低到高或从高到低。

**最高限额**

上限允许您设置要包括的最大行数
在报告表中。

**包括回归**

这将添加具有可包含的回归值的其他列
在报表设计中，例如折线图中。

### 选择数据 { #reporting_selecting_data }

![](resources/images/dhis2_creating_reporting/select_data.jpg)

**指标/数据元素**

在这里，选择要包含的数据元素/指标
那个报告。使用群组过滤器可以更轻松地找到自己
寻找并双击要包含或使用的项目
用于添加/删除元素的按钮。您可以同时拥有数据元素和
同一报告中的指标。

**数据集**

在这里，选择要包括在报告中的数据集。
包含数据集将为您提供有关数据完整性的数据
给定集合，而不是其数据元素上的数据。双击您要的项目
想要包含或使用按钮。

### 选择报告参数 { #selecting_reporting_params }

![](resources/images/dhis2_creating_reporting/relative_options.jpg)

有两种方法可以选择要包含在其中的组织单位
报告以及应包含哪些时间段：相对时间段还是固定时间段。
固定的组织单位和/或期间表示您选择
创建报告时要包含在报告表中的单位/期间
表。使用相对期间，您可以选择时间和/或单位为
报表表填充时的参数，例如运行时
标准报告或创建图表。也可以组合使用
例如在报告中永久添加一些组织单位
同时让用户选择其他。报表参数为
在下面讨论。通常，使用固定的组织单位和/或时间
期限是不必要的限制。

**固定的组织单位**

要添加固定组织单位，请点击“切换固定组织
单位”。将出现一个面板，您可以在其中选择始终使用的枪支
包括在报告中。如果您将其保留为空白，则用户选择orgunits
通过使用报告参数运行报告时。使用
下拉菜单可按级别过滤组织单位，双击或
使用按钮添加/删除。

**固定时期**

要添加固定期间，请单击“切换固定组织单位”。面板
将出现在您可以选择始终包含在
报告。如果您将其保留为空白，则用户在运行
通过使用报告参数进行报告。使用下拉菜单
选择期间类型（周，月等），然后按“上一个”和“下一个”按钮
选择年份，然后双击或使用按钮添加/删除。

**相对期间**

与其使用固定/静态时段（例如“ 2010年1月”或“ 2010年第一季度”），不如说是
通用期间可用于创建可重复使用的报告表，例如对于
每月报告期间，“报告月份”只需选择
用户在运行报告时选择的当前报告月份。
请注意，所有相对期间都是相对于“报告月份”的。的
报告月份是由用户选择的，否则是当前的
使用月份。这是可能的相对期间的描述：

-   _报告月份：_

    将此用于月度报告。在报告月份参数中选择的月份将在报告中使用。

-   _今年的月份/季度_：

    这将在一年中的每个月或每个季度提供一个值。这非常适合需要列出所有月/季度的标准月度或季度报告。仍然没有数据的期间将为空，但将始终保持相同的列名。

-   _今年：_

    这是一年中迄今为止的累计，汇总了从年初到并包括所选报告月份的期间。

-   _去年的月份/季度_：

    相对于报告月份，这将提供去年每个月或每个季度的一个值。这非常适合需要列出所有月/季度的标准月度或季度报告。仍然没有数据的期间将为空，但将始终保持相同的列名。

-   _去年：_

    这是相对于报告月份的去年累计值，汇总了去年的所有期间。

**范例-相对期间**

假设我们选择了三个指标：A，B和C，我们还选择了
选择使用相对期间“报告月份”和“今年”
当我们创建报告表时。如果是报告月份（已选择
自动或由用户）是例如2010年5月
将为2010年5月计算三个选定指标的值
（=“报告月份”）和三个月的累计值
在2010年到目前为止选择的指标（=到目前为止为“今年”）。

因此，我们最终将为每个组织单位使用六个值：
“指标A，2010年5月”，“指标B，2010年5月”，“指标C，2010年5月”，
“ 2010年迄今的指标A”，“ 2010年迄今的指标B”和
“指标C到2010年为止”。

**报告参数**

报告参数使报告随着时间的推移更加通用和可重用
和不同的组织单位。这些参数将在以下情况时弹出
生成报告表或基于报告运行报告
表。用户将选择他们想要在报告中看到的内容。那里
有四个可能的报告参数，您可以选择无，全部或
任何组合。

-   _报告月份：_

    这决定了系统选择相对期间时将使用哪个月份。如果未选中该框，则在生成报告时不会询问用户报告月份 - 然后将使用当前月份。

-   _祖父组织单位：_

    选择要在报告中列出的所有 orgunit 子项和孙子项的祖父母。例如。选定区域将触发该区域本身、其所有区域及其所有子区域的使用。

-   _上级组织单位：_

    选择要在报告中列出的所有 orgunit 子级的父级。例如。选定的地区将触发该地区本身及其所有子/分区的使用。

-   _组织单位：_

    这会触发在报告中使用此组织单位。没有列出孩子。

**示例-报告参数**

继续上面相对时间的示例，假设
除了“报告月份”之外，我们还选择了“家长
创建报告时将“组织单位”作为报告参数
表。运行报告表时，将要求我们选择
组织单位。现在，假设我们选择“ Region R”作为
组织单位。 “区域R”的子级为“区X”，并且
“区Y”。

运行报告时，系统将汇总两个报告的数据
“区X”和“区Y”。数据将从
收集它们的最低级别。的值
地区将进一步汇总，以得出
“区域R”。

因此，报告表将生成在
前面的示例，用于“区X”，“区Y”和“区域R”。

### 数据元素维度表 { #reporting_de_dimension_tables }

这些表允许在报告表中使用数据元素类别。
与常规报告表有两个区别。首先是
您无法选择交叉表尺寸，因为列将
始终是类别组合的分类。另一个
是数据的实际选择。只能添加一个类别组合
每个报表，则只能将同一类别组合中的数据元素设为
已选择。

小计和总计也将包含在表格中，例如一种
性别（男性，女性）+ EPI年龄（\ <1, \> 1）类别组合可得出
以下几列：男性+ \ <1, male+\> 1，女性+ \ <1, female+\> 1，男性，
女性，\ <1, \> 1，总计。

**选择数据**

![](resources/images/dhis2_creating_reporting/catcombo.jpg)

使用下拉菜单选择类别组合。数据
将列出使用此类别组合的元素。双击以
添加到报告中，或使用按钮。

### 报表-最佳做法 { #reporting_best_practices }

为了使报告表能够随着时间的推移以及在各个分支之间可重复使用
可以有参数。允许使用四种类型的参数。组织单元
父组织单位（用于在一个区域列出枪支），祖父母
组织单位和报告月份。附带一提，我们可以提到
正在考虑将其扩展到包括季度和年度报告，
或者使该周期参数在周期类型方面更为通用
不知何故。使用期间作为参数的功能使报表成为可能
随着时间的推移可重复使用，因此非常适合报表需求，例如
月度，季度或年度报告。当用户运行报告时
在DHIS2中，用户必须为以下报告表指定值：
链接到报告。首先重新生成报告表
（删除并使用更新的数据重新创建），然后运行报告
（在后台，在Jasper报表引擎中）。

报告表可以包含与数据元素，指标相关的值
或数据完整性，与报告的完整性有关
在给定的月份内跨越orgunits。完整性报告将涵盖在内
在单独的部分中。

报告表中有三个维度可以识别数据。
指标或数据元素，枪支和时期。对于这些
用户可以选择维度以选择要包含在
报告。用户必须选择一个或多个数据元素或指标来
出现在报告中。可以将组织单位选择替换为
参数，一个特定的组织单位或父组织单位（
本身及其所有子项都出现在报告中）。如果一个或多个
选择了orgunits并且未使用orgunit参数，则报告
关于要包含哪些侦探，在大多数情况下是静态的
是对报告的不必要限制。

**使用相对期间**

除了特定的时间段外，还可以选择更高级的时间段
像2007年1月9日，2007年1月8日这样的时期也包含相对
期。由于报告通常会定期运行特定时间段
像Jan-09在报告中不是很有用。相反，如果您想
设计一个月度报告，您应该使用称为
报告月份。然后，您还必须将“报告月份”作为以下内容之一
您的报告参数，以使系统知道确切的
报告生成时间的报告月份。还有很多
可用的相对期间，它们都与报告参数有关
报告月份。例如。今年到目前为止的相对时间是指
包括当年的累计值报告月份。如果你
想要一个具有多个期间而不是一个汇总的趋势报告
期间，您可以选择“今年的月份”
一年中到目前为止每个月的值。您可以做类似的报告
与宿舍。这个想法是支持尽可能多的通用报告类型
可以使用相对期间，因此，如果您还有其他报告需求，
请在邮件列表中建议新的相对时期，它们可能会
添加到报告表选项中。

**交叉尺寸**

交叉制表是报表设计中非常强大的功能，因为
典型的DHIS2数据表，其参考了期间，数据
element / indicator和orgunit使更高级的报表设计变得非常
困难，因为你不能放具体指标，时期或
特定列上的orgunits。例如。通过交叉指标
指标报告表中的维度，您将获得指标名称
在报表的列标题上，除了列之外
参考组织单位，以及另一列参考期。有了这样的
您可以将指标名称拖放到特定列的表格设计
或iReport软件中的图表位置。同样，您可以交叉标签
在orgunits或句号上将其名称专门提供给
报告设计。例如。通过交叉标记期间并选择两个
相关期间“报告月份”和“今年”，您可以设计
包含上个月和累计年度价值的报告
给定的月份，因为它们将在您的报告中用作列标题
表。也可以在交叉表中合并两个维度，
例如周期和指标，例如看三个
为两个特定的相对时期选择指标。例如
使使用BCG，DPT3制作基于表格或图表的报告成为可能
和麻疹覆盖率，包括上个月和累计
一年中到目前为止的报道。

总而言之，通过结合交叉制表功能，相对
期间和报告表参数，您应该具有支持的工具
大多数报告场景。如果没有，我们将很高兴收到
有关进一步改进报表的建议。就像已经
提到，我们已经开始研究更多的细粒度参数
期间维度为“报告月份”不足，或者
至少在诸如季刊
报告。

## 报告表结果 { #reporting_table_outcomes }

运行报告表时，系统将计算以下值：
指定的指标/数据元素/数据集，枪支和时期。的
数据将以表格形式显示在DHIS2中。列标题
将与您选择的交叉表尺寸相对应。一个例子
显示的报告表显示了冈比亚某地区的ANC覆盖范围
下面。指标和期间在此处交叉列出，可以
从列标题中看到。

![](resources/images/dhis2_creating_reporting/crosstab_ind-per.jpg)

桌子上方有六个按钮。五个下载按钮和一个
返回键。单击“后退”按钮将使您直接回到
前一个屏幕。五个下载按钮的功能分别是
在屏幕截图下方显示：

![](resources/images/dhis2_creating_reporting/report-table_output.png)

**五个下载按钮**

-   _以 Excel 格式下载：_

    下载可以在Excel中打开的生成的Excel文件。

-   _以 CSV 格式下载：_

    下载生成的 .csv 文件。 CSV 代表 **C**omma **S**eparated **V**alues。这是一个文件以 .csv 结尾的文本文件。文件中的每一行对应表中的一行，而各列用分号 (;) 分隔。该文件可以在文本编辑器以及电子表格程序（如 Excel）中打开。

-   _下载为PDF：_

    下载生成的 PDF 文件。数据将以与您已经在 DHIS2 中查看的生成表类似的布局呈现。

-   _下载为报告：_

    下载“样式化”的 PDF 文件。除了在表格布局中显示数据外，此文件还显示一个图表，显示来自所有选定期间的聚合数据以及为报告表选择的父组织单位。该报告是使用 Jasper 报告引擎生成的。

-   _下载为JRXML：_

    下载前一个项目符号中描述的生成报告的设计文件。设计文件（文件以 .jrxml 结尾）可以在 Jasper iReport Designer 软件中打开。如果您计划设计标准报告，这是起点。

## 标准报告 { #reporting_standard_reports }

### 什么是标准报告？ { #what-is-a-standard-report }

标准报告是一种手动设计的报告，它以
手动指定的布局。标准报告可以基于
报告表或SQL查询。两种方法均在
以下各节。使用报告表的主要优点是
简单-不需要特殊的开发技能。在这种情况下
您有特殊要求或需要利用
DHIS2数据库，您可能想使用基于SQL的标准报告。在任何
您将能够利用报告参数来创建
动态报告。以下指南将使用报告表方法，
而SQL方法将在最后介绍。

### 在iReport中设计标准报告 { #designing-standard-reports-in-ireport }

Jasper iReport Designer是用于创建可以使用的报告的工具
作为DHIS2中的标准报告。该工具允许创建
可以轻松地从DHIS2导出标准报告模板
迄今为止的数据。创建报告的过程涉及四个主要步骤：

1.  必须在 DHIS2 中创建一个报告表，其中包含要在报告中使用的指标/数据元素/数据集。

2.  您必须运行报告表并下载设计文件（单击“下载为 JRXML”按钮）。

3.  使用免费软件 Jasper iReport Designer 打开下载的 .jrxml 文件以编辑报告的布局。

4.  然后可以将编辑后的报告上传到 DHIS2 以用作标准报告。

如果要在iReport的设计过程中预览报告，则可以
实际上必须将文件上传到DHIS2才能看到它的外观。

这四个步骤将在接下来的部分中详细介绍。在
一般而言，在制作标准报告时，您应该清楚
甚至在制作报表之前，应该如何看待它的外观
报告表的设计对报告的生成方式有影响
在iReport中格式化。例如，选择了哪些交叉表尺寸
报告表中的内容会影响可用的交叉表
对于标准报告，它会对哪种类型的报告产生影响
您可以制作的图表。

#### 下载并打开设计文件 { #download-and-open-the-design-file }

> **注意**
>
> 如果您尚未创建报告表，则必须创建。请参阅“如何创建报告表”部分。\*

找到所需的报告表并通过单击绿色圆圈运行它
里面的白色箭头。显示报告后，点击“下载
as JRXML”按钮下载设计文件。然后在
Jasper iReport Designer软件。

#### 编辑报告 { #editing-the-report }

现在您可以编辑报告的布局了。主要的iReport
窗口由左侧的“报告检查器”组成，报告文档
在中间，右上角有一个“ Palette”区域，
右下角的“属性”区域。 “报告检查器”
用于选择和检查各种特性
报告，并在检查器中选择一个项目时，“属性”
面板更改为显示与选择有关的属性。的
“调色板”用于添加各种元素，例如文字框，图像
和图表到
文件。

![](resources/images/dhis2_creating_reporting/ireport/iReport-window.png)

> **注意**
>
> 如果您看不到 Palette 或 Properties 侧边栏，您可以从菜单栏上名为“Window”的菜单项启用它们。

iReport文档分为七个主要区域，按布局划分
分隔符（蓝线）。这些行用于确定每个行有多大
哪些区域应该在报告中。

这些区域都有不同的用途：

-   标题-报告标题区域

-   页面标题-页面标题的区域

-   列标题-列标题的区域（用于表）

-   详细信息1-将放置实际报告数据的区域

-   列页脚-成为表格页脚的区域

-   页面页脚-页面页脚的区域

-   摘要 - 此区域中的元素将放置在报告的末尾

默认情况下，您会看到只有标题，列标题和
细节1波段具有数据。对于大多数报告，这是可以的。标题乐队是
适用于标题，例如图表。数据字段输入到
细节1区域将被迭代以创建表。例如，如果
名为“ dataelementname”的字段放置在“ Detail 1”区域中，所有数据
报告表中的元素将在此处列出。我们将回到
数据字段管理仅在下面进行一些说明。

报告中未使用的区域已收缩，以为您增加更多空间
报告数据。但是，您可以在增加或减少波段高度时
喜欢。有两种方法可以做到这一点。第一种方法就是简单地拖动
蓝色带状线，如下所示。

![](resources/images/dhis2_creating_reporting/ireport/17_drag.jpg)

调整乐队高度的另一种方法是在
“报表检查器”，然后在
右下角的“详细信息1-属性”区域。

![](resources/images/dhis2_creating_reporting/ireport/18_adjust.jpg)

由于该字段已经存在于报告中，您可能不希望
除了固定布局并拖动字段外，还可以执行其他任何操作。您可以
还可以通过拖动边线，顶线或底线来调整字段的大小。如果你
要更改列标题中的文本，只需双击
字段并更改文本。

要将字段添加到表中，我们只需将其拖到“明细1”区域
来自“报告检查器”。列标题将被添加
自动。

通过双击该框，可以编辑文本。的格式
文本，例如大小，字体和对齐方式，可以使用工具进行调整
文件上方。

![](resources/images/dhis2_creating_reporting/ireport/21_title_edit.jpg)

> **注意**
>
> 以“$F”开头的字段表示每次运行报告时从数据库中检索的值。这里的值会有所不同，所以除非你想要一个静态值，否则不要更改这些字段！

#### 文本 { #text }

iReport中有两种文本类型：“文本标签”和“文本字段”
（数据字段）。它们以不同的方式工作，应用于
不同的目的。要点是，文本字段只是
占位符，将使用报告中的正确文本填充
运行报表时使用表格，而文本标签将保持原样
运行报表的时间。

##### 静态文字 { #static-text }

静态文本是可以正常编辑的纯文本文本标签。
有两种编辑文本标签的方法：

-   通过双击文本框

-   通过使用“属性”面板中的静态文本属性

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_01.jpg)

##### 文字栏位 { #text-fields }

文本字段是在以下情况下将从报告表中填充的公式
报告运行。与静态文字不同，这些文字无法在
正常方式。但是，可以通过多种方式对它们进行操作以确保
将产生所需的输出。共有三种编辑方式
文本字段：

-   通过右键单击文本框并选择“编辑表达式”

-   通过双击文本字段（不推荐，因为这不会调出表达式编辑器）

-   通过使用“属性”面板中的“文本”字段属性

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_04.jpg)

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_06.jpg)

文本字段可以代表数字或文本，因此它们可以是
用于显示例如地区名称或数字
价值观。因此，在Text中看到的Expression类非常重要
字段属性与“文本”字段表达式匹配。对于默认文字
从DHIS2下载的.jrxml文件中的字段，这不是问题，
但是在创建新的文本字段时很重要。最重要的两个
表达式类是用于数字的java.lang.Double和java.lang.String
用于文本。

###### 例 { #example }

例如，假设您有一个季度报告，
添加具有年度总数的新列。因此，您添加了一个新的
列标题带的静态文本字段，以及列标题带的文本字段
详细信息带入。默认情况下，新的Text字段设置为java.lang.String
（文本）。但是，“年度总计”列将填充数字。我们
因此必须将新文本字段的Expression类更改为
java.lang.Double：

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_07.jpg)

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_08.jpg)

当我们编辑文本字段表达式时，我们会看到表达式编辑器
报表中包含所有可用列的窗口。我们可以看到
在这里，每个标记都标有它们的类型-文本或
数。因此，我们需要确保的是
我们为文本字段选择的类与实际匹配
表达。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_10.jpg)

### 过滤表行 { #filtering-the-table-rows }

从DHIS2导出的默认表中，有一些行
离开桌子可能会更好，而有些则可能
最好在最后。例如，当基于
带有“上级组织单位”参数的报告表，
默认表中可能有一行，其中国家/地区级别位于
在所有区域之间。在iReport中，可以更改此设置，以便
«父组织单位»出现在表格的底部。这个
涉及两个步骤，下面将进行解释。请注意，这不会
在只有一个组织单位的地方工作，因此
在使用“上级组织单位”或“祖父母”时最有用
报告表格中的“组织单位»”参数。

#### 隐藏表格中的“参数组织单位” { #hiding-the-parameter-organisation-unit-from-the-table }

通过使用以下命令从表中排除“参数组织单位”
“详细信息”区域中的“属性，当表达式打印时”属性。设置一个
表达式时打印，从选择报告中的明细带开始
检查器，然后在属性中编辑“当表达式时打印”
面板。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_11.jpg)

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_12.jpg)

现在应该出现表达式编辑器窗口。我们必须做的是创建一个表达式来检查正在生成的行是否是具有作为参数给出的组织单位的行。报告表包含一个我们可以用于此的列，称为 organization_unit_is_parent。要排除带有参数组织单元的行，双击列表中的organization_unit_is_parent，将其复制到表达式区域，然后在末尾添加`.equals("No")`，代码为：

```
$ F {organisation_unit_is_parent} .equals（“否”）
```

这告诉报表引擎仅打印表格行，其中
组织单位不是上级组织
单元。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_14.jpg)

#### 在表格底部放置“参数组织单位” { #putting-the-param-organisation-unit-at-the-bottom-of-the-table }

除了完全从表格中删除“参数组织单元”之外，还可以将其放在表格的底部（或顶部）。这是通过使用下一节中介绍的排序功能并选择首先按“organisation_unit_is_parent”进行排序来完成的。除此之外，还可以添加其他排序选项，例如制作一个列表，其中 param 组织单位位于表格底部，其他组织单位按字母顺序排列在其上方。

#### 隐藏其他行 { #hiding-other-rows }

使用表达式编辑器，还可以排除其他行
从表中，除了原组织单位
以上说明。例如，在加纳，所有地区都有
地区»，是方括号中的区域名称。这个可以
也可以使用
以上介绍。为此，请按照上面的说明进行操作
表达式编辑器窗口。然后，我们使用Java表达式进行测试
该行是否应该隐藏。

##### 示例-删除具有以\ [开头的组织单位的行 { #example-removing-rows-with-organisation-units-starting-with }

示例-删除具有以\ [开头的组织单位的行

```
（$ F {organisationunitname} .charAt（0）！='['）
```

这样一来，报告将跳过所有行的第一个字符
组织单位名称为\ [。

也可以组合这些表达式中的几个。去做这个
我们用两个字符&&将表达式放在括号中
之间。例如，要创建一个同时保留两个组织的表
名称以\ [和上级组织单位开头的单位，我们可以
使用以下表达式：

```
（$ F {organisationunitname} .charAt（0）！='['）&& $ F {organisation_unit_is_parent} .equals（“否”）
```

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_29.jpg)

### 排序 { #sorting }

通常您会在第一列是组织的地方进行报告
单位名称。但是，组织列表可能是一个问题
单位不是按字母顺序排序的。可以在iReport中修复
通过几个简单的步骤。

在报告检查器中，右键单击报告名称（通过
默认为dpt），然后选择“编辑”
查询。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_21.jpg)

将会出现“报告查询”窗口。单击排序选项
按钮。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_22.jpg)

出现如下所示的排序窗口。在这里，我们可以添加排序
选项。单击添加字段按钮。将会出现另一个小窗口，
在下拉菜单中，您可以选择“按单位排序”
使表格按字母顺序排序
名称。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_23.jpg)

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_24.jpg)

单击确定-关闭-确定以关闭三个窗口。该表现在应该
被排序。

### 更改指标/数据元素名称 { #changing-indicatordata-element-names }

默认情况下，DHIS2的报告使用短名称作为指标
以及报表和图表中的数据元素。在某些情况下，这些不是
对于第三方总是非常有意义的，但是通过一些工作，他们可以
通过iReport提供自定义名称。例如，如果您
正在以指标为行，句号为列的报告，或者
用于具有
指标。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_000.jpg)

要更改指标或数据元素的名称，我们必须对其进行编辑
«表达式»或公式，例如通过右键单击文本框并
选择编辑表达式以调出表达式
编辑。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_32.jpg)

接下来，我们必须插入一些Java代码。在以下示例中，我们
将用其适当的名称代替三个指标的简称
名称。该代码搜索短名称，然后将其替换为
正确的名称。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_34.jpg)

```
（$ F {indicatorname} .equals（“ Bed Util All”））吗？ “床利用率-所有病房”
：
（$ F {indicatorname} .equals（“ Bed Util Mat”））吗？ “床的利用率-产假”
：
（$ F {indicatorname} .equals（“ Bed Util Ped”））吗？ “床的利用率-儿科”
：
$ F {indicatorname}
```

由此，我们可以看到可用于更一般情况的模式。

-   对于我们要更改名称的每个指标或数据元素，我们需要一行

-   每行之间用冒号分隔：

-   我们用“常规”行结束表达式

每行具有相同的格式，其中红色文本是简称，
蓝色文本是我们要插入的内容
代替。

![](resources/images/dhis2_creating_reporting/ireportadv/ireport_screen_0.jpg)

例如，当具有指标名称时，可以使用相同的表达式
沿图表的类别轴。

### 添加水平总计 { #adding-horizontal-totals }

通过使用表达式编辑器，可以将列添加到
每行总计的表格。在下面的示例中，我们将
三个月的表格以及总计的表格
三个月。

我们首先将文本标签拖动到表格标题中，然后更改其标题
将文本添加到“总计”，然后将文本字段拖到详细信息行中。

如“文本字段”部分中所述，我们必须更改
新文本字段的属性，以便它可以显示数字。去做
为此，将属性面板中的“表达式类”更改为
“ java.lang.Double”。

右键单击文本字段，然后选择“编辑表达式”。这将带来
打开“表达式编辑器”。作为表达式，我们要总结所有
列。在这种情况下，我们要求和三个值表达式
上：“ 9月”，“ 2010年10月”，“ 2010年11月”。这些的名字
字段会因您在其中选择的交叉表维度而异
报告表。在我们的例子中，我们做的表达是

```
$ f {September} + $ f {2010年10月} + $ f {2010年11月}
```

表格的每一行在右侧都有一个总计栏。

### 表组 { #groups-of-tables }

在某些情况下，将多个表合在一起可能会很有用
报告。可以使用“报告”组来完成。使用此功能，
例如，您可以为每个指标创建一个报告表，或者一个
每个组织单位的表格。在下文中，我们将经历
包含三个指标的报告所需的步骤
在一张表中表示。重要的是报告表不要
当我们想基于
指标。

在我们的示例中，默认情况下将从DHIS2下载的.jrxml文件
对于组织单位和指标都有一列（假设我们
已选择期间作为唯一的交叉表维度）。我们从
删除指标列，因为在我们的例子中不需要这样做，并且
重新调整其他字段以适合
报告。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_36.jpg)

接下来，我们创建报告组。转到报告检查器，右
点击报告名称（默认为dpt），然后选择添加报告
组。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_38.jpg)

随即出现一个带有报告组向导的窗口。选择名称
组，在这种情况下，我们选择“指标”。在下拉菜单中，我们可以
选择我们希望组基于的报告表中的哪些列
上。因此，如果我们要为每个组织单位使用一张桌子，
选择组织单位名称作为要分组的报告对象
至。但是，由于在此示例中我们按指标分组，因此我们
选择指标名称。然后点击
下一个。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_39.jpg)

下一步是选择是否要一个单独的组
每个报告组的页眉和组页脚区域。在这种情况下，我们
选择同时包含两者。单击完成，然后会出现乐队
在里面
报告。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_40.jpg)

如果您上载并运行报告，它现在将为每个报告创建一个表
指示符。但是，看起来不会很好，因为不会有
每个表格的标题行-每页顶部仅一个标题。
同样，也没有指示哪个表显示了哪个
指示符。接下来，我们将解决此问题。

除了将标题行放在列标题中，我们还可以
将其移动到组标题。这将使标题显示在上方
每个单独的表。此外，我们可以为每个表添加标题
与指标名称。

将列标题从“列标题”区域移至“指示器”
组头
带。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_41.jpg)

接下来，将文本字段添加到“指标”组标题栏中，然后进行编辑
它是显示指标的表达式
名称。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_42.jpg)

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_44.jpg)

该报告现在应具有三个表，每个指标一个。每
表格的标题将带有指标名称，并且还有一个
表头
行。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_45.jpg)

#### 排序和分组 { #sorting-and-grouping }

使用分组时，必须注意以下事项：
排序。值得注意的是，添加排序参数时，无论参数是
用作分组依据的必须首先。因此，如果您要分组
按指标报告，并希望对组织单位进行排序
按字母顺序，您必须先选择按指标排序，然后再按
组织单位名称如下所示。有关如何添加的说明
排序，请参阅排序部分
以上。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_59.jpg)

## 图表 { #charts }

默认情况下，.jrxml文件中包含3D条形图，
从DHIS 2下载。此设置是为了仅从
«参数组织单位»（通常是父母或祖父母）是
用过的。通常，这是一个很好的解决方案。由于这是默认设置，因此我们将
首先看条形图，再看折线
图表。

### 条形图 { #bar-charts }

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_54.jpg)

条形图是DHIS2中的默认图表类型。在本节中，我们将
看一下如何制作上面的条形图，比较其值
几个地区的一项指标。在中编辑默认图表
iReport，右键单击它并选择图表
数据。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_46.jpg)

将出现一个窗口。默认情况下，Filter表达式被填充为
仅显示上级组织单位的数据。如果
由于某些原因您不希望这样做，只需删除文本中的文本
框。在这种情况下，我们不需要过滤器，因为我们正在制作图表
显示跨地区的比较。要继续，请单击详细信息
标签。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_47.jpg)

在详细信息下，您将看到该图表的系列列表。默认情况下，一个
每个交叉表列创建系列。在这种情况下，我们正在研究
一些地区的2010年全年指标数据。
指标位于交叉表中
尺寸。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_48.jpg)

要更改系列，请选择它，然后单击“修改”。另一个窗口
将出现在可以编辑四个区域的位置。三个第一
是必需的，但是在其中之一中添加空引号（«»）就足够了
首先
二。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_500.jpg)

第一个框是一个文本字段，其中的系列名称可以是
插入或编辑。这是将用于填充文本的字段
在图例框中（显示为
下面）。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_50.jpg)

但是，如果您想沿x轴的每个条都有名称
图表而不是使用图例，这可以通过添加
您想在“类别表达式”字段中显示的任何文本，或者
通过插入一个表达式使其在
报告运行。在这种情况下，我们希望每个都有一个条
组织单位。因此，我们通过点击
在按钮上
对。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_49.jpg)

作为表达式，我们选择organisationunitname，如下所示
下面。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_490.jpg)

完成后，系列编辑器应如下所示。请点击
单击确定，然后单击关闭以关闭图表详细信息
窗口。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_501.jpg)

如果您在“类别”表达区域中添加了良好的描述，则可以
省略图例框。这是在“报告”属性面板中完成的
iReport，您还可以在其中编辑
图表。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_51.jpg)

我们还可以为图表添加标题，例如
指示符。这也可以在“图表属性”面板的“标题”下完成。
表达。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_55.jpg)

将出现“表达式编辑器”窗口，您可以在其中输入标题。
请注意，标题必须用引号引起来，如下所示
下面。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_56.jpg)

图表现已准备就绪。

### 折线图 { #line-charts }

折线图在许多情况下都非常有用。但是，要使线
图表报表数据（报表）必须适合它。因此，如果你
要制作折线图，报告表必须要做
交叉表维度中没有句点。这是示例
如果您要为单个组织单位制作报告，
一个或多个指标，或者如果您使用一个指标进行报告
和一个或多个组织单位。

下面，我们将详细介绍制作带一行报告的步骤
图表显示一年中三个指标的发展情况
组织单位。我们首先制作一个带有选择项的报告表
显示
下面：

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_57.jpg)

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_60.jpg)

当我们在iReport中打开生成的.jrxml文件时，默认行
包括图表。由于我们要制作折线图，因此我们将其删除
图表并将新的图表元素从面板中拖到报告中
面板。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_61.jpg)

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_62.jpg)

只要将Chart元素拖入报告中，就会出现一个窗口
出现。我们选择折线图，如下所示
下面。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_63.jpg)

将出现一个图表向导。在第一步中单击“下一步”，然后在“完成”中
接下来-我们将添加数据
后来。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_64.jpg)

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_65.jpg)

接下来，调整报表中图表的大小和位置。然后我们
将为我们的三个指标中的每个指标添加一个数据系列。右键点击
在图表上，然后选择图表数据。如果您要制作一张带有
指标和几个组织单位，您可能希望创建一个
过滤表达式，以便仅来自参数/父项的数据
图表中使用了组织单位。为此，请将此行添加到
过滤器表达区域：

`$ F {organisation_unit_is_parent} .equals（“是”）`

在我们的示例中，我们只有组织单位，所以这不是
必要。接下来，单击详细信息选项卡以查看其中的系列列表
图表。目前，此列表为空，但我们将为
我们三个指标中的每个指标。要添加系列，请单击添加
按钮。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_66.jpg)

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_67.jpg)

在出现的窗口中，输入第一个
系列表达式窗口中的指示符。记住把名字放在
引号。在类别表达式中（沿x轴），我们希望
月，因此我们使用字段旁边的按钮打开表达式
编辑器并添加
期间名称。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_69.jpg)

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_68.jpg)

在值表达式中，我们添加第一个的实际数据值
指示符。再次使用表达式编辑器执行此操作。当我们
完成后，窗口应该看起来像下面的窗口，只有不同的窗口
根据的名称
指示符。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_70.jpg)

然后，您可以单击确定关闭窗口。按照相同的步骤添加
另一个系列
指标。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_71.jpg)

关闭窗口，折线图的数据应已准备就绪。
但是，可能需要进行一些其他调整-其中大多数可以
在折线图属性面板中找到。例如，当制作一个
如我们的示例所示，逐月图表通常不够用
沿类别轴的月份名称的空间。这可以通过解决
通过使用属性将标签旋转例如-40度
类别轴刻度线标签
回转。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_72.jpg)

许多其他选项可用于为图表提供所需的
看。

![](resources/images/dhis2_creating_reporting/ireportadv/irep_screen_73.jpg)

## 将报告添加到DHIS2 { #adding-the-report-to-dhis2 }

现在，我们可以切换到DHIS2并导入我们的报告。转到报告
DHIS2中的模块，然后选择“标准报告”。在“标准报告”中
屏幕上，单击“添加新的”，或编辑现有的。

在以下屏幕中，我们需要执行几个操作。
首先，输入新的“标准报告”的名称。其次，为了设计
单击“选择文件”，然后在iReport中找到已编辑的.jrxml文件。
然后，选择我们用作报告基础的报告表
在iReport中。点击添加，它将移至“选定的报告
表格”区域。最后，单击
保存。

![](resources/images/dhis2_creating_reporting/ireport/27_new_std_report.jpg)

该报告现在可以作为DHIS2中的“标准报告”使用：

![](resources/images/dhis2_creating_reporting/ireport/28_done.jpg)

## 最终指南 { #some-final-guidelines }

-   使用相同版本的 iReport 和 DHIS2 的 Jasper 报告版本。有关正在使用的 Jasper 版本，请参阅 DHIS2 中的“关于”页面。

-   使用带有交叉表维度的报表表格作为报表设计的数据源。这将使设计需要在列上放置特定指标、期间或组织单位的报告变得更加容易。

-   向别人学习，在launchpad上有很多针对Jasper的DHIS2报告设计，见http://bazaar.launchpad.net/~DHIS2-devs-core/DHIS2/trunk/files/head:/resources/

## 设计基于SQL的标准报告 { #designing-sql-based-standard-reports }

标准报告可能基于SQL查询。当您
需要访问DHIS2数据库中的多个表并进行自定义
选择并加入。

\-此步骤为可选步骤，但在需要调试报告时非常方便
当您可以直接访问要使用的数据库时。请点击
在“报告数据源”按钮，“新建”，“数据库JDBC连接”上
然后点击“下一步”。在此窗口中，您可以给您一个连接名称和
选择JDBC驱动程序。 PostgreSQL和MySQL应该包含在其中
您的iReport。然后输入JDBC连接URL，用户名和密码。
最后三个是指您的数据库，可以从您的数据库中检索
DHIS2配置文件（hibernate.properties）。点击“保存”。你有
现在将iReport连接到您的数据库。

\-转到标准报告，然后单击“添加新”，然后“获取报告
模板”。在iReport中打开此模板。此模板包含一个
一系列报表参数，可用于创建动态SQL
陈述。这些参数将根据报告替换
我们稍后将选择并包含在标准中的参数
报告。参数为：

-   period - 相对周期的逗号分隔标识符字符串

-   period_name - 报告期间的名称

-   Organisationunits-所选组织单位的标识符

-   organizationunit_name - 报告组织单位的名称

-   organizationunit_level - 报告组织单位的级别

-   organizationunit_level_column - \_orgunitstructure 资源表中对应列的名称

These parameters can be included in SQL statements using the `$P\!{periods}` syntax, where "periods" represents the parameter.

\-要在iReport中创建SQL查询，请单击“报告查询”按钮。
将查询写入或粘贴到文本区域。使用示例SQL查询
参数，这些参数将创建一个报告，在报告中显示原始数据值
组织单位层次结构中的第四层是：

```
    选择district.name作为区，Chiefdom.name作为Chiefdom，ou.name作为设施，
    bcg.value为bcg，yellowfever.value为yellowfever，麻疹.value为麻疹
    来自组织单位ou
    左外部联接_orgunitstructure ous
      于（ou.organisationunitid = ous.organisationunitid）
    左外加入组织单位区
      在（ous.idlevel2 = district.organisationunitid）上
    左外加入组织单位首领
      在（ous.idlevel3 = chiefdom.organisationunitid）上
    左外连接（
      选择sourceid，sum（cast（值是double precision））作为值
      从数据值
      其中dataelementid = 359706
      和periodid = $ P！{periods}
      按sourceid分组）作为bcg在bcg.sourceid = ou.organisationunitid上
    左外连接（
      选择sourceid，sum（cast（值是double precision））作为值
      从数据值
      其中dataelementid = 35
      和periodid = $ P！{periods}
      按sourceid分组）为yellowfever.sourceid = ou.organisationunitid上的yellowfever
    其中ous.level = 4
    并且ous。$ P！{organisationunit_level_column} = $ P！{organisationunits}
    按区名，酋长名，ou.name排序；
```

注意如何在查询中使用所有参数，以及SQL连接
DHIS2数据库中的资源表。

\-最后，回到“添加新报告”屏幕，我们单击“使用JDBC”
数据源”。这使您可以选择任何相对期间和报告
报告的参数。相对时期是相对于今天的
日期。报告参数将在创建报告和
可以动态选择组织单位和期间
在运行时用于您的报告。对于上面的示例，我们必须
在相关期间下选择“报告月份”，然后选择“报告”
报告参数下的“月份”和“组织单位”。点击保存。
会将您重定向到报告列表，您可以在此处单击绿色
报告旁边的“创建”图标以进行呈现。

## 设计基于HTML的标准报告 { #designing-html-based-standard-reports }

可以使用纯HTML和JavaScript设计标准报告。这个
需要一点提到的开发经验
科目。基于HTML的标准报告的好处是它允许
以获得最大的灵活性。使用HTML，您可以准确地设计报告
您要根据以下内容在页面上放置表格，徽标和值
您的设计需求。您可以在以下位置编写和保存标准报告设计
常规文本文件。要将基于HTML的标准报告上载到DHIS2
请执行下列操作：

-   导航到标准报告，然后单击“添加新”。

-   给报告起一个名字。

-   选择“ HTML报告”作为类型。

-   如果您愿意，您可以通过单击“获取 HTML 报告模板”下载报告模板。

-   选择所需的相对时期 - 这些将在您的报告中以 JavaScript 形式提供。

-   选择报告参数 - 这些将在您的报告中以 JavaScript 形式提供。

报告模板，您可以在选择报告类型后下载该模板，
是开发基于HTML的标准报告的有用起点。
它为您提供了基本结构并建议了如何使用JavaScript
和报告中的CSS。 JavaScript和CSS可以很容易地包含在内
标准脚本和样式标签。

如果在创建标准报告时选择了相对期间，
可以像这样在JavaScript中访问它们：

    var period = dhis2.report.periods; //具有句点标识符的数组
    var period = period [0];

如果在创建广告订单时选择了组织单位报告参数
标准报告，您可以在其中访问所选的组织单位
像这样的JavaScript：

    var orgUnit = dhis2.report.organisationUnit; // 一个东西
    var id = orgUnit.id;
    var name = orgUnit.name;
    var code = orgUnit.code;

设计这些报告时，您可以利用Analytics Web API
资源以在JavaScript中检索汇总数据。看一看
请参阅本指南的Web API章节中的详细说明。作为一个
完整的最小示例，您可以在
报告已加载，并使用该数据来设置报表的内部文本
这样的HTML元素：

     <script type="text/javascript">
    $（document）.ready（function（）{
        $ .get（“ ../api/analytics?dimension=dx:FnYCr2EAzWS;eTDtyyaSA7f&dimension=pe:THIS_YEAR&filter=ou:ImspTQPwCqd”，function（json）{
            $（“ #bcg”）.html（json.rows [0] [2]）;
            $（“ #fic”）.html（json.rows [1] [2]）;
        }）；
    }）；
     </script>

     <div> BGG覆盖率：<span id="bcg"> </span> </div>
     <div> FIC覆盖范围：<span id="fic"> </span> </div>

其他一些技巧：要包含图形，可以将图像转换为SVG
并将SVG内容直接嵌入到报告中-DHIS2基于
HTML 5，其中SVG标签是有效的标记。要在其中包含图表和地图
您的报告可以使用Web API中的图表和地图资源。
您可以在自己的JavaScript中使用Web API的全部功能
报告-仔细阅读Web API章节以获取
所有可用资源的概述。

# 系统设置 { #settings }

## 常规设置 { #system_general_settings }

<table>
<caption>General settings</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Setting</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Maximum number of analytics records</strong></p></td>
<td><p>Increase this number to provide more records from the analytics.</p>
<p>The default value is 50,000.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>Use the setting <strong>Unlimited</strong> carefully, it might result in a very high load on your server.</p>
</blockquote></td>
</tr>
<tr class="even">
<td><p><strong>Maximum number of SQL view records</strong></p></td>
<td><p>Set the maximum number of records in a SQL view.</p>
<p>The default value is Unlimited.</p>
</tr>
<tr class="odd">
<td><p><strong>Cache strategy</strong></p></td>
<td><p>Decides for how long reports analytics responses should be cached.</p>
<p>If you use the scheduled, nightly analytics update, you may want to select <strong>Cache until 6 AM tomorrow</strong>. This is because data in reports change at that time, and you can safely cache data up to the moment when the analytics tables are updated.</p>
<p>If you are loading data continuously into the analytics tables, select <strong>No cache</strong>.</p>
<p>For other cases select the amount of time you want the data to be cached.</p></td>
</tr>
<tr class="even">
<td><p><strong>Infrastructural indicators</strong></p></td>
<td><p>Defines an indicator group where the member indicators should describe data about the organisation units' infrastructure.</p>
<p>You can view the infrastructural data in the <strong>GIS</strong> app: right-click a facility and click <strong>Show information</strong>.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Infrastructural data elements</strong></p></td>
<td><p>Defines a data element group where the member data elements should describe data about the organisation units' infrastructure.</p>
<p>Infrastructural data elements can be population, doctors, beds, Internet connectivity and climate.</p>
<p>You can view the infrastructural data in the <strong>GIS</strong> app: right-click a facility and click <strong>Show information</strong>.</p></td>
</tr>
<tr class="even">
<td><p><strong>Infrastructural period type</strong></p></td>
<td><p>Sets the frequency for which the data elements in the infrastructural data elements group are captured.</p>
<p>This will typically be yearly. When viewing the infrastructural data you will be able to select the time period of the data source.</p>
<p>You can view the infrastructural data in the <strong>GIS</strong> app: right-click a facility and click <strong>Show information</strong>.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Default relative period for analysis</strong></p></td>
<td><p>Setting this value will determine which relative period is selected as the default in the analytics apps.</p></td>
</tr>
<tr class="even">
<td><p><strong>Feedback recipients</strong></p></td>
<td><p>Defines a user group where the members will receive all messages sent via the feedback function in the <strong>Dashboard</strong> app.</p>
<p>This will typically be members of the super user team who are able to support and answer questions coming from end-users.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Max offline organisation unit levels</strong></p></td>
<td><p>Defines how many levels in the organisation unit hierarchy will be available offline in the organisation unit tree widget.</p>
<p>Under normal circumstances you can leave this on the lowest level, which is default is the default setting.</p>
<p>It can be useful to set it to a higher level to reduce initial load time in cases where you have a large number of organisation units, typically more than 30 000.</p></td>
</tr>
<tr class="even">
<td><p><strong>Data analysis std dev factor</strong></p></td>
<td><p>Sets the number of standard deviations used in the outlier analysis performed on the captured data in the <strong>Data Entry</strong> app.</p>
<p>The default value is 2. A high value will catch less outlier values than a low value.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Phone number area code</strong></p></td>
<td><p>The area code for the area in which your deployment is located.</p>
<p>Used for sending and receiving SMS. Typically, this is a country code.</p>
<p><em>+260</em> (country code for Zambia)</p></td>
</tr>
<tr class="even">
<td><p><strong>Enable multi-organisation unit forms</strong></p></td>
<td><p>Enables support to enter data forms for multiple organisation units at the same time in the <strong>Data Entry</strong> app.</p>
<p>If you've enabled this setting, you can in the <strong>Data Entry</strong> app, click on the parent organisation unit for the children that you want to enter data for, and the data set list will include data sets that are assigned to the children of that parent.</p></td>
</tr>
<tr class="odd">
<td><strong>Acceptance required before approval</strong></td>
<td>When this setting is selected, acceptance of data will be required first before submission to the next approval level is possible.</td>
</tr>
</tbody>
</table>

## 分析设置 { #system_analytics_settings }

 <table>
 <caption>分析设置</caption>
 <colgroup>
 <col style="width: 50%" />
 <col style="width: 50%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>设置</p> </th>
 <th> <p>说明</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p> <strong>分析的默认相对周期</strong> </p> </td>
 <td> <p>定义的相对时间由默认的分析应用程序使用：<strong>数据可视化</strong>，<strong>事件报告</strong>，<strong>事件展台</strong>，<strong> GIS </strong>和<strong>透视表</strong>应用。打开这些应用程序时，将自动选择相对时间段。 </p>
 <p>推荐设置：用户中最常用的相对时间段。 </p> </td>
 </tr>
 <tr class="even">
     <td> <p> <strong>隐藏每日时段</strong> </p> </td>
     <td> <p>在分析工具中隐藏每日时段</p> </td>
 </tr>
 <tr class="odd">
     <td> <p> <strong>隐藏每周时段</strong> </p> </td>
     <td> <p>在分析工具中隐藏每周时段</p> </td>
 </tr>
 <tr class="even">
     <td> <p> <strong>隐藏每月期间</strong> </p> </td>
     <td> <p>在分析工具中隐藏月度</p> </td>
 </tr>
 <tr class="odd">
     <td> <p> <strong>隐藏每两个月的周期</strong> </p> </td>
     <td> <p>在分析工具中隐藏双月周期</p> </td>
 </tr>
 <tr class="even">
 <td> <strong>会计年度相对开始月份</strong> </td>
 <td>定义分析应用程序中相对财务年度应从哪个月（4月，7月或10月）开始。 </td>
 </tr>
 <tr class="odd">
 <td> <p> <strong>可缓存性</strong> </p> </td>
 <td> <p>设置是否应为公共或私有可见性提供分析数据响应。 </p>
 <p> <strong>私有</strong>：DHIS2服务器与最终用户之间具有缓存功能的任何节点或服务器都无法缓存网页。如果所提供的页面可以包含或确实包含敏感信息，这将很有用。这意味着，每次需要网页时，要么从DHIS2服务器获取一个新页面，要么DHIS2服务器缓存该页面。除DHIS2服务器外，没有其他服务器可以缓存页面。 </p>
 <p> <strong>公共</strong>：DHIS2服务器与最终用户之间具有缓存能力的任何节点或服务器都可以缓存网页。这样可以重新传输到DHIS2服务器的流量，并有可能加快后续页面的加载速度。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <strong> Analytics缓存模式</strong> </p> </td>
 <td> <p>支持两种不同的模式：</p>
 <p> <strong>渐进式</strong>：这与用于分析的新渐进式缓存功能有关。启用后，它将覆盖分析请求的全局缓存策略。此模式将触发所有分析请求的HTTP和数据层缓存。启用此模式时，<em>缓存因子</em>是强制性的。 </p>
 <p> <strong>固定</strong>：将根据<em>缓存策略中定义的时间段缓存请求。 </em> </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> <strong>缓存因子</strong> </p> </td>
 <td> <p>选择一个缓存因子值。仅当分析缓存模式已设置为<em>渐进式</em>时，此字段才可用。 </p>
 <p>它显示一个整数列表，其中每个整数代表一个绝对缓存因子。该整数将在内部用于计算每个分析请求的最终到期时间。缓存因子越高，请求将被缓存的时间越长。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <strong>在分析中隐藏未批准数据的最大年限</strong> </p> </td>
 <td> <p>设置时间分析是否应遵守数据的批准级别以及在多长时间内应遵守数据的批准级别。通常，默认情况下会认为已有数年历史的数据已被批准。为了加快分析请求的速度，您可以选择忽略历史数据的实际批准级别。 </p>
 <p> <strong>永远不要检查批准</strong>：不会隐藏任何数据，无论其数据批准状态如何。 </p>
 <p> <strong>检查所有数据的批准</strong>：将始终检查批准状态。 </p>
 <p>其他选项，例如<strong>最近3年</strong>：将检查批准状态中是否存在3年以下的数据；较旧的数据将不会被检查。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> <strong>分析数据缓存的阈值</strong> </p> </td>
 <td> <p>设置是否仅启用早于指定年限的缓存数据。 </p>
 <p>这允许在不缓存的情况下直接返回最新数据，同时出于性能方面的考虑，为较早的数据提供缓存版本。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <strong>分析表导出中的尊重类别选项开始和结束日期</strong> </p> </td>
 <td> <p>此设置控制分析是否应过滤与具有开始和结束日期的类别选项相关联但与在类别选项有效期内的时间段无关的数据。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> <strong>将分析置于维护模式</strong> </p> </td>
 <td>将DHIS2的分析和Web API置于维护模式。这意味着将为所有请求返回&quot;503服务不可用&quot;。
 <p>当您需要在服务器上执行维护（例如在服务器在生产环境中运行时重建索引）以减少负载并更有效地执行维护时，此功能很有用。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <strong>跳过分析表中的零数据值</strong> </p> </td>
 <td> <p>在分析表中不包含任何为零的聚合数据值。如果汇总数据值为零并已存储（数据元素配置为存储零值），则这可以减小分析表的大小，并加快分析表的构建和访问。 </p> </td>
 </tr>
 </tbody>
 </table>

## 服务器设定 { #system_server_settings }

 <table>
 <caption>服务器设置</caption>
 <colgroup>
 <col style="width: 50%" />
 <col style="width: 50%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>设置</p> </th>
 <th> <p>说明</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p> <strong>数据库服务器CPU的数量</strong> </p> </td>
 <td> <p>设置数据库服务器的CPU核心数。 </p>
 <p>当数据库托管在与应用程序服务器不同的服务器上时，这使系统能够以最佳性能运行，因为DHIS2中的分析与可用核心数成线性比例。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <strong>系统通知电子邮件地址</strong> </p> </td>
 <td> <p>定义将接收系统通知的电子邮件地址。 </p>
 <p>有关分析表生成等流程失败的通知将在此处发送。这对于应用程序监视很有用。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> <strong> Google Analytics（通用分析）密钥</strong> </p> </td>
 <td> <p>设置Google UA密钥，以通过Google Analytics（分析）平台为您的DHIS2实例提供使用情况分析。应该注意的是，当前，DHIS2中并非所有应用程序都支持Google Analytics（分析），因此您的用户的某些活动可能不会出现在此平台中。 </p>
 <p>您可以通过<a href="http://google.com/analytics" class="uri"> http://google.com/analytics </a>了解更多有关Google Analytics（分析）的信息。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <strong> Google Maps API密钥</strong> </p> </td>
 <td> <p>定义Google Maps API的API密钥。这用于显示DHIS2中的地图。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> <strong> Bing Maps API密钥</strong> </p> </td>
 <td> <p>定义Bing Maps API的API密钥。这用于显示DHIS2中的地图。 </p> </td>
 </tr>
 </tbody>
 </table>

## 外观设置 { #system_appearance_settings }

<table>
<caption>Appearance settings</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Setting</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Select language</strong></p></td>
<td>
    <p>Sets the language for which you can then enter translations of the following settings:</p>
    <ul>
        <li><p><strong>Application introduction</strong></p></li>
        <li><p><strong>Application title</strong></p></li>
        <li><p><strong>Application notification</strong></p></li>
        <li><p><strong>Application left-side footer</strong></p></li>
        <li><p><strong>Application right-side footer</strong></p></li>
    </ul>
    <blockquote>
        <p><strong>Note</strong></p>
        <p>Before each of these settings can accept a translated value, they first need to have a default/fallback value. This value can be set by selecting <em>System default (fallback)</em> in this dropdown.</p>
    </blockquote>
</td>
</tr>
<tr class="even">
<td><p><strong>Application title</strong></p></td>
<td><p>Sets the application title on the top menu.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Application introduction</strong></p></td>
<td><p>Sets an introduction of the system which will be visible on the top-left part of the login page.</p></td>
</tr>
<tr class="even">
<td><p><strong>Application notification</strong></p></td>
<td><p>Sets a notification which will be visible on the front page under the login area.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Application left-side footer</strong></p></td>
<td><p>Sets a text in the left-side footer area of the login page.</p></td>
</tr>
<tr class="even">
<td><p><strong>Application right-side footer</strong></p></td>
<td><p>Sets a text in the right-side footer area of the login page.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Style</strong></p></td>
<td><p>Sets the style (look-and-feel) of the system.</p>
<p>The user can override this setting in the <strong>Settings</strong> app: <strong>User settings</strong> &gt; <strong>Style</strong>.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Due to technical reasons, it's not possible to change the color of the newest version of the header bar. The apps with the newest header bar will retain the blue header bar.</p>
</blockquote></td>
</tr>
<tr class="even">
<td><p><strong>Start page</strong></p></td>
<td><p>Sets the page or app which the user will be redirected to after log in.</p>
<p>Recommended setting: the <strong>Dashboard</strong> app.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Help page link</strong></p></td>
<td><p>Defines the URL which users will see when they click <strong>Profile</strong> &gt;<strong>Help</strong>.</p></td>
</tr>
<tr class="even">
<td><p><strong>Flag</strong></p></td>
<td><p>Sets the flag which is displayed in the left menu of the <strong>Dashboard</strong> app.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Interface language</strong></p></td>
<td><p>Sets the language used in the user interface.</p>
<p>The user can override this setting in the <strong>Settings</strong> app: <strong>User settings</strong> &gt; <strong>Interface language</strong>.</p></td>
</tr>
<tr class="even">
<td><p><strong>Database language</strong></p></td>
<td><p>Sets the language used in the database.</p>
<p>The user can override this setting in the <strong>Settings</strong> app: <strong>User settings</strong> &gt; <strong>Database language</strong>.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Property to display in analysis modules</strong></p></td>
<td><p>Sets whether you want to display the metadata objects' names or short names in the analytics apps: <strong>Data Visualizer</strong>, <strong>Event Reports</strong>, <strong>Event Visualizer</strong>, <strong>GIS</strong> and <strong>Pivot Table</strong> apps.</p>
<p>The user can override this setting in the <strong>Settings</strong> app: <strong>User settings</strong> &gt; <strong>Property to display in analysis modules</strong>.</p></td>
</tr>
<tr class="even">
<td><p><strong>Default digit group separator to display in analysis modules</strong></p></td>
<td><p>Sets the default digit group separator in the analytics apps: <strong>Data Visualizer</strong>, <strong>Event Reports</strong>, <strong>Event Visualizer</strong>, <strong>GIS</strong> and <strong>Pivot Table</strong> apps.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Require authority to add to view object lists</strong></p></td>
<td><p>If you select this option, you'll hide menu and index page items and links to lists of objects if the current user doesn't have the authority to create the type of objects (privately or publicly).</p></td>
</tr>
<tr class="even">
<td><p><strong>Custom login page logo</strong></p></td>
<td><p>Select this option and upload an image to add your logo to the login page.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Custom top menu logo</strong></p></td>
<td><p>Select this option and upload an image to add your logo to the left in the top menu.</p></td>
</tr>
</tbody>
</table>

## 电子邮件设定 { #system_email_settings }

<table>
<caption>Email settings</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Setting</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Host name</strong></p></td>
<td><p>Sets the host name of the SMTP server.</p>
<p>When you use Google SMTP services, the host name should be <em>smtp.gmail.com</em>.</p></td>
</tr>
<tr class="even">
<td><p><strong>Port</strong></p></td>
<td><p>Sets the port to connect to the SMTP server.</p></td>
</tr>
<tr class="odd">
<td><p><strong>User name</strong></p></td>
<td><p>The user name of the user account with the SMTP server.</p>
<p>mail@dhis2.org</p></td>
</tr>
<tr class="even">
<td><p><strong>Password</strong></p></td>
<td><p>The password of the user account with the SMTP server.</p></td>
</tr>
<tr class="odd">
<td><p><strong>TLS</strong></p></td>
<td><p>Select this option if the SMPT server requires TLS for connections.</p></td>
</tr>
<tr class="even">
<td><p><strong>Email sender</strong></p></td>
<td><p>The email address to use as sender when sending out emails.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Send me a test email</strong></p></td>
<td><p>Sends a test email to the current user logged into DHIS2.</p></td>
</tr>
</tbody>
</table>

## 访问设置 { #system_access_settings }

<table>
<caption>Access settings</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Setting</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Self registration account user role</strong></p></td>
<td><p>Defines which user role should be given to self-registered user accounts.</p>
<p>To enable self-registration of users: select any user role from the list. A link to the self-registration form will be displayed on the login page.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>To enable self-registration, you must also select a <strong>Self registration account organisation unit</strong>.</p>
</blockquote>
<p>To disable self-registration of users: select <strong>Disable self registration</strong>.</p></td>
</tr>
<tr class="even">
<td><p><strong>Self registration account organisation unit</strong></p></td>
<td><p>Defines which organisation unit should be associated with self-registered users.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>To enable self-registration, you must also select a <strong>Self registration account user role</strong>.</p>
</blockquote></td>
</tr>
<tr class="odd">
<td><p><strong>Do not require reCAPTCHA for self registration</strong></p></td>
<td><p>Defines whether you want to use reCAPTCHA for user self-registration. This is enabled by default.</p></td>
</tr>
<tr class="even">
<td><p><strong>Enable user account recovery</strong></p></td>
<td><p>Defines whether users can restore their own passwords.</p>
<p>When this setting is enabled, a link to the account recovery form will be displayed on the front page.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>User account recovery requires that you have configured email settings (SMTP).</p>
</blockquote></td>
</tr>
<tr class="odd">
<td><p><strong>Lock user account temporarily after multiple failed login attempts</strong></p></td>
<td><p>Defines whether the system should lock user accounts after five successive failed login attempts over a timespan of 15 minutes.</p>
<p>The account will be locked for 15 minutes, then the user can attempt to log in again.</p></td>
</tr>
<tr class="even">
<td><p><strong>Allow users to grant own user roles</strong></p></td>
<td><p>Defines whether users can grant user roles which they have themselves to others when creating new users.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Allow assigning object to related objects during add or update</strong></p></td>
<td><p>Defines whether users should be allowed to assign an object to a related object when they create or edit metadata objects.</p>
<p>You can allow users to assign an organisation unit to data sets and organisation unit group sets when creating or editing the organisation unit.</p></td>
</tr>
<tr class="even">
<td><p><strong>Require user account password change</strong></p></td>
<td><p>Defines whether users should be forced to change their passwords every 3, 6 or 12 months.</p>
<p>If you don't want to force users to change password, select <strong>Never</strong>.</p></td>
</tr>
<tr class="odd">
<td><strong>Enable password expiry alerts</strong></td>
<td>When set, users will receive a notification when their password is about to expire.</td>
</tr>
<tr class="even">
<td><p><strong>Minimum characters in password</strong></p></td>
<td><p>Defines the minimum number of characters users must have in their passwords.</p>
<p>You can select 8 (default), 10, 12 or 14.</p></td>
</tr>
<tr class="odd">
<td><p><strong>CORS whitelist</strong></p></td>
<td><p>Whitelists a set of URLs which can access the DHIS2 API from another domain. Each URL should be entered on separate lines. Cross-origin resource sharing (CORS) is a mechanism that allows restricted resources (e.g. javascript files) on a web page to be requested from another domain outside the domain from which the first resource was served.</p></td>
</tr>
</tbody>
</table>

## 日历设定 { #system_calendar_settings }

<table>
<caption>Calendar settings</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Setting</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Calendar</strong></p></td>
<td><p>Defines which calendar the system will use.</p>
<p>The system supports the following calendars: Coptic, Ethiopian, Gregorian, Islamic (Lunar Hijri), ISO 8601, Julian, Nepali, Persian (Solar Hijri) and Thai.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>This is a s system wide setting. It is not possible to have multiple calendars within a single DHIS2 instance.</p>
</blockquote></td>
</tr>
<tr class="even">
<td><p><strong>Date format</strong></p></td>
<td><p>Defines which date format the system will use.</p></td>
</tr>
</tbody>
</table>

## 资料汇入设定 { #system_data_import_settings }

数据导入设置适用于可以启用的其他控件
验证通过Web API导入的汇总数据。他们
对应视为冲突的事项提供可选约束
在导入期间。将约束应用于每个单独的数据值
在导入中。

 <table>
 <caption>数据导入设置</caption>
 <colgroup>
 <col style="width: 50%" />
 <col style="width: 50%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>设置</p> </th>
 <th> <p>说明</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p> <strong>需要期间以匹配数据集的期间类型</strong> </p> </td>
 <td> <p>要求数据值的周期与分配了数据值的数据元素的数据集具有相同的周期类型。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <strong>需要类别选项组合以匹配数据元素的类别组合</strong> </p> </td>
 <td> <p>要求数据值的类别选项组合成为数据值的数据元素的类别组合的一部分。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> <strong>要求组织单位匹配数据集的分配</strong> </p> </td>
 <td> <p>要求将数据值的组织单位分配给数据值的数据元素所分配到的一个或多个数据集。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <strong>要求属性选项组合以匹配数据集的类别组合</strong> </p> </td>
 <td> <p>要求数据值的属性选项组合是数据值的数据元素所分配到的数据集的类别组合的一部分。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> <strong>要求指定类别选项组合</strong> </p> </td>
 <td> <p>要求指定数据值的类别选项组合。 </p>
 <p>默认情况下，如果未指定，它将退回到默认类别选项组合。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <strong>需要指定属性选项组合</strong> </p> </td>
 <td> <p>需要指定数据值的属性选项组合。 </p>
 <p>默认情况下，如果未指定，它将回退到默认属性选项组合。 </p> </td>
 </tr>
 </tbody>
 </table>

## 同步设定 { #synchronization-settings }

以下设置用于数据和元数据
同步。

> **注意**
>
> 有关如何配置元数据同步的更多信息，请参阅[配置元数据同步](https://docs.dhis2.org/master/en/user/html/metadata_sync.html)

<table>
<caption>Synchronization settings</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Setting</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Remote server URL</strong></p></td>
<td><p>Defines the URL of the remote server running DHIS2 to upload data values to.</p>
<p>It is recommended to use of SSL/HTTPS since user name and password are sent with the request (using basic authentication).</p>
<p>The system will attempt to synchronize data once every minute.</p>
<p>The system will use this setting for metadata synchronization too.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>To enable data and metadata synchronization, you must also enable jobs for <strong>Data synchronization</strong> and <strong>Metadata synchronization</strong> in the <strong>Scheduler</strong> app.</p>
</blockquote></td>
</tr>
<tr class="even">
<td><p><strong>Remote server user name</strong></p></td>
<td><p>The user name of the DHIS2 user account on the remote server to use for data synchronization.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>If you've enabled metadata versioning, you must make sure that the configured user has the authority &quot;F_METADATA_MANAGE&quot;.</p>
</blockquote></td>
</tr>
<tr class="odd">
<td><p><strong>Remote server password</strong></p></td>
<td><p>The password of the DHIS2 user account on the remote server. The password will be stored encrypted.</p></td>
</tr>
<tr class="even">
<td><p><strong>Enable versioning for metadata sync</strong></p></td>
<td><p>Defines whether to create versions of metadata when you synchronize metadata between central and local instances.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Don't sync metadata if DHIS versions differ</strong></p></td>
<td><p>The metadata schema changes between versions of DHIS2 which could make different metadata versions incompatible.</p>
<p>When enabled, this option will not allow metadata synchronization to occur if the central and local instance(s) have different DHIS2 versions. This apply to metadata synchronization done both via the user interface and the API.</p>
<p>The only time it might be valuable to disable this option is when synchronizing basic entities, for example data elements, that have not changed across DHIS2 versions.</p></td>
</tr>
<tr class="even">
<td><p><strong>Best effort</strong></p></td>
<td><p>A type of metadata version which decides how the importer on local instance(s) will handle the metadata version.</p>
<p><em>Best effort</em> means that if the metadata import encounters missing references (for example missing data elements on a data element group import) it ignores the errors and continues the import.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Atomic</strong></p></td>
<td><p>A type of metadata version which decides how the importer on local instance(s) will handle the metadata version.</p>
<p><em>Atomic</em> means all or nothing - the metadata import will fail if any of the references do not exist.</p></td>
</tr>
</tbody>
</table>

## OAuth2客户端 { #system_oauth2_settings }

You create, edit and delete OAuth2 clients in the **System Settings** app.

1.  打开 **系统设置 **应用，然后单击 **OAuth2客户端 **。

2.  点击添加按钮。

3.  输入 **名称 **， **客户ID **和 **客户密码 **。

4.  选择 **授权类型 **。

    <table>
    <colgroup>
    <col style="width: 50%" />
    <col style="width: 50%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Grant type</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p><strong>Password</strong></p></td>
    <td><p>TBA</p></td>
    </tr>
    <tr class="even">
    <td><p><strong>Refresh token</strong></p></td>
    <td><p>TBA</p></td>
    </tr>
    <tr class="odd">
    <td><p><strong>Authorization code</strong></p></td>
    <td><p>TBA</p></td>
    </tr>
    </tbody>
    </table>

5.  Enter **Redirect URIs**. If you've multiple URIs, separate them with a line.

# 资料管理 { #data_admin }

数据管理模块提供了一系列功能来确保
DHIS2数据库中存储的数据是完整的，并且
数据库性能得到优化。这些功能应在
由数据管理员定期检查以确保
存储的数据是最佳的。

## 数据的完整性 { #dataAdmin_dataIntegrity }

DHIS2可以对数据执行各种数据完整性检查
包含在数据库中。识别和纠正数据完整性
问题对于确保用于
分析目的是否有效。每个数据完整性检查
将描述系统执行的操作以及一般步骤
可以解决这些问题。

### 没有数据集的数据元素 { #data-elements-without-data-set }

每个数据元素必须分配给一个数据集。数据值
如果有数据，将无法将元素输入系统
元素未分配给数据集。选择
在主菜单中选择维护->数据库集->编辑，然后添加
将“孤立的”数据元素添加到适当的数据集。

### 没有组的数据元素 { #data-elements-without-groups }

一些数据元素已经分配给几个数据元素组。
目前不允许这样做，因为这会导致重复
分析记录集中的链接数据记录提供了汇总
数据。转到维护->数据元素组以查看每个数据
确定元素并删除不正确的组分配。

### 违反排他组的数据元素 { #data-elements-violating-exclusive-group-sets }

Some data elements have been allocated to several data element groups that are members of the same data element group set. All group sets in DHIS2 are defined as exclusive, which means that a data element can _only_ be allocated to _one_ data element group within that group set. Go to Maintenance -\> Data elements and indicators -\>Data element groups to review each data element identified in the integrity check. Either remove the data element from all groups except the one that it should be allocated to, or see if one of the groups should be placed in a different group set.

### 数据集中的数据元素，但不在表单或节中 { #data-elements-in-data-set-but-not-in-form-or-sections }

数据元素已分配给数据集，但尚未分配
分配给数据集表格的任何部分。使用的所有数据集
部分表格，通常应在数据集中包含所有数据元素
恰好分配给数据集的一部分。

### 分配给具有不同期间类型的数据集的数据元素 { #data-elements-assigned-to-data-sets-with-different-period-types }

数据元素不应分配给两个单独的数据集
期间类型不同。建议的方法是创建两个
单独的数据元素（例如，每月和每年的数据元素）
并将它们分配给各自的数据集。

### 数据集未分配给组织单位 { #data-sets-not-assigned-to-organisation-units }

所有数据集应分配给至少一个组织单位。

### 类别组合无效的部分 { #sections-with-invalid-category-combinations }

使用节表的数据集应仅具有一个类别
每个部分中的组合。违反可能是由于
将数据元素分配给节，然后更改类别
此数据元素在以后的某个时间点的组合。

### 具有相同公式的指标 { #indicators-with-identical-formulas }

尽管此规则不会影响数据质量，但通常不会
具有两个定义完全相同的指标是有意义的。评论
确定的指标及其公式，并删除或修改任何
指示器似乎是重复的。

### 没有分组的指标 { #indicators-without-groups }

All data elements and indicators must be assigned to at least one group, so these Indicators need to be allocated to their correct Data Element and Indicator Group. From the main menu, go to Data elements/Indicators -\> Indicator Groups, and allocate each of the \`Orphaned\` indicators to its correct group.

### 无效的指标分子 { #invalid-indicator-numerators }

违反此规则的原因可能是错误地引用了
删除或修改的数据元素。查看指标并进行
分子定义的更正。

### 无效的指标分母 { #invalid-indicator-denominators }

违反此规则的原因可能是错误地引用了
删除或修改的数据元素。查看指标并进行
分母定义的更正。

### 违反排他性组的指标 { #indicators-violating-exclusive-group-sets }

Some indicators have been allocated to several indicator groups that are members of the same indicator group set. All group sets in DHIS2 are defined as exclusive, which means that an indicator can _only_ be allocated to _one_ indicator group within that group set. Go to Maintenance -\> Data elements and indicators -\>Indicator groups to review each indicator identified in the integrity check. Either remove the indicator from all groups except the one that it should be allocated to, or see if one of the groups should be placed in a different group set.

### 重复期间 { #duplicate-periods }

如果已从外部应用程序导入了期间，则可能是
某些时期可能会重复。如果您有任何时期
在这里似乎重复的，您将需要解决这些问题
直接在DHIS2数据库中。所有已分配给
重复的期间，应移至正确的期间，并且
重复期间应删除。

### 具有循环引用的组织单位 { #organisation-units-with-cyclic-references }

组织单位不能同时是父级和子级，
直接或间接。如果发生这种情况，您将需要
直接在DHIS2数据库中解析循环引用
通过重新分配“组织单位”表中的“上级”字段
组织单位。

### 孤立的组织单位 { #orphaned-organisation-units }

所有组织单位必须存在于组织单位内
层次结构。转到“组织单位”>“层次结构操作”，然后将
将组织单位冒犯到层次结构中的适当位置。

### 没有团体的组织单位 { #organisation-units-without-groups }

All organisation units _must_ be allocated to at least _one_ group. The problem might either be that you have not defined any compulsory OrgUnit Group Set at all, or that there are violations of the compulsory rule for some OrgUnits . NOTE: If you have defined no compulsory OrgUnit Group Sets, then you must first define them by going to Organisation units-\>Organisation unit group sets and define at least one compulsory Group Set (the group set 'Type' are nearly universally relevant). If you have the relevant group sets, go to Maintenance -\> OrgUnit Groups to review each OrgUnit identified and add the relevant Group allocation.

### 组织单位违反必修课 { #organisation-units-violating-compulsory-group-sets }

These organisation units have not been assigned to the any organisation unit group within one of the _compulsory_ organisation unit group sets. When a group set is defined as compulsory, it means that an organisation unit must be allocated to at least one organisation unit group within that group set. For instance, all organisation units must belong to one of the groups in the 'Type' group set. It might belong to the \`Hospital\` or the \`Clinic\` or any other 'type' group - but it must belong to exactly one of them. Go to Organisation units-\>Organisation unit groups to review each organisation unit identified in the integrity check. Allocate all organisation units to exactly one compulsory group.

### 违反专属组的组织单位 { #organisation-units-violating-exclusive-group-sets }

Some organisation units have been allocated to several organisation unit groups that are members of the same organisation unit group set. All group sets in DHIS2 are defined as exclusive, which means that an organisation unit can _only_ be allocated to _one_ organisation unit group within that Group Set. For instance, one organisation unit cannot normally belong to the both the 'Hospital' and 'Clinic' groups , but rather to only to one of them. Go to Organisation unit-\>Organisation unit groups to review each organisation unit identified in the integrity check. Remove the organisation units from all groups except the one that it should be allocated to.

### 没有组集的组织单位组 { #organisation-unit-groups-without-group-sets }

此处列出的组织单位组尚未分配给
组集。转到维护->组织单位->组织单位
组设置并将组织单位组分配给适当的
组集。

### 无组验证规则 { #validation-rules-without-groups }

All validation rules must be assigned to a group. Go to **Maintenance** app \> **Validation rule group** and assign the offending validation rule to a group.

### 无效的验证规则左侧表达式 { #invalid-validation-rule-left-side-expressions }

An error exists in the left-side validation rule definition. Go to **Maintenance** app \> **Validation rule** and click **Edit** on the offending rule. Click **Left side** and make the required corrections.

### 无效的验证规则右侧表达式 { #invalid-validation-rule-right-side-expressions }

An error exists in the right-side validation rule definition. Go to **Maintenance** app \> **Validation rule** and click **Edit** on the offending rule. Click **Right side** and make the required corrections.

### 无条件的程序规则 { #programrules-with-no-condition }

Report will highlight all the **Program rules** not configured with **Condition**. Evaluation for rules not having condition are always evaluated as false.

### 没有优先权的ProgramRules { #programrules-with-no-priority }

Report will highlight all the **Program rules** not configured with **Priority**. This is optional but its existence is very important when **ProgramRuleActionType** is **ASSIGN**. Rules with ASSIGN action type should have higher priority then the rest of the action types.

### 不采取行动的ProgramRules { #programrules-with-no-action }

Report will highlight all the **Program rules** not configured with any **ProgramRuleAction**.

### 没有dataElements的ProgramRuleVariables { #programrulevariables-without-dataelements }

Report will highlight all the **Program rule variables** not configured with **DataElement**. Report will be based on source type configuration. DataElement should be provided when the source type of ProgramRuleVariable is **DataElement**.

### 没有属性的ProgramRuleVariables { #programrulevariables-without-attributes }

Report will highlight all the **Program rule variables** not configured with **TrackedEntityAttribute**. Report will be based on source type configuration. TrackedEntityAttribute should be provided when the source type of ProgramRuleVariable is **Attribute**.

### 没有数据对象的ProgramRuleActions。 { #programruleactions-with-no-data-objects }

Report will highlight all the **Program rule actions** not configured with any Data object. Data object can be either **DataElement** of **TrackedEntityAttribute**. There are certain ProgramRuleActions which are responsible for assinging values to either dataElement or trackedEntityAttribute.

### 没有通知的ProgramRuleActions { #programruleactions-with-no-notification }

Report will highlight all the **Program rule actions** which have ProgramRuleActionType set to SENDMESSAGE/SCHEDULEMESSAGE where the configuration does not provide any link to notification.

### 没有部分ID的ProgramRuleActions { #programruleactions-with-no-section-id }

Report will highlight all the **Program rule actions** which have ProgramRuleActionType set to **HIDESECTION** but configuration does not provide any section id.

### 没有程序阶段ID的ProgramRuleActions { #programruleactions-with-no-program-stage-id }

Report will highlight all the **Program rule actions** which have ProgramRuleActionType set to **HIDEPROGRAMSTAGE** but configuration does not provide any program stage id.

### 无效的程序指示符表达式 { #invalid-program-indicator-expression }

报告由无效** DataElement **或无效** TrackedEntityAttribute **引起的程序指示器表达式中的所有冲突。

### 无效的程序指示器过滤器表达式 { #invalid-program-indicator-filter-expression }

报告由无效** DataElement **或无效** TrackedEntityAttribute **引起的程序指示器过滤器表达式中的所有冲突。

## 保养 { #data_admin_maintenance }

<table>
<caption>Data maintenance functions in the Data Administration app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Function</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Clear analytics tables</p></td>
<td><p>Completely empties the analytics tables. These tables are used to generate aggregate data for the pivot tables, GIS and reports.</p></td>
</tr>
<tr class="even">
<td><p>Remove zero data values</p></td>
<td><p>Removes zero data values from the database. Values registered for data elements with aggregation operator average is not removed, as such values will be significant when aggregating the data, contrary to values registered for data elements with aggregation operator sum.</p>
<p>Reducing the number of data values will improve system performance.</p></td>
</tr>
<tr class="odd">
<td><p>Permanently remove soft deleted data values</p></td>
<td><p>When a data value is deleted in DHIS2, the system will mark the corresponding database row as deleted, and not actually delete the row.</p>
<p>Running this maintenance function will physically remove these data value rows from the database.</p></td>
</tr>
<tr class="even">
<td><p>Prune periods</p></td>
<td><p>Removes all periods which have no registered data values. Reducing the number of periods will improve system performance.</p></td>
</tr>
<tr class="odd">
<td><p>Remove expired invitations</p></td>
<td><p>Will delete users which represent user account invitations that now have gone past their expiry date.</p></td>
</tr>
<tr class="even">
<td><p>Drop SQL views</p></td>
<td><p>DHIS2 lets you set up and manage SQL views as system objects with corresponding database SQL views.</p>
<p>Running this maintenance function will drop underlying SQL views for all system views. Use the <strong>Create SQL views</strong> function to recreate these SQL views.</p></td>
</tr>
<tr class="odd">
<td><p>Create SQL views</p></td>
<td><p>Recreates all SQL views in the database.</p></td>
</tr>
<tr class="even">
<td><p>Update category option combinations</p></td>
<td><p>Rebuilds the category option combinations. This may be required after altering the category options which belong to a given category.</p></td>
</tr>
<tr class="odd">
<td><p>Update organisation unit paths</p></td>
<td><p>The organisation unit table in the DHIS2 database has a column &quot;path&quot; which contains a concatenated string of all ancestors in the hierarchy for each organisation unit.</p>
<p>Running this maintenance function will update and ensure that these values are in sync with the current organisation unit hierarchy. This column is managed by DHIS2, but a manual update might be useful when doing data loading directly in the database.</p></td>
</tr>
<tr class="even">
<td><p>Clear application cache</p></td>
<td><p>Clears the system cache.</p></td>
</tr>
<tr class="odd">
<td><p>Reload apps</p></td>
<td><p>Manually reloads and detects installed DHIS2 apps.</p>
<p>The installed apps are also detected when the system starts and when installing or uninstall apps.</p></td>
</tr>
</tbody>
</table>

## 资源表 { #dataAdmin_resourceTables }

资源表是在分析过程中使用的支持表
数据。通常，将这些表的内容与
从第三方应用程序（例如，
Microsoft Excel。分析模块也广泛使用它们
DHIS2。资源表的重新生成只能执行一次
解决了所有数据完整性问题。资源表也
每次运行分析过程时，
系统。

-   组织单位结构（\ _orgunitstructure）

    每当对组织单位层次结构进行任何更改时，都应重新生成此表。此表提供有关组织单位层次结构的信息。每个组织单元有一行，每个组织单元级别有一个列，以及沿袭中所有父级的组织单元标识符作为值。

-   数据元素组集结构（\ _dataelementgroupsetstructure）

    此表提供有关哪些数据元素是哪些数据元素组集的成员的信息。该表对于每个数据元素具有一行，对于每个数据元素组集具有一列，并且数据元素组的名称作为值。

-   指标组集结构（\ _indicatorgroupsetstructure）

    此表提供有关哪些指标是哪些指标组集的成员的信息。表格中每个指标有一行，每个指标组集有一列，指标组的名称作为值。

-   组织单位组集结构（\_organisationunitgroupsetstructure）

    此表提供有关哪些组织单位是哪些组织单位组集的成员的信息。表格中每个组织单位为一行，每个组织单位组集为一列，组织单位组的名称作为值。

-   类别结构（\ _categorystructure）

    此表提供有关哪些数据元素属于哪些类别的信息。该表为每个数据元素提供一行，每个类别为一列，类别选项的名称作为值。

-   数据元素类别选项组合名称（\ _categoryoptioncomboname）

    每当类别组合名称发生更改时，都应重新生成此表。它包含各种类别组合的可读名称。

-   数据元素结构（\ _dataelementstructure）

    此表提供有关所有数据元素及其捕获数据的周期类型（频率）的信息。周期类型是通过数据集成员确定的，因此依赖于数据元素作为具有相似周期类型的数据集的成员来具有定义的行为。

-   期间结构（\ _dataperiodstructure）

    此表提供有关所有期间及其关联的期间类型的信息。对于频率低于自身的每个周期类型，它包含有关它将属于哪个周期的信息。

-   数据元素类别选项组合 (\_dataelementcategoryoptioncombo)

    此表提供了数据元素和所有可能的类别选项组合之间的映射。

## 分析表管理 { #analytics_tables_management }

DHIS2 generates database tables which the system then uses as basis for various analytics functions. These tables are also valuable if you write advanced SQL reports. In the **Data Administration** app, you can execute the tables generation immediately. If you want to schedule them to be executed at regular intervals, this can be done in the **Scheduler** app. This means that you can refresh recent analytics on demand and see updated pivot tables without waiting for all of the past years data to re-process.

> **注意**
>
> 您还可以通过 Web API 生成表格。此任务通常由系统管理员执行。

1.  Open the **Data Administration** app and click **Analytics Tables**.

2.  选择要跳过的分析过程部分：

    -   **跳过资源表的生成**

    -   **跳过汇总数据和完整性数据的生成**

    -   **跳过事件数据的生成**

    -   **跳过注册数据的生成**

3.  Select **Number of last years of data to include**.

4.  点击**开始导出**。

## 数据统计 { #dataAdmin_dataStatistics }

数据统计模块提供了对象数量的概述
存储在DHIS2数据库中。

![](resources/images/maintainence/data_stats.png)

每种类型的对象的总数以一系列
表，其中包含每个对象的摘要统计信息。

## 锁定异常 { #dataAdmin_lockException }

锁定异常可提供对豁免的细粒度控制
锁定的数据集。数据集到期后，数据输入将为
默认情况下被拒绝，除非已通过锁定授予了例外
异常接口。要启用锁定异常，请选择所需的
组织单位，数据集和时间段，然后按“添加”。通过
授予锁定例外，即使在
数据集的有效期限已过。

![](resources/images/maintainence/create_lock_exception.png)

在上面的示例中，将为“ ab
“丰富的生命组织”和“ ab第七日医院”的“护理”
和支持”数据集（“ 2012年2月”）。

## 最小-最大值生成 { #dataAdmin_minMaxValueGeneration }

此管理功能可用于生成最小值-最大值，
作为数据质量和验证过程的一部分，
特定的组织单位和数据集。只需选择数据集
从左手框架，然后选择所需的组织
单位以从组织单位生成最小-最大值
右侧的选择器。按“生成”按钮生成或
重新生成所有最小-最大值。按“删除”删除所有最小-最大
当前存储在数据库中的值。

![](resources/images/maintainence/min_max_value_generation.PNG)

## 缓存统计 { #dataAdmin_cacheStatistics }

此选项仅供系统管理员使用。缓存
统计信息显示应用程序级别缓存的状态。的
应用程序级缓存是指对象和查询结果
应用程序正在缓存以提高性能。如果数据库
已直接修改，需要清除应用程序缓存
它才能生效。

# 可视化使用情况统计 { #using_usage_analytics }

## 关于使用情况分析应用 { #about-the-usage-analytics-app }

![](resources/images/usage_analytics/usage_analytics_interface.png)

The **Usage Analytics** app lets you visualize statistics on how users are working with the **Dashboard**, **Pivot Table**, **GIS**, **Event Visualizer**, **Data Visualizer** and **Event Reports** apps within DHIS2. With this statistics you can answers questions such as:

-   人们加载了多少次图表、数据透视表和仪表板？

-   用户创建了多少个收藏夹？

-   登录的用户数与用户总数之比？

-   什么是最受欢迎的收藏夹？

## 创建使用情况分析图 { #usage_analytics_create_chart }

1.  Open the **Usage Analytics** app.

2.  选择**开始日期**和**结束日期**。

3.  Select an **Interval**: day, week month or year.

4.  Select a **Category**.

    有五种分析类别：

    -   **收藏夹视图**：提供不同类型收藏夹（例如图表、数据透视表和仪表板）在一段时间内的查看次数。此分析可让您在所有类型的收藏夹、所有类型的总数和平均观看次数之间切换。

    -   **Favorites**：提供随着时间的推移在系统中创建和存储的收藏夹的数量。

    -   **用户**：提供一段时间内的活跃用户数和总用户数。

    -   **热门收藏夹**：按类型显示系统中浏览次数最多的收藏夹。

    -   **数据值**：提供随时间存储在系统中的数据值的数量。

5.  点击**更新**。

# 数据存储管理器 { #datastore_manager_app }

数据存储管理器适用于高级DHIS2用户。之前
使用数据存储管理器，您可以阅读有关数据存储的更多信息
此处：[DHIS2数据
商店]（https://docs.dhis2.org/master/zh/developer/html/webapi_data_store.html）。

## 使用数据存储管理器 { #using-the-datastore-manager }

数据存储管理器可让您管理Web API数据的内容
商店。这在管理应用程序和外部脚本时很有用。

## 向数据存储管理器添加新的名称空间和密钥 { #add-a-new-namespace-and-key-to-the-datastore-manager }

注意：必须先创建名称空间，然后才能向其中添加键。

1.  点击**新建**。

2.  输入要创建的名称空间的名称。

3.  输入密钥名称，然后选择**创建**。新命名空间显示在左窗格中。

## 向数据存储管理器中的现有名称空间添加密钥 { #add-a-key-to-an-existing-namespace-in-the-datastore-manager }

要将新密钥添加到数据存储管理器中的现有名称空间，

1.  选择要向其添加键的名称空间。

2.  单击选项菜单，然后单击 **New key**。

    ![](resources/images/datastore_manager/datamgr_add_key.png)

3.  在“新建密钥”对话框中输入密钥名称。

4.  点击**创建**。新键将添加到您选择的命名空间。

## 从数据存储管理器中删除名称空间或键 { #delete-a-namespace-or-key-from-the-datastore-manager }

To delete a namespace, or key, click the Options menu, and then click **Delete**, and then **Delete** again. Note that if you delete the only key in a namespace, you will also delete the namespace it belongs to.

## 搜索名称空间或键 { #search-for-namespaces-or-keys }

使用左上角的搜索工具搜索名称空间和
关键如下：

-   输入命名空间名称，后跟 **\#** 和键名称以在命名空间中搜索特定键。

-   输入 **\#** 后跟密钥名称以仅搜索密钥。

![](resources/images/datastore_manager/datamgr_search_namespaces_keys.png)

## 搜索您的JSON库 { #search-your-json-library }

使用工作区工具栏中的搜索工具搜索JSON
图书馆。

![](resources/images/datastore_manager/datamgr_searchJSON.png)

## 在数据存储管理器中编辑名称空间或键 { #edit-namespaces-or-keys-in-the-datastore-manager }

Use the **Search** tool to find namespaces or keys in your datastore. When you edit your content, you can toggle between the **Tree** view and the **Code** view. Use the **Tree** view to get an overview of the contents of the Datastore. Use the **Code** view to edit your code directly in the code editor. Remember to save your work by clicking the **Save** button.

![](resources/images/datastore_manager/datamgr_treeview.png)

在代码视图中，您可以编辑代码。当您编辑一行代码时，
它以黄色突出显示。

![](resources/images/datastore_manager/datamgr_codeview.png)

任何错误均由编辑器标记。如果将鼠标悬停在错误图标上，
您可以查看错误的简短说明。

![](resources/images/datastore_manager/datamgr_editcode_error.png)

# 排程 { #scheduling }

计划程序是用于管理DHIS2中的后台作业的应用程序。
后台作业可以执行许多任务，例如运行分析，
同步数据和元数据，或发送推送分析报告。的
应用程序提供了创建，修改和删除此类作业的功能。

调度程序与DHIS2捆绑在一起，可以通过应用程序进行访问
菜单。

![](resources/images/scheduler/overview.png)

Scheduler 应用程序的起始页显示现有作业的概览。默认情况下，预定义的系统作业是隐藏的。要查看这些，请在右上角切换_显示系统作业_。

创建或修改作业时，将根据以下日期重新安排作业
选择的首选项。要按需运行作业，请按绿色三角形
标记为“立即运行”。此操作仅适用于已启用的作业。

## 创造工作 { #scheduling_create_job }

1.  打开** Scheduler **应用程序，然后单击右下角的添加按钮。

2.  Choose a suitable **Name** for the new job.

3.  选择作业的运行频率，即作业应在何时以及多久运行一次。

    1.  您可以从下拉菜单中选择一个预定义的频率，或者

    2.  如果您需要特定的计划，您可以使用 [Spring scheduling](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html) 语法为作业提供自定义的 **Cron 表达式**。
    3.  Enabling the **Continuous execution** option will make the job run constantly. In other words, as soon as the job finishes, it will be scheduled to run again right away. Selecting this option will disable the other fields.

4.  Select the **Job type** you want to schedule using the drop-down menu.

5.  If the job type is customizable, a **Parameters** section will appear below. These additional options specify the details of the scheduled job, and will vary greatly depending on the job type.

6.  Press the **Add job** button to confirm the job creation. The newly created job should now be listed in the job overview, given that the **Show system jobs** setting is not enabled.

![](resources/images/scheduler/add_new_job.png)

默认情况下启用作业。

## 配置工作 { #scheduling_configure_job }

拥有适当的权限，您可以修改用户创建的详细信息
职位。请注意，对于系统作业，只有计划（cron表达式）可以
被改变。

To quickly enable or disable a user created job from running, use the **Enabled** column on the landing page of the Scheduler app. System jobs are always enabled.

进一步配置作业：

1.  Select a job from the landing page to unveil the **Attributes** and change them to accordingly. See the previous section for scheduling details.

2.  If the job type supports extra options, the **Parameters** section will also be available.

3.  When done, press the **Save changes** button to persist the changes.

## 删除工作 { #dataAdmin_scheduler_delete }

1.  选择要删除的作业。

2.  Press the **Delete** button in the bottom right corner.

3.  在弹出窗口中再次按** Delete **进行确认。

![](resources/images/scheduler/delete_job.png)

## 工作类型 { #job-types }

以下部分描述了各种作业类型。

### 资源表 { #scheduling_resource_table }

资源表作业负责生成和更新资源数据库表。这些表由DHIS 2中的各个组件使用，旨在简化针对数据库的查询。

请注意，当指定任何分析表作业时，资源表可以是该过程的一部分，并且也不必指定资源表作业。

### 分析表 { #scheduling_analytics_table }

分析表作业负责生成和更新分析表。分析表用作DHIS2中数据分析查询的基础。仪表板，可视化工具和地图等应用程序通过DHIS2分析API从这些表中检索数据，并且必须对其进行更新才能使分析数据可用。您可以安排此过程通过分析表作业类型定期运行。

默认情况下，分析表作业将填充所有年份和数据元素的数据。可以使用以下参数：

-   **过去几年：**为其填充分析表的最后几年的数量。例如，如果您指定2年，则该过程将更新最近两年的数据，而不更新较旧的数据。此参数对减少过程完成所需的时间很有用，并且如果旧数据没有更改，并且需要更新最新数据，则该参数非常适用。
-   **跳过资源表：**在分析表更新过程中跳过资源表。这减少了过程完成所需的时间，但导致元数据的更改未反映在分析数据中。
-   **跳过表类型：**跳过一种或多种分析表类型。这减少了过程完成所需的时间，但导致这些数据类型未在分析数据中更新。

### 连续分析表 { #scheduling_continuous_analytics_table }

分析表作业负责生成和更新分析表。分析表用作DHIS2中数据分析查询的基础。仪表板，可视化工具和地图等应用程序通过DHIS2分析API从这些表中检索数据，并且必须对其进行更新才能使分析数据可用。您可以安排此过程通过分析表作业类型定期运行。

连续分析表作业基于两个阶段：

-   _最新更新：_最新数据的更新，其中最新是指自上次更新最新数据或完整数据以来已添加，更新或删除的数据。此过程将经常发生。
-   _完整更新：_多年来所有数据的更新。此过程每天进行一次。

连续分析表作业将经常更新最新数据。最新数据处理使用特殊的数据库分区，该分区仅用于保存最新数据。由于数据量相对较少，因此可以快速刷新此分区。分区的大小将增加，直到执行完全更新。每天一次，将更新所有年份的所有数据。这将清除最新的分区。

默认情况下，分析表作业将填充所有年份和数据元素的数据。可以使用以下参数：

-   **一天中的完整更新时间：**一天中的完整更新将在这一小时完成。例如，如果您指定1，则将在凌晨1点执行完整更新。
-   **过去几年：**为其填充分析表的最后几年的数量。例如，如果您指定2年，则该过程将更新最近两年的数据，而不更新较旧的数据。此参数对减少过程完成所需的时间很有用，并且如果旧数据没有更改，并且需要更新最新数据，则该参数非常适用。
-   **跳过资源表：**在分析表更新过程中跳过资源表。这减少了过程完成所需的时间，但导致元数据的更改未反映在分析数据中。

### 数据同步 { #scheduling_data_sync }

DHIS2 提供远程分布式实例和 DHIS2 中央实例之间的数据同步。这可能很有用，例如当您部署了多个独立的 DHIS2 实例时，需要将数据值提交到中央 DHIS2 实例。支持跟踪器数据和聚合数据同步。

这些是启用数据同步的步骤：

-   进入同步设置，输入远程服务器 URL、用户名和密码。按 TAB 键自动保存新密码。刷新页面并检查填充的值是否仍然存在。请注意，刷新后密码字段将为空，因为该值已加密，因此您可以认为它已保存。

-   使用 Scheduler 应用程序，使用“Event Programs Data Sync”和/或“Tracker Programs Data Sync”作业类型创建新作业。确保在完成时启用它。 （注意：如果之前版本中提供的“程序数据同步”作业之前在调度程序应用程序中设置，它会自动被两个新作业“事件程序数据同步”和“跟踪程序数据同步”替换为相同的设置。）

数据同步功能的某些方面需要注意：

-   本地 DHIS2 实例会将用户帐户的密码存储在本地数据库中加密的远程实例上。远程帐户用于传输数据时的身份验证。出于安全目的，请确保将 _hibernate.properties_ 中的 _encryption.password_ 配置参数设置为强密码。

-   强烈建议在 SSL/HTTPS 上部署远程服务器，因为用户名和密码使用基本身份验证以明文形式发送，并且可能被攻击者截获。

-   数据同步使用数据元素的UID属性、类别选项组合和组织单元来匹配元数据。因此，同步取决于这三个元数据对象在本地和远程实例上的协调，以便正常工作。

-   DHIS2 第一次运行同步作业时，它将包含所有可用数据。随后的同步作业将仅包括自上次成功作业以来添加和更改的数据。只有当所有数据都成功保存在远程服务器上时，同步作业才被认为是成功的（任何成功同步的数据都将保留在接收实例上，无论作业最终是否失败）。作业是否成功可以通过中央服务器返回的导入摘要来判断。

-   初始同步作业可能需要大量时间，可能会减慢您的实例速度，具体取决于同步的数据量。将作业配置为在在线用户很少时运行可能是一个好主意，然后将其更改为您自己的偏好。如果您不想或不需要同步所有数据，则可以将 <a href="#skip_changed_before"> 跳过一些正在同步的数据 </a> 。

    当 DHIS2 同步跟踪器数据时，它会根据上次同步的时间来确定要同步的数据集。每个被跟踪的实体实例和事件都有自己的最后一次成功同步时间的记录。

-   系统将根据作业配置中设置的规则启动同步作业。如果同步作业在没有连接到远程服务器时开始，它将重试多达 3 次，然后中止。该作业将在预定时间再次运行。

-   服务器分别处理每组程序，即一组程序同步成功，另一组同步失败。一个的失败或成功不会影响另一个，因为如前所述，每个项目的最后一次成功同步时间都是单独跟踪的。

-   TrackedEntityInstances的属性（TrackedEntityAttribute）和ProgramStages的数据元素（ProgramStageDataElement）如果开启了“跳过同步”选项，则不会同步。此功能允许您决定不同步某些敏感或不相关的数据，并仅将它们保存在本地。

-   The authority `Ignore validation of required fields in Tracker and Event Capture` (`F\_IGNORE\_TRACKER\_REQUIRED\_VALUE\_VALIDATION`) should be used when there is a requirement that some mandatory attribute / data element has at the same time a "Skip synchronization" property turned on. Such a setting will lead to validation failure on the central server as the given attribute / data element will not be present in the payload.

    对于具有此权限的用户，验证不会失败。该权限应分配给中央服务器上将用于同步作业的用户。

-   在特定情况下，**所有数据的初始同步可能是不可取的**；例如，当本地实例上的数据库是中央实例上存在的数据库的新副本时，或者当首选不同步旧数据以支持花费更少时间的初始同步时。

    The _syncSkipSyncForDataChangedBefore_ SettingKey can be used to skip the synchronisation of all the data (data values, Event and Tracker program data, complete data set registrations) that were _last changed before the specified date_. The `SettingKey` is used in the synchronization job all the time. Therefore, if you need to synchronize the old data, you should change the `SettingKey`.

-   Tracker Programs 和 Event Programs 同步作业都支持分页以避免超时和处理不稳定的网络。 “事件程序数据同步”作业的默认页面大小设置为 60。“跟踪程序数据同步”作业的默认页面大小设置为 20。

    如果默认值不适合您的目的，可以通过参数指定自己的页面大小，特别是调度程序应用程序中的同步作业。

### 元数据同步调度 { #scheduling_metadata_sync }

DHIS2提供了用于同步远程元数据的功能
实例到DHIS2的本地实例。当您有
部署了DHIS2的多个独立实例，您需要创建
所有本地实例中的元数据都类似于中央DHIS2
实例。

这些是启用元数据同步的步骤：

-   进入设置\>同步，输入远程服务器的URL、用户名和密码，然后点击保存。

-   转到元数据管理 \> 调度。在元数据同步设置策略为启用下，选择时间段并单击开始。

元数据同步功能的某些方面需要注意：

-   本地 DHIS2 实例会将远程实例的用户帐户的密码存储在其数据库中。远程用户帐户用于传输/下载数据时的身份验证。出于安全目的，请确保将 _hibernate.properties_ 中的 _encryption.password_ 配置参数设置为强密码。

-   强烈建议在 SSL/HTTPS 上部署远程服务器，因为用户名和密码使用基本身份验证以明文形式发送，并且可能被攻击者截获。

-   还要确保远程用户没有 ALL 权限，而是简单地创建一个具有 F_METADATA_MANAGE 权限的用户，这样即使这些细节被黑客截获，也无法完全控制远程系统。

-   元数据同步依赖于底层导入层。每个元数据版本都是两个给定时间戳之间元数据的导出。元数据版本的每次同步都是尝试将该元数据快照导入本地实例。版本的同步是增量的。本地实例将尝试从中心实例一个接一个地下载元数据版本。未能同步特定元数据版本将不会让同步继续到其他版本。如果发生故障，必须对中央元数据进行适当的更改，以确保错误得到解决。元数据配置至关重要，用户在将更新推出到生产环境时应该小心。始终建议准备好暂存环境，以确保元数据版本的健全性及其之后的影响。本地实例将同步第一个版本的元数据，以便保持和谐，本地和中央实例将正常工作。

-   系统将在预定时间尝试同步。如果本地或远程服务器当时没有有效的 Internet 连接，则同步将中止并在按照 _dhis.conf_ 文件中提到的重试计数后重新尝试。

-   您可以在“上次成功”标签旁边的计划屏幕中查看上次与远程服务器成功同步的时间。

# 导入/导出应用 { #import_export }

在初级卫生系统中，HMIS通常涉及分布式
应用程序，同一应用程序在不同的位置运行
地理位置（PHC，CHC，医院，地区和州）。
这些物理位置中许多都没有Internet连接，并且
因此他们离线工作。在某个时候（通常在该地区
级别），则数据需要同步才能具有
特定地理区域的统一数据库。对于
因此，重要的是能够从一个位置导出数据（
正在离线工作（例如在医疗机构级别），然后导入
另一个（例如在地区级别）。
因此，导出和导入的此功能是HMIS的关键功能。
此功能还可以帮助我们克服某些方面对Internet的依赖
度，因为数据更新可以通过没有密钥的USB密钥进行传输
连接性，或者在互联网有限的情况下通过电子邮件
连接性。 DHIS2提供了强大的导出-导入功能来
满足这些需求。

要访问导入/导出应用，请在顶部标题栏中搜索
进出口。导入/导出应用程序提供了许多服务详细信息
可以在下面找到。

![](resources/images/import_export/overview.png)

## 汇入资料 { #importing_data }

### 导入进度记录器 { #import_progress_logger }

无论您导入什么（“Data”、“Events”、“GML”、“Metadata”或“Tracked Entity Instances”数据），您始终可以通过查看顶部的“Job Summary”来查看导入进度的页面。

### 导入摘要 { #metadata_import_summaries }

导入请求完成后，我们会在导入表单上方显示导入摘要。任何冲突或错误都会显示在导入的主要摘要下方的表格中。

![](resources/images/import_export/import_summary.png)

### 元数据导入 { #metadata_import }

可以从侧边栏单击来访问元数据导入
元数据导入。

![](resources/images/import_export/metadata_import.png)

1.  选择要上传的文件

2.  从可用格式中选择，例如_JSON_、_XML_ 或 _CSV_

3.  选择以下适当的设置：

    -   识别码
    -   导入报告模式
    -   预热模式
    -   导入策略
    -   原子模式
    -   合并模式

4.  Click **Advanced options** if you want to adjust one or more of the following settings before importing:

    -   冲洗模式
    -   跳过分享
    -   跳过验证
    -   异步
    -   包容性策略

5.  Click on the **Import** button which will upload the file and start the importing process.

> **Tip**
>
> **It is highly recommend to use the Dry run option** to test before importing data; to make sure you keep control over any changes to your Metadata, and to check for problems with out-of-sync data elements or organisation unit names

> **Note**
>
> If an organisation unit e.g. `Nduvuibu MCHP` had a unknown reference to an object with ID `aaaU6Kr7Gtpidn`, it means that the object with ID `aaaU6Kr7Gtpidn` was not present in your imported file, and it was not found in the existing database.
>
> You can control this using **Identifier** option, to indicate if you want to allow objects with such invalid references to be imported or not. If you choose to import invalid references you will have to correct the reference manually in DHIS2 later.

#### DXF2中的匹配标识符 { #matching_identifiers_in_dxf2 }

DXF2格式目前支持匹配两个标识符，即
内部DHIS2标识符（称为UID），也使用外部
标识符称为“代码”。进口商尝试搜索时
对于引用（例如上面的引用），它将首先转到UID字段，
然后转到代码字段。这使您可以从旧版导入
系统中没有每个元数据对象的UID。即如果你是
从旧版系统导入设施数据，您可以省略ID
完整字段（DHIS2将为您填写），然后将
代码字段中的旧系统自己的标识符，此标识符为
必须是唯一的。这不仅适用于组织单位，而且
用于各种元数据，从而可以轻松地从其他系统导入。

### 资料汇入 { #import }

可以通过单击侧边栏上的数据来访问数据导入
进口。

![](resources/images/import_export/data_import.png)

1.  选择要上传的文件

2.  从可用格式中选择：_JSON_、_XML_、_PDF_、_ADX_ 或 _CSV_

3.  选择以下适当的设置：

    -   战略
    -   预热缓存

4.  Click **Advanced options** if you want to adjust one or more of the following settings before importing:

    -   数据元素ID方案
    -   组织单位ID方案
    -   ID方案
    -   跳过现有支票

5.  Click on the **Import** button which will upload the file and start the importing process.

> **提示**
>
> **强烈建议在导入数据前使用试运行选项**进行测试；确保您控制对元数据的任何更改，并检查数据元素或组织单位名称不同步的问题

#### PDF资料 { #importPDFdata }

DHIS2 supports import of data in the PDF format. This can be used to import data produced by off-line PDF data entry forms. Please refer to the section **Data set management** for details on how to produce a PDF form which can be used for off-line data entry.

To import a PDF data file, navigate to the _PDF Data Import_ item in the side menu. Upload the completed PDF file and click _Import_.

### 事件汇入 { #event_import }

通过单击事件可以从边栏中访问事件
进口。

![](resources/images/import_export/event_import.png)

1.  从可用格式中选择，例如_JSON_、_XML_ 或 _CSV_

2.  Click **Advanced options** if you want to adjust one or more of the following settings before importing:

    -   事件ID方案
    -   数据元素ID方案
    -   组织单位ID方案
    -   ID方案

3.  Click on the **Import** button which will upload the file and start the importing process.

### GML导入 { #gml_import }

单击侧边栏上的GML可以访问GML导入
进口。

![](resources/images/import_export/gml_import.png)

1.  使用 _GML_（地理标记语言）格式上传文件。

2.  Click on the **Import** button which will upload the file and start the importing process.

### 跟踪实体实例导入 { #tei_import }

跟踪实体实例导入可以通过单击 TEI 导入从侧边栏访问。

![](resources/images/import_export/tei_import.png)

1.  选择要上传的文件

2.  从可用格式中选择，例如_JSON_ 或 _XML_

3.  选择以下适当的设置：

    -   识别码
    -   导入报告模式
    -   预热模式
    -   导入策略
    -   原子模式
    -   合并模式

4.  Click **Advanced options** if you want to adjust one or more of the following settings before importing:

    -   冲洗模式
    -   跳过分享
    -   跳过验证
    -   包容性策略

5.  Click on the **Import** button which will upload the file and start the importing process.

> **提示**
>
> **强烈建议在导入数据前使用试运行选项**进行测试；确保您控制对被跟踪实体实例的任何更改。

## 汇出资料 { #exporting-data }

### 元数据导出 { #metadata_export }

单击侧边栏上的，可以访问元数据导出
元数据导出。

![](resources/images/import_export/metadata_export.png)

1.  选择您要导出的对象列表。

2.  选择导出 _format_ _JSON_、_CSV_ 或 _XML_

3.  选择 _compression_ 类型 _zip_ 、 _gzip_ 或 _uncompressed_

4.  Choose option _Sharing_ with or without sharing.

5.  Click **Export metadata** which will open a new web-browser window that will give you a file to download to your local computer.

### 具有依赖项的元数据导出 { #metadata_export_dependencies }

具有依赖项的元数据导出使您可以为以下内容创建罐头导出
元数据对象。这种类型的导出将包括元数据对象
和元数据对象的相关对象；即元数据
与主要对象一起属于

<table>
<caption>Object types and their dependencies</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Dependencies included in export</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Data sets</strong></p>
<!--DHIS2_SECTION_ID:docs-internal-guid-4a3662ce-63b9-1efd-e640-8ba874d1bcde--></td>
<td><p>Data elements</p>
<p>Sections</p>
<p>Indicators</p>
<p>Indicator types</p>
<p>Attributes</p>
<p>Data entry forms</p>
<p>Legend sets</p>
<p>Legends</p>
<p>Category combinations</p>
<p>Categories</p>
<p>Category options</p>
<p>Category option combinations</p>
<p>Option sets</p></td>
</tr>
<tr class="even">
<td><p>Programs</p></td>
<td><p>Data entry form</p>
<p>Tracked entity</p>
<p>Program stages</p>
<p>Program attributes</p>
<p>Program indicators</p>
<p>Program rules</p>
<p>Program rule actions</p>
<p>Program rule variables</p>
<p>Program attributes</p>
<p>Data elements</p>
<p>Category combinations</p>
<p>Categories</p>
<p>Category options</p>
<p>Category option combinations</p>
<p>Option sets</p></td>
</tr>
<tr class="odd">
<td><p>Category combination</p></td>
<td><p>Category combinations</p>
<p>Categories</p>
<p>Category options</p>
<p>Category option combinations</p>
<p>Attributes</p></td>
</tr>
<tr class="even">
<td><p>Dashboard</p></td>
<td><p>Dashboard items</p>
<p>Charts</p>
<p>Event charts</p>
<p>Pivot tables</p>
<p>Event reports</p>
<p>Maps</p>
<p>Reports</p>
<p>Resources</p></td>
</tr>
<tr class="odd">
<td><p>Data element groups</p></td>
<td><p>Data elements</p>
<p>Category combinations</p>
<p>Categories</p>
<p>Category options</p>
<p>Category option combinations</p>
<p>Option sets</p>
<p>Attributes</p>
<p>Legend sets</p>
<p>Legends</p></td>
</tr>
<tr class="even">
<td><p>OptionSets</p></td>
<td><p>Option</p></td>
</tr>
</tbody>
</table>

![](resources/images/import_export/metadata_dependency_export.png)

![](resources/images/import_export/metadata_dependency_export_object_types.png)

1.  选择一个**对象类型**：**数据集**、**程序**、**类别组合**、**仪表板**、**数据元素组**或**选项集**。

2.  选择一个**对象**。

3.  选择一种格式：** JSON **或** XML **。

4.  选择** Compression **：** Zip **，** Gzip **或** Uncompressed **。

5.  Click **Export metadata dependencies** which will open a new web-browser window that will give you a file to download to your local computer.

### 资料汇出 { #data_export }

可以通过单击数据从侧边栏访问数据导出
出口。

![](resources/images/import_export/data_export.png)

1.  选择_组织单位_。

2.  选择是否要导出以包括在步骤 1 中选择的组织单位的后代或仅包括手动选择的组织单位。

3.  选择_数据集_。

4.  设置 _Start_ 和 _End Date_ 。

5.  选择一种格式：** XML **，** CSV **或** JSON **。

6.  选择** Compression **：** Zip **，** Gzip **或** Uncompressed **。

7.  Click **Advanced options** if you want to adjust one or more of the following settings before exporting:

    -   包括已删除
    -   数据元素ID方案
    -   组织单位ID方案
    -   ID方案

8.  Click **Export data** which will open a new web-browser window that will give you a file to download to your local computer.

### 活动导出 { #event_export }

通过单击事件可以从边栏中访问事件导出
出口。

![](resources/images/import_export/event_export.png)

You can export event or tracker data in **XML** , **JSON** or **CSV** formats.

1.  选择一个组织单位。

2.  选择**包含**：

    -   **已选择**：仅导出所选组织单位的事件数据

    -   **直接在下方**：导出事件数据，包括选项内的第一级组织单元以及所选组织单元本身。

    -   **以下全部**：导出选择中的所有组织单位以及所选组织单位本身的事件数据。

3.  选择一个程序和一个程序阶段（如果适用）。

4.  选择**开始日期**和**结束日期**。

5.  选择一种格式：** XML **，** JSON **或** CSV **。

6.  选择** Compression **：** Zip **，** Gzip **或** Uncompressed **。

7.  Click **Advanced options** if you want to adjust one or more of the following settings before exporting:

    -   包括已删除
    -   数据元素ID方案
    -   组织单位ID方案
    -   ID方案

8.  Click **Export events** which will open a new web-browser window that will give you a file to download to your local computer.

### 跟踪实体实例导出 { #tei_export }

通过单击 TEI 导出，可以从侧边栏访问跟踪的实体实例导出。

![](resources/images/import_export/tei_export.png)

You can export event or tracker data in **XML** , **JSON** or **CSV** formats.

1.  选择应包括的_组织单位_。

2.  选择是否要按 _program_ 或 _tracked entity type_ 进行过滤。

3.  选择一种格式：** XML **，** JSON **或** CSV **。

4.  Click **Advanced options** if you want to adjust one or more of the following settings before exporting:

    -   按上次更新日期筛选
    -   分配的用户模式
    -   包括已删除
    -   包括所有属性
    -   数据元素ID方案
    -   事件ID方案
    -   组织单位ID方案
    -   ID方案

5.  Click **Export tracked entity instances** which will open a new web-browser window that will give you a file to download to your local computer.

## 工作概述 { #job_overview }

通过单击_工作概述_，可以从侧边栏中访问工作概述页面。

![](resources/images/import_export/job_overview.png)

此页面允许您查看已开始此会话的所有导入的进度。您可以在左侧查看所有作业的列表，在右侧查看特定选定作业的详细信息。

### 按导入作业类型过滤 { #filtering-by-import-job-type }

![](resources/images/import_export/job_overview_filter.png)

默认情况下，所有导入类型的作业都显示在作业列表中，但您可以通过单击作业列表上方的作业类型过滤器来过滤您感兴趣的类别。

### 重新创建上一份工作 { #recreating-a-previous-job }

![](resources/images/import_export/job_overview_recreate.png)

假设您从列表中选择了一个作业，您可以通过单击页面底部的_Recreate job_ 按钮重新创建以前运行的导入作业。这将带您进入正确的导入页面，并完全按照您选择重新创建的作业填写所有表单详细信息。

## 方案 { #schemes }

许多导入和导出页面中使用的各种方案也称为标识符方案，用于在导入期间将元数据对象映射到其他元数据，并将元数据呈现为导出的一部分。

 <table>
 <caption> 可用值 </caption>
 <colgroup>
 <col style="width: 14%" />
 <col style="width: 85%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> 方案 </th>
 <th> 说明 </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> ID，UID </td>
 <td> 匹配 DHIS2 稳定标识符，这是默认的 id 方案。 </td>
 </tr>
 <tr class="even">
 <td> 代码 </td>
 <td> Match on DHIS2 Code，主要用于与外部系统交换数据。 </td>
 </tr>
 <tr class="odd">
 <td> 名称 </td>
 <td> 匹配 DHIS2 名称，请注意，这使用的是可用的 <em> object.name </em> ，而不是翻译后的名称。另请注意，名称并不总是唯一的，在这种情况下，它们不能被使用。 </td>
 </tr>
 <tr class="even">
 <td> 属性：ID </td>
 <td> 匹配元数据属性，该属性需要分配给您要匹配的类型，并且唯一属性设置为 <em> true </em> 。它的主要用途也是与外部系统交换数据，它比 <em> CODE </em> 有一些优势，因为可以添加多个属性，因此可以用于与多个系统同步。 </td>
 </tr>
 </tbody>
 </table>

### ID方案 { #id-scheme }

ID 方案适用于所有类型的对象，但可以被更具体的对象类型覆盖。

# 配置元数据同步 { #metadata_sync }

## 关于数据和元数据同步 { #about-data-and-metadata-synchronization }

您可以在不同的DHIS2实例之间同步数据和元数据。
给定中央本地部署策略中的两个实例，元数据
在中央系统创建的可以与本地系统同步
并且在本地系统创建的数据可以与
中央系统。当您有多个独立服务器时，这很有用
DHIS2实例和全局元数据都需要创建
本地实例。

![](resources/images/metadata_synchronization/dhis2_architecture.png)

元数据的创建和更新是否在中央系统进行，以及
启用元数据同步任务，获取元数据
向下同步到绑定到
中央实例。这些本地实例将依次推送数据值，
事件和跟踪程序的数据以及完整的数据注册集
中央实例。启用或禁用元数据版本控制
在本地实例上同步，不会阻碍元数据
同步过程。这是因为元数据同步
与中央实例的版本控制端点交互，而不与
带有本地实例的端点。

生成的元数据导出的每个快照都称为元数据
版。新的元数据版本仅包含
先前版本和当前版本之间的导出
两个时间戳记。所有元数据版本都在DHIS2中维护
数据库，并且可用于连接到该数据库的所有本地实例。
您可以安排每个本地实例以下载新的元数据
版本。建议保持元数据版本的大小较小
和逻辑。

> **Warning**
>
> Each instance of DHIS2, whether central or local, can create metadata versions. The local instance is meant to synchronize metadata from a central system and not create metadata on its own.
>
> If a new metadata version is created on the local instance, this instance can't receive new metadata versions from the central instance, since the content of the metadata versions will be out of synchronization.
>
> If you've created metadata versions on a local instance, you must manually deleted these versions from the database before you can synchronize with the central instance.
>
> Assume the central and local DHIS2 instances have identical metadata snapshots until version 10. Then the local instance creates a new snapshot called version 11. After that, the central instance creates a new snapshot called version 11. When the local instance attempts to synchronize metadata, version 11 is not downloaded. However, the content of version 11 on the local instance is not identical to the content of version 11 on the central instance.

> **Note**
>
> You can also use the **Import-Export** app to synchronize metadata manually.

## 工作流程 { #workflow }

1.  在中央实例上，配置元数据版本控制。一旦中央实例包含元数据，您就应该这样做。

2.  将本地实例连接到中央实例。

3.  在本地实例上，配置自动同步。

## 在中央实例上配置元数据版本控制 { #configure-metadata-versioning-on-central-instance }

> **注意**
>
> 要同步元数据，中央系统的用户帐户必须具有以下权限：
>
> **F_METADATA_MANAGE**
>
> 只有拥有此权限的用户才能创建和下载元数据。这是为了确保创建元数据的中央系统的安全性。您需要创建一个仅具有此特定权限的用户，而不是将具有 ALL 权限的用户的凭据提供给字段实例。

1.  On the central instance, open the **System Settings** app and click **Synchronization**.

2.  Go to the **Metadata versioning** section and select **Enable versioning for metadata sync**.

    ![](resources/images/metadata_synchronization/metadata_versioning.png)

3.  （可选）选择**如果DHIS2版本不同，则不同步元数据**。

4.  选择一种元数据版本：**尽力而为**或**原子**。

    -   _尽力而为_意味着如果元数据导入遇到缺失的引用（例如数据元素组导入中缺失的数据元素），它会忽略错误并继续导入。

    -   _Atomic_ 表示全有或全无 - 如果任何引用不存在，元数据导入将失败。

        > **Note**
        >
        > Each metadata entity is associated with a "User" object. If this "User" reference is missing while importing metadata version of type ATOMIC, the import will fail at the validation phase itself. This means that the user who creates metadata also needs to synchronize down to local instances to successfully import the metadata version of type ATOMIC.

5.  Click **Create new version**. The new version is added to the versioning table.

## 将本地实例连接到中央实例 { #connect-local-instance-to-central-instance }

要启用元数据同步，必须配置连接
在本地实例和中央实例之间。

1.  On the local instance, open the **System Settings** app and click **Synchronization**.

2.  将中央DHIS2实例的详细信息添加到本地实例：

    -   **远程服务器URL **

    -   **远程服务器用户名**

    -   **远程服务器密码**

3.  Go to the **Metadata versioning** section and select **Enable versioning for metadata sync**.

4.  （可选）选择**如果DHIS2版本不同，则不同步元数据**。

    DHIS2 版本之间的元数据模式会发生变化，这可能会导致不同的元数据版本不兼容。

    启用后，如果中央和本地实例具有不同的 DHIS2 版本，则此选项将不允许发生元数据同步。这适用于通过用户界面和 API 完成的元数据同步。

    禁用此选项可能有价值的唯一情况是在同步基本实体（例如数据元素）时，这些实体在 DHIS2 版本之间没有更改。

5.  （可选）配置电子邮件通知以通知用户元数据同步成功或不成功：

    1.  Open the **System Settings** app and click **Email**.

    2.  输入**主机名**、**端口**、**用户名**、**密码**和**电子邮件发件人**。

    3.  Click **Server** and enter a **System notifications email address**.

        此电子邮件地址将收到有关元数据同步状态的通知。

    > **Tip**
    >
    > When you receive email notification about a metadata synchronization failure, check which metadata version that causes the error and resolve it. Then you avoid future errors when the system downloads new metadata versions.

## 在本地实例上配置自动元数据同步 { #configure-automatic-metadata-synchronization-on-local-instance }

一旦配置了自动元数据同步（计划）
在本地实例上，调度程序将在该特定时间运行，并且
从中央同步（下载和导入）元数据
实例。本地用户无需手动干预
实例。

调度程序完成元数据同步后，
本地实例将具有与中央实例完全相同的元数据
系统。

> **注意**
>
> 用户密码不同步。出于安全原因，它们被取消。元数据同步后，管理员用户必须重置这些密码。

1.  On the local instance, open the **Data Administration** app and click **Scheduling**.

2.  In the **Metadata Synchronization** section, select **Enabled**.

3.  选择一个时间段：**每天**、**每周**、**每月**或**每年**。

    ![](resources/images/metadata_synchronization/metadata_sync.png)

4.  点击**开始**。

## 在中央或本地实例上手动创建新的元数据版本 { #create-a-new-metadata-version-manually-on-central-or-local-instance }

1.  Open the **System Settings** app and click **Synchronization**.

2.  Go to the **Metadata versioning** section and select **Enable versioning for metadata sync**.

3.  （可选）选择**如果DHIS2版本不同，则不同步元数据**。

4.  Select **Best effort** or **Atomic**.

5.  Click **Create new version**. The new version is added to the versioning table.

当系统是_中央实例_时，您将在版本控制表中看到三列：

![](resources/images/settings/metadata_versioning_table.png)

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Master version</p></td>
<td><p>The latest version in the system.</p></td>
</tr>
<tr class="even">
<td><p>Version</p></td>
<td><p>Name of the version. The name is automatically generated by system.</p></td>
</tr>
<tr class="odd">
<td><p>When</p></td>
<td><p>The timestamp of the metadata version creation at the central instance.</p></td>
</tr>
<tr class="even">
<td><p>Type</p></td>
<td><p>Type of metadata version.</p></td>
</tr>
</tbody>
</table>

当系统是_本地实例_时，您将在版本控制表中看到四列：

![](resources/images/settings/metadata_versioning_table_failure_case.png)

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Master version</p></td>
<td><p>The latest version of the central instance.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>The master version information is the central instance's latest version. This is important to look at the difference between the versions of metadata that exist at central and at local.</p>
</blockquote></td>
</tr>
<tr class="even">
<td><p>Last sync attempt</p></td>
<td><p>If the last sync attempt is a failure, this will be displayed.</p></td>
</tr>
<tr class="odd">
<td><p>Version</p></td>
<td><p>Name of the version. The name is automatically generated by system.</p></td>
</tr>
<tr class="even">
<td><p>When</p></td>
<td><p>The timestamp of the metadata version creation at the central instance.</p></td>
</tr>
<tr class="odd">
<td><p>Type</p></td>
<td><p>Type of metadata version.</p></td>
</tr>
<tr class="even">
<td><p>Last sync</p></td>
<td><p>Timestamp of when the last sync happened for this version in this system.</p></td>
</tr>
</tbody>
</table>

## 参考信息：元数据同步配置参数 { #reference-information-metadata-synchronization-configuration-parameters }

执行元数据同步的过程称为元数据
同步任务。该任务在同步以下内容之前执行一系列步骤
元数据：

-   将数据（聚合数据和匿名事件数据）从本地实例推送到中央实例。

-   获取本地实例的当前元数据版本。然后使用此版本信息作为基线来获取在基线之后创建的元数据版本列表。

-   如果在中心实例上创建了新版本，它会一个接一个地执行元数据版本的同步。每次在本地实例成功同步元数据版本后，都会向配置的用户（如果有）发送一封邮件。

Once the Metadata Sync Task has run at the scheduled time, the task can retry (if any of the steps fail) based on the configuration of the following parameters defined in `dhis.conf` file:

 <table>
 <colgroup>
 <col style="width: 50%" />
 <col style="width: 50%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th>参数</th>
 <th>默认值</th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p> <code> metadata.sync.retry </code> </p> </td>
 <td> <p> 3 </p> </td>
 </tr>
 <tr class="even">
 <td> <p> <code>元数据.sync.retry.time.frequency.millisec </code> </p> </td>
 <td> <p> 30000 </p> </td>
 </tr>
 </tbody>
 </table>

每次重试将在指定的时间（毫秒）后进行。如果
即使所有重试后，步骤仍然失败，然后调度程序
停止执行，然后将邮件发送给配置的用户
（如果有）。如果未指定任何值，则默认值为
用过的。

`metadata.sync.retry` = 5

`metadata.sync.retry.time.frequency.millisec` = 10000

# 移动 { #mobile }

本章涵盖了各种移动技术，包括Web，J2ME，SMS
服务和SMS命令。

## DHIS2 Mobile简介 { #mobile_intro }

DHIS2提供了一系列选项，允许从移动设备输入数据
设备，包括专用的GPRS / 3G J2ME客户端和两个版本的
DHIS2已专门针对移动浏览器进行了优化。每
以下将详细描述这些解决方案
部分。 DHIS2提供了多个Android客户端，具体说明请参见
本指南其他部分中的详细信息。

现场数据的收集在技术上可能具有挑战性，
昂贵。手机解决方案具有显着的潜力
降低了部署分布式数据收集系统的复杂性。
使用安装在手机或Web浏览器上的简单Java客户端
可以在手机上使用，现场工作人员可以直接向
DHIS2数据库通过他们的移动设备。

尽管手机解决方案具有巨大的潜力，但仍有
这种部署的复杂性。手机缺乏处理能力，并且
显示屏很小，需要充电，通常这样
在贫困或断断续续的地区进行部署最有意义
网络覆盖范围。

下面简要介绍了每种移动解决方案，
在单独的部分中详细讨论：

-   DHIS2 Light：适用于所有设备的移动浏览器优化数据输入模块

    该模块允许直接使用移动设备的浏览器输入数据。支持多种设备和移动浏览器，包括：Opera mini 3 和 4（基本和高级）- Opera mini 4、Nokia S40 手机、Windows Phone 7、Window Mobile 6、Palm Pre、Blackberry（v5 和 v6）、Firefox移动设备、iOS 设备 (iPhone) 和 Android 设备。此客户端不支持离线，需要有效的 GPRS/3G 连接。它不需要在手机上安装新的应用程序来支持新功能，但需要稳定的数据连接才能使用。 [基于移动浏览器的数据输入](#mobile_web_based) 中描述了此解决方案

-   DHIS2 智能手机客户端：针对智能手机设备的移动浏览器优化数据输入模块

    该模块允许直接使用智能手机的浏览器输入数据。支持离线数据输入，无需在手机本身安装任何特殊客户端。

-   J2ME GPRS / 3G客户端

    DHIS-mobile 包括两个独立的 J2ME 客户端，支持 GPRS/EDGE/3G 作为传输机制。一个客户端支持设施汇总报告，第二个客户端支持基于名称的程序跟踪。这些客户端被拆分为单独的应用程序，以使部署更容易。一些卫生工作者可能在他们的手机上安装了这两种应用程序。这两个客户端都支持数据的离线存储并在支持 J2ME 的设备（功能手机）上工作。 .?\>

    需要有效的 GPRS/3G 连接才能将数据发送到 DHIS2 数据库，但可以离线输入数据并在存在连接时进行传输。此客户端主要用于支持 J2ME 应用程序的低端设备，尽管离线支持增加了一些内存要求，从而限制了手机的选择。虽然该解决方案主要在诺基亚手机上进行测试，但它也适用于其他几款支持 J2ME 的手机。

    设备报告 J2ME 客户端在“J2ME GPRS/3G 客户端”一章中描述

## 基于移动浏览器的数据输入 { #mobile_web_based }

### 移动浏览器数据输入入门 { #getting-started-with-mobile-browser-data-entry }

此方法适用于通过移动浏览器在智能手机上进行数据输入
通过导航到DHIS2实例的URL，例如：完整
[dhis2.org]（dhis2.org）上的演示的URL链接
 <http://apps.dhis2.org/dev/mobile/index.action>。还有你的手机
浏览器将自动检测服务器所在的DHIS2应用程序
给出了网址（例如：<http://apps.dhis2.org/dev>）。这是登录表格
使用用户名和密码访问应用程序。点击“登录”
继续或“重置”重置：

![](resources/images/dhis2_mobile_web_based/mobile-browser-login.png)

登录后，有功能列表：

![](resources/images/dhis2_mobile_web_based/mobile-browser-menu.PNG)

**- 汇总报告：** 组织单位定义/分配数据集的汇总数据条目

\-**追踪：**

-   查找人员：根据姓名、电话号码或 ID 以及组织单位查找人员。

-   活动计划：按组织单位、人员和程序/程序阶段为人员输入数据

-   人员注册：注册新人员

-   匿名：基于程序的匿名人条目

**- 消息：** 管理来自服务器的消息和讨论。可以留言回复。用户可以在消息中发送反馈消息。

**-报告：**服务器的输出报告。

\-**设置：**用户信息（例如：名字，姓氏，电话
号码，电子邮件）和界面语言。

**-注销：**退出应用程序。

**-桌面版本**：导航至DHIS2的桌面版本
行政。这需要来自客户端移动设备的大量资源，
例如：足够的内存来加载页面。不建议
适用于普通GPRS / 3G / ...电话。

上面的列表将详细说明：

1.  **汇总报告：** 组织单位定义/分配数据集的汇总数据条目。

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-aggregate-reporting.PNG)

    点击“聚合报告”，然后从列表中选择一个组织单位，将出现数据集列表，用于输入聚合数据。请参见以下示例：

    **第 1 步：从列表中选择一个组织单位**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-select-orgunit.png)

    **第 2 步：从列表中选择一个数据集（输入表单）**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-select-dataset.png)

    **步骤 3：从列表中选择一个时期（基于所选数据集的时期类型）**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-select-period.png)

    **第 4 步：输入数据**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-entry.png)

    **第五步：填写完数据后保存输入的数据，如果有请选择数据完整性选项。**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-entry-complete-save.png)

2.  **跟踪：** **查找/添加人员、访问时间表、人员注册、匿名**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-menu-2.PNG)

    2.1 **_查找/添加人员_**：根据姓名、电话号码或ID、组织单位查找人员。

    -   第 1 步：输入姓名、电话号码或 ID 并选择组织单位，然后单击搜索。

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-find-person-1.PNG)

    -   第二步：选择一个人

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-findPersonStep2.png)

        然后将显示该人的所有信息

    -   第三步：选择下一个程序阶段输入数据

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-findPersonStep3.png)

        要查看所有计划阶段，请单击该计划的名称（儿童健康计划作为屏幕截图）

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-findPersonStep3.1.png)

    2.2: **\*参观日程**:\*选择组织单位

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-org.png)

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-activityPlan.png)

    -   当前活动计划：已注册、已注册、尚未完成/完成一个/许多计划的受益人列表，并且至少有一个计划阶段可供数据输入。

        \+ _第 1 步：选择一个人进入_

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-BE.png)

        \+ _第 2 步：选择用于输入数据的当前和活动程序阶段_

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-PGS.png)

        您还可以通过单击详细信息（出现在列表顶部）查看此人的信息（ID、性别、出生日期和血型）

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-details.png)

        被选中人员的详细信息：

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-details-info.png)

    -   所有活动计划：所有已注册、已注册、尚未完成/完成一个/许多计划的受益人的列表。

    -   单项活动：

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-activityPlan-singleEvent.png)

    2.3：**人员注册：**注册新人员

    -   第一步：输入个人信息

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-personRegistrationStep1.png)

    -   步骤2：为刚刚注册的人注册程序，然后单击“注册”。

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-personRegistrationStep2.png)

    -   第 3 步：输入所选课程所需的信息，然后单击“注册”

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-personRegistrationStep3.png)

        结果如下：

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-personRegistrationStep4.png)

    2.4: **Anonymous:** 基于特定程序的匿名者条目

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-anonymous.png)

3.  **消息：**管理来自服务器的消息和讨论。可以留言回复。

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-messages-menu.PNG)

    显示的数字是未读消息。点击查看消息列表（未读消息以粗体和深蓝色显示）：

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-message-conversations.PNG)

    然后，您可以通过留下回复消息来获取讨论的消息/主题，请参见以下示例：

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-messages-reply.png)

    用户可以在消息部分创建反馈并将其发送到服务器。发送新反馈后，消息（反馈）将列在“消息”下，以便进一步跟进。

4.  **报告：**来自服务器的输出报告

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-reports.png)

    （将会被更新）

5.  **设置：** 用户信息（例如：名字、姓氏、电话号码、电子邮件）和界面语言。

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-settings.png)

    这是用于设置用户帐户/访问权限和界面语言的表格。点击“SAVE”完成设置，见下例：

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-settings-update.png)

6.  **注销：**注销应用程序

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-logout.png)

7.  **桌面版**：导航到 DHIS2 的桌面版进行管理。

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-desktop-version.png)

    这是桌面版的GUI（需要大量内存来加载），不推荐用于普通手机。 DHIS2 Demo 示例（来自 [dhis2.org](dhis2.org)）

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-desktop-version-GUI.png)

<!-- end list -->

1.  ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-data-entry.png)

    点击“Namebased Data Entry”后，接下来将引导到以下步骤中的选择：

    **第 1 步：选择组织单位**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-org.png)

    **第 2 步：选择活动类型**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-AC.png)

    （带有“当前活动计划”选项的示例的屏幕截图）

    通常会有以下两种类型的活动：

    \+“当前活动计划”：已注册、已注册、尚未完成/完成一个/许多计划的受益人列表，并且至少有一个计划阶段可供数据输入。

    \+“所有活动计划”：所有已注册、已注册、尚未完成/完成一个/许多计划的受益人的列表。

    **第 3 步：选择一个受益人进入**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-BE.png)

    （带有“ Hybia Welde”选项的示例的屏幕截图）

    **第 4 步：选择用于输入数据的当前和活动程序阶段**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-PGS.png)

    （带有“出生后 16-24 个月”选项的示例的屏幕截图）

    您还可以通过单击详细信息（出现在列表顶部）查看受益人的信息（身份证、性别、出生日期和血型）

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-details.png)

    所选受益人的详细信息：

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-details-info.png)

2.  **受益人注册：**注册一个新的受益人

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-beneficiary-registration.png)

    **第 1 步：选择一个组织单位**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-beneficiary-registration-choose-OU.png)

    **第 2 步：填写受益人登记表**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-beneficiary-registration-form.png)

    有必要的信息：全名、性别、出生日期（和血型）。

    点击“保存”以注册新的受益人。

    成功创建/注册受益人后，将显示“已成功保存”消息。

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-beneficiary-registration-form-success.png)

3.  **受益人注册：** 将受益人注册到一个或多个计划

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-beneficiary-enrollment.png)

    在将受益人注册到计划之前，提供了受益人搜索功能：

    如果找到受益人，将列出结果。只需单击受益人姓名即可导航到受益人注册的计划：

    以下屏幕截图示例描述了名为“Nguyen Van A”的受益人：

    \- 之前没有注册过任何课程

    \- 有一个计划：“儿童健康计划”可供注册

    将列出可供注册的可用课程列表。只需通过指定注册日期和事件日期单击注册程序。请参阅示例：

    点击“ENROLL”按钮后，如果成功，将在“Enrolled Programs for”+ \ <Name of the beneficiary\> 下列出已注册的程序，参见示例：

4.  **消息：**管理来自服务器的消息和讨论。可以留言回复。

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-messages.png)

    显示的数字是未读消息。点击查看消息列表（未读消息以粗体和深蓝色显示）：

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-messages-unread.png)

    然后，您可以通过留下回复消息来获取讨论的消息/主题，请参见以下示例：

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-messages-reply.png)

5.  **报告：**来自服务器的输出报告

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-reports.png)

    （将会被更新）

6.  **设置：** 用户信息（例如：名字、姓氏、电话号码、电子邮件）和界面语言。

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-settings.png)

    这是用于设置用户帐户/访问权限和界面语言的表格。点击“SAVE”完成设置，见下例：

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-settings-update.png)

7.  **反馈：** 用于创建新消息以发送到服务器的额外功能。新创建的反馈将列在“**消息**”下

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-feedback.png)

    单击“反馈”后，将出现一个用于编辑/发送新消息/讨论的表格。请参见下面的示例：

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-feedback-new.png)

    发送新反馈后，消息（反馈）将列在“消息”下，以便进一步跟进。

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-feedback-listed-in-messages.png)

8.  **注销：**注销应用程序

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-logout.png)

9.  **桌面版**：导航到 DHIS2 的桌面版进行管理。

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-desktop-version.png)

    这是桌面版的GUI（需要大量内存来加载），不推荐用于普通手机。 DHIS2 Demo 示例（来自 [dhis2.org](dhis2.org)）

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-desktop-version-GUI.png)

## J2ME GPRS / 3G客户端 { #mobile_j2me_gprs_3g }

DHIS2 GPRS / 3G移动模块为远程客户端提供了一种机制
使用手机将数据直接输入DHIS2系统。那里
客户端的两个功能，即：

该解决方案依赖于具有数据连接的手机
可用（即GPRS，Edge，3G），通过它与DHIS2通信
实例，必须与其他任何实例一样，可以在互联网上公开使用
网络服务器。手机上的客户端应用程序下载数据条目
表格从服务器发送到电话，因此表格可以是
无需安装新应用程序即可更新。这也是至关重要的
社区报告功能，需要定期下载
服务器上的活动计划。

-   设施报告，用于数据输入和定期报告 DHIS2 汇总数据，

-   活动报告，用于支持社区模块的个人活动报告。

### 数据连接可用性 { #data-connection-availability }

在许多情况下，数据连接可用性可能是一个问题
否则，DHIS2移动报告将是一个很好的解决方案，
直接将数据获取到DHIS2。如果是这样，您可能
想考虑尝试单独描述的基于SMS的解决方案
文件。请记住，即使当前存在数据连接
服务器与手机之间进行通信所必需的
仅在初始化或更新移动应用程序时才需要
以及向服务器发送报告时。手机存储了所有输入的
本地数据，因此只有临时访问数据才能正常工作
定期连接。

### J2ME GPRS 3G设施报告客户端 { #mobile_j2me_gprs_3g_facility_reporting }

基于Web的解决方案的服务器端组件包含在
DHIS2的常规版本。

为了配置DHIS2基于Web的移动报告，您应该
请遵循以下步骤。

-   为您要报告的数据集设置“可用于移动报告”标志：在_Maintenance-\>DataSet_-\>_Edit_ 下标记“可用于移动报告”复选框并保存。

-   为移动用户创建用户角色。选择_维护-\>用户-\>用户角色-\>添加新_。添加用户角色名称和描述。为角色添加所需的数据集。移动用户角色需要至少具有 DHIS2 Web API 的权限。单击“保存”保存用户角色。

-   创建一个用户，客户端将使用该用户从 _Maintenance-\>Users-\>User -\>Add new_ 登录。填写所有必需的详细信息，记住密码长度必须至少为 8 位，包含一个大写字母和一个数字。将所需的用户角色分配给在上一步中创建的用户。

    > **Important**
    >
    > Assign the user to exactly **one** organisation unit. Each mobile reporting client will need their own user name and password.

### 数据集和报告表格的详细配置 { #detailed-configuration-of-data-sets-and-reporting-forms }

尽管前面的步骤是测试
解决方案可能需要对数据集进行更详细的配置，并且
在以下各节中进行介绍。

#### 数据集到电话上的表单布局的映射 { #the-mapping-of-data-sets-to-form-layout-on-the-phone }

默认情况下，数据集映射到电话上的单个表单。如果
数据集分为多个部分，每个部分显示为
手机上的单独页面。如果数据元素具有多个类别
选项组合将显示为带有类别的标题
组合选项如下。

<table>
<tbody>
<tr class="odd">
<td><strong>Form design element</strong></td>
<td><strong>DHIS2 Metadata</strong></td>
<td><strong>Metadata element</strong></td>
</tr>
<tr class="even">
<td>Form title</td>
<td>Data set</td>
<td>Short Name if it exists, otherwise Name</td>
</tr>
<tr class="odd">
<td>Page tile</td>
<td>Section</td>
<td>Section name (or form name if no sections)</td>
</tr>
<tr class="even">
<td>Question</td>
<td>Data element</td>
<td>Alternative name if it exists, otherwise Name</td>
</tr>
<tr class="odd">
<td>Question name if combos</td>
<td>Category option combo</td>
<td>name</td>
</tr>
</tbody>
</table>

#### 表格排序 { #sorting-of-forms }

默认情况下，数据元素将根据全局排序进行排序
在DHIS2中分配。如果使用节，则按节的特定排序
订单将被使用。在某些情况下，当不使用节时，数据
元素可能在多个数据集中使用，并且在方式上存在冲突
应该在单个数据集中排序。为此工作
情况是将整个数据集包装在一个部分中（请注意，
仅在数据元素具有相同的类别选项组合时才有效）

#### 数据集的版本控制 { #versioning-of-data-sets }

为了能够在移动设备上比较和更新数据集
服务器上的版本的手机，数据集会自动
编辑数据集结构时版本化。发生的一些变化
在DHIS2服务器上，将导致移动客户端更新其表格
新版本。

-   创建数据集

-   编辑数据集

-   在数据集中创建/编辑/删除部分

-   排序部分顺序

-   更新数据元素（影响许多相关的数据集）

-   删除数据元素（影响许多相关的数据集）

-   编辑数据元素类别

-   编辑DataElement类别组合

#### 语言支持 { #language-support }

提供多语言支持。

DataSet和DataElement通过基于Web的功能进行转换。
如果请求的语言，则服务器上的默认语言在移动设备上使用
无法使用手机版。

![](resources/images/dhis_mobile/translateDataSet.jpg)

### 移动应用程序设置 { #mobile-application-setup }

#### 安装和初始化 { #installation-and-initialization }

##### 安装 { #installation }

从DHIS2主页下载jar包：[https://www.dhis2.org/downloads](www.dhis2.org/downloads)

##### 初始化 { #initialization }

出厂前应进行初始化
终端用户。鉴于可能的电话配置差异很大，
无法描述顺序所需的确切步骤
以便在电话上启用客户端。但是，对于大多数手机而言，
使用USB将DHIS2 Web Mobile客户端“ JAR”文件复制到电话中
电缆或通过蓝牙就足够了。当然，GPRS / 3G连接
必须启用。请与您的移动服务提供商联系，以获取详细信息
有关电话和网络的配置。

![](resources/images/dhis_mobile/mobile_login_screen.png)

客户端安装到手机上后，进行初始化
必须通过提供用户名，密码和服务器URL来进行此过程。

1.  首次登录服务器。

    客户端第一次登录服务器时，或客户端重新初始化时，必须输入用户名、密码和服务器 URL。

    如果客户端无法登录，您可能会看到几条可能的错误消息。

    -   未找到连接：指定的服务器 URL 不正确。检查服务器地址，确保服务器实际可达，然后重试。

    -   用户名或密码无效：用户名或密码不正确

    -   应用程序未授权访问受限 API：可以联系服务器，但用户没有访问移动报告模块所需的权限

2.  设置 PIN 码：在初始登录过程之后，用户可以输入一个 PIN 码。这将使登录过程更加容易，因为用户只需记住四位数的密码，而不是每次都输入用户名和密码。如果手机在出厂前进行了初始化，PIN码可以预先设置，如果用户提供了用户名和密码，也可以由用户自己设置。

    ![](resources/images/dhis_mobile/mobile_enter_pin.png)

    输入 PIN 码后，按 (Menu)-\>Next。

3.  下载所有表格：指定 PIN 后，所有表格将从服务器下载并存储在手机本地。

    如果用户已配置为报告聚合数据集，则会显示相应数据集的列表。如果用户负责基于社区的报告，则会显示分配的活动列表。

    _注意_：如果卫生工作者同时负责设施报告和社区报告，DHIS2 服务器将向移动设备和移动设备发送所有形式的设施报告和社区报告，将有一个屏幕选择是显示设施报告还是社区报告。

    _错误_：

#### 登录（常规使用） { #logging-in-for-regular-use }

启动应用程序后，将显示PIN表单。

-   PIN码：输入四位数的PIN码。

-   重新初始化命令：此功能将清除手机上的所有数据，我们从登录屏幕开始使用用户名和密码。

-   错误： PIN 无效：如果用户输入了无效的 PIN，他们将需要输入正确的 PIN，或者使用正确的用户名和密码重新初始化应用程序。

#### 设施报告模块 { #facility-reporting-module }

##### 输入数据 { #entering-data }

从“选择报告表”中选择汇总数据集后
窗口，用户将需要选择适当的时间段。一个列表
的可用时间段会自动生成。

1.  用户输入他们的 PIN 后，他们可以从可用数据集列表中进行选择。选择适当的数据集，然后按“下一步”。

        ![](resources/images/dhis_mobile/select_report_form.png)

2.  选择时段：将自动向用户显示可用时段列表。他们可以从列表中选择适当的时间段。

        ![](resources/images/dhis_mobile/aggregate_select_periods.png)

3.  填值：选择时间段后，表格可以有两种显示方式，具体取决于

    -   带有部分的表格

        每个表单部分都显示在一个屏幕中，标题窗口中的部分名称。

        要在屏幕之间导航，请按“下一步”。

    -   不带节的表单（不带节的数据集）

        所有字段都显示在一个屏幕上，标题为 DataSet 的名称

    用户只需用适当的值填写每个数据元素。

        ![](resources/images/dhis_mobile/aggregate_data_entry_form.png)

4.  保存并完成：

    完成数据录入后，用户可以选择将数据保存在手机本地或直接上传到DHIS2服务器。

    ![](resources/images/dhis_mobile/aggregate_save_complete.png)

    如果用户保存了数据表单，他们可以在以后需要时编辑表单。再次选择一个时间段时，该时间段将被标记为“已保存”，如下一个屏幕截图所示。

    ![](resources/images/dhis_mobile/aggregate_data_entry_form_saved.png)

    如果用户选择“完成”，并且数据输入表单不完整，则会询问用户是否确定他们希望提交不完整的表单。提交表单后，应显示一条消息，通知用户传输成功。

    ![](resources/images/dhis_mobile/aggregate_report_success.png)

##### 笔记 { #notes }

1.  期间清单：

    标有星号 (\*) 的期间是已完成或保存的期间，具体取决于数据条目的状态。

    ![](resources/images/dhis_mobile/aggregate_save_completed_periods.png)

    所有不在周期列表中的周期都被认为是旧的，将被自动删除。

2.  存储值持续时间

    移动设备上保存的表格数量仅受移动设备有效存储量的限制。

    根据特定数据集的收集频率，表格仅在有限的时间内保存。

    -   每日表格：2个月（当月和上个月）

    -   每周表格：4周（当前和前3周）

    -   月度表格：2个月（当月和上个月）

    -   季度表格：2个季度（当前和上一个季度）

    -   年度表格：2年（当前和前一年）

3.  填写完毕的表格-无法修改的表格

    如果表单已完成，用户可以在手机上查看表单，但不能对表单进行任何后续编辑。每个字段都显示为灰色且无法编辑。

4.  重新编辑填写好的表格

    如果用户希望编辑已经提交给服务器的数据，他们可以通过按下“编辑”按钮来实现。假设数据集在相关期间没有被锁定，他们可以这样做。如果他们尝试上传数据，用户将被告知数据集已被锁定，并且无法上传数据。

        ![](resources/images/dhis_mobile/dataset_locked_upload_failed.png)

5.  更新表格：

    此功能用于同步移动端和服务器端的表单。输入 PIN 码后会自动触发该过程。

    注意：检查和下载更新的表单过程在后台运行。完成后，会显示提示询问用户是刷新表单列表还是留在原处。

6.  多国语言支持：

    此功能帮助用户选择手机的 GUI（图形用户界面）和内容的语言（表格）的语言。

    表格必须在服务器上翻译，否则使用默认语言。

    首次登录的默认语言是英语。在设置菜单中更改语言会影响界面和内容。

    ![](resources/images/dhis_mobile/settingCmd.jpg)

    ![](resources/images/dhis_mobile/settingScreen.jpg)

    ![](resources/images/dhis_mobile/supportedLanguageList.jpg)

    多语言界面：在设置菜单中，有支持的语言列表（从服务器下载）。 GUI 的语言仅在重新启动应用程序后更改。

    多语言内容（表格）：点击“保存”后，表格的语言会改变。如果表格较多，保存设置需要几分钟时间。

##### 故障排除 { #troubleshooting }

-   数据已在手机上输入，但未出现在服务器上

    这通常发生在用户在手机上输入数据但无法将其发送到服务器时。这可能是因为电话的配置、电话信用不足或覆盖范围不足。通常会显示如下所示的错误消息。

    ![](resources/images/dhis_mobile/http_error_mobile_client.png)

    应告知用户，如果他们看到此错误，则表示他们的数据尚未传输。

## 短信指令 { #mobile_sms_command }

SMS命令功能可帮助DHIS2系统接收来自用户的SMS，
患者，甚至是匿名的。 SMS命令是包含以下内容的对象：
每个SMS表单的配置：报告来自电话或j2me的数据
应用，提醒用户，注册患者或用户等。

### 设置短信命令 { #set-up-sms-command }

在这里您可以创建新的短信
命令

![](resources/images/dhis2_mobile_sms/mobile-sms-startup-link.png)

![](resources/images/dhis2_mobile_sms/mobile-sms-startup-link-sms-command.png)

通常每个SMS命令都有其自己的属性，然后进行设置
过程可能彼此不同。目前，我们有4种类型的
短信
命令：

![](resources/images/dhis2_mobile_sms/mobile-sms-conf-sms-command-types.png)

使用 KEY_VALUE_PARSER 和 J2ME_PARSER，SMS 命令将具有数据集，因为它们用于报告数据。如果报告了已批准期间的数据，则将发回 SMS 响应，其中包含有关该期间的批准状态的信息。

![](resources/images/dhis2_mobile_sms/mobile-sms-conf-sms-command-dataset.png)

使用 ALERT_PARSER 和 UNREGISTERED_PARSER，SMS 命令将具有用户组，因为这些用户组用于发送消息，例如 SMS、DHIS2 对话、电子邮件。

![](resources/images/dhis2_mobile_sms/mobile-sms-conf-sms-command-user-group.png)

有某些对于所有SMS命令类型都通用的参数。
如果用户使用这些参数，则在系统中配置默认值
确实为这些参数提供了任何值，那么那些默认参数将
使用。这是这些参数的列表

<table>
<caption>Common Parameters</caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Code Value Separator</td>
<td>String</td>
<td>To provide custom code value separator. Default is &quot;=&quot;</td>
</tr>
<tr class="even">
<td>Field Separator</td>
<td>String</td>
<td>To provide custom field separator. Default is &quot;|&quot;</td>
</tr>
<tr class="odd">
<td>Reply message if no codes are sent (only the command)</td>
<td>String</td>
<td>To provide message if no code is found in SMS text input. Default is &quot;Parameter missing&quot;</td>
</tr>
<tr class="even">
<td>Wrong format message</td>
<td>String</td>
<td>To provide message if command is not formatted correctly. Command should be formatted as per code value separator. This message will also be sent back if any mandatory parameter is missing.</td>
</tr>
<tr class="odd">
<td>No user message</td>
<td>String</td>
<td>To provide message if sending phone number is not registered in DHIS2.</td>
</tr>
<tr class="even">
<td>User belong to more than one OrgUnit message</td>
<td>String</td>
<td>Certain SMS command types require user ( retrieved from sending phone number ) to be associated with only one organization unit. This message can be configured to be sent back in case that requirement is not fullfilled.</td>
</tr>
<tr class="odd">
<td>Success Message</td>
<td>String</td>
<td>To provide message that will be sent upon successful completion of the process.</td>
</tr>
</tbody>
</table>

### 短信命令类型 { #sms-command-type }

SMS命令基本上由其解析器类型定义。换句话说，
每个SMS命令都有一个唯一的解析器来解析纯文本SMS，然后
结果将用于该SMS命令的目的。

#### 用于报告数据的SMS命令 { #sms-command-for-reporting-data }

为了报告示例数据集（聚合）的数据，我们使用具有 KEY_VALUE_PARSER（用于手机的纯文本）或 J2ME_PARSER（用于 j2me 应用程序）的 SMS 命令

![](resources/images/dhis2_mobile_sms/mobile-sms-cofig-sms-command-format-reportingdata.png)

如果命令的名称为“ report”，并带有代码的数据元素列表
像上面一样。格式应为：\ [命令名称\] \ [代码\] \ [值\]
\ [代码\] \ [值\] \ [代码\] \ [值\] ....，\ [值\]当然可能是
更改取决于实际数据，因此您必须准备一个SMS文本，例如
此示例：**报告vo2 vn5 a2 b6 z3 x1 **

如果命令具有分隔符，例如“。”，则SMS文本
应该：

**报告vo.2.vn.5.a.2.b.6.z.3.x.1 **

或**报告vo.2 | vn.5 | a.2 | b.6 | z.3 | x.1 **

此外，在SMS文本输入中，可以这样指定orgUnit ** org
orgUnitCode **如果在SMS中未指定orgUnit，则将检索用户
首先从发送电话号码开始，然后从该用户发送orgUnit。如
就PeriodType而言，应以这种格式指定
“ ddMM”，例如3108，但如果未指定，则使用PeriodType
将从附加到SMSCommand的DataSet中检索

使用 J2ME_PARSER，您无需准备那些 SMS 文本，因为 J2ME 将完成这项工作

![](resources/images/dhis2_mobile_sms/mobile_sms_custom_message.PNG)

用户可以将自定义响应消息设置为“格式错误的消息”，“否
用户消息”，“用户属于多个OrgUnit消息”和
“成功消息”。如果未设置自定义消息，则系统将使用
默认消息。

#### 实体注册的SMS命令 { #sms-command-for-entity-enrollment }

TRACKED_ENTITY_REGISTRATION_PARSER 可用于将被跟踪实体注册到系统中。

![](resources/images/dhis2_mobile_sms/TEI_parser.png)

命令名称后将跟与以下内容有关的跟踪实体属性
与该命令关联的特定程序。程序
创建此命令时将完成选择。

默认文本模式（如果不是字段分隔符和代码值分隔符
为该解析器提供）如下所示。 ** childProgram
fn = xmen | ln = xmen2 | age = 4 **

如果字段分隔符是例如“，”，则文本将如下所示。**childProgram fn=xmen,ln=xmen2,age=4**

其余行为与其他命令相同。如果用户不
提供这些参数，然后将使用默认参数。

#### 用于程序阶段数据输入的SMS命令 { #sms-command-for-program-stage-data-entry }

PROGRAM_STAGE_DATAENTRY_PARSER 可用于输入特定跟踪实体实例的程序阶段相关数据。

![](resources/images/dhis2_mobile_sms/programstage_data_parser.png)

命令名称后将跟与特定名称有关的数据元素
该命令所关联的程序阶段。程序与程序
创建此命令时将完成阶段选择。

默认文本模式（如果不是字段分隔符和代码值分隔符
为该解析器提供）如下所示。 **程序阶段
bcgd = 1 | opvd = 2 | wght = 34 **

如果字段分隔符是例如“，”，则文本将如下所示。**programstage bcgd=1,opvd=2,wght=34**

其余行为与其他命令相同。如果用户不
提供这些参数，然后将使用默认参数。

#### 短信命令，用于警报，注册 { #sms-command-for-alerting-registering }

为了提醒用户，我们使用具有 ALERT_PARSER（用于手机的纯文本）或 UNREGISTERED_PARSER（用于 j2me 应用程序）的 SMS 命令。 UNREGISTERED_PARSER 也可用于注册 IDSR 谣言。

![](resources/images/dhis2_mobile_sms/mobile-sms-cofig-sms-command-format-alert.png)

这些命令的格式为：\ [命令名称\] \ [文本\]，用于
例：

**在A镇提醒一个紧急情况**

仅从用户接收具有 ALERT_PARSER 的命令

#### 用于事件注册的SMS命令 { #sms-command-for-event-registration }

事件注册可用于根据通过 SMS 收集的数据将匿名事件注册到系统中。此命令类型与 WITHOUT_REGISTRATION 类型的程序相关联。例如，可以使用此解析器跟踪出生事件。

![](resources/images/dhis2_mobile_sms/event-registration-parser.png)

这些命令的格式为：\ [命令名称\]
\ [代码\] \ [分隔符]] [值\]，例如：

**出生A = 1，B = 2，G =男性**

代码/值分隔符是可配置的。管道“|”默认情况下作为字段分隔符。仅从 DHIS2 用户接收具有 EVENT_REGISTRATION_PARSER 的命令。成功接收命令后，将解析 SMS 中接收到的数据，并将事件注册到 DHIS2 中。

## 短信服务 { #mobile_sms_service }

SMS服务是用于发送/接收SMS的常规服务。任何
其他DHIS2模块可以包括此服务并利用它发送和发送
从现场的用户或工作人员接收短信。

### 设置短信服务 { #setting-up-sms-service }

使该服务正常运行的前提条件很少。
有两种方法可以完成这些步骤。一种方法是配置
网关从移动配置模块中的GUI。另一种方法是
使用SMS Web Api。

-   配置短信网关

#### 配置短信网关 { #configure-sms-gateway }

SMS 服务支持五种不同类型的网关。如果配置了任一网关，则可以发送 SMS。如果存在多个网关，则它们将以循环方式用于负载平衡。不同类型的网关有不同的参数。网关可以在移动配置模块的 GUI 中进行配置，如图所示。有关配置网关所需参数的更多信息，请参阅新 SMS 应用程序的 [网关配置] 部分。(#gateway.configuration)

![](resources/images/dhis2_mobile_sms/sms-app.png)

#### 配置GenericHttp网关 { #configure-generichttp-gateway }

许多 DHIS2 实例使用 GenericHttpGateway 连接到其本地网关。这些本地网关提供用于发送 SMS 的 HTTP API。在新的 GenericHttpGateway 中，现在可以为网关配置配置通用配置模板。通过将占位符替换为从网关键值参数中获取的实际值，此模板被转换为请求负载。

![](resources/images/dhis2_mobile_sms/generic-gateway.png)

### 网关配置 { #gateway.configuration }

下表显示了配置网关所需的参数。

<table>
<caption>Gateway Configuration Parameters</caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>Parameter</th>
<th>BulkSMS Gateway</th>
<th>Clickatell Gateway</th>
<th>Generic HTTP Gateway</th>
<th>SMPP Gateway</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Gateway Name</td>
<td>Optional</td>
<td>Optional</td>
<td>Optional</td>
<td>Optional</td>
<td>Used as gateway identity. Default name will be stored in case this parameter is not configured. Its use is recommended</td>
</tr>
<tr class="even">
<td>User Name</td>
<td>Required</td>
<td>Optional (if token is used)</td>
<td>Required</td>
<td>Required</td>
<td>Used for API authentication</td>
</tr>
<tr class="odd">
<td>Password</td>
<td>Required</td>
<td>Optional (if token is used)</td>
<td>Required</td>
<td>Required</td>
<td>Used for API authentication</td>
</tr>
<tr class="even">
<td>Auth-Token</td>
<td>N/A</td>
<td>Optional (if password is used)</td>
<td>N/A</td>
<td>N/A</td>
<td>Used for API authentication</td>
</tr>
<tr class="odd">
<td>URL Template</td>
<td>N/A</td>
<td>N/A</td>
<td>Required</td>
<td>Required</td>
<td>Url Tempalte is only required in case of GenericHttpGateway . For example &quot;http://smsgatewa1.com&quot;</td>
</tr>
<tr class="even">
<td>Headers</td>
<td>N/A</td>
<td>N/A</td>
<td>Optional</td>
<td>N/A</td>
<td>Header option can be checked to send selected parameter as http header. For example username/password/token can be sent in http header.</td>
</tr>
<tr class="odd">
<td>useGet</td>
<td>N/A</td>
<td>N/A</td>
<td>Optional</td>
<td>N/A</td>
<td>HTTP POST method is used by default for posting data toward gateway. But in certain cases if HTTP GET method is required for doing so then useGet parameter can be set to true. Default value for useGet is false.</td>
</tr>
<tr class="odd">
<td>systemType</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>Required</td>
<td>SystemType parameter is required for SMPP gateway. Default value is 'cp'</td>
</tr>
<tr class="odd">
<td>typeOfNumber</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>Required</td>
<td>TypeOfNumber parameter is required for SMPP gateway. Default value is 'UNKNOWN'. Other possible values are UNKNOWN, INTERNATIONAL, NATIONAL, NETWORK_SPECIFIC, SUBSCRIBER_NUMBER, ALPHANUMERIC and ABBREVIATED</td>
</tr>
<tr class="odd">
<td>numberPlanIndicator</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>Required</td>
<td>NumberPlanIndicator parameter is required for SMPP gateway. Default value is UNKNOWN. Other possible values are UNKNOWN, ISDN, DATA, TELEX, LAND_MOBILE, NATIONAL, PRIVATE, ERMES, INTERNET and WAP</td>
</tr>
<tr class="odd">
<td>bindType</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>Required</td>
<td>BindType parameter is required for SMPP gateway. Default value is TX. Other possible values are BIND_TX, BIND_RX and BIND_TRX</td>
</tr>
<tr class="odd">
<td>compressed</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>Optional</td>
<td>Compressed parameter is optional for SMPP gateway. Default value is false</td>
</tr>
<tr class="even">
<td>sendUrlParameters</td>
<td>N/A</td>
<td>N/A</td>
<td>Optional</td>
<td>N/A</td>
<td>Gateway parameters will be appended with url for example https://samplegateway.com/messages?apiKey={apiKey}&to={recipients},content={text},deliveryreport={dp}</td>
</tr>
<tr class="odd">
<td>contentType</td>
<td>N/A</td>
<td>N/A</td>
<td>Optional</td>
<td>N/A</td>
<td>The type in which data will be sent to sms gateway. Default is application/x-www-form-urlencoded. Other supported types are application/json, application/xml and text/plain</td>
</tr>
<tr class="even">
<td>configurationTemplate</td>
<td>N/A</td>
<td>N/A</td>
<td>Optional</td>
<td>N/A</td>
<td>Generic configuration template can be used to provide the data in the form acceptable to external gateway. For example username=${username}&password=${password}&to=${recipients}&countrycode=880&message=${text$}&messageid=0. Json/xml template can also be provided.</td>
</tr>
</tbody>
</table>

# 关于数据维度 { #data_dimensions }

## 数据维度：DHIS2中的核心构建块 { #data-dimensions-core-building-blocks-in-dhis2 }

DHIS2中的数据值至少由以下三个维度描述：1）数据
元素，2）组织单位和3）期间。这些尺寸构成了
数据模型的核心构建块。

![](resources/images/data_dimensions/datavalue_with_dimensions.png)

例如，如果您想知道 2014 年 12 月 Gerehun CHC 有多少儿童接种了麻疹疫苗，描述该值的三个维度是数据元素“Measles dose given”、组织单位“Gerehun CHC”和“2014 年 12 月”期间。所有数据值都至少具有描述_what_、_where_和_when_的这三个维度。

除了数据元素，组织单位和期间
维度，数据值也可能与其他数据相关联
尺寸。此功能的常见用法是描述数据值
由同一位置的多个合作伙伴报告
相同的数据元素和时间段。原则上，它可以用作
“自由形式”的维，用于描述相同的多个观测值
现象在同一时间和地点。有关此的更多信息，
请参见第34章：其他数据维度。

<table>
<thead>
<tr class="header">
<th>Organisation Unit</th>
<th>Data Element</th>
<th>Period</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Gerehun CHC</td>
<td>Measles doses given</td>
<td>Dec-09</td>
<td>22</td>
</tr>
<tr class="even">
<td>Tugbebu CHP</td>
<td>Measles doses given</td>
<td>Dec-09</td>
<td>18</td>
</tr>
</tbody>
</table>

## 数据元素：_what_ 维度 { #data-elements-the-what-dimension }

### 数据元素类别 { #data-element-categories }

上面提到的数据元素“给定的麻疹剂量”可以进一步提高
按数据元素类别的组合分类。每
DHIS2的系统管理员可以自由定义任何数据元素
数据元素的类别维度。但是，有一些最好的
通常应遵循的实践。

以麻疹疫苗接种为例，如果您想知道是否
这些疫苗是在机构（固定的）或在医院内注射的。
社区作为扩展服务的一部分，那么您可以添加一个
维度，例如具有两个可能选项的“服务场所”
“固定”和“外展”。然后收集有关麻疹免疫的所有数据
必须将这些细分为选项。此外
您可能想知道这些孩子中有多少
年龄在1岁以下或1岁以上。如果是这样，您可以添加一个年龄
具有两个可能的选项“ \ <1 y”和
“ \> 1 y”。这意味着有关数据收集过程的更多细节。您
也可以同时应用“服务地点”和“年龄”这两个类别，并结合
将它们合并为数据元素类别组合，例如称为“ EPI
分解”。然后您将可以查看另外四个不同的
详细值，而不是上面示例中的一个
数据元素“给定的麻疹剂量”：1）“固定且\ <1 y，2）固定且
\> 1年，3）外联和\ <1 y, and 4) Outreach and \> 1年。这增加了
卫生机构如何收集数据的复杂性，但是在
同时打开了进行详细数据分析的新可能性
麻疹免疫。

<table>
<caption>Example of detailed storage of data values when using data element categories &quot;Place of Service&quot; and &quot;Age&quot; (simplified for readability compared to the actual database table)</caption>
<thead>
<tr class="header">
<th>Organisation Unit</th>
<th>Data Element</th>
<th>Place of service</th>
<th>Age</th>
<th>Period</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Gerehun CHC</td>
<td>Measles doses given</td>
<td>Fixed</td>
<td>&lt;1 y</td>
<td>Dec-09</td>
<td>12</td>
</tr>
<tr class="even">
<td>Gerehun CHC</td>
<td>Measles doses given</td>
<td>Outreach</td>
<td>&lt;1 y</td>
<td>Dec-09</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Gerehun CHC</td>
<td>Measles doses given</td>
<td>Fixed</td>
<td>&gt;1 y</td>
<td>Dec-09</td>
<td>4</td>
</tr>
<tr class="even">
<td>Gerehun CHC</td>
<td>Measles doses given</td>
<td>Outreach</td>
<td>&gt;1 y</td>
<td>Dec-09</td>
<td>2</td>
</tr>
<tr class="odd">
<td>Tugbebu CHP</td>
<td>Measles doses given</td>
<td>Fixed</td>
<td>&lt;1 y</td>
<td>Dec-09</td>
<td>10</td>
</tr>
<tr class="even">
<td>Tugbebu CHP</td>
<td>Measles doses given</td>
<td>Outreach</td>
<td>&lt;1 y</td>
<td>Dec-09</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Tugbebu CHP</td>
<td>Measles doses given</td>
<td>Fixed</td>
<td>&gt;1 y</td>
<td>Dec-09</td>
<td>3</td>
</tr>
<tr class="even">
<td>Tugbebu CHP</td>
<td>Measles doses given</td>
<td>Outreach</td>
<td>&gt;1 y</td>
<td>Dec-09</td>
<td>1</td>
</tr>
</tbody>
</table>

### 数据元素组集 { #data-element-group-sets }

尽管上述数据元素类别及其选项
提供数据点的详细程度（分解）
收集以及如何将数据值存储在数据库中
元素组集和组可用于向其中添加更多信息
数据收集后的数据元素。例如，如果您正在分析
报告中要同时包含许多数据元素
这些基于一些标准。而不是查看所有数据
以免疫和营养形式捕获，您可能想要
沿程序维度分离或分组数据元素（称为
DHIS2中设置的数据元素组），其中“免疫”（或EPI）和
“营养”将是两个群体。

扩展报告以包括来自其他程序或更大程序的数据
健康数据的主题将意味着有更多的小组加入这样的小组
维度，例如“疟疾”，“生殖健康”，“种群”。为了这
例如，您将创建一个名为“ Programme”的数据元素组集
（或您认为合适的任何名称），并代表不同的名称
在这个维度上的程序，您将定义数据元素组
被称为“ EPI”，“营养”，“疟疾”，“生殖健康”等，
并将所有这些组添加到“程序”组集中。链接或标记
数据元素“给定的麻疹剂量”必须达到这样的尺寸（以
我们的示例）将其添加到“ EPI”组中。您向哪些组添加“麻疹
剂量”不会影响医疗机构收集数据的方式，
但为您的数据分析增加了更多可能性。所以对于组集
尺寸分为三个层次；组集（例如“计划”），
组（例如“ EPI”）和数据元素（例如“给定的麻疹剂量”）。

指标可以分为指标组，然后进一步分为
指标组集（维度）与数据完全相同
元素。

<table>
<thead>
<tr class="header">
<th>Organisation Unit</th>
<th>Data Element</th>
<th>Programme</th>
<th>Period</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Gerehun CHC</td>
<td>Measles doses given</td>
<td>EPI</td>
<td>Dec-09</td>
<td>22</td>
</tr>
<tr class="even">
<td>Gerehun CHC</td>
<td>Vitamin A given</td>
<td>Nutrition</td>
<td>Dec-09</td>
<td>16</td>
</tr>
<tr class="odd">
<td>Tugbebu CHP</td>
<td>Measles doses given</td>
<td>EPI</td>
<td>Dec-09</td>
<td>18</td>
</tr>
<tr class="even">
<td>Tugbebu CHP</td>
<td>Vitamin A given</td>
<td>Nutrition</td>
<td>Dec-09</td>
<td>12</td>
</tr>
<tr class="odd">
<td>Gerehun CHC</td>
<td>Malaria new cases</td>
<td>Malaria</td>
<td>Dec-09</td>
<td>32</td>
</tr>
<tr class="even">
<td>Tugbebu CHP</td>
<td>Malaria new cases</td>
<td>Malaria</td>
<td>Dec-09</td>
<td>23</td>
</tr>
</tbody>
</table>

## 组织单位：_where_维度{ #organisation-units-the-where-dimension }

DHIS2中的组织单位通常应代表一个位置，例如
作为社区卫生中心或转诊医院，或行政
例如“ MoHS塞拉利昂”，“博区”或“鲍马酋长国”。在
非卫生部门的应用程序，它们可能是“学校”或“水
点”。Orgunits以默认层次结构表示，通常是
国家或地区的默认管理层次结构，并且
因此分配了组织级别。例如，塞拉利昂
有四个组织单位级别；国家，地区，酋长国和
PHU和所有orgunits都与这些级别之一相关。一个组织单位
DHIS2中的层次结构可以具有任意多个级别。通常数据是
在卫生机构以最低水平收集的，但是可以
在层次结构中的任何级别（例如两个地区）收集
以及设施水平。

当设计更高级别的报告时，在
地区或省一级，DHIS2将使用层次结构来
汇总任何给定单位在任何时间的所有医疗机构的数据
水平。捕获数据的组织单位级别始终代表
可能用于数据分析的最低详细程度，以及
组织级别定义了可用的聚合级别
沿地理维度。

### 组织单位组集和组 { #organisation-unit-group-sets-and-groups }

虽然设施级别通常是
DHIS2中的分解，有多种方法可以灵活地组织组织
通过使用组织单位将单位分解为任意数量的维度
组和组集功能。例如，如果所有设施都
指定为“社区卫生中心”或“地区
医院，可以创建一个名为
“类型”并添加具有上述类型名称的组。在
为了使组集在分析中正常运行，每个
组织单位应是一个小组的成员（强制性和
排除）。换句话说，设施
不应同时是“社区卫生中心”和“地区”
医院”。

#### 继承组织单位组集的值 { #inherit-the-values-of-an-organisation-unit-group-set }

您可以通过继承来提高汇总数据的完整性
组织单位中“父”组织单位的设置
层次结构。如果您要汇总数据，这将特别有用
100多个组织单位。见
[维护]（https://docs.dhis2.org/master/zh/user/html/manage_organisation_unit.html#create_organisation_unit_group_set）
应用程序文档了解更多
细节。

#### 备用组织单位层次结构-组集和组的高级使用 { #alternative-organisation-unit-hierarchies-advanced-use-of-group-sets-and-groups }

组织单位组集的更高级用途是创建
替代层次结构使用其他人的行政边界
部委。在塞拉利昂，这可能意味着
1：MoHS，2：地区和3：地方议会，而不是四级
拥有酋长国和PHU的等级制度。例如，如果所有PHU都已链接
到特定的地方议会，就有可能查看数据
由地方议会而不是首领汇总。那你先
需要创建一个名为“地方议会”的组，然后创建一个
每个地方议会的组织单位小组，最后将所有
PHU到其相应的地方理事会小组。

<table>
<thead>
<tr class="header">
<th>District</th>
<th>OrgUnit Type</th>
<th>Data Element</th>
<th>Period</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Bo</td>
<td>CHC</td>
<td>Measles doses given</td>
<td>Dec-09</td>
<td>121</td>
</tr>
<tr class="even">
<td>Bo</td>
<td>CHP</td>
<td>Measles doses given</td>
<td>Dec-09</td>
<td>98</td>
</tr>
<tr class="odd">
<td>Bo</td>
<td>MCHP</td>
<td>Measles doses given</td>
<td>Dec-09</td>
<td>87</td>
</tr>
<tr class="even">
<td>Bombali</td>
<td>CHC</td>
<td>Measles doses given</td>
<td>Dec-09</td>
<td>110</td>
</tr>
<tr class="odd">
<td>Bombali</td>
<td>CHP</td>
<td>Measles doses given</td>
<td>Dec-09</td>
<td>67</td>
</tr>
<tr class="even">
<td>Bombali</td>
<td>MCHP</td>
<td>Measles doses given</td>
<td>Dec-09</td>
<td>59</td>
</tr>
</tbody>
</table>

### 使用组集和组的最佳实践 { #best-practice-on-the-use-of-group-sets-and-groups }

如上所述，所有组织单位都应是
组集中的单个组。如果组织单位不存在
在任何组中或存在于组集中的多个组成员中，
这可能会导致分析模块中出现意外结果。 DHIS2有
完整性检查以识别不存在的组织单位
任何组织单位组集合成员，或存在多个
组。

## 期间：_when_ 维度 { #period_types }

周期维度成为分析数据时的重要因素
随着时间的流逝当查看累积数据时，当创建季度数据时
或年度汇总报告，或在进行合并数据的分析时
具有不同的特征，例如每月例行数据，年度
人口普查/人口数据或六个月的工作人员数据。

### 期间类型 { #period-types }

在DHIS2中，根据一组固定的时期类型来组织时期
如下面所描述的。以下列表适用于默认的ISO 8601日历
类型。

1.  日常

2.  每周：系统支持多种每周周期类型，周一、周三、周四、周六和周日为一周的第一天。您通过配置为使用所需的每周周期类型的数据集收集数据。分析引擎会将每周数据归因于包含一周四天或更长时间的月份。

3.  双周：从一年的第一周开始的两周。

4.  每月：指标准日历月。

5.  每两个月：从一月开始的两个月。

6.  季度：从1月开始的标准ISO季度。

7.  六个月：从一月开始的六个月

8.  每年：这是一个日历年。

9.  财政四月：财政年度期间从 4 月 1 日开始，到明年日历的 3 月 31 日结束

10. 财政 7 月：财政年度期间从 7 月 1 日开始，到明年日历的 6 月 31 日结束

11. 财政十月：财政年度期间从 10 月 1 日开始，到次年日历的 9 月 31 日结束

12. 六个月的四月：从 4 月 1 日开始的六个月期间，持续时间为六个日历月。

作为一般规则，所有组织单位应收集相同的数据
使用相同的频率或周期性。因此，数据输入表单为
与单个期间类型相关联以确保数据始终
根据正确且相同的周期性收集
国家。

但是有可能使用不同的方式收集相同的数据元素
通过将相同的数据元素分配给多个数据集来创建周期类型
具有不同的时期类型，但随后变得至关重要
确保没有组织单位同时使用两个数据集/期间收集数据
类型，将导致数据值重叠和重复。如果
正确配置的DHIS2中的聚合服务将聚合
数据一起，例如来自该国一部分的月度数据
从该国其他地区到本国的季度数据
季度报告。为了简单起见并避免数据重复，它是
建议对所有组织单位使用相同的期间类型
尽可能使用相同的数据元素。

### 相对时期 { #relative-periods }

除了上一节中介绍的固定期间类型外，
DHIS2还支持在分析模块中使用相对时间段。

在DHIS2中创建分析资源时，可以
使用相对期间功能。最简单的情况是
您想设计一个每月可以重复使用的月度报告
无需更改报告模板以适应
期间的变化。相对期间称为“上个月”，允许
为此，用户可以在生成报告时通过
report参数选择要在报告中使用的月份。

稍微高级一点的用例是当您想每月
免疫摘要报告，并希望查看来自
当前（报告）月份以及该年度的累计值
至今。相对期间称为“今年”提供了这样一个
相对于运行时选择的报告月份的累计值
那个报告。其他相对期间是最近的3,6或12个月
周期是从选定的值计算回来的累积值
报告月份。如果您要使用数据汇总创建报表
您可以选择季度（一年中到目前为止已经过去的季度）
“过去四个季度”。其他相对期间在
手册的报告表部分。

<table>
<thead>
<tr class="header">
<th>Organisation Unit</th>
<th>Data Element</th>
<th>Reporting month</th>
<th>So far this year</th>
<th>Reporting month name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Gerehun CHC</td>
<td>Measles doses given</td>
<td>15</td>
<td>167</td>
<td>Oct-09</td>
</tr>
<tr class="even">
<td>Tugbebu CHP</td>
<td>Measles doses given</td>
<td>17</td>
<td>155</td>
<td>Oct-09</td>
</tr>
</tbody>
</table>

### 期间汇总 { #aggregation-of-periods }

虽然需要以给定的频率收集数据以实现标准化
数据收集和管理，这并不限制
可用于数据分析和报告的期间类型。就像
数据汇总到组织层次结构中
根据期间层次结构汇总，因此您可以按季度创建
和年度报告基于每月收集的数据
基础。数据输入表单（数据集）的已定义期间类型定义
报告中最低的期间详细信息级别。

#### 期间维度上的总和和平均汇总 { #sum-and-average-aggregation-along-the-period-dimension }

在汇总期间维度上的数据时，有两种选择
如何进行计算，即求和或平均值。这个选项是
通过使用DHIS2中的每个数据元素指定
“添加/编辑数据元素”对话框中的“聚合运算符”属性。

常规收集的大多数数据应通过以下方式汇总
总结几个月或几周，例如创建一个季度
关于麻疹免疫的报告之一将总结三个月的值
用于“给定的麻疹剂量”。

随时间推移更永久有效的其他类型的数据，例如
“ PHU的员工人数”或每年的人口估计数
需要对“ 1岁以下人口”进行不同的汇总。这些
只要有有效数据，所有月份的值都是静态的。对于
例如，根据普查得出的“ 1岁以下的估计人口”
数据，给定年份的所有月份都相同，或者
在给定设施中工作的护士在六个月中每个月都相同
报告的月份数。

在计算年度价值时，这一差异变得很重要
设施的发病率指标负担。每月
将12个月的总人数相加即可得出年度总人数，
而PHU的员工人数是根据
通过6个月员工报告报告的两个6个月值。所以
在此示例中，数据元素“ OPD人数”将具有
聚合运算符“ SUM”和数据元素“职员人数”将
将其设置为“ AVERAGE”。

平均数据元素的另一个重要特征是有效性
时期的概念。平均值是任何时期的固定值
在注册期间内输入。对于
例如，日历年之后的年度人口估计将
无论该年之内的任何时期都具有相同的值
什么时期类型。如果给定设施的1岁以下人口是
2015年为250，表示
2015年1月15日，2015年第3季度，2015年第12周以及2015年内的任何时期。
这对覆盖率指标的计算方式有影响，因为
即使在做这些事情时，仍将使用全部年度人口作为分母值
月度报告。如果您想查看估计的年度覆盖率
给定月份的值，那么您可以选择设置
指标为“年化”，表示每月的覆盖值
乘以12的系数，将季度值乘以4，以便
产生有效的年度总数。年度指标功能可以
因此可以用来模拟每月人口估算的使用。

## 数据收集与数据分析 { #data-collection-vs-data-analysis }

### 数据收集与存储 { #data-collection-and-storage }

数据集确定系统中可用的原始数据，例如
它们描述了如何根据周期性以及如何收集数据
空间范围。数据集定义了要构建的数据的构造块
捕获并存储在DHIS2中。对于每个数据维度，我们决定
数据的详细程度应按以下方式收集：1）数据
要素（例如诊断，疫苗或发生的任何事件）及其
类别（例如年龄和性别），2）时期/频率维度，以及
3）组织单位规模。对于任何报告或数据分析
永远无法检索比数据中定义的数据更详细的数据
集，因此数据集的设计及其相应的数据条目
表格（数据收集工具）决定哪种数据分析
将有可能。

### 输入不等于输出 { #input-does-not-equal-output }

重要的是要了解数据输入表单或数据集
本身并不与基础数据值内在关联，并且
数据的含义仅由数据元素（及其元素
类别）。这使得修改数据集和表单非常安全
而不更改数据（只要数据元素保持不变）。
表格和数据之间的这种松散耦合使DHIS2在使用时更加灵活
涉及设计和更改新表格，以及准确提供
形成用户想要的形式。

仅将数据链接到数据元素而不链接到表单的另一个好处是，
是基于以下指标创建指标和验证规则的灵活性
数据元素，以及提供任何类型的输出报告（以枢纽
表格，图表，地图等），可以单独或跨多个数据组合
表格，例如关联来自不同健康计划的数据。由于
这种灵活的功能可以集成来自各种程序的数据
（表格）和来源（例行和半永久性（人口，员工，
设备））DHIS2数据库用作集成数据存储库
对于较大的HIS中聚合数据的许多或全部部分。该图
下面说明了这种灵活性。

！[]（资源/图像/data_dimensions/dhis_input_output.jpg）

在此示例中，我们看到来自多种形式的数据元素可以是
结合以创建给定的指标。举一个更具体的例子
可能会在年度数据集中收集“一岁以下的人口”
然后按地区收集数据，例如“完全免疫
在设施级别按月计算）。
我们可以得出有效每月人口的近似值，
并将其与完全
按月接种疫苗的儿童，有可能产生一个
指标“完全免疫覆盖率”，由总计
完全免疫的儿童总数除以有效儿童
每月人口。

## 数据元素和表格的扩展示例 { #extended-examples-of-data-elements-and-forms }

下表将数据元素合并为两组诊断（全部
疾病）和发病率/死亡率（新病例，随访，转诊，
死亡），其数据元素类别为PHU /社区。死亡是
以其他尺寸（例如
PHU /社区）比发病率高。

![](resources/images/data_dimensions/Ex_table1.jpg)

此输出表将 HIV_Age 和 Gender 两个数据元素类别与数据元素组集 ART Group 组合在一起。该组启用小计，用于汇总该组中的数据元素的暂存点和入口点。年龄组和性别的小计将是其他可能的列，可以轻松包含在此处。

![](resources/images/data_dimensions/Ex_table2.jpg)

## 这在数据透视表中如何工作 { #how-this-works-in-pivot-tables }

在Excel数据透视表或任何其他基于OLAP的数据中进行数据分析时
工具的尺寸变得非常强大，可以提供许多
对数据的不同看法。每个数据元素类别或组集
成为支点字段，选项或组成为其中的值
每个领域。实际上，类别和组集已得到处理
数据透视表中的方式完全相同，orgunits，句点和
数据元素。所有这些都成为了可以
用于重新排列，旋转，过滤和向下钻取数据。这里
我们将展示一些数据示例如何在数据透视表中使用
表。

以发病率和死亡率数据为例，数据透视表可以
展示如何使用维度来查看不同数据
聚合级别。

当没有任何枢纽字段时，将查看完全聚合的数字
在表区域中排列为列或行字段，但列出了
表本身上方的页面字段（过滤器）。

![](resources/images/data_dimensions/pivot_overview_1.jpg)

在这里，我们选择查看发病率总数。关于发病率的各种数据元素已被排序到 main_de_groups 发病率（我们稍后会回到死亡率）。表格本身上方的字段全部设置为“全部”，表示表格中的总计将包含来自所有国家、地区、酋长国、ou_type、年份、月份、红色字段中列出的各个类别以及所有发病率组中的数据元素。

如我们所见，这不是一个非常有用的表示，因为发病率
分为新的案例，跟进，转诊，然后在
年龄组。另外，我们看不到各种诊断。第一步是
包括诊断字段（是一个组集），该操作由
将“诊断”字段向下拖动到一个行字段，如
下图，并在其中添加称为“发病率死亡率”的组
栏位栏位会显示新个案，跟进和转介。

![](resources/images/data_dimensions/pivot_diagnoses.jpg)

将此图与下面的图进行对比。

![](resources/images/data_dimensions/pivot_dataelements.jpg)

它们都显示相同的数据（某些行已在
屏幕截图（取决于图片大小），尽管以其他方式。

-   底部图中使用的“数据元素”字段将每个诊断显示为三个元素；一个跟进，一个新的，一个转介。这是在 DHIS2 中定义数据元素的方式，因为这对聚合有意义。你不想聚合后续和新的，因此这些还没有作为类别，重点是简化聚合和分解。

-   相反，“诊断”组集将这三个（后续、新、推荐）集中在一起，然后可以与另一个组集拆分，即所谓的“发病率”。这使我们能够像两个图中的第一个一样组织数据，其中每行有一个诊断，新的、后续的、转诊的组作为行。

使用组集的想法是您可以在任何集合中组合不同的数据元素。因此，如果我们添加死亡率数据（通过从 main_de_groups 字段的下拉菜单中检查它，并将该字段移出表格），我们也可以看到死亡人数，因为死亡率数据元素已包含为“死亡”组在“发病率死亡率”组集中。结果如下所示。

![](resources/images/data_dimensions/pivot_diagnoses_all.jpg)

结果是一个更加用户友好的数据透视表。现在，另一个数字
显示组集和元素之间的关系（这些是
假数据值）。

数据透视表的这一小细节显示了实际数据元素
链接到组集：

-   DHIS2 中定义的四个数据元素是麻疹死亡、麻疹随访、新麻疹和麻疹转诊

-   他们都属于“诊断”组，他们被归为麻疹组

-   组集“morbiditymortality”包含组新病例、随访、转诊和死亡。

-   只有数据元素麻疹死亡具有与死亡组相关的数据，因此这是在右上角显示数据值 (20) 的位置。新麻疹也是如此；值 (224) 显示在数据元素 Measles new 和组 New cases（在组集合 morbiditymortality 中）的交点处

-   数据元素不与 morbiditymortality 组链接的所有交叉点都留空。因此，在这种情况下，如果我们从表中排除数据元素，我们将得到一个很好的表，并且只有诊断和组设置 morbiditymortality，如前面所示的图

Now lets see how the data element categories can be used. In the data entry form for Morbidity the new cases and follow-ups use one age category, the referral data another,, and the mortality data a third age breakup, so these are available as three individual age group fields in the pivot tables called morbidity_age, referrals_age and mortality_age. It doesn't make sense to use these while looking at these data together (as in the examples above), but e.g. if we only want to look at the only the new cases we can put the MobidityMortalityGroups field back up as a page field and there select the New cases group as a filter. Then we can drag the Morbidity_age field down to the column area and we get the following view:

![](resources/images/data_dimensions/pivot_morb_age.jpg)

下表说明了重用数据元素的好处
跨数据集和类别组合的类别。 VCCT，ART和
PMTCT数据收集在三个不同的数据集中，前两个
性别和年龄细分，以及仅PMTCT年龄（给出了性别）。
这三个人的年龄段相同，因此可以查看
同一表中所有这三个数据集中的数据元素并使用
年龄维度。在前面的例子中，发病率和死亡率
数据是不可能的，因为所有新病例，转诊和死亡
有不同的年龄段。

![](resources/images/data_dimensions/pivot_hiv_age.jpg)

在下表中，PMTCT数据已从表中删除，并且
性别类别添加到列区域，以便您可以分析
VCCT和ART按年龄和性别分类的数据。性别的可选小计
也已添加，以及所有年龄段和
性别。

![](resources/images/data_dimensions/pivot_hiv_age_gender.jpg)

## 案例研究：从纸质表格到多维数据集-经验教训 { #case-study-from-paper-forms-to-multidimensional-datasets-lessons-learned }

通常，DHIS2数据集的设计基于某些要求
从已经使用的纸质表格中获取。纸质表格的逻辑是
与DHIS2的数据元素和数据集模型不同，例如经常
表格标题中的字段由列标题和
每行文字，有时还带有一些介绍性表格
提供更多上下文的标题。在数据库中捕获
一个原子数据元素，与视觉中的位置无关
表格格式，因此确保带有
可选的数据元素类别可捕获每个类别的全部含义
纸质表格中的单个字段。

设计数据集时要记住的另一重要事项是
数据集和相应的数据输入表单（这是一个数据集
（带有布局）是数据收集工具，而不是报告或分析
工具。还有其他更为复杂的工具可用于数据输出和
在DHIS2中进行报告，而不是在数据输入表中进行报告。纸质表格通常是
设计时要同时考虑数据收集和报告
您可能会看到诸如累积值之类的信息（除了
每月值），重复年度数据（相同的人口数据）
每月报告一次）甚至指标值，例如
与每月原始数据的格式相同。当您将原始数据存储在
DHIS2每个月都有您所需的所有处理能力
不需要电脑工具（实际上这是愚蠢的，大多数
可能导致不一致）注册手动计算的值，例如
如上所述。您只想捕获原始数据
您的数据集/表格，并将计算结果留给计算机，以及
将这些价值呈现给报表工具
DHIS2。

### 从表格到类别组合-设计多维数据集 { #from-tables-to-category-combinations-designing-multi-dimensional-data-sets }

正如我们在上面的示例中看到的，数据元素类别和
类别选项在添加时有助于表示表格数据
纸张形式的字段的尺寸。我们还看到了数据
元素是描述DHIS2中数据的必需维度之一。
正如我们将在下面的示例中看到的那样，通常有不止一种方法可以
代表DHIS2中的纸质表格，可能很难知道哪个
用数据元素名称表示和表示的维
作为类别，甚至如上所述的分组。这里有一些
从使用数据元素和类别中学到的一般经验教训
组合：

-   设计维度时要考虑数据使用，而不是数据收集。这意味着在收集时对数据值的分解应该很容易地沿着各个维度聚合起来，就像加起来一个有意义的总数一样。

-   尽可能多地重用维度，因为这会增加比较分类数据（例如年龄组、固定/外展、性别）的能力。

-   分解维度加起来应该是一个总数。在某些情况下，可以将数据元素收集为彼此的子集。在这种情况下，不应使用类别来分解数据元素。例如，我们可能会收集“确诊疟疾病例数”并按“5 岁以下”和“5 岁以上”进行分类。第三个数据元素“1 岁以下的确诊疟疾病例数”也可能存在于表格中。因此，创建三个年龄组（1 岁以下、5 岁以下和 5 岁以上）来描述分类似乎是合理的。但是，1 岁以下儿童实际上是 5 岁以下儿童组的一个子集，如果加起来会导致重复。因此，类别通常应该由相互排斥的类别选项组成，这样各个类别选项的总和就会产生一致的总数。

-   不同层次的维度； 1) 分解和 2) 分组。分解维度决定了您收集数据的方式以及存储数据的详细程度，因此请仔细计划这些。组维度更加灵活，即使在数据收集之后也可以更改和添加（将其视为标记）。

-   在设计元数据模型时，最好考虑如何在集成数据存储库中使用数据，而不是如何在表单或程序中实际收集数据。理想情况下，应在表格和数据集中对将一起分析或用于构建指标的数据元素使用相同类型的分解。重用定义，以便数据库可以集成，即使表单本身可能重复（在实践中经常出现这种情况）。

为了更好地解释我们介绍的方法和可能性
纸质表格示例，并将逐步进行设计
数据元素，类别，类别选项和类别组合。

![](resources/images/data_dimensions/PHUF3.jpg)

此表单有很多表，每个表都可能代表一个数据
元素类别组合（此后称为Catcombo）。如
这样对数据集就没有限制，只有一个
尺寸或Catcombo，它可以有很多，正如我们在上面看到的那样
由于表格之间的尺寸差异很大，因此有必要。在
在下面的段落中，我们将分析如何分解这种形式
到其组成部分中，并提出实施途径
DHIS2。

** ANC表**。左上角的这张桌子是比较简单的一张
以这种形式。它具有两个维度，第一列带有ANC
活动或服务（第一次访问，IPT第二次剂量等），第二次和
第三栏代表提供服务的地方
两个选项：“固定”和“外联”。由于ANC服务是关键
现象在这里进行分析，通常需要查看
不论“ ANC第1次访问”的实际位置如何，
使用此维度作为数据元素非常有意义
尺寸。

因此，“ 1st ANC”中第一列上的所有项目都将访问“ 2nd IPT”
“ TBA给定的剂量”表示为单独的数据元素。
“ where”维表示为数据元素类别（从现在开始）
这两个类别称为“固定/外展”
数据元素类别选项（从现在开始为catoptions）“固定”和
“宣传”。这里没有其他维度，因此我们添加了一个新的catcombo
名称为“固定/外展”，类别为“固定/外展”。
严格来说，此表中还有另一个维度，那就是
在PHU或TBA尺寸处，对两个剂量重复
IPT，但由于列出的其他ANC服务均没有此维度
从中分离出两个数据元素似乎不是一个好主意
此表，并给他们另一个固定/外展和
在PHU / TBA。对所有ANC服务重复使用相同的目录组合
更有意义，因为在报告中一起查看这些内容会更容易
等等，而且重复进行
在PHU处或通过TBA信息作为数据元素名称的一部分
仅包含11个数据元素的表中的4个数据元素。

**交货表。**此表比较棘手，因为它有很多
信息，您会看到并非所有行都具有相同的列
（某些列将合并，并且一个字段将变灰/禁用。）。要是我们
首先看一看“协助运送”一栏
只能是一维，但只能向下到“未经训练的待定”行，
其余三行与谁协助交付
所有。另一个方面是交货地点，无论是在PHU中还是在
顶列标题中所述的社区。这些交付是
进一步分为交付结果，无论是现场直播还是现场直播
仍然出生，这似乎是另一个层面。所以如果我们无视
暂时排在最下面的三排，这里似乎有3个尺寸，1）
2）分娩地点，以及3）分娩结果。钥匙
决定要使用什么作为数据元素，主要维度，
您最常使用并希望在其中轻松获得的总数
报告和数据分析。

在这种情况下，结果维度为“活产总数”
许多指标的常用值（孕产妇死亡率，出生率
由熟练的卫生人员参加）。在这种情况下，
按“维度也可以毫无问题地使用，但是
轻松获得活产婴儿总数信息的附加价值是
对我们而言至关重要的一点。这意味着从该表（或
第1至6行）只有两个数据元素； “活产”和“仍然
出生”。

接下来，还有两个维度，“ PHU /社区”及其两个维度
选项和“参加的生日”以及选项（“ MCH助手”，“ SECHN”，
“助产士”，“ CHO”，“训练有素的TBA”，“未训练的TBA”）。这两个类别
组成分配给两个数据元素的组合“出生”
“活产”和“静止产”。考虑到最后三行
交货表，我们可以看到“复杂交货”没有
有维度的帮助，但有地方和结果。 “低
出生体重”也没有维度的帮助，而不是
结果还是。交货后提供的LLITN没有任何信息
完全没有额外的尺寸。由于三行中的任何一行都不能共享
catcombo与任何其他行一样，我们决定将这些字段表示为
称为平面数据元素，表示在以下位置没有类别的数据元素
全部，只需在列中添加其他信息
数据元素名称的标题，因此以
跟随具有默认（与否相同）catcombo的数据元素；
“ PHU活产中的复杂分娩”，“
PHU仍在分娩”，“社区活产中复杂的分娩”，
“社区死胎中的复杂分娩”，“
PHU”，“社区低出生体重”和“分娩后给予LLITN”。

** NAT-NATAL CARE表**此表很简单，我们使用了相同的表
方法与ANC表相同。第一个列出了3个数据元素
列，然后将其链接到称为“固定/外展”的类别组合。
对这些数据元素重新使用相同的固定/扩展类别将启用
使用ANC数据和其他数据进行固定/外展分析
同一类别。

** TT表**此表比以前的表复杂一些
我们决定使用“ TT1”，“ TT2” ...“ TT5”作为数据元素
可以很容易地获得每一个的总数。有
固定/扩展维度，但也有“在学校内”
仅适用于非孕妇，或更正确地适用于
这两个作为学校免疫接种是否女孩
怀孕与否。我们咨询了表格后面的计划人员，并
发现可以将所有学校TT免疫接种注册为
非怀孕的，这可以简化模型，因为我们可以重复使用
“ TT1”至“ TT5”数据元素。所以我们最终得到了一个新类别
具有三个选项（固定，外展，在校）的“ TT地点”，以及
另一个类别称为“怀孕/非怀孕”，其中有两个选项。的
然后，新的Catcombo“ TT”是这两者的组合，并应用于
5个TT数据元素。由于我们同意将所有在校免疫接种
“非怀孕于”下的是指选项的组合（“怀孕+入
学校）将永远不会以任何数据输入形式使用，因此成为
可能的optioncombo，可以。只要表格是自定义的
设计之后，您可以选择要使用的选项组合或
不会，因此拥有这样的被动或未使用也不是问题
catoptions。在TT地点类别中将学校作为一种选择
简化了模型，因此我们认为这是值得的。的
替代方法是为“学校中的TT1”再创建5个数据元素
...“ TT5 in school”，但添加这些内容会有些混乱
连同“ TT1” ...“ TT5”以及TT Catcombo。作为一个学校
TT位置类别中的位置可以更轻松地获得总分
给出了TT1..TT5疫苗，这是最重要的数字和最
经常用于数据分析的值。

**早孕和晚期妊娠并发症及分娩**
将这两张表合二为一，并说明原因。这两个表是一个
有点令人困惑，而不是最好的设计。最重要的数据来了
这些表中是怀孕并发症和孕产妇
死亡人数。这些数据元素包含有关导致问题的更多详细信息
并发症或死亡（两个表格的第一列），以及
死亡地点（在PHU或社区），以及并发症的结果
（如果不是死亡的话）可以是“在PHU管理”或“
我们决定为这两个表创建两个数据元素。
“妊娠并发症”和“孕产妇死亡”两类
组合，每个数据元素一个。对于怀孕
并发症数据元素还有两个附加维度，
并发症的原因（合并后第一列的列表
两个表格）和结果（由PHU或“已转介”管理），因此这些是
组成该类别组合的类别和选项。对于
“孕产妇死亡”数据元素同类别与不同
使用原因，然后使用另一类死亡地点（在PHU中
或在社区中）。这样，两个数据元素可以共享一个类别
这样很容易得出怀孕总数
并发症和产妇死亡。虽然清单上的并发症
您可以看到纸质表格分为两个（早工和晚工）
那例如第2和第3个月的疟疾列在早期，
但实际上是在怀孕后期。没有明确的
区分早期和晚期并发症的形式，因此
我们放弃了尝试在数据库中做出这种区分。

**计划生育服务表**此表有2个维度，
计划生育方法（避孕方法）以及客户是新客户还是新客户
继续。我们只得到了一个数据元素“计划生育
客户”，然后添加两个类别的“ FP方法”
避孕药作为选项，另外一个类别“ FP客户类型”
新的或继续的选项。这样很容易获得总数
计划生育客户的数量是要看的主要价值
数据分析，从那里您可以轻松获得方法的详细信息
或有多少新客户。

### 设计数据集的分步方法 { #step-by-step-approach-to-designing-datasets }

1.  识别纸质表单中共享相同维度的不同表（或子数据集）

2.  为每个表标识描述数据字段的维

3.  确定关键维度，孤立地看待最有意义的维度（当其他维度被折叠时，总结起来）。这是您的数据元素维度，是您的多维模型（子数据集）的起点和核心。如果这对数据分析更有意义，则数据元素维度可以是两个或多个维度的合并。关键是要确定在其他维度折叠时单独查看最有意义的总计。

4.  对于所有其他/附加维度，请确定它们的选项，并为维度及其选项提供解释性名称。

5.  这些附加维度中的每一个都将是一个数据元素类别，它们的选项将是类别选项。

6.  将每个子数据集的所有类别组合成一个类别组合，并将其分配给表中的所有数据元素（或您喜欢的子数据集）。

7.  7\。完成所有表（子数据集）后，创建一个新数据集并将您识别的所有数据元素（以整个纸质形式）添加到该数据集。

8.  8\。然后，您的数据集将包含一组链接到一个或多个类别组合的数据元素。

# 附加数据维度 { #additional_data_dimensions }

## 关于其他数据维度 { #about-additional-data-dimensions }

DHIS2不仅可以为数据添加维度，
在上一章中进行了介绍。我们将这些尺寸称为
“属性类别”（AC）。先前描述的类别
本章将我们称为“分类类别”（DC），以区分
他们来自AC。

AC和DC非常相似-它们的工作方式大致相同，
通过维护界面的同一部分访问并存在
在数据库的同一部分。它们之间的主要区别是
它们连接的对象：DC附加到数据元素。 AC，
但是，附加到数据集。这意味着所有DC选项的值
可以在同一数据输入屏幕上输入，而您必须选择
开始输入数据之前输入AC选项。

在设置系统时，您可以仅使用DC而不考虑AC
共。但是，AC是简化数据输入屏幕或
减小类别选项组合的叉积的大小。

当您决定哪些类别应为DC且哪些类别应为DC
AC，这是一个很好的标题：

-   当您想对数据集中的不同数据元素使用不同的类别组合时，请使用 DC

-   当您想在一个数据输入屏幕上输入所有类别选项组合时，请使用 DC

-   当您想对数据集中的所有数据使用相同的类别组合时，请使用 AC

-   如果您只想在一个数据输入屏幕上输入一个类别选项组合，请使用 AC

虽然我们在前一章中为了简单起见将 DC 称为 _what_ 维度的一部分，但实际上它更复杂。 DC 或 AC 都可以回答有关数据元素的任何问题，包括_what_（当然）、_who_、_why_、_how_，甚至是组织单位和周期维度之外的_where_ 或_when_。

## 创建或编辑属性类别及其选项 { #create-or-edit-an-attribute-category-and-its-options }

在创建属性类别以及选项和
组合，请参阅本手册中名为“管理类别”的部分。

# 关系模型 { #relationship_model }

 <!--DHIS2-SECTION-ID:relationship_model-->

关系表示跟踪器模型中两个实体之间的链接。关系被视为DHIS2中的数据，并且基于关系类型，类似于被跟踪实体实例基于被跟踪实体类型的方式。

关系始终包括两个实体，并且这些实体可以包括“跟踪的实体实例”，“注册”和“事件”，以及这些的任意组合。请注意，当前应用程序中并非所有这些组合都可用。

另外，关系可以定义为单向或双向。
唯一的功能差异是当前这些功能需要不同的级别
创建的权限。单向关系要求用户拥有数据
对“从”实体的写访问和对“至”实体的数据读访问，
双向关系需要双方的数据写访问权限。

## 关系类型 { #relationship_model_relationship_type }

 <!--DHIS2-SECTION-ID:relationship_model_relationship_type-->

关系类型是关系具有的属性的定义。
关系始终包含两个方面，分别称为“从”和“到”，以及
每边可以包含哪些实体由关系确定
类型。确定每个属性可以包含的属性称为
约束，分别来自fromConstraint和toConstraint。这些约束是
在以后处理数据时很重要，以了解之间的关系
可以也不能包含。

关系类型中定义的每个约束都包含几个
属性。主要属性是关系实体，它决定什么
关系可以包含的一种实体。实体可以是
每个约束如下：

-   跟踪实体实例
-   注册
-   事件

根据您选择的关系实体的类型，可以选择
每个约束的其他限制。下表说明了
您可以配置不同的组合：

|                     | 跟踪实体实例 | 注册 | 事件    |
| ------------------- | ----------------------- | ---------- | -------- |
| 追踪实体类型 | 需要                | 可选的   | --        |
| 程序             | --                       | 需要   | --        |
| 程序阶段       | --                       | 需要   | 可选的 |

这些额外的限制要求实体匹配限制
在创建之前进行设置。例如，如果您的关系是
母亲和孩子，两个约束都将具有所需的跟踪实体
将类型设置为“人”，并且可以选择将“入学率”设置为“孕产妇健康”
程序和子程序。这样，仅跟踪实体实例
属于“人”类型并且已注册所需程序的人员
被包括在这些关系中。

除了关系类型可以具有的约束外，每个关系
可以设置为双向，真或假。如果该属性设置为false，则
关系被视为单向的。如前所述，唯一
这些关系之间的功能差异是访问的严格程度
创建或更新它们时-双向是最严格的。人际关系
根据关系是否在UI中呈现不同
是双向或单向的。

关于双向关系要注意的一件事是
“从”和“到”两面在数据库中仍然很重要，这意味着每个实体
必须匹配该侧的约束。但是，从用户角度来看，
在每个方面，每个实体的存储都是无关紧要的。

# DHIS2词汇表 { #dhis2_glossary }

## 一个 { #a }

聚合：在 DHIS2 的上下文中，聚合是指数据元素如何在特定的层次关系中组合。例如，一个特定地区的所有卫生设施都会为该特定地区的总价值做出贡献。 DHIS2 支持不同的聚合运算符，例如 SUM、AVERAGE 和 COUNT。

分析：分析是指将已输入 DHIS2 的数据处理和准备成更适合检索指标和汇总数据的格式的过程。当数据输入 DHIS2 时，它会以一种为写入数据而优化的格式存储。但是，当需要将数据处理为指标或汇总（例如从几个月到季度）时，以针对只读操作进行优化的不同格式转换和存储这些数据会更有效。 DHIS2 的分析系统被分析应用程序（GIS、数据透视表、事件报告等）广泛使用。

    重要的是要记住，因为数据
    输入 DHIS2 必须被处理成分析格式，
    出现在分析应用程序中的数据仅代表数据
    上次运行分析时存在于系统中。如果
    之后已输入数据，需要运行分析
    再次让这些数据出现在分析应用程序中。

汇总数据：在 DHIS2 的上下文中，汇总数据是指从其他分层数据源中得出的数据元素或指标。例如，综合设施数据将来自为特定服务到过该设施的所有患者的总数。汇总地区数据将来自特定地区包含的所有设施的汇总总数。

应用程序编程接口：应用程序编程接口是对不同软件组件应如何相互交互的规范。 DHIS2 API（或 WebAPI）可用于将 DHIS2 与其他软件连接，以构建报告或自定义数据输入表单。

批准：批准可用于控制数据的可见性和可编辑性。当数据从最低报告级别提交时，可以由上一级批准。该批准有两个效果：

    1. 数据输入画面无法再编辑
        较低的水平。

    2. 根据已启用的系统设置，
        数据将在批准级别变得可见。

    例如，在设施级别输入数据，并且
    提交审批。资料一经审核通过
    区级，数据将被锁定在数据条目中
    设施级别的屏幕。它也将在
    分析应用程序给地区用户。

## B { #b }

Bi-monthly : 指两个月的时间段，如 1 月 1 日至 2 月 28 日。

## C { #c }

类别：类别是类别选项的组。它们组合使用以分解数据元素。类别通常是单一类型的概念，例如“年龄”或“性别”。

类别组合：类别组合用于分解数据元素。例如，数据元素“疟疾确诊病例数”可以细分为以下类别：“年龄”和“性别”。反过来，这些类别中的每一个都将包含几个类别选项，例如性别类别的“男性”和“女性”。类别组合可能由一个或多个类别组成。

类别组合选项：类别组合选项由构成类别组合的类别选项的所有不同组合动态组成。例如，“性别”和“年龄”两个类别可能具有“男性”或“女性”和“<5 years" or "> 5 年”等选项。类别组合选项将包括：

    - 男性 <5 岁
    - 男性 >5 岁
    - 女性 <5 岁
    - 女性 >5 岁

类别选项：类别选项是分组到类别中的原子元素。

逗号分隔值：逗号分隔值是以纯文本格式存储的一系列表格数据。它们通常与 DHIS2 一起用于导出和导入数据值。

## D { #d }

数据字典：数据元素和指标的集合，可以与其他 DHIS2 系统进行交换。通常用于在设置 DHIS2 系统时定义一组数据元素和指标。

数据交换格式：在 DHIS2 的上下文中，“数据交换格式”指的是一种 XML 模式，它支持在断开连接的 DHIS2 实例之间以及支持 DXF 模式的不同应用程序之间传输数据和元数据。

Datamart：DHIS2 中的一组数据库表，其中包含根据聚合规则和计算的数据元素和指标公式生成的已处理数据元素和指标值。 Datamart 表用于分析和报告生成。通常，用户不应直接使用未聚合的数据值，而应使用数据集市导出的值进行分析。

数据元素：数据元素是 DHIS2 的基本构建块。它是具有明确定义的数据的原子单元。从本质上讲，它是实际观察或记录的数据值，进一步以多个维度为特征。例如，数据元素“完全免疫的儿童数量”将指接受此特定服务的儿童数量。数据元素始终与一个时期以及一个组织单位相关联。它们可选地可以链接到其他维度。

数据元素组：数据元素组用于根据共同主题对多个数据元素进行分类，例如“免疫”或“ART”。通常，它们在报告和分析期间使用，以允许一起分析相关的数据元素。

数据元素组集：数据元素组用于将多个数据元素组分类为一个共同的主题。

维度：维度用于在分析期间对数据元素进行分类。维度提供了一种基于共同特征对数据进行分组和过滤的机制。通常，相关数据元素可以在分析期间使用维度进行聚合或过滤。维度可能是层次结构的成员。例如，“期间”维度可以分解为“日-\>月-\>季度-\>年”。

DXF

## H { #h }

健康管理信息系统：通常是一种电子数据库系统，用于记录服务提供、疾病发病率、人力资源数据和其他用于评估卫生服务提供绩效的信息的汇总数据。通常，HMIS 不包含高度详细的电子病历系统数据或个体患者数据。

## 我{ #i }

指标：指标的除数。可以使用指标公式由多个数据元素组成。

    \[
    指标 = {\frac{分子}{分母}}
    \]

    这显然是一个非常笼统的例子。分子和
    指标本身可以由各种数据元素组成，
    因子和四个基本操作数（加法、乘法、
    除法和减法）。

## N { #n }

分子：指标的红利。可以使用指标公式由多个数据元素和因素组成。

## o { #o }

组织单位：组织单位通常是一个地理单位，它存在于一个层次结构中。例如，在美国，`Georgia`将被视为组织单位级别为`State`的组织单位。组织单位也可用于指定行政单位，例如医院内的病房。组织单位维度实质上_指定了_特定数据值发生的位置。

组织单位级别：指组织层次结构中的级别。通常，国家在不同级别进行管理，例如 1) 国家 2) 州 3) 县 4) 卫生设施。在 DHIS2 的背景下，卫生设施通常是最低的组织单位。数据从最低的组织单位级别向上聚合到最高级别。

## P { #p }

期间：期间是由开始日期和结束日期组成的特定时间间隔。例如，“2011 年 1 月”指的是 2011 年 1 月 1 日至 2011 年 1 月 31 日的时间间隔。

## u { #u }

唯一标识符：唯一标识符 (UID) 是 DHIS2 用来识别特定资源的半随机字母和数字系列。 UID 以字母开头，后跟正好 10 个字母或数字。

# 关于演示服务器，实时软件包和数据库设计 { #moare_about_dhis2_server_database }

## 使用DHIS2演示服务器 { #using-the-dhis2-demo-server }

DHIS2团队在以下位置维护演示服务器
 <https://play.dhis2.org/demo>。到目前为止，这是最简单的尝试方法
DHIS2。只需在Web浏览器中打开链接并使用用户名登录
=管理员和密码=区。

> **注意**
>
> 此服务器上的所有更改每晚都会被删除，因此请不要在此服务器上保存任何重要工作。它仅用于演示目的\！

## 使用DHIS2实时软件包 { #mod2_1 }

### 启动DHIS2 Live程序包 { #starting-the-dhis2-live-package }

DHIS2 Live软件包是开始使用DHIS2的最简单方法
您的本地计算机。 DHIS2 Live适用于独立
安装和演示。只需从下载应用程序
[此处]（http://www.dhis2.org/downloads）。下载文件后，您可以
只需双击下载的文件，即可开始使用
DHIS2。

#### DHIS2 Live的先决条件 { #prerequisites-for-dhis2-live }

您必须确保拥有最新版本的Java Runtime
安装在您的计算机上。根据您的操作系统，有
安装Java的不同方法。读者参考此
[网站]（http://java.sun.com/javase/downloads/index.jsp）了解详细信息
有关安装Java的信息。

#### 从空白数据库启动 { #starting-up-with-a-blank-database }

实时软件包随附演示数据库，就像您看到的一样
[在线演示]（http://apps.dhis2.org/demo/）（基于
国家塞拉利昂HMIS），如果您想以空白开头
系统/数据库并建立自己的系统，那么您需要
以下：

1 \）如果DHIS2已在运行，请停止运行。右键点击托盘
图标，然后选择退出。托盘图标是底部的绿色符号
屏幕右侧（在Windows上）应显示“ DHIS2 Server
当您将鼠标指针悬停在该图标上时。

2 \）打开DHIS2 live软件包的安装文件夹，然后找到
名为“ conf”的文件夹。

3\) 在 conf/ 中，在文本编辑器（记事本或类似工具）中打开名为 'hibernate.properties' 的文件并进行以下修改：找到字符串 'jdbc:h2:./database/dhis2' 并替换 'dhis2'与您想为数据库提供的任何名称（例如 dhis2_test）一起使用。

4 \）保存并关闭hibernate.properties文件。

5 \）通过双击文件dhis2-live.exe启动DHIS2 Live。
DHIS2 Live安装文件夹或使用桌面快捷方式或
您可能已设置的菜单链接。

6 \）等待浏览器窗口打开并显示登录屏幕，
然后使用用户名：admin和密码：district登录

7 \）现在您将看到一个完全空的DHIS2系统，您应该
首先添加您的用户，组织层次结构，数据元素和
数据集等。请参考用户手册的其他部分
有关如何执行此操作的说明。

### 下载并安装服务器版本 { #downloading-and-installing-the-server-version }

可以从此处下载最新的稳定服务器版本
[网站]（http://stable.dhis2.org/）。有关如何的详细信息
安装它，请参阅
实施手册。

## 登录到DHIS2 { #mod2_2 }

无论您已安装服务器版本还是
桌面Live版，您将使用网络浏览器登录到
应用。 DHIS2应该与大多数现代网络浏览器兼容，
尽管您将需要确保已启用Java脚本。

如果使用的是DHIS2实时软件包，请输入<http://localhost:8080/dhis>来登录到该应用程序，或者将`localhost` 替换为安装服务器版本的服务器的名称或IP地址。

在线或脱机启动DHIS2后，将显示
屏幕将提示您输入注册的用户名和密码。
输入所需信息后，单击登录按钮进行登录
进入应用程序。默认的用户名和密码为“ admin”，
'区'。在第一次登录时应立即更改它们
时间。

![](resources/images/getting_started/login.png)

您可以从菜单中选择想要显示DHIS2的语言。
屏幕底部的“更改语言”对话框。不是全部
语言可能可用。

如果您忘记了密码，可以点击“忘记了
密码？”链接。您必须已将您的电子邮件地址和
服务器必须正确配置为发送电子邮件。

如果要创建自己的帐户（和服务器管理员
允许），只需点击“创建帐户”并按照说明进行操作
提供。

登录DHIS2后，请参考本节中的特定部分。
可用的不同功能的手册。

## 注销DHIS2 { #mod2_4 }

只需单击配置文件，然后单击右上角的“注销”
DHIS2菜单中的。

## 设计DHIS2数据库快速入门 { #database_design }

DHIS2提供了一套功能强大的工具，用于数据收集，验证，
报告和分析，但数据库的内容，例如要做什么
收集，应由谁收集以及哪种格式取决于
使用环境。但是，为了对DHIS2做任何事情，您必须
首先创建元数据。元数据或有关数据的数据描述
应该收集什么（数据元素和类别），应该在哪里收集
收集（组织单位）以及应多久收集一次
收集（期间）。此元数据需要在DHIS2中创建
数据库才能使用。这可以通过用户完成
界面，不需要任何编程或深入的技术技能
软件，但确实需要对流程有很好的了解
您正在尝试收集数据的表格。

本节将对DHIS2进行非常简短的介绍。
数据库设计，主要说明准备数据库所需的各个步骤
新的DHIS2系统供使用。每个步骤的执行方法均在其他部分进行了说明
有关设计选择的章节和最佳做法将在
实施者手册。以下是要遵循的步骤：

1 \。建立组织层次结构

2 \。定义数据元素

3 \。定义数据集和数据输入表格

4 \。定义验证规则

5 \。定义指标

6 \。定义报告表和设计报告

7 \。设置GIS模块

8 \。设计图表并自定义仪表板

### 组织层次结构 { #the-organisational-hierarchy }

组织层次结构使用DHIS2定义组织，
卫生设施，行政区域和其他地理区域
用于数据收集和数据分析。数据的这个维度是
定义为具有一个根单元的层次结构（例如卫生部），并且
下面任意数量的级别和节点。此层次结构中的每个节点是
在DHIS2中称为组织单位。

此层次结构的设计将确定
在收集和汇总数据时可供用户使用的分析
这种结构。只能有一个组织层次结构
同时，其结构需要仔细考虑。额外
层次结构（例如，平行的行政分组，例如“
所有权”）可以使用组织组和组集进行建模，
但是组织层次结构是数据的主要载体
地理维度上的汇总。通常是国家
公共卫生中的组织层次结构有4-6级，但是任何
支持级别数。层次结构是由父子构成的
关系，例如国家或卫生部（根）可能有8
上级单位（省），每个省（级别2）可能会再次
有10-15个地区作为他们的孩子。通常情况下，卫生设施
将位于最低层，但也可以位于
更高的水平，例如偏斜的国家或省级医院
支持组织树（例如，可以定位叶节点
处于第2级，而其他大多数叶节点处于第5级）。

通常，由健康定义一个地理层次结构
系统。例如行政办公室所在的位置（例如卫生部，
省，区），但通常还有其他行政区域
在可能添加或可能不添加的国家/地区中，具体取决于其添加方式
边界将改善数据分析。设计层次结构时
任何组织单位的孩子人数可能表明
结构的实用性，例如具有一个或多个1-1关系
在两个级别之间不是很有用，因为对于
子级和父级。在另一个极端上，这个数字很高
等级中间的儿童数量（例如，一个地区的50个地区
省）可能需要在之间添加一个附加级别
增加数据分析的实用性。最低水平，健康
设施通常会有大量的孩子（10-60岁），但是对于
层次结构中更高的其他级别。 5-20个孩子是
推荐的。太少或太多的孩子可能表明该水平
应该删除或添加。

请注意，很容易更改
在稍后的阶段，唯一的问题是改变组织
收集数据的单位（叶节点），例如分裂或合并
卫生设施。层次结构的汇总基于
随时可以使用当前的层次结构，并且将始终反映最新的层次结构
组织结构的变化。请参阅以下章节
组织单位，以学习如何创建组织单位并
建立层次结构。

### 数据元素 { #data-elements }

数据元素可能是 DHIS2 数据库最重要的构建块。它代表“什么”维度，它解释了正在收集或分析的内容。在某些情况下，这被称为指标，但在 DHIS2 中，我们将此收集和分析单元称为_数据元_。数据元素通常表示某事物的计数，其名称描述了正在计数的内容，例如“给予的 BCG 剂量”或“疟疾病例”。当数据被收集、验证、分析、报告或呈现时，数据元素或建立在数据元素上的表达式描述了数据的内容。因此，数据元素对于系统的各个方面都变得很重要，它们不仅决定了如何收集数据，更重要的是决定了数据值在数据库中的表示方式，这再次决定了数据的分析和呈现方式。

您可以通过以下方式向此“ WHAT”维度添加更多详细信息：
分解维度称为数据元素类别。一些常见
类别是“年龄”和“性别”，但用户可以添加任何类别
并链接到特定的数据元素。数据组合
元素的名称及其分配的类别定义了
系统中可用的收集和分析，因此描述了
数据库中的原始数据。缩小时可以进行汇总
此尺寸，但无法进一步下钻，因此设计数据
元素和类别定义了可用于
系统（在WHAT维度上）。数据元素和
在此过程的后期阶段，类别可能会很复杂，因为这些
将会更改已经捕获的数据值的含义
数据库（如果有）。所以这一步是更果断和谨慎的一步
数据库设计过程中的步骤。

设计数据元素时的一种最佳实践是考虑数据
元素作为数据分析的一个单元，而不仅仅是数据中的一个字段
收集表格。每个数据元素都独立存在于数据库中，
完全脱离收集表格，报告和其他
输出基于数据元素和由以下内容组成的表达式/公式
数据元素而不是数据收集表单。所以数据分析
需求应该驱动流程，而不是数据的外观
收集表格。一个简单的经验法则是数据的名称
元素必须能够独立运行并描述数据值
也在其收集形式的范围之外。例如。数据元素
无论是在“
“ RCH”形式或“ OPD”形式，但就其本身而言并非唯一
描述现象（被引荐给谁？），而应改为
称为“来自孕妇的总推荐数”或“来自OPD的总推荐数”。
两个不同的数据元素具有不同的含义，尽管该字段
纸质表格上的用户只能说“总推荐人”，因为
表格将始终知道这些引用来自何处。在数据库中或
数据元素存储库，此上下文不再有效，并且
因此，数据元素的名称在
描述数据。

数据元素的通用属性可以通过什么来建模
称为数据元素组。这些小组在
感觉它们是由用户定义的，包括其名称和名称
会员资格。组对于浏览和显示相关信息均有用
数据，但也可以用于将数据元素聚合在一起。团体
松散耦合到数据元素，而不直接绑定到数据
值，这意味着它们可以在任何时间点进行修改和添加
而不干扰原始数据。

### 数据集和数据输入表格 { #datasets-and-data-entry-forms }

DHIS2中的所有数据输入都是通过使用数据集来组织的。一种
数据集是为数据分组在一起的数据元素的集合
集合，并且在分布式安装的情况下，它们还定义了
在DHIS2实例之间导出和导入的大块数据（例如
从地区办公室本地安装到国家服务器）。
数据集不直接链接到数据值，而仅通过它们
数据元素和频率，因此可以修改数据集，
随时删除或添加而不影响原始数据
已经被系统捕获，但是这种变化当然会影响
如何收集新数据。

数据集具有控制数据收集的期间类型
频率，可以是每天，每周，每月，每季度，每六个月，
或每年。数据集中要包含的数据元素和
时段类型由用户定义，并带有名称，简称，
和代码。

为了使用数据集收集特定组织单位的数据，您需要
必须将组织单位分配给数据集，并且该机制控制
哪些枪支可以使用哪些数据集，并同时定义
数据完整性的目标值（例如，多少医疗机构
预计每个月都会提交RCH数据的地区）。

一个数据元素可以属于多个数据集，但这需要
仔细思考，因为这可能导致重叠和不连续的数据
如果例如收集数据集被赋予不同的频率，并且
由相同的枪械使用。

#### 数据输入表 { #data-entry-forms }

将数据集分配给组织单位后，将创建该数据集
可在您拥有的orgunits的Data Entry（在Services下）中找到
根据数据集将其分配给有效期
期间类型。然后将显示一个默认的数据输入表单，该表单是
只是属于数据集的数据元素的列表
带有用于输入值的列。如果您的数据集包含数据
类别，例如年龄段或性别，再加上其他元素
列将基于默认格式自动生成
类别。除了默认的基于列表的数据输入表单
还有两种选择，基于节的表单和自定义表单。

##### 部分表格 { #section-forms }

截面表单在使用时提供了更多的灵活性
表格形式，设计快速简单。通常您的数据输入
表单将需要多个带有副标题的表，有时您需要
禁用（灰显）表中的某些字段（例如，某些类别
不适用于所有数据元素），这两个功能均受支持
部分形式。定义数据集后，您可以定义它的部分
带有数据元素的子集，标题和可能的灰色字段
部分的表格。也可以定义数据集中各部分的顺序。
在“数据输入”中，您现在可以开始使用“部分”表单（应显示
当部分可用于所选数据集时自动显示）。您
可以在默认格式和部分格式之间切换
数据输入屏幕。大多数表格数据输入表格都应该可行
与节形式有关，您可以利用该节更多
表单（或默认表单）对您来说越容易。如果这两种类型
表格不符合您的要求，那么第三个选择是
完全灵活，但更耗时的自定义数据输入
形式。

##### 自订表格 { #custom-forms }

当您要设计的表单对于默认表单而言过于复杂时
部分表格，那么您最后的选择是使用自定义表格。这需要
更多的时间，但在设计方面为您提供了充分的灵活性。在
DHIS2有一个用于表单设计器的内置HTML编辑器（FcK编辑器）
您可以在用户界面中设计表单，也可以粘贴到HTML中
直接使用编辑器中的“源”窗口。在自定义表单中，您
可以插入静态文本或数据字段（链接到数据元素+
类别）在表格上的任何位置，您有完全的自由
设计表单的布局。将自定义表单添加到
数据集，它将在数据输入中可用并自动使用。您
可以切换回默认值，并且顶部的部分（如果存在）形式
数据输入屏幕的右上角。

### 验证规则 { #validation-rules }

设置完系统的数据输入部分并开始
收集数据，然后有时间定义有助于质量的数据质量检查
以提高所收集数据的质量。您可以添加尽可能多的
您喜欢的验证规则，这些规则由左和右组成
副表达式又由数据元素组成，带有
双方之间的运算符。典型规则是将小计与
总的东西。例如。如果您有两个数据元素“艾滋病毒检测
”和“艾滋病毒检测结果呈阳性”，那么您知道
表格（同一时期和组织单位）的总数
测试必须始终等于或高于肯定测试的数量。
这些规则应该是绝对规则，这意味着它们是
数学上正确，而不仅仅是假设或“大部分时间
正确”。可以在填写每个表格后在数据输入中运行规则，
或同时处理多种形式的批量处理，例如
适用于上一个报告月份的所有设施。结果
测试将列出所有违规行为以及每个方面的详细值
发生违规的表达式可以很容易地返回
进行数据输入并更正值。

### 指标 { #indicators }

指标可能代表DHIS2最强大的数据分析功能。数据元素代表收集的原始数据（计数），指标代表提供覆盖率，发生率，比率和其他基于公式的分析单位的公式。指标由一个因子（例如1，100、100、100 000），分子和分母组成，后者的两个都是基于一个或多个数据元素的表达式。例如。指标“ BCG覆盖率< 1岁”定义为一个公式，系数为100，分子（“给1岁以下儿童的BCG剂量”）和分母（“ 1岁以下的目标人群”）。指标“ DPT1至DPT3退出率”是100％x（“给定DPT1剂量”-“给定DPT3剂量”）/（“给定DPT1剂量”）的公式。

DHIS2中的大多数报告模块都支持数据元素和指标
您也可以将它们合并到自定义报告中，但是重要的是
指标与原始数据的差异和强度（数据元素的
数据值）是比较不同数据的能力
地理区域（例如人口稠密地区与农村地区）作为目标
分母可以使用分母。

指标可以随时添加，修改和删除
而不干扰数据库中的数据值。

### 报告表和报告 { #report-tables-and-reports }

DHIS2中的标准报告是一种非常灵活的数据呈现方式
已收集。数据可以由任何组织汇总
单位或组织单位级别，按数据元素，按指标以及以上
时间（例如每月，每季度，每年）。报告表是自定义的
标准报告的数据源，并且可以在
用户界面，以后可以在外部报表设计器中访问，例如
iReport或通过自定义HTML报告。然后可以将这些报告设计
设置具有参数的易于访问的一键式报告，以便
用户可以运行相同的报告，例如每个月都有新数据
输入，并且与所有级别的用户相关，因为
可以在运行报告时选择组织单位。

### 地理信息系统 { #gis }

在集成的GIS模块中，您可以轻松地在地图上显示数据，
既在多边形（区域）上，又在点（健康设施）上，以及
作为数据元素或指标。通过提供您的坐标
组织单位到系统中，您可以快速掌握
这个模块。有关如何开始的详细信息，请参见GIS部分。

### 图表和仪表板 { #charts-and-dashboard }

显示指标数据最简单的方法是通过图表。
易于使用的图表对话框将指导您完成创建
各种类型的图表，其中包含指标，组织单位的数据
和您选择的时期。这些图表可以轻松地添加到其中之一
仪表板上的四个图表部分，可以轻松完成
登录后立即可用。确保将仪表板模块设置为
用户设置中的启动模块。

# DHIS2教程 { #dhis2_tutorials }

## 使用数据透视表应用创建记分卡 { #create-scorecards-pivot-table }

**\*记分卡定义：** 在卫生部等公共卫生机构中，记分卡提供了一种有用且标准化的方法，可将相关指标组合到一个表格中。记分卡提供健康计划（例如疫苗接种计划）绩效的整体视图，突出成功、弱点和需要改进的领域 以下是典型记分卡的外观：\*

![](resources/images/tutorials/scorecards_pivot_result.png)

本教程说明了如何在DHIS2数据透视表应用程序中创建记分卡。使用数据透视表创建记分卡有几个优点，例如：

-   您可以将计分卡保存在仪表板上并离线使用。

-   您可以与其他DHIS2用户共享计分卡。

让我们开始吧\！

### 为记分卡创建图例 { #create-a-legend-for-your-scorecard }

首先，我们将为记分卡创建一个三色的“交通灯”图例。记分卡具有三种基本颜色，易于扫描且易于理解。

1.  Open the **Maintenance** app. Click the menu in the top right corner and select Maintenance from the list of apps. You can also type the first letters of the word maintenance in the search field to find the app.

    ![](resources/images/tutorials/scorecards_maintenance_app.png)

2.  In the Maintenance app, scroll to the bottom of the page right down to the **Other** section.

3.  Go to **Legend** and click the **+**.

    ![](resources/images/tutorials/scorecards_maintenance_legend.png)

4.  In the **Legend Management** page, scroll to the bottom of the page and create a new legend by clicking the blue + button.

    ![](resources/images/tutorials/scorecards_maintenance_addbtn.png)

5.  在字段中输入图例的名称，例如“ Traffic light”，开始值和结束值。您在此处输入的值取决于您希望为记分卡设置的性能等级。

6.  Change **Number of legend items** to 3 to display three colors in the scorecard. To change the legend item colors, click the blue + button and then edit the colors.

    ![](resources/images/tutorials/scorecards_maintenance_legend_color.png)

### 在数据透视表应用中创建记分卡 { #create-a-scorecard-in-the-pivot-table-app }

1.  Open the **Pivot Table** app from the top right menu of the dashboard. You can also enter the first letters of Pivot Table in the search field.

2.  Go to **Data** in the pane on the left side and select **Indicators** in the list.

3.  Select an **Indicator group** such as “ANC” in the second list.

4.  使用箭头，选择要在记分卡中看到的指标类型。

    ![](resources/images/tutorials/scorecards_pivot_indicators.png)

5.  Click **Update**. This button is in the menu at the top of the workspace

6.  Go to **Periods** and select a period for which you want to display data. In this “traffic light” example, we’ll use the relative period section. In **Quarters**, select **This quarter**and **Last quarter**. Clear any other checkboxes and click **Update**.

    ![](resources/images/tutorials/scorecards_pivot_period.png)

7.  Go to **Organisation Units** in the same left side pane, and click the arrow next to the gear button.

8.  选择**选择级别**。

    ![](resources/images/tutorials/scorecards_pivot_orgunit_level.png)

9.  Select **District** from the list (next to the gear button). Click **Update**.

    ![](resources/images/tutorials/scorecards_pivot_orgunit_level2.png)

如您所见，记分卡在
工作区。现在该调整外观。

### 整理记分卡的布局和显示 { #organise-the-layout-and-display-of-your-scorecard }

1.  In the workspace, click **Layout**.

    ![](resources/images/tutorials/scorecards_pivot_layout.png)

2.  In **Table layout**, drag **Organisation units** down to the **Row dimensions** section.

3.  Drag **Data** to the **Column dimensions** section.

4.  In the **Column dimensions** pane, drag **Periods** below **Data**, and click **Update**.

5.  In the workspace, click **Options**.

    ![](resources/images/tutorials/scorecards_pivot_options.png)

6.  Go to **Data** and clear all the checkboxes.

7.  转到 **Style** \> **Legend set** 并从列表中选择您在维护应用程序中创建的图例。在这个例子中，我们称之为交通灯。

8.  Go to **Style** \> **Legend display style** and select **Background color**.

9.  点击**更新**。

记分卡已准备好\！

![](resources/images/tutorials/scorecards_pivot_result.png)

### 保存并分享您的计分卡 { #save-and-share-your-scorecard }

1.  In the workspace, go to the **Favorites** menu.

2.  点击**另存为**。输入您的记分卡名称。

3.  To share your Scorecard, select **Favorites**.

4.  Enter the name of a user group name, and click **Save**. Your scorecard can be viewed by people that you share a dashboard with.

## 使用TextPattern { #working-with-textpattern }

DHIS2版本2.29中引入了TextPattern，作为一种定义
包含变量，生成的值和原始文本的模式
然后可以生成一个文本值。当前用例
TextPattern是为跟踪的实体自动生成的属性，
您要在其中生成例如基于特定ID的唯一ID的位置
模式。

本指南将涵盖与之相关的基本和高级主题
TextPattern，但主要侧重于如何定义TextPatterns
以及存在哪些限制和警告。

### TextPattern语法 { #textpattern-syntax }

TextPattern 是_segments_ 的序列，由“+”字符连接在一起。一个段有一个特定的符号，在大多数情况下还有一个参数_format_，它允许对值进行进一步的操作。

<table>
<caption>TextPattern segments</caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 36%" />
<col style="width: 12%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="header">
<th>Segment notation</th>
<th>Description</th>
<th>Paramenter (format)</th>
<th>Example (segment → input value → result)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&quot;Plain text&quot;</td>
<td>The plain text segment will remain unchanged in all generated values. This special segment is defined by wrapping text between two double quotes. If your pattern should include separation symbols like a dash, you should use this &quot;-&quot;.
<p>The plain text segment also allows for placeholder text. That means you can specify that parts of the plain text segment should be any of a set of characters. Currently there are 4 supported special characters you can use:</p>
<ul>
<li><p>\d (0-9)</p></li>
<li><p>\x (a-z)</p></li>
<li><p>\X (A-Z)</p></li>
<li><p>\w (a-zA-Z0-9)</p></li>
</ul></td>
<td>None</td>
<td>&quot;Hello world&quot; → None → Hello world
<p>&quot;Hello \x\x\x&quot; → &quot;Hello you&quot; → Hello you</p>
<p>&quot;\d\d\d&quot; → &quot;123&quot; → 123</p></td>
</tr>
<tr class="even">
<td>CURRENT_DATE(format)</td>
<td>Current date segment will be generated by the server at the time of generation. This is useful if you want your patterns to have a time-constraint that is disconnected from the context. You should not use this if you need to control which date is injected into the pattern.</td>
<td>Date format</td>
<td>CURRENT_DATE(yyyy) → 01-01-2018 → 2018</td>
</tr>
<tr class="odd">
<td>ORG_UNIT_CODE(format)</td>
<td>This segment represents the organisation unit code associated with the generation.</td>
<td>Text format</td>
<td>ORG_UNIT_CODE(...) → OSLO → OSL</td>
</tr>
<tr class="even">
<td>RANDOM(format)</td>
<td>Random segments will be replaced by a value randomly generated by the server based on the format. Generated segments, like Random, bases its uniqueness on the rest of the pattern. That means a random value can appear twice, as long as the rest of the pattern is different, which means the generated text as a whole will be unique.</td>
<td>Generation format</td>
<td>RANDOM(X####) → None → A1234</td>
</tr>
<tr class="odd">
<td>SEQUENTIAL(format)</td>
<td>Sequential segments will be replaced by a number, based on a counting value on the server. Sequential segments will start at the value 1, and for each generated value count up until no more values are available, based on the format. Like Random segments, uniqueness is based on the rest of the pattern, so each possible version of the pattern will have it's own sequential counter starting from 1.</td>
<td>Generation format</td>
<td>&quot;A&quot;+SEQUENTIAL(###) → None → A001
<p>&quot;A&quot;-SEQUENTIAL(###) → None → A002</p>
<p>&quot;B&quot;-SEQUENTIAL(###) → None → B001</p>
<p>&quot;B&quot;-SEQUENTIAL(###) → None → B002</p></td>
</tr>
</tbody>
</table>

大多数段都有一个参数_format_，除了纯文本段。下表列出了可用的格式、它们的使用方式以及使用它们的示例符号。

<table>
<caption>Parameter formats</caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 52%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="header">
<th>Format</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Date format</td>
<td>This format is based directly on the java SimpleDateFormat, which means any pattern valid for SimpleDateFormat, will be valid as a date format in TextPattern</td>
<td>CURRENT_DATE(dd-MM-yyyy) → 31-12-2018
<p>CURRENT_DATE(MM-yyyy) → 12-2018</p></td>
</tr>
<tr class="even">
<td>Text format</td>
<td>The text format allows for some basic text manipulation. Leaving the format empty will return the value unmodified, but using "^", "." and "&#36;", you can modify the value before it is returned. Each "." represents a character, while "^" represents the start of the text and "&#36;" represents the end. When using formats, the input value must be at least the same length as the format.</td>
<td>
<p>ORG_UNIT_CODE(....) → OSLO</p>
<p>ORG_UNIT_CODE(..) → OS</p>
<p>ORG_UNIT_CODE(..&#36;) → LO</p>
<p>ORG_UNIT_CODE(^...&#36;) → OSLO</p>
<p>^....&#36; will require the input value to be exactly 4 characters.</p></td>
</tr>
<tr class="odd">
<td>Generation format</td>
<td>The generation format accepts a combination of one or more of he following characters: &quot;#&quot;, &quot;X&quot;, &quot;x&quot; and &quot;*&quot;. They respectively represent a number(0-9), an uppercase letter (A-Z), a lowercase letter(a-z) or any of the above(0-9,a-z,A-Z). The SEQUENTIAL segment only accepts &quot;#&quot;, since it will only generate numbers. The number of characters in the format decides the size of the value generated. Using just one &quot;#&quot; will in other words only allow for 10 values (0-9), while &quot;###&quot; will allow for 1000 values (000-999). SEQUENTIAL generated values have leading zeroes, so the length of the generated value will always match the format length.</td>
<td>RANDOM(X###) → A123
<p>RANDOM(****) → 1AbC</p>
<p>SEQUENTIAL(###) → 001</p>
<p>SEQUENTIAL(######) → 000001</p></td>
</tr>
</tbody>
</table>

有关格式的一些重要注意事项：

-   日期格式非常通用，但请注意您使用的日期或时间组件。不建议使用小于一天（例如小时或秒）的组件，即使可用。

-   文本格式允许标记输入值的开始和结束，但“^...”和“...”实际上会给出完全相同的结果。您想要使用“^”的唯一时间是您想要强制输入值的长度。例如，“^....$”将接受 OSLO，因为它在开始和结束之间有 4 个字符，但 PARIS 将被拒绝，因为它有 5 个字符。

-   当文本格式用于唯一值时，如组织单位代码，请确保该格式不会破坏唯一性。 （例如：“PARIS”和“PANAMA CITY”的 ORG_UNIT_CODE(..) 都将返回 PA，这意味着这两个组织单位实际上将共享生成的值）

-   生成格式是了解模式容量的主要方式。确保格式足够长以涵盖比您需要的更多的值。

要结束本教程的语法部分，这里有几个
例
    TextPattern：

    ORG_UNIT_CODE（...）+“-” + CURRENT_DATE（yyyyww）+“-” + SEQUENTIAL（#####）

此模式将有 99999 个可能的值（基于 SEQUENTIAL。00000 从未使用过，因为我们从 1 开始）。此外，对于每个不同的组织单位生成值 (ORG_UNIT_CODE) 和每周（CURRENT_DATE(yyyyww) 表示年和周），剩余模式将发生变化。这实际上意味着每个新的一周，每个组织单位都可以使用 99999 个新值。

    “ ABC_” + RANDOM（****）

此模式的纯文本段不会对
模式的总容量，但是生成的段（RANDOM）
将允许14776336可能的值。原因是\ *
可以是62个可用字符中的任何一个（0-9，a-z，A-Z）。
您可以在下面进一步了解有关了解模式容量的信息
本教程。

### 设计用于生成ID的TextPattern { #designing-textpattern-for-generating-ids }

TextPattern的一种用例是生成唯一的ID。在这个部分
我们将介绍与设计相关的准则和常见问题
用于ID的TextPatterns。

ID不得包含敏感信息或包含以下内容的信息：
组合可以识别一个人。 TextPattern当前不
支持使用此类值的细分受众群，但可能会在
未来。

以下列表突出显示了一些特定于TextPattern的内容
设计id的TextPattern时需要考虑的限制：

-   确保 TextPattern 的容量（可能值的数量）涵盖您的用例。拥有比需要更多的价值比拥有更少的价值要好。使用 TextPattern 跟踪的实体属性将要求 TextPattern 中存在单个生成的段。

-   TextPattern 在整个系统中是唯一的，但仅限于使用它的对象。换句话说，如果您有一个带有 TextPattern 的被跟踪实体属性，由多个被跟踪实体使用（不要误认为被跟踪实体实例），则生成的所有值将在使用该属性的所有被跟踪实体之间共享。这也意味着，如果您有两个具有相同 TextPattern 语法的跟踪实体属性，则每个属性将能够生成与另一个相同的值，因为唯一性基于该属性。

<!-- end list -->

-   SEQUENTIAL 段在实现编号中从 1 开始，每个值增加 1，顺序直到没有更多值可用。但是，实际上，当用户生成和保留从未使用过的值时，或者如果用户发送的值在 SEQUENTIAL 段的值高于服务器上记录的值时，您很可能最终会出现空白。

-   当前实现依赖于用户客户端在存储新值时发送包含在 TextPattern 中的值。这意味着生成正确的 id 取决于用户和用户客户端，以提供正确的数据。

### 了解TextPattern容量 { #understanding-textpattern-capacity }

设计TextPattern时要记住的最重要的事情是，
是容量-表示潜在值的总数a
TextPattern可以产生。

在当前的TextPattern实现中，主要有三个
决定容量的因素：

1.  TextPattern中生成的段的容量

2.  存在 CURRENT_DATE 段

3.  ORG_UNIT_CODE 段的存在

日期段（如 CURRENT_DATE）的存在将在每次段更改时有效地重置容量。根据日期格式，它可以在任何地方更改为每年到每天。 **重要提示：如果您的日期格式不包含年份，则该模式将每年解析为相同的值。** 这意味着已经使用了值。例如，如果您的 TextPattern 如下所示：

    CURRENT_DATE（ww）+“-” + RANDOM（＃）

此模式每周将为您提供最多 10 个唯一值，但 1 年后，CURRENT_DATE(ww) 将与去年相同，并且您将没有可用的新值。如果您改用“yyyy-ww”，它将每年、每周都是唯一的。

组织单位代码将使您的价值观在每个不同的领域都独一无二
组织单位，这意味着您是否具有以下文本模式：

    ORG_UNIT_CODE（）+“-” + RANDOM（＃）

此模式将为您提供10种不同的唯一值
组织单位。

#### 计算生成段的容量 { #calculating-capacity-for-generated-segments }

在设计 TextPattern 时，了解如何计算 TextPattern 的容量至关重要。就容量而言，生成的段将是任何 TextPattern 的主要组成部分，然后根据 ORG_UNIT_CODE 或 CURRENT_DATE 的存在而增加。

让我们从SEQUENTIAL段开始。格式中的每个“ \＃”代表
一个0到9之间的数字。要计算总容量，请乘以
每个“ \＃”的可能值的数量。由于总是10（0-9）
数学很简单：

    SEQUENTIAL（＃）= 10 = 10
    序列（###）= 10 * 10 * 10 = 1000
    SEQUENTIAL（#####）= 10 * 10 * 10 * 10 * 10 = 100000

由于服务器上的SEQUENTIAL计数器从1开始而不是0，因此实际
容量为999，但在大多数情况下并不重要。

一旦涉及到RANDOM，计算就会变得更多
复杂。与SEQUENTIAL类似，“ \＃”具有10个可能的值，
另外，我们有“ X”和“ x”，每个都有26个可能的值，以及
“ \ *”可以是前面的任何一个，表示62（10 + 26 + 26）
可能的值。

要计算容量，您需要将每个字符
格式化并替换为可能的值数，然后相乘
它们都像我们在SEQUENTIAL中所做的一样：

    RANDOM（＃）= 10 = 10
    随机（X）= 26 = 26
    RANDOM（*）= 62 = 62

    RANDOM（X ##）= 26 * 10 * 10 = 2600
    随机（XXxx）= 26 * 26 * 26 * 26 = 456976

    随机（***）= 62 * 62 * 62 = 238328

如您所见，数学运算有时会变得更加复杂，但是
按照此配方，您可以看到潜在值的数量。

### 随机细分以及为什么应避免使用 { #random-segments-and-why-you-should-avoid-it }

在TextPattern中使用随机段会产生隐藏的成本
长期运行，但这并不意味着您永远不要使用它。这个部分
将突出显示使用随机片段的问题，并建议何时
可能更适合使用它。

本节是由上一代的问题引起的
策略，您只有随机生成。过了一会儿，实例
使用此功能实际上将无法生成和保留新的
值，因为要花很长时间才能找到可用的值。这个
本节着眼于随机产生的一些问题
造成了这种情况。

#### 产生随机值 { #generating-random-values }

在TextPattern中使用RANDOM段之前，应考虑
与使用RANDOM有关的以下问题：

-   从带有 RANDOM 段的 TextPattern 生成值将比其他 TextPattern 更复杂

### 基于TextPattern的元数据的数据输入 { #data-entry-for-textpattern-based-metadata }

如前所述，当前唯一支持的元数据
TextPattern是跟踪的实体属性。在本节中，我们将
描述TextPattern数据输入的不同方式，特别是
用于跟踪的实体属性。

#### 使用TextPattern验证值 { #validation-of-values-using-textpattern }

默认情况下，使用以下命令将所有值发送到服务器以获取元数据
TextPattern，将被验证。如果需要，可以跳过验证，但是
在正常情况下，您应该始终验证输入。的
验证将基于您定义的TextPattern并将
尽可能严格：

-   日期段必须与段参数中指定的格式相同

-   纯文本段必须完全匹配

-   文本段值必须至少与格式字符串一样长。如果 "^" 和 "$" 都存在，则该值必须与确切的长度匹配。

-   生成的段值必须完全匹配格式，逐个字符。

使用服务器首先生成和保留值时，服务器
将在注入之前修改TextPattern中使用的值，
这意味着在
服务器。

对于TextPattern验证，最后一个例外是特殊情况：
如果在保留原始值之后更改了TextPattern
模式，根据新的，发送到服务器的值无效
如果已保留TextPattern，则仍将接受它。

#### TextPattern的不同数据输入流 { #different-data-entry-flows-for-textpattern }

客户端目前有2种方法可以存储TextPattern的值
元数据：

1.  生成和保留值（应用程序应为您完成此操作）

2.  存储自定义值

首选方式是生成并保留所需的值（
生成和保留的值数量由应用处理）。那
表示您每次查看和存储值时，
由服务器生成并保留，并且将是有效的。

在特定情况下，另一种方法可能会有用。用户将提供
值本身，只要提供的值对
TextPattern，他们可以放置任何想要的东西。注意事项
这样，您可能会使用别人保留的值
如果您有一个SEQUENTIAL细分，则不会更新计数器。

# DHIS2常见问题 { #dhis2-frequently-asked-questions }

**问：**我已经将数据输入到数据输入表单中，但是看不到
报表中的数据（数据透视表，图表，地图）。为什么数据是
输入的不是立即显示在DHIS2的图形中吗？

** A：**必须首先使用DHIS2处理输入到DHIS2中的数据。
“分析”。这意味着数据不会立即在
分析资源（例如报告，数据透视表，数据可视化工具，
GIS等）。如果调度处于活动状态，则
分析过程将在每天的午夜自动运行。后
自上次分析以来输入的新数据
进程运行了，将变得可见。

您可以通过选择手动触发分析过程
在主菜单中选择“报告”->“分析”，然后按“开始导出”
按钮。请注意，该过程可能需要大量时间
取决于数据库中的数据量。

其他可能影响数据可见性的因素包括：

-   数据批准：如果数据尚未被批准到与您的用户级别对应的级别，则您可能看不到数据。

-   元数据对象的共享：如果某些元数据对象尚未与您所属的用户组共享，则您可能看不到这些数据。

-   分析缓存：在许多情况下，服务器管理员会在服务器上缓存分析对象（例如数据透视表、地图、图表）。如果您输入了数据，重新运行分析，但仍然没有看到任何（更新的）数据，请确保您的数据没有被服务器缓存。

**问：**我已经从<https://www.dhis2.org/downloads>下载DHIS2
但是，当我尝试进入系统时，需要输入用户名和密码。
我应该使用哪个？

** A：**默认情况下，用户名将为“ admin”，密码为
“区”。用户名和密码区分大小写。

# 发布和升级说明 { #release-and-upgrade-notes }

有关最新的DHIS 2版本的最新信息，请参阅我们网站上的[DHIS 2下载]（https://www.dhis2.org/downloads）页面。
