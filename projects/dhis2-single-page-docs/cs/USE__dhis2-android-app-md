---
revision_date: '2024-05-27'
tags:
- Použití
template: single.html
---

# O této příručce { #about_this_guide_ } 

<!--DHIS2-SECTION-ID:about_this_guide_-->

Dokumentace DHIS 2 je společným úsilím a byla vyvinuta vývojovým týmem a uživateli. Zatímco se průvodce snaží být kompletní, mohou existovat určité funkce, které byly vynechány, nebo které je ještě třeba zdokumentovat. Tato část vysvětluje některé konvence, které se v celém dokumentu používají.

DHIS 2 je aplikace založená na prohlížeči. V mnoha případech byly pro lepší přehlednost zahrnuty snímky obrazovky. Zobrazí se zástupce různých funkcí, například **Datový prvek** \> **Skupina datových prvků**. Symbol „\>“ označuje, že byste měli kliknout na **Datový prvek** a poté kliknout na **Skupina datových prvků** v uživatelském rozhraní.

K zvýraznění důležitých částí textu nebo konkrétních typů textu, například zdrojového kódu, byly použity různé styly textu. Níže jsou vysvětleny všechny konvence použité v dokumentu.

> **Note**
>
> A note contains additional information which should be considered or a
> reference to more information which may be helpful.

> **Tip**
>
> A tip can be a useful piece of advice, such as how to perform a
> particular task more efficiently.

> **Important**
>
> Important information should not be ignored, and usually indicates
> something which is required by the application.

> **Caution**
>
> Information contained in these sections should be carefully
> considered, and if not heeded, could result in unexpected results in
> analysis, performance, or functionality.

> **Warning**
>
> Information contained in these sections, if not heeded, could result
> in permanent data loss or affect the overall usability of the system.

> **Complete**
>
> Information contained in these sections, will indicate that these 
> are issues that have been fully implemented.

> **Incomplete**
>
> Information contained in these sections, will indicate that these 
> are issues that are not implemented and will be ignored.

> **Not_applicable**
>
> Information contained in these sections, will indicate that these 
> are issues not applicable.

> **Work_in_progress**
>
> Information contained in these sections, will indicate that these 
> are issues or freatures not completely implemented or with unexpected
> behaviour already reported.

    Výpisy programů obvykle obsahují určitý typ počítačového kódu.
    Budou zobrazeny se stínovaným pozadím a jiným písmem.

`Příkazy budou zobrazeny tučně a budou představovat příkaz, který je třeba provést v operačním systému nebo v databázi.`

Odkazy na externí webové stránky nebo křížové odkazy budou zobrazeny modrým textem a podtrženy jako [zde](http://www.dhis2.org).

<!--
Bibliografické odkazy se zobrazí v hranatých závorkách, jako je tento
Store2007. Úplný odkaz je uveden v obsažené bibliografii
na konci tohoto dokumentu.
-->



# Úvod { #capture_app_introduction }

Tato příručka je navržena tak, aby vám pomohla při konfiguraci DHIS 2 pro použití s aplikací Android Capture.

Nejedná se o výukový nebo tréninkový manuál; je navržen tak, aby doplňoval základní dokumentaci a výukové materiály DHIS 2 se specifickým referenčním materiálem pro aplikaci Android.

Dokument je rozdělen na části, jejichž cílem je popsat všechny funkce, které byly v aplikaci implementovány, ty, které ještě nebyly implementovány, a ty, které nebudou podporovány. V příslušných případech bude poskytnuto vysvětlení problémů s použitím konkrétní funkce v aplikaci pro Android. Budou také uvedena doporučení nebo tipy pro lepší pochopení a použití aplikace.

Kromě toho má dokument sekce pro nové funkce přihlašování, vizuální konfigurace, správu synchronizace a seznam známých důležitých chyb.







# Doporučení pro mobilní nasazení DHIS 2 { #capture_app_recommendations }

Pokud plánujete nasadit aplikaci DHIS2 pro Android v terénu, důrazně vám doporučujeme přečíst si [Pokyny pro implementaci pro mobilní zařízení](https://docs.dhis2.org/master/en/dhis2_android_implementation_guideline/about-this-guide.html) které publikoval UiO. Zahrnuje kapitoly o technologických požadavcích, aspektech zabezpečení a konfigurace a testování a zavedení doporučení. Níže najdete stručně představené klíčové aspekty, doporučujeme přečíst si rozšířený dokument.

## Specifikace mobilních zařízení { #capture_app_recommendations_mobile_specs }

Aplikace DHIS2 pro Android je kompatibilní a podporovaná pro DHIS 2 verze 2.35 až 2.37. A nemá žádné zásadní změny s 2.30 až 2.34.

Vyžaduje zařízení se systémem Android v4.4 (nedoporučuje se, ale je podporováno do dubna 2022) nebo vyšším. Minimum doporučené pro nová zařízení: Android 7 nebo vyšší.

Ve [specifické části Pokynů pro implementaci mobilních zařízení](https://docs.dhis2.org/master/en/dhis2_android_implementation_guideline/mobile-device-specifications.html) naleznete doporučení pro akvizice nových mobilních zařízení pro nasazení Dhis2 Android.

## Testování a pilotování { #capture_app_recommendations_testing }

Pokud plánujete nasadit aplikaci DHIS 2 pro Android v terénu, měli byste nejprve provést celé kolo testování aplikace ve vaší vlastní konfiguraci.

Tato aplikace byla důkladně testována na demo serverech a během testování beta verze byla testována také na některých skutečných konfiguracích. Víme však, že každá konfigurace DHIS 2 je v mnoha směrech speciální a může způsobit nesrovnalosti, které nejsme schopni identifikovat.

Důrazně doporučujeme před pilotováním provést komplexní testování aplikace na vašem vlastním serveru.



# Přispějte do aplikace { #capture_app_contribute }

## Jak nahlásit chybu { #capture_app_contribute_report }


First of all, please check the [List of already reported bugs in JIRA](https://dhis2.atlassian.net/issues/?filter=10252)

Seznam se vždy aktualizuje, když přidáváte nové chyby a pracujeme na nich. Potřebujete aktivní, bezplatný účet DHIS 2 Jira.

Při hlášení chyby uveďte spolu s popisem:

- Verze DHIS 2 a revize sestavení
- Verze aplikace pro Android DHIS 2
- Verze Android OS
- Zařízení (pokud je to možné)
- Protokol chyb (pokud je to možné)

## Jak navrhovat ikony do knihovny { #capture_app_contribute_icons }


DHIS 2 a nová aplikace pro Android DHIS 2 vám umožňují vybrat ikony pro programy, datové sady a možnosti sady voleb. DHIS 2 2.30 obsahuje 125 ikon. Plánujeme rozšířit kolekci ikon u každé budoucí verze DHIS 2, protože potřebujeme vaši pomoc: hledáme nápady pro nové ikony - ty prosím odešlete pomocí [tohoto formuláře](https://forms.gle/FkUmwfZGYAScd2326) .

## Jak přidat překlady { #capture_app_contribute_translations }


Kroky, jak přispět k překladu aplikace, jsou:

1. Vytvořte si účet v [Transifex](https://www.transifex.com/signin/?next=/hisp-uio/)
2. Připojte se ke stávající organizaci
3. Vyhledejte HISP UiO a vyberte organizaci, nikoli projekty
4. Vyberte ANDROID: Capture project
5. Připojte se k týmu pro vybraný jazyk

Pokud to nefunguje dobře nebo pokud potřebujete přidat nový jazyk, dejte nám prosím vědět, a to zasláním zprávy v komunitě uživateli dhis2-android.


# Vizuální konfigurace { #capture_app_visual }

##  Local Analytics (Improved 3.0) { #local-analytics-improved-30 } 

### Data Visualizations { #capture_app_visual_data_visualizations }

Aplikace DHIS2 pro Android nyní dokáže vykreslovat analýzy, které byly vytvořeny v aplikaci Data Visualizer v DHIS2. Analýzy, které mají být zobrazeny, musí být nakonfigurovány pomocí webové aplikace Nastavení Android, kde budou moci administrátoři rozhodnout, jaké grafy a tabulky se zobrazí koncovým uživatelům.

Chcete-li nakonfigurovat analýzu, otevřete webovou aplikaci Nastavení Android na svém serveru DHIS2 a postupujte podle následujících kroků:

   1. V nabídce Analytika vyberte možnost Domovská strana, Program nebo Datová sada.
   2. Select the visualization type "Data visualization"
   3. Click on the  "Add Visualization" button
   4. Vyhledejte zadáním názvu vizualizace a vyberte ji kliknutím
   5. Přidejte alternativní název, jinak aplikace zobrazí název vizualizace

![](resources/images/capture-app-image162.png){ width=25%}
![](resources/images/capture-app-image164.png){ width=25%}

Analytics are created and configured using the web tools, however, the data aggregation happens offline using only data stored in the device.  

![](resources/images/capture-app-image165.png){ width=25%}
![](resources/images/capture-app-image166.png){ width=25%}
![](resources/images/capture-app-image167.png){ width=25%}

#### Analytics Types and Filters { #analytics-types-and-filters } 

Analýzy podporované v aplikaci pro Android jsou:

   - Kontingenční tabulky
   - Sloupcový graf
   - Spojnicový graf
   - Výsečový graf
   - Radarová mapa
   - Jedna hodnota

Pro každý objekt vizualizace bude uživatel moci v aplikaci filtrovat podle:

   * Relative Period: Daily, Weekly, Monthly, Yearly, This Quarter, Last Quarter, Last 4 Quarters and Quarter this year.
   * Organizační jednotka: Vyberte „Vše“ pro zobrazení všech organizačních jednotek dostupných uživateli nebo „Výběr“ pro určení jedné nebo více organizačních jednotek.

![](resources/images/capture-app-image180.png){ width=25%}
![](resources/images/capture-app-image168.png){ width=25%}
![](resources/images/capture-app-image169.png){ width=25%}

Pokud je použit filtr, zobrazí se tlačítko reset. Vyberte Reset pro zobrazení výchozí vizualizace.

![](resources/images/capture-app-image170.png){ width=25%}

Uživatelé mohou také změnit typ analýzy mezi grafem, tabulkou nebo jednou hodnotou.

![](resources/images/capture-app-image166.png){ width=25%}
![](resources/images/capture-app-image171.png){ width=25%}

#### Legends { #capture_app_visual_data_visualizations_legends }

Legendy se zobrazují v kontingenčních tabulkách povolením funkce „Použít legendy pro barvu grafu“ v aplikaci Data Visualizer.

Aplikace pro Android obarví buňky buď pomocí předem definované legendy pro datovou položku, nebo pomocí jedné legendy pro celou kontingenční tabulku, v závislosti na nastavení na webu.

The style for legends in tables has a new design which ensures good contrast and visibility independently from the selected colour for the legend.

![](resources/images/capture-app-image183.png){ width=25%}

#### Groups { #capture_app_visual_data_visualizations_groups }

Všechny tyto vizualizace lze organizovat a zobrazovat ve skupinách. Skupiny se také konfigurují pomocí webové aplikace Nastavení Android podle následujících kroků:

   1. Otevřete aplikaci Nastavení Android
   2. Kliknutím přidáte novou vizualizaci v nabídce Analytics (domovská stránka, program nebo soubor dat)
   3. Vyberte vizualizaci
   4. Zaškrtněte políčko „Použít skupinovou vizualizaci“.
   5. Vytvořte nebo vyberte vytvořenou skupinu
   6. Uložte vizualizaci

Své různé skupiny můžete pojmenovat, zobrazí se jako tlačítko v horní liště obrazovky analýzy.

![](resources/images/capture-app-image173.png){ width=25%}

#### Limitations { #capture_app_visual_data_visualizations_limitations }

Android používá tabulky a grafy vytvořené pomocí webové aplikace Visualizer, nicméně aplikace Android používá pouze konfigurační parametry objektu: datové prvky, indikátory, typ grafu, nadpis, období...; všechny agregace jsou počítány offline aplikací pro Android. Výsledky budou založeny na datech uložených v zařízení přesně v daný okamžik.

Vzhledem k tomu, že zobrazené agregace a výpočty jsou počítány v zařízení, je implementace analytiky ve srovnání s webem omezená. V souhrnu jsou kompatibilní a podporované objekty a funkce:

   - Dobře tvarované analytické objekty (řady, kategorie, filtry)
   - Use of relative periods (Fix periods are not supported)
   - Uživatel má přístup k prohlížení
   - Omezení pro kontingenční tabulky
      - Number of header lines: 1 or 2 (from 2.3)
      - Počet sloupců záhlaví: 2
   - Omezení pro grafy
      - Počet sérií: Bez omezení (ale nezapomeňte, že vykreslujete na malé obrazovce)
      - Počet kategorií (neplatí pro koláčový graf): Bez omezení

Na Android Analytics se vztahuje mnohem více omezení týkajících se mnoha možností konfigurace dostupných ve Web Visualizer a také podporovaných funkcí a výpočtů souvisejících s indikátory a indikátory programu. [Tato tabulka](https://docs.google.com/spreadsheets/d/1127cz7M0K4fux5CU0V54V2Z77NZWCr0BTrZ6jcCec4Q) shrnuje všechny podporované funkce.

> **Note**
>
> The following aggreagation functions are supported now in local analytics: LAST, FIRST, AVERAGE_SUM_ORG_UNIT, LAST_AVERAGE_ORG_UNIT, LAST_IN_PERIOD, LAST_IN_PERIOD_AVERAGE_ORG_UNIT, FIRST_AVERAGE_ORG_UNIT
> 
> 

### Event Visualizations (New 3.0) { #capture_app_visual_event_visualizations }

The DHIS2 Android App can now render analytics that have been created in the line listing app.Analytics to be displayed require to be configured using the Android Settings WebApp where administrators will be able to decide the tables to be displayed for end users.

Chcete-li nakonfigurovat analýzu, otevřete webovou aplikaci Nastavení Android na svém serveru DHIS2 a postupujte podle následujících kroků:

   1. Select Home or Program from the Analytics menu
   2. Select the visualization type "Event visualization"
   3. Click on the  "Add Visualization" button
   4. Vyhledejte zadáním názvu vizualizace a vyberte ji kliknutím
   5. Add an alternative title, otherwise, the app will display the name of the visualization 

In the app, the users will be able to search by period, Org. unit, or any of the columns added in the Line List.

![](resources/images/capture-app-image265.png){ width=25%}
![](resources/images/capture-app-image266.png){ width=25%}
![](resources/images/capture-app-image267.png){ width=25%}

#### Limitations { #capture_app_visual_event_visualizations_limitations }

To add an event visualization in the Android Settings WebApp, the table must:

- be created in the Line Listing app
- use relative periods
- not exceed 15 columns

## Interface language { #interface-language } 

The language of the interface will corespond to the language set in the DHIS2 user configuration. If the language is not available in the app, it will pick the language of the device. 

Pokud není k dispozici žádná z jazykových konfigurací, aplikace se nastaví na angličtinu.

Překlady nastavené v DHIS2 pro metadata se také zobrazí podle jazyka v uživatelské konfiguraci.

![](resources/images/capture-app-image182.png){ width=25%}


## Přizpůsobte si svou ikonu { #capture_app_visual_icon }

Svou ikonu na pozadí můžete nastavit pomocí widgetu aplikace DHIS 2. Ikona bude příznak nakonfigurovaný na vašem serveru.

![](resources/images/capture-app-image32.jpg){ width=25%}

> **Poznámka**
>
> Jak přidat widget:
>
> - Dlouhé stisknutí plochy
> - Vyberte Widgety
> - Vyhledejte widget DHIS 2
> - Vyberte
>
> Přidá zástupce do vaší aplikace.

## Přizpůsobte si barvu aplikace { #capture_app_visual_colour }

Obecné téma aplikace můžete nastavit její konfigurací na našem serveru:

![](resources/images/capture-app-image28.png){width=80% }

> **Note**
>
> How to set the server theme and flag:
>
> Go to **System Settings > Appearance > Style**
>
> - Select your style
>   - Green,
>   - India (Orange),
>   - Light Blue,
>   - Myanmar (red),
>   - Vietnam
> - Select your flag
>
>![](resources/images/capture-app-image23.png){ width=25%}

## Icon library for metadata (Improved 3.0) { #capture_app_visual_icon_lib }

There are currently 134 icons available that you can choose from. You can search by name in the icon picker widget. Icons are available in positive, negative and outlined shapes.

Ikony lze přiřadit k programům, fázím, datovým prvkům a možnostem sady voleb. To lze konfigurovat pomocí aplikace Údržba.

> **Poznámka**
>
> Tato funkce je k dispozici od verze DHIS 2 2.30

![](resources/images/capture-app-image13.png){ .center width=80% }

V aplikaci DHIS2 pro Android se ikony vykreslují na domovské obrazovce, aby ilustrovaly všechny programy dostupné uživateli nebo při přidávání scény. U datových prvků a voleb se ikony vykreslují pro programy jedné události, když sekce obsahuje jedno nebo více DE, zobrazující sadu voleb jako matici nebo sekvenci obrázků.

Ikonový záznam dat lze nyní použít v registračních formulářích. Když sekce registrace obsahuje jeden nebo více atributů sledované entity se sadami možností a přiřazenými ikonami, aplikace je dokáže zobrazit jako matici nebo sekvenci na základě typu vykreslování sekce. V předchozích částech aplikace byla tato funkce dostupná pouze pro datové prvky.

![](resources/images/capture-app-image19.png){ width=25%}
![](resources/images/capture-app-image26.png){ width=25%}

From 3.0 it is possible to display custom icons in the Android App. DHIS2 (41 version) now allows uploading custom Icons to be used in addition to the built-in Icon library. This is useful for use cases not related to health or that require very specific iconography. The Android App will render the custom icons that need to be uploaded and configured using the Maintenance DHIS2 Web App.

To upload and assign the custome icons through the instance, the admin must:

1. Open the object (program, data element, option, etc.)
2. Click on the "Select icon"
3. Click on the "Choose file to upload"
4. Add a key and description
5. Uložit

![](resources/images/capture-app-image290.png){ width=25%}

> **Poznámka**
>
> Ikony se zpočátku vykreslí pouze v nové aplikaci pro Android. Nová webová aplikace Capture je začlení v blízké budoucnosti.

Plánujeme rozšířit sbírku ikon na každé budoucí verzi DHIS2, k čemuž potřebujeme vaši pomoc: hledáme nápady na nové ikony – odešlete prosím své pomocí [tohoto formuláře](https://www.google.com/url?q=https://drive.google.com/open?id%3D1LmfYJQAu3KyDfkY3X6ne7qSsuTa9jXZhoQHzkDxeCdg&sa=D&ust=1557433016147000).

## Barevná paleta pro metadata { #capture_app_visual_colour_palette }


Sledování a zachycování událostí nyní mají schopnost vykreslovat barvy pro programy, fáze, datové prvky a možnosti v sadách možností. V aplikaci Údržba je integrován výběr barev, který se zobrazuje jako paleta, s výjimkou možností, které umožňují výběr jakékoli barvy.

![](resources/images/capture-app-image20.png){ .center width=80% }

V aplikaci pro Android bude barva vykreslena jako barva pozadí pro programy a fáze kombinovaná s ikonou (pokud je vybrána). U možností se vykresluje jako barva pozadí během zadávání dat pro jednotlivé programy událostí. Když uživatel vybere program s přiřazenou barvou, stane se tato barva motivem pozadí pro všechny obrazovky v doméně programu.

![](resources/images/capture-app-image19.png){ width=25%}
![](resources/images/capture-app-image2.jpg){ width=25%}

> **Poznámka**
>
> Barvy budou nejprve k dispozici v nové aplikaci pro Android a poté v budoucích verzích nové webové aplikace Capture.

## Typy vykreslování pro sekce programu { #capture_app_visual_rendering_type }


![](resources/images/capture-app-image16.png){width=80% }

**Sekce programu**: při použití v kombinaci s ikonami může sekce programu s jedním nebo více datovými prvky a souvisejícími sadami možností vykreslit možnosti v sekvenčním nebo maticovém uspořádání (viz snímky obrazovky). Pokud ikona není nalezena, aplikace zobrazí logo DHIS.

![](resources/images/capture-app-image26.png){ width=25%}
![](resources/images/capture-app-image36.png){ width=25%}

From 2.8, the app will render option set with any value type as matrix or sequential layout.

![](resources/images/capture-app-image226.png){ width=25%}
![](resources/images/capture-app-image227.png){ width=25%}

> **Poznámka**
>
> Typ vykreslení pro sekce bude nejprve k dispozici v aplikaci pro Android a v budoucích verzích bude následovat nové webové uživatelské rozhraní aplikace Capture.

## Kalendář { #capture_app_visual_calendar }


Nyní je možné použít dva různé kalendáře. Ten vlevo se zobrazí jako první, ale můžete jej změnit kliknutím na ikonu kalendáře v levém dolním rohu.

Toto je k dispozici, když:

1. Provádění nového zápisu.
2. Vytvoření nové události (programy s registrací a bez registrace).
3. Používání periodických filtrů v souborech dat a programech s registrací i bez registrace.

![](resources/images/capture-app-image60.jpg){ width=25%}
![](resources/images/capture-app-image61.jpg){ width=25%}

> **Poznámka**
>
> U verzí Android 4.4, 5.1 a malých zařízení není možnost Přijmout ve druhém zobrazení kalendáře viditelná.

## Typy vykreslení { #capture_app_visual_render }

The available rendering options have been expanded to include horizontal and vertical radio buttons, checkboxes and toggles for any value type.

![](resources/images/capture-app-image111.png){ width=100%}
![](resources/images/capture-app-image224.png){ width=25%}
![](resources/images/capture-app-image225.png){ width=25%}

> **Note** 
>
> The default rendering option will automatically display a search box whenever there are more than 15 elements in the option set to ease the selection.
> 
> ![](resources/images/options_no_search.png){ width=25% } ![](resources/images/options_search.png){ width=60% }

Render types are available in event and registration forms

### QR a čárové kódy { #capture_app_visual_render_qr }


Datové prvky nebo text typu atributů lze také nakonfigurovat jako QR nebo čárové kódy. Když je datový prvek nebo atribut vykreslen jako QR/čárový kód, aplikace otevře kameru zařízení a přečte obrázek kódu. Když je QR/čárový kód atributem TEI nakonfigurovaným jako prohledávatelný, bude uživateli umožněno naskenovat kód, aby mohl vyhledat a identifikovat instanci sledované entity. To bude fungovat také pro sady možností.

Čárové kódy také umožňují uživateli ručně zadat hodnotu.

![](resources/images/capture-app-image118.png){ width=20%}
![](resources/images/capture-app-image119.png){ width=20%}
![](resources/images/capture-app-image120.png){ width=20%}
![](resources/images/capture-app-image121.png){ width=20%}


#### Export/Share { #exportshare } 

Uživatelé nyní mohou na obrázku zobrazit čárový nebo QR kód, aby jej bylo možné sdílet pro tisk, pořídit snímek obrazovky nebo jej zobrazit na obrazovce pro skenování.

Non-editable fields can still share the bar or QR code, but will prevent the user from capturing a new one.

![](resources/images/capture-app-image181.png){ width=20%}
![](resources/images/capture-app-image174.png){ width=20%}

#### GS1 Data Matrix codes { #capture_app_visual_gs1 }

If an attribute or data element rendering type is configured as QR code, the Android App will be able to read and process the string as GS1 Data Matrix codes.

Combined with the use of d2 functions in program rules, the different fields of a GS1 code can be saved into different data elements or attributes (d2:extractDataMatrixValue(key, dataMatrixText)).

![](resources/images/capture-app-image184.png){ width=20%}
![](resources/images/capture-app-image200.png){ width=20%}

### Signature (Improved 3.0) { #capture_app_visual_signature }

This feature allows users to collect handwritten signatures from the device. The signatures will be saved as an image data element in the app.

This configuration must be done in web ( available from 2.40 version) by selecting the "canvas" rendering type on an image value type.

![](resources/images/capture-app-image231.png){ width=20%}
![](resources/images/capture-app-image232.png){ width=20%}

From 3.0, signatures are allowed to be opened in full screen for better visibility.

## User Experience { #capture_app_visual_user_experience }

### Tappable areas in icons and buttons { #capture_app_visual_tappable_areas }

Some buttons or tappable labels of the Android App had small sensitive areas for the user to tap. The whole user interface was reviewed and the tappable areas has been increased. For example the "+" button to create a new stage or the "˅" icon to open TEI details or expand a section.

![](resources/images/capture-app-image208.png){ width=20%}

### Loading Banners { #capture_app_visual_loading_banners}

The Android App provides visual animations to users when they perform actions that take longer than usual to complete, such loading maps or searching, so that they know that the system is processing their request.

![](resources/images/capture-app-image228.png){ width=20%}

### Offline Buttons { #capture_app_visual_offline_buttons}

This feature enhances the functionality of the app when it is used offline, ensuring that menus are disabled when the online actions are not available.

### Long Texts Management { #capture_app_visual_longtext_management}

The Android App enables users to view long text in fields that are limited in size, such as a stage names or datasets headers.

### Legends (Improved 3.0) { #capture_app_visual_legends_descriptions}

The Android App displays the full description of the legend when tapping on the information icon once a legend is active. These feature is available only in event and registration forms.

![](resources/images/capture-app-image276.png){ width=25%}
![](resources/images/capture-app-image277.png){ width=25%}

### Input fields (Improved 3.0) { #capture_app_visual_input_fields }

The new input fields are now displayed by default in the Android app and admin users are able to opt-out to use the old forms through the Android Settings web app.

![](resources/images/capture-app-image289.png){ width=25%}


# Nastavení { #capture_app_settings }

![Settings window](resources/images/capture-app-image17.png){  width=25%}

Sync data
:   User is able to choose from a drop-down list if the data entered in the app is uploaded to the server manually or scheduled every 15 min, 1 hour or 1 Day. By default the app will sync every 24h. This kind of Syncing includes new and updated events and TEI’s.

Sync configuration (also known as sync metadata)
:   User is able to choose from a drop-down list  if the data entered in the app is uploaded to the server manually or scheduled every day or week. By default the app will sync every 24h.  This sync will update changes in programs or configurations in web.

Sync parameters
:   These parameters allow the user to specify the maximum number of TEI’s and events that can be stored in the local device. The user can also specify if limits apply per organisation unit or in total. Values can be set to default by clicking on “Reset to default”.

> **Note** 
>
> Sync data, Sync configuration and Sync parameters can be overwritten using the Android Settings Web App as described [in the specific section][#capture_app_andoid_settings_webapp_synchronization]
>
>

Reserved values
:   This will specify the number of reserved Id's available in your device and will allow you to refill them.

Open sync errors log
:   The sync error log gives details about the error and is prepared to be shared with admins.

Export database (New 3.0)
:   Users are now be able to export the local database and share it with an admin, who will be able to import it for troubleshooting, being able to replicate the exact environment (database, device, configuration). The exported database is encrypted and the administrator will require the user credentials to be able to access the database

![](resources/images/capture-app-image260.png){ width=25%}

The import button can be found by tapping on the tree dots menu at the login screen.

![](resources/images/capture-app-image261.png){ width=25%}

Delete local data
:   This action will delete local data without having to log out.

> **Warning** 
>
> Using this functionality might lead to data loss if changes have not been previously synced to the server.
>
>

Reset app data & configuration
:   This action will log out the user and delete all data and metadata, this means user and server information is also deleted. It is similar to resetting the App.

> **Warning** 
>
> Using this functionality might lead to data loss if changes have not been previously synced to the server.
>
>

SMS Settings
:   This sections allows to check or edit the parameters related to the sms gateway.

Software Update
:   This feature enables implementation administrators to manage and control the version of the Android app from the DHIS2 user web interface, making it easier to manage app updates and ensure compatibility with the DHIS2 system. Managers will be able to upload the desired version and users will get a prompt message to update when they are not in the last updated version. The management of versions is made through a new Web App.

![](resources/images/capture-app-image229.png){ width=25%}


# Obecné funkce { #capture_app_generic }

## Přihlášení { #capture_app_generic_login }

Existují dva způsoby přístupu k aplikaci:

1. Ručně: Uživatel musí zadat odpovídající adresu URL serveru, který má být použit, a zadat uživatelské jméno a heslo.

    > **Note**
    >
    > Take note that login is only possible with servers from version 2.29.

2. QR: Uživatel může místo zadávání adresy URL použít QR kód, ale uživatelské jméno a heslo je nutné zadat ručně.

![](resources/images/capture-app-image63.png){ width=25%}

> **Note**
>
> 1. After a succesful login the DHIS2 Android App will keep these values cached (URL and username) and will suggest them for future connections without having to type them.
>

After a succesful login the user should be able to perform an *offline* login only (only avaialble for the last combination of URL/Username). Offline usage gives the possiblity of using the application withou any type of connectivity. All data will still be stored and user can perform a synchornization once the connection is restablished or avaialble.


> **Warning**
> 
> In DHIS2 versions up to 2.30 if a user attemps an on-line login and their account has been disabled as explained in the [DHIS 2 Manual - Disable User](https://docs.dhis2.org/master/en/user/html/dhis2_user_manual_en_full.html#disable_user) all the data will be wiped from the phone. Make sure that before disabling a user all the data has been synced or that you are using this feature to remotely wipe sensitive data in case of a device getting lost.
>
> Due to a change in the login API this feature is not available in 2.31, 2.32, 2.33, 2.34, 2.35 and 2.36.

## Offline Multi-user { #capture_app_generic_multiuser}

The Android app have removed the limitation on the number of offline accounts that users can create, allowing them to work with as many offline accounts as needed.

The users will need to have access to the internet for the first login of each account and will be able to switch accounts after without requiring access to the Internet.

![](resources/images/capture-app-image185.png){ width=25%}
![](resources/images/capture-app-image186.png){ width=25%}

The users will be able to manage the user accounts and delete accounts if needed.

![](resources/images/capture-app-image187.png){ width=25%}
![](resources/images/capture-app-image188.png){ width=25%}
![](resources/images/capture-app-image189.png){ width=25%}
![](resources/images/capture-app-image190.png){ width=25%}

## Obnova účtu { #capture_app_generic_recovery }

Uživatelé budou moci obnovit své vlastní heslo, pokud mají povolené nastavení: Povoleno Obnovení uživatelského účtu.

![](resources/images/capture-app-image64.png){ width=25%}

## Blokování relace (PIN) { #capture_app_generic_PIN }

User is able to lock the session using a 4 digit PIN. This allows to move to other apps in your phone without deleting the local data.
If the user forgets the PIN number, log in by entering the credentials is also available.

![](resources/images/capture-app-image65.png){width=25%}

## Otisk prstu { #capture_app_generic_fingerprint }

Pokud je funkce v zařízení aktivována, může uživatel používat snímač otisků prstů.

* Když je povolen snímač otisků prstů, a ne PIN, pokaždé, když se aplikace zavře, přejde na pozadí nebo je zařízení blokováno, relace bude uzamčena. Jakmile je aplikace znovu otevřena, uživatel musí klepnutím na ikonu otisku prstu aktivovat snímač.
* Pokud je nastaven PIN a otisk prstu, bude při uzamčení relace a opětovném otevření aplikace uživatelem PIN vyzván.

![](resources/images/capture-app-image104.jpg){width=25%}
![](resources/images/capture-app-image105.jpg){width=25%}

## Pokyny / informační tlačítka { #capture_app_generic_instructions }

A contextual guide is available in TEI dashboard screen.

![](resources/images/capture-app-image66.png){width=25%}

> **Tip**
>
> Uživatel je schopen znovu otevřít pokyny <!-- PALD: unnecessary: (trigger)--> kliknutím na tři tečky v pravém horním rohu obrazovky.

## Filtr { #capture_app_generic_filter }

Na všech obrazovkách výpisů (úvodní strana, výpis událostí, hledání tei a dataSets) lze použít filtr, který zužuje zobrazovaná data. Dostupné filtry jsou: období, org. jednotka, stav synchronizace, stav události, kombinace možností kategorie a „přiřazeno mně“.

![](resources/images/capture-app-image19.png){ width=25%}
![](resources/images/capture-app-image123.png){ width=50%}
![](resources/images/capture-app-image134.png){ width=25%}

Filtry se přizpůsobí různým programům a souborům dat.

1. Program bez registrace: Datum, Org. jednotka, stav synchronizace, stav události a kombinace kategorií.
2. Program s registrací: Datum akce, Datum přihlášení, Org. Unit, Sync, Enrollment Status, Event Status a Assigned to me. Ikona filtru se zobrazí pouze v případě, že je k dispozici seznam událostí (funkce zobrazení seznamu na úvodní stránce nebo vyhledávání)
3. Datové Sady: období, Org. jednotka a Stav synchronizace.

### Přiřazeno ke mně { #capture_app_generic_filter_assigned }

Je možné filtrovat události na základě jejich přiřazení aktuálnímu uživateli. Filtr „Přiřazeno mně“ byl přidán do seznamu jednotlivých událostí, seznamu TEI a ovládacího panelu TEI a zobrazení mapy. Zobrazí se pouze v případě, že je aktivní program nakonfigurován pro přiřazování událostí uživatelům.

### Datum události / datum / období { #capture_app_generic_filter_date }

Filtrujte události, TEI (na základě jejich událostí) a datové sady, jsou k dispozici následující časové úseky:
- Dnes
- Tento týden
- Tento měsíc
- Včera
- Minulý týden
- Minulý měsíc
- Zítra
- Příští týden
- Příští měsíc
- Od-do
- Jiný (otevře výběr data)
- Kdykoli

### Org. Jednotka { #capture_app_generic_filter_orgunit }

Umožňuje uživateli zadat vyhledávání nebo vybrat organizační jednotku ze stromu. Filtr nebude viditelný, pokud má uživatel nakonfigurovanou pouze jednu organizační jednotku.

### Synchronizace { #capture_app_generic_filter_sync }

Filtrovat podle
- Synchronizované (události, TEI, datové sady)
- Nesynchronizováno
- Chyba synchronizace
- SMS synchronizováno

### Stav události { #capture_app_generic_filter_event }

Filtrovat Události podle:
- Otevřít
- Plánování
- Po vypršení termínu
- Dokončeno
- Přeskočeno

Je povolen výběr více stavů. Jakmile otevřete TEI, filtr se zachová na ovládacím panelu a zobrazí pouze události se zvoleným stavem.

Zobrazené události jsou staré až 5 let.

### Datum registrace { #capture_app_generic_filter_date_enroll }

„Datum zápisu“ se použije k datu zápisu TEI do programu. Pokud existuje více než jedno datum zápisu, mělo by seřadit výsledky podle nejnovějšího. Je-li k dispozici, zobrazí se štítek tohoto filtru.

### Stav zápisu { #capture_app_generic_filter_enroll_status }

The filter 'Enrollment status' offers three options: Active, Completed, Cancelled. Only one option can be selected at time. If you filter by "completed" and the TEI has more than one enrollment, the app will open the "active"  enrollment. To see the completed one, select the three dot menu at the top right corner of the dashboard and select "program enrollments".

### Follow-Up { #follow-up } 

Filtr 'Follow Up' umožňuje uživateli odfiltrovat TEI, které byly označeny jako 'Follow-up'. TEI mohou být označeny k sledování v TEI Ovládacím panelu.

### Filtrování přidáno do ovládacího panelu TEI: { #capture_app_generic_filter_tei }

Na ovládací panel TEI byly přidány filtry. Je možné filtrovat události registrace instance trasované entity podle období, organizační jednotky, stavu synchronizace, stavu události a přiřazení uživatele.

![](resources/images/capture-app-image114.png){ width=25%}

## Řazení { #capture_app_generic_sorting }

Třídění bylo integrováno do nabídky filtrů.

Tlačítko řazení bude na pruzích filtrů s následujícím chováním:
- Najednou platí pouze jedno třídění. Pokud uživatel klikne na jiné, předchozí je deaktivováno.
- The icon for applied sorting shows it is active, the others are inactive.  
- Opakovaná kliknutí mění směr řazení na opačné.

![](resources/images/capture-app-image135.png){ width=25%}

### Data (období, datum, datum události nebo datum registrace) { #capture_app_generic_sorting_dates }

- Datum události předchází datu vypršení, datum vypršení použijte pouze v případě, že neexistuje datum události.
- Řazení od nejnovějšího ke staršímu. Budoucí události (s vypršením) jsou na prvním místě.

### Org. Jednotka { #capture_app_generic_sorting_orgunits }

- Seznam bude řazen v abecedním pořadí podle názvu organizační jednotky.

### Stav zápisu { #capture_app_generic_sorting_enrollment }
- Seznam bude seřazen v abecedním pořadí podle názvu stavu.

![](resources/images/capture-app-image123.png){ width=100%}

## Synchronizovat informace { #capture_app_generic_sync_info }

### Login Sync {#capture_app_generic_login_sync}

During the metadata download, the app will remain in the splash screen and will open the home screen once the metadata is in the device.

In the home screen, the app will inform with a loading spinner on each program when the data is downloading. After the sync process finishes, the app will display one of the two possible icons:

* A green checkmark if the program downloads data successfully and without errors (the icon will disappear after three seconds)  or,
* A gray arrow if there is an error during the sync process and the total or partial data isn't donwloaded

The user will be able to see how many programs are downloading data, or completed, making the waiting process more transparent and informative about its progress.

![](resources/images/capture-app-image207.png){ width=20%}

**NOTE:** All programs and data sets will be blocked until the sync process is fully finished.

### Subsequent logins {#capture_app_generic_subsequent_login}

The application will launch a sync process for data and metadata only for the first time the user logs in. In order to facilitate the work in the most difficult cases, the sync process have been removed for the subsequent logins. This means that when the user opens the app, it will open without performing a full sync even if the user logs out of the account.

If the user deletes the account, then the next login will launch the sync process.

Also, users have the option to sync with the server through the Refresh button any time they wish.

### Sync Status {#capture_app_generic_sync_status}

Vedle každého programu nebo souboru dat se zobrazí ikona, která uživateli umožňuje zkontrolovat informace o synchronizaci. U synchronizovaných záznamů se nezobrazí žádná ikona. Podle stavu se zobrazují ikony nesynchronizované (šedé šipky), chyba (červené šipky), varování (oranžová) nebo SMS (modrá včetně slova SMS uvnitř).

![](resources/images/capture-app-image67.png){ width=20%}
![](resources/images/capture-app-image69.png){ width=20%}
![](resources/images/capture-app-sync-status.png){ width=20%}

### Granulární synchronizace { #capture_app_generic_sync_granular }

Uživatelé mohou kliknout na šedé šipky (což znamená záznam(y) uložené online v zařízení) a provést synchronizaci. Tyto možnosti jsou dostupné na nejvyšší úrovni (programy/dataset) nebo jednotlivě (TEI, události, datové hodnoty).

![](resources/images/capture-app-image89.png){ width=25%}
![](resources/images/capture-app-image161.png){ width=25%}


### SMS Sync { #capture_app_generic_sync_sms }

When there is no Internet conection (either via WiFi or Mobile Data) but there is still mobile conectivity, users can synchronize via SMS if the gateway has been previously established in the app and properly configured at server level. 

If the app has been downloaded from Google Play users will have to send manually the SMS from their default SMS app (their default SMS application will open with the message composed). Users should send the message without modifying it and then switch back to the DHIS2 app to confirm that the message was sent.

![](resources/images/capture-app-sms-sync.png){ width=25%}
![](resources/images/capture-app-sms-sync-default-app.png){ width=25%}
![](resources/images/capture-app-sms-sync-confirm.png){ width=25%}

However, if the app has been downloaded from Github (or the training version is being used) the App will just ask for a confirmation to send one or several messages (SMS) and will send them in the background (without opening the default SMS application).

![](resources/images/capture-app-sms-sync-training.png){ width=25%}
![](resources/images/capture-app-sms-sync-confirm-training.png){ width=25%}
![](resources/images/capture-app-sms-synced-training.png){ width=25%}

> **Tip**
>
>  Edit parameters related to SMS gateway in the SMS Settings (Settings Menu) or set this globally via the [#capture_app_android_settings_webapp_general](Android Settings Web App)

![](resources/images/capture-app-image90.png){ width=25%}

> **Note**
>
>  Note that in order to user the SMS sync capabilities the SMS services needs to be enabled in the server side as described in the [https://docs.dhis2.org/master/en/dhis2_user_manual_en/mobile.html#sms-service](oficial documentation). You can also find more information on how to use different gateways in the [https://docs.dhis2.org/master/en/dhis2_android_implementation_guideline/about-this-guide.html](Android Implementation Guidelines)

### Chyba synchronizace metadat { #capture_app_visual_sync_error }

V případě chyb během procesu synchronizace se v nabídce nastavení zobrazí zpráva (část „Synchronizovat data“ nebo „Konfigurace synchronizace“). Vedle programu na domovské obrazovce se také zobrazí červená ikona synchronizace. Protokol chyb synchronizace poskytuje podrobnosti o chybě a je připraven ke sdílení s administrátory.

![](resources/images/capture-app-image43.jpg){ width=25%}
![](resources/images/capture-app-image11.png){ width=25%}

Protokol chyb synchronizace můžete také otevřít z **Nastavení**:

![](resources/images/capture-app-image15.jpg){ width=25%}

## Refresh data { #capture_app_generic_refresh_data }

Users can now retrieve the latest data from the server before entering new data. A refresh button is now located to trigger a granular synchronization in the following screens:

* Domácí strana
* Hledání
* Ovládací panel TEI
* Seznam programu akce
* Podrobnosti o události
* Výpis datové sady
* Podrobnosti datové sady

![](resources/images/capture-app-image19.png){ width=25%}
![](resources/images/capture-app-image191.png){ width=25%}
![](resources/images/capture-app-image192.png){ width=25%}
![](resources/images/capture-app-image193.png){ width=25%}

## Org. jednotka { #capture_app_generic_orgunit }

![](resources/images/capture-app-image30.png){ width=25%}

The whole organisation unit tree is displayed. Organisation units not available for data entry will be colored in grey.
User must check the box to select the org unit wanted. After an organisation unit is selected, the parents will be marked in bold to show hint of the organisation unit selection when opening the hierarchy.

![](resources/images/capture-app-image194.png){ width=25%}

> **Pozor**
>
> Od mobilních uživatelů se neočekává přístup k organizační jednotce hierarchie celé země. Maximální počet organizačních jednotek je obtížné nastavit, protože aplikace nestanoví limit, ale prostředky v zařízení (paměť, procesor). Dalo by se říci, že 250 organizačních jednotek by mělo být bezpečných, ale přesto věříme, že je to velmi velké číslo pro případ použití v mobilu.


## Datové sady { #capture_app_generic_datasets }

Uživatel nyní může zadat agregovaná data pro organizační jednotku, období a sadu datových prvků a odeslat je na server.

![](resources/images/capture-app-image87.png){ width=25%}
![](resources/images/capture-app-image93.png){ width=25%}
![](resources/images/capture-app-image92.png){ width=25%}


## Home {#capture_app_home}

The home screen of the DHIS2 Android App shows the list of programs and data sets available for the user. The first thing the user does when collecting data in this case is to select the program or data set to work with.


![](resources/images/capture-app-image87.png){ width=25%}

> **Tip**
>
> Snadným způsobem, jak je odlišit, je pohled na slovo v levém dolním rohu. Slovo „Událost“ bude v programech událostí vždy. V nástroji pro trasování se zobrazí název typu trasované entity (osoba, pacient, budova atd.). U souborů dat se vedle počtu záznamů zobrazí slovo „DataSets“.

For those implementations where the users have access to only one program or dataset, the App will skip the home and will open directly the program or datasaset screen with the event, TEI or dataset list to reduce the number of clicks and streamline the process of data entry.

![](resources/images/capture-app-image245.png){ width=25%}
![](resources/images/capture-app-image247.png){ width=25%}

## Sdílení dat { #capture_app_generic_shargin }

Users can share TEI via QR codes. This allows transferring/sharing information between devices without the need of transferring via the server (useful when connecitivity might be missing). To do this users should open any TEI and click on the *SHARE* button.

![](resources/images/capture-app-image72.png){ width=25%}
![](resources/images/capture-app-image73.png){ width=25%}


## Zachycení souřadnic { #capture_app_generic_capture_coord }

### Souřadnice TEI { #capture_app_generic_capture_coord_tei }

Zachyťte souřadnice TEI v registračním formuláři. Povolte tuto funkci v typu funkce TET.

![](resources/images/capture-app-image94.png){ width=25%}

### Polygony { #capture_app_generic_capture_coord_polygons }

Aplikace nyní podporuje formát geoJSON a uživatel je schopen zachytit polygony.

![](resources/images/capture-app-image95.png){ width=25%}


## Obrázky { #capture_app_generic_images }

Obrázek ValueType lze použít v systému Android k zachycení dat a také v závislosti na konfiguraci programu, která se zobrazí na ovládacím panelu TEI. Když tato hodnota napíše první datový prvek / atribut označený jako zobrazený v konfiguraci programu, bude použit jako obrázek profilu TEI.

![](resources/images/capture-app-image99.png){ width=25%}
![](resources/images/capture-app-image98.png){ width=25%}
![](resources/images/capture-app-image100.png){ width=25%}

Otevřete profilový obrázek TEI kliknutím na něj.

![](resources/images/capture-app-image138.png){ width=25%}


## Zobrazovat události a TEI v mapách { #capture_app_generic_display_events }

Pokud má fáze programu nebo typ trasované entity typ funkce (a pro programy s registrací je povolena možnost displayFrontPageList), lze výpisy přepnout na zobrazení informací v mapě. Přepněte kliknutím na ikonu mapy na navigačním panelu.


![](resources/images/capture-app-image101.png){ width=25%}
![](resources/images/capture-app-image102.png){ width=25%}

Pokud má TEI profilový obrázek, zobrazí jej mapa.

![](resources/images/capture-app-image103.png){ width=25%}

## Personalized Calendar View { #capture_app_personalized_calendar }

V aplikaci DHIS2 Android Capture mohou uživatelé přepínat výběr data z číselníku na zobrazení kalendáře. V této verzi si aplikace bude pamatovat poslední vizualizaci vybranou uživatelem a použije ji, až bude uživatel příště potřebovat vybrat datum.

![](resources/images/capture-app-image177.png){ width=25%}

## Reason for non-editable data { #capture_app_reason_non_editable }

Data mohou být v DHIS2 blokována z mnoha důvodů, mimo jiné z důvodu omezení přístupu nebo vypršení platnosti. Pokud událost, TEI nebo soubor dat nelze upravovat, uživatel bude moci najít důvod v sekci „Podrobnosti“.

Následující seznam obsahuje všechny možné důvody:

* Dokončení akce
* Dokončení zápisu
* Událost vypršela
* Uzavřená organizační jednotka
* Organizační jednotka mimo rozsah zachycení
* Žádný přístup k zachycení dat v programu nebo datové sadě
* Žádný přístup k možnosti kategorie v programu nebo datové sadě

![](resources/images/capture-app-image178.png){ width=25%}
![](resources/images/capture-app-image179.png){ width=25%}

## Configuration troubleshooting { #capture_app_configuration_troubleshooting }

This feature is for administrators. The Android App incorporates an option in the settings screen for verifying some aspects of the DHIS2 configuration.

![](resources/images/capture-app-image188.png){ width=25%}
![](resources/images/capture-app-image195.png){ width=25%}

* **Language:** the user will be able to change the language of the application user interface to identify labels, buttons or prompts with errors or without translation.

![](resources/images/capture-app-image196.png){ width=25%}
![](resources/images/capture-app-image197.png){ width=25%}

* **Program rule validation:** this validator will check the program rules in the device and display configuration inconsistencies.

![](resources/images/capture-app-image198.png){ width=25%}
![](resources/images/capture-app-image199.png){ width=25%}

## Error Navigation { #capture_app_error_navigation }

The Android App has improved the navigation of sync errors on the user interface. The app will display the sync errors in a simple and clean manner allowing the user to navigate from the home screen to the exact field that is causing the error inside the event or data set.

![](resources/images/capture-app-image217.png){ width=25%}

User must tap on any of the errors listed and the app will move to the correspondent screen. Once the error is located and fixed, the user can synced by tapping on the "Refresh" button.

![](resources/images/capture-app-image218.png){ width=25%}
![](resources/images/capture-app-image219.png){ width=25%}
![](resources/images/capture-app-image220.png){ width=25%}

## LMIS Module { #capture_app_lmis_module }

The new module for real stock monitoring use case enables users to manage and monitor their stock levels in real-time. Integrating a module implies that the app will open a completely new and different user interface and experience to respond to a different data entry flow. To use this modules the program will need to be configured using the new web app for program use case configuration.

![](resources/images/capture-app-image221.png){ width=25%}
![](resources/images/capture-app-image222.png){ width=25%}
![](resources/images/capture-app-image223.png){ width=25%}



# Datové sady { #capture_app_datsets }

### Data Entry {#capture_app_data_sets_data_entry}

While entering data the new text input dialog opens an input field above the keyboard which shows the Data Element name, and category options of the field being selected, ensuring the user does not lose context when navigating the tables.

![](resources/images/capture-app-image213.png){ width=25%}

![](resources/images/capture-app-image214.png){ width=25%}


### Navigační lišta { #capture_app_data_sets_navigation_bar }

Pomocí navigační lišty umístěné ve spodní části datové sady můžete přepínat mezi formulářem pro zadávání dat a obrazovkou přehledu.

![](resources/images/capture-app-image139.png){ width=25%}

### Přehledová obrazovka { #capture_app_data_sets_overview_screen }

Nová karta Přehled obsahuje následující podrobnosti:

- Název datové sady
- Poslední aktualizace
- Stav otevření / zavření
- Období
- Organizační jednotka
- Kombinace možnosti kategorie
- Refresh button (To trigger a granular synchronization)

![](resources/images/capture-app-image122.png){ width=25%}

### Ukládání datové sady { #capture_app_data_sets_saving }

Pravidla ověřování a dokončení datových sad jsou integrovány do akcí tlačítka Uložit:

- When a Data set is configured to *complete only if validation passess*. If the validation is successful, a dialog asking to mark as complete will show up. The App will allow completion only if all mandatory fields have value.

![](resources/images/capture-app-image131.png){ width=25%}

- pokud není úspěšný, měl by se zobrazit chybový dialog a datová sada nebude označena jako úplná. Zobrazí se popis a pokyny ověřovacího pravidla, které uživateli pomohou identifikovat chybu.

![](resources/images/capture-app-image128.png){ width=25%}

- Na datové sadě, která nemá nastavení "Dokončení povoleno pouze v případě, že ověření proběhne úspěšně". Při kliknutí na tlačítko Uložit; pokud je k datové sadě přidružena ověřovací pravidla, pak aplikace požádá uživatele, aby spustil ověřovací pravidla.

![](resources/images/capture-app-image130.png){ width=25%}

- Pokud ověření není úspěšné, měl by se zobrazit chybový dialog, ale s možností datový soubor přesto dokončit. Zobrazí se popis a pokyny ověřovacího pravidla, které uživateli pomohou identifikovat chybu.

![](resources/images/capture-app-image129.png){ width=25%}

- Pokud datová sada nemá ověřovací pravidla, bude datová sada označena jako úplná, pokud všechna povinná pole mají hodnotu.

### Increase Row and column Headers { #capture_app_data_sets_row }

Users are now allowed to resize the row headers and columns in datasets, making it easier to view and work with larger tables.

To resize any column, tap on its header and then drag and drop until the desired size. A maximum and minimum size limit is given for the columns that can be resized to ensure a good layout.

If the column have multiple headers, the resizing will be available only for the child header (lowest level). Users can also resize all collumns at once by clicking on the top left of the table.

![](resources/images/capture-app-image215.png){ width=25%}

![](resources/images/capture-app-image216.png){ width=25%}

### Indikátory { #capture_app_data_sets_indicators }

Indikátory jsou nyní k dispozici ve výchozích a sekčních formulářích a jsou zobrazeny ve spodní části formuláře pro zadávání dat.

![](resources/images/capture-app-image140.png){ width=25%}

### Cards design { #capture_app_datsets_cards_design }

The new design of cards offers a cleaner and more intuitive layout replacing the use of coloured icons by explicit text when relevan.

#### Main changes { #capture_app_datsets_cards_design_main_changes }

**Sync button:** It now appears as a button at the bottom of the card and it is only displayed if there are unsynced data or an error or warning after a sync.

**Completion status:** After the data set is completed, the app will add a label in each card to specify the completion status.

![](resources/images/capture-app-image237.png){ width=25%}

## Přehled podporovaných funkcí { #capture_app_datsets_supported_features }


Následuje úplný seznam všech funkcí dostupných pro datové sady v DHIS2 a poznámky o tom, zda byly, nebo nebyly implementovány v aplikaci Android Capture.

V poznámkách výraz „admin“ označuje někoho, kdo vyvíjí a konfiguruje systém DHIS2, a „user“ označuje někoho, kdo používá aplikace k pořizování dat, jejich aktualizaci a kontrole zpráv.

|Legenda|Popis|
|:--:|:------|
|![](/en/resources/images/admin/icon-complete.png)|Funkce implementována|
|![](/en/resources/images/admin/icon-incomplete.png)|Funkce není implementována&nbsp; (bude ignorována)|
|![](/en/resources/images/admin/icon-na.png)|Nelze použít|
|![](/en/resources/images/admin/icon-wip.png)|Ve vývoji. Funkce ještě není zcela implementována nebo již bylo hlášeno neočekávané chování.|


|Funkce|Popis funkce|Status|Poznámky k provádění|
|-|---|:-:|---|
|Typ období|Určuje období pokryté zadáváním údajů.|![](/en/resources/images/admin/icon-complete.png) | |
|Konec platnosti|Nastavuje termín (dny po období), po kterém DHIS2 uzamkne veškeré zadávání dat pro období (0 znamená, že nebudou vůbec zamknuty). Období lze stále otevírat, ale buňky budou zašedlé.| ![](/en/resources/images/admin/icon-complete.png) | |
|Otevřete budoucí období pro zadávání údajů|Toto nastavení lze použít k odemčení aktuálního období nebo všech období do určitého bodu v budoucnosti.|![](/en/resources/images/admin/icon-complete.png) | |
|Období zadávání dat|Umožňuje nastavit konkrétní rozsah dat pro zadávání dat období a zabrání shromažďování dat pro období mimo toto období.|![](/en/resources/images/admin/icon-complete.png) | |
|Dny po období, aby bylo možné se včas přihlásit|Nastavuje termín (dny po období), po kterém DHIS2 považuje zadávání dat za „pozdě“.| ![](/en/resources/images/admin/icon-complete.png)| |
|Kombinace kategorie [Atribut]|Umožňuje správci připojit kategorii (sadu možností) k datové sadě a vygenerovat pro každou možnost samostatnou obrazovku pro zadávání dat (v DHIS2 se tomu říká kombinace kategorie atributů).| ![](/en/resources/images/admin/icon-complete.png)| |
|[Atribut] Omezení možností kombinace kategorií|Pokud se používají kombinace kategorií atributů (viz výše), pak tato funkce dává správcům možnost omezit, které konkrétní možnosti jsou k dispozici v rozevíracím seznamu. Každá možnost může být omezena na konkrétní rozsah dat a / nebo organizačních jednotek a tato možnost se nezobrazí, pokud jsou data pořizována mimo tyto data nebo organizační jednotky.| ![](/en/resources/images/admin/icon-complete.png)||
|Vyplňte příjemce oznámení|Odešle zprávu DHIS2 vybrané skupině uživatelů, když je datový soubor označen jako „dokončen“.|![](/en/resources/images/admin/icon-incomplete.png)| |
|Odeslat oznámení dokončujícímu uživateli|Odešle zprávu DHIS2 uživateli zadávajícímu data, když je soubor dat označen jako „dokončen“.|![](/en/resources/images/admin/icon-incomplete.png)| |
|Všechna pole pro datové prvky jsou povinná|Pokud se k rozčlenění datového prvku používá jedna nebo více kategorií, toto nastavení donutí uživatele buď dokončit všechna členění, nebo je nechat všechny prázdné.|![](/en/resources/images/admin/icon-complete.png) | |
|Vyplňte, pouze pokud ověření proběhne|Pouze umožňuje označit soubor dat jako úplný, pokud nejsou spuštěna žádná ověřovací pravidla.|![](/en/resources/images/admin/icon-complete.png)| |
|Přeskočit offline|Vyžaduje, aby uživatel přidal „komentář“, pokud je hodnota ponechána prázdná (nebo nelze datovou sadu „dokončit“). Umožňuje pouze výběr datové sady pro zadávání dat při připojení k internetu (i když je tato položka jednou vybrána, může pokračovat offline).|![](/en/resources/images/admin/icon-incomplete.png)| |
|Dekorace datových prvků|Zobrazuje popis datového prvku, když kurzor myši přejde přes název datového prvku.|![](/en/resources/images/admin/icon-complete.png) | |
|Formuláře sekcí - vykreslení sekcí jako záložek|Zobrazí každou část ve formuláři jako samostatnou kartu, místo všech společně na stejné stránce.|![](/en/resources/images/admin/icon-incomplete.png)| |
|Sekce Formulářů - vykreslení nad sebou||![](/en/resources/images/admin/icon-incomplete.png)| |
|Datový prvek - CatCombos|Umožňuje automatické rozdělení jednotlivého datového prvku do jedné nebo více kategorií (např. Muž / žena i dítě / dospělý), přičemž pro každou z těchto členění jsou shromážděna samostatná pole / hodnoty.|![](/en/resources/images/admin/icon-complete.png)| |
|Inline indikátory / součty sekcí formuláře|Umožňuje přepsat výchozí CatCombo pro každý datový prvek jiným CatCombo pouze pro tuto datovou sadu.|![](/en/resources/images/admin/icon-complete.png)| |
|Formuláře sekcí - vykreslení sekcí jako záložek|Přidání indikátorů do datových sad je zpřístupní pro použití ve formulářích oddílů a vlastních formulářích; do těchto formulářů lze také přidat součty řádků a / nebo sloupců. (Obě se zobrazují na obrazovce vedle buněk pro sběr dat a automaticky se aktualizují, když jsou zachyceny hodnoty.)|![](/en/resources/images/admin/icon-incomplete.png)| |
|Přiřazení organizační jednotky|Zajistí, aby byl datový soubor k dispozici pouze pro ty organizační jednotky, kterým byl přiřazen.|![](/en/resources/images/admin/icon-complete.png) | |
|Povinné datové prvky|To umožňuje označení konkrétních datových prvků / CatCombos jako „povinných“, což znamená, že uživatelé musí zadat hodnotu (nesmí být ponechána prázdná).| ![](/en/resources/images/admin/icon-complete.png)| |
|Formuláře - výchozí formuláře|DHIS2 automaticky vykreslí formulář jako tabulku (tabulky), s novou tabulkou spuštěnou pokaždé, když se změní kombinace kategorií (= různé záhlaví sloupců).|![](/en/resources/images/admin/icon-complete.png) | |
|Formuláře - formuláře sekce|Lze zadat části formuláře a názvy oddílů, což vám dává větší kontrolu nad seskupením a rozložením formuláře (ale stále se vykresluje automaticky). Tento formulář sekce automaticky přepíše výchozí formulář, pokud je implementován.|![](/en/resources/images/admin/icon-complete.png) | |
|Formuláře - vlastní formuláře|Lze navrhnout vlastní formulář HTML, který poskytuje úplnou kontrolu nad rozvržením a umožňuje zahrnutí kódu JavaScript do formuláře. Pokud je implementován, tento vlastní formulář automaticky přepíše výchozí a oddílové formuláře.|![](/en/resources/images/admin/icon-incomplete.png)| |
|Formuláře sekce - deaktivace polí (šedá)|U formulářů oddílů to umožňuje jednotlivě 'vyšednout' pole (celý datový prvek nebo konkrétní možnosti CatCombo), aby do něj uživatelé nemohli zadávat data.|![](/en/resources/images/admin/icon-complete.png) | |
|Formuláře jednotek pro více organizací|Když je toto nastavení serveru povoleno, rozvržení formulářů se změní tak, aby zobrazovaly více organizačních jednotek jako řádky a všechny datové prvky / CatCombos jako sloupce (tj. Velmi plochý a široký formulář na organizační jednotku).|![](/en/resources/images/admin/icon-incomplete.png)| |
|Vyskakovací okno s datovou hodnotou: označte hodnotu pro následnou kontrolu|Umožňuje uživateli označit tuto konkrétní hodnotu dat pro následnou kontrolu (označené hodnoty lze zkontrolovat ve webové aplikaci Data Quality).|![](/en/resources/images/admin/icon-incomplete.png)| |
|Vyskakovací okno s datovou hodnotou: přidat komentář k hodnotě|Umožňuje uživateli přidat komentář k této konkrétní datové hodnotě.|![](/en/resources/images/admin/icon-incomplete.png)| |
|Vyskakovací okno s hodnotou dat: zobrazení historie datových prvků|Zobrazuje historii tohoto konkrétního datového prvku v čase (tj. hodnoty předchozích 12 měsíců).|![](/en/resources/images/admin/icon-incomplete.png)| |
|Vyskakovací okno s hodnotami dat: zobrazení audit trail|Zobrazuje historii předchozích úprav této konkrétní hodnoty dat.|![](/en/resources/images/admin/icon-incomplete.png)| |
|Vyskakovací okno s hodnotami dat: minimální / maximální rozsahy (dostupné také prostřednictvím aplikace Data Administration)|To umožňuje uživatelům nastavit minimální a maximální očekávané hodnoty pro datový prvek, což umožňuje DHIS2 zvýrazňovat hodnoty mimo tento rozsah během zadávání dat (ale nebrání to uložení nebo „dokončení“). Můžete nastavit minimální / maximální rozsahy automaticky / hromadně (prostřednictvím aplikace Data Administration) nebo ručně / jednotlivě (prostřednictvím aplikace Data Entry).|![](/en/resources/images/admin/icon-incomplete.png)| |
|Tisknout formulář / tisknout prázdný formulář|Umožňuje tisk formuláře pro zadávání dat, umožňující sběr dat na papír a zadávání dat později.|![](/en/resources/images/admin/icon-incomplete.png)| |
|Uložit data|Data zadaná na obrazovku nebudou zachycena, dokud nebudou „uložena“ - do té doby jsou uchovávána pouze v paměti a jsou ztracena, pokud je vypnuto napájení atd.|![](/en/resources/images/admin/icon-complete.png)| |
|Dokončená sada dat|To umožňuje uživateli označit vstup dat pro jednotku období / org / atd. Jako „kompletní“. Všimněte si, že to slouží pouze pro účely trasování a včasnosti zadávání dat a nezamkne sadu dat ani nezabrání dalším úpravám.|![](/en/resources/images/admin/icon-complete.png)| |
|Datové prvky: pravidla ověřování|Umožňuje vytváření pravidel (na úrovni datových prvků) k vynucení kvality dat na základě porovnání různých hodnot / kolekcí hodnot. (Např. Počet pacientů viděných v měsíci musí být menší než počet návštěv za měsíc.)|![](/en/resources/images/admin/icon-complete.png)| |
|Úrovně sdílení dat / Může zachytit data|Umožňuje uživateli přidávat nové hodnoty, upravovat hodnoty a mazat hodnoty v datové sadě.|![](/en/resources/images/admin/icon-complete.png) | |
|Úrovně sdílení dat / Může zobrazit data|Umožňuje uživateli zobrazit hodnoty v datové sadě.|![](/en/resources/images/admin/icon-complete.png) | |
|Úrovně sdílení dat / Žádný přístup|Uživatel nebude moci zobrazit datovou sadu.|![](/en/resources/images/admin/icon-complete.png) | |
|Pracovní postup schválení dat|Pokud správce vybere předkonfigurovaný pracovní postup pro schvalování dat, použije se k vynucení kaskády „schválení“ nebo „přijetí a schválení“, která uživatelům umožní odhlásit se a uzamknout data.|![](/en/resources/images/admin/icon-complete.png) | Proces schvalování musí být proveden na webu. Po schválení sady dat již nebude možné data v aplikaci upravovat. |
|Chybějící hodnoty vyžadují komentář po dokončení|Chybějící hodnoty budou vyžadovat komentář, který odůvodní jejich nepřítomnost.|-||



# Programy { #capture_app_programs }

## Společné funkce událostí a sledování { #capture_app_common_features }

### Navigation Bar { #navigation-bar } 

Pomocí spodního navigačního panelu se můžete pohybovat z jedné obrazovky na druhou.

#### Event Dashboard { #event-dashboard } 

Při zadávání informací o události umožňuje spodní navigační lišta uživateli vybrat si mezi:

1. Detaily
2. Vstup dat
3. Analytika (pokud je k dispozici)
4. Poznámky

![](resources/images/capture-app-image141.jpg){ width=25%}

#### Ovládací panel TEI { #tei-dashboard } 

Na hlavním panelu TEI umožňuje spodní navigační lišta uživateli vybrat si mezi:

1. Detaily
2. Analytika (pokud je k dispozici)
3. Vztahy
4. Poznámky

![](resources/images/capture-app-image142.jpg){ width=25%}

#### Seznam událostí pro programy pro sledování událostí a tracker { #event-listing-for-event-and-tracker-programs } 

Spodní navigační lišta také umožňuje přepínání režimu vizualizace, pokud byl program události nebo sledovací program definován souřadnicemi. Více informací o zobrazení mapy naleznete v konkrétní sekci níže.

  1. Zobrazení Seznam
  2. Zobrazení mapy

![](resources/images/capture-app-image143.jpg){ width=25%}
![](resources/images/capture-app-image144.jpg){ width=25%}

### Data Entry Flow { #capture_app_common_features_Data_flow }

#### creating/editing an event (Improved 3.0) { #capture_app_common_features_newEdit_event }

When creating an event or an enrollment, there are a number of fields that are not data elements or attributes, for example, event date, org unit, coordinates, enrollment date, category combinations. 

Those elements are referred to as event/enrollment details and in previous versions they were displayed in different screens separated from the data elements or attributes. From 3.0,  the details are displayed inside the form, as the first opened section for completion. Once they are filled in, for example when the user reopens the event or enrollment form, the details section will be visible and easily available, but collapsed to leave more space for the data collection.

![](resources/images/capture-app-image284.png){ width=25%}
![](resources/images/capture-app-image285.png){ width=25%}
![](resources/images/capture-app-image286.png){ width=25%}

#### Complete/Re-open event { #capture_app_common_features_complete_reopen }

When adding an event to an event program or inside a tracker program the user should fill the information and scroll down to make the *save* icon appear at the bottom right corner.

![](resources/images/capture-app-image37.jpg){ width=25%}
![](resources/images/capture-app-image74.png){ width=25%}

After tapping on the 'save' button, if the form does not contain any errors, warnings or empty mandatory fields, the app will ask if the user wants to complete the form. Two options are given to the user:

1. 'Not now': The app saves the form and go back to the event listing screen (or TEI dashboard for tracker programs). The status of the event will remain open.
2. 'Complete': The app saves the form and go back to the event listing. The status of the event changes to completed.

![](resources/images/capture-app-image201.png){ width=25%}

> **Note**
>
> To verify if an event is completed look at the icon, it must be a green checked box.
>

> **Note**
>
> If the event is non-editable, the app will hide the 'save' button
>

To re-open an event, the app now displays a "Re-open form" button in the Details screen. This button will be available only if the user has the correct authority (‘Uncomplete events’) to reopen a completed event.

![](resources/images/capture-app-image202.png){ width=25%}

#### Schedule after completion (Improved 3.0) { #capture_app_programs_common_features_schedule_after_completion }

In 3.0, the schedule dialog after completion has been redisigned to facilitate the creation of the event.

![](resources/images/capture-app-image270.png){ width=25%}

#### Discard changes { #capture_app_programs_common_features_discard_changes }

Tapping the back arrow in an enrollment or event form now provide two options:

1. 'Discard changes',  which allows the user to restored the fields to their previous values or,
2. 'Review' to remain in the form and update the fields.

If the user is in a new enrollment or event, the options allow the user to:

1. 'Discard changes': The enrollment or event is not created or,
2. 'Keep editing': Allowing the user to finish the enrollment or event.

![](resources/images/capture-app-image203.png){ width=25%}

#### Procento dokončení pole { #capture_app_programs_common_features_field_percentage }

Procento dat dokončených v každé události se zobrazuje v pravém horním rohu události, když je otevřena po první registraci.

![](resources/images/capture-app-image80.png){ width=25%}

> **Poznámka**
>
> Zobrazení procent lze nastavit tak, aby se zobrazovalo nebo nezobrazovalo pomocí [#capture_app_android_settings_webapp_appearance_program](WebApp Settings pro Android)

#### Navigace sekcí { #capture_app_programs_common_features_sections_nav }

The sections can be collapsed for a simpler user experience.  Sections in enrollment forms are also supported and are aligned with the design of the event sections.

![](resources/images/capture-app-image115.png){ width=25%}
![](resources/images/capture-app-image116.png){ width=25%}

#### Chybové zprávy { #capture_app_programs_common_features_errors }

Když se uživatel pokusí dokončit událost nebo registraci, aplikace zobrazí seznam chybějících povinných polí. Sekce obsahující chybějící pole budou zvýrazněny, aby uživatel mohl chybějící pole najít.

![](resources/images/capture-app-image117.png){ width=25%}

After tapping on the 'save' button, the app will display two options:

1. 'Not now': Allowing the user to save the form with an 'open' status or,
2. 'Review': The app will remain in the form for the user to fill the empty mandatory fields.

The errors and warnings are also shown as an indicator next to the section name including the number of errors for each section. A list of the fields with the errors/warnings when the user tries to save the form will be displayed.

![](resources/images/capture-app-image145.png){ width=25%}

After tapping on the 'save' button, the app will display two options:

**Warnings**

1. 'Not now': Allowing the user to save the form with an 'open' status or,
2. 'Complete': The form is saved and its status changes to 'complete'

**Errorrs**

1. 'Not now': Allowing the user to save the form with an 'open' status or,
2. 'Review': The app will remain in the form for the user to review the fields with errors

If there is a combinantion of errors, warnings and missing mandatory fields, the app will display the 'Not now' and 'Review' options only.


### Poznámky k události { #capture_app_programs_common_features_event_notes }

K událostem je možné přidávat poznámky v programech jednotlivých událostí a událostech programových scén. Poznámky jsou k dispozici na nové kartě ve formuláři pro zadávání údajů.

![](resources/images/capture-app-image106.png){ width=25%}
![](resources/images/capture-app-image107.jpg){ width=25%}

### Mapy { #capture_app_programs_common_features_maps }

#### Map Layers (Improved 3.0) { #map-layers-improved-30 } 

Při zobrazování map existují různé vrstvy, které lze zobrazit kliknutím na konkrétní tlačítko v pravém horním rohu. Uživatel si může vybrat jednu nebo více vrstev, které se mají zobrazit. Zobrazí se typy souřadnic i polygonů. Vrstvy jsou závislé na typu programu, jak je vysvětleno níže:

- Zobrazit události (pro programy bez registrace)
- Satelitní pohled
- Souřadnice TEI (standardně v programech s registrací)
- Souřadnice zápisu (pouze pro programy s registrací)
- Souřadnice fáze programu (pouze pro programy s registrací)
- Vztahy (pouze pro programy s registrací)
- Teplotní mapa (pouze pro programy s registrací)
- Atributy trasované entity (typ hodnoty souřadnic – pouze pro programy s registrací)
- Datové prvky (typ hodnoty souřadnic)

![](resources/images/capture-app-image125.png){ width=25%}
![](resources/images/capture-app-image136.png){ width=25%}

From 3.0 custom map layers are also supported by the Android App. These custom layers, configured in the [maintenance app](https://docs.dhis2.org/en/use/user-guides/dhis-core-version-240/configuring-the-system/metadata.html#manage_external_maplayer), will be downloaded and displayed as additional layers to the default ones.
![](resources/images/capture-app-image263.png){ width=25%}
![](resources/images/capture-app-image262.png){ width=25%}

#### Mapový kolotoč { #capture_app_programs_common_features_map_carousel }

Na mapovém zobrazení programu je zobrazen karusel karet, jedna pro každý přihlášený TEI (programy Tracker) nebo Událost (programy událostí).

* Karty TEI na karuselu mají stejný design jako zobrazení seznamu TEI.
* Při vodorovném posouvání karuselu se mapa přiblíží na vybrané souřadnice. Pokud je pole souřadnic prázdné, místo toho se zobrazí zpráva.

![](resources/images/capture-app-image126.png){ width=25%} 
![](resources/images/capture-app-image133.png){ width=25%}

Každá karta zobrazuje trasované atributy entit (pro programy Tracker) a datové prvky (pro programy událostí) nakonfigurované jako 'Zobrazit v seznamu'.

![](resources/images/capture-app-image147.png){ width=25%}

#### Current Location displayed in maps { #current-location-displayed-in-maps } 

Pokud uživatel aplikaci udělil oprávnění k poloze, mapa zobrazí aktuální polohu znázorněnou jako modrý barevný bod. Mapy v aplikaci DHIS2 Android Capture App obsahují možnost vycentrovat mapu na místo uživatele.

![](resources/images/capture-app-image148.png){ width=25%}

#### Navigation to Specific Location { #navigation-to-specific-location } 

Pokud má TEI nebo událost souřadnice, zobrazí se v pravé horní části karty navigační ikona. Kliknutím otevřete umístění ve výchozí aplikaci map nakonfigurované v zařízení.

![](resources/images/capture-app-image149.png){ width=25%}
![](resources/images/capture-app-image150.png){ width=25%}
![](resources/images/capture-app-image151.jpg){ width=25%}

### Working Lists { #capture_app_programs_common_features_working_lists }

Pracovní seznamy jsou k dispozici v programech událostí a sledování, jakmile je seznam vybrán, filtry budou zablokovány a nebude povoleno je měnit, dokud uživatel neobnoví vyhledávání.

The Android App supports the new tracker working lists, allowing users to filter by data elements. The working lists need to be configured in web using the web Capture App. The Android app will download the working lists that are configured and saved on the server side.

In 2.9, the working lists have been moved from the filters section to the main program screen. In earlier versions the user had to open the filters to be able to see and select a working list, from this version the working lists are always visible under the search bar facilitating its selection for filtering out Tracked Entity Instances

![](resources/images/capture-app-image251.png){ width=25%}

### Programové Indikátory { #program-indicators } 

Karta Analytika podporuje zobrazení textu a páru klíč / hodnota v sekci zpětné vazby nebo indikátoru.

![](resources/images/capture-app-image154.png){ width=25%}

### Legends { #legends } 

K datovým prvkům lze přiřadit legendy, které se zobrazí vedle hodnoty s příslušnou barvou a štítkem.

![](resources/images/capture-app-image155.png){ width=25%}

### Data Entry Form { #capture_app_programs_common_features_data_entry_form }

#### Hint messages { #hint-messages } 

The input fields will display had a hint message saying "Insert value here" which will remain until a value is entered by the user.

![](resources/images/capture-app-image209.png){ width=25%}

#### Navigation button { #navigation-button } 

In forms with multiple sections, the App includes a "Next" button at the end of each section which calls the user to action. The funtion of the button is to close the current section and open the new one.

![](resources/images/capture-app-image210.png){ width=25%}

#### Program Stage section description { #capture_app_programs_common_features_data_entry_form_program_stage_description }

To provide more context and information at the moment of data collection the description has now been brought to the user interface and will be displayed below the section name. The description will always be visible but if the text is too long (more than 3 lines) the app will add an ellipsis and a show more/less button to expand or collapse.

![](resources/images/capture-app-image243.png){ width=25%}
![](resources/images/capture-app-image244.png){ width=25%}

#### Enable/disable collapsible sections in forms { #capture_app_programs_common_features_data_entry_form_collapsible_sections }

Stage sections in the Android App are displayed with collapsible menus that enable the user to open one section at a time. The purpose of this accordion-like implemementation is to help the user navigate very long forms, however some implementations would prefer to list the sections one after the other. 

This new version of the application enables the admin use to decide if the sections should appear in extended mode. This configuration is made through the [Android Settings Web App](https://docs.dhis2.org/en/use/android-app/settings-configuration.html#capture_app_android_settings_webapp_appearance_program_specific) and will display the sections one after the other with the name the secion acting as a separator. In extended mode, the "next" button at the end of each section is removed.

![](resources/images/capture-app-image241.png){ width=25%}

#### New inputs per value types { #capture_app_programs_common_features_data_entry_form_new_inputs }

The inputs for all value types have been redesigned. Tappable areas and texts have been increased and selection modes are improved to offer cleaner and more intuitive user experience. By default the Android App will display the current forms. Admin users are able to opt-in to use the new forms through the [Android Settings WebApp]().

![](resources/images/capture-app-image238.png){ width=25%}
![](resources/images/capture-app-image239.png){ width=25%}
![](resources/images/capture-app-image240.png){ width=25%}

### Actionable Icons  { #capture_app_programs_common_features_actionable_icons }

This feature enables users to take action on phone numbers and email addresses directly from the app.  When tapping on the icons, the app will dial a phone number or open an email app copying the address from the event or enrollment data entry form.

![](resources/images/capture-app-image230.png){ width=25%}

### Customized Tracker Terminology { #capture_app_programs_common_features_customized_terminology }

In order to facilitate the terminology used in DHIS2, it has been decided to gradually enable the possibility to customize certain terms to each particular use case. In 3.0, the terms "event" (used in a program stage context) and "enrollment" are customizable.

To customize the terms, the admin can go to the Maintenance and when creating or editing the program add a text to:

  1. "Custom label for enrollment" in the Enrollment details section OR
  2. "Custom label for event" in the stage details section

![](resources/images/capture-app-image253.png){ width=25%}
![](resources/images/capture-app-image254.png){ width=25%}
![](resources/images/capture-app-image256.png){ width=25%}
![](resources/images/capture-app-image255.png){ width=25%}


## Specifické funkce programů událostí { #capture_app_programs_events }

### Event - TEI relationships { #event-tei-relationships } 

Aplikace umožňuje přidávat vztahy z jednotlivých akcí (v programech akcí) do TEI. Na obrazovce události je nová karta s názvem vztahy, která se zobrazí pouze tehdy, když je tento typ vztahů na serveru nakonfigurován pro konkrétní program.

> **Poznámka**
>
> Aktuální verze neumožňuje TEI vztahovat se k událostem nebo používat události, které patří k zápisu.

![](resources/images/capture-app-image175.png){ width=25%}

### Cards design { #capture_app_programs_common_features_cards_design }

The new design of cards offers a cleaner and more intuitive layout replacing the use of coloured icons by explicit text when relevant.

#### Main changes { #main-changes } 

**Sync button:** It now appears as a button at the bottom of the card and it is only displayed if there are unsynced data or an error or warning after a sync.

**Event status:** After an event program is completed, the app will add a label in each card to specify the status.

![](resources/images/capture-app-image236.png){ width=25%}

## Specifické vlastnosti sledovacích programů (program s registrací) { #capture_app_programs_tracker }

### Vztahy v mapách { #capture_app_programs_map_relationships }

V trasovacích programech může uživatel vidět vztahy na mapě klepnutím na ikonu mapy na kartě vztahů.

* Ve směru vztahu je zobrazena šipka.
* U obousměrných vztahů ukazuje šipka na obě strany.
* Každý typ vztahu zobrazuje jinou barvu.
* Pokud má jeden nebo oba TEI jako souřadnici polygony, čára jde od nejbližšího bodu jednoho (a k nejbližšímu druhého) polygonu obou TEI.

![](resources/images/capture-app-image132.png){ width=50%}

### TEI Dashboard (Improved 3.0) { #capture_app_programs_TEI_Dashboard }

The TEI Dashboard has been redesigned for both portrait and landscape view. The new design offers a cleaner and more intuitive layout replacing the use of coloured icons by explicit text when relevant and moving some secondar actions to the hidden menus.

#### Dashboard card { #dashboard-card } 

Main changes in 2.9:

**Edit registration form:** In previous versions, there was a button "Open TET details" at the bottom of the TEI dashboard card. Now, the button is located at the top bar of the screen with the label "Edit TET" (For example: Edit Patient)

**Follow-up:** In previous versions, there was an icon at the top right corner of the card to mark the TEI. Now, to mark for follow up, the user needs to tap the three dot menu and select the "Mark for follow-up" option.

**Card title** In previous versions, the title included the values of the first 3 tracked entity attributes marked as Display in List. Now, the tile of the card can bdisplay the first Tracked Entity Attribute marked as Display in list OR a customize text, called TEI header, using program indicators and the Android Settings web App.

More information [here](https://docs.dhis2.org/en/use/android-app/program-features.html#capture_app_programs_tei_header) on how to configure the TEI header.

**Tracked Entity Attributes:** From 2.9, the complete list of tracked entity attributes marked as Display in List will be display in the dashboard card. The first three will always be visible and if there are more, a show "more" button will appear to expand the list.

**Programs:** From 2.9, if the TEI is enrolled to more than one program, a list of the programs will be display and will also allow the user to tap on the label and navigate to full list of enrollments.

![](resources/images/capture-app-image248.png){ width=50%}

#### Program stages { #capture_app_programs_TEI_Dashboard_program_stages }

Main changes in 3.0:

**Event list:** fresh and more clean look of the list of events, with more space and less -not critical- information displayed.

**Timeline view:** the button for creating new events has been moved to the top.

![](resources/images/capture-app-image248.png){ width=50%}

#### Navigation panel { #navigation-panel } 

To simplify and personalize the user experience, the user interface actions offered to the user at the TEI dashboard will be tailored to the specific configuration of each  program.

* Karta Vztahy nebude viditelná, pokud nejsou nakonfigurovány vztahy programu
* Tlačítko „Vytvořit událost“ bude skryto, když uživatel nemůže vytvořit další události na základě konfigurace měřiče.
* Záložka Indikátor nebude viditelná, pokud program nemá nakonfigurovány žádné indikátory programu.
* Filtr organizačních jednotek nebude viditelný, pokud má uživatel nakonfigurovanou pouze jednu organizační jednotku.

#### Creating A Stage { #creating-a-stage } 

To create a new event, the user needs to tap on the plus icon on the stage card. This icon is always visible unless the stage is non-repeatable and already created.

When the user taps on the button, that program stage will unfold showing to the user all the already existing events of that particular program stage

![](resources/images/capture-app-image211.png){ width=50%}

If the user is creating a new stage and there is only one option based on the program configuration, the available program stage is selected automatically and program stage selection step is skipped.

#### Share a TEI  { #share-a-tei } 

The "Share" button has been removed from the TEI dashboard and the functionality to share a TEI through QR code has been relocated on the three vertical dot menu, at the top right corner of the screen.

![](resources/images/capture-app-image212.png){ width=50%}

### TEI Card Design { #capture_app_programs_tei_design }

The TEI Card has been designed to display as much information as possible considering the constrains of screen size.

From 2.9 the card has been redesigned to offer a cleaner and more intuitive layout replacing the use of coloured icons by explicit text when relevant.

The main changes are:

**Card title** The tile of the card can be composed by the first Tracked Entity Attribute marked as Display in list or a customize text, called TEI header, using program indicators and the Android Settings web App. More information [here](https://docs.dhis2.org/en/use/android-app/program-features.html#capture_app_programs_tei_header) on how to configure the TEI header.

**Sync button:** It now appears as a button at the bottom of the card and it is only displayed if there are unsynced data or an error or warning after a sync.

**Enrollment status:** After a program is completed or cancelled, the app will add a label in each card to specify the status.

**Overdue events:** Is now displayed as a red label with the text: "Overdue" + date of the event

**Follow-up:** After a TEI is marked for follow-up, an orange label with the text "Marked for follow-up" is added to the card

![](resources/images/capture-app-image247.png){ width=50%}

### Dokončete / deaktivujte registraci { #capture_app_programs_complete_deactivate_enrollment }

Chcete-li dokončit nebo deaktivovat registraci, klikněte na nabídku se třemi tečkami v pravém horním rohu a vyberte „Dokončit“ nebo „Deaktivovat“.

![](resources/images/capture-app-image76.jpg){ width=25%}

### Search Flow (Improved 3.0) { #capture_app_programs_search }

#### Configurable TEI Search { #capture_app_programs_configurable_search }

Searching TEIs before creating is not mandatory now. Using the Android Settings App (v2.2.0) it is possible to configure the mandatoriness of the TEI search before creating an enrollment. Follow the steps below to enable the creation of TEIs without searching:

  1. Open the Appearance menu in the Android Settings App
  2. In 'Program' add a Program Setting
  3. Select a tracker program
  4. Tick the "Allow the user to create a TEI without searching" checkbox
  5. Uložit

If the feature is enabled, the Android App will display a "create new" button after opening a program and a search won't be required. If the feature is not enabled or the user is in a previous version of the app, a search must be performed to avoid possible duplicates. Once the search is performed the search button will become "Add" button for the user to create a new enrollment.

![](resources/images/capture-app-image281.png){ width=25%}

#### Search by unique QR/bar Codes (new 3.0) { #capture_app_programs_unique_qrBar_search }

In 3.0, the search form has been improved to provide a cleaner look and a more intuitive user experience. The buttons have been made more explicit for differencing search from creation. In addition the flow for searching TEIs using attributes rendered as bar / QR codes has been made more agile. If there is only one result and the attribute is unique, the app will open the TEI Dashboard directly. If there are multiple results, the app will display all the cards on the TEI list (this is equal to the current workflow), and if there are no results, the app will display the create button and allow the user to “search outside the program” if the configuration allows it.

#### Offline and Online Search { #capture_app_programs_offline_online_search }

To improve the response time in the search results, the Android App now searches offline first and displays the results while making an online search as a second step, transparent to the user.

Searching outside the program is offered as a second step when  the attributes used in the search contain at least one Tracked Entity Type (TET) attribute

#### Resetujte vyhledávací pole { #capture_app_programs_reset_search }

The search fields are used to look up for a specific entity, and the circled arrow to reset the search. All fields will be blank for the user to do a new search.

![](resources/images/capture-app-image79.png){ width=25%}

#### Obrazovka vyhledávání všech typů sledovaných entit { #capture_app_programs_search_screen }

User can search across all programs by specific tracked entity type (TET). In the Search screen there is a drop down which shows all the programs available for the active TET (active TET is defined by the selection of the program in the home screen). That drop down should also have an option with TET name, for example: *All Person*.

Když uživatel vybere tuto možnost, budou vyhledávacími poli k dispozici pouze atributy TET (žádné atributy specifické pro program). Omezení vyhledávání neplatí, protože patří k programům.

![](resources/images/capture-app-image44.png){ width=25%}
![](resources/images/capture-app-image22.png){ width=25%}

Hledání vrátí nalezené TEI v místní databázi a také ty ve vyhledávací organizační jednotce uživatele (když je uživatel online). U uživatelů nalezených online je bude muset uživatel vybrat a stáhne se celý záznam.

> **Poznámka**
>
> Při konfiguraci vyhledávací organizační jednotky se ujistěte, že vaše zachycené org. jednotky jsou obsaženy ve vašem vyhledávání org. jednotek, aby to zachytilo org. jednotky které musí být vybrány, stejně jako vyhledávací org. jednotky.


### Ovládací panel TEI napříč programy { #capture_app_programs_tei_dashboard }

Uživatel může zobrazit panel TEI bez jakéhokoli programu výběrem TEI v seznamu, pokud bylo vyhledávání bez programu.

Na ovládacích panelech se zobrazí seznam aktivních registrací.

![](resources/images/capture-app-image22.png){ width=25%}
![](resources/images/capture-app-image38.png){ width=25%}

### Historie zápisu TEI a nový zápis { #capture_app_programs_tei_history }

User can see the complete historical records of the TEI. Clicking on the upper right corner menu, select "Program Enrollments". A list of "Active enrollments" will be displayed, followed by a list of "Past enrollments" (completed or cancelled), followed by the programs in which the TEI could be enrolled.  User can also return to the "TEI Dashboard" without any program' by selecting "All enrollments".

![](resources/images/capture-app-image40.jpg){ width=25%}
![](resources/images/capture-app-image7.png){ width=25%}

### Delete TEI's & Enrollments (Improved 3.0) { #capture_app_programs_delete_tei }

To delete a TEI or an enrollment, select the desired option in the three dots menu of TEI dashboard.  Local TEI or Enrollment will be deleted from the database. Records that has been previously synced with the server will be marked for deletion if the user has the following authorities:

* F_ENROLLMENT_CASCADE_DELETE
* F_TEI_CASCADE_DELETE

V tomto případě budou zobrazeny ve vyhledávacím seznamu TEI, ale nebudou přístupné.

![](resources/images/capture-app-image86.jpg){ width=25%}

From 3.0, there is a confirmation message to reduce errors when tapping on the dele button.

![](resources/images/capture-app-image269.png){ width=25%}

> **Upozornění**
>
> Když uživatelé zadají TEI a když není synchronizováno se serverem, budou moci odstranit TEI a zápis, i když jim tato oprávnění nebyla přidělena. Toto je záměrné a umožňuje uživatelům vrátit se zpět v případě, že zadali nesprávná data (TEI a/nebo zápis), a tak zabránit jejich dosažení na server a vyžadovat jiného uživatele s vyššími oprávněními k vyřešení problému.

### Skupinové zobrazení fází programu v TEI Dashboard { #capture_app_programs_group_view }

TEI Ovládací panel nabízí možnost změnit seznam událostí z chronologického zobrazení na zobrazení seskupení jevišť. Zobrazení seskupení scén seskupí a sbalí události podle fáze programu. Každou skupinu fází programu může uživatel rozšířit a události se budou zobrazovat chronologicky.

![](resources/images/capture-app-image108.png){ width=25%}
![](resources/images/capture-app-image109.jpg){ width=25%}

### Zdědit hodnoty { #capture_app_programs_inherit_values }

Při vytváření nového TEI pro vztah zdědíte jakýkoli atribut programu označený zaškrtnutím zdědění na webu.

To znamená, že všechny existující atributy v prvním TEI by měly projít novým TEI a být zobrazeny v registračním formuláři.

### Rozbití skla { #capture_app_programs_breaking_the_glass }

The "breaking the glass" feature is now supported in DHIS2 Android Capture App. If the program is configured with an access level of "Protected" and a search is done outside the user scope, a dialog requesting a reason for access will be displayed for the user to temporarily override the ownership privilege of the proram. This means, the user will gain access to the program related data.

After the reason is written, the app will download the TEI and the dashboard will open. If the TEI being downloaded doesn't have an enrollment in the current program, an enrollment date and organisation unit will be asked.

![](resources/images/capture-app-image205.png){ width=25%}
![](resources/images/capture-app-image206.png){ width=25%}

### Analytic charts { #analytic-charts } 

Je možné zobrazit vývoj v datových prvcích jako grafy, hodnoty nebo tabulky. Tyto datové prvky musí být typu číselné hodnoty a musí být konfigurovány v opakovatelné fázi.

1. Jedna hodnota: Zobrazí nejnovější hodnotu v programu.

![](resources/images/capture-app-image156.png){ width=25%}

2. Grafy: Hodnoty je možné zobrazit jako spojnicový graf nebo jako sloupcový graf.

![](resources/images/capture-app-image157.png){ width=25%}

The Nutrition Growth charts are shown according to the WHO standards.  This option will render a background image and apply the axis (0 to 5 monthly)according to the WHO model.

 ![](resources/images/capture-app-image159.png){ width=25%}

3. Tabulky: Zobrazí datové prvky nebo indikátory v řádcích a období ve sloupcích.

![](resources/images/capture-app-image160.png){ width=25%}

### Referrals { #capture_app_programs_referrals }

when a user makes a permanent referral of a TEI, the ownership will be updated accordingly on the server.

From 2.9, admin users can now enable or disable the referrals in the DHIS2 Android Capture App through the [Android Settings WebApp](https://docs.dhis2.org/en/use/android-app/settings-configuration.html#capture_app_android_settings_webapp_appearance_program).

When users add events (tapping on the + icon) in a tracker program, the DHIS2 Android Capture App offers three options: Add (for new events), Schedule (for planning future events) and Refer (for referrals or transfers). IF the referral option is not needed, then the admin user can remove the option from the menu to simplify the user experience. The removal can be general (for all the programs) or for specific programs.

![](resources/images/capture-app-image233.png){ width=50%}

### [EXPERIMENTAL] TEI Header  { #capture_app_programs_tei_header }

The TEI Header is a title that can be added to the TEI cards and dashboards in the app. The title helps identify a TEI by displaying a summary of key information. It is formed by a concatenation of Tracked Entity Atributes and fixed text. The title is configured through a Program Indicator in the maintenance app and its assigned to the tracker program in the Android settings webapp. This feature is experimentan and depending on feedback and adoption it will be refined and incorporated in the Web Capture app.

> **Attention**
>
>  In the Maintenace app, text expressions aren't valid. Even though the error is display in the dialog, save the program indicator and assign it in the Android Settings Web App, the DHIS2 Android capture app will read the expression accordingly.

For more information on how to configure the TEI header, click [here.](https://docs.dhis2.org/en/use/android-app/settings-configuration.html#capture_app_android_settings_webapp_appearance_program)

![](resources/images/capture-app-image249.png){ width=50%}
![](resources/images/capture-app-image250.png){ width=50%}

## Přehled podporovaných funkcí { #capture_app_programs_supported_features }

Následuje úplný seznam všech funkcí dostupných pro programy s registrací a bez registrace v DHIS2 a poznámky o tom, zda byly nebo nebyly implementovány v aplikaci Android Capture.

V poznámkách výraz „admin“ označuje někoho, kdo vyvíjí a konfiguruje systém DHIS2, a „user“ označuje někoho, kdo používá aplikace k pořizování dat, jejich aktualizaci a kontrole zpráv.

|Legenda|Popis|
|:--:|:------|
|![](/en/resources/images/admin/icon-complete.png)|Funkce implementována|
|![](/en/resources/images/admin/icon-incomplete.png)|Funkce není implementována (bude ignorována)|
|![](/en/resources/images/admin/icon-na.png)|Nelze použít|
|![](/en/resources/images/admin/icon-wip.png)|Ve vývoji. Funkce ještě není zcela implementována nebo již bylo hlášeno neočekávané chování.|

### Program { #capture_app_programs_supported_features_program }

|Funkce|Popis funkce|Program s registrací|Program bez registrace|Poznámky k provádění|
|-|---|:-:|:-:|---|
|Metoda zadávání dat pro sady možností|Umožňuje správci zvolit, jak se budou možnosti zobrazovat na obrazovce v celém programu (tj. Jako rozevírací seznamy nebo jako přepínače)|![](/en/resources/images/admin/icon-incomplete.png)|![](/en/resources/images/admin/icon-incomplete.png)|To bude nahrazeno novými možnostmi vykreslení.|
|Kombinace kategorií (atribut CatCombo)|Umožňuje správci připojit kategorii (sadu voleb) k programu a vyžaduje, aby uživatelé kategorizovali každý zápis. (Tomu se v DHIS 2 říká kombinace kategorií atributů.)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Pracovní postup schválení dat|Pokud správce vybere předem nakonfigurovaný pracovní postup schvalování dat, použije se k vynucení kaskády „schvalování“ nebo „přijímání a schvalování“, která uživatelům umožní odhlásit a uzamknout data.|![](/en/resources/images/admin/icon-incomplete.png)|![](/en/resources/images/admin/icon-incomplete.png)||
|Zobrazit seznam titulních stránek|Je-li tato možnost zaškrtnuta, zobrazí se na vstupní stránce po výběru organizační jednotky a programu seznam aktivních registrací. (Zobrazené atributy jsou ty, které jsou zaškrtnuty jako "zobrazit v seznamu".)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|První fáze se objeví na registrační stránce|Pokud je vybrána tato možnost, pak se během registrace programu zobrazí také obrazovka pro první fázi programu (registrace a první událost jsou zachyceny společně na jedné obrazovce).|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)| V Androidu se to implementuje otevřením události automaticky po dokončení registrace, místo přidání formuláře na stejnou obrazovku.|
|Dny vypršení platnosti dokončených událostí|Umožňuje správcům uzamknout zadávání dat určitý počet dní po dokončení události.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Typ doby platnosti + dny platnosti|Umožňuje správcům nastavit období (např. týdenní, měsíční) a zamknout zadávání dat určitý počet dní po skončení období.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Povolit budoucí data zápisu|Pokud je zaškrtnuto, umožňuje to uživateli zadat budoucí data registrace během registrace do programu; jinak jsou uživatelé omezeni na dnešní nebo minulá data.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Povolit budoucí data incidentu|Pokud je zaškrtnuto, umožňuje to uživateli zadat budoucí data incidentu během registrace do programu; jinak jsou uživatelé omezeni na dnešní nebo minulá data.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Zaregistrovat se pouze jednou (za dobu životnosti instance trasované entity)|Pokud je zaškrtnuto, brání tomu, aby TEI (např. osoba) byla zapsána do tohoto programu více než jednou.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Zobrazit datum incidentu|Pokud je zatrženo, zobrazí se uživateli data zápisu i incidentu pro sběr dat; jinak se zobrazí / zachytí pouze datum zápisu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Popis data incidentu|Umožňuje správci přizpůsobit štítek, který se používá pro datum incidentu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Popis data zápisu|Umožňuje správci přizpůsobit štítek, který se používá pro datum zápisu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Zachyťte souřadnice (zápis)|Umožňuje uživatelům zachytit zeměpisné souřadnice během zápisu do programu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Zachycení polygonu (zápis) |Umožňuje uživatelům zaznamenávat umístění (uzavřené oblasti) během zápisu do programu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Souřadnice TEI |Umožňuje uživatelům zaznamenávat zeměpisné souřadnice TEI během zápisu do programu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Vztahy: vytváření a aktualizace|Umožňuje uživatelům vytvářet a aktualizovat vztahy.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Vztahy - odkaz na přidání příbuzného|To umožňuje správcům přidat odkaz na jeden konkrétní vztah na ovládací panel, což uživatelům umožňuje přímo vytvořit propojený TEI (např. „dětský“ pacient).|![](/en/resources/images/admin/icon-incomplete.png)|![](/en/resources/images/admin/icon-na.png)||
|Atributy: zobrazit v seznamu|Toto nastavení určuje, zda lze atribut zobrazit v seznamech, například ve výsledcích vyhledávání, a zda jej lze zobrazit v užším seznamu atributů zobrazeném v části „Profil“ na hlavním panelu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)|Zobrazí se první tři atributy|
|Atributy: povinné|To umožňuje správci označit atribut jako „povinný“, což znamená, že zápis nelze uložit, dokud není zachycena hodnota.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Atributy: datum v budoucnosti|U atributů data to umožňuje správci zabránit nebo povolit zachycení budoucích dat.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Registrační formulář - výchozí|Výchozí formulář pro zadávání dat jednoduše uvádí všechny atributy definované pro TEI.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Registrační formulář - vlastní|To umožňuje správci definovat vlastní rozložení (pomocí HTML) pro registrační formulář.|-|![](/en/resources/images/admin/icon-na.png)|V aplikaci pro Android nejsou vlastní rozvržení podporována||
|Oznámení o programu|Můžete nastavit automatická oznámení, kdy dojde k registraci nebo dokončení programu, nebo v nastaveném intervalu před / po incidentu nebo datu registrace. Ty lze odesílat jako interní zprávy DHIS 2, e-maily nebo SMS.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|Tato funkce se provádí na straně serveru, jakmile jsou přijata data. Nefunguje, když aplikace pracuje offline.|
|Aktivovat / deaktivovat zápis|Deaktivace ovládacího panelu TEI způsobí, že se TEI stane jen ke čtení. To znamená, že nemůžete zadávat data, registrovat TEI nebo upravovat profil TEI.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Dokončení povoleno, pouze pokud ověření proběhne|Zaškrtnutím políčka vynutíte, aby událost vytvořená tímto programem byla dokončena, až když prošly všechna pravidla ověřování.|![](/en/resources/images/admin/icon-incomplete.png)|![](/en/resources/images/admin/icon-incomplete.png)||
|Data otevření / zavření organizační jednotky|Umožňuje správci nastavit otevírací a uzavírací data pro organizační jednotku, která uživatelům blokuje přidávání nebo úpravy událostí mimo tato data.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Úrovně sdílení dat / Může zachytit data|Umožňuje uživateli přidávat nové události, upravovat data a mazat události v programu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Úrovně sdílení dat / Může zobrazit data|Umožňuje uživateli zobrazit seznam událostí v rámci programu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Úrovně sdílení dat / Žádný přístup|Uživatel nebude moci program vidět|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||


### Fáze programu { #capture_app_programs_supported_features_program_stage }

|Funkce|Popis funkce|Program s registrací|Program bez registrace|Poznámky k provádění|
|-|---|:-:|:-:|---|
|Formulář události - výchozí|Výchozí formulář pro zadávání dat jednoduše uvádí všechny atributy patřící k registraci programu|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Formulář akce - formuláře sekcí|Formuláře oddílů umožňují rozdělit existující formuláře do segmentů|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Formulář události - vlastní|Definujte vlastní formulář události jako stránku HTML.|![](/en/resources/images/admin/icon-incomplete.png)|![](/en/resources/images/admin/icon-incomplete.png)|V aplikaci pro Android nejsou vlastní rozvržení podporována.|
|Oznámení fáze programu|Můžete nastavit automatická upozornění na dokončení fáze programu nebo v nastaveném intervalu před / po naplánovaných datech událostí. Ty lze odesílat jako interní zprávy DHIS 2, e-maily nebo SMS zprávy.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)|Tato funkce se provádí na straně serveru, jakmile jsou přijata data. Nefunguje, když aplikace pracuje offline.|
|Opakovatelný|Pokud je zaškrtnuto Opakovatelné, lze tuto fázi opakovat během jedné registrace programu. Pokud to není, pak se fáze může stát pouze jednou během registrace programu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Opakovatelný|Pokud je zaškrtnuto Opakovatelné, lze tuto fázi opakovat během jedné registrace programu. Pokud to není, pak se fáze může stát pouze jednou během registrace programu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Opakovatelné + standardní intervalové dny|Systém navrhne datum vypršení termínu jako výpočet poslední události + standardní data intervalu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Typ období|Umožňuje správci nakonfigurovat sadu období (např. týdnů nebo měsíců) pro každou událost ve fázi programu, nikoli pouze datum. Při vytváření událostí jsou uživatelé požádáni, aby si vybrali období (místo data) pro každou novou událost, kterou vytvoří v dané fázi programu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Automaticky generovat událost|Pokud je zatrženo, vygeneruje se při zápisu pro tuto programovou fázi „rezervace“ na základě „plánovaných dnů od začátku“.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Generovat události na základě data registrace (nikoli data incidentu)|Zkontrolujte na něm automatické generování termínů událostí z programových fází tohoto programu na základě data registrace. Pokud není zaškrtnuto, jsou termíny vygenerovány na základě data incidentu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Otevřete formulář pro zadávání údajů po registraci + datum hlášení, které chcete použít|Pokud je tato možnost vybrána, po dokončení registrace by se měl ihned poté otevřít formulář pro zadání dat události.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Po dokončení fáze požádejte uživatele o dokončení programu| Pokud je tato možnost vybrána, po dokončení fáze programu by měl být uživatel vyzván k dokončení programu. (Toto nastavení je ignorováno, pokud je zaškrtnuto také „Požádat uživatele o vytvoření nové události“.)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Až bude fáze dokončena, požádejte uživatele o vytvoření nové události|Pokud je tato možnost vybrána, po dokončení fáze programu je uživatel vyzván k rezervaci.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Skrýt termín|Zobrazuje pouze skutečné datum událostí, skrývá datum konce platnosti.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Zachycuje souřadnice (událost) / bod typu prvku|Enables the user to capture geographical coordinates when each event is created ![](/en/resources/images/admin/icon-incomplete.png) particularly useful in devices that have GPS (eg Android), as instead of having to type in coordinates, the user can automatically populate them with the press of a button.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Zachytit Polygon (událost) / Polygon typu objektu |Umožňuje uživatelům po vytvoření každé události zachytit umístění (uzavřené oblasti). Polygon musí obsahovat alespoň 4 body.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Popis data zprávy|Umožňuje správci přizpůsobit štítek, který se používá pro datum události.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Datové prvky - povinné|To umožňuje správci označit datový prvek jako „povinný“, což znamená, že událost nelze uložit, dokud není zachycena hodnota.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Datové prvky - povoleny poskytované jinde|Ve formuláři toto umístí zaškrtávací políčko vedle vybraného datového prvku a umožní načtení předchozích dat do datového prvku.|![](/en/resources/images/admin/icon-incomplete.png)|![](/en/resources/images/admin/icon-na.png)||
|Datové prvky - zobrazení v hlášeních zpráv|Zobrazí hodnotu tohoto datového prvku do jediné události bez funkce zadávání registračních dat.|![](/en/resources/images/admin/icon-incomplete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Datové prvky - datum v budoucnosti|U Datových prvků umožňuje datum správci buď zabránit, nebo povolit zachycení budoucích dat.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Možnosti vykreslení datových prvků jako rádio|Umožňuje správci zvolit, jak se budou možnosti zobrazovat na obrazovce pro každý datový prvek (tj. Buď jako rozevírací seznam nebo jako přepínací tlačítka).|![](/en/resources/images/admin/icon-incomplete.png)|![](/en/resources/images/admin/icon-incomplete.png)||
|Po vyplnění zablokujte přihlašovací formulář|Zabrání všem úpravám událostí po jejich dokončení.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Komentáře k události|Umožňuje uživateli přidat k události celkové komentáře. Tyto komentáře jsou kumulativní (nové komentáře jsou přidány pod existující komentáře).|![](/en/resources/images/admin/icon-incomplete.png)|![](/en/resources/images/admin/icon-na.png)||

### Program s registrací: Ovládací panel trasované entity { #capture_app_programs_supported_features_program_with_reg }

|Funkce|Popis funkce|Status|Poznámky k provádění|
|-|---|:-:|---|
|Zprávy|Umožňuje uživatelům odesílat ad hoc volné textové zprávy TEI (např. Pacientům) prostřednictvím SMS nebo e-mailu.|![](/en/resources/images/admin/icon-incomplete.png)||
|Značka pro sledování (tlačítko s vykřičníkem)|Umožňuje uživateli označit TEI (např. Pacienta) jako vyžadující sledování.|![](/en/resources/images/admin/icon-complete.png)||
|Zobrazí historii auditu TEI|Umožňuje uživateli zobrazit historii všech úprav atributů pro tuto TEI (např. Pacienta).|-||
|Indikátory vloženého programu|Pokud je zaškrtnuto políčko „zobrazit ve formuláři“ indikátoru programu, indikátor se zobrazí na ovládacím panelu Tracker Capture a je aktualizován živě, jakmile dojde k zachycení dat.|![](/en/resources/images/admin/icon-complete.png)||
|Smazat události|Umožňuje uživateli odstranit událost.|![](/en/resources/images/admin/icon-complete.png)||
|Naplánujte události|V dialogu pro generování události by se uživateli měla zobrazit také možnost naplánovat událost. Proces je jako vytvoření události, ale uživatel bude po naplánování události odeslán zpět na ovládací panel TEI.|![](/en/resources/images/admin/icon-complete.png)||
|Doporučení pacientů|V dialogu generování událostí by se uživateli měla zobrazit také možnost odkázat pacienta. Proces je jako vytváření / plánování události, ale uživatel může změnit organizační jednotku a musí určit, zda jde o jednorázové nebo trvalé doporučení. Jednou se událost vytvoří pouze v zadané organizační jednotce.|![](/en/resources/images/admin/icon-complete.png)||
|Resetujte vyhledávací pole|Uživatel je schopen vyčistit vyhledávací pole stisknutím ikony se zaoblenou šipkou v pravém horním rohu obrazovky vyhledávání.|![](/en/resources/images/admin/icon-complete.png)||
|Obrazovka vyhledávání všech typů TE|Uživatel je schopen vyhledávat ve všech programech jednoho typu trasované entity (TET). Na obrazovce Hledání je rozevírací seznam, který zobrazuje všechny programy dostupné pro aktivní TET (aktivní TET je definován výběrem programu na domovské obrazovce). Tato rozevírací nabídka by měla mít také možnost s názvem TET. (Osoba na našem serveru). Když uživatel vybere tuto možnost, vyhledávací pole, která jsou k dispozici, budou pouze atributy TET (žádné atributy specifické pro program). Všechna omezení vyhledávání neplatí, protože patří k programům.|![](/en/resources/images/admin/icon-complete.png)||
|Ovládací panel TEI bez programu|Uživatel může zobrazit ovládací panel TEI bez jakéhokoli programu výběrem TEI v seznamu, pokud bylo vyhledávání bez programu. Ovládací panely zobrazují atributy TET na kartě podrobností a seznam aktivních registrací.|![](/en/resources/images/admin/icon-complete.png)||
|Historie zápisu TEI a nový zápis|Uživatel je schopen zobrazit kompletní záznam historie TEI. Kliknutím na ikonu v pravém horním rohu se jim zobrazí seznam aktivních zápisů, následovaný seznamem minulých zápisů (dokončených nebo zrušených) a programy, do kterých lze TEI zapsat. Uživatelé by měli být schopni přejít na různé zápisy ze seznamu.|![](/en/resources/images/admin/icon-complete.png)||
|Přístupová úroveň - rozbití skla|Pokud je program nakonfigurován s chráněnou úrovní přístupu a uživatel prohledá a najde trasované instance entit, které jsou vlastněny organizační jednotkou, pro kterou uživatel nemá oprávnění pro sběr dat, je uživateli nabídnuta možnost porušení zabezpečení. Uživatel zjistí důvod porušení zabezpečení a poté získá dočasné vlastnictví trasované instance entity.|![](/en/resources/images/admin/icon-incomplete.png)||

### Program bez registrace: Program jedné události { #capture_app_programs_supported_features_program_without_reg }

|Funkce|Popis funkce|Status|Poznámky k provádění|
|-|---|:-:|---|
|Výpis událostí (mřížka)|Seznam existujících událostí, který se zobrazí po výběru programu.|![](/en/resources/images/admin/icon-complete.png)||
|Třídit a filtrovat události v mřížce|Umožňuje uživateli třídit uvedené události nebo filtrovat události na základě klíčových slov nebo konkrétních rozsahů dat / čísel.|![](/en/resources/images/admin/icon-complete.png)|Události jsou řazeny chronologicky. Uživatel může filtrovat podle období a organizační jednotky.|
|Úpravy událostí v mřížce|Umožňuje uživateli přímo upravit datové prvky zobrazené v seznamu událostí / mřížce.|![](/en/resources/images/admin/icon-incomplete.png)||
|Zobrazit historii auditu událostí|Umožňuje uživateli zobrazit historii všech změn datových prvků události.|![](/en/resources/images/admin/icon-incomplete.png)||
|Zobrazit / skrýt sloupce (v seznamu událostí / mřížce)|Umožňuje uživateli upravit datové prvky zobrazené v seznamu událostí / mřížce (platí pouze pro daného uživatele).|![](/en/resources/images/admin/icon-incomplete.png)||
|Procento dokončení pole|Procento dat dokončených v každé události se zobrazuje v pravém horním rohu události, když je otevřena po první registraci. Procenta by měla být přizpůsobena účinkům pravidel programu ve formulářích.|![](/en/resources/images/admin/icon-complete.png)|Procento dokončení nebere v úvahu nepodporované typy hodnot ve formulářích.|
|Smazat události|Umožňuje uživateli odstranit událost.|![](/en/resources/images/admin/icon-complete.png)||



# Pravidla programu podporovaná v aplikaci Android Capture { #capture_app_pr }

Následuje úplný seznam všech komponent Program Rule (typy proměnných a akcí) dostupných v DHIS2 a poznámky o tom, zda byly nebo nebyly implementovány v DHIS2 Android App.

> **Note**
> 
> Any issues around using a particular feature with Android are highlighted with an exclamation mark !.

|legenda|popis|
|:--:|:------|
|![](/en/resources/images/admin/icon-complete.png)|Typ hodnoty implementován|
|![](/en/resources/images/admin/icon-incomplete.png)|Typ hodnoty není implementován, ale bude bezpečně ignorován (pokud není povinný) |
|![](/en/resources/images/admin/icon-na.png)|Nelze použít|
|![](/en/resources/images/admin/icon-wip.png)|Probíhající práce. Funkce ještě není zcela implementována nebo již bylo hlášeno neočekávané chování |

## Pravidlo programu Podporovány jsou různé typy zdrojů { #capture_app_pr_prv }

| Typ proměnné| Popis typu proměnné| Program s registrací| Program bez registrace| Poznámky k provádění|
|-|-----|:-:|:-:|-----|
|Datový prvek z nejnovější události pro fázi programu|Tento typ zdroje funguje stejně jako „Datový prvek z nejnovější události v aktuálním programu“, kromě toho, že vyhodnocuje pouze hodnoty z konkrétní fáze programu.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Datový prvek z nejnovější události v aktuálním programu (s registrací)|Tento zdrojový typ je naplněn nejnovější hodnotou dat shromážděnou pro zadaný datový prvek v rámci registrace.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Datový prvek z nejnovější události v aktuálním programu (bez registrace)|Tato proměnná pravidla programu bude naplněna nejnovější hodnotou dat nalezenou v 10 nejnovějších událostech ve stejné organizační jednotce.|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-complete.png)||
|Datový prvek v aktuální u dálosti (s registrací)|Proměnná převezme hodnotu datového element&rsquo;s z aktuální události.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Datový prvek v aktuální události (bez registrace)|Obsahuje hodnotu dat ze stejné události, kterou má uživatel aktuálně otevřenou.|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-complete.png)||
|Datový prvek z předchozí události (s registrací)|Proměnné pravidel programu s tímto typem zdroje budou obsahovat nejnovější hodnotu ze všech předchozích událostí pro zadaný datový prvek. Aktuálně otevřená událost se nevyhodnocuje.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Datový prvek z předchozí události (bez registrace)|Tato proměnná pravidla programu bude naplněna nejnovější hodnotou dat nalezenou v 10 událostech předcházejících aktuálnímu datu události (tj. Bez aktuální události).|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-complete.png)||
|Atribut trasované entity|Naplní proměnnou pravidla programu zadaným atributem trasované entity pro aktuální TEI (např. Aktuální pacient).|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Vypočítaná hodnota|Vypočítaná hodnota.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||

## Podporovány akce pravidla programu (datový prvek v aktuální události) { #capture_app_pr_pra }

| Akce| Popis akce| Program s registrací| Program bez registrace| Poznámky k provádění|
|-|-----|:-:|:-:|-----|
|Skrýt pole|Skryje jednotlivý datový prvek, pokud je pravidlo pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|! Pokud změníte hodnotu poté, co je pole skryté, vrátí akci zpět v závislosti na výchozí hodnotě engine type pravidla hodnoty. Doporučujeme jeho použití v kombinaci s funkcí hasvalue.|
|Skrýt sekci|Skryje celou sekci a její datové prvky, pokud je pravidlo pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Skrýt možnost|Skryje jednu možnost pro možnost nastavenou v daném atributu datového prvku / trasované entity. V kombinaci se <b> zobrazit skupinu možností</b>má  <b> skrýt  možnosti </b> přednost |![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Skrýt skupinu možností|Skrýt všechny možnosti v dané skupině možností a atributu datového prvku / trasované entity. V kombinaci se <b> zobrazit skupinu možností </b> má přednost možnost <b> skrýt </b> |![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Zobrazit skupinu možností|Slouží k zobrazení pouze možností z dané skupiny možností v daném atributu datového prvku / trasované entity. Chcete-li skupinu možností implicitně skrýt, skryjí se všechny možnosti, které nejsou součástí zobrazené skupin(y).|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Přiřadit hodnotu|Přiřadí hodnotu zadanému datovému prvku nebo atributu, pokud je pravidlo pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|Zadání textu musí být v jednoduchých uvozovkách. Například: '2+2' zobrazí text 2+2 a 2+2, bez jednoduchých uvozovek zobrazí 4. |
|Zobrazit varování|Zobrazuje uživateli vyskakovací varování, pokud je pravidlo pravdivé; nebrání uživateli v pokračování.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Varování na dokončení|Zobrazí uživateli vyskakovací varování, pokud v místě, na které kliknete dokončit, je pravidlo pravdivé; a nebrání uživateli v pokračování.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Zobrazit chybu|Jakmile je pravidlo pravdivé, zobrazí uživateli vyskakovací chybovou zprávu a zabrání uživateli v pokračování, dokud pravidlo již nebude pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|Hodnota se neuloží, ale text se nevymaže, aby ji uživatel mohl snadno opravit.|
|Chyba při dokončení|Zobrazí uživateli vyskakovací varování, že pokud klikne na dokončení; a pravidlo je pravdivé tak zabrání uživateli v pokračování, dokud pravidlo již nebude pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Nastavit pole jako povinné|Nastaví datový prvek jako „povinný“; pokud je pravidlo pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Zobrazit text (programy událostí)|Slouží k zobrazení informací, které nejsou chybou nebo varováním, například zpětnou vazbou.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)| Nezávisle na typu zdrojové proměnné se text zobrazí ve formuláři jako poslední prvek poslední sekce. Text se zobrazí jako zprávy na kartě indikátory.|
|Zobrazit text (sledovací programy)|Slouží k zobrazení informací, které nejsou chybou nebo varováním, například zpětnou vazbou.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|<b> 1. Pravidlo programu nakonfigurované jako „Pravidlo spouštění pouze pro fázi programu“. </b> Text se zobrazí POUZE ve formuláři jako poslední prvek poslední sekce. Text se zobrazí jako zprávy na kartě indikátory. </br> -> Pokud pravidlo programu používá jakýkoli typ proměnné, který není z aktuální fáze, pravidlo nebude moci vyhodnotit a zpráva se nezobrazí. </br> <b> 2. Pravidlo programu NENÍ nakonfigurováno jako „Pravidlo spouštění pouze pro fázi programu“. </b> Text se zobrazí POUZE na kartě indikátory a NE ve formuláři. </br> -> Pokud pravidlo programu používá jakoukoli proměnnou typu aktuální událost, pravidlo nebude moci vyhodnotit a zpráva se nezobrazí.|
|Zobrazit Hodnotu klíče / páru (Programy Událostí)|Slouží k zobrazení informací čerpaných z datového prvku.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|<b>Variable Type:</b> </br>* Data element from the newest event in the current program</br>* Data element from previous event</br>* Data element in current event</br>* Built-in variable</br>Key/Value Pair will be displayed in the form ONLY in the specified section.|
|Zobrazit dvojici klíč / hodnota (Trasovací programy)|Slouží k zobrazení informací čerpaných z datového prvku.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|<b>1. Variable Type:</b></br>* Data element in current event</br>Key/Value Pair will be displayed in the form ONLY in the specified section.</br><b>2. Variable Type:</b></br>* Data element from the newest event in the current program</br>* Data element from previous event</br>* Data element from the newest event for a program stage</br>* Tracked entity attribute</br>* Built-in variable</br>Key/Value Pair will be displayed ONLY in the indicators tab and NOT in the form.|
|Skrýt programovou fázi|Skryje celou fázi programu před uživatelem, pokud je pravidlo pravdivé.|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|Pravidlo akce je podporováno pouze pro <b>Datový prvek z nejnovější události v aktuálním typu programu a proměnné atributu trasované entity </b>.|
|Poslat zprávu|Odeslat zprávu spustí upozornění na základě poskytnuté šablony zprávy. Tato akce bude provedena vždy, když dojde ke změně hodnoty dat. Toto chování však lze řídit poskytnutím stavu registrace události ve výrazu pravidla programu|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|Tato funkce se provádí na straně serveru.|
|Plánování zprávy|Plánování zprávy naplánuje oznámení k datu uvedenému výrazem v datovém poli.|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|Tato funkce se provádí na straně serveru.|

## Podporované akce pravidel programu (další proměnné) { #capture_app_pr_pra_other }

| Akce| Popis akce| Datový prvek z nejnovější události v aktuálním programu (s registrací)|Datový prvek z nejnovější události v aktuálním programu (bez registrace)| Datový prvek z předchozí Události (s registrací) |Datový prvek z předchozí události (bez registrace)| Datový prvek z nejnovější události pro programovou fázi (s registrací)|Atribut trasovaného subjektu (s registrací) |Poznámky k provádění|
|-|-----|:-:|:-:|:-:|:-:|:-:|:-:|-----|
|Skrýt pole|Skryje jednotlivý datový prvek, pokud je pravidlo pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Skrýt sekci|Skryje celou sekci a její datové prvky, pokud je pravidlo pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Skrýt možnost|Skrýt jednu možnost pro možnosti nastavené v daném atributu datového prvku / trasované entity. V kombinaci se<b> zobrazit skupinu možností </b> má přednost před <b>skrýt možnost</b>.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Skrýt skupinu možností|Skryje všechny možnosti v dané skupině možností a atributu datového prvku / trasované entity. Při kombinaci se Zobrazit skupinu možností, má přednost možnost Skrýt.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Přiřadit hodnotu|Přiřadí hodnotu zadanému datovému prvku nebo atributu, pokud je pravidlo pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|Zadání textu musí být v jednoduchých uvozovkách. Například: '2+2' zobrazí text 2+2 a 2+2, bez jednoduchých uvozovek zobrazí 4.|
|Zobrazit varování|Zobrazuje uživateli vyskakovací varování, pokud je pravidlo pravdivé; nebrání uživateli v pokračování.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Varování na dokončení|Zobrazuje uživateli vyskakovací varování, pokud je v místě kliknutí na „dokončeno“ pravidlo pravdivé; to nebrání uživateli v pokračování.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Zobrazit chybu|Jakmile je pravidlo pravdivé, zobrazí uživateli vyskakovací chybovou zprávu a zabrání uživateli v pokračování, dokud pravidlo již nebude pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|Pravidlo umožní uživateli dokončit zápis, ale zabrání dokončení událostí, dokud pravidlo již nebude pravdivé. Hodnota se neuloží, ale text se nevymaže, aby ho uživatel mohl snadno opravit.|
|Chyba při dokončení|Zobrazuje uživateli vyskakovací varování, pokud je v místě kliknutí na „dokončeno“ pravidlo pravdivé; to nebrání uživateli v pokračování.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)||
|Nastavit pole jako povinné|Nastaví datový prvek jako „povinný“, pokud je pravidlo pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)||
|Zobrazit text (programy událostí)|Slouží k zobrazení informací, které nejsou chybou nebo varováním, například zpětnou vazbou.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)| Nezávisle na typu zdrojové proměnné se text zobrazí ve formuláři jako poslední prvek poslední sekce. Text se zobrazí jako zprávy na kartě indikátory.|
|Zobrazit text (sledovací programy)|Slouží k zobrazení informací, které nejsou chybou nebo varováním, například zpětnou vazbou.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|<b> 1. Pravidlo programu nakonfigurované jako „Pravidlo spouštění pouze pro fázi programu“. </b> Text se zobrazí POUZE ve formuláři jako poslední prvek poslední sekce. Text se zobrazí jako zprávy na kartě indikátory. </br> -> Pokud pravidlo programu používá jakýkoli typ proměnné, který není z aktuální fáze, pravidlo nebude moci vyhodnotit a zpráva se nezobrazí. </br> <b> 2. Pravidlo programu NENÍ nakonfigurováno jako „Pravidlo spouštění pouze pro fázi programu“. </b> Text se zobrazí POUZE na kartě indikátory a NE ve formuláři. </br> -> Pokud pravidlo programu používá jakoukoli proměnnou typu aktuální událost, pravidlo nebude moci vyhodnotit a zpráva se nezobrazí.|
|Zobrazit Hodnotu klíče / páru (Programy Událostí)|Slouží k zobrazení informací čerpaných z datového prvku.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|<b>Variable Type:</b> </br>* Data element from the newest event in the current program</br>* Data element from previous event</br>* Data element in current event</br>* Built-in variable</br>Key/Value Pair will be displayed in the form ONLY in the specified section.|
|Zobrazit dvojici klíč / hodnota (Trasovací programy)|Slouží k zobrazení informací čerpaných z datového prvku.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-complete.png)|<b>1. Variable Type:</b></br>* Data element in current event</br>Key/Value Pair will be displayed in the form ONLY in the specified section.</br><b>2. Variable Type:</b></br>* Data element from the newest event in the current program</br>* Data element from previous event</br>* Data element from the newest event for a program stage</br>* Tracked entity attribute</br>* Built-in variable</br>Key/Value Pair will be displayed ONLY in the indicators tab and NOT in the form.|
|Skrýt programovou fázi|Skryje celou fázi programu před uživatelem, pokud je pravidlo pravdivé.|![](/en/resources/images/admin/icon-complete.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-complete.png)|Pravidlo akce je podporováno pouze pro datový prvek <b> z nejnovější události v aktuální proměnné programu </b>. Pokud je událost generována automaticky, pravidlo se nepoužije.|
|Poslat zprávu|Odeslat zprávu spustí upozornění na základě poskytnuté šablony zprávy. Tato akce bude provedena vždy, když dojde ke změně hodnoty dat. Toto chování však lze řídit poskytnutím stavu registrace události ve výrazu pravidla programu|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|Tato funkce se provádí na straně serveru.|
|Plánování zprávy|Plánování zprávy naplánuje oznámení k datu uvedenému výrazem v datovém poli.|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|![](/en/resources/images/admin/icon-na.png)|Tato funkce se provádí na straně serveru.|

## Funkce pro použití ve výrazech pravidel programu { #capture_app_pr_pre }

| Funkce   | Popis funkce | Status        | Poznámky k provádění |
| ---- | ----------------------------- | :----: | -- |
| d2:ceil    | Zaokrouhlí vstupní argument na nejbližší celé číslo.   | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:floor   | Zaokrouhlí vstupní argument na nejbližší celé číslo. | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:round   | Zaokrouhlí vstupní argument na nejbližší celé číslo.      | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:modulus | Produkuje absolutní hodnotu při dělení prvního a druhého argumentu.        | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:zing    | Vyhodnotí argument typu číslo na nulu, pokud je hodnota záporná, jinak na samotnou hodnotu.   | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:oizp    | Vyhodnotí argument typu číslo na jeden, pokud je hodnota nula nebo kladná, jinak nula.        | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:concatenate      | Produkuje zřetězený řetězec ze vstupních parametrů. Podporuje libovolný počet parametrů.      | ![](/en/resources/images/admin/icon-complete.png)    |Použijte funkci d2:concatenate namísto použití znaku „+“, protože vyhodnocovač výrazů v aplikaci bude přidávat čísla, pokud je to možné.|
| d2:daysBetween      | Vytváří počet dní mezi prvním a druhým argumentem. Pokud je datum druhého argumentu před prvním argumentem, vrácená hodnota bude záporný počet dní mezi těmito dvěma daty. Statický formát data je 'yyyy-MM-dd'.        | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:weeksBetween     | Vytváří počet celých týdnů mezi prvním a druhým argumentem. Pokud je datum druhého argumentu před prvním argumentem, vrácená hodnota bude záporný počet týdnů mezi těmito dvěma daty. Statický formát data je 'yyyy-MM-dd'. | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:monthsBetween    | Produkuje počet celých měsíců mezi prvním a druhým argumentem. Pokud je datum druhého argumentu před prvním argumentem, návratová hodnota bude záporný počet měsíců mezi dvěma daty. Statický formát data je „rrrr-MM-dd“. | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:yearsBetween     | Produkuje počet let mezi prvním a druhým argumentem. Pokud je datum druhého argumentu před prvním argumentem, návratová hodnota bude záporný počet let mezi dvěma daty. Statický formát data je „rrrr-MM-dd“.       | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:addDays | Vytvoří datum na základě data prvního argumentu a přidá počet dní druhého argumentu.    | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:count   | Spočítá počet hodnot zadaných pro zdrojové pole v argumentu.      | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:countIfValue     | Spočítá počet odpovídajících hodnot, který je zadán pro zdrojové pole v prvním argumentu. Počítají se pouze výskyty, které odpovídají druhému argumentu. | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:countIfZeroPos   | Spočítá počet hodnot, které jsou nulové nebo kladné zadané pro zdrojové pole v argumentu. Parametr zdrojového pole je název jednoho z definovaných zdrojových polí v programu.      | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:hasValue         | Evaluates to true of the argument source field contains a value, false if no value is entered.       | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:validatePattern  | Vyhodnotí se jako true, pokud je vstupní text přesnou shodou s dodaným vzorem regulárního výrazu. Regulárnímu výrazu je třeba uniknout.       | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:left    | Vyhodnocuje k levé části textu počet znaků od prvního znaku.     | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:right   | Vyhodnocuje na pravou část textu počet znaků od posledního znaku.     | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:substring        | Vyhodnocuje se na část řetězce určenou počátečním a koncovým číslem znaku.     | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:split   | Rozdělte text oddělovačem a ponechejte n-tý prvek (0 je první).       | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:length  | Najděte délku řetězce.     | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:zpvc    | Vrátí počet číselných nul a kladných hodnot mezi danými argumenty objektu. Lze uvést libovolný počet argumentů.   | ![](/en/resources/images/admin/icon-complete.png)    | |
| d2:inOrgUnitGroup\* | Vyhodnocuje, zda je aktuální organizační jednotka ve skupině argumentů. Argument lze definovat buď ID, nebo kódem skupiny organizační jednotky. | ![](/en/resources/images/admin/icon-complete.png) | |
| d2:hasUserRole\** |Vrátí true, pokud má aktuální uživatel tuto roli, jinak false.| ![](/en/resources/images/admin/icon-complete.png) | |
| d2:zScoreWFA\*** |Funkce vypočítá z-skóre na základě údajů poskytnutých indikátorem hmotnosti podle věku WHO. Jeho hodnota se pohybuje mezi -3,5 až 3,5 v závislosti na hodnotě hmotnosti.| ![](/en/resources/images/admin/icon-complete.png) | Providing an age less than 0 or greater than 60 will result in the program rule to not be calculated. Also, WFA tables have the age parameter increment in steps of 1, providing a fraction age will floor the value (2.3 months → 2 months).|
| d2:zScoreHFA\*** |Function calculates z-score based on data provided by WHO height-for-age indicator. Its value varies between -3.5 to 3.5 depending upon the value of weight.| ![](/en/resources/images/admin/icon-complete.png) |Providing an age less than 0 or greater than 60 will result in the program rule to not be calculated. Also, HFA tables have the age parameter increment in steps of 1, providing a fraction age will floor the value (2.3 months → 2 months). |
| d2:zScoreWFH\*** |Function calculates z-score based on data provided by WHO weight-for-height indicator. Its value varies between -3.5 to 3.5 depending upon the value of weight.| ![](/en/resources/images/admin/icon-complete.png) | Providing a height less than 45 or greater than 120 will result in the program rule to not be calculated. Also, WFH tables have the height parameter increment in steps of 0.5, providing a fraction height will floor the value (45.3 → 45 | 45.7 → 45.5).|

> **Note**
>
> * Available in DHIS2 v2.30
> ** Available in DHIS2 v2.31 and greater
> *** Available in DHIS2 v2.32 and greater

## Standardní proměnné pro použití ve výrazech pravidel programu { #capture_app_pr_standard_vars }

K dispozici ve verzi DHIS2 v2.30

| Proměnná     | Popis funkce       | Status | Poznámky k provádění |
| --- | -------------------------------------------- | :---: | -- |
| V{current_date}       | Obsahuje aktuální datum, kdykoli je pravidlo provedeno. | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{event_date}         | Obsahuje datum události aktuálního provedení události. V okamžiku, kdy je pravidlo provedeno jako součást registračního formuláře, nebude mít hodnotu. | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{event_status}         | Obsahuje stav aktuální události nebo zápisu. | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{due_date} \*        | Tato proměnná bude obsahovat aktuální datum, kdy je pravidlo provedeno. Poznámka: To znamená, že pravidlo může produkovat různé výsledky v různých časech, i když se nic jiného nezměnilo.     | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{event_count}        | Obsahuje celkový počet událostí v zápisu.   | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{enrollment_date} \* | Obsahuje datum zápisu aktuálního zápisu. Nebude mít hodnotu pro jednotlivé programy událostí.       | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{incident_date} \*   | Obsahuje datum incidentu aktuálního zápisu. Nebude mít hodnotu pro jednotlivé programy událostí.         | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{enrollment_id} \*   | Řetězec univerzálního identifikátoru (UID) aktuálního zápisu. Nebude mít hodnotu pro jednotlivé programy událostí.   | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{event_id}  | Řetězec univerzálního identifikátoru (UID) aktuálního kontextu události. V okamžiku, kdy je pravidlo provedeno jako součást registračního formuláře, nebude mít hodnotu.   | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{orgunit_code}       | Obsahuje kód org. jednotky, která je propojena s aktuálním zápisem. U programů s jednou událostí se místo toho použije kód z aktuální události organizační jednotky.  | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{environment}        | Obsahuje kód představující aktuální běhové prostředí pro pravidla. Možné hodnoty jsou „WebClient“, „AndroidClient“ a „Server“. Lze použít, když se pravidlo programu má spustit pouze v jednom nebo více typech klientů.    | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{program_stage_id}   | Obsahuje ID aktuální programové fáze, která spustila pravidla. To lze použít ke spuštění pravidel ve specifických fázích programu nebo k zabránění provádění v určitých fázích. Při provádění pravidel v kontextu registračního formuláře TEI bude proměnná prázdná.   | ![](/en/resources/images/admin/icon-complete.png)      | |
| V{program_stage_name} | Obsahuje název aktuální programové fáze, která spustila pravidla. To lze použít ke spuštění pravidel ve specifických fázích programu nebo k zabránění provádění v určitých fázích. Při provádění pravidel v kontextu registračního formuláře TEI bude proměnná prázdná. | ![](/en/resources/images/admin/icon-complete.png)      | |

> **Poznámky**
>
> \*Platí pouze pro trasovač


## Rozdíly mezi pravidly programu na webu a u verze systému Android { #capture_app_pr_differences_web_android }

Vzhledem k tomu, že web a aplikace pro Android v současné době používají jiný *engine programových pravidel*, mohou existovat programy, které v jednom systému fungují a ve druhém nikoli. Obecně lze říci, že Android *engine  programových pravidel* je přísnější, a tak některá Programová pravidla, která fungují ve webové verzi DHIS2, v Androidu selžou. Tato podkapitola popisuje hlavní rozdíly a jak upravit pravidla, aby fungovala v obou systémech.

### Vyhodnocení typu Boolean { #capture_app_pr_differences_web_android_bool }


DHIS2 web version considers the type boolean as 0 or 1 (which can be evaluated to true or false), however Android evaluates them only as true or false. While this makes possible the addition of booleans in web, it will fail in Android; in order to fix this an additional *program rule variable* is needed to transform the boolean into an number that can be operated. Check the table below for examples and possible solutions.

V následujících příkladech zvažte následující:

* yn_prv1: je proměnná pravidla programu, která byla nakonfigurována tak, aby získala hodnotu datového prvku „Ano / Ne“
* yn_prv2: je proměnná pravidla programu, která byla nakonfigurována tak, aby získala hodnotu datového prvku „Ano / Ne“
* prv_boolean_one: je proměnná pravidla programu, která byla nakonfigurována tak, aby získala hodnotu datového prvku „Ano / Ne“
* prv_boolean_two: je proměnná pravidla programu, která byla nakonfigurována tak, aby získala hodnotu datového prvku „Ano / Ne“
* prv_boolean_one_to_number: je proměnná pravidla programu s vypočítanou hodnotou
* prv_boolean_two_to_number: je proměnná pravidla programu s vypočítanou hodnotou
* někdy se jako podmínka pravidla programu používá true, což znamená, že akce je vždy provedena
* The following acronyms are used: 
    * DE (Data Elemetn)
    * PR (Program Rule)
    * PRE (Program Rule Expression)
    * PRC (Program Rule Condition)
    * PRV (Program Rule Variable)
    * PRA (Program Rule Action)

| Podmínka(y) pravidla programu | Akce pravidla(el) programu | Webová verze | Android verze | Komentář |
| ----------- | ----------- | :---: | :---: | ----- |
| d2:hasValue('yn_prv1') \|\| d2:hasValue('yn_prv2') | Přiřaďte pevnou hodnotu DE | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | |
| #{yn_prv1} \|\| #{yn_prv2} | Přiřaďte pevnou hodnotu DE | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | |
| d2:hasValue('yn_prv1') \|\| d2:hasValue('yn_prv2') | Přiřazená hodnota k DE: #{yn_prv1} + #{yn_prv2} + 1 | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-negative.png) | Crashes in Android  whenver a boolean is marked as the expression would result in *true*+*false*+1 |
| PR1: #{prv_boolean_one} <br /><br />PR2: #{prv_boolean_two} <br /><br />PR3: #{prv_boolean_one} \|\| #{prv_boolean_two} | PRA1. Assign value "1" to PRV "#{prv_bool_one_to_number}" <br /><br />PRA2. Assign value: "1" to PRV "#{prv_bool_two_to_number}" <br /><br />PRA3. Assign value to DE: "#{prv_bool_one_to_number} + #{prv_bool_two_to_number} + 1"| ![](/en/resources/images/admin/icon-negative.png) | ![](/en/resources/images/admin/icon-negative.png) | Pro boolean existují 2 proměnné, jedna získá hodnotu pomocí definice PRV „value form DE“ a druhá prostřednictvím PRA. Pokud logická hodnota není označena, bude se místo čísla počítat jako řetězec |
| Čtyři PR pro přiřazení 1 nebo 0 k booleanům a další pro sčítání. Priority jdou shora dolů <br /> <br /> PRC1: !d2:hasValue('prv_boolean_one') \|\| !#{prv_boolean_one} <br /><br />PRC2: d2:hasValue('prv_boolean_one') && #{prv_boolean_one}<br /><br />PRC3: !d2:hasValue('prv_boolean_two')  \|\| !#{prv_boolean_two} <br /><br />PRC4: d2:hasValue('prv_boolean_two') && #{prv_boolean_two} <br /><br />PRC5: true | PRA1: Assign value: "0" to PRV "#{prv_bool_one_to_number}" <br /><br />PRA2: Assign value: "1" to PRV "#{prv_bool_one_to_number}" <br /><br />PRA3: Assign value: "0" to PRV "#{prv_bool_two_to_number}" <br /><br />PRA4: Assign value: "1" to PRV "#{prv_bool_two_to_number}" <br /><br />PRA5: Assign value: "#{prv_bool_one_to_number} + #{prv_bool_two_to_number} + 1" to DE <br /> | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | K dispozici jsou 2 proměnné pro boolean, jedna získá hodnotu pomocí definice PRV „value form DE“ a druhá prostřednictvím PRA.

### Vyhodnocení čísel { #capture_app_pr_differences_web_android_numbers }


DHIS2 web version evaluate numbers in a more flexible way casting values from integer to floats and viceversa. This can lead to some issues as explained in the examples below.

#### Division of numbers { #division-of-numbers } 

If required for a division web will cast from integer to float, however, Android take numbers as such (literally and without casting) which my end up giving unexpected results. Check the table below for examples and possible solutions.

| Podmínka(y) pravidla programu | Akce pravidla(el) programu | Webová verze | Android verze | Komentář |
| ----------- | ----------- | :---: | :---: | ----- |
| true | Přiřadit hodnotu DE:  d2:daysBetween('2020-05-13', '2020-05-17') / 3 | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-negative.png) | Uživatel by očekával, že se poměr bude počítat jako 4/3 s výsledkem 1,3333. Android však nedělí 4 na číslo s periodou  (4.0 jako webová verze), takže výsledek v Androidu je čistá 1 jako výsledek celočíselného dělení 4/3 |
| true | Přiřadit hodnotu k DE: d2:daysBetween('2020-05-13', '2020-05-17') / 3.0 | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | Výsledkem dělení je 1,33333 na webu i Androidu | 


#### Using the function validatePattern { #using-the-function-validatepattern } 

In the same way, if a DataElement of the type number is used, Android will use that value as float (including decimals) which might lead to validatePattern function not working as expected.

Consider the following:

* temperatue_prv: is a Program Rule Variable containing the value of the Data Element *temperature*.
* User inputs 38 in the Data Element.

| Podmínka(y) pravidla programu | Akce pravidla(el) programu | Webová verze | Android verze | Komentář |
| ----------- | ----------- | :---: | :---: | ----- |
| !d2:validatePattern(#{temperature_prv},'\\\\{d}') | Display error if value is not 2 digits | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-negative.png) | The user would expect the program rule to NOT show an error as 38 does match the pattern. However, Android attempts to validate the pattern \\{d} against 38.0 resulting in Android displaying the error. |
| !d2:validatePattern(#{temperature_prv},'(\\\\d{2}\|\\\\d{2}\\\\.\\\\d\|\\\\d{2}\\\\.\\\\d{2})$') | Display error if value is not 2 digits | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | The regular expression used here will match both integeres and floats resulting in being properly evaluated in web and Android and not displaying an error. |

## Changes in Program Rules (as from version 2.2 of the app) { #capture_app_pr_changes }

In the version 2.2 of the application (released on August, 2020) a new rule-engine was included.  This rule-engine requires some optional and some mandatory changes to be performed on the program rules expressions in order to make it work in the new application. A list of those changes, how to detect them and how to fix them is included in the following subsections.

### Vyhodnocení 'd2:hasValue' { #capture_app_pr_changes_hasvalue }

#### Popis { #description } 

This is an optional change. *d2:hasValue* now works with both single quotes or full variable expression. The following expressions is valid: `(d2:hasValue('variable_name') and d2:hasValue(#{variable_name}))`

#### Jak ověřit identitu pomocí API? { #how-to-identify-via-api } 

Získejte programová pravidla, kde podmínka nebo akce pravidla programu používá funkci d2:hasValue.

```
https://example.org/api/programRules?fields=program[name],name,programRuleActions[data],condition&filter=programRuleActions.data:like:hasValue&filter=condition:like:hasValue&rootJunction=OR
```

```xml
<programRule name="PR01 - Check variable with hasValue(#{variable})">
<condition>d2:hasValue(#{Věk v rocích})</condition>
<program name="JB_Testing_2.2"/>
<programRuleActions>
<programRuleAction/>
</programRuleActions>
</programRule>
<programRule name="PR01 - Check variable with hasValue('variable')">
<condition>d2:hasValue('Věk v rocích')</condition>
<program name="JB_Testing_2.2"/>
<programRuleActions>
<programRuleAction/>
</programRuleActions>
</programRule>
```

#### Jak to opravit? { #how-to-fix-it } 

Výše uvedený příklad ukazuje, jak různé způsoby použití funkce hasValue budou mít stejný účinek jako od verze 2.2. Neexistují žádné povinné změny, ale mějte na paměti, že při psaní nových pravidel programu může být konzistentní, aby se zabránilo problémům.

### Vyhodnocení proměnné { #capture_app_pr_changes_eval_var }

#### Popis { #description } 

This is a mandatory change. *!#{variable_name}* can only be used boolean type variables (BOOLEAN and TRUE_ONLY).

#### Jak ověřit identitu pomocí API? { #how-to-identify-via-api } 

Získejte programRulesVariables s datovými prvky typu NOT BOOLEAN nebo TRUE_ONLY

```
https://example.org/api/programRuleVariables?fields=name&filter=dataElement.valueType:!in:[TRUE_ONLY,BOOLEAN]&paging=False
```

Získejte všechny programRule.conditions
```
https://example.org/api/programRules?fields=displayName,condition&paging=False
```

Ručně (nebo programově pomocí skriptu) zkontrolujte, zda se v seznamu programRule.conditions (získaných prostřednictvím druhého volání API) používá některá z proměnných pravidel programu (získaných prostřednictvím prvního volání API).

Například z prvního seznamu získáme:

```xml
<programRuleVariable name="AdditionalMedication"/>
<programRuleVariable name="age"/>
<programRuleVariable name="Age in years"/>
<programRuleVariable name="AgeYears"/>
<programRuleVariable name="allergies"/>
<programRuleVariable name="apgarcomment"/>
```

A můžeme porovnat s druhým seznamem:

```xml
<programRule>
<condition>!#{Pregant}</condition>
<displayName>PR03- !#{varible_name} - BOOLEAN</displayName>
</programRule>
<programRule>
<condition>!#{Age in years}</condition>
<displayName>PR03- !#{varible_name} - NOT BOOLEAN</displayName>
</programRule>
<programRule>
<condition>#{PregnancyStatus} != 'YES'</condition>
<displayName>Pregnancy status : false</displayName>
</programRule>
```

To ukazuje, že proměnná NON BOOLEAN se používá nesprávně.

#### Jak to opravit? { #how-to-fix-it } 

Ujistěte se, že ve svých podmínkách hodnotíte proměnné BOOLEAN nebo TRUE_ONLY . V případě, že proměnná pravidla programu není tohoto typu, aktualizujte podmínku pravidla programu pomocí d2:hasValue(#{variable_name}) nebo d2:hasValue(‘variable_name’)

Ve výše uvedeném příkladu by se podmínka měla změnit z:

```xml
<condition>!#{Age in years}</condition>
```
Do:
```xml
<condition>d2:hasValue(‘Age in years’)</condition>
```

### Vyhodnocení textů { #capture_app_pr_changes_eval_text }

#### Popis { #description } 

This is a mdantory change. In program rule actions of the type ASSIGN, DISPLAY TEXT, DISPLAY KEY/VALUE PAIR, SHOW WARNING, SHOW ERROR, WARNING ON COMPLETE or ERROR ON COMPLETE if the Expression to evaluate and assign/display is a text, it must be enclosed with single quotes.

#### Jak ověřit identitu pomocí API? { #how-to-identify-via-api } 

Získejte pravidla programu, jehož akce jsou na psaný text, s nějskými daty v polích a ověřte jejich datový obsah, abyste našli řetězce bez uvozovek.

```
https://example.org/api/programRules?fields=program[name],name,programRuleActions[programRuleActionType,content,data]&filter=programRuleActions.programRuleActionType:in:[ASSIGN,DISPLAYTEXT,DISPLAYKEYVALUEPAIR,SHOWWARNING,SHOWERROR]&filter=programRuleActions.data:!null&paging=false
```

Například zde můžeme detekovat chybu textového pole bez uvozovek v první akci pravidla programu, zatímco druhá je správná.

```xml
<programRule name="PR04- !#{varible_name} - BOOLEAN - Assign text without quotes">
<program name="JB_Testing_2.2"/>
<programRuleActions>
<programRuleAction>
<programRuleActionType>SHOWWARNING</programRuleActionType>
<data>embarazada</data>
<content>PR04 text with quotes is: </content>
</programRuleAction>
</programRuleActions>
</programRule>
```

```xml
<programRule name="PR04- !#{varible_name} - BOOLEAN - Assign text with quotes">
<program name="JB_Testing_2.2"/>
<programRuleActions>
<programRuleAction>
<programRuleActionType>SHOWWARNING</programRuleActionType>
<data>'embarazada'</data>
<content>PR04 text with quotes is: </content>
</programRuleAction>
</programRuleActions>
</programRule>
```

#### Jak to opravit? { #how-to-fix-it } 

Naskenujte vygenerovaný seznam (prostřednictvím navrhovaných volání API), abyste našli datové komponenty akce Program Rule, kde není citován text, poté přejděte ke každému z identifikovaných pravidel programu a aktualizujte je.

### Spojení řetězce a objektů { #capture_app_pr_changes_concat }

#### Popis { #description } 

This is a mdantory change. In program rule actions of the type ASSIGN, DISPLAY TEXT, DISPLAY KEY/VALUE PAIR, SHOW WARNING, SHOW ERROR, WARNING ON COMPLETE or ERROR ON COMPLETE if the Expression to evaluate and assign/display is a text, it must be enclosed with single quotes (same as previous change); but, on top of that, if it requires to concatenate two strings or a combination of functions it is mandatory to use the *d2:concatenate* function.

#### Jak ověřit identitu pomocí API? { #how-to-identify-via-api } 

Získejte pravidla programu, které akce jsou typového textu, s jakýmkoli obsahem v datech pole a ověřte jejich datový obsah a zkontrolujte, zda v případě připojení dvou nebo více řetězců (nebo jiných objektů) je použita funkce d2:concatenate

Získejte pravidla programu, které akce mají typový text, a ověřte jejich datový obsah, abyste našli řetězce bez uvozovek.

```
http://localhost:8034/api/programRules?fields=program[name],name,programRuleActions[programRuleActionType,content,data]&filter=programRuleActions.programRuleActionType:in:[ASSIGN,DISPLAYTEXT,DISPLAYKEYVALUEPAIR,SHOWWARNING,SHOWERROR]&filter=programRuleActions.data:!null&paging=false
```

Například zde můžeme detekovat chybu dvou řetězců v akci bez použití d2:concatenate.

```xml
<programRule name="PR08- Assign text and variable without concatenate">
<program name="JB_Testing_2.2"/>
<programRuleActions>
<programRuleAction>
<programRuleActionType>SHOWWARNING</programRuleActionType>
<data>'Age is 10 and modulus' 'another string'</data>
<content>PR05 text without concat is: </content>
</programRuleAction>
</programRuleActions>
</programRule>
```

#### Jak to opravit? { #how-to-fix-it } 

Projděte vygenerovaný seznam (pomocí navrhovaných volání API), abyste našli datové komponenty akce Program Rule Action, kde dochází ke spojování dvou nebo více objektů, a aktualizujte je tak, aby používaly funkci d2:concatenate.

Ve výše uvedeném příkladu by se data měla změnit z:

```xml
<data>'Age is 10 and modulus' 'another string'</data>
```
Do:
```xml
<data>d2:concatenate('Age is 10 and modulus','another string')</data>
```



# Programové Indikátory { #capture_app_program_ind }

Následuje úplný seznam všech proměnných indikátorů programu dostupných v DHIS2 a poznámky o tom, zda byly nebo nebyly implementovány v aplikaci Android Capture.

Jakékoli problémy spojené s používáním konkrétní funkce v systému Android jsou zvýrazněny vykřičníkem.

|legenda|popis|
|:--:|:------|
|![](/en/resources/images/admin/icon-complete.png)|Komponenta implementována|
|![](/en/resources/images/admin/icon-incomplete.png)|Komponenta není implementována (pravidlo selže) |
|![](/en/resources/images/admin/icon-na.png)|Nelze použít|
|![](/en/resources/images/admin/icon-wip.png)|Ve vývoji. Funkce ještě není zcela implementována nebo již bylo hlášeno neočekávané chování.|

## Běžné funkce pro použití ve výrazu indikátoru programu nebo filtru { #capture_app_program_ind_common_functions }

|Funkce|Popis|Status|Poznámky k provádění|
|-|-----|:-:|-----|
|if|Vyhodnotí logický výraz a pokud true vrátí hodnotu true výrazu, pokud false vrátí hodnotu falešného výrazu. Argumenty musí dodržovat pravidla pro jakýkoli výraz indikátoru.|![](/en/resources/images/admin/icon-complete.png)||
|isNull|Vrátí true, pokud chybí hodnota prvku (null), jinak false.|![](/en/resources/images/admin/icon-complete.png)||
|isNotNull|Vrátí true, pokud hodnota prvku nechybí (není null), jinak false.|![](/en/resources/images/admin/icon-complete.png)||
|firstNonNull|Vrací hodnotu prvního prvku, který chybí (není null). Lze uvést libovolný počet argumentů. Jakýkoli argument může být také číselný nebo řetězcový literál, který bude vrácen, pokud všechny předchozí objekty mají chybějící hodnoty.|![](/en/resources/images/admin/icon-complete.png)||
|největší|Vrátí největší (nejvyšší) hodnotu zadaných výrazů. Lze uvést libovolný počet argumentů.|![](/en/resources/images/admin/icon-complete.png)||
|nejméně|Vrátí nejnižší (nejnižší) hodnotu zadaných výrazů. Lze uvést libovolný počet argumentů.|![](/en/resources/images/admin/icon-complete.png)||

## (d2) Funkce pro použití ve výrazu indikátoru programu nebo filtru { #capture_app_program_ind_d2_functions }

|Funkce|Popis|Status|Poznámky k provádění|
|-|-----|:-:|-----|
|addDays|Vytvoří datum na základě data prvního argumentu a přidá počet dní druhého argumentu.|![](/en/resources/images/admin/icon-complete.png)||
|ceil|Zaokrouhlí vstupní argument na nejbližší celé číslo.|![](/en/resources/images/admin/icon-complete.png)||
|condition|Vyhodnotí logický výraz a pokud true vrátí hodnotu true výrazu, pokud false vrátí hodnotu výrazu false. Podmíněný výraz musí být označen uvozovkami. Argumenty true-expr a false-expr musí dodržovat pravidla libovolného výrazu indikátoru programu (včetně funkcí).|![](/en/resources/images/admin/icon-complete.png)||
|počet|Spočítá počet datových hodnot, které byly shromážděny pro danou fázi programu a datový prvek v průběhu registrace. Datový prvek argumentu je dodáván se syntaxí #{programStage.dataElement}.|![](/en/resources/images/admin/icon-complete.png)||
|countIfCondition|Spočítá počet datových hodnot, které odpovídají zadaným kritériím podmínek pro danou fázi programu a datový prvek v průběhu registrace. Datový prvek argumentu je dodáván se syntaxí #{programStage.dataElement}. Podmínka se dodává jako výraz v jednoduchých uvozovkách.|![](/en/resources/images/admin/icon-complete.png)||
|countIfValue|Spočítá počet datových hodnot, které odpovídají zadané přesné hodnotě pro danou fázi programu a datový prvek v průběhu registrace. Datový prvek argumentu je dodáván se syntaxí #{programStage.dataElement}. Hodnota může být pevně zapsaný text nebo číslo.|![](/en/resources/images/admin/icon-complete.png)||
|countIfZeroPos|Spočítá počet hodnot, které jsou nulové nebo kladné zadané pro zdrojové pole v argumentu.|![](/en/resources/images/admin/icon-complete.png)||
|daysBetween|Produkuje počet dní mezi dvěma datovými prvky / atributy typu datum.|![](/en/resources/images/admin/icon-complete.png)||
|floor|Zaokrouhlí vstupní argument na nejbližší celé číslo.|![](/en/resources/images/admin/icon-complete.png)||
|hasUserRole|Vrátí true, pokud má aktuální uživatel tuto roli, jinak false.|![](/en/resources/images/admin/icon-complete.png)||
|hasValue|Vrátí true, pokud má datový prvek / atribut hodnotu.|![](/en/resources/images/admin/icon-complete.png)||
|inOrgUnitGroup|Vyhodnocuje, zda je aktuální organizační jednotka ve skupině argumentů. Argument lze definovat buď ID, nebo kódem skupiny organizační jednotky.|![](/en/resources/images/admin/icon-complete.png)||
|left|Vyhodnocuje k levé části textu počet znaků od prvního znaku.|![](/en/resources/images/admin/icon-complete.png)||
|délka|Najděte délku řetězce.|![](/en/resources/images/admin/icon-complete.png)||
|minut mezi|Produkuje počet minut mezi dvěma datovými prvky / atributy typu „datum a čas“.|![](/en/resources/images/admin/icon-complete.png)||
|modulus|Produkuje absolutní hodnotu při dělení prvního a druhého argumentu.|![](/en/resources/images/admin/icon-complete.png)||
|monthsBetween|Produkuje počet celých měsíců mezi prvním a druhým argumentem.|![](/en/resources/images/admin/icon-complete.png)||
|oizp|Vrátí jeden, pokud je výraz nula nebo kladný, jinak vrátí nulu.|![](/en/resources/images/admin/icon-complete.png)||
|relationshipCount|Produkuje počet vztahů daného typu, který je připojen k zápisu nebo události. Pokud není uveden žádný typ, započítají se všechny typy.|![](/en/resources/images/admin/icon-incomplete.png)||
|vpravo| Vyhodnocuje na pravou část textu počet znaků od posledního znaku.|![](/en/resources/images/admin/icon-complete.png)||
|round| Zaokrouhlí vstupní argument na nejbližší celé číslo.|![](/en/resources/images/admin/icon-complete.png)||
|rozdělit|RSplit text oddělovačem a ponechat n-tý prvek (0 je první).|![](/en/resources/images/admin/icon-complete.png)||
|podřetězec|Vyhodnocuje se na část řetězce určenou počátečním a koncovým číslem znaku.|![](/en/resources/images/admin/icon-complete.png)||
|validatePatten|Vyhodnotí se jako true, pokud je vstupní text přesnou shodou s dodaným vzorem regulárního výrazu.|![](/en/resources/images/admin/icon-complete.png)||
|týdnů mezi|Produkuje počet celých týdnů mezi dvěma datovými prvky / atributy typu datum.|![](/en/resources/images/admin/icon-complete.png)||
|yearsBetween|Produkuje počet let mezi prvním a druhým argumentem.|![](/en/resources/images/admin/icon-complete.png)||
|zing|Vrátí nulu, pokud je výraz záporný, jinak vrátí hodnotu výrazu.|![](/en/resources/images/admin/icon-complete.png)||
|zpvc|Vrátí počet číselných nul a kladných hodnot mezi danými argumenty objektu.|![](/en/resources/images/admin/icon-complete.png)||

## Proměnné, které se mají použít ve výrazu nebo filtru indikátoru programu { #capture_app_program_ind_variables }


| Typ proměnné| Popis typu proměnné|Status|Poznámky k provádění|
|-|-----|:-:|-----|
|Datum události <br /> event_date|Datum, kdy se událost konala.|![](/en/resources/images/admin/icon-complete.png)||
|Creation Date* <br />creation_date|Datum, kdy byla v systému vytvořena událost nebo registrace.|![](/en/resources/images/admin/icon-complete.png)||
|Datum platnosti <br /> due_date|Datum ukončení platnosti události.|![](/en/resources/images/admin/icon-complete.png)||
|Sync Date\*<br />sync_date|Datum, kdy byla událost nebo zápis naposledy synchronizována s aplikací pro Android.|![](/en/resources/images/admin/icon-incomplete.png)||
|Incident Date<br />incident_date|Datum výskytu události.|![](/en/resources/images/admin/icon-complete.png)||
|Datum registrace (není vidět v uživatelském rozhraní) <br /> enrollment_date|Datum, kdy byla trasovaná instance entity zapsána do programu.|![](/en/resources/images/admin/icon-complete.png)||
|Stav zápisu <br /> enrollment_status|Lze použít k zahrnutí nebo vyloučení zápisů v určitých stavech.|![](/en/resources/images/admin/icon-complete.png)||
|Aktuální datum<br />current_date|Aktuální datum.|![](/en/resources/images/admin/icon-complete.png)||
|Dokončené datum|Datum události je dokončeno.|![](/en/resources/images/admin/icon-complete.png)||
|Value Count<br />value_count|Počet nenulových hodnot ve výrazové části události.|![](/en/resources/images/admin/icon-complete.png)||
|Zero or positive value count<br />zero_pos_value_count|Počet číselných kladných hodnot ve výrazové části události.|![](/en/resources/images/admin/icon-complete.png)||
|Event Count<br />event_count|Počet událostí (užitečné v kombinaci s filtry).|![](/en/resources/images/admin/icon-complete.png)||
|Enrollment Count<br />enrollment_count|Počet zápisů (užitečné v kombinaci s filtry).|![](/en/resources/images/admin/icon-complete.png)|Indikátory v aplikaci pro Android se počítají v doméně jednoho zápisu TEI. Hodnota vždy 1.|
|TEI Count<br />tei_count|Počet trasovaných instancí entit (užitečné v kombinaci s filtry).|![](/en/resources/images/admin/icon-na.png)|Indikátory v aplikaci pro Android se počítají v doméně jednoho zápisu TEI. Hodnota vždy 1.|
|Program Stage Name<br />program_stage_name|Lze použít ve filtrech pro zahrnutí pouze určitých fází programu do filtru pro programy sledování.|![](/en/resources/images/admin/icon-incomplete.png)||
|Program Stage ID<br />program_stage_id|Lze použít ve filtrech pro zahrnutí pouze určitých fází programu do filtru pro programy sledování.|![](/en/resources/images/admin/icon-incomplete.png)||
|Reporting Period Start<br />reporting_period_start|Lze použít ve filtrech nebo výrazech pro srovnání jakéhokoli data s prvním datem v každém vykazovaném období.|![](/en/resources/images/admin/icon-na.png)|Indikátory v aplikaci pro Android se počítají v doméně jedné registrace TEI.|
|Reporting Period End<br />reporting_period_end|Lze použít ve filtrech nebo výrazech pro porovnání libovolného data s posledním inkluzivním datem v každém vykazovaném období.|![](/en/resources/images/admin/icon-na.png)|Indikátory v aplikaci pro Android se počítají v doméně jedné registrace TEI.|
|Organisation Unit Count<br />organisationunit_count|.|![](/en/resources/images/admin/icon-na.png)||

[Reference k dokumentaci](https://docs.dhis2.org/master/en/user/html/configure_program_indicator.html%23program_indicator_functions_variables_operators&sa=D&ust=1557433016643000)



# Podporované typy hodnot { #capture_app_value_types }

Následuje úplný seznam všech typů hodnot dostupných v DHIS 2 a poznámky o tom, zda byly nebo nebyly tyto implementovány v aplikaci Android Capture.

Jakékoli problémy spojené s používáním konkrétní funkce v systému Android jsou zvýrazněny vykřičníkem \!.

|Legenda|Popis|
| :-: | :------ |
| ![](/en/resources/images/admin/icon-complete.png) | Typ hodnoty implementován |
| ![](/en/resources/images/admin/icon-incomplete.png) | Typ hodnoty není implementován, ale bude bezpečně ignorován (pokud není povinný) |
| ![](/en/resources/images/admin/icon-wip.png) | Probíhající práce. Funkce ještě není zcela implementována nebo již bylo hlášeno neočekávané chování |


| Typ hodnoty | Popis typu hodnoty | Program s registrací | Program s registrací | Program bez registrace | Datová sada| Poznámky k provádění |
| :--| :----|:-:|:-:|:-:|:-:|:--|
| | | **Atributy** | **Datové prvky** | **Datové prvky** | **Datové prvky** | |
| Čas | Pouze čas | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |![](/en/resources/images/admin/icon-complete.png) | |
| Datum a čas | Datum a čas | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png)| |
| Datum | Pouze datum | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | |
| Věk | Umožňuje zadat buď věk v letech / měsících / dnech, nebo datum narození (oba jsou uloženy jako datum narození) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |![](/en/resources/images/admin/icon-complete.png) | |
| Telefonní číslo | Platné telefonní číslo | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |![](/en/resources/images/admin/icon-complete.png) | |
| E-mail | E-mailová adresa v platném formátu | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |![](/en/resources/images/admin/icon-complete.png) | |
| Ano/ne | Booleovský ano / ne (nebo bez odpověďi) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png)| |
| Pouze ano | Ano nebo ne | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png)| |
| Číslo | Jakékoli platné číslo, včetně desetinných míst | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png)| |
| Celé číslo | Libovolné celé číslo (celá čísla, žádná desetinná místa) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png)| |
| Kladné celé číslo | Pouze kladná celá čísla (žádné nulové nebo záporné hodnoty) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png)| |
| Kladné nebo nulové celé číslo | Pouze nula nebo kladná celá čísla (žádné záporné hodnoty) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png)| |
| Záporné celé číslo | Pouze záporná celá čísla (žádná nula nebo kladné hodnoty) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |![](/en/resources/images/admin/icon-complete.png) | |
| Procento | Libovolná desetinná hodnota mezi 0 a 100 | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png)| |
| Jednotkový interval | Libovolná desetinná hodnota mezi 0 a 1 | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |![](/en/resources/images/admin/icon-complete.png) | |
| Text | Text (délka textu až 50 000 znaků) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |![](/en/resources/images/admin/icon-complete.png) | |
| Multi_Text (New in 3.0) | Option set for multiple choice | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |![](/en/resources/images/admin/icon-incomplete.png) | |
| Dlouhý text | Text (bez omezení délky) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |![](/en/resources/images/admin/icon-complete.png) | |
| Písmeno | Jediné písmeno | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png)| |
| Soubor | Umožňuje nahrávání souborů v různých formátech (vyžaduje konfiguraci příslušného úložiště) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-incomplete.png) | |
| Organizační jednotka | Umožňuje výběr organizační jednotky DHIS2 jako zvolené hodnoty | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |  ![](/en/resources/images/admin/icon-incomplete.png)| |
| Tracker Associate | Umožňuje výběr existujícího Trasovače 'trasované instance entity' (např. Osoby) jako hodnoty | ![](/en/resources/images/admin/icon-incomplete.png) | ![](/en/resources/images/admin/icon-incomplete.png) | ![](/en/resources/images/admin/icon-incomplete.png) | ![](/en/resources/images/admin/icon-incomplete.png) | |
| Uživatelské jméno | Umožňuje výběr platného uživatelského jména DHIS2 jako hodnoty | ![](/en/resources/images/admin/icon-wip.png) | ![](/en/resources/images/admin/icon-wip.png) | ![](/en/resources/images/admin/icon-wip.png) |  ![](/en/resources/images/admin/icon-incomplete.png) | |
| Koordinát | Umožňuje ruční zadání zeměpisných souřadnic (neumožňuje automatické zachycení souřadnic) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png)| |
| URL | Umožňuje ruční zadání adresy URL. | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) |![](/en/resources/images/admin/icon-complete.png) | |
| obrázek | Umožňuje nahrávání obrázků. | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-complete.png) | ![](/en/resources/images/admin/icon-incomplete.png) | |




# Webová aplikace Nastavení Android { #capture_app_android_settings_webapp }
## Přehled { #capture_app_android_settings_webapp_overview }

Tato část se zaměřuje na implementaci [Webová aplikace Nastavení Android](https://apps.dhis2.org/app/a1bd6b5b-de8c-4998-8d34-56c18a139683).


Webová aplikace [Natavení Androidu](https://apps.dhis2.org/app/a1bd6b5b-de8c-4998-8d34-56c18a139683) umožňuje administrátorům konfigurovat parametry synchronizace pro aplikaci DHIS2 Android, šifrovat místní databázi zařízení Android , přizpůsobit vzhled programů, datových sad a domovské obrazovky a přidat položky TEI Analytiky. Konfigurační parametry definované v této webové aplikaci přepíší nastavení všech zařízení Android používajících aplikaci DHIS2 Android Capture.

Please note that in this version of the Web App (2.3), if the DHIS2 version is equal to or higher than 2.40, only users with "M_androidsettingsapp" or "ALL" authority can define those parameters in the configuration. Other users accessing the web app can see the value of the parameters but cannot edit them.

> **Warning**
>
> If the DHIS2 version is not above 2.40, only users with 'ALL' authority can define those parameters in the configuration.
> 


## Obecná nastavení { #capture_app_android_settings_webapp_general }

Zahrnuje konfigurace, jako je Matomo URL a ID projektu, počet vyhrazených hodnot ke stažení na TEI a šifrování databáze zařízení.

![](resources/images/capture-app-general-settings.png)

### Matomo configuration { #capture_app_android_settings_webapp_general_matomo }

The DHIS2 Android App sends anonymize analytics that can be used to evaluate performance and/or detect problems at an early stage. [Matomo](https://matomo.org) is the tool used for this and running in a specific server not accessible to the general public. However, implementations can set up their own
 Matomo instance (or using the cloud version) in order to collect and analyse the statistics. 

Once you have your Matomo instance ready you should get the URLs and the project ID like shown in the picture below (left). The ID can be introduced directly but the URL needs to be followed with */matomo.php* and start with *https* or *http* as shown below (right).

![](resources/images/capture-app-matomo-instance.png){width=33%}
![](resources/images/capture-app-matomo-settings.png){width=33%}


### Mobile configuration { #capture_app_android_settings_webapp_generalmobile_configuration }
This section allows admin users to edit the SMS gateway ad result sender phone number.
This configuration can be found in the Android app.
- Klepněte na Nastavení
- Klikněte na Nastavení SMS

![](resources/images/capture-app-sms-settings.png){width=33%}

### Reserved values { #capture_app_android_settings_webapp_general_reserved_values }
Toto určí počet hodnot na atribut TEI vyhrazený ke stažení do zařízení. Ve výchozím nastavení si aplikace pro Android vyhrazuje 100 ID, ale toto číslo je možné přidat nebo snížit.

To find this configuration in the Android app:
- Klepněte na Nastavení
- Click on Reserved Values
- To refill them click on *Manage Reserved Values*

![](resources/images/capture-app-reserved-values.png){width=33%}
![](resources/images/capture-app-reserved-values-refill.png){width=33%}

### Encrypt device database { #capture_app_android_settings_webapp_general_encrypt_database }
To přinutí všechna zařízení ukládat databázi zašifrovaně, čímž se zvýší úroveň zabezpečení proti útokům krádeže dat.

By default, the DHIS2 Android App database is not encrypted, but an admin can check the *Encrypt device database* to encrypt the metadata and data stored in every device. Encrypting the database will have an impact on the database volume and performance (degradation between 10-15%) of the Android app. Note that at the moment of selecting or unselecting this option, no data is lost (even if it hasn't been previously synchronized with the server)

> **Warning**
>
> This is a critical action and will affect the local database of all Android devices synchronizing with the server (it won't affect the server DHIS2 database).
>
> By default, the Android app database is not encrypted, but an admin can check the *Encrypt device database* to encrypt the metadata and data stored in every device. Encrypting the database will have an impact on the database volume and performance of the Android app. Note that at the moment of selecting or unselecting this option, no data is lost (even if it hasn't been previously synchronized with the server)

### Allow screenshots { #capture_app_android_settings_webapp_general_screenshots }
This section allows to configure the possibility to take screenshots or screen sharing using the Android Capture App (which is required to remote support with applications like Teamviewer, Teams, etc). Please note that the default behavior is deactivated screenshots.

> **Warning**
>
> The DHIS2 Android App disables the possibility of taking screenshots (and capturing the screen from other apps) by default following security and privacy recommendations. Allowing screenshots might be useful for support and/or sharing purposes in same cases but make sure you understand the security and privacy implications of this setting before enabling it.
>

### Opt-in Features (**New 2.3.1**) { #capture_app_android_settings_webapp_general_optin_features }
Opt-in features are additional functionalities or settings within the application that the user can choose to enable based on preferences. Unlike default settings, these features require an explicit consent or action ('opting in') to activate.
Opting in allows the user to customize the experience by adding extra capabilities to the app. Keep in mind that these features might come with specific considerations, so it is recommended to review any associated information before opting in.

To enable a feature:
- Click on *Opt-in Features*. 
- A list of available opt-in settings will appear.
- Click on the feature's checkbox.

**Data entry Form :** The inputs for all value types have been redesigned in the Android Capture App with an improved selection mode and increased tappable areas and texts to offer a cleaner and more intuitive user experience. By default, the Android Capture App will display the previous forms. Admin users are able to opt in to use the new forms by clicking in the checkbox option.

![](resources/images/capture-app-optin-features.png)

### Disable all settings { #capture_app_android_settings_webapp_general_disable_settings }
Kliknutím na toto tlačítko uživatel odstraní všechna nastavení konfigurace systému Android. Na aplikaci pro Android nebude použita žádná konfigurace (pokud je to tento případ, použijí se parametry synchronizace ty, které jsou definovány v aplikaci Android Capture).


## Synchronizace { #capture_app_android_settings_webapp_synchronization }

Nabízí další parametry pro řízení synchronizace metadat/dat.


### Globální { #capture_app_android_settings_webapp_synchronization_global }

Metadata sync
:   Admin users can choose how often the metadata will sync. e.g. Sync metadata every 24 hours.

Data sync
:   Admin users can choose how often the data will sync. e.g. Syncing data every 6 hours.

![](resources/images/capture-app-sync-global.png){width=50%}
![](resources/images/capture-app-sync-global-app.png){width=33%}


Use the new Tracker Importer
:   Admin users can choose which tracker importer endpoint will be used.

> **Warning**
>
> This option is only available if the Android Settings Webapp is used from version 2.38 DHIS2 API onwards.
>
> By default, if the DHIS2 API version is 2.38 or higher, the Android app will use the importer introduced in 2.37 */api/tracker* endpoint but an admin can deselect this option and the legacy tracker importer */api/trackedEntityInstances* will be used.
> 
> ![](resources/images/capture-app-sync-global-importer.png){width=50%}
>

Use the new Tracker Exporter (**New 2.3**)
:   Admin users can choose which tracker exporter endpoint will be used.

> **Warning**
>
> This option is only available if the Android Settings Webapp is used from version 2.40 DHIS2 API onwards. 
> 
> By default, if the DHIS2 API version is 2.40 or higher, the Android app will use the exporter introduced in the 2.37 */api/tracker* endpoint, but an admin can deselect this option, and the legacy tracker importer */api/trackedEntityInstances* will be used.
>
>
> ![](resources/images/capture-app-sync-global-exporter.png){width=50%}
>

Limit the file size to download (**New 2.3**)
:   Admin users can limit the maximum size of the file resources downloaded in KB.

![](resources/images/capture-app-sync-download-file-size.png){width=33%}



### Program { #capture_app_android_settings_webapp_synchronization_program }

Tato sekce ovládá parametry synchronizace dat programu. Má sekci pro definování globálních nebo výchozích parametrů, které se mají použít při synchronizaci všech programů.

#### Globální nastavení { #capture_app_android_settings_webapp_synchronization_program_global }

Globální nastavení platí pro všechny programy, ke kterým má uživatel Android přístup. Nastavení lze povolit globálně, na organizační jednotku, na program nebo na organizační jednotku a program.

![](resources/images/capture-app-program-global-settings.png){width=50%}

TEI to download
:   Maximum number of TEIs to download from the server.

TEI download period
:   It downloads the TEIs that have been updated within a period. e.g. TEIs that have been updated within last month

Event to download
:   Maximum number of Events to download (from events programs, see note below).

Event download period
:   It downloads Events which event date belongs to a specific period.

> **Note**
>
> User might find misleading the amount of data downloaded When setting a number of TEIs and a number of Event. The Android App will download the number of TEIs and all their events following the number of TEI set in the field. The Android App will limit the number of Event to download only for the *event programs* (and not *tracker programs*) according to the field. 
>
> For example, imagine there is *tracker program* in the server with several program stages and each TEI has 5 events (enrollments and program stages). The *TEI to download* value is set to 100. Also, in the server there is an *event program* which contains 1000 events. The *Event to download* value has been set to 200. The Android App will download the following: 100 x 5 events from the tracker program, 200 events from the event program, therefore the Android App will end up downloading 700 events.
>


#### Konkrétní nastavení { #capture_app_android_settings_webapp_synchronization_program_specific }

Tato část umožňuje uživatelům správce určit chování konkrétního programu při synchronizaci dat. Specifická konfigurace přepíše obecné nastavení pro programy uvedené v této části. Přidání nastavení pro konkrétní program:

- Klikněte na *Přidat nastavení specifické pro program*, objeví se dialog.
- Pod nadpisem „Hodnoty na program“ klikněte a najděte seznam programů.
- Clicking on a program will show the different parameters to configure. The number of parameters depends on the program type (with or without registration). 

**Nastavení programu bez registrace**

![](resources/images/capture-app-program-specific-dialog-without_registration.png){width=50%}

**Nastavení programu s registrací**

![](resources/images/capture-app-program-specific-dialog-with_registration.png){width=50%}

V případě, že byla uložena nějaká specifická nastavení, tabulka zobrazí souhrn s konkrétní konfigurací pro každý program a možnostmi, jak tato nastavení upravit nebo smazat.

![](resources/images/capture-app-program-specific-table.png){width=50%}

> **Caution**
>
> Using specific settings per program might have unexpected results in the number of TEIs downloaded and the total amount might exceed the one defined in the Global Settings. This is due to how the application download the TEIs from the server. The Android client will first download a max number of TEIs from the server based on the Organisation Units where the user has access and based on the lastUpdate field. Afterwards it will download a max number of TEIs from the specific programs. Therefore, if the TEIs downloaded from the Global setting (500 in the example above) have been updated more recently than any of the TEIs from a specific program (500 for Malaria case diagnosis, treatment and investigation) the Android client will end up downloading 1000 TEI.
> 
> This might look confusing at first, but once understood can be used to ensure a minimum (and maximum) number of TEIs for a specific program will be downloaded which can be very useful in specific implementations.
>
> Imagine an implementation where it must be ensured that the Android user has all the TEIs of a specific program in a server where the same user has access to other Organisation Units where other TEIs might be enrolled in another program. The program is called Community Care, and it has 17 TEIs which have been updated very long time ago. The administrator can ensure that the 17 TEIs will be downloaded by setting anything in Global Settings (if needed to reduce bandwidth a very low value should be set) and an at least 17 for the specific program as show in the image below:
>
> ![](resources/images/capture-app-program-specific-example-web.png){width=50%}
>
> When the initial synchronization is triggered the Android device will first download the last TEIs updated on the server (which according to our example do not belong to the specific program) and secondly up to 20 TEI from the specific program resulting in the following (notice all the TEIs for the program were downloaded):
>
> ![](resources/images/capture-app-program-specific-example-mobile1.png){width=33%}
>
> And by going to the settings it can be appreciated how the total number of TEIs is the expected 37, 20 from the Global Setting, and 17 from the program specific.
>
> ![](resources/images/capture-app-program-specific-example-mobile2.png){width=33%}
>

#### Resetovat všechny hodnoty { #capture_app_android_settings_webapp_synchronization_program_reset_all }

Kliknutím na *Resetovat všechny hodnoty* uživatel admin obnoví výchozí hodnoty nastavení sekce programu. Upozorňujeme, že v tomto případě to neznamená žádná specifická nastavení pro program.

To save any configuration, the admin user needs to click on the *Save* button (this button is disabled for the users who don't have 'ALL' or 'M_androidsettingsapp' authority)


### Soubor dat { #capture_app_android_settings_webapp_synchronization_data }

Tato část řídí parametry synchronizace agregovaných dat.

#### Globální nastavení { #capture_app_android_settings_webapp_synchronization_data_global }

The first part is for global settings that apply to all data sets an Android user has access to. 

![](resources/images/capture-app-dataset-global-settings.png){width=50%}

The maximum number of periods defines the amount of past periods the app will download in the data synchronization process.

If a data set has future periods ("open future periods" configuration) the app won't take them into consideration in the restriction of the amounts of periods to download.

For example, in a data set with "open future periods" = 2 and a "maximum number of periods to download" = 1, the app will download 3 periods.

#### Specifická nastavení { #capture_app_android_settings_webapp_synchronization_data_specific }

Přidání konkrétního nastavení:

- Click on *Add a Data set specific setting*, a dialog with a list of data sets will appear. 
- Klikněte na datovou sadu a toto pole se automaticky doplní výchozí hodnotou podle typu období datové sady.

![](resources/images/capture-app-dataset-specific-dialog.png){width=50%}

![](resources/images/capture-app-dataset-specific-table.png){width=50%}


### Uživatelský test synchronizace { #capture_app_android_settings_webapp_synchronization_user_sync_test }

This section checks the amount of data and metadata a user would sync to his/her device. You can run this test on any user that you have access to. This test shows up the number of organisation units, data sets, program rules, programs, etc., that an android user has access to (so the resources that the android app will download), and the metadata and data download size (approx estimation). Please note that a user doesn't need to have the 'ALL' or 'M_androidsettingsapp' authority to run this test.

![](resources/images/capture-app-user-sync-test.png){width=50%}

> **Note:** 
>
> The values that are highlighted in red are because the value is considered greater than the maximum recommended value.


## Vzhled { #capture_app_android_settings_webapp_appearance }

Tato nastavení poskytují kontrolu nad vzhledem formulářů pro zadávání dat a seznamů.

- Filtr: definuje filtry, které lze povolit v různých nabídkách aplikace.
- Kolektor dokončení: zapíná/vypíná číselník dokončení, který ukazuje průběh ve formuláři pro zadávání dat.

These settings refer to visual components, so they must be consumed by the app.
For more information about filters feel free to review filters [documentation](https://docs.dhis2.org/en/use/android-app/android-specific-features.html#capture_app_generic_filter). 

### Domovská obrazovka { #capture_app_android_settings_webapp_appearance_home_screen }

Umožňuje administrátorovi povolit nebo zakázat možnost zobrazení filtrů souvisejících s Datum, Organizační jednotka, Stav synchronizace a Přiřazeno mi na domovské obrazovce.

![](resources/images/capture-app-appearance-home.png){width=75%}


### Program { #capture_app_android_settings_webapp_appearance_program }

Program appearance allows to hide/show features within the program according to the configuration needs. These changes can happen globally, applying to ALL the programs, or specifically to a single one.

#### Globální nastavení { #capture_app_android_settings_webapp_appearance_program_global }

Globální nastavení platí pro všechny programy, ke kterým má uživatel systému Android přístup.

![](resources/images/capture-app-appearance-program-global.png){width=75%}

Percentage (%) complete in Program: 
Enable or disable the option to show the completion percentage of the data entry form.

TEI referrals (**New 2.3.1**):  
It allows to switch off/on the TEI referral option.

Collapse sections in form (**New 2.3.1**):  
Current behavior lets the sections collapse and expand in an accordion style. This option overrides the behavior by keeping all the sections of the form (registration and events) open and removing the "next" button in each section. 


#### Konkrétní nastavení { #capture_app_android_settings_webapp_appearance_program_specific }

This section allows the admin user to customize features such as filter, completion percentage, mandatory search, referrals, TEI headers, referral options and collapse sections in form. Each explained in the section below.

Přidání konkrétního nastavení:

- Click on *Add a Program Settings*, and a dialog will appear.
- Klikněte na rozevírací seznam, který zobrazí seznam programů.
- Kliknutím na program se zobrazí různé filtry ke konfiguraci. Kombinovaný filtr kategorií závisí na názvu kombinace kategorií.

![](resources/images/capture-app-appearance-program-specific.png){width=75%}

![](resources/images/capture-app-appearance-program-specific-advanced.png){width=75%}

TEI without searching:
Offer online and offline search, as well as allow the user to create a TEI without a prior search.

TEI Header (**New 2.3.1**):
Assign a specific attribute or expression that will be displayed as a header in TEI cards. 

To add a TEI Header:

- Select a Program Indicator
- An expression related to the program indicator will be displayed

![](resources/images/capture-app-appearance-program-specific-tei-header.png)


> **Note:**
>
> A notice box will be displayed if the selected program lacks expressions related to program indicators that are valid for Android. 
> 
> An expression is considered valid for Android only if it is composed exclusively of attributes and/or functions.
> 
> ![](resources/images/capture-app-appearance-program-specific-expression-valid.png)
> 
> ![](resources/images/capture-app-appearance-program-specific-expression-invalid.png)
> 


If any specific settings have been saved, a table will summarize the particular configuration per program, and the options to edit or delete these settings. 

![](resources/images/capture-app-appearance-program-table.png)

The option "Show percentage (%) complete in Program toolbar" refers to: 
![](resources/images/capture-app-appearance-programs-spinner.png){width=50%}

**Vyhledat trasovanou entitu (novinka 2.2)**

Searching before entering a new TEI is mandatory to avoid possible duplicates, and the DHIS2 Android App has been designed as such. This new version gives the possibility to choose to keep this process or allow the user to create a TEI without searching first.
By default, allowing the user to create a TEI without searching is disabled.



### Soubor dat { #capture_app_android_settings_webapp_appearance_data }

Umožňuje správcům povolit / zakázat filtry pro sekci Soubor dat

#### Globální nastavení { #capture_app_android_settings_webapp_appearance_data_global }

První část je pro globální nastavení, které platí pro všechny datové sady, ke kterým má uživatel Androidu přístup.

![](resources/images/capture-app-appearance-dataset-global.png){width=75%}

#### Konkrétní nastavení { #capture_app_android_settings_webapp_appearance_data_specific }

Přidání konkrétního nastavení:

- Click on *Add a Data set Settings*. A dialog box will pop up with a dropdown with a list of data sets.
- Klikněte na soubor dat a zobrazí se seznam možností povolení nebo zakázání filtrů.

![](resources/images/capture-app-appearance-dataset-specific.png){width=75%}

![](resources/images/capture-app-appearance-dataset-table.png){width=75%}


## Analytika { #capture_app_android_settings_webapp_analytics }

Analytics settings define TEI, Home, Program and Data Set analytics items (charts, tables) that will be displayed to the user. Any item defined in the settings app will overwrite the default behaviour of the android app, only showing the items defined in the settings app. 

I když jsou tyto analýzy vytvářeny pomocí webové aplikace nastavení systému Android, agregace dat probíhá offline pouze pomocí dat uložených v zařízení.

### TEI { #capture_app_android_settings_webapp_analytics_tei }

Rozsah analýzy je TEI, takže vizualizace se zobrazí na ovládacímu panelu TEI aplikace pro Android.

The purpose of this section is to define visualizations to show evolution of *data elements* and *program indicators* over time. Based on that, it will only take into consideration data elements that belongs to a repeatable program stage, or program indicators which formula contains at least one data element that belongs to a repeatable program stage.

Chcete-li vytvořit položku **TEI Analytika**:

1. Click on *Add TEI Analytics*. A dialog box will pop up with a small form.
2. Vyberte program a opakovatelnou fázi programu a vyplňte formulář. **Krátký název** je jediné nepovinné pole.
3. Pokud byla vybrána jiná vizualizace položky než Výživa WHO, další pole k výběru jsou typ období (měsíční, týdenní, denní), typ prvku (indikátor programu, datový prvek) a prvek, který bude založen na prvku dříve vybraný typ. Pamatujte, že tyto prvky souvisí s programem a opakovatelnou fází programu zvolenou na začátku.

![](resources/images/capture-app-analytics-item.png)

Chcete-li vytvořit položku **WHO Nutrition Analytics**:

1. Vyberte program, fázi programu a výživu WHO jako typ vizualizace.
2. Vyberte typ vizualizace WHO, kterým může být výška k věku (HFA), hmotnost k věku (WFA) nebo hmotnost k výšce (WFH).
3. Vyberte atribut trasované entity, který představuje pohlaví. Poté musíte zadat volbu pro Muž 'Mužský nadpis' a volbu pro Žena 'Ženský nadpis'. Normálně to budou kódy možností.
4. Vyberte datový prvek/indikátor programu, který se zobrazí na vodorovné (x) ose
5. Vyberte datový prvek/indikátor programu, který se zobrazí ve vertikální (y) ose


![](resources/images/capture-app-analytics-who-item.png)

Pokud byla vytvořena jakákoli položka TEI Analytics, tabulka zobrazí název položky a název programu a akční tlačítka pro odstranění nebo úpravu této položky.

![](resources/images/capture-app-analytics-table.png)

### Home { #capture_app_android_settings_webapp_analytics_home }

Vizualizace domova se zobrazují na domovské obrazovce (karta Analytics) aplikace pro Android.

Všechny dostupné položky se nejprve vytvoří v aplikaci Data Visualizer v DHIS2 a nakonfigurují se v aplikaci nastavení systému Android.

Chcete-li vytvořit položku **Domů**:

1. Klikněte na "Přidat vizualizaci domova"
2. Klikněte na vyhledávací pole a vyberte vizualizaci ze seznamu nebo zadejte název položky vizualizace.
3. Přidejte alternativní název, jinak aplikace zobrazí název vizualizace
4. Ve výchozím nastavení aplikace povolí nastavení skupinové vizualizace.
   1. Create a new group: A free text box will pop up to type the name or
   2. Vyberte vytvořenou vizualizaci skupiny: Vyberte možnost ze seznamu pro přidání vizualizace nebo
   3. Zakažte vizualizaci skupiny kliknutím na zaškrtávací políčko.
5. Klikněte na tlačítko "Uložit".

![](resources/images/capture-app-analytics-home-newGroup.png)

![](resources/images/capture-app-analytics-home-createdGroup.png)

> **Note:**
>
> Visualizations that are added with no group selected, will be displayed in a common "group"
>
> ![](resources/images/capture-app-analytics-default-group.png)
>

To edit the title of a **Home** item (**New 2.2.1**):

1. Vyhledejte položku rozbalením skupin.
2. Click the "Edit" button next to the item's name.
3. A pop-up with only the visualization title available will be available, the other fields will be disabled. If wanted change the visualization title.
4. Klikněte na tlačítko "Uložit".

![](resources/images/capture-app-analytics-home-editVisualization.png)


Odebrání položky **Domů**:

1. Vyhledejte položku rozbalením skupin
2. Klikněte na tlačítko "Smazat" vedle názvu položky
3. Klikněte na "Smazat"
4. Klikněte na tlačítko "Uložit".

![](resources/images/capture-app-analytics-home-deleteVisualization.png)

Odebrání skupiny **Domů**:

1. Vyhledejte konkrétní skupinu, kterou chcete odstranit
2. Klikněte na "Odstranit skupinu"
3. Klikněte na "Smazat"
4. Klikněte na tlačítko "Uložit".

Všechny položky přidružené k této skupině budou smazány

![](resources/images/capture-app-analytics-home-deleteGroup.png)

Chcete-li resetovat všechny hodnoty:

1. Klikněte na "Obnovit všechny hodnoty na výchozí"
2. Klikněte na tlačítko "Uložit".

### Program { #capture_app_android_settings_webapp_analytics_program }

Vizualizace programů se zobrazují na obrazovce vyhledávání (karta Analytika) v programech sledování nebo na obrazovce seznamu (karta Analytika) v programech událostí aplikace pro Android.

Všechny dostupné položky se nejprve vytvoří v aplikaci Data Visualizer v DHIS2 a nakonfigurují se v aplikaci nastavení systému Android.

Chcete-li vytvořit položku **Program**:

1. Klikněte na "Přidat vizualizaci programu"
2. Vyberte program
3. Klikněte na vyhledávací pole a vyberte vizualizaci ze seznamu nebo zadejte název položky vizualizace.
4. Přidejte alternativní název, jinak aplikace zobrazí název vizualizace
5. Ve výchozím nastavení aplikace povolí nastavení skupinové vizualizace.
   1. Create a new group: A free text box will pop up to type the name or
   2. Vyberte vytvořenou vizualizaci skupiny: Vyberte možnost ze seznamu pro přidání vizualizace nebo
   3. Zakažte vizualizaci skupiny kliknutím na zaškrtávací políčko.
6. Klikněte na tlačítko "Uložit".

![](resources/images/capture-app-analytics-program-add.png)

To edit the title of a **Program** item (**New 2.2.1**):

1. Vyhledejte položku rozbalením skupin.
2. Click the "Edit" button next to the item's name.
3. A pop-up with only the visualization title available will be available, the other fields will be disabled. If wanted change the visualization title.
4. Klikněte na tlačítko "Uložit".

![](resources/images/capture-app-analytics-program-editVisualization.png)

Odebrání položky **program**:

1. Vyhledejte položku rozbalením programu a skupiny
2. Klikněte na tlačítko "Smazat" vedle názvu položky
3. Klikněte na "Smazat"
4. Klikněte na tlačítko "Uložit".

![](resources/images/capture-app-analytics-program-deleteVisualization.png)

Chcete-li odebrat skupinu **program**:

1. Vyhledejte v příslušném programu konkrétní skupinu, kterou chcete odstranit
2. Klikněte na "Odstranit skupinu"
3. Klikněte na "Smazat"
4. Klikněte na tlačítko "Uložit".

Všechny položky přidružené k této skupině budou smazány

![](resources/images/capture-app-analytics-program-deleteGroup.png)

Chcete-li resetovat všechny hodnoty:

1. Klikněte na "Obnovit všechny hodnoty na výchozí"
2. Klikněte na tlačítko "Uložit".

### Data Set { #capture_app_android_settings_webapp_analytics_data }

Vizualizace datové sady se zobrazují na obrazovce se seznamem (karta Analytics) v sadě dat aplikace pro Android.

Všechny dostupné položky se nejprve vytvoří v aplikaci Data Visualizer v DHIS2 a nakonfigurují se v aplikaci nastavení systému Android.

Chcete-li vytvořit položku **Datová sada**:

1. Klikněte na „Přidat vizualizaci datové sady“
2. Vyberte datovou sadu
3. Klikněte na vyhledávací pole a vyberte vizualizaci ze seznamu nebo zadejte název položky vizualizace.
4. Přidejte alternativní název, jinak aplikace zobrazí název vizualizace
5. Ve výchozím nastavení aplikace povolí nastavení skupinové vizualizace.
   1. Create a new group: A free text box will pop up to type the name or
   2. Vyberte vytvořenou vizualizaci skupiny: Vyberte možnost ze seznamu pro přidání vizualizace nebo
   3. Zakažte vizualizaci skupiny kliknutím na zaškrtávací políčko.
6. Klikněte na tlačítko "Uložit".

![](resources/images/capture-app-analytics-dataset-add.png)

To edit the title of a **Data set** item (**New 2.2.1**):

1. Vyhledejte položku rozbalením skupin.
2. Click the "Edit" button next to the item's name.
3. A pop-up with only the visualization title available will be available, the other fields will be disabled. If wanted change the visualization title.
4. Klikněte na tlačítko "Uložit".

![](resources/images/capture-app-analytics-dataset-editVisualization.png)

Odebrání položky **Datová sada**:

1. Vyhledejte položku rozbalením souboru dat a skupiny
2. Klikněte na tlačítko "Smazat" vedle názvu položky
3. Klikněte na "Smazat"
4. Klikněte na tlačítko "Uložit".

![](resources/images/capture-app-analytics-dataset-deleteVisualization.png)

Odebrání skupiny **Soubor dat**:

1. Vyhledejte konkrétní skupinu, kterou chcete odstranit, v odpovídající sadě dat
2. Klikněte na "Odstranit skupinu"
3. Klikněte na "Smazat"
4. Klikněte na tlačítko "Uložit".

Všechny položky přidružené k této skupině budou smazány

![](resources/images/capture-app-analytics-dataset-deleteGroup.png)

Chcete-li resetovat všechny hodnoty:

1. Klikněte na "Obnovit všechny hodnoty na výchozí"
2. Klikněte na tlačítko "Uložit".

### Visualization user test { #capture_app_android_settings_webapp_analytics_visualization_user_test }

Uživatelský test vizualizace je funkce dostupná v nastavení Home, Program a Data Set Analytic, která pomáhá administrátorovi určit, zda nějaký konkrétní uživatel uvidí vizualizaci.

Aplikace nastavení systému Android zkontroluje alespoň jedno z těchto tří oprávnění:

1. Vizualizace je veřejná
2. Uživatel má k vizualizaci individuální přístup
3. Uživatel je ve skupině, která má přístup k vizualizaci

Chcete-li spustit test:

1. Vyberte uživatele ze seznamu
2. Klikněte na "Spustit test"

![](resources/images/capture-app-analytics-usertest-access.png)

![](resources/images/capture-app-analytics-usertest-access-visualization.png)

![](resources/images/capture-app-analytics-usertest-noaccess.png)

![](resources/images/capture-app-analytics-usertest-noaccess-visualization.png)

### Analytics Limitations { #capture_app_android_settings_analytics_limitations }

Vzhledem k tomu, že zobrazené agregace a výpočty jsou počítány v zařízení, je implementace analytiky ve srovnání s webem omezená. V souhrnu jsou kompatibilní a podporované objekty a funkce:

- Dobře tvarované analytické objekty (řady, kategorie, filtry)
- Use of relative periods (Fix periods are not supported)
- Uživatel má přístup k prohlížení
- Omezení pro kontingenční tabulky
  - Number of header lines: 1 or 2 (*New 2.3*)
  - Počet sloupců záhlaví: 2
- Omezení pro grafy
  - Počet sérií: Bez omezení (ale nezapomeňte, že vykreslujete na malé obrazovce)
  - Počet kategorií (neplatí pro výsečový graf): Bez omezení

Na Android Analytics se vztahuje mnohem více omezení týkajících se mnoha možností konfigurace dostupných ve Web Visualizer a také podporovaných funkcí a výpočtů souvisejících s indikátory a indikátory programu. [Tato tabulka](https://docs.google.com/spreadsheets/d/1127cz7M0K4fux5CU0V54V2Z77NZWCr0BTrZ6jcCec4Q) shrnuje všechny podporované funkce.

> **Note (New 2.2.1)**
>
> When searching for a visualization to add as part of the Analytics visualizations, all visualizations will be listed, but visualizations that don't meet the above restrictions will be disabled. 
>
> ![](resources/images/capture-app-analytics-visualization-search.png)
>


## Instalace { #capture_app_android_settings_webapp_installation }

Uživatel si může snadno nainstalovat webovou aplikaci pro nastavení systému Android, když se přihlásí k serveru DHIS2 a přejde do části **Správa aplikací**.

- Klikněte na **App Hub**
- Go to *Android Settings App*
- Click on *Install V2.X.X*

![](resources/images/capture-app-app-hub-install.png)
![](resources/images/capture-app-app-hub-install-webapp.png)


## Přihlaste se a poprvé nastavte { #capture_app_android_settings_webapp_login }

After a user installs and launches the Android Settings Web App for the first time, the web app will require setting and saving the default values of the configuration. This will apply default settings to all android devices connected to the instance. 

![](resources/images/capture-app-first-time-setup.png){width=50%}

> **Upozornění**
>
> Uvědomte si, že předchozí verze jsou zastaralé, takže začnete s novou výchozí konfigurací.

![](resources/images/capture-app-first-setup-with-deprecation-message.png){width=50%}

> **Warning (New 2.3)** 
>
> When using DHIS2 version equal to or higher to 2.40, only users with "M_androidsettingsapp" or "ALL" authority can *save or update* the configuration, but any user will have *view* access once it is created.
> 


![](resources/images/capture-app-first-setup-no-authorities.png){width=50%}


## Zadejte a uložte konfigurační parametry { #capture_app_android_settings_webapp_enter_and_save }

### Datové úložiště { #capture_app_android_settings_webapp_datastore }

Internally all settings are stored in [Datastore](https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-240/data-store.html) in JSON format.

Struktura datového úložiště:

| Položka      | Popis                                 | Datový typ |
|-----------|---------------------------------------------|-----------|
| Jmenný prostor | Jmenný prostor pro organizaci záznamů       | Řetězec    |
| Klíč       | Klíč pro identifikaci hodnot            | Řetězec    |
| Hodnota     | Hodnota obsahující informace pro záznam | JSON      |

### Uložte konfigurační parametry { #capture_app_android_settings_webapp_save_config }

At the form footer of all settings sections, admin users can find a *Save* button.

![](resources/images/capture-app-save_button.png)

Only when an admin user clicks on this button, all changes made on the current section are saved on the Datastore. These changes will apply to the Android Capture App when they synchronize their configuration.

Unsaved changes
:   In case an admin user wants to go to another section when there are still some unsaved changes, an alert will be displayed before navigating away from the current section. In case the user accepts leaving the page, the unsaved changes will be lost.

![](resources/images/capture-app-unsaved-changes.png)

#### Obnovte všechny hodnoty na výchozí { #capture_app_android_settings_webapp_reset_all }

An admin user can restore the settings at any time. There is a *Reset all values to default* button at the form footer of all settings sections. 

![](resources/images/capture-app-reset-default.png)

Výchozí hodnoty budou obnoveny pouze na Datastore a použity po kliknutí na *Uložit*.


## Uninstall the app { #capture_app_android_settings_webapp_uninstall_app }

In case of needing to uninstall the Android Settings App it is recommended to also delete all the data from the reserved datastore namespace.

#### Delete data { #capture_app_android_settings_webapp_delete_data }

- Go to *General* section
- Click on *Disable all settings*
- A modal will pop up, click on *Disable*

![](resources/images/capture-app-unistall-delete-namespace.png)

![](resources/images/capture-app-unistall-delete-namespace-modal.png)

#### Uninstall app { #capture_app_android_settings_webapp_uninstall_app }

- Go to **App Management**
- Click on **Custom Apps**
- Go to *Android Settings App*
- Click on *Uninstall V2.X.X*

![](resources/images/capture-app-unistall-custom-app.png)

![](resources/images/capture-app-unistall-aswa.png)

> **Warning**
>
> This is a critical action, be aware that by doing this, all previous configurations will be permanently deleted.   


# Use Case Configuration Web App { #capture_app_use_case_configuration_webapp }
## Overview { #capture_app_use_case_configuration_webapp_overview }

This section focuses on the [Use Case Configuration Web App](https://apps.dhis2.org/app/7df6f344-0487-469c-abe6-53c6e729abcf) implementation.


The [Use Case Configuration Web App](https://apps.dhis2.org/app/7df6f344-0487-469c-abe6-53c6e729abcf) will connect the components of use cases, like Pharmacy stock management (LMIS), such as the Tracker Program and Data elements, to the Android Capture App. This app ensures configuration flexibility and avoids hard coding various metadata in the actual mobile application.

Based on the configuration, any program of the DHIS2 server can be set as a stock management system or any other use case.

Please note that in this version of the Web App, only users with "ALL" authority are able to define the configuration. Other users will not have access to the web app or see the configuration.

> **Warning**
>
> Be aware that the app can only be used in instances using the 2.39.1 DHIS2 API version onward.
> 
> ![](resources/images/capture-app-use-case-configure-api-no-access.png)
>


## Installation { #capture_app_use_case_configuration_webapp_installation }

A user can easily install the Use Case Configuration Web App by logging into the DHIS2 and going to **App Management**.

- Klikněte na **App Hub**
- Go to *Use Case Configuration App*
- Click on *Install V1.X.X*

![](resources/images/capture-app-use-case-configure-app-hub-install.png)
![](resources/images/capture-app-use-case-configure-app-hub-install-webapp.png)


## Log in and first time setup { #capture_app_use_case_configuration_webapp_login }

After a user installs and launches the Use Case Configuration Web App for the first time, the web app will require saving the default values of the configuration. This will allow android devices connect to the instance.


![](resources/images/capture-app-use-case-configure-first-setup.png){width=50%}

> **Warning**
>
> Only users with 'ALL' authority are able to *save or update* the configuration, users with no authority will not have view access to the app even if it is already created.
>


![](resources/images/capture-app-use-case-configure-no-authorities.png)


## Configure Program { #capture_app_use_case_configuraton_webapp_configure }

It allows admin users to configure programs to use the stock management system use case.

![](resources/images/capture-app-use-case-configure.png)

### Create configuration { #create-configuration } 

The DHIS2 Use Case Configuration App assigns the use case, like Real Time Stock Management, to any Tracker Program.
When the user opens the application in the Android Capture app the DHIS2 RTS is started instead of a conventional Tracker Program.

To create a **Program Configuration**:

1. Select a program type, a program, and add a description.
2. Click on *Next* button or *Details* tab.

![](resources/images/capture-app-use-case-configure-program-general.png)

3. Select the tracked entity attributes and data elements that represent Item code, Item Description and Stock on Hand. You have then to click on *Next* button or *Transactions* Tab.

![](resources/images/capture-app-use-case-configure-program-details.png)

4. Choose the data element/tracked entity attribute that will represent the Distributed Transaction.
5. Choose the data element/tracked entity attribute that will represent the Corrected Transaction.
6. Choose the data element/tracked entity attribute that will represent the Discarded Transaction.
7. Click on the "Done" button.

![](resources/images/capture-app-use-case-configure-program-transactions.png)


> **Note:**
>
> When all the valid programs are already configured, the Add Program button will be disabled.
>
> ![](resources/images/capture-app-use-case-configure-unavailable-program.png)
>
> The compatible and supported programs for a RTSM use case are:
> - Tracker program with one repeatable program stage.
> - Program rules to provide the real time stock on hand update.
> - Data elements and Tracker Entity Attributes assign to program and program stage.
>

The following is a comprehensive list of the main metadata configurations and settings for the Tracker
Program on which the customized DHIS2-RTS is based on.

| CATEGORY                 | SYSTEM DEFAULT SETTINGS                                                                                                                                                                                                                                                                                                                                                                                               |
|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Organizační jednotka        | According to national protocols and policies and/or existing DHIS2 configuration                                                                                                                                                                                                                                                                                                                                      |
| Datový prvek             | Name: <br/>- "Deliver to": Text / Option set = "Deliver to" <br/>- "Previous stock balance": Positive integer <br/>- "Stock correction": Number <br/>- "Stock count": Positive integer <br/>- "Stock discard": Positive integer <br/>- "Stock distribution": Positive integer <br/>- "Stock on hand": Positive integer <br/>- "Stock received": Positive integer <br/>Domain type: Tracker <br/>Value type: see above |
| Sada možností               | Name: "Deliver to" <br/>Value type: Text                                                                                                                                                                                                                                                                                                                                                                              |
| Atribut trasované entity | Name: <br/>- "Item barcode" <br/>- "Item code" <br/>- "Item description" <br/>"Value type": Text <br/>"Aggregation type": None                                                                                                                                                                                                                                                                                        |
| Typ trasované entity      | Name: Item <br/>"Feature type": None                                                                                                                                                                                                                                                                                                                                                                                  |
| Program                  | Type: Tracker <br/>Tracked entity type: Item <br/>Program tracked entity attributes: <br/>- Item barcode <br/>- Item code <br/>- Item description <br/>Program stages: <br/>Name: "Stock on Hand" <br/>Scheduled days from start: 0 <br/>Repeatable                                                                                                                                                                   |
| Pravidlo programu             | *Name*: "Assign Stock correction" <br/>Condition: "d2:hasValue( #{Stock count} )” <br/>Action: "Assign value"  <br/>*Name*: "Assign Stock on Hand" <br/>Condition: "true" <br/>Action: "Assign value"  <br/>*Name*: "Assign previous stock balance" <br/>Condition: "d2:hasValue( #{Initial stock on hand - Previous event} )" <br/>Action: "Assign value"                                                            |

More information related to DHIS2 for logistic in the [user guide](https://drive.google.com/file/d/1x6HoG75zMPCA823mdY87rb9hEJqxUz22/view).

### Edit configuration { #edit-configuration } 

To edit a **Program Configuration**:

1. Search for the program configuration to edit.
2. Click the "Edit" button next to the program's name.
3. A pop-up with only the description field in the General tab will be available, the other fields will be disabled. If wanted, change the visualization title.
4. All fields in Details and Transactions tabs will be available to edit if needed.
5. Click on the "Done" button.

![](resources/images/capture-app-use-case-configure-edit-general.png)

![](resources/images/capture-app-use-case-configure-edit-details.png)


### Delete configuration { #delete-configuration } 

To remove a **Program Configuration**:

1. Search for the program configuration to delete.
2. Click on "Delete".
3. Click on the "Delete" button.

![](resources/images/capture-app-use-case-configure-delete-program.png)


## Enter and save configuration parameters { #capture_app_use_case_configuration_webapp_enter_and_save }

### Datastore { #capture_app_use_case_configuration_webapp_datastore }

Internally all program configurations are stored in [Datastore](https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-240/data-store.html) in JSON format.

Struktura datového úložiště:

| Položka      | Popis                                 | Datový typ |
|-----------|---------------------------------------------|-----------|
| Jmenný prostor | Jmenný prostor pro organizaci záznamů       | Řetězec    |
| Klíč       | Klíč pro identifikaci hodnot            | Řetězec    |
| Hodnota     | Hodnota obsahující informace pro záznam | JSON      |


### Save configuration parameters { #capture_app_use_case_configuration_webapp_save_config }

At the footer of the configuration section, admin users can find a *Save* button.

![](resources/images/capture-app-use-case-configure-save-button.png)

Only when an admin user clicks on this button, all changes made are saved on the Datastore. These changes will apply to the Android Capture Apps when they synchronize their configuration.


## Uninstall the app { #uninstall-the-app } 

In case of needing to uninstall the Use Case Configuration App it is recommended to also delete all the data from the datastore namespace.

#### Delete data { #delete-data } 

- Click on *Erase all settings*
- A modal will pop up, click on *Erase*

![](resources/images/capture-app-use-case-configure-unistall-delete-namespace.png)

![](resources/images/capture-app-use-case-configure-unistall-delete-namespace-modal.png)

#### Uninstall app { #uninstall-app } 

- Go to **App Management**
- Click on **Custom Apps**
- Go to *Use Case Configuration*
- Click on *Uninstall V1.X.X*

![](resources/images/capture-app-use-case-configure-unistall-custom-app.png)

![](resources/images/capture-app-use-case-configure-unistall-use-case.png)

> **Warning**
>
> This is a critical action, be aware that by doing this, all previous configurations will be permanently deleted.   



# APK Distribution Web App { #capture_app_apk_distribution_webapp }
## Overview { #capture_app_apk_distribution_webapp_overview }

This section focuses on the [APK Distribution Web App](https://apps.dhis2.org/app/dff273fc-909e-48af-b151-c4d7e9c8a12c) implementation.

The [APK Distribution Web App](https://apps.dhis2.org/app/dff273fc-909e-48af-b151-c4d7e9c8a12c) enables implementation administrators to manage and control the version of the Android app, making it easier to manage app updates and ensure compatibility with the DHIS2 system. 

Admins will be able to upload the desired version and users will get a prompt message to update when they are not in the last updated version.

Please note that in this version of the Web App, only users with "ALL" authority are able to define the Android app versions. Other users having access to the web app can see the version history list and download the latest version, but cannot edit them.

## Installation { #capture_app_apk_distribution_webapp_installation }

A user can easily install the Use Case Configuration Web App by logging into the DHIS2 and going to **App Management**.

- Klikněte na **App Hub**
- Go to *APK Distribution App*
- Click on *Install V1.X.X*

![](resources/images/capture-app-apk-distribution-app-hub-install.png)
![](resources/images/capture-app-apk-distribution-app-hub-install-webapp.png)


## Log in and first time setup { #capture_app_apk_distribution_webapp_webapp_login }

After a user installs and launches the APK Distribution Web App for the first time, the web app will require saving the default values of the configuration. This will allow android devices connect to the instance.


![](resources/images/capture-app-apk-distribution-first-setup.png){width=50%}

> **Warning**
>
> Only users with 'ALL' authority are able to *upload or delete* APK versions, but any user will have view access once it's created.
>


![](resources/images/capture-app-apk-distribution-no-authorities.png){width=50%}

## APK Versions { #capture_app_apk_distribution_webapp_versions }

The APK Distribution Web App allows the admin users to update or remove versions of the Android app.

![](resources/images/capture-app-apk-distribution.png)

### Upload version { #upload-version } 

Follow the steps below to upload an **Android app version**:

1. Click on *Upload new version* button.
2. Assign a version number.
3. Choose the minimum and/or recommend Android OS version.
4. Add a URL that contains the APK of the Android app.
5. Click on the "Create app version" button.


![](resources/images/capture-app-apk-distribution-upload.png)


> **Note:**
>
> App versions must follow semantic versioning. Read more about [semantic versions](https://docs.npmjs.com/about-semantic-versioning). 
>
> When uploading a new apk, make sure that the app version is higher than the current/latest version.
> 
> ![](resources/images/capture-app-apk-distribution-alert-version-higher.png)
> 
> To choose the minimum or recommended Android OS version for the app version, it is suggested to review the [Mobile Device Specification documentation](https://docs.dhis2.org/en/implement/android-implementation/mobile-device-specifications.html).
>


### Delete version { #delete-version } 

To remove an **Android App version**:

1. Search for the Android app version to delete.
2. Click on "Delete".
3. Click on the "Delete" button.

![](resources/images/capture-app-apk-distribution-upload-delete.png)


### Using mobile device { #using-mobile-device } 

This Web App can also be manipulated from a mobile device. To use it, open DHIS2 in the browser from a mobile or tablet device.

The mobile version allows the administrator user to **upload** and **download** app versions.

![](resources/images/capture-app-apk-distribution-upload-mobile.png)


When downloading a version, the APK will be stored in the device.

![](resources/images/capture-app-apk-distribution-version-list-mobile.png)


## Uninstall the app { #uninstall-the-app } 

In case of needing to uninstall the APK Distribution App it is recommended to also delete all the data from the datastore namespace.

#### Delete data { #delete-data } 

- Click on *Erase settings*
- A modal will pop up, click on *Erase*

![](resources/images/capture-app-apk-distribution-unistall-delete-namespace.png)

![](resources/images/capture-app-apk-distribution-unistall-delete-namespace-modal.png)

#### Uninstall app { #uninstall-app } 

- Go to **App Management**
- Click on **Custom Apps**
- Go to *APK Distribution*
- Click on *Uninstall V1.X.X*

![](resources/images/capture-app-apk-distribution-unistall-custom-app.png)

![](resources/images/capture-app-apk-distribution-unistall-apk.png)

> **Warning**
>
> This is a critical action, be aware that by doing this, all previous configurations will be permanently deleted.   
