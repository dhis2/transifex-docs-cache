---
edit_url: "https://github.com/dhis2/dhis2-android-docs/blob/main/content/capture-app/app-android-settings-configuration.md"
revision_date: '2024-05-28'
tags:
- Utilisation
---

# Android Settings WebApp { #capture_app_android_settings_webapp }
## Aperçu { #capture_app_android_settings_webapp_overview }

Cette section se focalise sur l'implémentation de [Android Settings Web App](https://apps.dhis2.org/app/a1bd6b5b-de8c-4998-8d34-56c18a139683).


[Android Settings Web App] (https://apps.dhis2.org/app/a1bd6b5b-de8c-4998-8d34-56c18a139683) permet aux administrateurs de configurer les paramètres de synchronisation de l'application Android de DHIS2, de crypter la base de données locale des appareils Android, de personnaliser l'aspect des programmes, des ensembles de données et de l'écran d'accueil, et d'ajouter des outils d'analyse des TEI. Les paramètres de configuration définis dans cette application Web écraseront les paramètres de tous les appareils Android utilisant l'application de Saisie Android de DHIS2.

Please note that in this version of the Web App (2.3), if the DHIS2 version is equal to or higher than 2.40, only users with "M_androidsettingsapp" or "ALL" authority can define those parameters in the configuration. Other users accessing the web app can see the value of the parameters but cannot edit them.

> **Warning**
>
> If the DHIS2 version is not above 2.40, only users with 'ALL' authority can define those parameters in the configuration.
> 


## Paramètres généraux { #capture_app_android_settings_webapp_general }

Elles incluent des configurations telles que l'URL Matomo et l'identifiant du projet, le nombre de valeurs réservées à télécharger par TEI, et crypte la base de données de l'appareil.

![](resources/images/capture-app-general-settings.png)

### Configuration de Matomo { #capture_app_android_settings_webapp_general_matomo }

L'application Android de DHIS2 envoie des analyses anonymisées pouvant être utilisées pour évaluer les performances réalisées lors d'une étape précédente et/ou détecter les problèmes y afférant. [Matomo](https://matomo.org) est l'outil utilisé pour mener cette tâche et qui s'exécute sur un serveur spécifique non accessible au grand public. Cependant, les implémentations peuvent configurer leur propre instance Matomo (ou utiliser la version cloud) afin de collecter et d'analyser les statistiques.

Une fois que votre instance Matomo est prête, vous êtes sensés obtenir les URL et l'identifiant du projet tel qu'indiqué sur l'image ci-dessous (à gauche). L'identifiant peut être introduit directement mais l'URL doit être suivie de */matomo.php* et commencer par *https* ou *http* tel qu'indiqué ci-dessous (à droite).

![](resources/images/capture-app-matomo-instance.png){largeur=33%} ![](resources/images/capture-app-matomo-settings.png){largeur=33%}


### Configuration mobile { #capture_app_android_settings_webapp_generalmobile_configuration }
Cette section permet aux utilisateurs administrateurs de modifier la passerelle SMS et d'envoyer les résultats au numéro de téléphone de l'expéditeur. Cette configuration se trouve dans l'application Android.
- Cliquez sur Paramètres
- Cliquez sur Paramètres de SMS

![](resources/images/capture-app-sms-settings.png){largeur=33%}

### Valeurs réservées { #capture_app_android_settings_webapp_general_reserved_values }
Cette fonction permet de spécifier le nombre de valeurs par attribut de TEI réservées à télécharger sur les appareils. Par défaut, l'application Android réserve 100 identifiants, mais il est possible d'augmenter ou de réduire ce nombre.

Pour retrouver cette configuration dans l'application Android :
- Cliquez sur Paramètres
- Cliquez sur Valeurs réservées
- Pour les remplir à nouveau, cliquez sur *Gestion des valeurs réservées*.

![](resources/images/capture-app-reserved-values.png){largeur=33%} ![](resources/images/capture-app-reserved-values-refill.png){largeur=33%}

### Encrypt device database { #capture_app_android_settings_webapp_general_encrypt_database }
Tous les appareils devront stocker la base de données cryptée, augmentant ainsi le niveau de sécurité contre les tentatives de vol de données.

Par défaut, la base de données de l'application Android de DHIS2 n'est pas cryptée, mais un administrateur peut vérifier la base de données *Crypter la base de données des appareils* pour crypter les métadonnées et les données stockées dans chaque appareil. Le cryptage de la base de données aura un impact sur le volume de la base de données ainsi que sur les performances (baisse du niveau de performance entre 10-15%) de l'application Android. Notez qu'au moment de la sélection ou  non de cette option, aucune donnée n'est perdue (même si celle-ci n'a pas été préalablement synchronisée avec le serveur)

> **Attention**
>
> Il s'agit là d'une action essentielle qui affectera la base de données locale de tous les appareils Android qui se synchronisent avec le serveur (elle n'affectera pas la base de données DHIS2 du serveur).
>
> Par défaut, la base de données de l'application Android n'est pas cryptée, mais un administrateur peut vérifier la base de données *Crypter la base de données des appareils* pour crypter les métadonnées et les données stockées dans chaque appareil. Le cryptage de la base de données aura un impact sur le volume de la base de données ainsi que sur les performances de l'application Android. Notez qu'au moment de la sélection ou non de cette option, aucune donnée n'est perdue (même si celle-ci n'a pas été préalablement synchronisée avec le serveur)

### Autoriser les captures d'écran { #capture_app_android_settings_webapp_general_screenshots }
Cette section permet de configurer la possibilité de faire des captures d'écran ou de partager l'écran à l'aide de l'application de Saisie Android (nécessaire à l'assistance à distance avec des applications telles que Teamviewer, Teams, etc.). Notez que par défaut, les captures d'écran sont désactivées.

> **Attention**
>
> Par défaut, l'application Android de DHIS2 désactive la possibilité de faire des captures d'écran (de même qu'à partir d'autres applications), en tenant compte des recommandations de sécurité et de confidentialité. Autoriser les captures d'écran peut être utile pour des fins d'assistance et/ou de partage en cas de similitude ou d'activités similaires, mais vous devez comprendre les implications de sécurité et de confidentialité de ce paramètre avant de l'activer.
>


### Ignorer la validation de la version DHIS2 (**Nouvelle version 2.4**) { #capture_app_android_settings_webapp_general_skip_version_validation }
Lors de la connexion aux instances DHIS2, l'application vérifie généralement la compatibilité avec les versions prises en charge. Cependant, dans certains cas, il peut être nécessaire ou utile de se connecter à des instances non prises en charge. Notez que par défaut, la validation stricte de la version est appliquée. Pour ignorer le processus de validation de la compatibilité avec la version DHIS2, cochez la case.

![](resources/images/capture-app-skip-version-validation.png)

> **Avertissement**
>
> Cette option n'est applicable que si vous utilisez l'application Saisie Android version 3.0 ou plus.
>


### Fonctions Opt-in (**v2.3.1**) { #capture_app_android_settings_webapp_general_optin_features }
Les fonctions "opt-in" sont des fonctionnalités ou des paramètres supplémentaires de l'application que l'utilisateur peut choisir d'activer en fonction de ses préférences. Contrairement aux paramètres par défaut, ces fonctions nécessitent un consentement explicite ou une action ("opt-in") pour être activées.
L'utilisation de ces fonctions permet à l'utilisateur de personnaliser son expérience en ajoutant des fonctionnalités supplémentaires à l'application. Gardez à l'esprit que ces fonctions peuvent être associées à des considérations spécifiques, et qu'il est donc recommandé de consulter toutes les informations associées avant de les activer.

Pour activer une fonction :

- Cliquez sur *Fonctions Opt-in*. 
- Une liste des paramètres 'opt-in' disponibles s'affiche.
- Cliquez sur la case à cocher de la fonction pour l'activer.

**Data entry Form (**New 2.4**):** The inputs for all value types have been redesigned in the Android Capture App with an improved selection mode and increased tappable areas and texts to offer a cleaner and more intuitive user experience. By default, the Android Capture App will display the new forms. Admin users can opt out of using the new version of forms by clicking the checkbox option.

![](resources/images/capture-app-optin-features.png)

### Disable all settings { #capture_app_android_settings_webapp_general_disable_settings }
En cliquant sur ce bouton, l'utilisateur supprimera tous les paramètres de configuration Android. De ce fait, aucune configuration ne sera appliquée à l'application Android (si tel est le cas, les paramètres de synchronisation appliqués sont ceux définis dans l'application de Saisie Android).


## Synchronisation { #capture_app_android_settings_webapp_synchronization }

Cette fonction propose des paramètres supplémentaires pour contrôler la synchronisation des métadonnées et/ou des données.


### Général{ #capture_app_android_settings_webapp_synchronization_global }

Synchronisation des métadonnées : les utilisateurs administrateurs peuvent définir la fréquence de synchronisation des métadonnées. Par exemple, synchronisation des métadonnées toutes les 24 heures.

Synchronisation des données : les utilisateurs administrateurs peuvent définir la fréquence de synchronisation des données. Par exemple, synchronisation des métadonnées toutes les 6 heures.

![](resources/images/capture-app-sync-global.png){largeur=50%}
![](resources/images/capture-app-sync-global-app.png){largeur=33%}


Utiliser le nouvel importateur du Tracker : les utilisateurs administrateurs peuvent définir le point d'extrémité de l'importateur du Tracker qui doit être utilisé

> **Warning**
>
> This option is only available if the Android Settings Webapp is used from version 2.38 DHIS2 API onwards.
>
> By default, if the DHIS2 API version is 2.38 or higher, the Android app will use the importer introduced in 2.37 */api/tracker* endpoint but an admin can deselect this option and the legacy tracker importer */api/trackedEntityInstances* will be used.
> 
> ![](resources/images/capture-app-sync-global-importer.png){width=50%}
>

Utiliser le nouvel exportateur du Tracker (**v2.3**) : les utilisateurs administrateurs peuvent définir le point d'extrémité de l'exportateur du Tracker qui doit être utilisé.

> **Warning**
>
> This option is only available if the Android Settings Webapp is used from version 2.40 DHIS2 API onwards. 
> 
> By default, if the DHIS2 API version is 2.40 or higher, the Android app will use the exporter introduced in the 2.37 */api/tracker* endpoint, but an admin can deselect this option, and the legacy tracker importer */api/trackedEntityInstances* will be used.
>
>
> ![](resources/images/capture-app-sync-global-exporter.png){width=50%}
>

Limit the file size to download (**v2.3**)
:   Admin users can limit the maximum size of the file resources downloaded in KB.

![](resources/images/capture-app-sync-download-file-size.png){largeur=33%}



### Programme { #capture_app_android_settings_webapp_synchronization_program }

Cette section contrôle les paramètres de synchronisation de données du programme. Il possède une section permettant de définir les paramètres généraux ou par défaut qui seront utilisés lors de la synchronisation de tous les programmes.

#### Paramètres généraux{ #capture_app_android_settings_webapp_synchronization_program_global }

Les paramètres généraux s'appliquent à tous les programmes auxquels les utilisateurs de l'application Android ont accès. Les paramètres peuvent être activés de façon générale, par unité d'organisation, par programme ou par unité d'organisation et programme.

![](resources/images/capture-app-program-global-settings.png){largeur=50%}

TEI à télécharger : Nombre maximum de TEI à télécharger depuis le serveur.

Période de téléchargement des TEI : télécharge les TEI qui ont été mises à jour au cours d'une période donnée. Par exemple, les TEI qui ont été mises à jour au cours du mois dernier.

Événement à télécharger : Nombre maximum d'Événements à télécharger (depuis les programmes d'événements, voir la note ci-dessous).

Période de téléchargement des événements : télécharge les événements dont la date fait partie d'une période spécifique.

> **Remarque**
>
> L'utilisateur peut se tromper sur la quantité de données téléchargées lors de la définition du nombre de TEI et du nombre d'événements. L'application Android téléchargera le nombre de TEI et tous leurs événements en fonction du nombre de TEI défini dans le champ. L'Application Android limitera le nombre d'Événements à télécharger uniquement pour les *programmes d'événements* (et non les *programmes de Tracker*) selon le champ.
>
> Par exemple, considérons un *Programme de Tracker* dans le serveur avec plusieurs étapes de programme et chaque TEI comporte 5 événements (inscriptions et étapes de programme). La valeur *TEI à télécharger* est définie sur 100. De même, sur le serveur, il existe un *programme d'événements* qui contient 1000 événements. La valeur \*Événement à télécharger* a été définie sur 200. L'application Android téléchargera les éléments suivants : 100 x 5 événements du programme de Tracker et 200 événements du programme d'événements. Par conséquent, l'application Android aura à télécharger 700 événements.
>


#### Paramètres spécifiques { #capture_app_android_settings_webapp_synchronization_program_specific }

Cette section permet aux utilisateurs administrateurs de spécifier le comportement d'un ou de plusieurs programmes particuliers lors de la synchronisation des données. La configuration spécifique écrase les paramètres généraux des programmes répertoriés dans cette section. Pour ajouter un paramètre à un programme spécifique :

- Cliquez sur *Ajouter un paramètre spécifique au programme*. Une boîte de dialogue apparaît.
- Cliquez sous le titre "Valeurs par programme" et vous aurez une liste de programmes.
- Lorsque vous cliquez sur un programme, les différents paramètres à configurer seront affichés. Le nombre de paramètres dépend du type de programme (avec ou sans enregistrement).

**Paramètres des programmes sans enregistrement**

![](resources/images/capture-app-program-specific-dialog-without_registration.png){largeur=50%}

**Paramètres des programmes avec des enregistrements**

![](resources/images/capture-app-program-specific-dialog-with_registration.png){largeur=50%}

Si des paramètres spécifiques ont été enregistrés, un tableau en présentera un résumé avec la configuration propre à chaque programme ainsi que les options pour modifier ou supprimer ces paramètres.

![](resources/images/capture-app-program-specific-table.png){largeur=50%}

> **Attention**
>
> L'utilisation de paramètres spécifiques par programme peut avoir des conséquences inattendues sur le nombre de TEI téléchargés et le nombre total peut dépasser celui défini dans les paramètres généraux. Cela est dû à la manière dont l'application télécharge les TEI à partir du serveur. Le client utilisant un appareil Android doit d'abord télécharger un nombre maximum de TEI à partir du serveur en fonction des unités d'organisation auxquelles l'utilisateur a accès et en fonction du champ de la dernière mise à jour. Ensuite, il doit télécharger un nombre maximum de TEI à partir des programmes spécifiques. Par conséquent, si les TEI téléchargés à partir des paramètres généraux (500 dans l'exemple ci-dessus) ont été mis à jour plus récemment que toute TEI d'un programme spécifique (500 pour l'analyse, le traitement des cas de paludisme et les enquêtes y afférant), le client aura à télécharger 1000 TEI.
>
> Cela peut sembler confus au début, mais une fois compris, vous verrez que cette fonction peut garantir qu'un nombre minimum (et maximum) de TEI soit téléchargé pour un programme spécifique, ce qui peut être très utile pour des implémentations spécifiques.
>
> Imaginez une implémentation où il faut s'assurer que l'utilisateur de l'application Android dispose de toutes les TEI d'un programme spécifique sur un serveur où le même utilisateur a accès à d'autres Unités d'Organisation dans lesquelles d'autres TEI pourraient être inscrites dans un autre programme. Le programme est dénommé Community Care et compte 17 TEI qui ont été mises à jour il y a très longtemps. L'administrateur peut s'assurer du téléchargement des 17 TEI en effectuant une configuration au niveau des paramètres généraux (si le but est de réduire la bande passante, une valeur très faible doit être définie) et d'au moins 17 pour le programme spécifique, tel qu'indiqué sur l'image ci-dessous :
>
> ![](resources/images/capture-app-program-specific-example-web.png){largeur=50%}
>
> Lorsque la première synchronisation est lancée, l'appareil Android va d'abord télécharger les dernières TEI mis à jour sur le serveur (qui selon notre exemple n'appartiennent pas au programme spécifique) et ensuite jusqu'à 20 TEI du programme spécifique résultant en ce qui suit (assurez-vous que toutes les TEI du programme aient été téléchargées) :
>
> ![](resources/images/capture-app-program-specific-example-mobile1.png){largeur=33%}
>
> Et en allant dans les paramètres, vous pouvez constater la présence des 37 TEI attendus, 20 du paramètre général et 17 du programme spécifique.
>
> ![](resources/images/capture-app-program-specific-example-mobile2.png){largeur=33%}
>

#### Réinitialiser toutes les valeurs { #capture_app_android_settings_webapp_synchronization_program_reset_all }

En cliquant sur *Réinitialiser toutes les valeurs*, l'utilisateur admin restaurera les valeurs des paramètres par défaut de la section du programme. Veuillez noter que dans ce cas, les paramètres spécifiques à chaque programme ne sont pas rétablis.

To save any configuration, the admin user needs to click on the *Save* button (this button is disabled for the users who don't have "ALL" or "M_androidsettingsapp" authority)


### Ensemble de données { #capture_app_android_settings_webapp_synchronization_data }

Cette section contrôle les paramètres de synchronisation des données agrégées.

#### Paramètres généraux{ #capture_app_android_settings_webapp_synchronization_data_global }

The first part is for global settings that apply to all data sets an Android user has access to. 

![](resources/images/capture-app-dataset-global-settings.png){largeur=50%}

Le nombre maximal de périodes définit le nombre de périodes passées que l'application va télécharger lors du processus de synchronisation des données.

Si un ensemble de données contient des périodes futures (configuration "périodes futures ouvertes"), l'application ne les prendra pas en compte dans la restriction des périodes à télécharger.

Par exemple, dans un ensemble de données avec "périodes futures ouvertes" = 2 et "nombre maximal de périodes à télécharger" = 1, l'application téléchargera 3 périodes.

#### Paramètres spécifiques { #capture_app_android_settings_webapp_synchronization_data_specific }

Pour ajouter un paramètre spécifique :

- Click on *Add a Data set specific setting*, a dialog with a list of data sets will appear. 
- Cliquez sur un ensemble de données pour compléter automatiquement ce champ avec la valeur par défaut en fonction du type de période de l'ensemble de données.

![](resources/images/capture-app-dataset-specific-dialog.png){largeur=50%}

![](resources/images/capture-app-dataset-specific-table.png){largeur=50%}


### Test de synchronisation de l'utilisateur { #capture_app_android_settings_webapp_synchronization_user_sync_test }

This section checks the amount of data and metadata a user would sync to his/her device. You can run this test on any user that you have access to. This test shows up the number of organisation units, data sets, program rules, programs, etc., that an android user has access to (so the resources that the android app will download), and the metadata and data download size (approx estimation). Please note that a user doesn't need to have the "ALL" or "M_androidsettingsapp" authority to run this test.

![](resources/images/capture-app-user-sync-test.png){largeur=50%}

> **Note:** 
>
> The values that are highlighted in red are because the value is considered greater than the maximum recommended value.


## Apparence { #capture_app_android_settings_webapp_appearance }

Ces paramètres permettent de contrôler l'aspect des formulaires de saisie de données et de listes.

- Filtre : il définit les filtres qui peuvent être activés dans les différents menus de l'application.
- Spinner d'achèvement : il active/désactive le spinner d'achèvement, lequel montre la progression des entrées de données dans les formulaires.

These settings refer to visual components, so they must be consumed by the app.
For more information about filters feel free to review filters [documentation](https://docs.dhis2.org/en/use/android-app/android-specific-features.html#capture_app_generic_filter). 

### Écran d'accueil { #capture_app_android_settings_webapp_appearance_home_screen }

Il permet à l'utilisateur administrateur d'activer ou de désactiver l'option d'affichage des filtres liés à la date, à l'unité d'organisation, à l'état de la synchronisation et à l'utilisateur lui-même, sur l'écran d'accueil.

![](resources/images/capture-app-appearance-home.png){largeur=75%}


### Programme { #capture_app_android_settings_webapp_appearance_program }

Program appearance allows to hide/show features within the program according to the configuration needs. These changes can happen globally, applying to ALL the programs, or specifically to a single one.

#### Paramètres généraux { #capture_app_android_settings_webapp_appearance_program_global }

Les paramètres généraux s'appliquent à tous les programmes auxquels un utilisateur de l'application Android a accès.

![](resources/images/capture-app-appearance-program-global.png){largeur=75%}

Percentage (%) complete in Program: 
Enable or disable the option to show the completion percentage of the data entry form.

TEI referrals (**v2.3.1**): 
It allows to switch off/on the TEI referral option.

Collapse sections in form (**v2.3.1**):  
Current behavior lets the sections collapse and expand in an accordion style. This option overrides the behavior by keeping all the sections of the form (registration and events) open and removing the "next" button in each section. 


#### Paramètres spécifiques { #capture_app_android_settings_webapp_appearance_program_specific }

This section allows the admin user to customize features such as filter, completion percentage, mandatory search, referrals, TEI headers, referral options and collapse sections in form. Each explained in the section below.

Pour ajouter un paramètre spécifique :

- Click on *Add a Program Settings*, and a dialog will appear.
- Cliquez sur le menu déroulant ; il affichera une liste de programmes.
- Lorsque vous cliquez sur un programme, les différents filtres à configurer seront affichés. Le filtre de la combinaison de catégorie dépend du nom de la combinaison de catégorie.

![](resources/images/capture-app-appearance-program-specific.png){largeur=75%}

![](resources/images/capture-app-appearance-program-specific-advanced.png){width=75%}

TEI without searching:
Offer online and offline search, as well as allow the user to create a TEI without a prior search.

TEI Header (**v2.3.1**):
Assign a specific attribute or expression that will be displayed as a header in TEI cards. 

To add a TEI Header:

- Select a Program Indicator
- An expression related to the program indicator will be displayed

![](resources/images/capture-app-appearance-program-specific-tei-header.png)


> **Note:**
>
> A notice box will be displayed if the selected program lacks expressions related to program indicators that are valid for Android. 
> 
> An expression is considered valid for Android only if it is composed exclusively of attributes and/or functions.
> 
> ![](resources/images/capture-app-appearance-program-specific-expression-valid.png)
> 
> ![](resources/images/capture-app-appearance-program-specific-expression-invalid.png)
> 


If any specific settings have been saved, a table will summarize the particular configuration per program, and the options to edit or delete these settings. 

![](resources/images/capture-app-appearance-program-table.png)

The option "Show percentage (%) complete in Program toolbar" refers to: 
![](resources/images/capture-app-appearance-programs-spinner.png){width=50%}

**Search Tracked Entity (v2.2)**

Searching before entering a new TEI is mandatory to avoid possible duplicates, and the DHIS2 Android App has been designed as such. This new version gives the possibility to choose to keep this process or allow the user to create a TEI without searching first.
By default, allowing the user to create a TEI without searching is disabled.



### Ensemble de données { #capture_app_android_settings_webapp_appearance_data }

Il permet aux administrateurs d'activer/désactiver les filtres pour la section Ensemble de données

#### Paramètres généraux{ #capture_app_android_settings_webapp_appearance_data_global }

La première partie concerne les paramètres généraux qui s'appliquent à tous les ensembles de données auxquels un utilisateur de l'application Android a accès.

![](resources/images/capture-app-appearance-dataset-global.png){largeur=75%}

#### Paramètres spécifiques { #capture_app_android_settings_webapp_appearance_data_specific }

Pour ajouter un paramètre spécifique :

- Click on *Add a Data set Settings*. A dialog box will pop up with a dropdown with a list of data sets.
- Cliquez sur un ensemble de données. Une liste d'options permettant d'activer ou de désactiver les filtres s'affichera.

![](resources/images/capture-app-appearance-dataset-specific.png){largeur=75%}

![](resources/images/capture-app-appearance-dataset-table.png){largeur=75%}


## Analyses { #capture_app_android_settings_webapp_analytics }

Analytics settings define TEI, Home, Program and Data Set analytics items (charts, tables) that will be displayed to the user. Any item defined in the settings app will overwrite the default behaviour of the android app, only showing the items defined in the settings app. 

De plus, même si ces analyses sont créées à l'aide de Android Settings Web App, l'agrégation des données se fait hors ligne, en n'utilisant que les données stockées dans l'appareil.

### TEI { #capture_app_android_settings_webapp_analytics_tei }

Le champ d'application de l'analyse est la TEI. Les visualisations seront donc visibles sur le tableau de bord TEI de l'application Android.

The purpose of this section is to define visualizations to show evolution of *data elements* and *program indicators* over time. Based on that, it will only take into consideration data elements that belongs to a repeatable program stage, or program indicators which formula contains at least one data element that belongs to a repeatable program stage.

Pour créer un élément d'**Analyses des TEI ** :

1. Click on *Add TEI Analytics*. A dialog box will pop up with a small form.
2. Choisissez un programme et une étape de programme répétable, puis remplissez le formulaire. **Nom abrégé** est le seul champ facultatif.
3. Si une visualisation d'élément autre que Nutrition OMS a été choisie, les prochains champs à sélectionner seront le type de période (mensuel, hebdomadaire, quotidien), un type d'élément (indicateur de programme, élément de données) et un élément qui sera basé sur le type d'élément précédemment sélectionné. Rappelez-vous que ces éléments sont liés au programme et à l'étape du programme répétable choisis au début.

![](resources/images/capture-app-analytics-item.png)

Pour créer un élément d'**Analyses de Nutrition OMS** :

1. Sélectionnez un programme, une étape de programme et Nutrition OMS comme type de visualisation.
2. Choisissez un type de visualisation OMS qui peut être la taille pour l'âge (HFA), le poids pour l'âge (WFA) ou le poids pour la taille (WFH).
3. Sélectionnez l'attribut d'entité suivie qui représente le genre. Vous devrez ensuite spécifier l'option Homme 'Titre masculin' et l'option Femme 'Titre féminin'. Normalement, il s'agira de codes d'option.
4. Choisissez l'élément de données/indicateur de programme qui sera affiché sur l'axe horizontal (x)
5. Choisissez l'élément de données/indicateur de programme qui sera affiché sur l'axe vertical (y)


![](resources/images/capture-app-analytics-who-item.png)

Si un élément d'Analyses de TEI a été créé, un tableau affichera le titre de l'élément et le nom du programme, ainsi que des boutons d'action permettant de supprimer ou de modifier cet élément.

![](resources/images/capture-app-analytics-table.png)

### Home { #capture_app_android_settings_webapp_analytics_home }

Les visualisations de l'Accueil sont affichées sur l'écran d'accueil (onglet Analyses) de l'application Android.

All items available are first created in the Data visualizer or Line Listing app in DHIS2 and configured in the Android Settings app.

> **Note:**
>
> Visualization items can be sourced either from the **Data Visualizer** or the **Line Listing** app. 
> 
> When choosing a visualization type, the items shown automatically change; if "Data Visualization" is selected, only visualizations created in the Data Visualization app will be displayed. 
> 
> When selecting "Event Visualization" (**New 2.4**), only elements created in the Line Listing app will appear in the Visualization search box.
>

Pour créer un élément de l'**Accueil** :

1. Click on "Add Home Visualization" Button.
2. Choose a "Visualization Type" (**New 2.4**)
3. Cliquez au niveau de la zone de recherche et sélectionnez la visualisation dans la liste ou entrez le nom de l'élément de visualisation.
4. Add an alternative title, otherwise, the app will display the name of the visualization.
5. Par défaut, l'application activera le paramètre de visualisation de groupe.
   1. Create a new group: A free text box will pop up to type the name or
   2. Sélectionner une visualisation de groupe déjà créée : choisissez une option dans la liste pour ajouter la visualisation ou
   3. Désactivez la visualisation de groupe en cliquant sur la case à cocher.
6. Cliquez sur le bouton "Enregistrer".

![](resources/images/capture-app-analytics-home-newGroup.png)

![](resources/images/capture-app-analytics-home-createdGroup.png)

> **Note:**
>
> Visualizations that are added with no group selected, will be displayed in a common "group"
>
> ![](resources/images/capture-app-analytics-default-group.png)
>

To edit the title of a **Home** item (**v2.2.1**):

1. Recherchez l'élément en développant les groupes.
2. Cliquez sur le bouton "Modifier" situé près du nom de l'élément.
3. Une fenêtre contextuelle avec seulement le titre de la visualisation sera disponible ; les autres champs seront désactivés. Vous pouvez modifier le titre de la visualisation.
4. Cliquez sur le bouton "Enregistrer".

![](resources/images/capture-app-analytics-home-editVisualization.png)


Pour supprimer un élément de l'**Accueil** :

1. Recherchez l'élément en développant les groupes.
2. Cliquez sur le bouton "Supprimer" situé près du nom de l'élément.
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Enregistrer"

![](resources/images/capture-app-analytics-home-deleteVisualization.png)

Pour supprimer un élément de l'**Accueil** :

1. Faites une recherche du groupe qui doit être supprimer
2. Cliquez sur "Supprimer le groupe"
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Enregistrer"

Tous les éléments associés à ce groupe seront supprimés

![](resources/images/capture-app-analytics-home-deleteGroup.png)

Pour réinitialiser toutes les valeurs :

1. Cliquez sur "Rétablir toutes les valeurs par défaut"
2. Cliquez sur le bouton "Enregistrer"

### Programme { #capture_app_android_settings_webapp_analytics_program }

Les visualisations de programme sont affichées sur l'écran de recherche (onglet Analyses) plus précisément dans les programmes de Tracker ou sur l'écran de listes (onglet Analyses) dans les programmes d'événements de l'application Android.

All items available are first created in the Data visualizer or Line Listing (**New 2.4**) app in DHIS2 and configured in the Android Settings app.

> **Note:**
>
> Visualization items can be sourced either from the **Data Visualizer** or the **Line Listing** app.
>
> When choosing a visualization type, the items shown automatically change; if "Data Visualization" is selected, only visualizations created in the Data Visualization app will be displayed.
>
> When selecting "Event Visualization" (**New 2.4**), only elements created in the Line Listing app will appear in the Visualization search box.
>
> ![](resources/images/capture-app-analytics-program-visualization-type.png)
> 

Pour créer un élément de **Programme** :

1. Click on "Add Program Visualization" Button.
2. Choose a Visualization Type (**New 2.4**).
3. Select a Program.
4. Cliquez au niveau de la zone de recherche et sélectionnez la visualisation dans la liste ou entrez le nom de l'élément de visualisation.
5. Ajouter un titre alternatif, sinon l'application affichera le nom de la visualisation.
6. Par défaut, l'application activera le paramètre de visualisation de groupe.
   1. Create a new group: A free text box will pop up to type the name or
   2. Sélectionner une visualisation de groupe déjà créée : choisissez une option dans la liste pour ajouter la visualisation ou
   3. Désactivez la visualisation de groupe en cliquant sur la case à cocher.
7. Cliquez sur le bouton "Enregistrer".

![](resources/images/capture-app-analytics-program-add.png)

To edit the title of a **Program** item (**v2.2.1**):

1. Recherchez l'élément en développant les groupes.
2. Cliquez sur le bouton "Modifier" situé près du nom de l'élément.
3. Une fenêtre contextuelle avec seulement le titre de la visualisation sera disponible ; les autres champs seront désactivés. Vous pouvez modifier le titre de la visualisation.
4. Cliquez sur le bouton "Enregistrer".

![](resources/images/capture-app-analytics-program-editVisualization.png)

Pour supprimer un élément de **Programme** :

1. Recherchez l'élément en développant les groupes.
2. Cliquez sur le bouton "Supprimer" situé près du nom de l'élément.
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Enregistrer"

![](resources/images/capture-app-analytics-program-deleteVisualization.png)

Pour supprimer un groupe de **Programmes** :

1. Rechercher le groupe qui doit être supprimer dans le programme correspondant
2. Cliquez sur "Supprimer le groupe"
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Enregistrer"

Tous les éléments associés à ce groupe seront supprimés

![](resources/images/capture-app-analytics-program-deleteGroup.png)

Pour réinitialiser toutes les valeurs :

1. Cliquez sur "Rétablir toutes les valeurs par défaut"
2. Cliquez sur le bouton "Enregistrer"

### Ensemble de données { #capture_app_android_settings_webapp_analytics_data }

Les visualisations des Ensembles de Données sont affichées sur l'écran d'accueil (onglet Analyses) de l'application Android.

Tous les éléments disponibles sont d'abord créés dans l'application Visualiseur de Données sur DHIS2 et configurés avec l'application de paramètres Android.

Pour créer un élément d'**Ensemble de données** :

1. Cliquez sur "Ajouter une Visualisation de l'Ensemble de Données"
2. Sélectionnez un ensemble de données
3. Cliquez au niveau de la zone de recherche et sélectionnez la visualisation dans la liste ou entrez le nom de l'élément de visualisation.
4. Ajouter un titre alternatif, sinon l'application affichera le nom de la visualisation.
5. Par défaut, l'application activera le paramètre de visualisation de groupe.
   1. Create a new group: A free text box will pop up to type the name or
   2. Sélectionner une visualisation de groupe déjà créée : choisissez une option dans la liste pour ajouter la visualisation ou
   3. Désactivez la visualisation de groupe en cliquant sur la case à cocher.
6. Cliquez sur le bouton "Enregistrer".

![](resources/images/capture-app-analytics-dataset-add.png)

To edit the title of a **Data set** item (**v2.2.1**):

1. Recherchez l'élément en développant les groupes.
2. Cliquez sur le bouton "Modifier" situé près du nom de l'élément.
3. Une fenêtre contextuelle avec seulement le titre de la visualisation sera disponible ; les autres champs seront désactivés. Vous pouvez modifier le titre de la visualisation.
4. Cliquez sur le bouton "Enregistrer".

![](resources/images/capture-app-analytics-dataset-editVisualization.png)

Pour supprimer un élément d'**Ensemble de Données** :

1. Recherchez l'élément en développant l'ensemble de données et le groupe
2. Cliquez sur le bouton "Supprimer" situé près du nom de l'élément.
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Enregistrer"

![](resources/images/capture-app-analytics-dataset-deleteVisualization.png)

Pour supprimer un groupe d'**Ensembles de Données** :

1. Rechercher le groupe qui doit être supprimer dans l'ensemble de données correspondant
2. Cliquez sur "Supprimer le groupe"
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Enregistrer"

Tous les éléments associés à ce groupe seront supprimés

![](resources/images/capture-app-analytics-dataset-deleteGroup.png)

Pour réinitialiser toutes les valeurs :

1. Cliquez sur "Rétablir toutes les valeurs par défaut"
2. Cliquez sur le bouton "Enregistrer"

### Visualization user test { #capture_app_android_settings_webapp_analytics_visualization_user_test }

Le test utilisateur de visualisation est une fonctionnalité disponible dans les paramètres d'Accueil, de Programme et d'Analyse d'Ensemble de Données. Elle permet à l'utilisateur administrateur de déterminer si un utilisateur particulier pourra voir la visualisation.

L'application des paramètres Android vérifie au moins l'une de ces trois autorisations :

1. La visualisation est accessible au public
2. L'utilisateur a un accès individuel à la visualisation
3. L'utilisateur fait partie d'un groupe qui a accès à la visualisation

Pour mener le test :

1. Sélectionnez l'utilisateur dans la liste
2. Cliquez sur "Mener le test"

![](resources/images/capture-app-analytics-usertest-access.png)

![](resources/images/capture-app-analytics-usertest-access-visualization.png)

![](resources/images/capture-app-analytics-usertest-noaccess.png)

![](resources/images/capture-app-analytics-usertest-noaccess-visualization.png)

### Analytics Limitations { #capture_app_android_settings_analytics_limitations }

Since the aggregations and calculations displayed are calculated in the device, the implementation of analytics is limited compared to web. 

In summary the compatible and supported objects and features for Data Visualizations are:

- Objets analytiques bien constitués (séries, catégories, filtres)
- Use of relative periods (Fix periods are not supported)
- L'utilisateur a un accès de visualisation
- Limites pour les tableaux croisés dynamiques
  - Number of header lines: 1 or 2 (*v2.3*)
  - Nombre de colonnes d'en-tête : 2
- Limites pour les graphiques
  - Nombre de séries : Aucune limite (mais n'oubliez pas que le rendu se fait sur un petit écran)
  - Nombre de catégories (ne s'applique pas aux graphiques circulaires) : Aucune limite

De nombreuses autres restrictions s'appliquent à Android Analytics en ce qui concerne les nombreuses options de configuration disponibles dans le visualiseur Web ainsi que les fonctions et les calculs pris en charge liés aux indicateurs et aux indicateurs de programme. [Ce tableau (https://docs.google.com/spreadsheets/d/1127cz7M0K4fux5CU0V54V2Z77NZWCr0BTrZ6jcCec4Q) résume toutes les fonctions prises en charge.

In the same way, Event visualizations are considered valid if:

- Visualization was created using Line Listing app
- Visualization type is Line List
- Use of relative periods
- Limitations for Table
  - Number of columns: 15


> **Note (v2.2.1)**
>
> When searching for a visualization to add as part of the Analytics visualizations, all visualizations will be listed, but visualizations that don't meet the above restrictions will be disabled. 
>
> ![](resources/images/capture-app-analytics-visualization-search.png)
>


## Installation { #capture_app_android_settings_webapp_installation }

Un utilisateur peut facilement installer Android Settings Web App en se connectant à DHIS2 et en accédant à **Gestion des applications**.

- Cliquez sur **App Hub**
- Go to *Android Settings App*
- Click on *Install V2.X.X*

![](resources/images/capture-app-app-hub-install.png)
![](resources/images/capture-app-app-hub-install-webapp.png)


## Connexion et première configuration { #capture_app_android_settings_webapp_login }

After a user installs and launches the Android Settings Web App for the first time, the web app will require setting and saving the default values of the configuration. This will apply default settings to all android devices connected to the instance. 

![](resources/images/capture-app-first-time-setup.png){largeur=50%}

> **Attention**
>
> Les versions précédentes sont obsolètes. Vous débuterez donc avec une nouvelle configuration par défaut.

![](resources/images/capture-app-first-setup-with-deprecation-message.png){largeur=50%}

> **Warning (v2.3)** 
>
> When using DHIS2 version equal to or higher to 2.40, only users with "M_androidsettingsapp" or "ALL" authority can *save or update* the configuration, but any user will have *view* access once it is created.
> 


![](resources/images/capture-app-first-setup-no-authorities.png){largeur=50%}


## Entrer et enregistrer les paramètres de configuration { #capture_app_android_settings_webapp_enter_and_save }

### Magasin de données { #capture_app_android_settings_webapp_datastore }

Internally all settings are stored in [Datastore](https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-240/data-store.html) in JSON format.

Structure du Magasin de données :

| Élément      | Description                                 | Type de données |
|-----------|---------------------------------------------|-----------|
| Espace de noms | Espace-noms pour l'organisation des entrées       | Chaîne    |
| Clé       | Clé d'identification des valeurs            | Chaîne    |
| Valeur     | Valeur contenant les informations à entrer | JSON      |

### Enregistrer les paramètres de configuration { #capture_app_android_settings_webapp_save_config }

At the form footer of all settings sections, admin users can find a *Save* button.

![](resources/images/capture-app-save_button.png)

Only when an admin user clicks on this button, all changes made on the current section are saved on the Datastore. These changes will apply to the Android Capture App when they synchronize their configuration.

Unsaved changes
:   In case an admin user wants to go to another section when there are still some unsaved changes, an alert will be displayed before navigating away from the current section. In case the user accepts leaving the page, the unsaved changes will be lost.

![](resources/images/capture-app-unsaved-changes.png)

#### Réinitialiser toutes les valeurs par défaut { #capture_app_android_settings_webapp_reset_all }

An admin user can restore the settings at any time. There is a *Reset all values to default* button at the form footer of all settings sections. 

![](resources/images/capture-app-reset-default.png)

The default values will be only restored on Datastore and applied after clicking on *Save*. 


## Uninstall the app { #capture_app_android_settings_webapp_uninstall_app }

In case of needing to uninstall the Android Settings App it is recommended to also delete all the data from the reserved datastore namespace.

#### Delete data { #capture_app_android_settings_webapp_delete_data }

- Go to *General* section
- Click on *Disable all settings*
- A modal will pop up, click on *Disable*

![](resources/images/capture-app-unistall-delete-namespace.png)

![](resources/images/capture-app-unistall-delete-namespace-modal.png)

#### Uninstall app { #capture_app_android_settings_webapp_uninstall_app }

- Allez dans **Gestion des applications**
- Cliquez sur **Applications personnalisées**
- Go to *Android Settings App*
- Click on *Uninstall V2.X.X*

![](resources/images/capture-app-unistall-custom-app.png)

![](resources/images/capture-app-unistall-aswa.png)

> **Avertissement**
>
> Il s'agit d'une action critique ; sachez qu'en procédant ainsi, toutes les configurations antérieures seront définitivement supprimées.

