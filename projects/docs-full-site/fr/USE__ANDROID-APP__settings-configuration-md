---
edit_url: "https://github.com/dhis2/dhis2-android-docs/blob/main/content/capture-app/app-android-settings-configuration.md"
revision_date: '2024-05-28'
tags:
- Utilisation
---

# Android Settings WebApp { #capture_app_android_settings_webapp }
## Aperçu { #capture_app_android_settings_webapp_overview }

Cette section se focalise sur l'implémentation de [Android Settings Web App](https://apps.dhis2.org/app/a1bd6b5b-de8c-4998-8d34-56c18a139683).


[Android Settings Web App] (https://apps.dhis2.org/app/a1bd6b5b-de8c-4998-8d34-56c18a139683) permet aux administrateurs de configurer les paramètres de synchronisation de l'application Android de DHIS2, de crypter la base de données locale des appareils Android, de personnaliser l'aspect des programmes, des ensembles de données et de l'écran d'accueil, et d'ajouter des outils d'analyse des TEI. Les paramètres de configuration définis dans cette application Web écraseront les paramètres de tous les appareils Android utilisant l'application de Saisie Android de DHIS2.

Notez que dans cette version de l'application Web (2.3), si la version de DHIS2 est 2.40 ou plus, seuls les utilisateurs qui ont l'autorité "M_androidsettingsapp" ou "TOUS" peuvent définir ces paramètres dans la configuration. Les autres utilisateurs qui accèdent à l'application Web peuvent voir les paramètres mais ne peuvent pas les modifier.

> **Avertissement**
>
> Si la version de DHIS2 n'est pas supérieure à 2.40, seuls les utilisateurs qui ont l'autorité 'TOUS' peuvent définir ces paramètres dans la configuration.
> 


## Paramètres généraux { #capture_app_android_settings_webapp_general }

Elles incluent des configurations telles que l'URL Matomo et l'identifiant du projet, le nombre de valeurs réservées à télécharger par TEI, et crypte la base de données de l'appareil.

![](resources/images/capture-app-general-settings.png)

### Configuration de Matomo { #capture_app_android_settings_webapp_general_matomo }

L'application Android de DHIS2 envoie des analyses anonymisées pouvant être utilisées pour évaluer les performances réalisées lors d'une étape précédente et/ou détecter les problèmes y afférant. [Matomo](https://matomo.org) est l'outil utilisé pour mener cette tâche et qui s'exécute sur un serveur spécifique non accessible au grand public. Cependant, les implémentations peuvent configurer leur propre instance Matomo (ou utiliser la version cloud) afin de collecter et d'analyser les statistiques.

Une fois que votre instance Matomo est prête, vous êtes sensés obtenir les URL et l'identifiant du projet tel qu'indiqué sur l'image ci-dessous (à gauche). L'identifiant peut être introduit directement mais l'URL doit être suivie de */matomo.php* et commencer par *https* ou *http* tel qu'indiqué ci-dessous (à droite).

![](resources/images/capture-app-matomo-instance.png){largeur=33%} ![](resources/images/capture-app-matomo-settings.png){largeur=33%}


### Configuration mobile { #capture_app_android_settings_webapp_generalmobile_configuration }
Cette section permet aux utilisateurs administrateurs de modifier la passerelle SMS et d'envoyer les résultats au numéro de téléphone de l'expéditeur. Cette configuration se trouve dans l'application Android.
- Cliquez sur Paramètres
- Cliquez sur Paramètres de SMS

![](resources/images/capture-app-sms-settings.png){largeur=33%}

### Valeurs réservées { #capture_app_android_settings_webapp_general_reserved_values }
Cette fonction permet de spécifier le nombre de valeurs par attribut de TEI réservées à télécharger sur les appareils. Par défaut, l'application Android réserve 100 identifiants, mais il est possible d'augmenter ou de réduire ce nombre.

Pour retrouver cette configuration dans l'application Android :
- Cliquez sur Paramètres
- Cliquez sur Valeurs réservées
- Pour les remplir à nouveau, cliquez sur *Gestion des valeurs réservées*.

![](resources/images/capture-app-reserved-values.png){largeur=33%} ![](resources/images/capture-app-reserved-values-refill.png){largeur=33%}

### Cryptage de la base de données de l'appareil { #capture_app_android_settings_webapp_general_encrypt_database }
Tous les appareils devront stocker la base de données cryptée, augmentant ainsi le niveau de sécurité contre les tentatives de vol de données.

Par défaut, la base de données de l'application Android de DHIS2 n'est pas cryptée, mais un administrateur peut vérifier la base de données *Crypter la base de données des appareils* pour crypter les métadonnées et les données stockées dans chaque appareil. Le cryptage de la base de données aura un impact sur le volume de la base de données ainsi que sur les performances (baisse du niveau de performance entre 10-15%) de l'application Android. Notez qu'au moment de la sélection ou  non de cette option, aucune donnée n'est perdue (même si celle-ci n'a pas été préalablement synchronisée avec le serveur)

> **Attention**
>
> Il s'agit là d'une action essentielle qui affectera la base de données locale de tous les appareils Android qui se synchronisent avec le serveur (elle n'affectera pas la base de données DHIS2 du serveur).
>
> Par défaut, la base de données de l'application Android n'est pas cryptée, mais un administrateur peut vérifier la base de données *Crypter la base de données des appareils* pour crypter les métadonnées et les données stockées dans chaque appareil. Le cryptage de la base de données aura un impact sur le volume de la base de données ainsi que sur les performances de l'application Android. Notez qu'au moment de la sélection ou non de cette option, aucune donnée n'est perdue (même si celle-ci n'a pas été préalablement synchronisée avec le serveur)

### Autoriser les captures d'écran { #capture_app_android_settings_webapp_general_screenshots }
Cette section permet de configurer la possibilité de faire des captures d'écran ou de partager l'écran à l'aide de l'application de Saisie Android (nécessaire à l'assistance à distance avec des applications telles que Teamviewer, Teams, etc.). Notez que par défaut, les captures d'écran sont désactivées.

> **Attention**
>
> Par défaut, l'application Android de DHIS2 désactive la possibilité de faire des captures d'écran (de même qu'à partir d'autres applications), en tenant compte des recommandations de sécurité et de confidentialité. Autoriser les captures d'écran peut être utile pour des fins d'assistance et/ou de partage en cas de similitude ou d'activités similaires, mais vous devez comprendre les implications de sécurité et de confidentialité de ce paramètre avant de l'activer.
>


### Ignorer la validation de la version DHIS2 (**Nouvelle version 2.4**) { #capture_app_android_settings_webapp_general_skip_version_validation }
Lors de la connexion aux instances DHIS2, l'application vérifie généralement la compatibilité avec les versions prises en charge. Cependant, dans certains cas, il peut être nécessaire ou utile de se connecter à des instances non prises en charge. Notez que par défaut, la validation stricte de la version est appliquée. Pour ignorer le processus de validation de la compatibilité avec la version DHIS2, cochez la case.

![](resources/images/capture-app-skip-version-validation.png)

> **Avertissement**
>
> Cette option n'est applicable que si vous utilisez l'application Saisie Android version 3.0 ou plus.
>


### Fonctions Opt-in (**v2.3.1**) { #capture_app_android_settings_webapp_general_optin_features }
Les fonctions "opt-in" sont des fonctionnalités ou des paramètres supplémentaires de l'application que l'utilisateur peut choisir d'activer en fonction de ses préférences. Contrairement aux paramètres par défaut, ces fonctions nécessitent un consentement explicite ou une action ("opt-in") pour être activées.
L'utilisation de ces fonctions permet à l'utilisateur de personnaliser son expérience en ajoutant des fonctionnalités supplémentaires à l'application. Gardez à l'esprit que ces fonctions peuvent être associées à des considérations spécifiques, et qu'il est donc recommandé de consulter toutes les informations associées avant de les activer.

Pour activer une fonction :

- Cliquez sur *Fonctions Opt-in*. 
- Une liste des paramètres 'opt-in' disponibles s'affiche.
- Cliquez sur la case à cocher de la fonction pour l'activer.

**Formulaire de saisie de données (**Nouvelle version 2.4**):** Les entrées pour tous les types de valeurs ont été reconçues dans l'application Saisie Android avec un mode de sélection amélioré et une augmentation des zones tactiles et des textes afin d'offrir une expérience utilisateur plus claire et plus intuitive. Par défaut, l'application Saisie Android affiche les nouveaux formulaires. Les utilisateurs administrateurs peuvent choisir de ne pas utiliser la nouvelle version des formulaires en cliquant sur la case à cocher.

![](resources/images/capture-app-optin-features.png)

### Désactiver tous les paramètres { #capture_app_android_settings_webapp_general_disable_settings }
En cliquant sur ce bouton, l'utilisateur supprimera tous les paramètres de configuration Android. De ce fait, aucune configuration ne sera appliquée à l'application Android (si tel est le cas, les paramètres de synchronisation appliqués sont ceux définis dans l'application de Saisie Android).


## Synchronisation { #capture_app_android_settings_webapp_synchronization }

Cette fonction propose des paramètres supplémentaires pour contrôler la synchronisation des métadonnées et/ou des données.


### Général{ #capture_app_android_settings_webapp_synchronization_global }

Synchronisation des métadonnées : les utilisateurs administrateurs peuvent définir la fréquence de synchronisation des métadonnées. Par exemple, synchronisation des métadonnées toutes les 24 heures.

Synchronisation des données : les utilisateurs administrateurs peuvent définir la fréquence de synchronisation des données. Par exemple, synchronisation des métadonnées toutes les 6 heures.

![](resources/images/capture-app-sync-global.png){largeur=50%}
![](resources/images/capture-app-sync-global-app.png){largeur=33%}


Utiliser le nouvel importateur du Tracker : les utilisateurs administrateurs peuvent définir le point d'extrémité de l'importateur du Tracker qui doit être utilisé

> **Avertissement**
>
> Cette option n'est disponible que si l'application Web Paramètres Android est utilisée avec DHISl2 API version 2.38 ou plus.
>
> Par défaut, si la version de DHIS2 API est 2.38 ou plus, l'application Android utilisera l'importateur introduit dans le point d'extrémité */api/tracker* de la version 2.37, mais un administrateur peut désélectionner cette option et l'ancien importateur tracker */api/trackedEntityInstances* sera utilisé.
> 
> ![](resources/images/capture-app-sync-global-importer.png){largeur=50%}
>

Utiliser le nouvel exportateur du Tracker (**v2.3**) : les utilisateurs administrateurs peuvent définir le point d'extrémité de l'exportateur du Tracker qui doit être utilisé.

> **Avertissement**
>
> Cette option n'est disponible que si l'application Web Paramètres Android est utilisée avec DHISl2 API version 2.40 ou plus.
>
> Par défaut, si la version de DHIS2 API est 2.40 ou plus, l'application Android utilisera l'exportateur introduit dans le point d'extrémité */api/tracker* de la version 2.37, mais un administrateur peut désélectionner cette option et l'ancien importateur tracker */api/trackedEntityInstances* sera utilisé.
> 
> 
>![](resources/images/capture-app-sync-global-exporter.png){largeur=50%}
>

Limiter la taille du fichier à télécharger (**v2.3**)
:   Les utilisateurs administrateurs peuvent limiter la taille maximale des fichiers téléchargés en Ko.

![](resources/images/capture-app-sync-download-file-size.png){largeur=33%}



### Programme { #capture_app_android_settings_webapp_synchronization_program }

Cette section contrôle les paramètres de synchronisation de données du programme. Il possède une section permettant de définir les paramètres généraux ou par défaut qui seront utilisés lors de la synchronisation de tous les programmes.

#### Paramètres généraux{ #capture_app_android_settings_webapp_synchronization_program_global }

Les paramètres généraux s'appliquent à tous les programmes auxquels les utilisateurs de l'application Android ont accès. Les paramètres peuvent être activés de façon générale, par unité d'organisation, par programme ou par unité d'organisation et programme.

![](resources/images/capture-app-program-global-settings.png){largeur=50%}

TEI à télécharger : Nombre maximum de TEI à télécharger depuis le serveur.

Période de téléchargement des TEI : télécharge les TEI qui ont été mises à jour au cours d'une période donnée. Par exemple, les TEI qui ont été mises à jour au cours du mois dernier.

Événement à télécharger : Nombre maximum d'Événements à télécharger (depuis les programmes d'événements, voir la note ci-dessous).

Période de téléchargement des événements : télécharge les événements dont la date fait partie d'une période spécifique.

> **Remarque**
>
> L'utilisateur peut se tromper sur la quantité de données téléchargées lors de la définition du nombre de TEI et du nombre d'événements. L'application Android téléchargera le nombre de TEI et tous leurs événements en fonction du nombre de TEI défini dans le champ. L'Application Android limitera le nombre d'Événements à télécharger uniquement pour les *programmes d'événements* (et non les *programmes de Tracker*) selon le champ.
>
> Par exemple, considérons un *Programme de Tracker* dans le serveur avec plusieurs étapes de programme et chaque TEI comporte 5 événements (inscriptions et étapes de programme). La valeur *TEI à télécharger* est définie sur 100. De même, sur le serveur, il existe un *programme d'événements* qui contient 1000 événements. La valeur \*Événement à télécharger* a été définie sur 200. L'application Android téléchargera les éléments suivants : 100 x 5 événements du programme de Tracker et 200 événements du programme d'événements. Par conséquent, l'application Android aura à télécharger 700 événements.
>


#### Paramètres spécifiques { #capture_app_android_settings_webapp_synchronization_program_specific }

Cette section permet aux utilisateurs administrateurs de spécifier le comportement d'un ou de plusieurs programmes particuliers lors de la synchronisation des données. La configuration spécifique écrase les paramètres généraux des programmes répertoriés dans cette section. Pour ajouter un paramètre à un programme spécifique :

- Cliquez sur *Ajouter un paramètre spécifique au programme*. Une boîte de dialogue apparaît.
- Cliquez sous le titre "Valeurs par programme" et vous aurez une liste de programmes.
- Lorsque vous cliquez sur un programme, les différents paramètres à configurer seront affichés. Le nombre de paramètres dépend du type de programme (avec ou sans enregistrement).

**Paramètres des programmes sans enregistrement**

![](resources/images/capture-app-program-specific-dialog-without_registration.png){largeur=50%}

**Paramètres des programmes avec des enregistrements**

![](resources/images/capture-app-program-specific-dialog-with_registration.png){largeur=50%}

Si des paramètres spécifiques ont été enregistrés, un tableau en présentera un résumé avec la configuration propre à chaque programme ainsi que les options pour modifier ou supprimer ces paramètres.

![](resources/images/capture-app-program-specific-table.png){largeur=50%}

> **Attention**
>
> L'utilisation de paramètres spécifiques par programme peut avoir des conséquences inattendues sur le nombre de TEI téléchargés et le nombre total peut dépasser celui défini dans les paramètres généraux. Cela est dû à la manière dont l'application télécharge les TEI à partir du serveur. Le client utilisant un appareil Android doit d'abord télécharger un nombre maximum de TEI à partir du serveur en fonction des unités d'organisation auxquelles l'utilisateur a accès et en fonction du champ de la dernière mise à jour. Ensuite, il doit télécharger un nombre maximum de TEI à partir des programmes spécifiques. Par conséquent, si les TEI téléchargés à partir des paramètres généraux (500 dans l'exemple ci-dessus) ont été mis à jour plus récemment que toute TEI d'un programme spécifique (500 pour l'analyse, le traitement des cas de paludisme et les enquêtes y afférant), le client aura à télécharger 1000 TEI.
>
> Cela peut sembler confus au début, mais une fois compris, vous verrez que cette fonction peut garantir qu'un nombre minimum (et maximum) de TEI soit téléchargé pour un programme spécifique, ce qui peut être très utile pour des implémentations spécifiques.
>
> Imaginez une implémentation où il faut s'assurer que l'utilisateur de l'application Android dispose de toutes les TEI d'un programme spécifique sur un serveur où le même utilisateur a accès à d'autres Unités d'Organisation dans lesquelles d'autres TEI pourraient être inscrites dans un autre programme. Le programme est dénommé Community Care et compte 17 TEI qui ont été mises à jour il y a très longtemps. L'administrateur peut s'assurer du téléchargement des 17 TEI en effectuant une configuration au niveau des paramètres généraux (si le but est de réduire la bande passante, une valeur très faible doit être définie) et d'au moins 17 pour le programme spécifique, tel qu'indiqué sur l'image ci-dessous :
>
> ![](resources/images/capture-app-program-specific-example-web.png){largeur=50%}
>
> Lorsque la première synchronisation est lancée, l'appareil Android va d'abord télécharger les dernières TEI mis à jour sur le serveur (qui selon notre exemple n'appartiennent pas au programme spécifique) et ensuite jusqu'à 20 TEI du programme spécifique résultant en ce qui suit (assurez-vous que toutes les TEI du programme aient été téléchargées) :
>
> ![](resources/images/capture-app-program-specific-example-mobile1.png){largeur=33%}
>
> Et en allant dans les paramètres, vous pouvez constater la présence des 37 TEI attendus, 20 du paramètre général et 17 du programme spécifique.
>
> ![](resources/images/capture-app-program-specific-example-mobile2.png){largeur=33%}
>

#### Réinitialiser toutes les valeurs { #capture_app_android_settings_webapp_synchronization_program_reset_all }

En cliquant sur *Réinitialiser toutes les valeurs*, l'utilisateur administrateur restaurera les valeurs des paramètres par défaut de la section du programme. Notez que dans ce cas, les paramètres spécifiques à chaque programme ne sont pas rétablis.

Pour sauvegarder une configuration, l'utilisateur administrateur doit cliquer sur le bouton *Sauvegarder* (ce bouton est désactivé pour les utilisateurs qui n'ont pas l'autorité "TOUS" ou "M_androidsettingsapp")


### Ensemble de données { #capture_app_android_settings_webapp_synchronization_data }

Cette section contrôle les paramètres de synchronisation des données agrégées.

#### Paramètres généraux{ #capture_app_android_settings_webapp_synchronization_data_global }

La première partie concerne les paramètres généraux qui s'appliquent à tous les ensembles de données auxquels un utilisateur de l'application Android a accès.

![](resources/images/capture-app-dataset-global-settings.png){largeur=50%}

Le nombre maximal de périodes définit le nombre de périodes passées que l'application va télécharger lors du processus de synchronisation des données.

Si un ensemble de données contient des périodes futures (configuration "périodes futures ouvertes"), l'application ne les prendra pas en compte dans la restriction des périodes à télécharger.

Par exemple, dans un ensemble de données avec "périodes futures ouvertes" = 2 et "nombre maximal de périodes à télécharger" = 1, l'application téléchargera 3 périodes.

#### Paramètres spécifiques { #capture_app_android_settings_webapp_synchronization_data_specific }

Pour ajouter un paramètre spécifique :

- Cliquez sur *Ajouter un paramètre spécifique à un ensemble de données*, vous accéderez à une fenêtre de  dialogue comportant une liste d'ensembles de données,
- Cliquez sur un ensemble de données pour compléter automatiquement ce champ avec la valeur par défaut en fonction du type de période de l'ensemble de données.

![](resources/images/capture-app-dataset-specific-dialog.png){largeur=50%}

![](resources/images/capture-app-dataset-specific-table.png){largeur=50%}


### Test de synchronisation de l'utilisateur { #capture_app_android_settings_webapp_synchronization_user_sync_test }

Cette section vérifie la quantité de données et de métadonnées qu'un utilisateur pourrait synchroniser avec son appareil. Vous pouvez tester cette fonctionnalité avec un utilisateur auquel vous avez accès. Ce test permet de voir le nombre d'unités d'organisation, d'ensembles de données, de règles de programme, de programmes, etc., auxquels un utilisateur de l'application Android a accès (les ressources que l'application Android va télécharger), ainsi que la taille des métadonnées et des données téléchargées (estimation). Notez qu'un utilisateur n'a pas besoin d'avoir l'autorité "TOUS" et "M_androidsettingsapp" pour mener ce test.

![](resources/images/capture-app-user-sync-test.png){largeur=50%}

> **Remarque :**
>
> Les valeurs surlignées en rouge sont considérées comme supérieures à la valeur maximale recommandée.


## Apparence { #capture_app_android_settings_webapp_appearance }

Ces paramètres permettent de contrôler l'apparence des formulaires de saisie de données et des listes.

- Filtre : il définit les filtres qui peuvent être activés dans les différents menus de l'application.
- Spinner d'achèvement : il peut être activé et désactivé et montre la progression des entrées de données dans les formulaires.

Ces paramètres font référence à des composantes visuelles. Ils doivent donc être consommés par l'application. Pour plus d'informations sur les filtres, n'hésitez pas à consulter la [documentation] sur les filtres (https://docs.dhis2.org/en/use/android-app/android-specific-features.html#capture_app_generic_filter).

### Écran d'accueil { #capture_app_android_settings_webapp_appearance_home_screen }

Il permet à l'utilisateur administrateur d'activer ou de désactiver l'option d'affichage des filtres liés à la date, à l'unité d'organisation, à l'état de la synchronisation et à l'utilisateur lui-même, sur l'écran d'accueil.

![](resources/images/capture-app-appearance-home.png){largeur=75%}


### Programme { #capture_app_android_settings_webapp_appearance_program }

L'apparence d'un programme permet de masquer ou d'afficher des fonctionnalités au sein du programme en fonction des besoins de configuration. Ces modifications peuvent être globales, s'appliquant à TOUS les programmes, ou spécifiques à un seul programme.

#### Paramètres généraux { #capture_app_android_settings_webapp_appearance_program_global }

Les paramètres généraux s'appliquent à tous les programmes auxquels un utilisateur de l'application Android a accès.

![](resources/images/capture-app-appearance-program-global.png){largeur=75%}

Pourcentage (%) d'achèvement du programme : 
Vous pouvez activer ou désactiver l'option pour afficher ou non le pourcentage d'achèvement du formulaire de saisie des données.

Références des TEI (**v2.3.1**) : 
Il permet d'activer/désactiver l'option de référence des TEI.

Réduire les sections du formulaire (**v2.3.1**) :  
Le fonctionnement actuel permet aux sections de se réduire et de s'agrandir dans un style accordéon. Cette option modifie ce fonctionnement en gardant toutes les sections du formulaire (inscription et événements) ouvertes et en supprimant le bouton "suivant" dans chaque section. 


#### Paramètres spécifiques { #capture_app_android_settings_webapp_appearance_program_specific }

Cette section permet à l'administrateur de personnaliser des fonctionnalités telles que le filtre, le pourcentage d'achèvement, la recherche obligatoire, les références, les en-têtes de TEI, les options de références et la réduction des sections du formulaire. Chacune de ces fonctionnalités est expliquée dans la section ci-dessous.

Pour ajouter un paramètre spécifique :

- Cliquez sur *Ajouter des paramètres de programme*. Une boîte de dialogue apparaîtra.
- Cliquez sur le menu déroulant ; il affichera une liste de programmes.
- Lorsque vous cliquez sur un programme, les différents filtres à configurer seront affichés. Le filtre de la combinaison de catégorie dépend du nom de la combinaison de catégorie.

![](resources/images/capture-app-appearance-program-specific.png){largeur=75%}

![](resources/images/capture-app-appearance-program-specific-advanced.png){largeur=75%}

TEI sans recherche :
Ce paramètre permet d'effectuer des recherches en ligne et hors ligne, et permet à l'utilisateur de créer une TEI sans recherche préalable.

En-tête de TEI (**v2.3.1**) :
Ce paramètre permet d'assigner un attribut ou une expression spécifique qui sera affiché comme en-tête dans les cartes de TEI. 

Pour ajouter un en-tête de TEI :

- Sélectionner un indicateur de programme
- Une expression relative à l'indicateur de programme va s'afficher

![](resources/images/capture-app-appearance-program-specific-tei-header.png)


> **Remarque :**
>
> Une boîte de notification s'affiche si le programme sélectionné ne contient pas d'expressions relatives aux indicateurs de programme valides pour Android. 
> 
> Une expression est considérée comme valide pour Android uniquement si elle est composée exclusivement d'attributs et/ou de fonctions.
> 
> ![](resources/images/capture-app-appearance-program-specific-expression-valid.png)
> 
> ![](resources/images/capture-app-appearance-program-specific-expression-invalid.png)
> 


Si des paramètres spécifiques ont été sauvegardés, un tableau présentera le résumé de la configuration de chaque programme ainsi que les options pour modifier ou supprimer ces paramètres.

![](resources/images/capture-app-appearance-program-table.png)

L'option "Afficher le pourcentage (%) d'achèvement dans la barre d'outils du programme" fait référence à : 
![](resources/images/capture-app-appearance-programs-spinner.png){largeur=50%}

**Rechercher une entité suivie (v2.2)**

Effectuer une recherche avant de créer une nouvelle TEI est obligatoire, afin d'éviter d'éventuels doublons. L'application Android de DHIS2 a d'ailleurs été conçue de cette façon à dessein. Cette nouvelle version donne la possibilité de choisir entre conserver ce processus ou permettre à l'utilisateur de créer une TEI sans effectuer de recherche au préalable. Par défaut, la création par l'utilisateur d'une TEI sans effectuer de recherche est désactivée.



### Ensemble de données { #capture_app_android_settings_webapp_appearance_data }

Il permet aux administrateurs d'activer/désactiver les filtres pour la section Ensemble de données

#### Paramètres généraux{ #capture_app_android_settings_webapp_appearance_data_global }

La première partie concerne les paramètres généraux qui s'appliquent à tous les ensembles de données auxquels un utilisateur de l'application Android a accès.

![](resources/images/capture-app-appearance-dataset-global.png){largeur=75%}

#### Paramètres spécifiques { #capture_app_android_settings_webapp_appearance_data_specific }

Pour ajouter un paramètre spécifique :

- Cliquez sur *Ajouter des paramètres à un ensemble de données*. Un dialogue avec liste déroulante apparaît, présentant une liste d'ensembles de données.
- Cliquez sur un ensemble de données. Une liste d'options permettant d'activer ou de désactiver les filtres s'affichera.

![](resources/images/capture-app-appearance-dataset-specific.png){largeur=75%}

![](resources/images/capture-app-appearance-dataset-table.png){largeur=75%}


## Analyses { #capture_app_android_settings_webapp_analytics }

Les paramètres d'analyse définissent les éléments d'analyse des TEI, de l'Accueil, du Programme et de l'Ensemble de données (graphiques, tableaux) qui seront affichés pour l'utilisateur. Tout élément défini dans l'application Paramètres va remllacer le fonctionnement par défaut de l'application Android pour n'afficher que les éléments définis dans l'application Paramètres.

De plus, même si ces analyses sont créées à l'aide de l'application Web Paramètres Android, l'agrégation des données se fait hors ligne, et ne sont utilisées que les données stockées dans l'appareil.

### TEI { #capture_app_android_settings_webapp_analytics_tei }

Le champ d'application de l'analyse est la TEI. Les visualisations seront donc visibles sur le tableau de bord TEI de l'application Android.

L'bjectif de cette section est de définir des visualisations afin de montrer l'évolution des *éléments de données* et des *indicateurs de programme* au fil du temps. Sur cette base, elle ne prendra en compte que les éléments de données qui appartiennent à une étape de programme répétable, ou les indicateurs de programme dont la formule contient au moins un élément de données appartenant à une étape de programme répétable.

Pour créer un élément d'**Analyses des TEI ** :

1. Cliquez sur *Ajouter des Analyses de TEI *. Une boîte de dialogue apparaît avec un petit formulaire.
2. Choisissez un programme et une étape de programme répétable, puis remplissez le formulaire. **Nom court** est le seul champ facultatif.
3. Si une visualisation d'élément autre que OMS Nutrition a été choisie, les prochains champs à sélectionner seront le type de période (mensuel, hebdomadaire, quotidien), un type d'élément (indicateur de programme, élément de données) et un élément qui sera basé sur le type d'élément précédemment sélectionné. Rappelez-vous que ces éléments sont liés au programme et à l'étape de  programme répétable choisis au début.

![](resources/images/capture-app-analytics-item.png)

Pour créer un élément **Analyse OMS Nutrition** :

1. Sélectionnez un programme, une étape de programme et OMS Nutrition comme type de visualisation.
2. Choisissez un type de visualisation OMS qui peut être la taille pour l'âge (HFA), le poids pour l'âge (WFA) ou le poids pour la taille (WFH).
3. Sélectionnez l'attribut d'entité suivie qui représente le genre. Vous devrez ensuite spécifier l'option Homme 'Titre masculin' et l'option Femme 'Titre féminin'. Normalement, il s'agira de codes d'option.
4. Choisissez l'élément de données/indicateur de programme qui sera affiché sur l'axe horizontal (x)
5. Choisissez l'élément de données/indicateur de programme qui sera affiché sur l'axe vertical (y)


![](resources/images/capture-app-analytics-who-item.png)

Si un élément d'analyse de TEI a été créé, un tableau affichera le titre de l'élément et le nom du programme, ainsi que des boutons d'action permettant de supprimer ou de modifier cet élément.

![](resources/images/capture-app-analytics-table.png)

### Accueil { #capture_app_android_settings_webapp_analytics_home }

Les visualisations de l'Accueil sont affichées sur l'écran d'accueil (onglet Analyses) de l'application Android.

Tous les éléments disponibles sont d'abord créés dans l'application Visualiseur de Données ou Liste de Lignes de DHIS2 et configurés avec l'application Paramètres Android.

> **Remarque :**
>
> Les éléments de visualisation peuvent provenir soit du **Visualisateur de données**, soit de l'application **Liste de Lignes**. 
> 
> Lorsque vous choisissez un type de visualisation, les éléments affichés changent automatiquement ; si "Visualiseur de Données" est sélectionné, seules les visualisations créées dans l'application Visualiseur de Données seront affichées. 
> 
> Lorsque vous sélectionnez "Visualisation d'événements" (**Nouvelle version 2.4**), seuls les éléments créés dans l'application Liste de Lignes apparaîtront dans la boîte de recherche de la visualisation.
>

Pour créer un élément de l'**Accueil** :

1. Cliquez sur le bouton "Ajouter une Visualisation de l'Accueil"
2. Choisissez un "Type de visualisation" (**Nouvelle version 2.4**)
3. Cliquez au niveau de la zone de recherche et sélectionnez la visualisation dans la liste ou entrez le nom de l'élément de visualisation.
4. Ajoutez un titre alternatif, sinon l'application affichera le nom de la visualisation.
5. Par défaut, l'application activera le paramètre de visualisation de groupe.
   1. Créez un nouveau groupe : Une zone de texte libre apparaîtra pour la saisie du nom ou
   2. Sélectionnez une visualisation de groupe déjà créée : choisissez une option dans la liste pour ajouter la visualisation ou
   3. Désactivez la visualisation de groupe en cliquant sur la case à cocher.
6. Cliquez sur le bouton "Sauvegarder".

![](resources/images/capture-app-analytics-home-newGroup.png)

![](resources/images/capture-app-analytics-home-createdGroup.png)

> **Remarque :**
>
> Les visualisations ajoutées sans groupe sélectionné seront affichées dans un "groupe" commun
>
> ![](resources/images/capture-app-analytics-default-group.png)
>

Pour modifier le titre d'un élément de l'**Accueil** (**v2.2.1**) :

1. Recherchez l'élément en développant les groupes.
2. Cliquez sur le bouton "Modifier" situé près du nom de l'élément.
3. Une fenêtre contextuelle avec seulement le titre de la visualisation sera disponible ; les autres champs seront désactivés. Vous pouvez modifier le titre de la visualisation.
4. Cliquez sur le bouton "Sauvegarder".

![](resources/images/capture-app-analytics-home-editVisualization.png)


Pour supprimer un élément de l'**Accueil** :

1. Recherchez l'élément en développant les groupes.
2. Cliquez sur le bouton "Supprimer" situé près du nom de l'élément.
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Sauvegarder"

![](resources/images/capture-app-analytics-home-deleteVisualization.png)

Pour supprimer un élément de l'**Accueil** :

1. Recherchez le groupe qui doit être supprimé
2. Cliquez sur "Supprimer le groupe"
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Sauvegarder"

Tous les éléments associés à ce groupe seront supprimés

![](resources/images/capture-app-analytics-home-deleteGroup.png)

Pour réinitialiser toutes les valeurs :

1. Cliquez sur "Rétablir toutes les valeurs par défaut"
2. Cliquez sur le bouton "Sauvegarder"

### Programme { #capture_app_android_settings_webapp_analytics_program }

Les visualisations de programme sont affichées sur l'écran de recherche (onglet Analyses) plus précisément dans les programmes de Tracker ou sur l'écran de listes (onglet Analyses) dans les programmes d'événements de l'application Android.

Tous les éléments disponibles sont d'abord créés dans l'application Visualiseur de Données ou Liste de Lignes (**Nouvelle version 2.4**) de DHIS2 et configurés avec l'application Paramètres Android.

> **Remarque :**
>
> Les éléments de visualisation peuvent provenir soit du **Visualisateur de données**, soit de l'application **Liste de Lignes**. 
> 
> Lorsque vous choisissez un type de visualisation, les éléments affichés changent automatiquement ; si "Visualiseur de Données" est sélectionné, seules les visualisations créées dans l'application Visualiseur de Données seront affichées. 
> 
> Lorsque vous sélectionnez "Visualisation d'événements" (**Nouvelle version 2.4**), seuls les éléments créés dans l'application Liste de Lignes apparaîtront dans la boîte de recherche de la visualisation.
>
>
![](resources/images/capture-app-analytics-program-visualization-type.png)
>

Pour créer un élément de **Programme** :

1. Cliquez sur le bouton "Ajouter une Visualisation de Programme"
2. Choisissez un "Type de visualisation" (**Nouvelle version 2.4**).
3. Sélectionnez un programme.
4. Cliquez au niveau de la zone de recherche et sélectionnez la visualisation dans la liste ou entrez le nom de l'élément de visualisation.
5. Ajoutez un titre alternatif, sinon l'application affichera le nom de la visualisation.
6. Par défaut, l'application activera le paramètre de visualisation de groupe.
   1. Créez un nouveau groupe : Une zone de texte libre apparaîtra pour la saisie du nom ou
   2. Sélectionnez une visualisation de groupe déjà créée : choisissez une option dans la liste pour ajouter la visualisation ou
   3. Désactivez la visualisation de groupe en cliquant sur la case à cocher.
7. Cliquez sur le bouton "Sauvegarder".

![](resources/images/capture-app-analytics-program-add.png)

Pour modifier le titre d'un élément de **Programme** (**v2.2.1**) :

1. Recherchez l'élément en développant les groupes.
2. Cliquez sur le bouton "Modifier" situé près du nom de l'élément.
3. Une fenêtre contextuelle avec seulement le titre de la visualisation sera disponible ; les autres champs seront désactivés. Vous pouvez modifier le titre de la visualisation.
4. Cliquez sur le bouton "Sauvegarder".

![](resources/images/capture-app-analytics-program-editVisualization.png)

Pour supprimer un élément de **Programme** :

1. Recherchez l'élément en développant les groupes.
2. Cliquez sur le bouton "Supprimer" situé près du nom de l'élément.
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Sauvegarder"

![](resources/images/capture-app-analytics-program-deleteVisualization.png)

Pour supprimer un groupe de **programmes** :

1. Recherchez le groupe qui doit être supprimé dans le programme correspondant
2. Cliquez sur "Supprimer le groupe"
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Sauvegarder"

Tous les éléments associés à ce groupe seront supprimés

![](resources/images/capture-app-analytics-program-deleteGroup.png)

Pour réinitialiser toutes les valeurs :

1. Cliquez sur "Rétablir toutes les valeurs par défaut"
2. Cliquez sur le bouton "Sauvegarder"

### Ensemble de données { #capture_app_android_settings_webapp_analytics_data }

Les visualisations des ensembles de données sont affichées sur l'écran d'accueil (onglet Analyses) de l'application Android.

Tous les éléments disponibles sont d'abord créés dans l'application Visualiseur de Données de DHIS2 et configurés avec l'application Paramètres Android.

Pour créer un élément d'**Ensemble de données** :

1. Cliquez sur "Ajouter une Visualisation d'Ensemble de Données"
2. Sélectionnez un ensemble de données
3. Cliquez au niveau de la zone de recherche et sélectionnez la visualisation dans la liste ou entrez le nom de l'élément de visualisation.
4. Ajoutez un titre alternatif, sinon l'application affichera le nom de la visualisation.
5. Par défaut, l'application activera le paramètre de visualisation de groupe.
   1. Créez un nouveau groupe : Une zone de texte libre apparaîtra pour la saisie du nom ou
   2. Sélectionnez une visualisation de groupe déjà créée : choisissez une option dans la liste pour ajouter la visualisation ou
   3. Désactivez la visualisation de groupe en cliquant sur la case à cocher.
6. Cliquez sur le bouton "Sauvegarder".

![](resources/images/capture-app-analytics-dataset-add.png)

Pour modifier le titre d'un élément d'**Ensemble de Données** (**v2.2.1**) :

1. Recherchez l'élément en développant les groupes.
2. Cliquez sur le bouton "Modifier" situé près du nom de l'élément.
3. Une fenêtre contextuelle avec seulement le titre de la visualisation sera disponible ; les autres champs seront désactivés. Vous pouvez modifier le titre de la visualisation.
4. Cliquez sur le bouton "Sauvegarder".

![](resources/images/capture-app-analytics-dataset-editVisualization.png)

Pour supprimer un élément d'**Ensemble de Données** :

1. Recherchez l'élément en développant l'ensemble de données et le groupe
2. Cliquez sur le bouton "Supprimer" situé près du nom de l'élément.
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Enregistrer"

![](resources/images/capture-app-analytics-dataset-deleteVisualization.png)

Pour supprimer un groupe d'**Ensembles de Données** :

1. Recherchez le groupe qui doit être supprimer dans l'ensemble de données correspondant
2. Cliquez sur "Supprimer le groupe"
3. Cliquez sur "Supprimer"
4. Cliquez sur le bouton "Sauvegarder"

Tous les éléments associés à ce groupe seront supprimés

![](resources/images/capture-app-analytics-dataset-deleteGroup.png)

Pour réinitialiser toutes les valeurs :

1. Cliquez sur "Rétablir toutes les valeurs par défaut"
2. Cliquez sur le bouton "Enregistrer"

### Test utilisateur de la visualisation { #capture_app_android_settings_webapp_analytics_visualization_user_test }

Le test utilisateur de la visualisation est une fonctionnalité disponible dans les paramètres d'Accueil, de Programme et d'Analyse d'Ensemble de Données. Elle permet à l'utilisateur administrateur de déterminer si un utilisateur particulier pourra voir la visualisation.

L'application Paramètres Android vérifie au moins l'une de ces trois autorisations :

1. La visualisation est accessible au public
2. L'utilisateur a un accès individuel à la visualisation
3. L'utilisateur fait partie d'un groupe qui a accès à la visualisation

Pour mener le test :

1. Sélectionnez l'utilisateur dans la liste
2. Cliquez sur "Exécuter le test"

![](resources/images/capture-app-analytics-usertest-access.png)

![](resources/images/capture-app-analytics-usertest-access-visualization.png)

![](resources/images/capture-app-analytics-usertest-noaccess.png)

![](resources/images/capture-app-analytics-usertest-noaccess-visualization.png)

### Limites de l'analyse { #capture_app_android_settings_analytics_limitations }

Étant donné que les agrégations et les calculs affichés sont effectués dans l'appareil, l'analyse y est limitée par rapport au web. 

En résumé, les objets et fonctionnalités compatibles et pris en charge sont les suivants :

- Objets analytiques bien constitués (séries, catégories, filtres)
- Utilisation de périodes relatives (les périodes fixes ne sont pas prises en charge)
- L'utilisateur a un accès en visualisation
- Limites des tableaux croisés dynamiques
  - Nombre de lignes d'en-tête : 1 ou 2 (*v2.3*)
  - Nombre de colonnes d'en-tête : 2
- Limites des graphiques
  - Nombre de séries : Aucune limite (mais n'oubliez pas que le rendu se fait sur un petit écran)
  - Nombre de catégories (ne s'applique pas aux graphiques circulaires) : Aucune limite

Plusieurs autres restrictions s'appliquent à l'analyse Android en ce qui concerne les nombreuses options de configuration disponibles dans le visualiseur Web ainsi que les fonctions et les calculs pris en charge liés aux indicateurs et aux indicateurs de programme. [Ce tableau (https://docs.google.com/spreadsheets/d/1127cz7M0K4fux5CU0V54V2Z77NZWCr0BTrZ6jcCec4Q) résume toutes les fonctionnalités prises en charge.

De la même manière, les visualisations d'événements sont considérées comme valides si :

- La visualisation a été crée à l'aide de l'application Liste de Lignes
- Le type de visualisation est Liste de Lignes
- Utilisation de périodes relatives
- Limites du tableau
  - Nombre de colonnes : 15


> **Remarque (v2.2.1) :**
>
> Lors de la recherche d'une visualisation à ajouter dans le cadre des  Analyses de visualisations, toutes les visualisations seront répertoriées, mais celles qui ne respectent pas les restrictions ci-dessus seront désactivées.
>
>![](resources/images/capture-app-analytics-visualization-search.png)
>


## Installation { #capture_app_android_settings_webapp_installation }

Un utilisateur peut facilement installerl'application Web Paramètres Android en se connectant à DHIS2 et en accédant à **Gestion des applications**.

- Cliquez sur **App Hub**
- Accédez à *Application Paramètres Android*
- Cliquez sur *Installer V2.X.X*

![](resources/images/capture-app-app-hub-install.png)
![](resources/images/capture-app-app-hub-install-webapp.png)


## Connexion et première configuration { #capture_app_android_settings_webapp_login }

Lorsqu'un utilisateur installe et lance l'application Web Paramètres Android pour la première fois, l'application Web devra définir et enregistrer les valeurs par défaut de la configuration. Par cette action, les paramètres par défaut seront appliqués à tous les appareils Android connectés à l'instance.

![](resources/images/capture-app-first-time-setup.png){largeur=50%}

> **Attention**
>
> Les versions précédentes sont obsolètes. Vous débuterez donc avec une nouvelle configuration par défaut.

![](resources/images/capture-app-first-setup-with-deprecation-message.png){largeur=50%}

>**Avertissement (v2.3)** 
>
> En utilisant DHIS2 version 2.40 ou plus, seuls les utilisateurs ayant l'autorité "M_androidsettingsapp" ou "TOUS" peuvent *sauvegarder ou mettre à jour* la configuration, mais tous les utilisateurs auront un accès en *visualisation* une fois qu'elle est créée.
> 


![](resources/images/capture-app-first-setup-no-authorities.png){largeur=50%}


## Entrer et sauvegarder les paramètres de configuration { #capture_app_android_settings_webapp_enter_and_save }

### Entrepôt de données { #capture_app_android_settings_webapp_datastore }

En interne, tous les paramètres sont stockés dans [l'entrpôt de données](https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-240/data-store.html) au format JSON.

Structure de l'entrepôt de données :

| Élément      | Description                                 | Type de données |
|-----------|---------------------------------------------|-----------|
| Espace de noms | Espace de noms pour l'organisation des entrées       | Chaîne    |
| Clé       | Clé d'identification des valeurs            | Chaîne    |
| Valeur     | Valeur contenant les informations à entrer | JSON      |

### Enregistrer les paramètres de configuration { #capture_app_android_settings_webapp_save_config }

Au bas du formulaire de toutes les sections de paramètres, les utilisateurs administrateurs peuvent trouver un bouton *Sauvegarder*.

![](resources/images/capture-app-save_button.png)

Ce n'est que lorsqu'un utilisateur administrateur clique sur ce bouton que toutes les modifications apportées à la section en cours sont sauvegardées dans l'entrepôt de données. Ces modifications s'appliqueront aux Applications de Saisie Android après la synchronisation de leur configuration.

Modifications non enregistrées : Si un utilisateur administrateur souhaite accéder à une autre section alors que certaines modifications ne sont pas encore enregistrées, une alerte s'affichera avant qu'il ne quitte la section actuelle. Si l'utilisateur quitte tout de même la page, les modifications non enregistrées seront perdues.

![](resources/images/capture-app-unsaved-changes.png)

#### Réinitialiser toutes les valeurs par défaut { #capture_app_android_settings_webapp_reset_all }

Un utilisateur administrateur peut restaurer les paramètres à tout moment. Un bouton *Réinitialiser toutes les valeurs par défaut* situé au bas du formulaire de toutes les sections de paramètres permet d'exécuter cette fonction.

![](resources/images/capture-app-reset-default.png)

Les valeurs par défaut ne seront restaurées que dans l'entrepôt de données et appliquées que si l'utilisateur clique sur *Sauvegarder*.


## Désinstaller l'application { #capture_app_android_settings_webapp_uninstall_app }

En cas de désinstallation de l'application Paramètres Android, il est recommandé de supprimer également toutes les données dans l'espace de noms de l'entrepôt de données.

#### Supprimer des données { #capture_app_android_settings_webapp_delete_data }

- Allez à la section *Général*
- Cliquez sur *Désactivez tous les paramètres*
- Une fenêtre modale s'ouvre, cliquez sur *Désactiver*.

![](resources/images/capture-app-unistall-delete-namespace.png)

![](resources/images/capture-app-unistall-delete-namespace-modal.png)

#### Désinstaller l'application { #capture_app_android_settings_webapp_uninstall_app }

- Allez dans **Gestion des applications**
- Cliquez sur **Applications personnalisées**
- Accédez à *Application Paramètres Android*
- Cliquez sur *Désinstaller V2.X.X*

![](resources/images/capture-app-unistall-custom-app.png)

![](resources/images/capture-app-unistall-aswa.png)

> **Avertissement**
>
> Cette action est irréversible. En effectuant cette opération, toutes les configurations antérieures seront définitivement supprimées.

