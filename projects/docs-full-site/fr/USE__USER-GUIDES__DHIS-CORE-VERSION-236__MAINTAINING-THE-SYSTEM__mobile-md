---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/2.36/src/user/mobile.md"
revision_date: "2021-06-14"
tags:
    - Utilisation
    - DHIS core version 2.36
---

# Mobile { #mobile }

Ce chapitre couvre diverses technologies mobiles, notamment le Web, J2ME, le service SMS et le SMS Command.

## Introduction à la version Mobile de DHIS2 { #mobile_intro }

DHIS2 offre une série d'options permettant la saisie de données à partir d'appareils mobiles, notamment un client GPRS/3G J2ME dédié et deux versions du DHIS2 optimisées spécifiquement pour les navigateurs mobiles. Chacune de ces solutions sera décrite en détail dans les sections suivantes. DHIS2 offre plusieurs clients Android, qui sont décrits en détail dans d'autres sections de ce guide.

La collecte de données sur le terrain peut être techniquement difficile et coûteuse. Les solutions de téléphonie mobile permettent de réduire considérablement la complexité du déploiement d'un système de collecte de données décentralisé. En utilisant un simple client Java installé sur un téléphone portable ou un navigateur web fonctionnant sur le téléphone portable, les travailleurs de terrain peuvent faire des rapports directement à la base de données DHIS2 via leur appareil mobile.

Si les solutions de téléphonie mobile ont un grand potentiel, de tels déploiements sont cependant complexes. Les téléphones manquent de puissance de traitement et ont un petit écran, ils doivent être chargés, et souvent ces déploiements se révèlent plus judicieux dans les zones où la couverture du réseau est faible ou intermittente.

Chacune des solutions mobiles est brièvement présentée ci-dessous, et sont examinées en détail dans des sections distinctes :

-   DHIS2 Light : Un module de saisie de données optimisé par un navigateur mobile pour tous les appareils

    Ce module permet de saisir directement des données avec le navigateur de l'appareil mobile. Un large éventail d'appareils et de navigateurs mobiles sont pris en charge, notamment Opera mini 3 & 4 (élémentaire et avancé) - Opera mini 4, Nokia S40 mobiles ,Windows Phone 7, Window Mobile 6, Palm Pre, Blackberry (v5 et v6), Firefox mobile, appareils iOS (iPhone) et appareils Android. Ce client ne dispose pas de support hors ligne, et une connexion GPRS/3G active est nécessaire. Il ne nécessite pas l'installation d'une nouvelle application sur le téléphone pour prendre en charge les nouvelles fonctionnalités, mais requiert une connexion de données stable pour être utilisé. Cette solution est décrite dans [Saisie de données par navigateur mobile](#basé_sur_le web mobile )

-   DHIS2 Smartphone client : Un module de saisie de données optimisé par un navigateur mobile pour les appareils Smartphone

    Ce module permet la saisie de données directement avec le navigateur d'un Smartphone. La saisie de données hors ligne est prise en charge et ne nécessite aucune installation d'un client particulier sur le téléphone lui-même.

-   Client J2ME GPRS/3G

    DHIS-mobile comprend deux clients J2ME distincts supportant le GPRS/EDGE/3G comme mécanisme de transport. L'un des clients prend en charge les rapports globaux des installations et l'autre le suivi des programmes par nom. Ces clients sont divisés en applications distinctes pour faciliter le déploiement. Certains agents de santé peuvent avoir les deux applications installées sur leur téléphone. Ces deux clients prennent en charge le stockage de données hors ligne et fonctionnent sur des appareils compatibles J2ME (téléphones polyvalents). .?\>

    Une connexion GPRS/3G active est nécessaire pour envoyer des données à la base de données DHIS2, mais les données peuvent être saisies hors ligne et transmises lorsqu'une connexion est disponible. Ce client est principalement destiné aux appareils bas de gamme qui prennent en charge les applications J2ME, bien que la prise en charge hors ligne ajoute quelques exigences en matière de mémoire, ce qui limite le choix du combiné. Bien que la solution soit principalement testée sur les téléphones Nokia, elle fonctionne également sur plusieurs autres appareils compatibles J2ME.

    L'établissement déclarant le client J2ME est décrit dans le chapitre "Client J2ME GPRS/3G".

## Saisie de données par navigateur mobile { #mobile_web_based }

### Démarrer avec la saisie de données par navigateur mobile { #getting-started-with-mobile-browser-data-entry }

Cette méthode consiste à saisir les données sur un téléphone intelligent équipé d'un navigateur mobile en se rendant à l'URL de l'instance DHIS2, par exemple : le lien URL complet pour la démonstration sur [dhis2.org](dhis2.org) <http://apps.dhis2.org/dev/mobile/index.action> . Et votre navigateur mobile détectera automatiquement l'application DHIS2 où l'URL du serveur est donnée (par exemple : <http://apps.dhis2.org/dev>). Voici le formulaire de connexion pour accéder à l'application avec un nom d'utilisateur et un mot de passe. Cliquez sur "Connexion" pour continuer ou sur "Réinitialisation" pour réinitialiser :

![](resources/images/dhis2_mobile_web_based/mobile-browser-login.png)

Après s'être connecté, vous verrez afficher la liste des fonctions :

![](resources/images/dhis2_mobile_web_based/mobile-browser-menu.PNG)

**- Rapports agrégés:** Saisies de données agrégées avec un ensemble de données défini/attribué par unités d'organisation

\- **Tracking:**

-   Trouver une personne : trouver une personne sur la base de son nom, de son numéro de téléphone ou de son ID, et de son unité d'organisation.

-   Plan d'activités : Saisie des données relatives aux personnes par unités d'organisation, personnes et programmes/étapes du programme

-   Enregistrement des personnes : Enregistrer une nouvelle personne

-   Anonymous : Entrées pour les personnes anonymes basées sur des programmes

**- Messages:** Gérer les messages et les discussions à partir du serveur. La réponse aux messages est disponible. L'utilisateur peut envoyer un message constituant un feedback dans Messages.

**- Rapports:** Les rapports de sortie du serveur.

\- **Paramètres:** Informations sur l'utilisateur (par exemple : Prénom, Nom, Numéro de téléphone, E-mail) et la langue de l'interface.

**- Déconnexion :** pour se déconnecter de l'application.

**- Version de bureau** : naviguez dans la version de bureau de DHIS2 pour l'administration. Cela nécessite beaucoup de ressources de la part du portable du client, par exemple : la mémoire suffisante pour charger les pages. Ceci n'est recommandé pour les téléphones GPRS/3G/... normaux.

La liste ci-dessus sera expliquée plus en détail :

1.  **- Rapports agrégés:** Saisies de données agrégées avec un ensemble de données défini/attribué par unités d'organisation

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-aggregate-reporting.PNG)

    Cliquez sur le "Rapport agrégé", puis choisissez une unité d'organisation dans la liste, ce qui fera apparaître la liste des ensembles de données pour la saisie des données agrégées. Voir l'exemple ci-dessous :

    **Etape 1 : Sélectionnez une unité d'organisation dans la liste**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-select-orgunit.png)

    **Étape 2 : Sélectionnez un Ensemble de données (formulaire de saisie) dans la liste**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-select-dataset.png)

    **Etape 3 : Sélectionnez une période (en fonction du type de période de l'ensemble de données choisi) dans la liste**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-select-period.png)

    **Étape 4 : Saisie des données**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-entry.png)

    **Etape 5 : Sauvegardez les données saisies, choisissez l'option d'exhaustivité des données s'il y en a.**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-entry-complete-save.png)

2.  **Tracking :** **Trouver/Ajouter une personne, Calendrier de visite, Enregistrement de la personne, Anonyme**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-menu-2.PNG)

    2.1 **_Trouver/Ajouter une personne_** : trouver une personne sur la base de son nom, de son numéro de téléphone ou de son ID, et de son Unité d'organisation.

    -   Étape 1 : insérez votre nom, votre numéro de téléphone ou votre identifiant et sélectionnez l'unité d'organisation, puis cliquez sur Rechercher.

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-find-person-1.PNG)

    -   Étape 2 : sélectionnez une personne

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-findPersonStep2.png)

        Ensuite, toutes les informations de cette personne s'afficheront

    -   Étape 3 : choisissez l'étape suivante du programme pour la saisie des données

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-findPersonStep3.png)

        Pour voir toutes les étapes du programme, cliquez sur le nom de ce programme (Programme de la santé de l'enfant comme capture d'écran)

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-findPersonStep3.1.png)

    2.2: **\*Calendrier de visite**:\*Choisissez une unité d'organisation

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-org.png)

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-activityPlan.png)

    -   Plan d'activité en cours : la liste des bénéficiaires enregistrés, inscrits, n'ayant pas encore terminé/achevé un/plusieurs programmes et pour lesquels il existe au moins une étape du programme ouverte à la saisie de données.

        \+ _Étape 1 : Sélectionnez une personne pour la saisie_

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-BE.png)

        \+ _Step 2: Étape 2 : Choisissez une étape du programme en cours et active pour la saisie des données_

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-PGS.png)

        Vous pouvez également voir les informations de la personne (ID, sexe, date de naissance et groupe sanguin) en cliquant sur les détails (en haut de la liste affichée)

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-details.png)

        Les informations détaillées de la personne choisie :

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-details-info.png)

    -   Plan d'activité complet : la liste de tous les bénéficiaires enregistrés, inscrits, n'ayant pas encore terminé/achevé un/plusieurs programmes.

    -   Événement unique :

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-activityPlan-singleEvent.png)

    2.3 : **Enregistrement des personnes :** Enregistrer une nouvelle personne

    -   Étape 1 : Saissez les informations personnelles

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-personRegistrationStep1.png)

    -   Étape 2 : Inscrivez le programme pour la personne qui vient d'être inscrite, puis cliquez sur "Inscrire".

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-personRegistrationStep2.png)

    -   Étape 3 : Saisissez les informations requises pour le programme choisi, puis cliquez sur "Inscrire".

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-personRegistrationStep3.png)

        En voici le résultat : 

        ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-personRegistrationStep4.png)

    2.4: **Anonymous:** Entrées pour les personnes anonymes sur la base des programmes spécifiques

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-tracking-anonymous.png)

3.  **- Messages :** Gérer les messages et les discussions à partir du serveur. La réponse aux messages est disponible.

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-messages-menu.PNG)

    Le nombre qui s'affiche est celui des messages non lus. Cliquez dessus pour afficher la liste des messages (les messages non lus sont en gras et en bleu foncé) :

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-message-conversations.PNG)

    Vous pouvez ensuite récupérer le message/sujet des discussions en laissant le message de réponse comme le montre cet exemple :

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-messages-reply.png)

    L'utilisateur peut créer et envoyer un feedback au serveur dans la section des messages. Après l'envoi du nouveau feedback, le message (feedback) sera répertorié dans la section "Messages" pour un suivi ultérieur.

4.  **Rapports :** Les rapports de sortie du serveur.

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-reports.png)

    (sera mis à jour)

5.  **Paramètres :** Informations sur l'utilisateur (par exemple : Prénom, Nom, Numéro de téléphone, E-mail) et la langue de l'interface.

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-settings.png)

    Voici le formulaire de paramétrage du compte utilisateur/accès et de la langue de l'interface. Cliquez sur "ENREGISTRER" pour terminer le paramètrage, voir l'exemple ci-dessous :

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-settings-update.png)

6.  **Déconnexion :** pour se déconnecter de l'application

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-logout.png)

7.  **Version de bureau** : naviguez dans la version de bureau de DHIS2 à ds fins d'administration.

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-desktop-version.png)

    Voici l'interface graphique (GUI) de la version de bureau (qui nécessite beaucoup de mémoire pour le chargement), non recommandée pour un mobile normal. L'exemple avec DHIS2 Demo (depuis [dhis2.org](dhis2.org))

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-desktop-version-GUI.png)

<!-- end list -->

1.  ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-data-entry.png)

    Après avoir cliqué sur la "Saisie de données par nom", la page suivante vous guidera vers les sélections dans les étapes suivantes :

    **Etape 1 : Sélectionnez une unité d'organisation**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-org.png)

    **Étape 2 : Choisissez le type d'activité**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-AC.png)

    (la capture d'écran avec un exemple utilisant l'option "Plan d'activité actuel")

    Il y aura normalement les deux types d'activités suivants :

    \+ "Plan d'activité actuel" : la liste des bénéficiaires enregistrés, inscrits, n'ayant pas encore terminé/achevé un/plusieurs programmes et pour lesquels il existe au moins une phase de programme ouverte pour la saisie de données.

    \+ "Plan d'activité complet" : la liste de tous les bénéficiaires enregistrés, inscrits, n'ayant pas encore terminé/achevé un/plusieurs programmes.

    **Etape 3 : Choisir un bénéficiaire pour la saisie**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-BE.png)

    (la capture d'écran avec un exemple utilisant l'option "Hybia Welde")

    **Étape 4 : Choisissez une étape actuelle et active du programme pour la saisie des données**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-PGS.png)

    (la capture d'écran avec un exemple utilisant l'option "16-24 mois après la naissance")

    Vous pouvez également voir les informations du bénéficiaire (ID, sexe, date de naissance et groupe sanguin) en cliquant sur les détails (en haut de la liste affichée)

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-choose-details.png)

    Les informations détaillées du bénéficiaire choisi :

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-namebased-details-info.png)

2.  **Enregistrement des bénéficiaires :** Enregistrer un nouveau bénéficiaire

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-beneficiary-registration.png)

    **Etape 1 : Choisissez une unité d'organisation**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-beneficiary-registration-choose-OU.png)

    **Etape 2 : Remplir le formulaire d'inscription du bénéficiaire**

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-beneficiary-registration-form.png)

    Les informations nécessaires sont les suivantes : Nom complet, sexe, date de naissance (et groupe sanguin).

    Cliquez sur "Sauvegarder" pour enregistrer un nouveau bénéficiaire.

    Un message "Sauvegarde réussie" apparaîtra lorsque le bénéficiaire aura été créé/enregistré avec succès.

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-beneficiary-registration-form-success.png)

3.  **Inscription des bénéficiaires : **Inscrivez un bénéficiaire dans un ou plusieurs programmes

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-beneficiary-enrollment.png)

    Avant d'inscrire un bénéficiaire à un programme, la fonction de recherche d'un bénéficiaire est fournie :

    Si le bénéficiaire est trouvé, le résultat sera affiché. Cliquez simplement sur le nom du bénéficiaire pour accéder aux programmes auxquels il est inscrit :

    La capture d'écran ci-dessous décrit le bénéficiaire nommé "Nguyen Van A":

    \- N'a été inscrit à aucun programme auparavant

    \- Le programme : "Programme de santé de l'enfant" est disponible pour inscription

    La liste des programmes disponibles pour inscription sera affichée. Il suffit de cliquer sur le programme d'inscription en précisant la date d'inscription et la date de l'incident. Voir l'exemple :

    Après avoir cliqué sur le bouton "S'INSCRIRE", en cas de succès, le programme inscrit sera répertorié dans "Programmes inscrits pour" + \ <Nom du bénéficiaire\>. Voir l'exemple :

4.  **- Messages :** Gérer les messages et les discussions à partir du serveur. La réponse aux messages est disponible.

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-messages.png)

    Le nombre qui s'affiche est celui des messages non lus. Cliquez dessus pour afficher la liste des messages (les messages non lus sont en gras et en bleu foncé) :

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-messages-unread.png)

    Vous pouvez ensuite récupérer le message/sujet des discussions en laissant le message de réponse comme le montre cet exemple :

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-messages-reply.png)

5.  **Rapports :** Les rapports de sortie du serveur.

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-reports.png)

    (sera mis à jour)

6.  **Paramètres :** Informations sur l'utilisateur (par exemple : Prénom, Nom, Numéro de téléphone, E-mail) et la langue de l'interface.

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-settings.png)

    Voici le formulaire de paramétrage du compte utilisateur/accès et de la langue de l'interface. Cliquez sur "ENREGISTRER" pour terminer le paramètrage, voir l'exemple ci-dessous :

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-settings-update.png)

7.  **Feedback :** la fonctionnalité supplémentaire pour créer un nouveau message à envoyer au serveur. Le nouveau feedback créé à partir de cette fonction sera disponible dans "**Messages**".

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-feedback.png)

    Après avoir cliqué sur "Feedback", vous aurez un formulaire vous permettant d'éditer/envoyer un nouveau message/discussion. Voir l'exemple ci-dessous :

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-feedback-new.png)

    Après l'envoi du nouveau feedback, le message (feedback) sera disponible sous la rubrique "Messages" pour un suivi ultérieur.

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-feedback-listed-in-messages.png)

8.  **Déconnexion :** pour se déconnecter de l'application

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-logout.png)

9.  **Version de bureau** : naviguez dans la version de bureau de DHIS2 à ds fins d'administration.

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-desktop-version.png)

    Voici l'interface graphique (GUI) de la version de bureau (qui nécessite beaucoup de mémoire pour le chargement), non recommandée pour un mobile normal. L'exemple avec DHIS2 Demo (depuis [dhis2.org](dhis2.org))

    ![](resources/images/dhis2_mobile_web_based/mobile-browser-desktop-version-GUI.png)

## Les Clients J2ME GPRS/3G { #mobile_j2me_gprs_3g }

Le module mobile GPRS/3G de DHIS2 fournit un mécanisme permettant aux clients distants utilisant des téléphones mobiles de saisir des données directement dans le système DHIS2. Le client a deux fonctions qui sont les suivantes :

La solution repose sur le fait que le téléphone mobile dispose d'une connexion de données (c'est-à-dire GPRS, Edge, 3G), par laquelle il communique avec une instance DHIS2 qui doit être publiquement disponible sur l'internet, comme tout autre serveur web. L'application client du téléphone télécharge les formulaires de saisie de données sur le téléphone à partir du serveur, et les formulaires peuvent donc être mis à jour sans l'installaton d'une nouvelle application. C'est également une caractéristique essentielle pour les rapports produits par les communautés, qui reposent sur le téléchargement régulier de plans d'activité à partir du serveur.

-   Rapports produits par les établissements, pour la saisie de données et la déclaration des données agrégées habituelles du DHIS2,

-   Rapport d'activité, pour soutenir le rapport d'activité individuel avec le module de la communauté.

### Disponibilité des connexions de données { #data-connection-availability }

La disponibilité de connexion de données peut constituer un problème dans de nombreux contextes où le reporting mobile de DHIS2 serait une bonne solution pour obtenir des données directement dans le DHIS2. Si tel est le cas à votre niveau, vous pouvez alors envisager d'essayer la solution basée sur les SMS décrite dans un document séparé. Gardez à l'esprit que même si une connexion de données est actuellement nécessaire pour la communication entre le serveur et le téléphone mobile, elle n'est requise que lors de l'initialisation ou de la mise à jour de l'application mobile et lors de l'envoi de rapports au serveur. Le téléphone stocke toutes les données saisies localement, de sorte qu'il peut fonctionner correctement avec un accès temporaire à une connexion de données de façon régulière.

### Client J2ME GPRS 3G des rapports fournis par les établissements { #mobile_j2me_gprs_3g_facility_reporting }

Le composant côté serveur de la solution basée sur le web est inclus dans la construction globale de DHIS2.

Pour configurer le rapport mobile DHIS2 basé sur le web, vous devez alors suivre les étapes suivantes.

-   Activez l'indicateur "Disponible pour le rapport mobile" pour les ensembles de données que vous voulez rapporter : Sous _Maintenance-\>Ensemble de données_-\>_Modifier_, cochez la case "Disponible pour le rapport mobile" et enregistrez.

-   Créer un rôle d'utilisateur pour l'utilisateur mobile. Sélectionnez _Maintenance-\>Utilisateurs-\>Rôle d'utilisateur-\>Ajouter nouveau_. Ajoutez un nom et une description de rôle d'utilisateur. Ajoutez les ensembles de données souhaités pour le rôle. Le rôle de l'utilisateur mobile devra avoir au moins les privilèges pour ce qui est de l'API Web de DHIS2. Enregistrez le rôle d'utilisateur en cliquant sur "Enregistrer".

-   Créez un utilisateur qui sera utilisé par le client pour se connecter à partir de _Maintenance-\>Utilisateurs-\>Utilisateur -\>Ajouter nouveau_. Complètez toutes les informations requises, en gardant à l'esprit que le mot de passe doit comporter au moins 8 caractères dont une majuscule et un chiffre. Attribuez le rôle d'utilisateur souhaité à l'utilisateur que vous avez créé dans l'étape précédente.

    > **Important**
    >
    > Assign the user to exactly **one** organisation unit. Each mobile reporting client will need their own user name and password.

### Configuration détaillée des ensembles de données et des formulaires de déclaration { #detailed-configuration-of-data-sets-and-reporting-forms }

Il est vrai que les étapes précédentes sont les plus nécessaire lorsqu'il s'agit de tester la solution, mais une configuration plus détaillée des ensembles de données peut être requise ; cette configuration est donc décrite dans les sections suivantes.

#### La mise en correspondance des ensembles de données pour constituer la mise en page sur le téléphone { #the-mapping-of-data-sets-to-form-layout-on-the-phone }

Par défaut, un ensemble de données est mis en correspondance avec un formulaire unique sur le téléphone. Au cas où l'ensemble de données est divisé en sections, chaque section s'affiche alors sur une page distincte du téléphone. Mais au cas où un élément de donnée comporte plusieurs combo d'options de catégorie, il s'affiche alors sous forme de titre avec les options de combinaison de catégories qui suivent.

<table>
<tbody>
<tr class="odd">
<td><strong>Élément de conception du formulaire</strong></td>
<td><strong>Métadonnées du DHIS2</strong></td>
<td><strong>Élément de métadonnées</strong></td>
</tr>
<tr class="even">
<td>Titre du formulaire</td>
<td>Ensemble de données</td>
<td>Nom abrégé s'il existe, sinon Nom</td>
</tr>
<tr class="odd">
<td>Titre de la page</td>
<td>Section</td>
<td>Nom de la section (ou nom du formulaire s'il n'y a pas section)</td>
</tr>
<tr class="even">
<td>Question</td>
<td>Élément de donnée</td>
<td>Nom alternatif s'il existe, sinon Nom</td>
</tr>
<tr class="odd">
<td>Nom de la question s'il y a des combos</td>
<td>Combo d'options de catégorie</td>
<td>nom</td>
</tr>
</tbody>
</table>

#### Triage des formulaires { #sorting-of-forms }

Par défaut, les éléments de données seront triés selon le tri global défini dans le DHIS2. Si des sections sont utilisées, leur ordre de tri spécifique à la section sera utilisé. Dans certains cas, lorsque les sections ne sont pas utilisées, un élément de donnée peut être utilisé dans plusieurs ensembles de données et s'opposer à la manière dont il devrait être trié dans les ensembles de données individuels. Dans ce cas, une solution consiste à regrouper l'ensemble de données dans une seule section (notez que cela ne fonctionne que si les éléments de données ont la même combo d'options de catégorie).

#### Versionnage des ensembles de données { #versioning-of-data-sets }

Afin de permettre la comparaison et la mise à jour des ensembles de données sur le téléphone portable avec la version disponible sur le serveur, les ensembles de données sont automatiquement versionnés lorsque vous modifiez la structure de l'ensemble de données. Certaines modifications qui surviennet sur le serveur DHIS2, amèneront le client mobile à mettre à jour ses formulaires avec une nouvelle version.

-   Créer un ensemble de données

-   Modifier un ensemble de données

-   Créer/modifier/supprimer une section dans l'ensemble de données

-   Ordre de tri des sections

-   Mise à jour de l'Élément de donnée (affecte de nombreux Ensembles de données connexes)

-   Mise à jour de l'Élément de donnée (affecte de nombreux Ensembles de données connexes)

-   Modifier la catégorie d'éléments de données

-   Combo de catégories d'éléments de données

#### Support linguistique { #language-support }

Un support multilingue est disponible.

L'ensemble de données et l'élément de données sont traduits par le biais d'une fonction web. La langue par défaut sur le serveur est utilisée sur le mobile dans les cas où la langue requise sur le mobile n'est pas disponible.

![](resources/images/dhis_mobile/translateDataSet.jpg)

### Configuration de l'application mobile { #mobile-application-setup }

#### Installation et initialisation { #installation-and-initialization }

##### Installation { #installation }

Téléchargez les packages Java ARchive à partir de la page d'accueil de DHIS2 : [https://www.dhis2.org/downloads](www.dhis2.org/downloads)

##### Initialisation { #initialization }

L'initialisation doit être effectuée avant la livraison des téléphones aux utilisateurs finaux. Étant donné la grande diversité des configurations possibles des téléphones, il est impossible de décrire les étapes exactes nécessaires pour permettre au client de téléphoner. Cependant, pour la plupart des téléphones, il suffit de copier le fichier "JAR" du client DHIS2 Web Mobile sur le téléphone avec un câble USB ou via Bluetooth. Bien entendu, la connectivité GPRS/3G doit être activée. Contactez votre fournisseur de services mobiles pour obtenir des détails précis sur la configuration des téléphones et des réseaux.

![](resources/images/dhis_mobile/mobile_login_screen.png)

Une fois que le client a été installé sur le téléphone, un processus d'initialisation doit avoir lieu en fournissant un nom d'utilisateur, un mot de passe et l'URL du serveur.

1.  Connexion au serveur pour la première fois.

    Si le client se connecte pour la première au serveur, ou s'il est réinitialisé, le nom d'utilisateur, le mot de passe et l'URL du serveur doivent être saisis.

    Si le client n'est pas en mesure de se connecter, vous pourriez avoir plusieurs messages d'erreur.

    -   Connexion non trouvée : L'URL du serveur spécifié n'est pas correcte. Vérifiez l'adresse du serveur, assurez-vous que le serveur est effectivement accessible et réessayez.

    -   Nom d'utilisateur ou mot de passe invalide : le nom d'utilisateur ou le mot de passe est incorrect

    -   Application non autorisée à accéder aux API restreintes : Le serveur peut être contacté, mais l'utilisateur ne dispose pas des autorisations nécessaires lui permettant d'accéder au module de reporting mobile

2.  Définir le PIN : Après la procédure de connexion initiale, l'utilisateur peut donc saisir un PIN. Cela facilitera beaucoup plus le processus de connexion, puisque l'utilisateur n'aura plus qu'à se souvenir du code PIN à quatre chiffres, au lieu de devoir taper à chaque fois le nom d'utilisateur et le mot de passe. Le code PIN peut être prédéfini si le téléphone est initialisé avant la livraison, ou il peut être défini par les utilisateurs eux-mêmes si les noms d'utilisateur et des mots de passe leur sot fournis.

    ![](resources/images/dhis_mobile/mobile_enter_pin.png)

    Après avoir saisi le code PIN, cliquez sur (Menu)-\>Suivant.

3.  Téléchargez tous les formulaires : Une fois le code PIN spécifié, tous les formulaires seront téléchargés du serveur et stockés localement sur le téléphone.

    Si l'utilisateur a été configuré de manière à produire des rapports sur des ensembles de données agrégés, une liste des ensembles de données appropriés s'affichera. Si l'utilisateur est responsable des rapports communautaires, la liste des activités assignées s'affichera.

    _N.B._: Si l'agent de santé est responsable à la fois des rapports sue les établissements et sur la communauté, le serveur DHIS2 enverra alors toutes les formes de Rapports d'établissements et de communauté au mobile ; sur le mobile, il y aura un écran pour choisir d'afficher les Rapports sur les établissements et sur la communauté.

    _Erreurs_:

#### Connexion (pour une utilisation régulière) { #logging-in-for-regular-use }

Après le lancement de l'application, le formulaire du code PIN s'affiche.

-   PIN : Saisissez le code PIN à quatre chiffres.

-   Réinitialisation de la commande : cette fonction permet d'effacer toutes les données sur le mobile et nous partons de l'écran de connexion avec le nom d'utilisateur et le mot de passe.

-   Des erreurs : PIN invalide : si l'utilisateur a saisi un PIN invalide, il devra alors saisir le PIN correct ou réinitialiser l'application avec le nom d'utilisateur et le mot de passe corrects.

#### Module de rapport sur les établissements { #facility-reporting-module }

##### Procédure de saisie de données { #entering-data }

Après avoir sélectionné un ensemble de données agrégées dans la fenêtre "Sélectionner le formulaire de rapport", l'utilisateur devra choisir une période de temps appropriée. Une liste des périodes disponibles est automatiquement générée.

1.  Une fois avoir  saisi son code PIN, l'utilisateur peut choisir parmi une liste d'ensembles de données disponibles. Sélectionnez l'ensemble de données approprié et appuyez sur "Suivant".

    ![](resources/images/dhis_mobile/select_report_form.png)

2.  Choix des périodes : Une liste des périodes disponibles s'affichera automatiquement à l'utilisateur. Celui-ci peut donc sélectionner la période appropriée dans la liste.

    ![](resources/images/dhis_mobile/aggregate_select_periods.png)

3.  Remplissez les valeurs : Après avoir choisi la période, le formulaire peut être affiché selon deux modes, en fonction de :

    -   Formulaire à sections

        Chaque section du formulaire est affichée dans un seul écran avec le nom de la section dans la fenêtre de titre.

        Pour naviguer d'un écran à l'autre, appuyez sur "Suivant".

    -   Formulaires sans section (Ensembles de données sans section)

        Tous les champs sont affichés sur un seul écran avec le titre qui est le nom de l'ensemble de données

    L'utilisateur complète simplement chaque élément de donnée avec la valeur appropriée.

    ![](resources/images/dhis_mobile/aggregate_data_entry_form.png)

4.  Enregistrer et terminer : 

    Une fois la saisie des données terminée, l'utilisateur peut choisir de sauvegarder les données localement sur le téléphone ou de les télécharger directement sur le serveur DHIS2.

    ![](resources/images/dhis_mobile/aggregate_save_complete.png)

    Si l'utilisateur enregistre le formulaire de données, il peut le modifier ultérieurement en cas de besoin. Lorsque vous sélectionnez à nouveau une période, la période sera marquée comme "Enregistrée" tel que le montre la capture d'écran suivante.

    ![](resources/images/dhis_mobile/aggregate_data_entry_form_saved.png)

    Si l'utilisateur sélectionne "Complet" alors que le formulaire de saisie de données n'est pas complet, il lui sera demandé  de confirmer son choix de soumettre le formulaire comme étant incomplet. Une fois le formulaire soumis, un message devrait s'afficher informant l'utilisateur de la réussite de la transmission.

    ![](resources/images/dhis_mobile/aggregate_report_success.png)

##### Remarques { #notes }

1.  Liste des périodes :

    Les périodes marquées d'un astérisque (\*) sont celles qui sont terminées ou enregistrées, selon le statut de la saisie des données.

    ![](resources/images/dhis_mobile/aggregate_save_completed_periods.png)

    Toutes les périodes qui ne figurent pas dans la liste des périodes sont considérées comme anciennes et seront supprimées automatiquement.

2.  Durée de stockage des valeurs

    Le nombre de formulaires enregistrés sur le mobile n'est limité que par la capacité de stockage effective de l'appareil mobile.

    Les formulaires ne sont sauvegardés que pour une période limitée, en fonction de la fréquence de collecte de l'ensemble de données en question.

    -   Formulaires quotidiens : 2 mois (mois en cours et mois précédent)

    -   Formulaires hebdomadaires : 4 semaines (semaine en cours et 3 semaines précédentes)

    -   Formulaires mensuels : 2 mois (mois en cours et mois précédent)

    -   Formulaires trimestriels : 2 trimestres (trimestre en cours et trimestre précédent)

    -   Formulaires annuels : 2 ans (année en cours et année précédente)

3.  Formulaires remplis - Formulaires non modifiables

    Si le formulaire a été rempli, l'utilisateur peut alors le consulter sur son téléphone, mais ne peut pas y apporter de modifications ultérieures. Chaque champ est grisé et inactif pour d'éventuelles modifications.

4.  Editer de nouveau les formulaires remplis

    Si l'utilisateur souhaite modifier des données déjà soumises au serveur, il peut le faire en appuyant sur le bouton "Modifier". Il est autorisé à le faire à condition que l'ensemble de données n'ait pas été verrouillé pour la période en question. S'il tente de télécharger les données, l'utilisateur sera informé que l'ensemble de données a été verrouillé et qu'il n'est pas possible de télécharger les données.

    ![](resources/images/dhis_mobile/dataset_locked_upload_failed.png)

5.  Mise à jour des formulaires : 

    Cette fonction est utilisée pour synchroniser les formulaires sur le mobile et sur le serveur. Le processus est automatiquement déclenché après la saisie du code PIN.

    N.B. : Le processus de vérification et de téléchargement des formulaires mis à jour se déroule en arrière-plan. Une fois le téléchargement terminé, un message s'affiche pour demander à l'utilisateur s'il souhaite actualiser la liste des formulaires ou rester là où il se trouve actuellement.

6.  Support multilingue :

    Cette fonction aide l'utilisateur à choisir la langue de l'interface utilisateur graphique (GUI) du mobile et la langue du contenu (Formulaires).

    Les formulaires doivent être traduits sur le serveur, sinon, vous utilisez la langue par défaut.

    La langue par défaut de la première connexion est l'anglais. Le changement de langue dans le menu Paramètres affectera à la fois l'interface et le contenu.

    ![](resources/images/dhis_mobile/settingCmd.jpg)

    ![](resources/images/dhis_mobile/settingScreen.jpg)

    ![](resources/images/dhis_mobile/supportedLanguageList.jpg)

    Interface multilingue : Dans le menu Paramètres, vous avez la liste des langues prises en charge (téléchargées du serveur). La langue de l'interface graphique n'est modifiée qu'après le redémarrage de l'application.

    Contenu multilingue (formulaires) : La langue du formulaire est modifiée après avoir cliqué sur "Enregistrer". Au cas où il y a beaucoup de formulaires, il faudra alors plusieurs minutes pour enregistrer les paramètres.

##### Résolution de problèmes { #troubleshooting }

-   Les données ont été saisies sur le téléphone mais n'apparaissent pas sur le serveur

    Cette situation se produit généralement lorsque les utilisateurs saisissent des données sur le téléphone, mais ne peuvent pas les envoyer au serveur. Cela peut être dû à la configuration du téléphone, à un manque de crédit sur le téléphone ou à un manque de couverture. En général, un message d'erreur s'affiche comme indiqué ci-dessous.

    ![](resources/images/dhis_mobile/http_error_mobile_client.png)

    Les utilisateurs doivent savoir que lorsqu'ils remarquent cette erreur, cela signifie que leurs données n'ont pas été transmises.

## La fonction de commande SMS { #mobile_sms_command }

La fonction de commande SMS permet au système DHIS2 de recevoir des SMS d'utilisateurs, de patients, ou même de personnes anonymes. Une commande SMS est un objet contenant les configurations pour chaque formulaire SMS : déclarer des données provenant de téléphones ou d'applications j2me, alerter les utilisateurs, enregistrer un patient ou un utilisateur, etc.

### Configurer la commande SMS { #set-up-sms-command }

C'est ici que vous avez la possibilité de créer une nouvelle commande SMS

![](resources/images/dhis2_mobile_sms/mobile-sms-startup-link.png)

![](resources/images/dhis2_mobile_sms/mobile-sms-startup-link-sms-command.png)

Habituellement, chaque commande SMS a sa propre propriété ; le processus de paramètrage peut être différent d'une commande à une l'autre. Actuellement, nous disposons de 4 types de commandes SMS :

![](resources/images/dhis2_mobile_sms/mobile-sms-conf-sms-command-types.png)

Avec KEY_VALUE_PARSER et J2ME_PARSER, la commande SMS aura un ensemble de données puisque celles-ci sont utilisées pour la déclaration des données. Si les données sont déclarées pour une période qui est déjà approuvée, la réponse par SMS sera renvoyée contenant des informations sur le statut d'approbation de la période.

![](resources/images/dhis2_mobile_sms/mobile-sms-conf-sms-command-dataset.png)

Avec ALERT_PARSER et UNREGISTERED_PARSER, la commande SMS aura un groupe d'utilisateurs car ceux-ci sont utilisés pour l'envoi de messages tels que SMS, conversation DHIS2, e-mail.

![](resources/images/dhis2_mobile_sms/mobile-sms-conf-sms-command-user-group.png)

Certains paramètres sont communs à tous les types de commandes SMS. Ces paramètres ont des valeurs par défaut configurées dans le système. Si l'utilisateur fournit une valeur à ces paramètres, ces valeurs par défaut seront alors utilisées. Voici la liste de ces paramètres

<table>
<caption>Paramètres communs</caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th>Paramètre</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Séparateur Code Valeur</td>
<td>Chaîne</td>
<td>Fournir un séparateur Code Valeur personnalisé. Le séparateur par défaut est &quot;=&quot</td>
</tr>
<tr class="even">
<td>Séparateur de champs</td>
<td>Chaîne</td>
<td>Fournir un séparateur de champs personnalisé. Par défaut, nous avons : &quot;|&quot ;</td>
</tr>
<tr class="odd">
<td>Message de réponse si aucun code n'est envoyé (uniquement la commande)</td>
<td>Chaîne</td>
<td>Fournir un message si aucun code n'est trouvé dans le texte du SMS. Par défaut, nous avons : est &quot;Paramètre manquant&quot ;</td>
</tr>
<tr class="even">
<td>Format du message incorrect</td>
<td>Chaîne</td>
<td>Fournir un message si le format de la commande est incorrect. La commande doit être formatée selon le séparateur Code Valeur. Ce message sera également renvoyé si un paramètre obligatoire est manquant.</td>
</tr>
<tr class="odd">
<td>Message sans utilisateur</td>
<td>Chaîne</td>
<td>Fournir un message si le numéro de téléphone d'envoi n'est pas enregistré dans le DHIS2.</td>
</tr>
<tr class="even">
<td>L'utilisateur appartient à plus d'un message d'OrgUnit</td>
<td>Chaîne</td>
<td>Certains types de commandes SMS exigent que l'utilisateur (extrait du numéro de téléphone d'envoi) soit associé à une seule unité d'organisation. Ce message peut être configuré pour être renvoyé dans le cas où cette exigence n'est pas satisfaite.</td>
</tr>
<tr class="odd">
<td>Message de confirmation</td>
<td>Chaîne</td>
<td>Fournir le message qui sera envoyé à l'issue du processus.</td>
</tr>
</tbody>
</table>

### Type de commande SMS { #sms-command-type }

La commande SMS est essentiellement définie par son type d'analyseur. En d'autres termes, chaque commande SMS dispose d'un analyseur unique pour analyser le SMS en texte clair, puis le résultat sera utilisé pour les besoins de cette commande SMS.

#### Commande SMS pour la déclaration de données { #sms-command-for-reporting-data }

Pour déclarer des données, par exemple un ensemble de données (agrégation), nous utilisons des commandes SMS ayant KEY_VALUE_PARSER (pour le texte en clair du téléphone), ou J2ME_PARSER (pour les applications j2me)

![](resources/images/dhis2_mobile_sms/mobile-sms-cofig-sms-command-format-reportingdata.png)

Si la commande a pour nom "rapport", et une liste d'éléments de données ayant le code comme celui ci-dessus, le format doit être : \[nom de la commande] \[code] \[valeur] \[code] \[valeur] \[code] \[valeur]....,la [valeur] peut bien sûr être modifiée en fonction des données réelles, vous devez donc préparer un texte SMS comme le montre cet exemple : **rapport vo2 vn5 a2 b6 z3 x1**

Si la commande comporte un séparateur, par exemple ".", le texte du SMS doit être :

**report vo.2.vn.5.a.2.b.6.z.3.x.1**

ou **report vo.2|vn.5|a.2|b.6|z.3|x.1**

De plus, en ce qui concerne les SMS, l'orgUnit peut être spécifiée comme suit **org CodeorgUnit**. Si aucune orgUnit n'est spécifiée dans le SMS, l'utilisateur est d'abord récupéré à partir du numéro de téléphone d'envoi, puis de l'orgUnit de cet utilisateur. En ce qui concerne le Type de période, il doit être spécifié dans ce format "jjMM" par exemple 3108, mais dans le cas où il n'est pas spécifié, le Type de période sera récupéré dans l'Ensemble de données associé à la Commande SMS

Avec le J2ME_PARSER, vous n'avez pas besoin de préparer ces SMS, car le J2ME effectuera cette tâche

![](resources/images/dhis2_mobile_sms/mobile_sms_custom_message.PNG)

L'utilisateur peut définir le message de réponse personnalisé pour "Message au mauvais format", "Message sans utilisateur", "L'utilisateur appartient à plus d'un message d'OrgUnit" et "Message de confirmation". Si aucun message personnalisé n'est défini, le système utilisera le message par défaut.

#### Commande SMS pour l'inscription d'une entité { #sms-command-for-entity-enrollment }

TRACKED_ENTITY_REGISTRATION_PARSER peut être utilisé pour enregistrer l'entité suivie dans le système.

![](resources/images/dhis2_mobile_sms/TEI_parser.png)

Le nom de la commande sera suivi des attributs de l'entité suivie appartenant à un programme spécifique auquel cette commande est associée. La sélection du programme se fera lors de la création de cette commande.

Le modèle de texte par défaut (si le séparateur de champ et le séparateur de valeur de code ne sont pas fournis), cet analyseur ressemblerait à ceci. **Programme enfant fn=xmen|ln=xmen2|age=4**

Si le séparateur de champ est par exemple "," alors le texte ressemblera à ceci : **Programme pour enfants fn=xmen,ln=xmen2,age=4**

Le reste du comportement reste le même que pour les autres commandes. Si l'utilisateur ne fournit pas ces paramètres, les paramètres par défaut seront alors utilisés.

#### Commande SMS pour la saisie de données à une étape de programme { #sms-command-for-program-stage-data-entry }

PROGRAM_STAGE_DATAENTRY_PARSER peut être utilisé pour saisir les données relatives à l'étape du programme pour une instance d'entité suivie spécifique.

![](resources/images/dhis2_mobile_sms/programstage_data_parser.png)

Le nom de la commande sera suivi des éléments de données relatifs à l'étape spécifique du programme à laquelle cette commande est associée. La sélection du programme et de l'étape du programme se fera lors de la création de cette commande.

Le modèle de texte par défaut (si le séparateur de champ et le séparateur de valeur de code ne sont pas fournis) pour cet analyseur ressemblerait à ceci. **étape de programme bcgd=1|opvd=2|wght=34**

Si le séparateur de champ est par exemple "," alors le texte ressemblera à ceci : **étape de programme bcgd=1,opvd=2,wght=34**

Le reste du comportement reste le même que pour les autres commandes. Si l'utilisateur ne fournit pas ces paramètres, les paramètres par défaut seront alors utilisés.

#### Commande SMS pour les alertes, le enregistrements { #sms-command-for-alerting-registering }

Afin d'alerter les utilisateurs, nous utilisons des commandes SMS qui ont pour nom ALERT_PARSER (pour le texte clair du téléphone), ou UNREGISTERED_PARSER (pour les applications j2me). UNREGISTERED_PARSER peut également être utilisé pour enregistrer une rumeur SIMR.

![](resources/images/dhis2_mobile_sms/mobile-sms-cofig-sms-command-format-alert.png)

Le format de ces commandes sera : \[nom de la commande] \[texte], par exemple :

**alerte d'un cas d'urgence dans Une ville**

Les commandes ayant ALERT_PARSER seront reçues uniquement des utilisateurs

#### Commande SMS pour l'enregistrement des événements { #sms-command-for-event-registration }

L'enregistrement des événements peut être utilisé pour enregistrer un événement anonyme dans le système sur la base des données collectées par SMS. Ce type de commande est associé aux programmes de type SANS_ENREGISTREMENT. Par exemple, les événements de naissance peuvent être suivis à l'aide de cet analyseur.

![](resources/images/dhis2_mobile_sms/event-registration-parser.png)

Le format de ces commandes sera : \[nom de la commande] \[code] \[séparateur] \[valeur], par exemple :

**Naissance A=1,B=2,G=Mâle**

Le séparateur de code/valeur est configurable. Le barre verticale "|" est par défaut pris comme séparateur de champ. Les commandes ayant le paramètre ANALYSEUR_D'ENREGISTREMENT_D'ÉVÉNEMENTS seront reçues uniquement des utilisateurs DHIS2. Une fois la commande reçue avec succès, les données reçues par SMS seront analysées et l'événement sera enregistré dans le DHIS2.

## Service SMS { #mobile_sms_service }

Le service SMS est un service générique utilisé pour envoyer/recevoir des SMS. Tout autre module DHIS2 peut inclure ce service et l'utiliser pour envoyer et recevoir des SMS des utilisateurs ou des agents sur le terrain.

### Mise en place d'un service SMS { #setting-up-sms-service }

Il y a certaines conditions préalables pour rendre ce service fonctionnel. Il existe deux façons de procéder. La première consiste à configurer la passerelle à partir de l'interface graphique dans le module de configuration mobile. Pour ce qui est de l'autre, elle consiste à utiliser l'API Web SMS.

-   Configurer la passerelle SMS

#### Configurer la passerelle SMS { #configure-sms-gateway }

Il existe cinq différents types de Passerelles prises en charge par le service SMS. Les SMS peuvent être envoyés si l'une des passerelles est configurée. Si plusieurs passerelles sont présentes, elles seront utilisées en mode round-robin pour assurer l'équilibre des charges. Il existe différents paramètres pour chaque type de passerelle. La passerelle peut être configurée dans l'interface graphique du module de configuration mobile, comme le montre la figure. Pour plus d'informations sur les paramètres nécessaires à la configuration de la passerelle, voir [Configurations des passerelles](#gateway.configuration)

![](resources/images/dhis2_mobile_sms/sms-app.png)

#### Configurer la passerelle GenericHttp { #configure-generichttp-gateway }

De nombreuses instances DHIS2 utilisent GenericHttpGateway pour se connecter à leurs passerelles locales. Ces passerelles locales fournissent des API HTTP pour l'envoi de SMS. Dans la nouvelle GenericHttpGateway, il est désormais possible de configurer un modèle de configuration générique pour la configuration des passerelles. Ce modèle est converti en charge utile de requête en remplaçant les caractères de remplissage par des valeurs réelles tirées des paramètres de valeur clé de la passerelle.

![](resources/images/dhis2_mobile_sms/generic-gateway.png)

### Configurations des passerelles { #gateway.configuration }

Le tableau ci-dessous indique les paramètres nécessaires à la configuration de la passerelle.

<table>
<caption>Paramètres de configuration de la passerelle</caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>Paramètre</th>
<th>Passerelle BulkSMS</th>
<th>Passerelle Clickatell</th>
<th>Passerelle générique HTTP</th>
<th>Passerelle SMPP</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Nom de la passerelle</td>
<td>Facultatif</td>
<td>Facultatif</td>
<td>Facultatif</td>
<td>Facultatif</td>
<td>Utilisé comme identité de passerelle. Le nom par défaut sera stocké au cas où ce paramètre ne serait pas configuré. Son utilisation est recommandée</td>
</tr>
<tr class="even">
<td>Nom de l'utilisateur</td>
<td>Obligatoire</td>
<td>Facultatif (si un jeton est utilisé)</td>
<td>Obligatoire</td>
<td>Obligatoire</td>
<td>Utilisé pour l'authentification de l'API</td>
</tr>
<tr class="odd">
<td>Mot de passe</td>
<td>Obligatoire</td>
<td>Facultatif (si un jeton est utilisé)</td>
<td>Obligatoire</td>
<td>Obligatoire</td>
<td>Utilisé pour l'authentification de l'API</td>
</tr>
<tr class="even">
<td>Jeton d'authentification</td>
<td>S/O</td>
<td>Facultatif (si un mot de passe est utilisé)</td>
<td>S/O</td>
<td>S/O</td>
<td>Utilisé pour l'authentification de l'API</td>
</tr>
<tr class="odd">
<td>Modèle d'URL</td>
<td>S/O</td>
<td>S/O</td>
<td>Obligatoire</td>
<td>Obligatoire</td>
<td>Le modèle d'Url est seulement nécessaire dans le cas de GenericHttpGateway. Par exemple, &quot;http://smsgatewa1.com&quot;</td>
</tr>
<tr class="even">
<td>En-têtes</td>
<td>S/O</td>
<td>S/O</td>
<td>Facultatif</td>
<td>S/O</td>
<td>L'option En-tête peut être activée pour envoyer le paramètre sélectionné sous forme d'en-tête http. Par exemple, le nom d'utilisateur/mot de passe/token peut être envoyé dans l'en-tête http.</td>
</tr>
<tr class="odd">
<td>useGet</td>
<td>S/O</td>
<td>S/O</td>
<td>Facultatif</td>
<td>S/O</td>
<td>La méthode HTTP POST est utilisée par défaut pour l'envoi de données vers la passerelle. Mais dans certains cas, si la méthode HTTP GET est requise pour cette opération, le paramètre useGet peut être défini à true. La valeur par défaut du paramètre useGet est false.</td>
</tr>
<tr class="odd">
<td>Type de système</td>
<td>S/O</td>
<td>S/O</td>
<td>S/O</td>
<td>Obligatoire</td>
<td>Le paramètre Type de système est requis pour la passerelle SMPP. La valeur par défaut est 'cp'</td>
</tr>
<tr class="odd">
<td>Type de numéro</td>
<td>S/O</td>
<td>S/O</td>
<td>S/O</td>
<td>Obligatoire</td>
<td>Le paramètre Type de numéro est requis pour la passerelle SMPP. La valeur par défaut est 'UNKNOWN'. Les autres valeurs possibles sont UNKNOWN, INTERNATIONAL, NATIONAL, NETWORK_SPECIFIC, SUBSCRIBER_NUMBER, ALPHANUMERIC et ABBREVIATED</td>
</tr>
<tr class="odd">
<td>numberPlanIndicator</td>
<td>S/O</td>
<td>S/O</td>
<td>S/O</td>
<td>Obligatoire</td>
<td>Le paramètre NumberPlanIndicator est requis pour la passerelle SMPP. La valeur par défaut est UNKNOWN. Les autres valeurs possibles sont UNKNOWN, ISDN, DATA, TELEX, LAND_MOBILE, NATIONAL, PRIVATE, ERMES, INTERNET et WAP</td>
</tr>
<tr class="odd">
<td>Type de lien</td>
<td>S/O</td>
<td>S/O</td>
<td>S/O</td>
<td>Obligatoire</td>
<td>Le paramètre Type de lien est requis pour la passerelle SMPP. La valeur par défaut est TX. Les autres valeurs possibles sont BIND_TX, BIND_RX et BIND_TRX</td>
</tr>
<tr class="odd">
<td>condensé</td>
<td>S/O</td>
<td>S/O</td>
<td>S/O</td>
<td>Facultatif</td>
<td>Le paramètre Condensé est facultatif pour la passerelle SMPP. La valeur par défaut est false</td>
</tr>
<tr class="even">
<td>Paramètres envoi d'Url</td>
<td>S/O</td>
<td>S/O</td>
<td>Facultatif</td>
<td>S/O</td>
<td>Les paramètres de la passerelle seront ajoutés avec l'url par exemple https://samplegateway.com/messages?apiKey={apiKey}&to={recipients},content={text},deliveryreport={dp}</td>
</tr>
<tr class="odd">
<td>Type de contenu</td>
<td>S/O</td>
<td>S/O</td>
<td>Facultatif</td>
<td>S/O</td>
<td>Le type de données qui seront envoyées à la passerelle sms. La valeur par défaut est application/x-www-form-urlencoded. Les autres types pris en charge sont application/json, application/xml et texte/simple</td>
</tr>
<tr class="even">
<td>Modèle de configuration</td>
<td>S/O</td>
<td>S/O</td>
<td>Facultatif</td>
<td>S/O</td>
<td>Un modèle de configuration générique peut être utilisé pour fournir les données sous une forme compatible avec une passerelle externe. Par exemple nom d'utilisateur=${nom d'utilisateur}&mot de passe=${mot de passe}&to=${destinataires}&code pays=880&message=${text$}&messageid=0. Un modèle Json/xml peut également être fourni.</td>
</tr>
</tbody>
</table>
