---
edit_url: "https://github.com/hisptz/unicef-apps-docs/blob/master/src/commonmark/en/content/bna/bna-app-maintenance.md"
revision_date: '2021-09-09'
tags:
- Use
- App version 1.2.2
---

# BNA 应用程序维护 { #bna-app-maintenance }

## 干预措施和指标配置 { #interventions-and-indicators-configuration } 

如果没有创建干预并将其分配给仪表板，则BNA App会加载
预定义的干预措施，其预定义指标名为“指标1”，用于
每个决定因素。子级分析和根本原因分析将为空。

管理用户可以创建干预并将其分配到仪表板
供其他用户访问，具体取决于授予他们的共享访问权限。

### 建立干预 { #creating-intervention } 

要创建新干预措施，管理用户可以单击蓝色加号
按钮位于仪表板上的干预列表下方。干预是
那些持有决定因素的行列式指标。

![](resources/images/image009.png){width=50%}

然后必须输入干预名称（例如BEmOnC），然后单击“创建”按钮以
保存干预措施。

![](resources/images/image010.png){width=50%}

__注意：__尝试创建现有干预措施将被拒绝
由系统发出并显示一条消息，指出该干预已经存在。

![](resources/images/image011.png){width=25%}

### 干预措施和指标配置 { #interventions-and-indicators-configuration } 

管理用户可以通过单击
仪表板上干预列表下方的“设置”按钮可获取
设置页面。

![](resources/images/image012.png){width=50%}

管理需要共享干预以供其他用户访问，设置
BNA介绍和分析的时期，决定使用指标短
名称作为BNA图表中的显示名称，以及指定边界的图例
指标绩效指标。行政用户可以更改颜色
每个决定因素组指标的数量。

![](resources/images/image013.png){width=50%}

__注意：__附加到特定行列式的每个指标的条形图
组将继承该行列式组的颜色。

要将指标添加到行列式组中，只需单击加号按钮
从指标或函数中获取指标列表以添加到
BNA图表配置的决定因素组。

### 添加指标并配置图例集 { #adding-indicators-and-configuring-legend-sets } 

管理用户可以在行列式中添加指标或从行列式中删除指标
通过界面交互进行分组。向行列式添加指标
组，用户可以单击加号按钮以获取指标列表或
选择和添加功能。

管理用户可以为差，中和好配置截止点
每个指标的效果。临界点用于子级别分析
可视化。

![](resources/images/image014.png){width=70%}

### 访问控制和共享干预 { #access-control-and-sharing-interventions } 

必须共享干预措施，其他用户和用户组才能访问。
干预的工作方式与DHIS 2仪表板相同。如果不共享，仅
创建它们的用户可以访问和管理。共有三种分享选项
管理用户可以共享选择共享干预。

1. __可以查看和编辑：__使用此选项，任何用户都可以与
   此特权可以访问和编辑它，包括更改以下项的设置
   它。此访问权限应仅授予管理用户。
2. __只能查看：__管理用户应选择此选项来共享
   对应该访问BNA图表和子级别的用户进行干预
   分析并输入根本原因。对于BNA应用程序上下文，“仅查看”为
   授予不应该做的地区，区域和国家用户
   设置的任何更改。
3. __无访问权限：__如果您不想与任何人共享访问权限。

![](resources/images/image015.png){width=50%}

### 设置组织单位和期间 { #setting-organization-unit-and-period } 

管理用户可以设置组织单位和期间并保存更改
要加载的BNA图表。如果您设置了特定区域，则所有用户都将获得
选定地区的BNA图表加载。尽管用户可以过滤
图表及其首选的组织单位和期间，可能会造成混淆
他们。因此，重要的是管理用户必须设置“用户组织单位”
作为默认期限，以便每个用户都可以拥有其级别的BNA图表
显示。最好分配用户组织单位，以便每个
用户可以访问BNA图表和与其级别相关的子级别分析。

![](resources/images/image016.png){width=50%}

### 保存配置 { #saving-configurations } 

管理员对他们已应用的过滤器感到满意之后
为了进行干预，他们必须保存他们已经为这些配置
干预措施。要保存配置，他们只需单击
“保存更改”按钮。

![](resources/images/image017.png){width=70%}

 __注意：__编辑和保存共享干预的配置将
 将新配置反映给与
 干预已被共享。

## 标准数据分析 { #standard-data-analytics } 

输入DHIS2的数据必须首先用DHIS2处理
“分析”引擎。这意味着数据不会立即在
分析资源（例如BNA图表，子单位部门级分析表，
  输入数据透视表，数据可视化工具，GIS或报表）。如果
  计划已启用，分析过程将在午夜自动运行
  每天。之后，自上次输入以来的新数据
  分析过程已运行，将变得可见。

您可以通过选择手动触发分析过程
从主菜单中选择__Reports-> Analytics__，然后按“开始导出”按钮。
请注意，该过程可能需要花费大量时间，具体取决于数量
数据库中的数据。

## 函数数据分析 { #functions-data-analytics } 

功能选择是扩展的分析计算，可支持更多功能
开放式计算逻辑，例如逻辑运算，预测变量和
其他复杂的分析用例。要创建与BNA App一起使用的功能，
从此链接下载功能维护应用程序：<https://play.dhis2.org/appstore/app/dXX2Fk6jwCX>。功能使
使用纯正的旧JavaScript（vanilla JavaScript）逻辑进行计算
完全在浏览器上，不需要服务器。这是通过完成
期望周期和数据选择并返回的JavaScript代码的执行
标准DHIS2分析结果。功能选择是扩展分析
支持更开放的计算逻辑的计算，例如逻辑
运营，预测变量和其他复杂的分析用例。

## 指标功能的维护 { #maintenance-of-indicator-functions } 

功能包括三个关键组成部分：

4. __输入/选择参数：__函数需要标准DHIS2周期和
   组织单位选择。
5. __计算逻辑：__这是一个开放式工作区，用于编写
   在给定期间和组织单位选择上起作用的计算逻辑，
   计算逻辑通常分为规则维度，因此允许
   通过定义多个规则来支持不同用例的一项功能
   将控制计算逻辑。在主要领域中，可能性是无限的
   完成的操作包括。
       1 \。从汇总和事件分析中获取数据并修改结果
       使用自定义逻辑，然后将结果重新格式化为标准分析格式。
       2 \。从现有的SQL视图中获取数据，执行自定义逻辑和
       将结果格式化为标准分析格式。
       3 \。从其他DHIS2 API端点获取数据（例如data-value和
         事件api）和其他数据源（包括外部源），
         自定义逻辑和格式以标准分析格式生成结果。
6. __输出/返回的分析__：这是函数的最终结果输出，
   以标准分析格式格式化，以允许与标准兼容
   DHIS2分析应用程序。支持任何级别的开放式支持
   复杂性，已经开发了功能维护应用程序，以允许任何
   具有基本JavaScript知识的开发人员，可以快速开发自定义计算
   要么是DHIS2本身不支持，要么是允许开发人员解决
   标准分析的局限性或误算。

开发功能的主要要求包括：

* 具有JavaScript的基本Web编程知识（jQuery是一个优势）。
* 了解DHIS2 Web API和分析。
* 功能维护应用程序的有效安装。当一个功能
  首次安装维护应用程序，它将创建五个标准
  具有通用用例的函数作为示例函数，以允许代码重用以
  创建其他功能。自动创建的功能也将列在
  功能选择列表。

> __注意__
>
>从2.28开始的共享设置仅适用于
>接口，不严格执行访问控制，这是为了简化操作
>仅通过数据存储区管理BNA干预。

> __注意__
>
>出现在访问共享列表中的用户组应在用户中存在
>在“用户”应用中创建的组。

### 为干预添加书签 { #bookmark-an-intervention } 

要为干预添加书签，管理用户将必须直接前进
干预措施列表旁边的控制选项
共享图标中有一个书签图标。单击该图标将为仪表板添加书签
您当前正在查看。当前正在查看的仪表板的名称
也显示在此控制区域上。

![已添加书签的干预](resources/images/image56.png){width=70%}

### 删除干预 { #deleting-an-intervention } 

BNA App允许在必要时从系统中删除干预。
删除干预意味着您将删除所有指标，瓶颈图表，子级别
分析和根本原因分析是在该干预下创建的。这就是为什么之前
删除，系统会要求您确认是否确定要删除它，
您将在其中单击“是”删除或单击“否”取消。
要删除干预，管理用户可以：
1 \。去搜索刚刚分配在干预措施右侧的干预措施
添加新的干预图标并
2 \。单击特定干预措施上“编辑”按钮旁边的删除图标。
3 \。从列表中选择一项干预措施，然后在远端单击“删除”按钮
在应用程序的右侧，然后单击“是”选项确认删除。

![删除干预](resources/images/image57.png){width=25%}

![确认删除干预](resources/images/image58.png){width=25%}

## BNA窗口小部件设置 { #bna-widgets-setup } 

### 访问小部件 { #accessing-widgets } 

BNA窗口小部件主要由区域级别的用户访问。
窗口小部件是安装在DHIS2实例中的单独应用程序，可与
BNA应用程序。如果您在DHIS2实例中找不到它，请转到
在DHIS2全局菜单中的“应用程序管理”中进行安装。

![ DHIS2 应用商店中的 BNA 小部件](resources/images/image47.png){width=70%}

![在 DHIS2 中安装 BNA 小部件](resources/images/image59.png){width=70%}

### 设置小部件 { #setting-up-widgets } 

乍一看，当管理员将BNA应用程序安装到
一个干净的实例，干预的根本原因分析数据输入组件
将显示一条消息，提示用户转到DHIS2 Appstore，然后
下载“根本原因分析数据输入小部件”。
有关如何从DHIS2应用商店中安装应用的详细信息
可以在第二章中找到。

如果BNA应用程序的加载时间太长，而您的运行速度并不慢
网络，请确保您已清除浏览器缓存。

BNA应用程序充分利用了缓存文件，以实现更好的脱机
因此，在安装更高版本的BNA Application时会遇到
可能会使用旧版本的缓存文件，因此在加载时会崩溃。

## 清除应用程序缓存 { #clearing-application-cache } 

清除应用程序缓存和浏览器界面的方法各不相同
浏览器到浏览器；例如Mozilla Firefox的键盘
快捷方式是“ CTRL + SHIFT + DELETE”，而对于谷歌浏览器，键盘
快捷方式是“ CTRL + SHIFT + J”。

可以通过清除浏览器缓存的访问界面
以下方法：•Google chrome：转到菜单
图标，然后单击它以将其打开，请转到更多工具
菜单，然后选择“清除浏览数据”。界面打开后，制作
确保将“清除以下内容从”设置为“
时间”。

•Mozilla Firefox：转到右上角的菜单图标，然后
单击它以打开，转到->库，然后转到历史，然后选择“清除
最近的历史”。界面打开后，请确保“清除时间范围”
设置为“所有”，并且“详细信息”选项扩展为显示所有
详细信息选项。一旦清除了浏览数据或最近的历史记录，请勾选
“缓存”，“ Cookies”，“托管的应用程序数据”或“离线网站数据”。至
通过瓶颈清除所有缓存的文件，cookie和本地存储的数据
。

 ![Google Chrome 和 Firefox 中的菜单图标](resources/images/image39.png){width=10%}

> __注意__
>
>这些还将清除所有缓存信息
>以及您在浏览器中访问过的其他网站的cookie。

![用于清除浏览器缓存的 Google Chrome 界面](resources/images/image45.png){width=70%}

![用于清除浏览器缓存的 Mozilla firefox 界面](resources/images/image32.png){width=70%}

## BNA应用程序错误消息 { #bna-app-error-messages } 

BNA应用程序具有针对以下预期错误的错误消息：
可能发生。例如，尝试访问不再存在的元数据
存在于系统中。

