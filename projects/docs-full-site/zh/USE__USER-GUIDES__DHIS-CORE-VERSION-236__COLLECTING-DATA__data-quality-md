---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/2.36/src/user/control-data-quality.md"
revision_date: "2021-06-14"
tags:
    - 使用
    - DHIS 核心 2.36 版
---

# 控制数据质量 { #control_data_quality }

## 关于数据质量检查 { #about_data_quality }

**数据质量**应用程序包含用于验证系统中数据的准确性和可靠性的工具。您可以评估下表中概述的数据质量的不同维度：

 <table>
 <colgroup>
 <col style="width: 50%" />
 <col style="width: 50%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th> <p>尺寸</p> </th>
 <th> <p>说明</p> </th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p>正确</p> </td>
 <td> <p>数据应在该设施收集的数据的正常范围内。与来自相关数据元素的数据相比，应该没有明显的差异。 </p> </td>
 </tr>
 <tr class="even">
 <td> <p>完整性</p> </td>
 <td> <p>应该已经提交了所有报告组织单位的所有数据元素的数据。 </p> </td>
 </tr>
 <tr class="odd">
 <td> <p>一致性</p> </td>
<td><p> 数据应与前几个月和几年中输入的数据保持一致，同时允许进行重组，增加工作量等方面的更改，并与其他类似设施保持一致。</p></td> 
 </tr>
 <tr class="even">
 <td><p> 及时性 </p></td>
 <td><p>来自所有报告组织单位的所有数据都应在指定的时间提交。 </p></td>
 </tr>
 </tbody>
 </table>

您可以通过多种方式验证数据质量，例如：

-   在输入数据时，DHIS 2 可以检查所输入的数据是否在该数据元素的最小值和最大值范围内（基于以前登记的所有数据）。

-   通过定义验证规则，用户可以在完成数据输入后运行这些规则。用户还可以根据验证规则检查特定时期和组织单位的输入数据，并显示违反这些验证规则的情况。

-   通过分析数据集，即检查数据中的差距。

-   通过数据三角测量，即比较不同来源的相同数据或指标。

## 验证规则分析 { #validation_rule_analysis }

### 关于验证规则分析 { #about-validation-rule-analysis }

验证规则基于一个表达式，该表达式定义了数据元素值之间的数字关系。表达式构成了一个条件，应断言符合某些逻辑标准。

该表达式包括：

-   左侧

-   右边

-   操作员

验证规则可以断言 "疑似疟疾病例检测"\>="确诊疟疾病例"。

左侧和右侧必须返回数字值。

验证规则分析针对数据测试验证规则
在系统中注册。当
验证规则表达式中定义的条件不满足，其中
表示条件为假时。

您可以配置验证规则分析，以将有关验证违规的信息自动发送给选定的用户组。这些消息称为_validation notifications_，您可以在**维护**应用中创建它们。验证通知是通过内部DHIS 2消息系统发送的。

### 工作流程 { #workflow }

1.  在**维护**应用中，创建验证规则和验证规则组。

2.  （可选）在**维护**应用中，创建验证通知。

3.  自动或手动运行验证规则分析。

    -   在 **Scheduler** 应用程序中，您可以安排验证规则分析自动运行一个或多个验证规则组中的所有验证规则。系统运行分析后，您将在通过内部 DHIS 2 消息系统发送的验证通知中看到验证违规（如有）。

    -   在**数据质量**应用中，您可以针对选定的验证规则手动运行验证规则分析。分析过程完成后，您将看到验证违规列表（如果有）。

### 安排验证规则分析以自动运行 { #schedule-a-validation-rule-analysis-to-run-automatically }

> **注**
>
> 只有包含在一个或多个验证通知中的验证规则才会成为验证规则分析的一部分。如果某个验证规则没有相应的验证通知，则不会发送任何通知。

> **注**
>
> 自动运行验证规则分析时，任何尚未持久化的结果都将在运行期间持久化。目前只能通过 API 访问持久化结果。有关如何访问持久化验证规则违规的详细信息，请查阅开发人员指南。

1.  确认已创建所需的所有验证规则、验证规则组和验证通知。

2.  打开** Scheduler **应用程序，然后单击右下角的添加按钮。

3.  为新作业选择合适的名称。

4.  使用下拉菜单选择**监控**作业类型。

5.  选择作业的运行频率，即作业应在何时以及多久运行一次。

6.  填写**参数**部分，包括 验证 规则组。

7.  按**添加作业**按钮以确认作业创建。有关添加作业的更多信息，请参见[Scheduling]（data-administration.html＃scheduling）。

### 手动运行验证规则分析 { #run-a-validation-rule-analysis-manually }

![](resources/images/data_quality/validation_rule_analysis.png)

1.  确认已创建所需的所有验证规则、验证规则组和验证通知。

2.  打开**数据质量**应用，然后单击**验证规则分析**。

3.  选择**开始日期**和**结束日期**。

4.  选择要包括在分析中的**验证规则组**。

    您可以从一个验证规则组中选择所有验证规则或所有验证规则。

5.  （可选）选择**发送通知**以触发验证通知。

    > **Note**
    >
    > If you want to send out validation notifications, you must first create them in the **Maintenance** app.

6.  (可选） 选择_持续新结果_，以持续分析过程中发现的任何非持续结果

7.  选择一个**父级组织单位**。

8.  点击**验证**。

    分析过程的持续时间取决于分析的数据量。如果没有违反验证规则的情况，您将看到一条_验证成功通过_的信息。如果存在违反验证规则的情况，则会以列表形式显示。

    ![](resources/images/data_quality/validation_rule_analysis_result.png)

9.  (可选）单击显示详细信息图标，获取有关验证违规的更多信息。在弹出的窗口中，你会发现有关验证规则中包含的数据元素及其相应数据值的信息。您可以使用这些信息来确定验证规则违规的源头。

10. (可选）单击 **下载为 PDF**、**下载为 Excel** 或 **下载为 CSV**，以 PDF、Excel 或 CSV 格式下载验证违规列表。

### 也可以看看 { #see-also }

-   [管理验证规则](https://docs.dhis2.org/master/en/user/html/manage_validation_rule.html)

-   [数据管理应用程序](https://docs.dhis2.org/master/en/user/html/data_admin.html)

## 标准差离群分析 { #standard_deviation_analysis }

### 关于标准偏差离群分析 { #about-standard-deviation-outlier-analysis }

标准偏差离群分析确定的值是
与其余数据在数值上相距遥远，可能表明它们是异常值。
该分析基于标准正态分布。 DHIS 2计算
组织单位，数据元素，类别选项的所有值
组合和属性选项组合。异常可能发生
当然有机会，但可能表示测量或数据输入错误。

> **注**
>
> 如上所述，这种数据质量分析只适用于实际呈正态分布的数据。季节性变化较大的数据，或根据其他统计模型（如逻辑模型）分布的数据，可能会导致实际应被视为有效的值被标记。因此，建议在进行标准偏差离群值分析之前，首先确认数据是否实际呈正态分布。

### 运行标准偏差离群分析 { #run-a-standard-deviation-outlier-analysis }

![](resources/images/data_quality/std_dev_analysis.png)

1.  打开**数据质量**应用程序，然后单击**异常值检测**。

2.  选择数据集。

3.  选择 **组织单位**。

    可选择多个组织单位。分析依据的是所选单位的子层级中所有组织单位的原始数据，而不是汇总数据。

4.  选择**从日期**和**到日期**。

5.  将**算法**设为**Z-分数**

6.  选择**阈值**。

    这是指在将数据归类为离群值之前，允许数据偏离平均值的标准差个数。

7.  选择 ** 最大结果**

    这是指结果中列出的离群值的最大数量。

8.  (可选）选择**数据开始日期**和**数据结束日期**

    这些字段可用于对所提供日期范围内的数据子集执行离群值检测分析。留空时，将使用数据集的自然开始和结束日期 _（在高级部分）_。

9.  (可选）选择要**排序的措施**

    离群值可按**Z-score**或按**与平均值的绝对偏差**_（高级部分）_进行排序。

10. 点击 **开始** 分析过程的持续时间取决于分析的数据量。如果存在标准偏差异常值，它们将显示在列表中。 ![](resources/images/data_quality/std_dev_analysis_outlier_result.png) 对于每个离群值，您将看到数据元素、周期、组织单位、值、Z 值、偏差、标准偏差、平均值、最小值和最大值。最小值和最大值指的是根据分析所选标准差数量得出的边界值。

11. (可选）点击 **下载为 CSV**，以 CSV 格式下载列表。

> **提示**
>
> 点击复选框标记异常值，以便进一步跟进。

## 最小最大离群值分析 { #min_max_analysis }

### 关于基于最小最大值的离群分析 { #about-minimum-maximum-value-based-outlier-analysis }

您可以通过设置一个
每个数据值的最小/最大值范围。您可以定义值
手动设置范围或自动生成它们。

自动生成的最小值最大值范围仅适用于正态分布的数据。 DHIS2将确定给定数据元素，类别选项，组织单位和属性组合的所有值的算术平均值和标准偏差。然后，系统将根据在**系统设置**应用中指定的**数据分析标准差因子**计算最小最大值范围。

对于高度偏斜或零膨胀的数据（通常是这种情况）
包含汇总数据），DHIS2自动生成的值可能不会
提供准确的最小最大值范围。这可能导致
过多的虚假违规行为，例如，如果您分析与
季节性疾病。

> **注**
>
> 最小最大值范围是在给定数据元素、类别选项和组织单位组合的所有属性组合选项中计算得出的。

### 工作流程 { #workflow }

1.  自动或手动创建最小最大值范围。

    -   在**数据管理**应用程序中，您会自动生成值范围。

    -   在**数据输入**应用中，您可以手动设置值范围。

2.  在**数据质量**应用中，运行**最小-最大离群值分析**。

### 配置最小最大离群值分析 { #configure-a-minimum-maximum-outlier-analysis }

#### 自动创建最小值最大值范围 { #create-minimum-maximum-value-range-automatically }

![](resources/images/data_quality/generate_min_max.png)

> **注**
>
> 自动生成的最小最大值范围在很多情况下都很有用，但建议在使用此函数之前先验证数据是否真正呈正态分布。

您将生成由**数据管理**应用程序中的数据集计算得出的最小最大值范围。新的值范围将覆盖系统先前计算的任何值范围。

1.  设置**数据分析标准偏差（std dev）系数**：

    1.  打开**系统设置**应用，然后单击**常规**。

    2.  在“**数据分析标准差因子**字段中，输入一个值。

        设置异常值分析中使用的标准差个数。默认值为 2。数值越大，表示分布范围越广，可能导致分析无法正确标记异常值。

2.  打开**数据管理**应用程序，然后单击**最小-最大值生成**。

3.  选择数据集。

4.  选择一个**组织机构**。

5.  点击**生成**。

    为所选数据集中的所有数据元素（包括所选组织单位的后代）生成新的最小最大值范围。

#### 手动创建最小值/最大值范围 { #create-minimummaximum-value-range-manually }

![](resources/images/data_quality/set_min_max_manually.png)

1.  在**数据输入**应用中，打开一个数据输入表单。

2.  双击要为其设置最小/最大值范围的字段。

3.  在出现的对话框中输入**最小限制**和**最大限制**。

4.  点击**保存**。 

    如果下次输入数据时数值不在新数值范围内，数据输入单元格将显示橙色背景。

5.  (可选）键入注释以解释出现差异的原因，例如某机构发生的事件可能产生了大量客户。

6.  （可选）点击**保存评论**。

> **提示**
>
>单击星号图标以标记该值以进行进一步跟踪。

#### 删除最小最大值范围 { #delete-minimum-maximum-value-range }

您可以在**数据管理**应用程序中永久删除所选数据集和组织单位的所有最小最大值范围。

1.  打开**数据管理**应用程序，然后单击**最小-最大值生成**。

2.  选择数据集。

3.  选择一个**组织单位**。请注意，选择将级联到下属组织单位！

4.  点击**删除**。

### 运行最小最大离群值分析 { #run-a-minimum-maximum-outlier-analysis }

![](resources/images/data_quality/min_max_analysis.png)

1.  确认您已创建最小最大值范围。

2.  打开**数据质量**应用程序，然后单击**异常值检测**。

3.  选择数据集。

4.  选择**父组织单位**。

    可选择多个组织单位。分析依据的是所选单位的子层级中所有组织单位的原始数据，而不是汇总数据。

5.  选择**从日期**和**到日期**。

6.  将**算法**设置为**最小-最大值**。

7.  选择 ** 最大结果**

    这是指结果中列出的离群值的最大数量。

8.  点击**开始**

    分析过程的持续时间取决于分析的数据量。如果存在标准偏差异常值，将以列表形式显示。

    ![](resources/images/data_quality/min_max_result.png)

    对于每个异常值，您将看到数据元素、期间、组织单位、值、偏差、最小值和最大值。

9.  (可选）点击 **下载为 CSV**，以 CSV 格式下载列表。

> **提示**
>
> 点击复选框，标记该值，以便进一步跟进。

## 后续分析 { #follow_up_analysis }

### 关于后续分析 { #about-follow-up-analysis }

后续分析将创建一个标记为后续的所有数据值的列表。您可以在**数据输入**应用程序中将数据标记为后续数据，并在结果列表中从标准偏差离群值或最小最大离群值分析中获得。

### 创建标记为后续数据值的列表 { #create-list-of-data-values-marked-for-follow-up }

![](resources/images/data_quality/follow_up_analysis.png)

1.  打开**数据质量**应用，然后单击**后续分析**。

2.  选择一个或多个数据集。

3.  选择 **组织单位**。

    可选择多个组织单位。分析依据的是组织单位 "下 "的原始数据，而不是汇总数据。

4.  选择一个**开始日期**和**结束日期**，它们定义了您想要查找标记为要跟踪的值的期间。

5.  按**跟进**，生成已标记为需要跟进的数值列表。

6.  (可选）单击 **下载为 PDF**、**下载为 Excel** 或 **下载为 CSV**，以 PDF、Excel 或 CSV 格式下载验证违规列表。

![](resources/images/data_quality/follow_up_analysis_result.png)

> **提示**
>
> 点击星形图标，从数据值中删除后续标记。您还可以在该字段中输入注释，以说明有关该值的任何其他信息。
