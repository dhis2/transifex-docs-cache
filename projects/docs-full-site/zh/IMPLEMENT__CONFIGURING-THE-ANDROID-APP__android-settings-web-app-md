---
edit_url: "https://github.com/dhis2/dhis2-android-capture-app/edit/master/docs/src/commonmark/en/content/capture-app/app-android-settings-configuration.md" 
---
# Android设定网路应用程式   { #android-settings-web-app } 

## 总览 { #overview } 

本节重点介绍Android设置网络应用的实现。

Android Settings Web App允许管理员为DHIS2 Android Capture App配置同步参数，对android设备的本地数据库进行加密，并对给定android用户同步的数据和元数据的大小进行测试。在此Web应用程序中定义的配置参数将使用DHIS2 Android Capture App覆盖所有android设备的设置。

请注意，在此版本的Web应用程序中，只有具有“ ALL”权限的用户才能在配置中定义这些参数。有权访问该Web应用程序的其他用户可以看到参数的值，但不能对其进行编辑。


## 常规下载同步设置 { #general-download-sync-settings } 

包括配置，例如android应用多久同步一次元数据和数据，每个TEI要下载的保留值数量以及对设备数据库进行加密。

![](../content/capture-app/resources/images/general-settings.png)

**元数据同步：**管理员用户可以选择元数据同步的频率。例如每24小时同步一次元数据。

**数据同步：**管理员用户可以选择数据同步的频率。例如每6小时同步一次数据。

** SMS网关：**此部分允许管理员用户编辑SMS网关电话号码。

**保留值：**这将指定要在设备中下载的每个TEI属性的保留值数。

**加密设备数据库：**

> **警告**
>
> 这是一个关键操作，将影响所有与服务器同步的 Android 设备的本地数据库（不会影响服务器 DHIS2 数据库）。
>
> 默认情况下，Android 应用程序数据库未加密，但管理员可以检查*加密设备数据库*以加密每个设备中存储的元数据和数据。加密数据库会对数据库容量和Android应用程序的性能产生影响。另请注意，在选择或取消选择此选项时，不会丢失任何数据（即使之前尚未与服务器同步）


**禁用所有设置：**通过单击此按钮，用户将删除所有android confiuration设置，因此不会对Android Capture应用程序应用任何配置（如果是这种情况，则应用的同步参数是Android Capture中定义的参数应用）。


## 程序下载同步设置 { #program-download-sync-settings } 

它允许管理员用户为程序指定同步参数。本节分为两部分，全局设置和特定设置。

### 全局设置 { #global-settings } 

全局设置适用于android用户有权访问的所有程序。

![](../content/capture-app/resources/images/program-global-settings.png)

**要下载的TEI：**要从服务器下载的最大TEI数。

** TEI下载期：**它将下载在一段时间内已更新的TEI。例如上个月内已更新的TEI

**要下载的事件：**要下载的最大事件数。

**事件下载时间：**它下载事件日期属于特定时间段的事件。

### 具体设定 { #specific-settings } 

此部分允许管理员用户指定同步数据时特定程序的行为。特定配置将覆盖本节中列出的程序的常规设置。要添加特定程序的设置：

- Click on *Add a Program-specific setting*, a Dialog will appear. 
- 用户可以单击下面的“每个程序的值”标题，找到程序列表。
- 单击一个程序将显示要配置的不同参数。参数的数量取决于程序类型（有或没有注册）。

**无需注册的程序设置**

![](../content/capture-app/resources/images/program-specific-dialog-without_registration.png)

**注册程序的设置**

![](../content/capture-app/resources/images/program-specific-dialog-with_registration.png)

如果已保存任何特定设置，则表格将显示一个摘要，其中包含每个程序的特定配置以及用于编辑或删除这些设置的选项。

![](../content/capture-app/resources/images/program-specific-table.png)

### 重设所有值 { #reset-all-values } 

点击 *Reset all values* 后，管理员用户将恢复程序部分的默认设置值。请注意，在这种情况下，每个程序都没有特定的设置。 

要保存任何配置，管理员用户需要点击*保存*按钮（没有 "全部 "权限的用户不能使用该按钮）


## 数据集下载同步设置 { #data-set-download-sync-settings } 

它允许管理员用户为数据集指定同步参数。它分为两个部分。

### 全局设置 { #global-settings } 

第一部分是适用于android用户有权访问的所有数据集的全局设置。

![](../content/capture-app/resources/images/dataset-global-settings.png)

**周期数：**最大下载周期数。

### 具体设定 { #specific-settings } 

要添加特定设置：
 - 单击*添加数据集特定设置*，将找到一个包含数据集列表的对话框，
 - 单击数据集，该字段将根据数据集周期类型使用默认值自动完成。

![](../content/capture-app/resources/images/dataset-specific-dialog.png)

![](../content/capture-app/resources/images/dataset-specific-table.png)


## 用户同步测试 { #user-sync-test } 

本部分检查用户将同步到其设备的数据和元数据量。您可以对任何有权访问的用户运行此测试。此测试显示了android用户可以访问的组织单位，数据集，程序规则，程序等的数量（因此android应用程序将下载的资源），以及元数据和数据下载大小（大约估算值） 。请注意，用户无需具有“全部”权限即可运行此测试。

![](../content/capture-app/resources/images/user-sync-test.png)

> **注：**
>
> 以红色突出显示的值是因为该值被认为大于最大推荐值。


## 安装 { #installation } 

用户可以登录DHIS2并转到**应用程序管理**来轻松安装Android设置网络应用程序。

- 点击** App Store **
- 转到*Android 设置应用程序*
- 单击*安装V1.0.0*

![](../content/capture-app/resources/images/app-store-install.png)


## 登录和首次设置 { #log-in-and-first-time-setup } 

用户首次安装并启动Android设置网络应用后，该网络应用将需要设置并保存配置的默认值。这会将默认设置应用于连接到该实例的所有android设备。

![](../content/capture-app/resources/images/first-time-setup.png)


> **警告**
>
> 只有具有“ALL”权限的用户才能*保存或更新*配置，但任何用户在创建后都将具有查看访问权限。


![](../content/capture-app/resources/images/first-setup-no-authorities.png)


## 输入并保存配置参数 { #enter-and-save-configuration-parameters } 

### 数据存储 { #datastore } 

内部所有设置都以JSON格式存储在[Datastore]（https://docs.dhis2.org/master/zh/developer/html/webapi_data_store.html）中。

数据存储结构：

| 项目        | 描述 | 数据类型 |
| ----------- | ----------- | --------- |
| 命名空间   | 条目组织的命名空间 | 串 |
| 键         | 识别价值的钥匙 | 串 |
| 值       | 包含条目信息的值 | JSON格式 |

### 保存配置参数 { #save-configuration-parameters } 

在所有设置部分的表单页脚中，管理员用户可以找到*保存*按钮。

![](../content/capture-app/resources/images/save_button.png)

仅当管理员用户单击此按钮时，对当前部分所做的所有更改都将保存在数据存储区中。这些更改将在同步其配置时应用于Android Capture应用。

**未保存的更改：**

如果管理员用户想要在还有一些未保存的更改的情况下转到另一个部分，则会在离开当前部分之前显示警报。如果用户接受离开页面，则未保存的更改将丢失。

![](../content/capture-app/resources/images/unsaved-changes.png)

#### 将所有值重置为默认值 { #reset-all-values-to-default } 

管理员用户可以随时恢复设置。所有设置部分的表单页脚处都有一个*将所有值重置为默认值*按钮。

![](../content/capture-app/resources/images/reset-default.png)

默认值将仅在数据存储上恢复并在单击*保存*后应用。


