---
edit_url: "https://github.com/dhis2/dhis2-releases/blob/master/releases/2.35/README.md"
revision_date: '2023-08-30'
tags:
- Implement
- DHIS core version 2.35
---

# 2.35升级说明 { #235-upgrade-notes } 

> :警告: **如果从早期版本升级，请确保您已阅读 [PREVIOUS RELEASE](../2.34/README.md) 中的升级说明**

## 数据库 { #database } 

- Excessive data element operands _might_ have been created due to an issue with saving of pivot tables. This [script](https://github.com/dhis2/dhis2-utils/blob/master/resources/sql/delete_deprecated_operands.sql) could be run in order to delete deprecated `data element operands` that prevents the deletion of `data elements`. More information about this in Jira issue [DHIS2-7043](https://jira.dhis2.org/browse/DHIS2-7043).

## API { #api }

- 普通最终用户不再需要 `F_USER_VIEW`（"查看用户"）权限，例如使用 Tracker Capture 应用程序。该权限应从最终用户（而非用户管理员）的用户角色中移除。更多信息请参阅[变更说明](https://github.com/dhis2/notes-backend/blob/master/platform/35/changelog/export_user_authority.md)。
- 现在需要`F_USER_VIEW`权限通过`/ api / metadata`端点导出用户信息。
- User information linked to metadata entities in the API is being restricted. Field filtering is restricted and only the `id`, `code`, `username`, `name`, `displayName` fields are available. Read more in the [change note](https://github.com/dhis2/notes-backend/blob/master/platform/35/changelog/user_property_transformer.md).

## 功能 { #functionality } 

- J2ME移动应用程序现已终止，将不再起作用。

## 应用 { #apps } 

- A new `SMS configuration` web app is made available. This app will supersede the `Mobile configuration` web module. The latter module will be maintained for some time until the former app is considered stable.

## 特定于补丁的更改{ #patch-specific-changes }

### 2.35.2 数据库架构{ #2352-database-schema }

- 为表 `trackedentityprogramowner` 的列 `(trackedentityinstanceid,programid,organisationunitid)`新建索引。改进了在程序上下文中与组织单位范围有关的查找。
- 为表 `programinstance` 的列 `(programid)` 新建索引。改进了大多数情况下根据程序查找程序实例的一般方法。
- 在表 `trackedentityattributevalue` 中为`(trackedentityinstanceid, trackedentityattributeid, lower(value))`列建立新索引。这是对先前的`(trackedentityattributeid, lower(value))`列索引的补充。我们看到，在跟踪实体实例的情况下，postgres 会返回到顺序扫描，而使用现有索引会得到更好的结果。有了新索引，我们就能成功地鼓励 postgres 在对跟踪实体实例进行匹配时也使用该索引。
- 为表 `programstageinstance` 的列 `(status,executiondate)`新建索引。该表通常比跟踪的实体实例表和程序实例表大很多，当在搜索中将程序阶段实例作为过滤器时，我们发现一些查询出现了瓶颈。我们添加了这个索引，以提高我们最常用的过滤列 status 和 executiondate 的性能，后者在搜索事件时经常与 status 一起使用。

> **注意**
>
> 由于索引数量及其表的典型大小，请注意升级到此版本或更高版本可能需要大量时间。

