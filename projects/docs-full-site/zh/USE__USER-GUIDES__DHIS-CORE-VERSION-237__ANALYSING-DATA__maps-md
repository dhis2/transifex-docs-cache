---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/2.37/src/user/using-the-maps-app.md"
revision_date: '2022-02-23'
tags:
- DHIS core version 2.37
- 使用
---

# 使用地图应用 { #using_maps }

## 关于地图应用 { #about_maps }

地图应用程序在 2.29 版中引入并作为替代
GIS 应用程序提供更直观和用户友好的界面。
2.34 版本的映射引擎基于 WebGL 技术，
能够同时在地图上显示数千个特征。

使用地图应用程序，您可以覆盖多个图层并从中选择
不同的底图。您可以创建区域和点的专题地图，
根据分类查看设施，并可视化集水区
每个设施。您可以为区域和点添加标签，并搜索
并使用各种标准进行过滤。您可以移动点并设置位置
在飞行中。地图可以保存为收藏夹并与其他用户共享
和组，或作为图像下载。

> **注意**
>
> 要在 **Maps** 应用程序中使用预定义的图例，您需要创建它们
> 首先在 **Maintenance** 应用程序中。

![](resources/images/maps/maps_main.png)

- 工作区左侧的**图层面板**显示一个
  当前地图的图层概览：

  - 添加图层时，使用 **(+) 添加图层** 按钮，它们
    在此面板中安排和管理。

  - **底图** 始终显示在面板中。默认的
    底图为 OSM Light，默认选中。开放街道地图
    详细包含更多地图特征和地名。有4个
    来自 Bing Maps 的底图，替换之前提供的 Google Maps
    版本。 Bing Road 和 Bing Dark 显示道路、边界和地点。
    如果地图图层上的颜色很亮，请使用深色版本。
    Bing 天线和 Bing 天线标签 shos 卫星和详细的天线
    意象。通过选择所需的图像在它们之间切换。

  - 图层面板右侧的小箭头按钮，位于
    顶部，允许隐藏或显示面板。

<!-- end list -->

- 靠近左上角的 **File** 按钮允许您打开和保存
  地图：

  - 新

    将清除所有现有地图图层以创建新地图。

  - 打开

    将显示一个包含现有地图列表的对话框，其中
    它们被打开、重命名、共享和删除。 _标题
    当前地图显示在文件上方的标题栏中
    按钮。_

  - 保存

    会将所有更改保存到当前地图。

  - 另存为

    将使用新名称保存当前地图。

  - 改名

    允许您更改当前的名称和/或描述
    地图。

  - 翻译

    允许您翻译名称和/或描述
    当前地图。

  - 分享

    将打开一个对话框，可以在其中共享当前地图
    每个人或一组用户。

  - 获取链接

    将提供直接链接到当前地图。

  - 删除

    删除当前地图。

<!-- end list -->

- 文件按钮旁边的 **下载**按钮可让您将当前地图下载为PNG图像。

<!-- end list -->

- 右上角的**解释**按钮打开解释
  工作区右侧的面板。按钮只是
  如果地图已保存，则可点击。

  - **地图详细信息**显示有关当前地图的信息。

  - **解释**允许您查看、添加、编辑和分享
    关于当前地图的解释。

<!-- end list -->

- 地图上的 **+** 和 **-** 按钮允许您放大和缩小
  分别是地图。鼠标滚轮缩放是连续的，
  使我们能够将地图完美地贴合您的内容。

- **旋转地图**按钮（三角形箭头）允许您
  旋转和倾斜地图以增强数据视图。按下按钮
  （或键盘上的 Control 键）同时移动鼠标以更改
  地图视图。再次单击以重置视图。

- **全屏**（四个箭头）允许您全屏查看地图。
  要退出全屏，请再次单击按钮或键盘上的退出键。

* **缩放到内容**（有界放大镜符号）自动
  调整缩放级别和地图中心位置以放置数据
  你的地图是焦点。

* **搜索**（放大镜符号）允许搜索和
  跳到地图上的某个位置。

* 使用**直尺**按钮，您可以测量地图上的距离和面积。

* 右键单击地图以显示该地图的经度和纬度
  地点。

**底图**

底图图层由图层面板中的图层 _cards_ 表示，例如
作为：

![](resources/images/maps/maps_basemap_card.png)

在底图卡的顶部，从左到右分别是：

- 所选底图的标题

- 折叠和展开底图卡的箭头符号

底图卡片的中间是可用底图的列表。这
当前底图突出显示。

底图卡的底部是：

- 用于切换图层可见性的眼睛符号

- 用于修改图层透明度的滑块

## 建立新地图 { #using_maps_create_map }

1.  在 **应用** 菜单中，单击 **地图**。 **DHIS2 地图**窗口
    打开。

2.  单击左上角的 (+) 添加图层按钮。你被介绍
    使用图层选择对话框：

    ![](resources/images/maps/maps_layer_selection.png)

3.  选择要添加到当前地图的图层。可能的选项是：

    - [专题](#using_maps_thematic_layer)

    - [事件](#using_maps_event_layer)

    - [跟踪实体](#using_maps_tracked_entity_layer)

    - [设施](#using_maps_facility_layer)

    - [组织单位](#using_maps_org_unit_layer)

    此外，Google Earth 还提供了几个图层
    引擎和其他服务：

    - 人口

    - 人口年龄组

    - 海拔

    - 沉淀

    - 温度

    - 土地覆盖

    _标签覆盖_是一个[外部
    layer](#using_maps_external_map_layers) 在维护应用程序中定义。

## 管理主题层 { #using_maps_thematic_layer }

_专题图_代表地理分布的空间变化。
选择您想要的指标/数据元素、周期和
组织单位层面。如果您的数据库有坐标并聚合
这些组织单位的数据值，它们将出现在地图上。

> **注意**
>
> 您必须生成 DHIS2 分析表才能拥有聚合数据
> 可用值。

![](resources/images/maps/maps_thematic_mapping.png)

专题图层由图层面板中的图层 _cards_ 表示，例如
作为：

主题卡的顶部从左到右分别是：

- 抓取字段，允许使用鼠标拖动和重新排序图层

- 与图层关联的标题和时期

- 折叠和展开主题卡片的箭头符号

主题卡的中间是一个图例，表示价值
显示在图层上的范围。

主题卡的底部从左到右分别是：

- 编辑（铅笔）按钮以打开图层配置对话框

- 用于切换图层可见性的眼睛符号

- 用于修改图层透明度的滑块

- 具有更多选项的更多操作（三个点）按钮：

  - **数据表** 切换按钮，用于显示或隐藏数据表
    与图层相关联

  - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

  - **编辑图层**与上方的编辑按钮相同

  - **移除图层**将从当前地图中移除该图层。

### 创建一个主题层 { #create-a-thematic-layer } 

要创建事件层，请在 **添加
层**选择**热力**。这将打开事件层配置对话框。

1.  在**数据**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_DATA.png)

    - 选择一种数据类型，然后分别选择组和
      目标元素。可用字段取决于类型
      选择的项目。

    - 从 **聚合类型** 字段中为数据选择一个值
      要在地图上显示的值。默认情况下，“按数据元素”是
      被选中。替代值是： Count;平均数;和;标准
      偏差;方差;分钟；最大限度。另见[聚合
      运营商]（https://dhis2.github.io/dhis2-docs/master/en/user/html/ch10s05.html#d0e8082）。

2.  在**期间**标签中

    ![](resources/images/maps/maps_thematic_layer_dialog_PERIOD.png)

    - 选择映射专题数据的时间跨度。
      您可以选择相对或固定时间段。

      - 相对时期

        在 **Period type** 字段中选择 **Relative**，然后
        选择一个相对时期，例如**去年**或
        **过去 12 个月**，在 **Period** 字段中。

        **默认的分析相对周期**可以在**系统设置**中设置
        应用程序。

        如果您选择涵盖多个年/月/周/天的相对时间段
        该图层可以显示为

        - 单（合计）

          显示所选相对期间的汇总值（默认）。

        - 时间线

          包括一个时间线，让您可以逐步完成各个时期。
          同一地图只能添加一个时间线图层。

        - 拆分地图视图

          显示多张地图，让您可以比较不同时期
          并排。支持 12 个项目的相对时间段
          或以下。不能与其他图层类型组合。

      - 固定期间

        在 **Period type** 字段中选择期间长度，然后
        在 **Period** 字段中选择目标。

      - 开始/结束日期

        在**期间类型** 字段中选择**开始/结束日期**
        并填写开始日期和结束日期。

3.  在**ORG UNITS**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_ORG_UNITS.png)

    - 选择要包含在图层中的组织单位。
      可以选择任一

      - 一个或多个特定的组织单位，组织单位级别在
        层次结构、组织单位组，或

      - 组织单位层次结构中的相对级别，具有
        尊重用户。通过选择**用户组织
        单位** 地图数据对用户的显示会有所不同
        组织单位层次结构中的不同级别。

4.  在**过滤器**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_FILTER.png)

    - 单击 ADD FILTER 并选择可用数据项以添加新的
      过滤数据集。

      - 从下拉框中选择一个数据维度。你可以
        使用搜索字段减少显示的维数。
        单击名称以选择维度。

      - 选择维度后，您将获得第二个下拉菜单
        维度项。选中您要包含在
        筛选。

      可以添加多个过滤器。点击右侧的垃圾桶按钮
      过滤器将其删除。

5.  在**样式**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_STYLE.png)

    - 选择**钟形**或**气泡图**。

      - Choropleth 将根据
        数据值。如果数据是标准化的，这是推荐的技术
        （人均）。

      - 气泡图将数据值显示为比例圆圈。用这个
        如果数据未标准化（绝对数字）的技术。圆圈是
        放置在每个组织单位的中心。

    - 为比例圆设置 **低半径** 和 **高半径** 或
      点设施。圆将根据低半径和高半径进行缩放
      到数据值。半径需要在 0 到 50 像素之间。

    - **显示标签**：允许在图层上显示组织单位名称。字体大小、重量、
      可以在这里修改样式和颜色。

    - **不显示数据**：默认情况下，地图上不会显示缺少数据值的组织单位。
      如果您想用颜色显示它们，请选中此框。单击颜色以更改它。

    - 选择图例类型：

      - **自动颜色图例**：应用程序将根据以下内容为您创建图例
        您选择的分类方法、类别数量和色阶。放
        **分类**为：

        - 等间隔

          每个间隔的范围将是（最高数据值-最低数据值/类数）

        - 均数

          图例创建者将尝试平均分配组织单位。

      - **预定义的颜色图例**：在预定义的图例之间进行选择。

      - **单色图例**：选择气泡或圆圈的颜色。仅可用
        用于气泡图。

6.  点击**添加图层**。

### 修改主题层 { #modify-a-thematic-layer } 

1.  在图层面板中，单击主题上的编辑（铅笔）图标
    层卡。

2.  根据需要修改任何选项卡上的设置。

3.  点击**更新图层**。

### 筛选主题层中的值 { #filter-values-in-a-thematic-layer } 

专题图层有一个 **data table** 选项，可以打开或
从专题图层卡上关闭。

![](resources/images/maps/maps_thematic_layer_data_table.png)

数据表显示构成主题层的数据。

- 单击标题将根据该列对表格进行排序；
  在上升和下降之间切换。

- 在标题下方的过滤器字段中输入文本或表达式
  将这些过滤器应用于数据，并且显示将调整
  根据过滤器。过滤器应用如下：

  - 名称

    按包含给定文本的名称过滤

  - 值

    按给定的数字和/或范围过滤值，例如：
    2,\>3&\<8

  - 传说

    按图例过滤并包含给定的文本

  - 范围

    按包含给定文本的范围过滤

  - 水平

    按数字和/或范围过滤级别，例如：2，\> 3＆\ <8

  - 父母

    按包含给定文本的父项名称过滤

  - ID

    按包含给定文本的ID进行过滤

  - 类型

    按包含给定文本的GIS显示类型过滤

  - 颜色

    按包含给定文本的颜色名称过滤

> **注意**
>
> 数据表过滤器是临时的，不与地图层一起保存
> 作为收藏夹的一部分。

### 搜索组织单位 { #search-for-an-organisation-unit } 

数据表中的 NAME 过滤器字段提供了一种有效的方法
搜索单个组织单位。

### 打开组织部门资料{ #open-organisation-unit-profile }

您可以通过三种方式打开[组织单位资料](#using_maps_org_unit_profile)：

1. 单击地图上显示的任何组织单位，然后单击
   弹出窗口中的 **查看个人资料** 按钮。

2. 右键单击地图上的组织单位之一，然后选择 **查看个人资料**
   从菜单中。

3. 单击**数据表**中的组织单位行。

### 在组织层次结构之间导航 { #navigate-between-organisation-hierarchies } 

当地图上有可见的组织单位时，您可以轻松地
在不使用级别/父级的情况下在层次结构中上下导航
用户界面。

1.  右键单击组织单位之一。

2.  选择**向上钻取一级**或**向下钻取一级**。

    如果您处于最低级别或
    如果在下面的级别上没有可用的坐标。同样地
    向上钻取选项从最高级别被禁用。

### 删除主题层 { #remove-thematic-layer } 

要清除主题层中的所有数据：

1.  在左侧的图层卡中，单击_更多操作_（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理事件层 { #using_maps_event_layer }

事件层显示注册事件的地理位置
在 DHIS2 跟踪器中。只要事件具有关联的点或多边形
坐标，您可以使用此图层从聚合的
显示在专题层中的数据给底层个人
事件或案例。

您还可以显示设施或组织的聚合事件
单位。您可以通过使用事件数据的主题层来完成此操作
项目。当您只有组织的坐标时，这非常有用
记录事件的单位。

![](resources/images/maps/maps_event_layer.png)

事件层由层面板中的层 _cards_ 表示，例如
作为：

在事件卡的顶部，从左到右分别是：

- 抓取字段，允许使用鼠标拖动和重新排序图层

- 与图层关联的标题和时期

- 折叠和扩展事件卡的箭头符号

在事件卡的中间是一个说明样式的图例
层。

在事件卡的底部，从左到右分别是：

- 编辑（铅笔）按钮以打开图层配置对话框

- 用于切换图层可见性的眼睛符号

- 用于修改图层透明度的滑块

- 具有更多选项的更多操作（三个点）按钮：

  - **数据表**切换按钮可显示或隐藏与图层关联的数据表

  - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

  - **编辑图层**与上方的编辑按钮相同

  - **移除图层**将从当前地图中移除该图层。

### 创建一个事件层 { #maps_create_event_layer }

要创建事件层，请在 **Add
层**选择**事件**。这将打开事件层配置对话框。

1.  在**数据**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_DATA.png)

    - 选择一个项目，然后选择一个项目阶段。**阶段**
      字段仅在选择程序后显示。

      如果所选程序只有一个阶段可用，
      舞台是自动选择的。

    - 从 **Coordinate field** 中为位置选择一个值
      显示在地图上。默认情况下，选择“事件位置”。
      根据属于一个的数据元素或属性
      程序，其他坐标如“家庭位置”是
      可用的。

    - 默认情况下，所有带有坐标的事件都显示在地图上。
      使用 **Event status** 字段仅显示具有一个的事件
      状态：活动、已完成、计划、过期或已跳过。

2.  在**期间**标签中

    ![](resources/images/maps/maps_event_layer_dialog_PERIOD.png)

    - 选择事件发生的时间跨度。你可以
      选择固定期间或相对期间。

      - 相对时期

        在 **Period** 字段中，选择相对期间之一，
        例如**本月**或**去年**。

        **默认的分析相对周期**可以在
        **系统设置**应用程序。

      - 固定期间

        在 **Period** 字段中，选择 **Start/end Dates** 并填写
        在开始日期和结束日期。

3.  在**ORG UNITS**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_ORG_UNITS.png)

    - 选择要包含在图层中的组织单位。
      可以选择任一

      - 一个或多个特定的组织单位，或

      - 组织单位层次结构中的相对级别，具有
        尊重用户。通过选择**用户组织
        单位** 地图数据对用户的显示会有所不同
        组织单位层次结构中的不同级别。

4.  在**过滤器**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_FILTER.png)

    - 单击 ADD FILTER 并选择可用数据项以添加新的
      过滤数据集。

      - 对于 _option set_ 类型的数据项，您可以选择任何一个
        使用向下的下拉框中的选项
        箭头或直接在框中开始输入以过滤
        选项。

      - 对于 _number_ 类型的数据项，您可以选择运算符，例如
        等于、不等于、大于或小于。

      - 对于 _boolean_ 类型的数据项（是/否），您可以选中该框
        条件是否应为有效或为真。

      - 对于 _text_ 类型的数据项，您将有两个选择：
        **Contains** 表示查询将匹配所有值
        其中包含您的搜索值，并且**是精确的**意味着
        只有与您完全相同的值
        将返回搜索查询。

      可以添加多个过滤器。点击右侧的垃圾桶按钮
      过滤器将其删除。

5.  在**样式**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_STYLE.png)

    - 选择 **Group events** 将附近的事件（集群）分组，或
      **查看所有事件**以单独显示事件。

    - 为事件或聚类点选择一种**颜色**。

    - 为事件选择**半径**（1到20之间）。

    - 选择 **Show buffer** 以显示每个周围的视觉缓冲区
      事件。可以在此处修改缓冲区的半径。这
      选项仅在您选择 **查看所有事件** 时可用
      以上。

    - 选择 **Style by data element** 为事件着色
      根据数据值。如果您还选择将事件分组，
      culsters 将显示为小圆环图显示
      数据值的分布。选项因
      不同的数据类型：

      - **选项集**：为选项中的每个选项选择一种颜色
        放。您可以为选项中的选项设置默认颜色
        维护应用程序。

      - **数字**：您可以在 [相同的
        作为专题图层的方式](#using_maps_thematic_layer_style) 使用
        自动或预定义的图例。

      - **布尔值**：为真/是选择一种颜色，为真/是选择另一种颜色
        假/没有。

6.  点击**添加图层**。

### 修改事件层 { #modify-an-event-layer } 

1.  在图层面板中，单击事件图层上的编辑（铅笔）图标
    卡片。

2.  修改 DATA、PERIOD、FILTER、ORG UNIT 和 STYLE 的设置
    选项卡。

3.  点击**更新图层**。

### 列出和过滤事件 { #listing-and-filtering-events } 

事件层有一个 **data table** 选项，可以打开或
从事件层卡上关闭。

![](resources/images/maps/maps_event_layer_data_table.png)

数据表显示构成事件层的数据。

- 单击标题将根据该列对表格进行排序；
  在上升和下降之间切换。

- 在标题下方的过滤器字段中输入文本或表达式
  将这些过滤器应用于数据，并且显示将调整
  根据过滤器。过滤器应用如下：

  - ID

    按包含给定文本的事件ID进行过滤

  - 组织单位

    按包含给定文本的组织单位名称过滤

  - 活动时间

    按包含给定文本的事件时间过滤

  - 类型

    按包含给定文本的GIS显示类型过滤

  - **按数据元素设置样式**：如果事件按数据元素设置样式
    （例如性别）数据值和颜色都可以过滤。

  - **在报告中显示**：选中以在报告中显示的数据元素将
    显示在单独的列中（请参阅下文如何添加它们）。

  - 数字数据值可以通过给定的数字和/或范围进行过滤，
    例如：2,\>3&\<8

> **注意**
>
> 数据表过滤器是临时的，不与地图层一起保存
> 作为收藏夹的一部分。

### 修改事件数据表和弹出窗口中的信息 { #modify-information-in-event-data-table-and-popups } 

您可以修改事件弹出窗口中显示的信息。

![](resources/images/maps/maps_eventlayer_eventinfopopup.png)

1.  打开**维护**应用程序。

2.  选择**程序**。

3.  单击要修改的程序，然后选择** 2分配数据元素**。

4.  对于要在弹出窗口中显示的每个数据元素，
    选择相应的**在报告中显示**。

5.  点击**保存**。 

### 下载原始事件层数据 { #download-raw-event-layer-data } 

可以以GeoJSON格式下载事件层的原始数据，以便在桌面GIS软件（例如[QGIS]https://www.qgis.org/）中进行更高级的地理分析和处理。下载的数据包括所有单独的事件，作为GeoJSON功能，包括为**在报告中显示**选择的每个数据元素的属性。

![](resources/images/maps/maps_data_download_dialog.png)

- 在左侧的图层卡中，点击_more actions_（三个点）图标，然后点击**下载数据**

- 选择** ID格式**用作下载的GeoJSON文件中数据元素值的键。共有三个选项：

  - ** ID **-使用数据元素的唯一ID
  - **名称**-使用数据元素的人性化名称（翻译）
  - **代码**-使用数据元素的代码

- 选择是否对其他事件属性（例如程序阶段，纬度，经度，事件数据以及组织单位ID，名称和代码）**使用人类可读的键**。如果**未**选中此选项，则这些值将是计算机友好的ID，而不是人类可读（和翻译）的名称。

- 单击**下载**按钮以生成和下载GeoJSON文件。数据将从DHIS2服务器请求并由地图应用程序处理。此操作可能需要几分钟才能完成。

- 一旦下载了GeoJSON文件，就可以将其导入大多数标准GIS软件应用程序中。

>请注意，下载的数据不包含样式信息，因为GeoJSON格式本身不支持它。可以选择使用每个要素的属性在外部GIS应用程序中重新创建样式。

### 清除事件层 { #clear-event-layer } 

要清除地图中的所有事件层数据：

1.  在左侧的图层卡中，单击_更多操作_（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理跟踪的实体层 { #using_maps_tracked_entity_layer }

被追踪实体图层显示被追踪的地理位置
在 DHIS2 中注册的实体。前提是被跟踪的实体有
关联的点或多边形坐标，您可以在地图上探索这些。

![](resources/images/maps/maps_tracked_entity_layer.png)

跟踪实体图层由图层面板中的图层卡片表示
如：

沿着跟踪实体卡的顶部，从左到右分别是：

- 一个抓取字段，允许拖动和重新排序图层
  鼠。

- 与图层关联的标题和时期。

- 箭头符号，用于折叠和展开被跟踪的实体卡。

被追踪实体卡片的中间是一个图例，表明
图层样式。

跟踪实体卡的底部从左到右分别是：

- 编辑（铅笔）按钮以打开图层配置对话框

- 用于切换图层可见性的眼睛符号

- 用于修改图层透明度的滑块

- 具有更多选项的更多操作（三个点）按钮：

  - **编辑图层**与上方的编辑按钮相同

  - **移除图层**将从当前地图中移除该图层。

### 创建一个跟踪实体层 { #maps_create_tracked_enity_layer }

要创建跟踪实体层，请在
**添加图层**选择**跟踪实体**。这将打开 跟踪实体层
配置对话框。

1.  在**数据**标签中：

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_DATA.png)

    - 选择要在地图上显示的**跟踪实体类型**。

    - 选择被跟踪实体所属的**程序**。

    - 使用 **Program status** 字段选择被跟踪实体的注册状态
      包括：全部、活动、已完成或已取消。

    - 为给定的跟踪实体设置 **Follow up** 状态
      程序。

2.  在**关系**标签中

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_RELATIONSHIPS.png)

    > **Caution**
    >
    > Displaying tracked entity relationships in Maps is an experimental feature

    - 如果选择了跟踪的实体类型，则可以选中**显示跟踪的实体关系**复选框

    - 选中后，您可以从下拉列表中选择要显示在地图上的关系类型。仅来自所选“跟踪的实体”类型的关系可用。

3.  在**期间**标签中

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_PERIOD.png)

    - 如果没有选择节目，您可以设置开始和结束日期
      跟踪的实体是最后更新的。

    - 如果选择了程序，您可以设置上次跟踪实体的时间段
      更新或何时注册或注册该计划。

4.  在**ORG UNITS**标签中：

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_ORG_UNITS.png)

    - 选择要包含在图层中的组织单位。
      您有 3 种选择模式：

      - **仅选定**：包括属于
        仅限选定的组织单位。

      - **选定及以下**：包括和中的跟踪实体
        在所选组织单位的正下方。

      - **选定和所有以下**：包括和中的跟踪实体
        所有低于选定的组织单位。

5.  在**样式**标签中：

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_STYLE.png)

    - 为跟踪的实体点和多边形选择一种**颜色**。

    - 选择 **点大小**（半径在 1 到 20 之间）作为
      点。

    - 选择 **Show buffer** 以显示每个周围的视觉缓冲区
      被跟踪的实体。可以修改以米为单位的缓冲距离
      这里。

    - 如果在关系选项卡上选择了关系类型，则可以为关系和相关的跟踪实体实例选择**颜色**，**点大小**和**线颜色**

6.  点击**添加/更新图层**。

### 修改跟踪的实体层 { #modify-a-tracked-entity-layer } 

1.  在图层面板中，单击跟踪的编辑（铅笔）图标
    实体层卡。

2.  将 DATA、PERIOD、ORG UNIT 和 STYLE 选项卡上的设置修改为
    想要的。

3.  点击**更新图层**。

### 清除跟踪的实体层 { #clear-a-tracked-entity-layer } 

要从地图上清除跟踪的实体层：

1.  在左侧的图层卡中，单击_更多操作_（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理设施层 { #using_maps_facility_layer }

设施层显示代表设施类型的图标。
多边形不会显示在地图上，因此请确保选择一个
具有设施的组织单位级别。

_多边形是地图上代表一个国家的封闭区域，
区或公园。_

![](resources/images/maps/maps_facility_layer.png)

设施层由层面板中的层 _cards_ 表示，例如
作为：

在设施卡的顶部，从左到右分别是：

- 抓取字段，允许使用鼠标拖动和重新排序图层

- **设施**标题

- 用于切换图层可见性的眼睛符号

- 折叠和扩展设施卡的箭头符号

在设施卡的中间是一个指示组的图例
设置表示。

设施卡的底部从左到右分别是：

- 编辑（铅笔）按钮以打开图层配置对话框

- 用于修改图层透明度的滑块

- 具有更多选项的更多操作（三个点）按钮：

  - **数据表** 切换按钮，用于显示或隐藏数据表
    与图层相关联

  - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

  - **编辑图层**与上方的编辑按钮相同

  - **移除图层**将从当前地图中移除该图层。

### 创建设施层 { #create-a-facility-layer } 

要创建设施层，请在 **Add
图层**选择**机构**。这将打开设施层配置对话框。

1.  在**组织单位**标签中

    ![](resources/images/maps/maps_facility_layer_dialog_ORG_UNITS.png)

    - 从以下位置选择组织单位级别和/或组
      右侧的选择字段。

    - 选择要包含在图层中的组织单位。
      可以选择任一

      - 一个或多个特定的组织单位，或

      - 组织单位层次结构中的相对级别，具有
        尊重用户。通过选择**用户组织
        单位** 地图数据对用户的显示会有所不同
        组织单位层次结构中的不同级别。

    - 系统管理员可以设置默认组织单位
      包含 **系统设置** 应用程序中的设施的级别。

2.  在**样式**标签中：

    ![](resources/images/maps/maps_facility_layer_dialog_STYLE.png)

    - 选择您想要应用于设施的任何样式。

      - 显示标签

        允许在图层上显示标签。字体大小、重量
        和颜色可以在这里修改。

      - 显示缓冲区

        允许在周围的图层上显示视觉缓冲区
        每个设施。可以修改缓冲区的半径
        这里。

    - 设施可以使用**组织单位组**设置样式
      不同的图标。从组织列表中选择一个组集
      为您的 DHIS2 实例定义的单元组集。
      系统管理员可以设置默认组织单位
      在 **系统设置** 应用程序中设置的组。

    - 如果未选择团体集，设施将显示为已满
      界。颜色和圆半径可以更改。

3.  点击**添加图层**。

### 创建或修改设施层 { #create-or-modify-a-facility-layer } 

1.  在图层面板中，单击设施上的编辑（铅笔）图标
    层卡。

2.  修改 GROUP SET、ORGANIZATION UNITS 和 STYLE 上的设置
    选项卡。

3.  点击**更新图层**。

### 过滤设施层中的值 { #filter-values-in-a-facility-layer } 

设施层有一个**数据表**选项，可以打开或
离设施层卡。

![](resources/images/maps/maps_facility_layer_data_table.png)

数据表显示构成设施层的数据。

- 单击标题将根据该列对表格进行排序；
  在上升和下降之间切换。

- 在标题下方的过滤器字段中输入文本或表达式
  将这些过滤器应用于数据，并且显示将调整
  根据过滤器。过滤器应用如下：

  - 名称

    按包含给定文本的名称过滤

  - ID

    按包含给定文本的ID进行过滤

  - 类型

    按包含给定文本的GIS显示类型过滤

> **注意**
>
> 数据表过滤器是临时的，不与地图层一起保存
> 作为收藏夹的一部分。

### 搜索设施 { #search-for-a-facility } 

数据表中的 NAME 过滤器字段提供了一种有效的方法
寻找个人设施。

### 打开组织部门资料{ #open-organisation-unit-profile }

您可以通过三种方式打开[组织单位资料](#using_maps_org_unit_profile)：

1. 单击地图上显示的任何组织单位，然后单击
   弹出窗口中的 **查看个人资料** 按钮。

2. 右键单击地图上的组织单位之一，然后选择 **查看个人资料**
   从菜单中。

3. 单击**数据表**中的组织单位行。

### 删除设施层 { #remove-facility-layer } 

要清除设施层中的所有数据：

1.  在左侧的图层卡中，单击_更多操作_（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理组织部门层级{ #using_maps_org_unit_layer }

组织部门图层显示您的边界和位置
组织单位。如果您处于离线状态，该层特别有用
并且无法访问背景地图。

![](resources/images/maps/maps_org_unit_layer.png)

组织单位图层由图层面板中的图层_卡片_表示，例如
作为：

组织单位卡顶部从左到右依次是：

- 抓取字段，允许使用鼠标拖动和重新排序图层

- **组织单位**标题

- 用于折叠和展开组织单位卡的箭头符号

组织单位卡底部从左到右依次是：

- 编辑（铅笔）按钮以打开图层配置对话框

- 用于切换图层可见性的眼睛符号

- 用于修改图层透明度的滑块

- 具有更多选项的更多操作（三个点）按钮：

  - **数据表** 切换按钮，用于显示或隐藏数据表
    与图层相关联

  - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

  - **编辑图层**与上方的编辑按钮相同

  - **移除图层**将从当前地图中移除该图层。

### 创建组织部门图层 { #create-an-org-unit-layer }

要创建组织单位图层，请在“**添加”上选择“**组织单位**”
图层**选择。这将打开组织单位层配置对话框。

1.  在**组织单位**标签中

    ![](resources/images/maps/maps_org_unit_layer_dialog_ORG_UNITS.png)

    - 从组织单位级别和/或组中选择
      右侧的选择字段。

    - 选择要包含在图层中的组织单位。
      可以选择任一

      - 一个或多个特定的组织单位，或

      - 组织单位层次结构中的相对级别，具有
        尊重用户。通过选择**用户组织
        单位** 地图数据对用户的显示会有所不同
        组织单位层次结构中的不同级别。

2.  在**样式**标签中：

    ![](resources/images/maps/maps_org_unit_layer_dialog_STYLE.png)

    - 选择您想要应用于组织部门的任何样式。

      - 标签

        允许在图层上显示标签。字体样式可以
        此处修改。

      - 边界颜色

        允许组织单位的边界或轮廓颜色
        被改变。

      - 点半径

        设置点类型元素时的基半径，例如
        设施，呈现在组织单位层。

    - 组织单位可以设置为**组织单位组集**
      使用不同的颜色。从组织列表中选择一个组集
      为您的 DHIS2 实例定义的单元组集。

3.  点击**添加图层**。

### 修改组织部门图层{ #modify-an-org-unit-layer }

1.  在图层面板中，单击组织部门上的编辑（铅笔）图标
    层卡。

2.  将 ORGANIZATION UNITS 和 STYLE 选项卡上的设置修改为
    想要的。

3.  点击**更新图层**。

### 过滤组织部门图层中的值 { #filter-values-in-an-org-unit-layer }

组织单位层有一个**数据表**选项，可以打开或关闭
从组织单位层卡中分离出来。

![](resources/images/maps/maps_bound_layer_data_table.png)

数据表显示形成组织单位层的数据。

- 单击标题将根据该列对表格进行排序；
  在上升和下降之间切换。

- 在标题下方的过滤器字段中输入文本或表达式
  将这些过滤器应用于数据，并且显示将调整
  根据过滤器。过滤器应用如下：

  - 名称

    按包含给定文本的名称过滤

  - 水平

    按数字和/或范围过滤级别，例如：2，\> 3＆\ <8

  - 父母

    按包含给定文本的父项名称过滤

  - ID

    按包含给定文本的ID进行过滤

  - 类型

    按包含给定文本的GIS显示类型过滤

> **注意**
>
> 数据表过滤器是临时的，不与地图层一起保存
> 作为收藏夹的一部分。

### 搜索组织单位 { #search-for-an-organisational-unit } 

数据表中的NAME过滤字段提供了一种有效的方法
搜索组织部门中显示的各个组织部门
层。

### 打开组织部门资料{ #open-organisation-unit-profile }

您可以通过三种方式打开[组织单位资料](#using_maps_org_unit_profile)：

1. 单击地图上显示的任何组织单位，然后单击
   弹出窗口中的 **查看个人资料** 按钮。

2. 右键单击地图上的组织单位之一，然后选择 **查看个人资料**
   从菜单中。

3. 单击**数据表**中的组织单位行。

### 在组织层次结构之间导航 { #navigate-between-organisation-hierarchies } 

您可以修改层次结构中组织单位层的目标，而无需
使用级别/父用户界面。

1.  右键单击组织单位之一。

2.  选择**向上钻取一级**或**向下钻取一级**。

    如果您处于最低级别，则禁用向下钻取选项。
    同样，从最高级别禁用向上钻取选项。

### 删除组织部门层{ #remove-org-unit-layer }

要清除组织单位层中的所有数据：

1.  在左侧的图层卡中，单击_更多操作_（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理地球引擎层 { #using_maps_gee }

![](resources/images/maps/maps_ee_layer.png)

Google Earth Engine 中的图层可让您显示和聚合外部
向您的组织单位发送数据。使用人口图层来计算
居住在一个地区或距卫生机构一定距离内的人数
设施。高程图层可让您找到最低、最高和
平均海拔。使用土地覆盖图层查看森林覆盖、农田
或城市地区，并计算每个组织单位的百分比。

支持以下层：

![](resources/images/maps/maps_ee_layer_types.png)

- **人口**：来自 WorldPop 的详细人口数据，显示了估计的
  居住在一个地区的人口数量。可用于 2000 年和
  向前。

- **人口年龄组**：估计居住在一个地区的人数，分组
  按年龄和性别。

- **海拔**：海拔高度。

- **降水**：数值以 5 天内的毫米为单位。更新
  每月，在下个月的第三周。从地面卫星和气象站收集。

- **温度**：从卫星收集的地表温度。
  有持续云层覆盖的区域会出现空白点。

- **土地覆盖**：美国宇航局从卫星收集的 17 种不同的土地覆盖类型。

### 创建地球引擎图层 { #create-an-earth-engine-layer } 

要创建 Earth Engine 图层，请从 **Add
层**选择。这将打开层配置对话框。

1.  在**数据**标签中：

    ![](resources/images/maps/maps_ee_layer_dialog_DATA.png)

    - 对于“人口年龄组”，您可以选择年龄/性别**组**
      您希望在汇总数据时包括在内。

    - 选择计算时要使用的**聚合方法**
      所选组织单位的值。

      - **总和**：计算每个组织单位内的总数。
        推荐用于人口图层。

      - **Min**：返回显示在图层单元下方的最小值
        选择。对于人口层，它将是最小的 _people per
        公顷_.对于高程图层，它将返回最低高程（米
        高于海平面）。

      - **Max**：返回图层单位的最大值。对于人口
        层，它将是每公顷最少_人_。对于高程图层
        将返回每个组织单位的最高海拔。

      - **Mean**：以层为单位返回平均值。对于人口图层
        这将是平均_人每公顷_。对于降水层，它将
        是整个组织单位的平均降雨量（以毫米为单位）。

      - **中值**：以层为单位返回平均值。对于人口图层
        这将是每公顷_人_的中位数。对于温度层，它将
        是组织单位白天的中值°C。

      - **标准差**：返回层中的标准差值
        单元。

      - **Variance**：以层为单位返回方差值。

2.  在**期间**标签中

    ![](resources/images/maps/maps_ee_layer_dialog_PERIOD.png)

    - 选择数据源的时间段。可用期间由
      数据提供者。 “人口年龄组”层只有一个时期，
      而“人口”层有 2000 年及以后的年度数据。
      提供 5 天周期的降水数据，以及 5 天的温度数据
      8天周期。

3.  在**ORG UNITS**标签中：

    ![](resources/images/maps/maps_ee_layer_dialog_ORG_UNITS.png)

    - 选择要查看聚合数据值的组织单位。
      可以选择任一

      - 一个或多个特定的组织单位，组织单位级别在
        层次结构、组织单位组，或

      - 组织单位层次结构中的相对级别，具有
        尊重用户。通过选择**用户组织
        单位** 地图数据对用户的显示会有所不同
        组织单位层次结构中的不同级别。

4.  在**样式**标签中

    ![](resources/images/maps/maps_ee_layer_dialog_STYLE.png)

    - 修改特定于图层类型的参数。

    - 根据需要调整图例范围，步长和颜色。

    - 如果选择具有单点坐标的组织单位
      （设施）你可以设置一个半径缓冲区来计算
      内的数据值。 5000 米的半径将聚合所有
      距设施 5 公里范围内可用的值。

5.  点击**添加图层**。

单击地图区域或设施以查看其聚合结果
组织单位。

### 数据值列表 { #listing-of-data-values } 

地球引擎层有一个**数据表**选项，可以打开或
离层卡。

![](resources/images/maps/maps_ee_layer_data_table.png)

数据表显示所选组织单位的所有聚合值。

- 单击标题将根据该列对表格进行排序；
  在上升和下降之间切换。

- 在标题下方的过滤器字段中输入文本或表达式
  将这些过滤器应用于数据，并且显示将调整
  根据过滤器。过滤器应用如下：

- 名称

  按包含给定文本的组织单位名称过滤

- ID

  按包含给定文本的事件ID进行过滤

- 类型

  按包含给定文本的GIS显示类型过滤

- 聚合值

  每个选择的聚合类型都有一列

  数字数据值可以通过给定的数字和/或范围进行过滤，
  例如：2,\>3&\<8

> **注意**
>
> 数据表过滤器是临时的，不会与地图图层一起保存。

## 添加外部地图图层 { #using_maps_external_map_layers }

![](resources/images/maps/maps_terrain_imagery.png)

外部地图图层表示为：

- 底图

  这些在图层面板的 **底图** 卡中可用，并且
  被选为任何其他底图。

- 叠加层

  这些在**添加图层** 选项中可用。与底图不同的是，
  叠加层可以放置在任何其他叠加层的上方或下方。

叠加层由层中的附加层_cards_表示
面板如：

覆盖卡的顶部从左到右分别是：

- 抓取字段，允许使用鼠标拖动和重新排序图层

- 外部地图图层的标题

- 折叠和展开覆盖卡的箭头符号

如果图层有图例，则卡的中间是图例。

覆盖卡的底部从左到右分别是：

- 用于修改图层透明度的滑块

- 删除（垃圾桶）图标，用于从当前图层中删除图层
  专题地图。

## 组织部门资料{ #using_maps_org_unit_profile }

![](resources/images/maps/maps_org_unit_profile.png)

组织单位资料显示有关的详细信息
各组织单位。您可以从组织单位、设施打开个人资料
和主题层。

您可以通过三种方式打开组织部门资料：

1. 单击地图上显示的任何组织单位，然后单击
   弹出窗口中的 **查看个人资料** 按钮。

2. 右键单击地图上的组织单位之一，然后选择 **查看个人资料**
   从菜单中。

3. 单击**数据表**中的组织单位行。

个人资料将显示在地图的右侧。个人资料内容是
由系统管理员设置。

## 文件菜单 { #using_maps_file_menu }

![](resources/images/maps/maps_file_menu.png)

使用**文件菜单** 来管理您的地图。几个菜单项将是
禁用，直到您打开或保存地图。

保存您的地图可以轻松地在以后恢复它们。它还给你
有机会与其他用户分享它们作为解释或
把它放在仪表板上。您可以保存所有类型的图层配置
作为最爱。

### 建立新地图 { #create-a-new-map } 

点击**文件** \> **新建**。

注意！这将清除您当前拥有的地图图层，而不进行保存。

### 开启新地图 { #open-a-new-map } 

1.  点击**文件** \> **打开**。将打开一个对话框，其中包含地图列表。

2.  找到您要打开的收藏夹。您可以使用 \< and \> 或
    搜索字段以查找已保存的地图。该列表在每个
    您输入的字符。您可以通过选择过滤列表
    **显示全部**、**由我创建**或**由他人创建**。

3.  点击要打开的地图的名称。

### 保存地图 { #save-a-map } 

创建地图后，可以方便地将其保存以备后用：

1.  单击**文件** \> **保存**。

2.  输入**名称**（必填）和**说明**（可选）
    第一次保存地图。

3.  点击**保存**。

### 保存地图副本 { #save-a-copy-of-a-map } 

1.  单击**文件** \> **另存为... **

2.  输入**名称**（必填）和**说明**（可选）
    地图。

3.  点击**保存**。

### 重命名地图 { #rename-a-map } 

1.  点击**文件** \> **重命名**。

2.  为您的地图输入新的**名称**和/或**描述**。

3.  点击**重命名**。地图已更新。

### 翻译地图 { #translate-a-map } 

1.  点击**文件** \>**翻译**。

2.  选择您的翻译的**地方语言**（语言）。

3.  输入翻译后的 **Name** 和 **Description**。原文
    将显示在字段下方。

4.  点击**保存**。

### 修改地图的共享设置 { #modify-sharing-settings-for-a-map } 

创建并保存地图后，您可以与以下人员共享地图
每个人或一个用户组。要修改共享设置：

1.  点击**文件** \>**共享**。共享设置对话框打开。

2.  在文本框中，搜索您想要的用户或组的名称
    分享您的最爱并选择它。

    所选的用户或组将添加到收件人列表中。

    重复该步骤以添加更多用户组。

3.  如果要允许外部访问，请选择相应的框。

    请注意，为了使已登录和未登录的用户拥有
    访问，您还必须允许公共访问。

4.  对于每个用户组，选择一个访问设置。选项包括：

    - 无（仅适用于默认组，因为它们无法删除）

    - 可以查看

    - 可以编辑和查看

5.  单击**关闭**以关闭对话框。

### 获取地图链接 { #get-the-link-to-a-map } 

1.  点击**文件** \> **获取链接**。将打开一个链接对话框。

2.  复制链接。

### 删除地图 { #delete-a-map } 

1.  点击**文件** \>**删除**。显示确认对话框。

2.  单击**删除**以确认您要删除收藏夹。
    您的地图被删除，图层从视图中清除。

## 地图解译 { #mapsInterpretation }

解释是在给定时期对地图的描述。这
信息在 **仪表板应用** 中可见。点击
**Interpretations** 在工作区的右上角打开
解释面板。该按钮仅在保存地图时才可点击。

![](resources/images/maps/maps_interpretations_panel.png)

### 查看基于相对期间的解释 { #view-interpretations-based-on-relative-periods } 

要查看相对时期的解释，例如一年前：

1.  用解释打开收藏夹。

2.  点击工作区右上角的**Interpretations**打开
    解释小组。

3.  单击一个解释。您的地图显示数据和日期
    基于解释的创建时间。查看其他
    解释，点击它们。

### 为地图写解释 { #write-interpretation-for-a-map } 

要创建解释，您首先需要创建地图并保存。
如果您与其他人分享了您的地图，您的解释
write 对那些人是可见的。

1.  用解释打开收藏夹。

2.  点击工作区右上角的**Interpretations**打开
    解释小组。

3.  将出现一个文本字段，并为用户显示占位符“编写解释”
    对收藏有读取权限。

4.  在文本字段中，输入评论、问题或解释。你
    也可以使用“@username”提及其他用户。首先输入“@”
    加上用户名或真实姓名的第一个字母和提及
    bar 将显示可用的用户。提及的用户将收到
    带有解释或注释的内部 DHIS2 消息。你
    可以在 **Dashboard app** 中看到解释。

5.  如果您希望您的解释具有相同的效果，请单击 **SAVE**
    共享设置为地图。

    如果您想更改共享设置，请单击 **SAVE & SHARE**
    （见下文）供您解释。

### 更改解释的共享设置 { #change-sharing-settings-for-an-interpretation } 

1.  单击一个解释（请参阅上面的查看解释）。

2.  点击解释下方的**分享**。共享设置
    对话框打开。

3.  搜索并添加要共享的用户和用户组
    你的地图。

4.  更改要修改的用户的共享设置：

    - **可以编辑和查看**：每个人都可以查看和编辑对象。

    - **只能查看**：每个人都可以查看对象。

    - **无访问权限**：公众无权访问该对象。这
      设置仅适用于公共访问。

5.  共享设置更新后，单击**关闭**。

## 将地图另存为图像 { #using_maps_image_export }

您可以通过单击顶部菜单中的“下载”按钮将地图下载为图像

![](resources/images/maps/maps_download.png)

Internet Explorer 或 Safari 不支持地图下载，我们建议您
使用谷歌浏览器或火狐浏览器。

1.  选择是否要包含地图名称。该选项仅
    如果地图已保存，则可用。

2.  选择是否要包括地图图例。您可以定位图例
    在地图的 4 个角落之一。

3.  点击**下载**以下载地图。

## 搜索位置 { #using_maps_search }

地点搜索功能可让您搜索几乎任何位置
或地址。此功能可用于定位例如
地图上的地点、设施、村庄或城镇。

![](resources/images/maps/maps_place_search.png)

1.  在“地图”窗口的右侧，单击放大镜图标。

2.  输入您要查找的位置。

    键入时会显示匹配位置的列表。

3.  从列表中选择一个位置。一个大头针指示位置
    地图。

## 测量地图中的距离和面积 { #using_maps_measure_distance }

1.  在地图的左上角，将光标放在**Measure
    距离和面积**（标尺）图标，然后单击**新建
    测量**。

2.  在地图上添加点。

3.  点击**完成测量**。

![](resources/images/maps/maps_measure_distance.png)

## 获取任意位置的纬度和经度 { #using_maps_latitude_longitude }

右键单击地图上的一个点并选择**显示经度/纬度**。
值显示在弹出窗口中。

## 也可以看看 { #see-also } 

- [管理
  传说](https://docs.dhis2.org/master/en/user/html/manage_legend.html)

