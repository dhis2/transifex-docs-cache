---
edit_url: "https://github.com/dhis2/training-docs/blob/main/content/tracker_use/tg_maps.md"
revision_date: '2024-07-30'
tags:
- 培训文件
---

# 跟踪地图培训师指南--事件和 TEI 图层{ #trainers-guide-to-tracker-maps-event-and-tei-layer } 

## 这本指南是什么？ { #what-is-this-guide } 

本指南是供 DHIS2 学院培训师使用的辅助文件，用于 "地图 "课程。本课程采用标准的学院培训方法，包括 

1. 现场演示环节，由培训师演示和讲解功能，以及 

2. 在实践环节中，参与者可以练习相同的功能。

本指南将帮助培训师准备现场演示课程。在 "现场演示步骤 "部分，详细介绍了所有演示步骤，并附有易于理解的解释和屏幕截图。请在准备现场演示课程时使用。

此外，还有一份《快速指南》，其中非常简短地列出了各个步骤，可作为演示过程中的查找指南或 "小抄"，帮助培训师记住所有步骤和演示流程。

## 本环节的学习目标{ #learning-objectives-for-this-session } 

1. 描述地图应用程序与跟踪器数据的关系
2. 描述使用跟踪器数据时地图的局限性
3. 使用其中的跟踪器数据创建地图：
   1. 事件层
   2. 被跟踪实体层

## 时间要求{ #time-requirements } 

- 现场演示：2 次演示，每次 15 分钟
- 实践练习：2 次练习，每次 15 分钟
- 任务： 

## 背景 { #background } 

本节课既回顾了学员在事件基础学院中学到的知识，也介绍了跟踪实体实例层。这是因为在使用跟踪器数据时，与使用事件数据时的事件层并无不同，而事件数据在事件基础知识中已有详细介绍。跟踪实体层是一个新概念，但目前有一些局限性。这些限制将在演示中讨论。

请注意，主题层是在计划指标会议上讨论的，而不是在本次会议上。

## 准备工作{ #preparations } 

您将在本环节中创建大量可视化数据。请确保您已在所使用的演示数据库中运行了分析，并且所有数据都已正确填入。如果您发现数据没有出现在正确的时期或年份，请联系培训内容团队，我们将为您提供如何正确移动数据的建议。

在演示之前，您应考虑将整个演示进行一遍。之后，您应使用快速指南，并在演示过程中补充任何其他笔记。如果您发现有任何需要修改的地方，或者在演示过程中需要更多的解释，请与培训内容团队联系，以便我们评估如何将这些反馈意见最好地整合到教材中。

要求您创建的每个可视化内容都已保存，并应共享给公众查看。如果您对可视化内容不确定，可以打开每一个可视化，查看其制作过程。

此外，学习指南和课程摘要是提供给学员的主要材料，其中既有未评分练习的详细步骤，也有课程的关键信息。也请查看这些资料，以确保您在演示过程中能够传达这些要点。

## 最佳做法{ #best-practices } 

在开始演示之前，请记住最重要的是观众要听懂，因此一定要向观众提问，以确认他们是否听懂。如果有不清楚的地方，可以回头慢慢讲解。如果你没有时间讲完所有步骤，最好删减一些步骤，不要讲得太快，而没有人听懂。

在在线环境中，您将定期打破常规，让他们进行各种不分等级的练习，以保持他们的参与度。

在面对面的环境中，学员可能会与你同时进行演示。在这种情况下，如果有其他培训师在房间里走来走去，为学员提供支持，那就再好不过了，因为在演示过程中，主持课程的培训师很难回答许多个人问题。 

## 快速指南{ #quick-guide } 

1. 审查如何在注册和活动中获取追踪器坐标
2. 使用事件图层创建地图

   使用以下输入创建地图

   - 层类型 ：机关单位
   - 第 3 级（地区）
   - 图层类型 ：事件（CBS 位置）
   - 数据
     - 计划 ：病例监测
     - 阶段：第 1 阶段--诊断和临床信息
     - 坐标区域 ：CBS 位置
     - 事件状态：全部
   - 时期 ：今年
   - 组织单位 ：用户子 x2 单位
   - 过滤器 ：
     - 数据项 ：发烧 = 是
   - 风格 ：
     - 团体活动
    - GEN - 性别

     请注意，使用事件层处理事件或跟踪器数据的方法完全相同

3. 使用有关系的 TEI 图层创建地图

   - 第 1 层类型 ：机构单位 - 用户子单位
   - 第 2 层类型 ：跟踪实体
   - 数据
     - 跟踪实体类型 ：个人
     - 计划 ：病例监测
     - 程序状态：全部
   - 关系 ： 
     - 显示跟踪的实体关系 = 是
    - 关系类型 : 曾有联系
   - 时期 ：
     - 计划/注册日期：被跟踪实体注册或加入计划的日期：2023 年 12 月 31 日 - 2024 年 7 月 17 日
  - 机关单位 : 12 Khammouan
    - 选择模式 ：选定及以下所有
  - 样式：半径（米）= 100

讨论该层在当前状态下的局限性（没有跨其他程序的关系，无法在注册时收集坐标并将其与某个事件中的数据结合起来）

4. 回顾总结幻灯片
5. 让他们完成任务

## 现场演示逐步进行{ #live-demo-step-by-step } 

### 审查如何在注册过程中以及在活动中获取追踪器坐标{ #review-how-tracker-co-ordinates-are-captured-during-both-registration-and-within-an-event } 

在开始演示之前，让我们先讨论一下从哪里获得 TEI 和事件层中使用的有关跟踪器数据的坐标。

转到 "捕获"，选择任何 4 级 OU（设施）和联系人追踪程序。选择后，您将看到 TEI 列表

![](resources/images/maps/mapnew1.png)

继续为新人注册该计划

![](resources/images/maps/mapnew2.png)

在此页面中，您会注意到存在坐标字段。该坐标字段用于被跟踪实体，可被地图应用程序中的被跟踪实体层使用。

![](resources/images/maps/mapnew3.png)

在安卓系统上，您可以使用位置捕捉坐标；而在网络上，您必须输入或从地图上选择坐标。

取消注册并打开联系人跟踪程序中的一个现有记录；这将带您进入跟踪捕获中的 TE 面板。

查看计划阶段 初始联系。每个事件都有一个名为 "地点 "的字段

![](resources/images/maps/mapnew4.png)

这是用于在事件层中显示数据的坐标字段，捕捉方式与注册坐标相同（在 Android 上，您可以使用位置捕捉坐标；而在网络上，您必须输入坐标或从地图上选择坐标）。

在需要的情况下，可以使用脚本将跟踪的实体坐标转移到每个事件中，这样就不需要每次都手动捕捉坐标；不过，这在很大程度上取决于具体情况。

### 使用事件图层创建地图{ #create-a-map-using-the-event-layer } 

作为回顾，您可以使用事件图层创建地图。

我们可以利用病例监测计划中的数据，根据诊断和临床信息绘制发烧病例地图。

打开地图应用程序，然后打开地图 "CBS - 发烧病例，今年，按家庭所在地分列"。这就是您要创建的地图。在继续之前，您可以向参与者解释地图的布局。

通过文件 -> 新建清除输入。

使用事件层创建地图，输入内容如下：

- 层类型 ：机关单位
  - 第 3 级（地区）
- 图层类型 ：事件（CBS 位置）
- 数据
  - 计划 ：病例监测
  - 阶段：第 1 阶段--诊断和临床信息
  - 坐标区域 ：CBS 位置
  - 事件状态：全部
- 时期 ：今年
- 组织单位 ：用户子 x2 单位
- 过滤器 ：
  - 数据项 ：发烧 = 是
- 风格 ：
  - 团体活动
  - GEN - 性别

地图应该是这样的

![](resources/images/maps/map1new.png)

**数据标签**

![](resources/images/maps/map1_datanew.png)

**期标签**

![](resources/images/maps/map1_period.png)

**组织单位选项卡**

![](resources/images/maps/map1_OUsnew.png)

**过滤器选项卡**

![](resources/images/maps/map1_filternew.png)

**风格标签**

![](resources/images/maps/map1_stylenew.png)

由于这些事件被组合在一起，而且您选择了按性别对它们进行排版，因此我们在放大时看到的是甜甜圈图。不过，当您放大时，您将开始看到这些事件的各个位置。选择一个事件查看详细信息。 

![](resources/images/maps/map1_zoomednew.png)

正如我们所见，无论使用的是事件数据还是跟踪数据，使用该图层的方法都是一样的。与其他分析一样，我们必须记住，事件层将在地图上显示一个程序中的所有事件；因此，在重复事件数据的情况下，您可以在地图上显示多个事件，分别代表这些事件。

#### 查看如何保存地图{ #review-how-to-save-a-map } 

进入文件菜单，选择 "保存 "选项

![](resources/images/maps/map1_save.png)

为地图命名并编写说明，然后选择 "保存"。

![](resources/images/maps/map1_save_dialognew.png)

#### 查看如何下载地图{ #review-how-to-download-a-map } 

在应用程序中选择下载选项。这将打开一个新对话框。将图例放置在您想要的位置，然后选择 "下载 "下载地图。这将把地图的 PNG 文件下载到您的下载文件夹中。

![](resources/images/maps/map1_download.png)

#### 停止！让他们做练习 1{ #stop-have-them-perform-exercise-1 } 

### 使用具有关系的 TEI 图层创建地图{ #create-a-map-using-the-tei-layer-with-relationships } 

现在，我们将利用病例监测计划的数据绘制地图，在地图上显示各种关系。

打开 "CBS - 案例和联系人 "地图 这是您要创建的地图。它显示的是一个人及其关系。在本程序中，这意味着它显示的是索引案例及其联系人。地图中的红圈是索引案例（或关系的发起地），黑圈是联系人。

通过文件 -> 新建清除输入。

使用跟踪实体图层创建地图，输入内容如下：

- 第 1 层类型 ：机构单位 - 用户子单位
- 第 2 层类型 ：跟踪实体
- 数据
  - 跟踪实体类型 ：个人
  - 计划 ：病例监测
  - 程序状态：全部
- 关系 ： 
  - 显示跟踪的实体关系 = 是
  - 关系类型 : 曾有联系
- 时期 ：
  - 选择上次更新的时间段
    - 被跟踪实体注册或加入计划的日期：2024 年 1 月 1 日 - 2024 年 7 月 13 日
- 机关单位 : 12 Khammouan
- 选择模式 ：选定及以下所有

地图应该是这样的

![](resources/images/maps/contactsnew1.png)

**边界层**

![](resources/images/maps/mapboundarytei.png)

***Tracked Entity Layer***

**数据标签**

![](resources/images/maps/mapteidata.png)

**关系选项卡**

![](resources/images/maps/mapteirelationship.png)

在配置地图的这一部分时，请更详细地解释 "关系 "选项卡。它可以显示被跟踪实体之间的关系，但由于仍在开发阶段，所以有很大的警告信息。

**期标签**

![](resources/images/maps/mapteiperiod.png)

**组织单位选项卡**

![](resources/images/maps/mapteiou.png)

**风格标签**

![map2_style](resources/images/maps/mapteistyle.png)

在查看样式选项卡时，请再详细解释一下。您可以在这里选择跟踪实体、其相关实体的颜色，以及用于表示关系的线条。

样式选项卡中的 "缓冲区 "选项用于在地理点、线或区域（多边形）周围创建缓冲区。该缓冲区直观地表示与所选地理特征的指定距离，可用于各种分析目的。

这样，在创建地图图层时，就可以对这些关系输出稍作定制。

#### 讨论地图输出以及该图层的局限性{ #discuss-the-map-output-along-with-limitations-of-this-layer } 

As we can see, we are able to display tracked entities along with their relationships using this layer. We have already discussed that we are only able to display relationships within the same program currently, but in addition you are not able to apply any event data to filter out the tracked entities that you are showing. Therefore, ***the tracked entity layer can not be combined with any information from the events within a program stage.***

这很不幸，因为它要求我们在跟踪程序中为每个事件收集坐标，而不是只收集一次坐标，并与我们的事件数据结合使用。

不过，我们正在努力解决这个问题，并有望在未来的版本中实现。

#### 停止！让他们做学习指南中的*练习 2*。 { #stop-have-them-perform-exercise-2-in-the-learners-guide } 

## 回顾{ #recap } 

在课程结束时，与他们一起回顾幻灯片，然后再让他们完成任务

## 作业{ #assignment } 

在您完成所有演示和他们完成练习后，让他们完成本节课的分级作业。如果您发现时间不够，可以将分级作业分配给他们，让他们在现场课程之外完成。

