---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/master/src/user/system-settings.md"
revision_date: '2024-05-21'
tags:
- DHIS核心 主版
- 使用
---

# 系统设置 { #settings } 

## 常规设置 { #system_general_settings } 



表：常规设置

| 环境 | 描述 |
|---|--|
| **缓存策略** | 决定报告分析响应应缓存多长时间。<br> <br>如果您使用计划的每晚分析更新，您可能需要选择**缓存到明天早上 6 点**。这是因为报告中的数据当时会发生变化，您可以安全地缓存数据直到分析表更新为止。<br> <br> 如果您要将数据连续加载到分析表中，请选择**无缓存**。<br> <br>对于其他情况下选择您希望缓存数据的时间量。 |
| **基础设施指标** | 定义一个指标组，其中成员指标应描述有关组织单位基础设施的数据。<br> <br>您可以查看基础设施数据在 **GIS** 应用程序中：右键单击设施，然后单击 **显示信息**。 |
| **基础设施数据元素** | 定义一个数据元素组，其中的成员数据元素应描述有关组织单位基础设施的数据。<br> <br>基础设施数据元素可以是人口、医生、床位、互联网连接和气候。<br> <br>您可以在**GIS**应用程序中查看基础设施数据：右键单击设施，然后单击**显示信息**。 |
| **基础设施时期类型** | 设置捕获基础设施数据元素组中的数据元素的频率。<br> <br>通常每年一次。查看基础设施数据时，您将能够选择数据源的时间段。<br> <br>您可以查看基础设施数据**GIS** 应用程序中的数据：右键单击设施，然后单击 **显示信息**。 |
| **默认分析相对周期** | 设置此值将确定在分析应用程序中选择哪个相对时间段作为默认值。 |
| **反馈接收者** | 定义一个用户组，其中的成员将接收通过 **Dashboard** 应用中的反馈功能发送的所有消息。<br> <br>这通常是超级用户团队的成员，他们能够支持和回答最终用户的问题。 |
| **系统更新通知收件人** | 定义一个用户组，其中成员将收到有关可供下载的新系统更新的消息，对于 DHIS2 安装的每个新补丁版本，收件人只会收到一次消息。如果没有定义该用户组，系统默认发送给所有具有ALL权限的用户。                                                                                                                                                                             |
| **最大离线组织部门级别** | 定义组织单位树小部件中可离线使用的组织单位层次结构的级别数。<br> <br>在正常情况下，您可以可以将其保留在最低级别，即默认设置。<br> <br>将其设置为很有用如果您拥有大量组织单位（通常超过 30 000 个），则可以使用更高级别来减少初始加载时间。 |
| **数据分析标准偏差因子** | 设置对**数据录入**应用中捕获的数据进行离群值分析时使用的标准差个数。<br> <br>默认值为 2。高值会比低值捕获更少的异常值。 |
| **电话号码 区号** | 您的部署所在区域的区号。<br> <br>用于发送和接收短信。通常，这是一个国家/地区代码。<br> <br>*+260*（赞比亚的国家/地区代码） |
| **启用多组织单位表单** | 支持在**数据输入**应用中同时输入多个组织单位的数据表单。<br> <br>如果您已启用此设置，则可以在**数据输入**应用中，单击要为其输入数据的子级组织单位的父级组织单位，数据集列表将包括分配给的数据集该父母的孩子。 |
| **批准前需要接受** | 选择此设置后，首先需要接受数据，然后才能提交到下一个审批级别。 |
| **在仪表板视图中收集分析对象统计数据** | 在仪表板中查看分析对象（例如地图、图表等）时收集使用情况分析数据。如果没有此设置，仅当在仪表板外部查看对象时才会收集对象的分析数据。 |
| **在使用情况分析统计中包含被动仪表板视图** | 启动仪表板应用程序时，在显示的第一个仪表板上收集使用情况分析数据（否则仅计算显式仪表板选择）。 |

## 分析设置 { #system_analytics_settings } 



表：分析设置

| 环境 | 描述 |
|---|---|
| **默认分析相对周期** | 定义分析应用程序中默认使用的相对时间段：**数据可视化工具**、**事件报告**、**事件可视化工具**、**GIS** 和 **数据透视表** 应用程序。当您打开这些应用时，系统会自动选择相对周期。<br> <br>推荐设置：您中最常用的相对周期用户。 |
| **要在分析模块中显示的属性** | Sets whether you want to display the metadata objects' names or short names in the analytics apps: **Data Visualizer**, **Event Reports**, **Event Visualizer**, **GIS** and **Pivot Table** apps.<br> <br>The user can override this setting in the **Settings** app: **User settings** \> **Property to display in analysis modules**. |
| **在分析模块中显示的默认数字组分隔符** | 设置分析应用程序中的默认数字组分隔符：**数据可视化工具**、**事件报告**、**事件可视化工具**、**GIS** 和 **数据透视表** 应用程序。 |
| **隐藏每日经期** | 在分析工具中隐藏每日周期 |
| **隐藏每周周期** | 在分析工具中隐藏每周周期 |
| **隐藏每月经期** | 在分析工具中隐藏每月周期 |
| **隐藏双月周期** | 在分析工具中隐藏双月周期 |
| **财政年度相对开始月份** | 定义分析应用程序中的相对财务年度应从哪一个月（四月、七月或十月）开始。 |
| **可缓存性** | 设置是否应以公开或私有可见性的方式提供分析数据响应。<br> <br>**私有**：任何节点或服务器DHIS2 服务器和具有缓存能力的最终用户之间不能缓存网页。如果所提供的页面可以或确实包含敏感信息，这非常有用。这意味着每次您需要网页时，要么从 DHIS2 服务器获取新页面，要么 DHIS2 服务器缓存该页面。除 DHIS2 服务器外，不允许任何其他服务器缓存页面。<br> <br>**公共**：任何节点或服务器DHIS2服务器和具有缓存能力的最终用户之间可以缓存网页。这会重新释放 DHIS2 服务器的流量，并可能加快后续页面加载速度。 |
| **分析缓存模式** | 支持两种不同的模式：<br> <br>**渐进**：这与分析的新渐进缓存功能有关。启用后，它会覆盖分析请求的全局缓存策略。该模式将触发所有分析请求的 HTTP 和数据层缓存。启用该模式后，*缓存因子*为必选项。<br> <br>**固定**：请求将根据*缓存策略*中定义的时间段进行缓存。 |
| **缓存因素** | 选择缓存因子的值。仅当分析缓存模式设置为*渐进*时，此字段才可用。<br> <br>它显示整数列表其中每个整数代表一个绝对缓存因子。该整数将在内部用于计算每个分析请求的最终过期时间。缓存因子越高，请求缓存的时间就越长。 |
| **在分析中隐藏未经批准的数据的最大年数** | 设置分析是否应尊重数据的批准级别以及在多长时间内尊重数据的批准级别。通常，几年前的数据将被视为默认获得批准。为了加快分析请求的速度，您可以选择忽略历史数据的实际审批级别。<br> <br>**从不检查批准**：无论数据批准状态如何，都不会隐藏任何数据。<br> <br>**检查所有数据的批准数据**：始终会检查审批状态。<br> <br>其他选项，例如 **过去 3 年**：对于 3 年以上的数据，将检查审批状态；较旧的数据将不会被检查。 |
| **分析数据缓存的阈值** | 设置是否仅缓存早于指定年数的数据。<br> <br>这允许直接返回最新数据没有缓存，同时出于性能问题提供旧数据的缓存版本。 |
| **尊重分析表导出中的类别选项开始和结束日期** | 此设置控制分析是否应过滤与具有开始日期和结束日期的类别选项关联但与类别选项有效间隔内的时间段关联的数据。 |
| **将分析功能置于维护模式** | 将 DHIS2 的分析和网络 API 置于维护模式。这意味着所有请求都将返回 "503 Service Unavailable（503 服务不可用）"。<br>这在需要对服务器进行维护时非常有用，例如当服务器在生产中运行时重建索引，以减少负载并更有效地进行维护。 |
| **在分析表中包含零数据值** | 此设置允许在分析表中包含零值。这只适用于启用了**存储零数据值**属性的数据元素。|
| **允许用户切换仪表盘最喜欢的视图类型** | 允许用户使用仪表盘项目菜单在图表、数据透视表和地图之间切换仪表盘收藏夹视图。 |
| **允许用户在相关应用程序中打开仪表板收藏夹** | 允许用户使用仪表盘项目菜单在应用程序中打开该类型项目的仪表盘项目。 |
| **允许用户显示仪表盘最喜欢的解释和细节** | 允许用户使用仪表板项目菜单查看仪表板收藏夹的解释和详细信息。 |
| **允许用户全屏查看仪表盘收藏夹** | 允许用户使用仪表板项目菜单全屏查看仪表板收藏夹。 |
| **默认基图** | 选择**地图**应用中默认选择的基图。如果未选择任何值，则将使用 **OSM Light**。|

## 服务器设定 { #system_server_settings } 



表格服务器设置

| 设置 | 描述 |
|---|---|
| **数据库服务器 CPU 数量** | 设置数据库服务器的 CPU 内核数。<br> <br>这样，当数据库托管在与应用服务器不同的服务器上时，系统就能以最佳状态运行，因为 DHIS2 中的分析功能是随可用内核数量线性扩展的。 |
| **系统通知电子邮件地址** | 定义接收系统通知的电子邮件地址。<br> <br>分析表生成等流程中的故障通知将发送到此处。这对应用程序监控非常有用。 |
| **Google Analytics (Universal Analytics) key** | 设置 Google UA 密钥，以便通过 Google Analytics 平台为您的 DHIS2 实例提供使用分析。需要注意的是，目前 DHIS2 中并非所有应用程序都支持 Google Analytics，因此用户的某些活动可能不会出现在该平台上。<br> <br>有关 Google Analytics 的更多信息，请访问 [google.com/analytics](https://google.com/analytics)。 |
| **谷歌地图 API 密钥** | 定义 Google 地图 API 的 API 密钥。使用此密钥可在 DHIS2 中查看谷歌地图图层。请注意，在 DHIS2 地图应用程序中启用谷歌地球引擎图层需要设置不同的密钥。请参阅 [documentation](https://docs.dhis2.org/en/topics/tutorials/google-earth-engine-sign-up.html) 。 |
| **必应地图 API 密钥** | 定义必应地图 API 的 API 密钥。添加此密钥可在 DHIS2 地图应用程序中使用必应基础地图。有关设置密钥的信息，请参阅[必应地图 API 密钥文档](https://www.microsoft.com/en-us/maps/bing-maps/create-a-bing-maps-key)。 |

表格限值设置

| 设置 | 描述 |
|---|---|
| **分析记录的最大数量** | 增加该数字可提供更多分析记录。<br> <br>默认值为 50,000。<br>     <br>    **警告**<br> <br> 请谨慎使用**无限制**设置，它可能会导致服务器负载过高。 |
| **SQL 视图记录的最大数量** | 设置 SQL 视图中记录的最大数量。<br> <br>默认值为无限。 |
| **可从数据库获取的跟踪实体实例的最大数量** | 设置可从数据库获取的最大跟踪实体实例记录的限制。如果用户未提供任何值，则将使用默认值 50,000。<br>设置为 0 或任何负整数将禁用此设置。<br>**警告**<br>禁用此设置可能会导致服务器负载过高。|



## 外观设置 { #system_appearance_settings } 



表格外观设置

| 设置 | 描述 |
|---|---|
| **选择语言** | 设置语言，然后可以输入以下设置的翻译：<br>      ** 应用程序介绍**<br> * ** 应用程序标题**<br> * ** 应用程序通知**<br> * ** 应用程序左侧页脚**<br> * ** 应用程序右侧页脚**<br> * ** 注**<br> 在每个设置接受翻译值之前，它们首先需要有一个默认/后备值。可以通过在下拉菜单中选择*系统默认值（回退）*来设置该值。 |
| **申请标题** | 设置顶部菜单上的应用程序标题。 |
| **申请介绍** | 设置登录页面左上方的系统介绍。 |
| **申请通知** | 设置登录区域下的首页通知。 |
| **应用程序左侧页脚** | 设置登录页面左侧页脚区域的文本。(如果使用的是从右到左的脚本语言，如阿拉伯语，则该文本将位于登录页面的右侧页脚区域）。 |
| **应用程序右侧页脚** | 设置登录页面右侧页脚区域的文本。(如果使用的语言是从右到左的文字（如阿拉伯语），则该文本将位于登录页面的左侧页脚区域）。 |
| **风格** | 设置系统的风格（外观和感觉）。<br> <br>用户可以在**设置**应用程序中覆盖此设置：**用户设置** \> **风格**.<br>     <br>    **注意**<br> <br> 由于技术原因，无法更改最新版标题栏的颜色。使用最新版标题栏的应用程序将保留蓝色标题栏。 |
| **开始页面** | 设置用户登录后将重定向到的页面或应用程序。<br> <br>建议设置：**Dashboard** 应用程序。 |
| **启用轻量级启动页面** | 指示应用程序渲染轻量级的快速登陆页面。建议在低带宽环境下使用。 |
| **帮助页面链接** | Defines the URL which users will see when they click **Profile** \>**Help**. |
| **旗帜** | 设置**仪表盘**应用左侧菜单中显示的标志。 |
| **界面语言** | 设置用户界面使用的语言。<br> <br>用户可以在**设置**应用程序中覆盖此设置：**用户设置** \> **界面语言**。 |
| **数据库语言** | 设置数据库中使用的语言。<br> <br>用户可以在**设置**应用程序中覆盖此设置：**用户设置** \> **数据库语言**. |
| **需要授权才能添加到查看对象列表** | 如果选择该选项，如果当前用户没有权限创建对象类型（私人或公开），则会隐藏菜单和索引页面项以及对象列表链接。 |
| **自定义登录页面徽标** | 选择此选项并上传图片，即可在登录页面添加徽标。 |
| **登录页面主题** | 您可以选择登录应用程序的默认布局、侧边栏布局或自定义布局。如果选择自定义布局，则需要在 "登录页面模板 "部分提供自定义模板。 |
| **登录页面模板** | 在这里，您可以粘贴 HTML 来定义登录页面的布局和样式。有关如何定义模板的更多详情，请参阅开发人员文档。 |

## 电子邮件设定 { #system_email_settings } 



表格电子邮件设置

| 设置 | 描述 |
|---|---|
| **主机名称** | 设置 SMTP 服务器的主机名。<br> <br>使用 Google SMTP 服务时，主机名应为 *smtp.gmail.com*。 |
| **Port** | 设置连接 SMTP 服务器的端口。 |
| **用户名** | SMTP 服务器用户账户的用户名。<br> <br> mail@dhis2.org |
| **密码** | SMTP 服务器用户账户的密码。 |
| **TLS** | 如果 SMPT 服务器要求使用 TLS 进行连接，请选择此选项。 |
| ** 电子邮件发件人** | 发送电子邮件时用作发件人的电子邮件地址。 |
| **向我发送测试电子邮件** | 向当前登录 DHIS2 的用户发送测试电子邮件。 |

## 访问设置 { #system_access_settings } 



表格访问设置

| 设置 | 描述 |
|---|---|
| **自我注册账户用户角色** | 定义应赋予自助注册用户账户的用户角色。<br> <br>要启用用户自助注册：从列表中选择任意用户角色。登录页面上将显示自我注册表单的链接。<br>     <br>    **注**<br> <br> 要启用自助注册，还必须选择一个**自助注册账户组织单位**。<br> <br>要禁用用户自助注册： 选择 **禁用自助注册**。 |
| **自我登记账户组织单位** | 定义哪个组织单位应与自助注册用户相关联。<br>     <br>    **注**<br> <br> 要启用自助注册，还必须选择**自助注册账户用户角色**。 |
| **自助注册无需验证码** | 定义是否要使用 reCAPTCHA 进行用户自助注册。默认情况下已启用。 |
| **启用用户账户恢复功能** | 定义用户是否可以恢复自己的密码。<br> <br>启用此设置后，首页上将显示账户恢复表单的链接。<br>     <br>    **注**<br> <br> 用户账户恢复需要配置电子邮件设置（SMTP）。 |
| **多次登录失败后暂时锁定用户账户** | 定义在 15 分钟内连续五次尝试登录失败后，系统是否应锁定用户账户。<br> <br>账户将被锁定 15 分钟，然后用户可以再次尝试登录。 |
| **允许用户授予自己的用户角色** | 定义用户在创建新用户时是否可以将自己拥有的用户角色授予他人。 |
| **允许在添加或更新时将对象分配给相关对象** | 定义是否允许用户在创建或编辑元数据对象时将对象分配给相关对象。<br> <br>创建或编辑组织单位时，可以允许用户将组织单位分配给数据集和组织单位组集。 |
| **要求更改用户账户密码** | 定义是否强制用户每 3 个月、6 个月或 12 个月更改一次密码。<br> <br>如果不想强制用户更改密码，请选择 **从不**。 |
| **启用密码到期提醒** | 设置后，用户将在密码即将过期时收到通知。 |
| **密码的最少字符数** | 定义用户密码中必须包含的最少字符数。<br> <br>可以选择 8（默认）、10、12 或 14。 |
| **CORS 允许列表** | 允许列出一组可从另一个域访问 DHIS2 API 的 URL。每个 URL 都应单独成行输入。跨源资源共享（CORS）是一种机制，允许从提供第一个资源的域之外的另一个域请求网页上的受限资源（如 javascript 文件）。 |

## 日历设定 { #system_calendar_settings } 



表格日历设置

| 设置 | 描述 |
|---|---|
| **日历** | 定义系统将使用的日历。<br> <br>系统支持以下日历：科普特历、埃塞俄比亚历、格里高利历、伊斯兰历（农历）、ISO 8601 历、儒略历、尼泊尔历、波斯历（阳历）和泰历。<br><br> 这是系统范围内的设置。在单个 DHIS2 实例中不可能有多个日历。<br><br> [有关公历和 ISO 8601 之间区别的更多信息，请参阅此处。](https://en.wikipedia.org/wiki/ISO_8601#Week_dates)</a> |
| **日期格式** | 定义系统将使用的日期格式。 |

## 资料汇入设定 { #system_data_import_settings } 

数据导入设置适用于可以启用的其他控件
验证通过Web API导入的汇总数据。他们
对应视为冲突的事项提供可选约束
在导入期间。将约束应用于每个单独的数据值
在导入中。



表格数据导入设置

| 设置 | 描述 |
|---|---|
| **要求周期与数据集的周期类型相匹配** | 要求数据值的周期与数据值的数据元素所属的数据集的周期类型相同。 |
| **要求数据元素成为数据集的一部分** | 要求将数据值的数据元素分配给数据集。如果在导入时指定了特定的数据集，系统将检查数据值是否与指定的数据集相关联。 |
| **要求类别选项组合与数据元素的类别组合相匹配** | 要求数据值的类别选项组合是数据值数据元素类别组合的一部分。 |
| **要求组织单位与数据集的分配相匹配** | 要求数据值的组织单位分配给一个或多个数据集，数据值的数据元素分配给这些数据集。 |
| **要求属性选项组合与数据集的类别组合相匹配** | 要求数据值的属性选项组合是数据值的数据元素所属数据集类别组合的一部分。 |
| ** 要求指定类别选项组合** | 要求指定数据值的类别选项组合。<br> <br>如果未指定，默认情况下将返回默认类别选项组合。 |
| ** 要求指定属性选项组合** | 要求指定数据值的属性选项组合。<br> <br>默认情况下，如果未指定，将返回默认属性选项组合。 |

## 同步设定 { #synchronization-settings } 

以下设置用于数据和元数据
同步。

> **注意**
>
>有关如何配置元数据同步的更多信息，
>请参阅[配置元数据
>同步]（https://docs.dhis2.org/master/zh/user/html/metadata_sync.html）



表格同步设置

| 设置 | 描述 |
|---|---|
| **远程服务器URL ** | 定义要上传数据值到运行 DHIS2 的远程服务器的 URL。<br> <br>建议使用 SSL/HTTPS，因为用户名和密码会与请求一起发送（使用基本身份验证）。<br> <br>系统将尝试每分钟同步一次数据。<br> <br>系统也将使用此设置同步元数据。<br>     <br>    **注意**<br> <br> 要启用数据和元数据同步，还必须在**日程安排**应用程序中启用**数据同步**和**元数据同步**的任务。 |
| **远程服务器用户名** | 用于数据同步的远程服务器上 DHIS2 用户账户的用户名。<br>     <br>    **注意**<br> <br> 如果启用了元数据版本控制，则必须确保配置的用户具有 "F_METADATA_MANAGE "权限。 |
| **远程服务器密码** | 远程服务器上 DHIS2 用户账户的密码。密码将加密存储。 |
| ** 启用元数据同步版本** | 定义在中央实例和本地实例之间同步元数据时是否创建元数据版本。 |
| **如果 DHIS 版本不同，请勿同步元数据** | 不同版本的 DHIS2 元数据模式会发生变化，这可能导致不同版本的元数据不兼容。<br> <br>启用该选项后，如果中央实例和本地实例的 DHIS2 版本不同，将不允许进行元数据同步。这适用于通过用户界面和 API 进行的元数据同步。<br> <br>只有在同步基本实体（如数据元素）时禁用该选项才有价值，因为这些实体在不同 DHIS2 版本之间没有变化。 |
| **尽最大努力** | 元数据版本类型，决定本地实例的导入程序如何处理元数据版本。<br> <br>*尽最大努力*指的是，如果元数据导入遇到缺失引用（例如数据元素组导入中的数据元素缺失），它会忽略错误并继续导入。 |
| **原子** | 元数据版本类型，决定本地实例的导入程序如何处理元数据版本。<br> <br>*原子*表示全有或全无--如果任何引用不存在，元数据导入将失败。 |

## OAuth2客户端 { #system_oauth2_settings } 

您可以在 **系统设置 **中创建，编辑和删除OAuth2客户端
应用程序。

1.  打开 **系统设置 **应用，然后单击 **OAuth2客户端 **。

2.  点击添加按钮。

3.  输入 **名称 **， **客户ID **和 **客户密码 **。

4.  选择 **授权类型 **。


    | Grant type | Description |
    |---|---|
    | **Password** | TBA |
    | **Refresh token** | TBA |
    | **Authorization code** | TBA |

5.  输入**重定向URI **。如果您有多个URI，请使用
    一条线。

## 系统更新通知{ #system_update_notification_settings }

当有新补丁版本可供下载时，系统将默认在 "系统 "类别下的邮件收件箱中发送通知。 
除非在 "常规设置 "下定义了 "系统更新通知收件人 "用户组，否则该通知将发送给拥有 "全部 "权限的用户。 

也可以通过在 "dhis.conf "文件中将 "system.update_notifications_enabled "配置变量设置为 "off "来完全禁用该功能。

它的工作原理是，每天凌晨 2:00 左右在中央服务器上调用 REST API 端点（GET，不带参数）。

这是 URL：[https://releases.dhis2.org/v1/versions/stable.json](https://releases.dhis2.org/v1/versions/stable.json)

