---
edit_url: "https://github.com/dhis2/dhis2-docs-implementation/blob/master/content/database_design/data-quality.md"
revision_date: '2023-01-11'
tags:
- 实施
---

# 资料品质 { #data-quality } 

本章讨论与数据质量有关的各个方面。

## 测量数据质量 { #measuring-data-quality } 

数据完整吗？是否按时收集？这是对的吗？这些都是
分析数据时需要提出的问题。数据质量差
可以采取多种形状；不仅是数字不正确，而且缺乏
完整性，或数据太旧（对于有意义的用途）。

## 数据质量差的原因 { #reasons-for-poor-data-quality } 

数据质量差的潜在原因有很多，其中包括：

  - 收取的金额过多；收集太多数据会导致
    更少的时间来完成报告，并有“捷径”来完成报告

  - 许多手动步骤；之间移动数字、求和等
    不同的纸张形式

  - 定义不明确；对要填写的字段的错误解释
    出去

  - 缺乏信息使用：没有动力去提高质量

  - 信息系统碎片化；可能会导致重复
    报告

## 改善数据质量 { #improving-data-quality } 

提高数据质量是一项长期任务，很多措施都是
组织性质。然而，数据质量应该是一个问题
任何实施过程的开始，并且有一些事情
可以立即解决，例如 DHIS2 中的检查。一些重要数据
质量改进措施有：

  - 更改数据收集表格，统一表格

  - 在收集数据的地方一级促进信息使用

  - 制定检查数据质量的例程

  - 将数据质量纳入培训

  - 在DHIS2中实施数据质量检查

## 使用DHIS2改善数据质量 { #using-dhis2-to-improve-data-quality } 

DHIS2 有几个功能可以帮助改进数据的工作
质量;数据输入期间进行验证，以确保数据被捕获
正确的格式和合理的范围内，用户定义的验证
基于数据之间数学关系的规则
捕获（例如小计与总计），异常值分析功能，以及
作为有关数据覆盖范围和完整性的报告。更间接的是，几个
DHIS2 设计原则有助于提高数据质量，
例如将数据协调到一个集成数据仓库中的想法，
支持本地级数据和分析工具的访问，并通过
提供广泛的数据分析和传播工具。和
更加结构化和统一的数据收集流程
加强各级信息利用，数据质量将
提升。这是更直接的功能概述
目标数据质量：

### 数据输入验证 { #data-input-validation } 

DHIS2 中最基本的数据质量检查类型是确保
捕获的数据格式正确。 DHIS2 将给出
用户输入的值格式不正确的消息
并且在更改为可接受的值之前不会保存该值
价值。例如。无法在数字字段中输入文本。不同的
用户手册中解释了 DHIS2 支持的数据值类型
在数据元素一章中。

### 最小和最大范围 { #min-and-max-ranges } 

停止在数据输入过程中输入错误（例如输入“1000”而不是
‘100’) DHIS2 检查输入的值是否在
合理范围。该范围基于之前收集的数据
由同一医疗机构针对同一数据元素，并由
最小值和最大值。一旦用户输入一个值
在外部，用户将收到该值不被接受的警报。在
为了计算合理的范围，系统至少需要六个
月（周期）的数据。

### 验证规则 { #validation-rules } 

验证规则基于定义关系的表达式
多个数据元素之间。该表达式有一个左侧和一个
右侧和一个运算符，定义前者是否必须小于
大于、等于或大于后者。表达式形成一个
应该断言满足某些逻辑标准的条件。为了
例如，验证规则可以断言总数量
给婴儿接种的疫苗总数少于或等于
婴儿。左侧和右侧必须返回数值。


验证规则可以通过用户界面定义，稍后再定义
运行以检查现有数据。运行验证规则时
用户可以指定要检查数据的组织单位和期间，
因为对所有现有数据进行检查将需要很长时间，并且可能
也不相关。检查完成后，将发布一份报告
向用户展示验证违规，解释哪些数据
值需要修正。

验证规则检查也内置于数据输入过程中
这样当用户完成表单后，可以运行规则来检查
在关闭表单之前，仅显示该表单中的数据。

### 离群分析 { #outlier-analysis } 

基于标准差的异常值分析提供了一种机制
揭示在数值上与其余数据相距甚远的值。
异常值可能是偶然出现的，但它们通常表明测量结果
错误或重尾分布（导致非常高的数字）。在
在前一种情况下，人们希望丢弃它们，而在后一种情况下，人们希望丢弃它们
在使用假设的工具或解释时应谨慎
正态分布。分析基于标准正态分布
分配。

### 完整性和及时性报告 { #completeness-and-timeliness-reports } 

完整性报告将显示有多少数据集（表格）
按组织单位和期限提交。您可以使用三个之一
计算完整性的不同方法； 1）基于完整性
数据输入中的按钮，2) 基于一组定义的强制数据
元素，或 3) 基于数据的总注册数据值
放。

完整性报告还将显示
区域按时报告，及时报告的百分比
给定区域中的设施。及时性计算基于
系统设置称为期末后的天数，以符合及时数据的条件
提交。


## 计算数据元素的完整性{ #calculating-completeness-for-data-elements }
在一些 DHIS2 实现中，我们发现数据集中所有数据元素的报告不一致。默认情况下，DHIS2 仅评估数据集的报告率，而不评估该数据集中各个数据元素的报告率。数据元素报告率的目标是评估单个值的报告一致性。这仅适用于聚合数据元素。

报告率为：100 x（接收值的数量/期望值的数量）

为了计算数据元素的报告率，我们必须定义一个带有分子（接收值的数量）和分母（预期值的数量）以及因子 100（百分比指标类型）的指标。定义分子的方法只有一种，但计算分母的方法有多种。

DHIS 2.38 及更高版本具有直接定义此类指标的功能。在 2.37 及以下版本中，要求使用预测变量作为计算的中间步骤。这两种方法分别进行描述。

### 2.38 及更高版本的说明 { #instructions-for-238-and-higher }

DHIS 2.38 及更高版本支持直接使用指标计算分子和分母。对于分母，有多种定义分母的替代方案，即“预期报告数量”，对每一种都进行了描述，并提供了有关何时适用的一些指导。


#### 分子 { #numerator }
*分子*应该是数据元素的**值的计数**。为此，我们建议在表达式中使用 subExpression 和 isNotNull 条件语句。只要为此数据元素输入数字（包括零），就会返回 1 值。下面给出一个例子。

![分子表达式示例](resources/images/de_completeness_1.png)

对于使用类别组合分解的数据元素，如果存在任何分解（类别选项组合）的数据，或者为以下类别创建完整性指标是否更相关，您需要考虑是否将数据元素计为“已报告”一种特定的分类。上面的例子将实现前者。要检查一个类别选项组合的完整性，请将其 ID 包含在内部表达式中。

#### 分母定义 { #denominator-definition }
这些是定义分母计算（即预期报告的计数）的主要选项：

1. 属于同一数据集的另一个数据元素的报告值计数
2. 数据元素所属的数据集所分配到的组织的计数
3. 先前报告过数据元素本身的器官计数

##### 选项 1 { #option-1 }

此选项基于使用另一个数据元素的报告值的数量作为完整性计算中的**预期值**。可以基于不同的标准来选择该其他数据元素，如下所述。

这种方法的局限性在于，它不会给出数据**总体**完整性的概述，而只会给出数据集中特定数据元素的完整性。因此，需要将其与一般数据集完整性或例如数据集一起进行分析。选项2。

###### 基于核心指标{ #based-on-core-indicator }
如果您想要获取报告率的数据元素用于关键绩效指标计算，且分母中包含常规报告数据，则建议使用为分母报告的值的计数来计算完整性。如果指标计算中未使用数据元素，或者分母基于总体估计值或未以与分子相同的周期报告的其他值，则此选项不可行。

为了解释此选项，我们将从一个示例指标开始，*疑似病例接受疟疾检测 (%)*：

> 疟疾检测病例总数/（诊所疑似病例+社区疑似病例）


现在我们想知道*疟疾检测病例总数*的报告率，因此我们将使用*诊所疑似病例和社区疑似病例*来定义我们的预期值的计数。如果我想根据第一个分母选项创建数据元素报告率，则本示例中的分母为：

```
subExpression(if(isNotNull(#{sVDDqpaKwBH}) || isNotNull(#{ylTxB8pDdW6}),1,0))
```

![](resources/images/de_completeness_2.png)

如果为诊所疑似病例或社区疑似病例输入任何内容（包括零），则该表达式将返回 1 值，该值对应于测试的疟疾病例报告的预期数量（我们的分子）。

此选项的优点是，它可以很好地表明用于计算特定核心指标的数据的完整性/一致性（例如上例中的*疑似病例检测疟疾（%）*）。


*基于相关数据元素*

此选项与上面类似，但使用与分子中的数据元素密切相关的数据元素来计算分母。例如，如果您正在查看 5 年以下住院疟疾病例（分子）的报告率，那么您可以考虑使用 5 年及以上住院疟疾病例、住院疟疾死亡病例、门诊疟疾病例等。


*基于同一数据集中的数据元素*

此选项与上述类似，但使用与您正在计算报告率（分子）的数据元素相同的数据集或数据集部分中报告的数据元素 - 不一定在逻辑上相关。使用这种方法，您应该选择始终（或经常）在数据集中报告的数据元素。例如，在包含孕产妇健康数据的数据集中，更多的卫生机构可能会报告“产前保健首次就诊”的数据元素，而不是“辅助分娩”的数据元素，因此，“产前保健首次就诊”将是对“产前保健首次就诊”的更好估计。预期报告的数量。


##### 选项 2 { #option-2 }

对于正在跨多个数据集收集数据元素并且仍希望根据数据集组织单位分配获得预期报告的国家/地区，建议使用此选项。

要配置此选项，您只需为要在分母中求和的数据集选择**预期**或**实际**报告。这些可以在指标表达式窗口的“报告率”选项卡下进行选择。选择**实际报告**将给出报告的组织单位中数据元素完整性的指标，而使用**预期报告**将给出预期报告的所有组织单位中数据元素完整性的指标。

![](resources/images/de_completeness_5.png)

![](resources/images/de_completeness_7.png)


##### 选项 3 { #option-3 }

在此选项中，我们检查该设施是否在过去 12 个月内报告了您正在评估报告率的数据元素（可以使用其他更长或更短的时间段）。这样，分子数据元素与分母数据元素相同，只是我们还使用 periodOffSet 表达式来评估之前 12 个月中的每个月中是否有记录的值。

![](resources/images/de_completeness_6.png)

选项 3 分母的示例。

```
subExpression(if(isNotNull(#{fbfJHSPpUQD}.periodOffset(-1))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-2))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-3))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-4))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-5))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-6))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-7))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-8))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-9))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-10))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-11))|| isNotNull(#{fbfJHSPpUQD}.periodOffset(-12)),1,0))
```

### 2.37 或更低版本的说明。 { #instructions-for-237-or-lower }

如果您使用 2.37 或更低版本，则必须使用预测变量和指标的组合来计算数据元素报告率。一个预测器将用于计算 **预期报告** 的值并将其保存为数据元素，另一个预测器用于计算 **预期报告** 的值并将其保存为数据元素，最后是两个数据元素组合成一个完整性指标。

请注意，预测器需要安排在服务器上运行。有关这方面的指导，请参阅**最终步骤**部分。


#### 分子 { #numerator }

为此，您必须创建一个在生成器中使用 isNotNull 机密语句的预测器。只要为此数据元素输入数字（包括零），就会返回 1 值。

制作预测器的步骤：

1. 创建输出数据元素。

2. 将输出数据元素分配给您的预测器。

3. 设置周期类型（通常为每月）。

4. 分配分析的组织单位级别（通常是设施级别）。

5. 如下配置生成器。

6. 将连续样本计数设置为 0

7. 将年度样本数设置为 0

8. 将连续跳过计数留空

9. 创建一个预测变量组并将该预测变量添加到该组中。

10. 现在定义分母的预测变量，然后将该预测变量添加到已添加分子预测变量的同一预测变量组中。

![](resources/images/de_completeness_3.png)


#### 分母 { #denominator }

分母可以是这些选项之一。

1. 属于同一数据集的另一个数据元素的报告值计数
2. 数据元素所属的数据集所分配到的组织的计数
3. 先前报告过数据元素本身的器官计数

##### 选项 1 { #option-1 }

此选项基于使用另一个数据元素的报告值的数量作为完整性计算中的预期值。可以基于不同的标准来选择该其他数据元素，如下所述。

这种方法的局限性在于，它不会给出数据整体完整性的概述，而只会给出数据集中特定数据元素的完整性。因此，需要将其与一般数据集完整性或例如数据集一起进行分析。选项2。

###### 基于核心指标{ #based-on-core-indicator }
如果您想要获取报告率的数据元素用于关键绩效指标计算，且分母中包含常规报告数据，则建议使用为分母报告的值的计数来计算完整性。如果指标计算中未使用数据元素，或者分母基于总体估计值或未以与分子相同的周期报告的其他值，则此选项不可行。

为了解释此选项，我们将从一个示例指标开始，*疑似病例接受疟疾检测 (%)*：

> 疟疾检测病例总数/（诊所疑似病例+社区疑似病例）

现在，为了计算*疟疾检测疑似病例（%）*的报告率，我们将使用**诊所疑似病例**和**社区疑似病例**来定义我们的预期值的计数。要为此示例创建分母预测变量，您首先要按照上述创建分子的步骤 1-4 进行操作。本例中的生成器是：

```
if(isNotNull(Clinic suspected cases) OR isNotNull(Community suspected cases),1,0)
```

![](resources/images/de_completeness_4.png)

将顺序样本计数设置为 0。将年度样本计数设置为 0。将顺序跳过计数留空并将预测变量添加到预测变量组。

*基于相关数据元素*

此选项与上面类似，但使用与分子中的数据元素密切相关的数据元素来计算分母。例如，如果您正在查看 5 年以下住院疟疾病例（分子）的报告率，那么您可以考虑使用 5 年及以上住院疟疾病例、住院疟疾死亡病例、门诊疟疾病例等。


*基于同一数据集中的数据元素*

此选项与上述类似，但使用与您正在计算报告率（分子）的数据元素相同的数据集或数据集部分中报告的数据元素 - 不一定在逻辑上相关。使用这种方法，您应该选择始终（或经常）在数据集中报告的数据元素。例如，在包含孕产妇健康数据的数据集中，更多的卫生机构可能会报告“产前保健首次就诊”的数据元素，而不是“辅助分娩”的数据元素，因此，“产前保健首次就诊”将是对“产前保健首次就诊”的更好估计。预期报告的数量。


##### 选项 2 { #option-2 }

对于正在跨多个数据集收集数据元素并且仍希望根据数据集组织单位分配获得预期报告的国家/地区，建议使用此选项。

此选项*不需要*需要为分子创建预测变量。要配置此选项，您只需为要在分母中求和的数据集选择“**预期**”或“**实际**”报告，以及如上所述由预测器生成的分子值。可以在指标表达式窗口的“报告率”选项卡下选择实际/预期报告。选择**实际报告**将给出报告的组织单位中数据元素完整性的指标，而使用**预期报告**将给出预期报告的所有组织单位中数据元素完整性的指标。


![](resources/images/de_completeness_5.png)

![](resources/images/de_completeness_7.png)


##### 选项 3 { #option-3 }

在此选项中，我们检查该设施是否在过去 12 个月内报告了您正在评估报告率的数据元素（可以使用其他更长或更短的时间段）。这样，分子数据元素与分母数据元素相同，只是我们还使用 periodOffSet 表达式来评估之前 12 个月中的每个月中是否有记录的值。

选项 3 的预测变量的定义方式与分子的步骤 1-4 相同。生成器应该是：

![](resources/images/de_completeness_8.png)

如果您想对前 12 个月进行采样，则顺序样本计数应设置为 12。通过更改此值也可以对任何其他月份数进行采样。

将年度样本计数设置为 0。将顺序跳过计数留空，并将预测变量添加到预测变量组。

#### 最终步骤{ #final-steps }

1. 在调度程序应用程序中创建预测器规则并将其设置为每周运行。选择包含分子和分母预测变量的预测变量规则组。对于月度数据，相对开始应为 -30，相对结束应为 0。

2. 确保预测器规则计划在分析表运行之前几个小时运行。

3. 制作数据元素报告率指标，其中包括您从预测变量定义的分子和分母数据元素。该指标应设置为百分比。

