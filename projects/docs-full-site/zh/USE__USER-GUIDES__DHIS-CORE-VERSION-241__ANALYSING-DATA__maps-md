---
edit_url: "https://github.com/dhis2/maps-app/blob/master/docs/maps.md"
revision_date: '2024-04-10'
tags:
- DHIS core version 2.41
- 使用
---

# 使用地图应用 { #using_maps }

## 关于地图应用 { #about_maps }

The Maps App was introduced in release 2.29 and serves as a replacement
of the GIS App offering a more intuitive and user-friendly interface.
The mapping engine from version 2.34 is based on WebGL technology,
capable of showing thousands of features on a map simultaneously.

With the Maps app you can overlay multiple layers and choose among
different basemaps. You can create thematic maps of areas and points,
view facilities based on classifications, and visualize catchment areas
for each facility. You can add labels to areas and points, and search
and filter using various criteria. You can move points and set locations
on the fly. Maps can be saved and shared with other users
and groups, or downloaded as an image.

> **注意**
>
> 要在 **Maps** 应用程序中使用预定义的图例，您需要创建它们
> 首先在 **Maintenance** 应用程序中。

![](resources/images/maps_main.png)

- 工作区左侧的**图层面板**显示一个
  当前地图的图层概览：

  - 添加图层时，使用 **(+) 添加图层** 按钮，它们
    在此面板中安排和管理。

  - The **basemap** card is always shown in the panel. The default available 
    basemaps are OpenStreetMap Light (OSM Light) and OpenStreetMap Detailed (OSM Detailed). The default selected basemap is OSM Light, unless a different
    basemap has been configured in the system settings. OSM Detailed contains more map features and place names. If the Bing Maps API key has been added by a system administrator, then there will be an additional 4 basemaps from Bing Maps (Bing replaced Google Maps provided in previous versions). Bing Road and Bing Dark show roads, borders and places. Use the dark version if the colors on your map layers are bright. Bing Aerial and Bing Aerial Labels show satellite and detailed aerial imagery. Switch between them by selecting the desired image.

  - 图层面板右侧的小箭头按钮，位于
    顶部，允许隐藏或显示面板。

<!-- end list -->

- 靠近左上角的 **File** 按钮允许您打开和保存
  maps. See [using the maps file menu](#using_maps_file_menu) for more detailed information.

<!-- end list -->

- 文件按钮旁边的 **下载**按钮可让您将当前地图下载为PNG图像。

<!-- end list -->

- 右上角的**解释**按钮打开解释
  panel on the right side of the workspace. See [viewing interpretations](#mapsInterpretation) for more information.

<!-- end list -->

- 地图上的 **+** 和 **-** 按钮允许您放大和缩小
  分别是地图。鼠标滚轮缩放是连续的，
  使我们能够将地图完美地贴合您的内容。

- **旋转地图**按钮（三角形箭头）允许您
  旋转和倾斜地图以增强数据视图。按下按钮
  （或键盘上的 Control 键）同时移动鼠标以更改
  地图视图。再次单击以重置视图。

- **全屏**（四个箭头）允许您全屏查看地图。
  要退出全屏，请再次单击按钮或键盘上的退出键。

* **缩放到内容**（有界放大镜符号）自动
  调整缩放级别和地图中心位置以放置数据
  你的地图是焦点。

* **搜索**（放大镜符号）允许搜索和
  跳到地图上的某个位置。

* 使用**直尺**按钮，您可以测量地图上的距离和面积。

* 右键单击地图以显示该地图的经度和纬度
  地点。

**底图**

底图图层由图层面板中的图层 _cards_ 表示，例如
作为：

![](resources/images/maps_basemap_card.png)

在底图卡的顶部，从左到右分别是：

- 所选底图的标题

- 折叠和展开底图卡的箭头符号

底图卡片的中间是可用底图的列表。这
当前底图突出显示。

底图卡的底部是：

- 用于切换图层可见性的眼睛符号

- 用于修改图层透明度的滑块

## 建立新地图 { #using_maps_create_map }

1.  In the **Apps** menu of DHIS2, click **Maps**. The **DHIS2 Maps** app
    打开。

2.  单击左上角的 (+) 添加图层按钮。你被介绍
    使用图层选择对话框：

    ![](resources/images/maps_layer_selection.png)

3.  选择要添加到当前地图的图层。可能的选项是：

    - [专题](#using_maps_thematic_layer)

    - [事件](#using_maps_event_layer)

    - [跟踪实体](#using_maps_tracked_entity_layer)

    - [设施](#using_maps_facility_layer)

    - [Org units](#using_maps_org_unit_layer)

    In addition, several layers may be provided by Google Earth
    Engine and other services. The Google Earth Engine layers are available
    if the Google Earth Engine API key has been set up. See [documentation](). Other external layers may be added by the system administrator. Here is the list of available Google Earth Engine layers:

    - 人口

    - 人口年龄组

    - Building footprints

    - 海拔

    - 沉淀

    - 温度

    - 土地覆盖

    _标签覆盖_是一个[外部
    layer](#using_maps_external_map_layers) 在维护应用程序中定义。

## 管理主题层 { #using_maps_thematic_layer }

_专题图_代表地理分布的空间变化。
选择您想要的指标/数据元素、周期和
组织单位层面。如果您的数据库有坐标并聚合
这些组织单位的数据值，它们将出现在地图上。

> **注意**
>
> 您必须生成 DHIS2 分析表才能拥有聚合数据
> 可用值。

![](resources/images/maps_thematic_mapping.png)

专题图层由图层面板中的图层 _cards_ 表示，例如
作为：

主题卡的顶部从左到右分别是：

- 抓取字段，允许使用鼠标拖动和重新排序图层

- 与图层关联的标题和时期

- 折叠和展开主题卡片的箭头符号

主题卡的中间是一个图例，表示价值
显示在图层上的范围。

主题卡的底部从左到右分别是：

- 编辑（铅笔）按钮以打开图层配置对话框

- 用于切换图层可见性的眼睛符号

- 用于修改图层透明度的滑块

- 具有更多选项的更多操作（三个点）按钮：

    - A **Show/hide data table** toggle button to show or hide the data table
    与图层相关联

    - **Open as chart** will open this thematic data as a chart in the Data Visualizer app

    - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

    - **编辑图层**与上方的编辑按钮相同

    - **移除图层**将从当前地图中移除该图层。

### 创建一个主题层 { #create-a-thematic-layer } 

To create a thematic layer, choose **Thematic** on the **Add
layer** selection. This opens the Thematic layer configuration dialog.

1.  In the **Data** tab:

    ![](resources/images/maps_thematic_layer_dialog_DATA.png)

    - 选择一种数据类型，然后分别选择组和
      目标元素。可用字段取决于类型
      选择的项目。

    - 从 **聚合类型** 字段中为数据选择一个值
      要在地图上显示的值。默认情况下，“按数据元素”是
      被选中。替代值是： Count;平均数;和;标准
      偏差;方差;分钟；最大限度。另见[聚合
      运营商]（https://dhis2.github.io/dhis2-docs/master/en/user/html/ch10s05.html#d0e8082）。

    - **Only show completed events**: Includes only completed events in the aggregation process.
      This is useful when you want to exclude partial events in indicator calculations. Available
      for indicators, program indictors and event data items.

2.  In the **Period** tab

    ![](resources/images/maps_thematic_layer_dialog_PERIOD.png)

    - 选择映射专题数据的时间跨度。
      您可以选择相对或固定时间段。

      - 相对时期

        在 **Period type** 字段中选择 **Relative**，然后
        选择一个相对时期，例如**去年**或
        **过去 12 个月**，在 **Period** 字段中。

        **默认的分析相对周期**可以在**系统设置**中设置
        应用程序。

        如果您选择涵盖多个年/月/周/天的相对时间段
        该图层可以显示为

        - 单（合计）

          显示所选相对期间的汇总值（默认）。

        - 时间线

          包括一个时间线，让您可以逐步完成各个时期。
          同一地图只能添加一个时间线图层。

        - 拆分地图视图

          显示多张地图，让您可以比较不同时期
          并排。支持 12 个项目的相对时间段
          或以下。不能与其他图层类型组合。

      - 固定期间

        在 **Period type** 字段中选择期间长度，然后
        在 **Period** 字段中选择目标。

      - 开始/结束日期

        在**期间类型** 字段中选择**开始/结束日期**
        并填写开始日期和结束日期。

3.  In the **Org Units** tab:

    ![](resources/images/maps_thematic_layer_dialog_ORG_UNITS.png)

    - 选择要包含在图层中的组织单位。
      可以选择任一

      - 一个或多个特定的组织单位，组织单位级别在
        层次结构、组织单位组，或

      - 组织单位层次结构中的相对级别，具有
        尊重用户。通过选择**用户组织
        单位** 地图数据对用户的显示会有所不同
        组织单位层次结构中的不同级别。

    - **Use associated geometry**: This dropdown will only show if there
      are any additional geometry available for your organisation units.
      This is typically used to show facility catchment areas.

4.  In the **Filter** tab:

    ![](resources/images/maps_thematic_layer_dialog_FILTER.png)

    - Click **Add Filter** and select an available data item to add a new
      过滤数据集。

      - Select a data dimension from the dropdown box. You can
        使用搜索字段减少显示的维数。
        单击名称以选择维度。

      - When a dimension is selected you get a second dropdown with
        维度项。选中您要包含在
        筛选。

      可以添加多个过滤器。点击右侧的垃圾桶按钮
      过滤器将其删除。

5.  In the **Style** tab:

    ![](resources/images/maps_thematic_layer_dialog_STYLE.png)

    - Select either **Choropleth** or **Bubble map**.

      - Choropleth will assign a color to each org unit shape according to the data value. This is the recommended technique if the data is normalised (per capita).

      - 气泡图将数据值显示为比例圆圈。用这个
        technique if the data is not normalised (absolute numbers). The circles are placed in the center of each org unit.

    - 为比例圆或点设施设置**低半径**和**高半径**。圆将根据数据值在低半径和高半径之间缩放。半径必须在0到50像素之间。

    - **Show labels**: Allows org unit names and values to be shown on the layer.
      Select between "Name", "Name and value" and "Value" only. Font size, weight, style
      and color can also be modified.

    - **不显示数据**：默认情况下，地图上不会显示缺少数据值的组织单位。
      如果您想用颜色显示它们，请选中此框。单击颜色以更改它。

    - 选择图例类型：

      - **自动颜色图例**：应用程序将根据以下内容为您创建图例
        您选择的分类方法、类别数量和色阶。放
        **分类**为：

        - 等间隔

          每个间隔的范围将是（最高数据值-最低数据值/类数）

        - 均数

          图例创建者将尝试平均分配组织单位。

      - **预定义的颜色图例**：在预定义的图例之间进行选择。

      - **单色图例**：选择气泡或圆圈的颜色。仅可用
        用于气泡图。

6.  Click **Add layer**.

### 修改主题层 { #modify-a-thematic-layer } 

1.  在图层面板中，单击主题上的编辑（铅笔）图标
    层卡。

2.  根据需要修改任何选项卡上的设置。

3.  Click **Update layer**.

### 筛选主题层中的值 { #filter-values-in-a-thematic-layer } 

Thematic layers have a **Show/hide data table** option that can be toggled on or
off from the thematic layer card.

![](resources/images/maps_thematic_layer_data_table.png)

数据表显示构成主题层的数据。

- clicking on a up/down arrow button will sort the table based on that column;
  在上升和下降之间切换。

- 在标题下方的过滤器字段中输入文本或表达式
  将这些过滤器应用于数据，并且显示将调整
  根据过滤器。过滤器应用如下：

  - 名称

    按包含给定文本的名称过滤

  - 值

    按给定的数字和/或范围过滤值，例如：
    2,\>3&\<8

  - 传说

    按图例过滤并包含给定的文本

  - 范围

    按包含给定文本的范围过滤

  - 水平

    按数字和/或范围过滤级别，例如：2，\> 3＆\ <8

  - 父母

    按包含给定文本的父项名称过滤

  - ID

    按包含给定文本的ID进行过滤

  - 类型

    按包含给定文本的GIS显示类型过滤

  - 颜色

    按包含给定文本的颜色名称过滤

> **Note**
>
> Data table filters are temporary and are not saved with the map layers
> as part of the saved map.

### 搜索组织单位 { #search-for-an-organisation-unit } 

数据表中的 NAME 过滤器字段提供了一种有效的方法
搜索单个组织单位。

### Open organisation unit profile { #open-organisation-unit-profile } 

You can open the [organisation unit profile](#using_maps_org_unit_profile) in three ways:

1. Click on any of the organisasjon units shown on the map, and click
   the **View profile** button in the popup.

2. Right-click one of the organisation units on the map, and select **View profile**
   from the menu.

3. Click on an organisation unit row in the **data table**.

### 在组织层次结构之间导航 { #navigate-between-organisation-hierarchies } 

当地图上有可见的组织单位时，您可以轻松地
在不使用级别/父级的情况下在层次结构中上下导航
用户界面。

1.  右键单击组织单位之一。

2.  选择**向上钻取一级**或**向下钻取一级**。

    如果您处于最低级别或
    如果在下面的级别上没有可用的坐标。同样地
    向上钻取选项从最高级别被禁用。

### 删除主题层 { #remove-thematic-layer } 

要清除主题层中的所有数据：

1.  在左侧的图层卡中，单击_更多操作_（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理事件层 { #using_maps_event_layer }

事件层显示注册事件的地理位置
在 DHIS2 跟踪器中。只要事件具有关联的点或多边形
坐标，您可以使用此图层从聚合的
显示在专题层中的数据给底层个人
事件或案例。

You can also display aggregated events for facilities or organisation
units. You do this through a thematic layer using event data
items. This is useful when you only have the coordinates for the Org
Unit under which the events are recorded.

![](resources/images/maps_event_layer.png)

事件层由层面板中的层 _cards_ 表示，例如
作为：

在事件卡的顶部，从左到右分别是：

- 抓取字段，允许使用鼠标拖动和重新排序图层

- 与图层关联的标题和时期

- 折叠和扩展事件卡的箭头符号

在事件卡的中间是一个说明样式的图例
层。

在事件卡的底部，从左到右分别是：

- 编辑（铅笔）按钮以打开图层配置对话框

- 用于切换图层可见性的眼睛符号

- 用于修改图层透明度的滑块

- 具有更多选项的更多操作（三个点）按钮：

  - A **Show/hide data table** toggle button to show or hide the data table associated with the layer

  - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

  - **编辑图层**与上方的编辑按钮相同

  - **移除图层**将从当前地图中移除该图层。

### 创建一个事件层 { #maps_create_event_layer }

要创建事件层，请在 **Add
层**选择**事件**。这将打开事件层配置对话框。

1.  In the **Data** tab:

    ![](resources/images/maps_event_layer_dialog_DATA.png)

    - 选择一个项目，然后选择一个项目阶段。**阶段**
      字段仅在选择程序后显示。

      如果所选程序只有一个阶段可用，
      舞台是自动选择的。

    - 从 **Coordinate field** 中为位置选择一个值
      显示在地图上。默认情况下，选择“事件位置”。
      根据属于一个的数据元素或属性
      程序，其他坐标如“家庭位置”是
      可用的。

    - 默认情况下，所有带有坐标的事件都显示在地图上。
      使用 **Event status** 字段仅显示具有一个的事件
      状态：活动、已完成、计划、过期或已跳过。

2.  In the **Period** tab

    ![](resources/images/maps_event_layer_dialog_PERIOD.png)

    - 选择事件发生的时间跨度。你可以
      选择固定期间或相对期间。

      - 相对时期

        在 **Period** 字段中，选择相对期间之一，
        例如**本月**或**去年**。

        **默认的分析相对周期**可以在
        **系统设置**应用程序。

      - 固定期间

        在 **Period** 字段中，选择 **Start/end Dates** 并填写
        在开始日期和结束日期。

3.  In the **Org Units** tab:

    ![](resources/images/maps_event_layer_dialog_ORG_UNITS.png)

    - 选择要包含在图层中的组织单位。
      可以选择任一

      - 一个或多个特定的组织单位，或

      - 组织单位层次结构中的相对级别，具有
        尊重用户。通过选择**用户组织
        单位** 地图数据对用户的显示会有所不同
        组织单位层次结构中的不同级别。

4.  In the **Filter** tab:

    ![](resources/images/maps_event_layer_dialog_FILTER.png)

    - 单击 ADD FILTER 并选择可用数据项以添加新的
      过滤数据集。

      - 对于 _option set_ 类型的数据项，您可以选择任何一个
        the options from the dropdown box by using the down-wards
        箭头或直接在框中开始输入以过滤
        选项。

      - 对于 _number_ 类型的数据项，您可以选择运算符，例如
        等于、不等于、大于或小于。

      - 对于 _boolean_ 类型的数据项（是/否），您可以选中该框
        条件是否应为有效或为真。

      - 对于 _text_ 类型的数据项，您将有两个选择：
        **Contains** 表示查询将匹配所有值
        其中包含您的搜索值，并且**是精确的**意味着
        只有与您完全相同的值
        将返回搜索查询。

      可以添加多个过滤器。点击右侧的垃圾桶按钮
      过滤器将其删除。

5.  In the **Style** tab:

    ![](resources/images/maps_event_layer_dialog_STYLE.png)

    - 选择 **Group events** 将附近的事件（集群）分组，或
      **查看所有事件**以单独显示事件。

    - 为事件或聚类点选择一种**颜色**。

    - 为事件选择**半径**（1到20之间）。

    - 选择 **Show buffer** 以显示每个周围的视觉缓冲区
      事件。可以在此处修改缓冲区的半径。这
      选项仅在您选择 **查看所有事件** 时可用
      以上。

    - 选择 **Style by data element** 为事件着色
      根据数据值。如果您还选择将事件分组，
      culsters 将显示为小圆环图显示
      the distribution of the data values. The available options vary for
      不同的数据类型：

      - **选项集**：为选项中的每个选项选择一种颜色
        放。您可以为选项中的选项设置默认颜色
        维护应用程序。

      - **数字**：您可以在 [相同的
        作为专题图层的方式](#using_maps_thematic_layer_style) 使用
        自动或预定义的图例。

      - **布尔值**：为真/是选择一种颜色，为真/是选择另一种颜色
        假/没有。

6.  Click **Add layer**.

### 修改事件层 { #modify-an-event-layer } 

1.  在图层面板中，单击事件图层上的编辑（铅笔）图标
    卡片。

2.  修改 DATA、PERIOD、FILTER、ORG UNIT 和 STYLE 的设置
    选项卡。

3.  Click **Update layer**.

### 列出和过滤事件 { #listing-and-filtering-events } 

Event layers have a **Show/hide data table** option that can be toggled on or
off from the event layer card.

![](resources/images/maps_event_layer_data_table.png)

数据表显示构成事件层的数据。

- clicking on the up/down arrow will sort the table based on that column;
  在上升和下降之间切换。

- 在标题下方的过滤器字段中输入文本或表达式
  将这些过滤器应用于数据，并且显示将调整
  根据过滤器。过滤器应用如下：

  - ID

    按包含给定文本的事件ID进行过滤

  - 组织单位

    按包含给定文本的组织单位名称过滤

  - 活动时间

    按包含给定文本的事件时间过滤

  - 类型

    按包含给定文本的GIS显示类型过滤

  - **按数据元素设置样式**：如果事件按数据元素设置样式
    （例如性别）数据值和颜色都可以过滤。

  - **在报告中显示**：选中以在报告中显示的数据元素将
    显示在单独的列中（请参阅下文如何添加它们）。

  - 数字数据值可以通过给定的数字和/或范围进行过滤，
    例如：2,\>3&\<8

> **Note**
>
> Data table filters are temporary and are not saved with the map layers
> as part of the saved map.

### 修改事件数据表和弹出窗口中的信息 { #modify-information-in-event-data-table-and-popups } 

If you have access to the selected program in the maintenance app, you can modify the information displayed in the event pop-up window.

![](resources/images/maps_eventlayer_eventinfopopup.png)

1.  打开**维护**应用程序。

2.  选择**程序**。

3.  Click the program you want to modify and select **(2) Assign data elements**.

4.  对于要在弹出窗口中显示的每个数据元素，
    选择相应的**在报告中显示**。

5.  点击**保存**。 

### 下载原始事件层数据 { #download-raw-event-layer-data } 

可以以GeoJSON格式下载事件层的原始数据，以便在桌面GIS软件（例如[QGIS]https://www.qgis.org/）中进行更高级的地理分析和处理。下载的数据包括所有单独的事件，作为GeoJSON功能，包括为**在报告中显示**选择的每个数据元素的属性。

![](resources/images/maps_data_download_dialog.png)

- 在左侧的图层卡中，点击_more actions_（三个点）图标，然后点击**下载数据**

- 选择** ID格式**用作下载的GeoJSON文件中数据元素值的键。共有三个选项：

  - ** ID **-使用数据元素的唯一ID
  - **名称**-使用数据元素的人性化名称（翻译）
  - **代码**-使用数据元素的代码

- 选择是否对其他事件属性（例如程序阶段，纬度，经度，事件数据以及组织单位ID，名称和代码）**使用人类可读的键**。如果**未**选中此选项，则这些值将是计算机友好的ID，而不是人类可读（和翻译）的名称。

- Click the **Download** button to generate and download a GeoJSON file. The data will be requested from the DHIS2 server and processed by the maps application. This operation may take several minutes to complete.

- 一旦下载了GeoJSON文件，就可以将其导入大多数标准GIS软件应用程序中。

>请注意，下载的数据不包含样式信息，因为GeoJSON格式本身不支持它。可以选择使用每个要素的属性在外部GIS应用程序中重新创建样式。

### 清除事件层 { #clear-event-layer } 

要清除地图中的所有事件层数据：

1.  在左侧的图层卡中，单击_更多操作_（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理跟踪的实体层 { #using_maps_tracked_entity_layer }

被追踪实体图层显示被追踪的地理位置
在 DHIS2 中注册的实体。前提是被跟踪的实体有
关联的点或多边形坐标，您可以在地图上探索这些。

![](resources/images/maps_tracked_entity_layer.png)

跟踪实体图层由图层面板中的图层卡片表示
如：

沿着跟踪实体卡的顶部，从左到右分别是：

- 一个抓取字段，允许拖动和重新排序图层
  鼠。

- 与图层关联的标题和时期。

- 箭头符号，用于折叠和展开被跟踪的实体卡。

被追踪实体卡片的中间是一个图例，表明
图层样式。

跟踪实体卡的底部从左到右分别是：

- 编辑（铅笔）按钮以打开图层配置对话框

- 用于切换图层可见性的眼睛符号

- 用于修改图层透明度的滑块

- 具有更多选项的更多操作（三个点）按钮：

  - **编辑图层**与上方的编辑按钮相同

  - **移除图层**将从当前地图中移除该图层。

### 创建一个跟踪实体层 { #maps_create_tracked_enity_layer }

要创建跟踪实体层，请在
**添加图层**选择**跟踪实体**。这将打开 跟踪实体层
配置对话框。

1.  In the **Data** tab:

    ![](resources/images/maps_tracked_entity_layer_dialog_DATA.png)

    - 选择要在地图上显示的**跟踪实体类型**。

    - 选择被跟踪实体所属的**程序**。

    - 使用 **Program status** 字段选择被跟踪实体的注册状态
      包括：全部、活动、已完成或已取消。

    - 为给定的跟踪实体设置 **Follow up** 状态
      程序。

2.  在**关系**标签中

    ![](resources/images/maps_tracked_entity_layer_dialog_RELATIONSHIPS.png)

    > **Caution**
    >
    > Displaying tracked entity relationships in Maps is an experimental feature

    - If a Tracked Entity Type with relationships has been selected, you can select the **Display Tracked Entity relationships** checkbox

    - Once checked, you can select the type of relationship to display on the map from the dropdown list. Only relationships from the selected Tracked Entity type are available.

3.  In the **Period** tab

    ![](resources/images/maps_tracked_entity_layer_dialog_PERIOD.png)

    - 如果没有选择节目，您可以设置开始和结束日期
      跟踪的实体是最后更新的。

    - 如果选择了程序，您可以设置上次跟踪实体的时间段
      更新或何时注册或注册该计划。

4.  In the **Org Units** tab:

    ![](resources/images/maps_tracked_entity_layer_dialog_ORG_UNITS.png)

    - 选择要包含在图层中的组织单位。
      您有 3 种选择模式：

      - **仅选定**：包括属于
        仅限选定的组织单位。

      - **选定及以下**：包括和中的跟踪实体
        在所选组织单位的正下方。

      - **选定和所有以下**：包括和中的跟踪实体
        所有低于选定的组织单位。

5.  In the **Style** tab:

    ![](resources/images/maps_tracked_entity_layer_dialog_STYLE.png)

    - 为跟踪的实体点和多边形选择一种**颜色**。

    - 选择 **点大小**（半径在 1 到 20 之间）作为
      点。

    - 选择 **Show buffer** 以显示每个周围的视觉缓冲区
      被跟踪的实体。可以修改以米为单位的缓冲距离
      这里。

    - 如果在关系选项卡上选择了关系类型，则可以为关系和相关的跟踪实体实例选择**颜色**，**点大小**和**线颜色**

6.  Click **Add/Update layer**.

### 修改跟踪的实体层 { #modify-a-tracked-entity-layer } 

1.  在图层面板中，单击跟踪的编辑（铅笔）图标
    实体层卡。

2.  将 DATA、PERIOD、ORG UNIT 和 STYLE 选项卡上的设置修改为
    想要的。

3.  Click **Update layer**.

### 清除跟踪的实体层 { #clear-a-tracked-entity-layer } 

要从地图上清除跟踪的实体层：

1.  在左侧的图层卡中，单击_更多操作_（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理设施层 { #using_maps_facility_layer }

设施层显示代表设施类型的图标。
多边形不会显示在地图上，因此请确保选择一个
具有设施的组织单位级别。

_多边形是地图上代表一个国家的封闭区域，
区或公园。_

![](resources/images/maps_facility_layer.png)

设施层由层面板中的层 _cards_ 表示，例如
作为：

在设施卡的顶部，从左到右分别是：

- 抓取字段，允许使用鼠标拖动和重新排序图层

- **设施**标题

- 用于切换图层可见性的眼睛符号

- 折叠和扩展设施卡的箭头符号

在设施卡的中间是一个指示组的图例
设置表示。

设施卡的底部从左到右分别是：

- 编辑（铅笔）按钮以打开图层配置对话框

- 用于修改图层透明度的滑块

- 具有更多选项的更多操作（三个点）按钮：

  - A **Show/hide data table** toggle button to show or hide the data table
    与图层相关联

  - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

  - **编辑图层**与上方的编辑按钮相同

  - **移除图层**将从当前地图中移除该图层。

### 创建设施层 { #create-a-facility-layer } 

要创建设施层，请在 **Add
图层**选择**机构**。这将打开设施层配置对话框。

1.  In the **Organisation Units** tab

    ![](resources/images/maps_facility_layer_dialog_ORG_UNITS.png)

    - Select the organisation unit level(s) and/or group(s) from the
      右侧的选择字段。

    - 选择要包含在图层中的组织单位。
      可以选择任一

      - 一个或多个特定的组织单位，或

      - 组织单位层次结构中的相对级别，具有
        尊重用户。通过选择**用户组织
        单位** 地图数据对用户的显示会有所不同
        组织单位层次结构中的不同级别。

    - The system administrator can set the default organsation unit
      level containing facilities in the **System Settings** app.

    - **Use associated geometry**: This dropdown will only show if there
      are any additional geometry available for your organisation units.
      This is typically used to show facility catchment areas.

2.  In the **Style** tab:

    ![](resources/images/maps_facility_layer_dialog_STYLE.png)

    - Select any styling you wish to apply to the facilities.

      - 显示标签

        允许在图层上显示标签。字体大小、重量
        和颜色可以在这里修改。

      - 显示缓冲区

        允许在周围的图层上显示视觉缓冲区
        每个设施。可以修改缓冲区的半径
        here. Buffer option is not available if asscoiated geometry is used.

    - Facilities can be styled an **organisation unit group set** using
      different icons. Select a group set from the list of organisation
      unit group sets defined for your DHIS2 instance.
      The system administrator can set the default organsation unit
      group set in the **System Settings** app.

    - If no group set is selected, the facilities will be shown as filled
      circles. The color and the circle radius can be changed.

3.  Click **Add layer**.

### 创建或修改设施层 { #create-or-modify-a-facility-layer } 

1.  在图层面板中，单击设施上的编辑（铅笔）图标
    层卡。

2.  修改 GROUP SET、ORGANIZATION UNITS 和 STYLE 上的设置
    选项卡。

3.  Click **Update layer**.

### 过滤设施层中的值 { #filter-values-in-a-facility-layer } 

Facility layers have a **Show/hide data table** option that can be toggled on or
off from the facility layer card.

![](resources/images/maps_facility_layer_data_table.png)

数据表显示构成设施层的数据。

- clicking on the up/down arrow will sort the table based on that column;
  在上升和下降之间切换。

- 在标题下方的过滤器字段中输入文本或表达式
  将这些过滤器应用于数据，并且显示将调整
  根据过滤器。过滤器应用如下：

  - 名称

    按包含给定文本的名称过滤

  - ID

    按包含给定文本的ID进行过滤

  - 类型

    按包含给定文本的GIS显示类型过滤

> **Note**
>
> Data table filters are temporary and are not saved with the map layers
> as part of the saved map.

### 搜索设施 { #search-for-a-facility } 

数据表中的 NAME 过滤器字段提供了一种有效的方法
寻找个人设施。

### Open organisation unit profile { #open-organisation-unit-profile } 

You can open the [organisation unit profile](#using_maps_org_unit_profile) in three ways:

1. Click on any of the organisasjon units shown on the map, and click
   the **View profile** button in the popup.

2. Right-click one of the organisation units on the map, and select **View profile**
   from the menu.

3. Click on an organisation unit row in the **data table**.

### 删除设施层 { #remove-facility-layer } 

要清除设施层中的所有数据：

1.  在左侧的图层卡中，单击_更多操作_（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## Manage org unit layers { #using_maps_org_unit_layer }

The org unit layer displays the borders and locations of your
organisation units. This layer is particularly useful if you are offline
and don't have access to background maps.

![](resources/images/maps_org_unit_layer.png)

Org unit layers are represented by layer _cards_ in the layer panel such
as:

Along the top of the org unit card from left to right are:

- 抓取字段，允许使用鼠标拖动和重新排序图层

- The **Organisation unit** title

- An arrow symbol to collapse and expand the org unit card

Along the bottom of the org unit card from left to right are:

- 编辑（铅笔）按钮以打开图层配置对话框

- 用于切换图层可见性的眼睛符号

- 用于修改图层透明度的滑块

- 具有更多选项的更多操作（三个点）按钮：

  - A **Show/hide data table** toggle button to show or hide the data table
    与图层相关联

  - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

  - **编辑图层**与上方的编辑按钮相同

  - **移除图层**将从当前地图中移除该图层。

### Create an org unit layer { #create-an-org-unit-layer } 

To create an org unit layer, choose **Org units** on the **Add
layer** selection. This opens the org unit layer configuration dialog.

1.  在**组织单位**标签中

    ![](resources/images/maps_org_unit_layer_dialog_ORG_UNITS.png)

    - 从组织单位级别和/或组中选择
      右侧的选择字段。

    - 选择要包含在图层中的组织单位。
      可以选择任一

      - 一个或多个特定的组织单位，或

      - 组织单位层次结构中的相对级别，具有
        尊重用户。通过选择**用户组织
        单位** 地图数据对用户的显示会有所不同
        组织单位层次结构中的不同级别。

    - **Use associated geometry**: This dropdown will only show if there
      are any additional geometry available for your organisation units.
      This is typically used to show facility catchment areas.

2.  In the **Style** tab:

    ![](resources/images/maps_org_unit_layer_dialog_STYLE.png)

    - select any styling you wish to apply to the org unitss.

      - Labels

        Allows labels to be shown on the layer. Font style can be
        modified here.

      - Boundary color

        Allows the boundary or outline color of the organisation units
        to be changed.

      - 点半径

        设置点类型元素时的基半径，例如
        facilities, are presented on the org unit layer.

    - Organisation units can be styled an **organisation unit group set**
      using different colors. Select a group set from the list of organisation
      unit group sets defined for your DHIS2 instance.

3.  Click **Add layer**.

### Modify an org unit layer { #modify-an-org-unit-layer } 

1.  In the layer panel, click the edit (pencil) icon on the org unit
    层卡。

2.  将 ORGANIZATION UNITS 和 STYLE 选项卡上的设置修改为
    想要的。

3.  Click **Update layer**.

### Filter values in an org unit layer { #filter-values-in-an-org-unit-layer } 

Org unit layers have a **Show/hide data table** option that can be toggled on or
off from the org unit layer card.

![](resources/images/maps_bound_layer_data_table.png)

The data table displays the data forming the org unit layer.

- 单击标题将根据该列对表格进行排序；
  在上升和下降之间切换。

- 在标题下方的过滤器字段中输入文本或表达式
  将这些过滤器应用于数据，并且显示将调整
  根据过滤器。过滤器应用如下：

  - 名称

    按包含给定文本的名称过滤

  - 水平

    按数字和/或范围过滤级别，例如：2，\> 3＆\ <8

  - 父母

    按包含给定文本的父项名称过滤

  - ID

    按包含给定文本的ID进行过滤

  - 类型

    按包含给定文本的GIS显示类型过滤

> **Note**
>
> Data table filters are temporary and are not saved with the map layers
> as part of the saved map.

### 搜索组织单位 { #search-for-an-organisational-unit } 

The NAME filter field in the data table provides an effective way of
searching for individual organisational units displayed in the org unit
layer.

### Open organisation unit profile { #open-organisation-unit-profile } 

You can open the [organisation unit profile](#using_maps_org_unit_profile) in three ways:

1. Click on any of the organisasjon units shown on the map, and click
   the **View profile** button in the popup.

2. Right-click one of the organisation units on the map, and select **View profile**
   from the menu.

3. Click on an organisation unit row in the **data table**.

### 在组织层次结构之间导航 { #navigate-between-organisation-hierarchies } 

You can modify the target of the org unit layer in the hierarchy without
using the level/parent user interface.

1.  右键单击组织单位之一。

2.  选择**向上钻取一级**或**向下钻取一级**。

    如果您处于最低级别，则禁用向下钻取选项。
    同样，从最高级别禁用向上钻取选项。

### Remove org unit layer { #remove-org-unit-layer } 

To clear all data in an org unit layer:

1.  在左侧的图层卡中，单击_更多操作_（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理地球引擎层 { #using_maps_gee }

![](resources/images/maps_ee_layer.png)

Google Earth Engine layers are enabled if a Google Earth Engine API key has been configured for your system. Contact your system administrator if you need access to these layers.

The layers from Google Earth Engine let you display and aggregate external
data to your organisation units. Use the population layer to calculate the
number of people living in a district, or within a distance from a health
facility. The elevation layer allows you to find the lowest, highest and
mean elevation. Use the landcover layer to see the forest cover, croplands
or urban areas, and calculate the percentage for each organisation unit.

支持以下层：

![](resources/images/maps_ee_layer_types.png)

- **人口**：来自 WorldPop 的详细人口数据，显示了估计的
  居住在一个地区的人口数量。可用于 2000 年和
  向前。

- **人口年龄组**：估计居住在一个地区的人数，分组
  按年龄和性别。

- **Building footprints**: The outlines of buildings derived from high-resolution
  satellite imagery. Only for the continent of Africa.

- **海拔**：海拔高度。

- **降水**：数值以 5 天内的毫米为单位。更新
  每月，在下个月的第三周。从地面卫星和气象站收集。

- **温度**：从卫星收集的地表温度。
  有持续云层覆盖的区域会出现空白点。

- **土地覆盖**：美国宇航局从卫星收集的 17 种不同的土地覆盖类型。

### 创建地球引擎图层 { #create-an-earth-engine-layer } 

要创建 Earth Engine 图层，请从 **Add
层**选择。这将打开层配置对话框。

1.  In the **Data** tab:

    ![](resources/images/maps_ee_layer_dialog_DATA.png)

    - 对于“人口年龄组”，您可以选择年龄/性别**组**
      您希望在汇总数据时包括在内。

    - 选择计算时要使用的**聚合方法**
      所选组织单位的值。

      - **总和**：计算每个组织单位内的总数。
        推荐用于人口图层。

      - **Min**：返回显示在图层单元下方的最小值
        选择。对于人口层，它将是最小的 _people per
        公顷_.对于高程图层，它将返回最低高程（米
        高于海平面）。

      - **Max**：返回图层单位的最大值。对于人口
        层，它将是每公顷最少_人_。对于高程图层
        将返回每个组织单位的最高海拔。

      - **Mean**：以层为单位返回平均值。对于人口图层
        这将是平均_人每公顷_。对于降水层，它将
        是整个组织单位的平均降雨量（以毫米为单位）。

      - **中值**：以层为单位返回平均值。对于人口图层
        这将是每公顷_人_的中位数。对于温度层，它将
        是组织单位白天的中值°C。

      - **标准差**：返回层中的标准差值
        单元。

      - **Variance**：以层为单位返回方差值。

2.  In the **Period** tab

    ![](resources/images/maps_ee_layer_dialog_PERIOD.png)

    - 选择数据源的时间段。可用期间由
      数据提供者。 “人口年龄组”层只有一个时期，
      而“人口”层有 2000 年及以后的年度数据。
      提供 5 天周期的降水数据，以及 5 天的温度数据
      8天周期。

3.  In the **Organisation Units** tab:

    ![](resources/images/maps_ee_layer_dialog_ORG_UNITS.png)

    - 选择要查看聚合数据值的组织单位。
      可以选择任一

      - 一个或多个特定的组织单位，组织单位级别在
        层次结构、组织单位组，或

      - 组织单位层次结构中的相对级别，具有
        尊重用户。通过选择**用户组织
        单位** 地图数据对用户的显示会有所不同
        组织单位层次结构中的不同级别。

    - **Use associated geometry**: This dropdown will only show if there
      are any additional geometry available for your organisation units.
      This is typically used to calculate values for facility catchment areas.

    - **Building footprints**: Building counts are only available for smaller
      organisation unit areas.

4.  In the **Style** tab

    ![](resources/images/maps_ee_layer_dialog_STYLE.png)

    - 修改特定于图层类型的参数。

    - 根据需要调整图例范围，步长和颜色。

    - 如果选择具有单点坐标的组织单位
      （设施）你可以设置一个半径缓冲区来计算
      内的数据值。 5000 米的半径将聚合所有
      values available within a 5 km distance from a facility. Buffer
      option is not available if associated geometry is used.

5.  Click **Add layer**.

单击地图区域或设施以查看其聚合结果
组织单位。

### 数据值列表 { #listing-of-data-values } 

Earth Engine layers have a **Show/hide data table** option that can be toggled on or
off from the layer card.

![](resources/images/maps_ee_layer_data_table.png)

数据表显示所选组织单位的所有聚合值。

- clicking on the up/down button will sort the table based on that column;
  在上升和下降之间切换。

- 在标题下方的过滤器字段中输入文本或表达式
  将这些过滤器应用于数据，并且显示将调整
  根据过滤器。过滤器应用如下：

- 名称

  按包含给定文本的组织单位名称过滤

- ID

  按包含给定文本的事件ID进行过滤

- 类型

  按包含给定文本的GIS显示类型过滤

- 聚合值

  每个选择的聚合类型都有一列

  数字数据值可以通过给定的数字和/或范围进行过滤，
  例如：2,\>3&\<8

> **注意**
>
> 数据表过滤器是临时的，不会与地图图层一起保存。

## 添加外部地图图层 { #using_maps_external_map_layers }

![](resources/images/maps_terrain_imagery.png)

External map layers are represented as either basemaps or overlays. These must be added to the instance by a system administrator.

- 底图

  这些在图层面板的 **底图** 卡中可用，并且
  被选为任何其他底图。

- 叠加层

  这些在**添加图层** 选项中可用。与底图不同的是，
  叠加层可以放置在任何其他叠加层的上方或下方。

叠加层由层中的附加层_cards_表示
面板如：

覆盖卡的顶部从左到右分别是：

- 抓取字段，允许使用鼠标拖动和重新排序图层

- 外部地图图层的标题

- 折叠和展开覆盖卡的箭头符号

如果图层有图例，则卡的中间是图例。

覆盖卡的底部从左到右分别是：

- 用于修改图层透明度的滑块

- 删除（垃圾桶）图标，用于从当前图层中删除图层
  专题地图。

### GeoJSON external layers { #geojson-external-layers } 

If you add a GeoJSON external layer to your map, you will have a few style choices:

![](resources/images/maps_geojson_external_layer_style.png)

Once the GeoJSON layer has been displayed, you can view the data table

![](resources/images/maps_geojson_external_layer_data_table.png)

As with other layers, you can sort and filter the data. If you want to view the data for one row, click on the row to open the Feature Profile:

![](resources/images/maps_geojson_external_layer_feature_profile.png)

## Organisation unit profile { #using_maps_org_unit_profile }

![](resources/images/maps_org_unit_profile.png)

The organisation unit profile shows detailed information about
each organisation unit. You can open the profile from org unit, facility
and thematic layers.

You can open the organisation unit profile in three ways:

1. Click on any of the organisasjon units shown on the map, and click
   the **View profile** button in the popup.

2. Right-click one of the organisation units on the map, and select **View profile**
   from the menu.

3. Click on an organisation unit row in the **data table**.

The profile will show on the right side of the map. The profile contents is
set by the system administrator.

## 文件菜单 { #using_maps_file_menu }

![](resources/images/maps_file_menu.png)

使用**文件菜单** 来管理您的地图。几个菜单项将是
禁用，直到您打开或保存地图。

Saving your maps makes it easy to restore them later. It also gives you
the opportunity to share them with other users as an interpretation or
put it on the dashboard. You can save all types of layer configurations
as a saved map.

### 建立新地图 { #create-a-new-map } 

点击**文件** \> **新建**。

注意！这将清除您当前拥有的地图图层，而不进行保存。

### 开启新地图 { #open-a-new-map } 

1.  点击**文件** \> **打开**。将打开一个对话框，其中包含地图列表。

2.  Find the saved map you want to open. You can either use \< and \> or
    搜索字段以查找已保存的地图。该列表在每个
    您输入的字符。您可以通过选择过滤列表
    **显示全部**、**由我创建**或**由他人创建**。

3.  点击要打开的地图的名称。

### 保存地图 { #save-a-map } 

创建地图后，可以方便地将其保存以备后用：

1.  单击**文件** \> **保存**。

2.  输入**名称**（必填）和**说明**（可选）
    第一次保存地图。

3.  点击**保存**。 

### 保存地图副本 { #save-a-copy-of-a-map } 

1.  单击**文件** \> **另存为... **

2.  输入**名称**（必填）和**说明**（可选）
    地图。

3.  点击**保存**。 

### 重命名地图 { #rename-a-map } 

1.  点击**文件** \> **重命名**。

2.  为您的地图输入新的**名称**和/或**描述**。

3.  Click **Rename**. The map is updated.

### 翻译地图 { #translate-a-map } 

1.  点击**文件** \>**翻译**。

2.  选择您的翻译的**地方语言**（语言）。

3.  输入翻译后的 **Name** 和 **Description**。原文
    将显示在字段下方。

4.  点击**保存**。 

### 修改地图的共享设置 { #modify-sharing-settings-for-a-map } 

创建并保存地图后，您可以与以下人员共享地图
每个人或一个用户组。要修改共享设置：

1.  点击**文件** \>**共享**。共享设置对话框打开。

2.  **Give access to a user or group**: In the text box, search for the name of the
    user or group you want to share your saved map with and select it.

    Select the access level and click on **Give access**.

    Repeat the step to add more users or groups.

3.  **Users and groups that currently have access**: For each user or group, choose the
    access level. The options are:

    - No access: The public won't have access to the map. This setting is only applicable to All users.

    - View only

    - View and edit

    - Remove access: Remove the access for groups or individuals.

4.  Click **Close** to close the dialog.

### 获取地图链接 { #get-the-link-to-a-map } 

1.  点击**文件** \> **获取链接**。将打开一个链接对话框。

2.  复制链接。

### 删除地图 { #delete-a-map } 

1.  点击**文件** \>**删除**。显示确认对话框。

2.  Click **DELETE** to confirm that you want to delete the saved map.
    您的地图被删除，图层从视图中清除。

## Map interpretations and details { #mapsInterpretation }

An interpretation is a description of a map at a given period. This
information is also visible in the **Dashboard app**. Click
**Interpretations and details** in the top right of the workspace to open the
interpretations panel. The button is only clickable if the map is saved.

![](resources/images/maps_interpretations_panel.png)

### 查看基于相对期间的解释 { #view-interpretations-based-on-relative-periods } 

要查看相对时期的解释，例如一年前：

1.  Open a saved map with interpretations.

2.  Click **Interpretations and details** in the top right of the workspace to open
    解释小组。

3.  Click on **See interpretation**. Your map displays the data and the date
    基于解释的创建时间。查看其他
    解释，点击它们。

![](resources/images/maps_interpretations_modal.png)

### 为地图写解释 { #write-interpretation-for-a-map } 

要创建解释，您首先需要创建地图并保存。
如果您与其他人分享了您的地图，您的解释
write 对那些人是可见的。

1.  Open a saved map.

2.  Click **Interpretations and details** in the top right of the workspace to open
    解释小组。

3.  将出现一个文本字段，并为用户显示占位符“编写解释”
    that have read access to the saved map.

4.  在文本字段中，输入评论、问题或解释。你
    也可以使用“@username”提及其他用户。首先输入“@”
    加上用户名或真实姓名的第一个字母和提及
    bar 将显示可用的用户。提及的用户将收到
    带有解释或注释的内部 DHIS2 消息。你
    可以在 **Dashboard app** 中看到解释。

5.  Click **Post interpretation** to save the interpretation.

### 更改解释的共享设置 { #change-sharing-settings-for-an-interpretation } 

1.  单击一个解释（请参阅上面的查看解释）。

2.  Click the share icon below the interpretation. The sharing settings
    对话框打开。

3.  搜索并添加要共享的用户和用户组
    your map with, and set the access level. Click on **Give access**.

4.  Change the access level for the users you want to modify:

    - **View and edit**: Everyone can view and edit the object.

    - **View only**: Everyone can view the object.

    - **无访问权限**：公众无权访问该对象。这
      setting is only applicable to All users.

    - **Remove access**: Remove the access for groups or individuals.

5.  Click **Close** when sharing settings are updated.

![](resources/images/maps_interpretations_sharing.png)

## 将地图另存为图像 { #using_maps_image_export }

您可以通过单击顶部菜单中的“下载”按钮将地图下载为图像

![](resources/images/maps_download.png)

You will enter a "download mode" where you can adjust the map layout before you 
download the image. The left column gives you the following options:

- **Show map name**: Select if you want to include the map name or not. This option
  is only available if the map is saved. To change the name, exit download mode and
  select _File_ > _Rename_.
- **Show map description**: Select if you want to include the map description or not.
  This option is only available if a map description was added when the map was saved. 
  To change the map description, exit download mode and select _File_ > _Rename_.
- **Show legend**: Select if you want to include the map legend. If the map includes
  more than one layer, you can select the visibility for each legend.
- **Show overview map**: Select if you want to include an overview map (often named
  inset map). This option will be disabled if there is not enough room for it in the 
  right column.
- **Show north arrow**: Select to include a north arrow on the map. The default
  position is the lower right corner of the map, but you can change it to another 
  corner.
- 点击**下载**以下载地图。

Resize your browser window to change the map dimensions. You can also reposition
both the main map and the overview map.

Map download is not supported in Internet Explorer or Safari. We recommend using Google Chrome or Firefox.

## 搜索位置 { #using_maps_search }

地点搜索功能可让您搜索几乎任何位置
或地址。此功能可用于定位例如
地图上的地点、设施、村庄或城镇。

![](resources/images/maps_place_search.png)

1.  在“地图”窗口的右侧，单击放大镜图标。

2.  输入您要查找的位置。

    键入时会显示匹配位置的列表。

3.  从列表中选择一个位置。一个大头针指示位置
    地图。

## 测量地图中的距离和面积 { #using_maps_measure_distance }

1.  在地图的左上角，将光标放在**Measure
    距离和面积**（标尺）图标，然后单击**新建
    测量**。

2.  在地图上添加点。

3.  点击**完成测量**。

![](resources/images/maps_measure_distance.png)

## 获取任意位置的纬度和经度 { #using_maps_latitude_longitude }

右键单击地图上的一个点并选择**显示经度/纬度**。
值显示在弹出窗口中。

## 也可以看看 { #see-also } 

- [管理
  传说](https://docs.dhis2.org/master/en/user/html/manage_legend.html)

