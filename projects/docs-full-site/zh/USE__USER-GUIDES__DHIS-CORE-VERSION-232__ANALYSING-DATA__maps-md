---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/2.32/src/commonmark/en/content/user/using-the-maps-app.md"
revision_date: '2019-04-30'
---

# 使用地图应用 { #using_maps } 

 <!--DHIS2-SECTION-ID:using_maps-->

## 关于地图应用 { #about_maps } 

 <!--DHIS2-SECTION-ID:about_maps-->

Maps App在2.29版中引入，可替代
GIS App提供了更直观，更友好的界面。

使用“地图”应用，您可以覆盖多个图层并在其中选择
不同的底图。您可以创建区域和点的专题图，
根据分类查看设施并可视化集水区
每个设施。您可以将标签添加到区域和点，然后搜索
并使用各种条件进行过滤。您可以移动点并设置位置
在飞行中。可以将地图保存为收藏夹并与其他用户共享
和群组，或下载为图片。

> **注意**
>
> 要在 **Maps** 应用程序中使用预定义的图例，您需要创建它们
> 首先在 **Maintenance** 应用程序中。

![](resources/images/maps/maps_main.png)

  - 工作区左侧的**图层面板**显示一个
    当前地图图层的概述：

      - 添加图层后，使用**（+）Add layer **按钮，
        在此面板中进行安排和管理。

      - **底图** 始终显示在面板中。默认的
        底图是OSM Light，默认情况下处于选中状态。 OpenStreetMap
        详细信息也可以使用Google Streets和Google Hybrid。
        您可以将这些地图用作背景地图和图层。开关
        通过选择所需的图像之间。

      - 图层面板右侧的小箭头按钮，位于
        顶部，可以隐藏或显示面板。

<!-- end list -->

  - 靠近左上角的 **File** 按钮允许您打开和保存
    地图：

      - 新

        将清除所有现有地图图层以创建新地图。

      - 打开

        将显示一个对话框，其中包含现有地图的列表，其中
        它们将被打开，重命名，共享和删除。 *标题
        当前地图显示在文件上方的标题栏中
        按钮。*

      - 保存

        会将所有更改保存到当前地图。

      - 另存为

        将使用新名称保存当前地图。

      - 改名

        允许您更改当前名称和/或描述
        地图。

      - 翻译

        允许您翻译名称和/或描述
        当前地图。

      - 分享

        将打开一个对话框，您可以在其中共享当前地图
        每个人或一组用户。

      - 获取链接

        将提供直接链接到当前地图。

      - 删除

        删除当前地图。

<!-- end list -->

  - 文件按钮旁边的 **下载**按钮可让您将当前地图下载为PNG图像。

<!-- end list -->

  - 右上角的**解释**按钮打开解释
    工作区右侧的面板。该按钮仅
    如果地图已保存，则可单击。

      - **地图详细信息**显示有关当前地图的信息。

      - **解释**允许您查看，添加，编辑和共享
        当前地图的解释。

<!-- end list -->

  - 地图上的** + **和**-**按钮可让您放大和缩小
    地图的鼠标滚轮也可用于
    改变变焦。

  - **自动缩放到内容**（有界放大镜符号）
    调整缩放级别和地图中心位置以将数据放在
    您的地图重点突出。

  - **搜索**（放大镜符号）允许搜索和
    跳到地图上的某个位置。

  - ** ruler **按钮可让您找到两个之间的距离
    地图上的位置。

  - 要查看事件的信息，只需单击事件。

  - 右键单击地图以显示该地图的经度和纬度
    位置。

**底图**

底图图层在图层面板中由图层*卡片*表示，例如
如：


![](resources/images/maps/maps_basemap_card.png)

在底图卡的顶部，从左到右分别是：

  - 所选底图的标题

  - 折叠和展开底图卡的箭头符号

底图卡的中间是可用底图的列表。的
当前底图将突出显示。

底图卡的底部是：

  - 用于切换图层可见性的眼睛符号

  - 用于修改图层透明度的滑块

## 建立新地图 { #using_maps_create_map } 

 <!--DHIS2-SECTION-ID:using_maps_create_map-->

1.  在 **应用** 菜单中，单击 **地图**。 **DHIS2 地图**窗口
    打开。

2.  单击左上角的（+）添加图层按钮。出现你
    使用图层选择对话框：

    ![](resources/images/maps/maps_layer_selection.png)

3.  选择要添加到当前地图的图层。可能的选项是：

      - [专题性](#using_maps_thematic_layer)

      - [大事记](#using_maps_event_layer)

      - [追踪实体](#using_maps_tracked_entity_layer)

      - [设备](#using_maps_facility_layer)

      - [界线](#using_maps_boundary_layer)

    此外，“ Google地球”提供了几层
    引擎及其他服务：

      - 人口密度

      - 海拔

      - 温度

      - 沉淀

      - 土地覆盖

      - 夜间灯

    *标签重叠*是[外部
    维护”应用中定义的图层]（＃using_maps_external_map_layers）。


## 管理主题层 { #using_maps_thematic_layer } 

 <!--DHIS2-SECTION-ID:using_maps_thematic_layer-->

*专题图*代表地理分布的空间变化。
选择指标/数据元素，时间段和
组织单位级别。如果您的数据库具有坐标并汇总
这些组织单位的数据值，它们将显示在地图上。

> **注意**
>
>您必须生成DHIS2分析表才能汇总数据
>可用值。


![](resources/images/maps/maps_thematic_mapping.png)

主题图层在图层面板中由图层*卡片*表示，例如
如：

主题卡的顶部从左到右分别是：

  - 抓取字段，允许使用鼠标拖动和重新排序图层

  - 与图层关联的标题和时期

  - 折叠和展开主题卡片的箭头符号

主题卡片中间有一个图例，指示该值
范围显示在图层上。

主题卡的底部从左到右分别是：

  - 编辑（铅笔）按钮以打开图层配置对话框

  - 用于切换图层可见性的眼睛符号

  - 用于修改图层透明度的滑块

  - 具有更多选项的更多操作（三个点）按钮：

      - **数据表**切换按钮以显示或隐藏数据表
        与图层关联

      - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

      - **编辑图层**与上方的编辑按钮相同

      - **移除图层**将从当前地图中移除该图层。


### 创建一个主题层 { #create-a-thematic-layer } 

要创建事件层，请在 **添加
层**选择**热力**。这将打开事件层配置对话框。

1.  在**数据**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_DATA.png)

      - 选择一种数据类型，然后分别选择组和
        目标元素。可用字段取决于类型
        所选项目。

      - 从 **聚合类型** 字段中为数据选择一个值
        要在地图上显示的值。默认情况下，“按数据元素”为
        已选择。替代值是：计数；平均;和;标准
        偏差;方差;敏最高另请参阅[汇总
        运算符]（https://dhis2.github.io/dhis2-docs/master/en/user/html/ch10s05.html#d0e8082）。

2.  在**期间**标签中

    ![](resources/images/maps/maps_thematic_layer_dialog_PERIOD.png)

      - 选择汇总主题数据的时间跨度。
        您可以选择固定期间或相对期间。

          - 固定期间

            在 **Period type** 字段中选择期间长度，然后
            在 **Period** 字段中选择目标。

          - 相对时期

            在 **Period type** 字段中选择 **Relative**，然后
            选择一个相对期间，例如** This
            月**或**去年**，在**期间**字段中。

          - 开始/结束日期

            在**期间类型** 字段中选择**开始/结束日期**
            并填写开始日期和结束日期。

3.  在**ORG UNITS**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_ORG_UNITS.png)

      - 选择要包含在图层中的组织单位。
        可以选择

          - 一个或多个特定的组织单位，位于
            层次结构，组织单位组或

          - 组织单位层次结构中的相对级别，包括
            尊重用户。通过选择**用户组织
            单位**，地图数据对用户的显示方式会有所不同
            组织单位层次结构中的不同级别。

4.  在**过滤器**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_FILTER.png)

      - 单击添加过滤器，然后选择可用数据项以添加新的
        过滤到数据集。

          - 从下拉框中选择一个数据维度。您可以
            通过使用搜索字段减少显示的尺寸数量。
            单击名称以选择尺寸。

          - 选择尺寸后，您将获得第二个下拉菜单
            尺寸项目。选中要包含在项目中的项目
            过滤。

        可以添加多个过滤器。点击右侧的垃圾箱按钮
        过滤器将其删除。

 <!--DHIS2-SECTION-ID:using_maps_thematic_layer_style-->

5.  在**样式**标签中：

    ![](resources/images/maps/maps_thematic_layer_dialog_STYLE.png)

      - 选择**自动**或**预定义**图例。

          - 自动图例类型意味着应用程序将
            根据您的方法为您创建图例集，
            您可以选择的类别数量（低色和高色）。
            方法暗示图例类的大小。设置

              - 等间隔

                每个间隔的范围将是**（最高数据值-最低数据值/类数）**

              - 均数

                图例创建者将尝试平均分配组织单位。

          - 如果您在主题图层中有设施，则可以设置
            更改最小值和最大值的半径
            **低尺寸**和**高尺寸**框中的值
            分别。

6.  点击**添加图层**。

### 修改主题层 { #modify-a-thematic-layer } 

1.  在图层面板中，单击主题上的编辑（铅笔）图标
    层卡。

2.  根据需要修改任何选项卡上的设置。

3.  点击**更新图层**。

### 筛选主题层中的值 { #filter-values-in-a-thematic-layer } 

主题图层具有**数据表**选项，可以在
脱离主题图层卡。

![](resources/images/maps/maps_thematic_layer_data_table.png)

数据表显示构成主题层的数据。

  - 单击标题将根据该列对表格进行排序；
    在上升和下降之间切换。

  - 在标题下方的过滤器字段中输入文本或表达式
    将这些过滤器应用于数据，并且显示屏将进行调整
    根据过滤器。过滤器的应用如下：

      - 名称

        按包含给定文本的名称过滤

      - 值

        按给定的数字和/或范围过滤值，例如：
        2，\> 3＆\ <8

      - 传说

        按图例过滤并包含给定的文本

      - 范围

        按包含给定文本的范围过滤

      - 水平

        按数字和/或范围过滤级别，例如：2，\> 3＆\ <8

      - 父母

        按包含给定文本的父项名称过滤

      - ID

        按包含给定文本的ID进行过滤

      - 类型

        按包含给定文本的GIS显示类型过滤

      - 颜色

        按包含给定文本的颜色名称过滤

> **注意**
>
>数据表过滤器是临时的，不会与地图图层一起保存
>作为收藏夹的一部分。

### 搜索组织单位 { #search-for-an-organisation-unit } 

数据表中的NAME过滤器字段提供了一种有效的方法
寻找个别的组织单位。

### 在组织层次结构之间导航 { #navigate-between-organisation-hierarchies } 

当地图上有可见的组织单位时，您可以轻松地
在层次结构中上下导航而不使用级别/父级
用户界面。

1.  右键单击组织单位之一。

2.  选择**向上钻取一级**或**向下钻取一级**。

    如果您处于最低级别，则禁用“向下钻取”选项
    如果在下面的级别上没有可用的坐标。同样地
    从最高级别禁用了向上钻取选项。

### 删除主题层 { #remove-thematic-layer } 

要清除主题层中的所有数据：

1.  在左侧的图层卡中，点击*更多操作*（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。


## 管理事件层 { #using_maps_event_layer } 

 <!--DHIS2-SECTION-ID:using_maps_event_layer-->

事件层显示已注册事件的地理位置
在DHIS2跟踪器中。假设事件具有关联的点或面
坐标，则可以使用此层从汇总中向下钻取
主题层中显示给底层个人的数据
事件或案例。

您也可以在设施或
边界水平。您可以通过使用事件数据的主题层来完成此操作
项目。当您仅具有组织的坐标时，这很有用
记录事件的单位。

![](resources/images/maps/maps_event_layer.png)

事件图层在图层面板中由图层* card *表示，例如
如：

在事件卡的顶部，从左到右分别是：

  - 抓取字段，允许使用鼠标拖动和重新排序图层

  - 与图层关联的标题和时期

  - 折叠和扩展事件卡的箭头符号

活动卡中间有一个图例，说明了
层。

在事件卡的底部，从左到右分别是：

  - 编辑（铅笔）按钮以打开图层配置对话框

  - 用于切换图层可见性的眼睛符号

  - 用于修改图层透明度的滑块

  - 具有更多选项的更多操作（三个点）按钮：

      - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

      - **编辑图层**与上方的编辑按钮相同

      - **移除图层**将从当前地图中移除该图层。

### 创建一个事件层 { #maps_create_event_layer } 

 <!--DHIS2-SECTION-ID:maps_create_event_layer-->

要创建事件层，请在 **Add
层**选择**事件**。这将打开事件层配置对话框。

1.  在**数据**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_DATA.png)

      - 选择一个项目，然后选择一个项目阶段。**阶段**
        仅在选择程序后才显示该字段。

        如果所选程序只有一个阶段可用，
        舞台被自动选择。

      - 从 **Coordinate field** 中为位置选择一个值
        在地图上显示。默认情况下，选择“事件位置”。
        取决于属于一个对象的数据元素或属性
        程序，其他坐标，例如“家庭位置”
        可用。

2.  在**期间**标签中

    ![](resources/images/maps/maps_event_layer_dialog_PERIOD.png)

      - 选择事件发生的时间跨度。您可以
        选择固定时间段或相对时间段。

          - 固定期间

            在 **Period** 字段中，选择 **Start/end Dates** 并填写
            在开始日期和结束日期。

          - 相对时期

            在 **Period** 字段中，选择相对期间之一，
            例如**本月**或**去年**。

3.  在**ORG UNITS**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_ORG_UNITS.png)

      - 选择要包含在图层中的组织单位。
        可以选择

          - 一个或多个特定的组织单位，或

          - 组织单位层次结构中的相对级别，包括
            尊重用户。通过选择**用户组织
            单位**，地图数据对用户的显示方式会有所不同
            组织单位层次结构中的不同级别。

4.  在**过滤器**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_FILTER.png)

      - 单击添加过滤器，然后选择可用数据项以添加新的
        过滤到数据集。

          - 对于* option set *类型的数据项，您可以选择
            通过使用向下的下拉框中的选项
            箭头或直接在框中开始输入以进行过滤
            选项。

          - 对于* number *类型的数据项，可以选择类似
            等于，不等于，大于或小于。

          - 对于数据类型为*布尔值*（是/否）的数据项，您可以选中此框
            条件应为有效还是真实。

          - 对于* text *类型的数据项，您将有两种选择：
            **包含**表示查询将匹配所有值
            其中包含您的搜索值，并且**是精确的**意味着
            只有与您完全相同的值
            搜索查询将被返回。

        可以添加多个过滤器。点击右侧的垃圾箱按钮
        过滤器将其删除。

5.  在**样式**标签中：

    ![](resources/images/maps/maps_event_layer_dialog_STYLE.png)

      - 选择 **Group events** 将附近的事件（集群）分组，或
        **查看所有事件**以单独显示事件。

      - 为事件或聚类点选择一种**颜色**。

      - 为事件选择**半径**（1到20之间）。

      - 选择 **Show buffer** 以显示每个周围的视觉缓冲区
        事件。缓冲区的半径可以在这里修改。这个
        选项仅在您选择 **查看所有事件** 时可用
        以上。

      - 选择 **Style by data element** 为事件着色
        根据数据值。选项因不同而异
        数据类型：

          - **选项集**：为选项中的每个选项选择一种颜色
            组。您可以在
            维护应用程序。

          - **数字**：您可以在[
            用作主题图层]（＃using_maps_thematic_layer_style）使用
            自动或预定义的图例。

          - **布尔值**：为true / yes选择一种颜色，为true选择另一种颜色
            错误/否。

6.  点击**添加图层**。

### 修改事件层 { #modify-an-event-layer } 

1.  在图层面板中，单击事件图层上的编辑（铅笔）图标
    卡。

2.  修改DATA，PERIOD，FILTER，ORG UNIT和STYLE上的设置
    选项卡。

3.  点击**更新图层**。

### 在事件弹出窗口中修改信息 { #modify-information-in-event-pop-up-windows } 

对于集群图中的事件，您可以修改在
事件弹出窗口。


![](resources/images/maps/maps_eventlayer_eventinfopopup.png)

1.  打开**程序/属性**应用程序。

2.  点击**程序**。

3.  单击您要修改的程序，然后选择**查看程序
    阶段**。

4.  单击程序阶段名称并选择“**编辑**”。

5.  向下滚动到**选定的数据元素**部分。

6.  对于您要在弹出窗口中显示的每个数据元素，
    选择相应的**在报告中显示**。

7.  点击**更新**。

### 下载原始事件层数据 { #download-raw-event-layer-data } 

可以以GeoJSON格式下载事件层的原始数据，以便在桌面GIS软件（例如[QGIS]https://www.qgis.org/）中进行更高级的地理分析和处理。下载的数据包括所有单独的事件，作为GeoJSON功能，包括为**在报告中显示**选择的每个数据元素的属性。

![](resources/images/maps/maps_data_download_dialog.png)

- 在左侧的图层卡中，点击*更多操作*（三个点）图标，然后点击**下载数据**

- 选择** ID格式**用作下载的GeoJSON文件中数据元素值的键。共有三个选项：

  - ** ID **-使用数据元素的唯一ID
  - **名称**-使用数据元素的人性化名称（翻译）
  - **代码**-使用数据元素的代码

- 选择是否对其他事件属性（例如程序阶段，纬度，经度，事件数据以及组织单位ID，名称和代码）**使用人类可读的键**。如果**未**选中此选项，则这些值将是计算机友好的ID，而不是人类可读（和翻译）的名称。

- 单击**下载**按钮以生成和下载GeoJSON文件。数据将从DHIS2服务器请求并由地图应用程序处理。此操作可能需要几分钟才能完成。

- 一旦下载了GeoJSON文件，就可以将其导入大多数标准GIS软件应用程序中。

>请注意，下载的数据不包含样式信息，因为GeoJSON格式本身不支持它。可以选择使用每个要素的属性在外部GIS应用程序中重新创建样式。

### 清除事件层 { #clear-event-layer } 

要清除地图中的所有事件层数据：

1.  在左侧的图层卡中，点击*更多操作*（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理跟踪的实体层 { #using_maps_tracked_entity_layer } 

 <!--DHIS2-SECTION-ID:using_maps_tracked_entity_layer-->

被跟踪实体层显示被跟踪实体的地理位置
在DHIS2中注册的实体。前提是被跟踪实体具有
关联的点或多边形坐标，则可以在地图上进行探索。

![](resources/images/maps/maps_tracked_entity_layer.png)

跟踪的实体图层由图层面板中的图层卡表示
如：

沿着跟踪实体卡的顶部，从左到右分别是：

  - 抓取字段，可使用拖动和重新排序图层
    鼠。

  - 与图层关联的标题和时期。

  - 箭头符号，用于折叠和展开被跟踪的实体卡。

在跟踪的实体卡中间有一个图例，指示
图层的样式。

跟踪实体卡的底部从左到右分别是：

  - 编辑（铅笔）按钮以打开图层配置对话框

  - 用于切换图层可见性的眼睛符号

  - 用于修改图层透明度的滑块

  - 具有更多选项的更多操作（三个点）按钮：

      - **编辑图层**与上方的编辑按钮相同

      - **移除图层**将从当前地图中移除该图层。

### 创建一个跟踪实体层 { #maps_create_tracked_enity_layer } 

 <!--DHIS2-SECTION-ID:maps_create_tracked_enity_layer-->

要创建跟踪实体层，请在
**添加图层**选择**跟踪实体**。这将打开 跟踪实体层
配置对话框。

1.  在**数据**标签中：

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_DATA.png)

      - 选择要在地图上显示的**跟踪实体类型**。

      - 选择被跟踪实体所属的**程序**。

      - 将**计划状态**设置为**活动**或**已完成**。

      - 为给定的跟踪实体设置 **Follow up** 状态
        程序。

2.  在**关系**标签中

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_RELATIONSHIPS.png)

    > **Caution**
    >
    > Displaying tracked entity relationships in Maps is an experimental feature

      - 如果选择了跟踪的实体类型，则可以选中**显示跟踪的实体关系**复选框

      - 选中后，您可以从下拉列表中选择要在地图上显示的关系类型。仅来自所选“跟踪的实体”类型的关系可用。

3.  在**期间**标签中

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_PERIOD.png)

      - 如果未选择任何程序，则可以在以下情况下设置开始日期和结束日期：
        跟踪的实体最近更新。

      - 如果选择了程序，则可以设置开始日期和结束日期
        计划期。

4.  在**ORG UNITS**标签中：

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_ORG_UNITS.png)

      - 选择要包含在图层中的组织单位。
        您有3种选择模式：

          - **仅选中**：包括属于的跟踪实体
            仅限选定的单位部门。

          - **已选择且在以下**：和中包含的跟踪实体
            在所选组织单位的正下方。

          - **已选择且以下所有**：和中包含的跟踪实体
            所有以下所选的组织单位。

5.  在**样式**标签中：

    ![](resources/images/maps/maps_tracked_entity_layer_dialog_STYLE.png)

      - 为跟踪的实体点和多边形选择一种**颜色**。

      - 选择 **点大小**（半径在 1 到 20 之间）作为
        点。

      - 选择 **Show buffer** 以显示每个周围的视觉缓冲区
        跟踪的实体。可以更改以米为单位的缓冲距离
        这里。

      - 如果在关系选项卡上选择了关系类型，则可以为关系和相关的跟踪实体实例选择**颜色**，**点大小**和**线颜色**

6.  点击**添加/更新图层**。

### 修改跟踪的实体层 { #modify-a-tracked-entity-layer } 

1.  在图层面板中，单击被跟踪对象上的编辑（铅笔）图标
    实体层卡。

2.  将DATA，PERIOD，ORG UNIT和STYLE选项卡上的设置修改为
    想要的。

3.  点击**更新图层**。

### 清除跟踪的实体层 { #clear-a-tracked-entity-layer } 

要从地图上清除跟踪的实体层：

1.  在左侧的图层卡中，点击*更多操作*（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理设施层 { #using_maps_facility_layer } 

 <!--DHIS2-SECTION-ID:using_maps_facility_layer-->

设施层显示代表设施类型的图标。
多边形不会显示在地图上，因此请确保选择一个
具有设施的组织单位级别。

*多边形是表示国家/地区的地图上的封闭区域，
区或公园。*


![](resources/images/maps/maps_facility_layer.png)

设施层在层面板中由层*卡*表示，例如
如：

在设施卡的顶部，从左到右分别是：

  - 抓取字段，允许使用鼠标拖动和重新排序图层

  - **设施**标题

  - 用于切换图层可见性的眼睛符号

  - 折叠和扩展设施卡的箭头符号

设施卡中间有一个图例，指示该组
设置表示形式。

设施卡的底部从左到右分别是：

  - 编辑（铅笔）按钮以打开图层配置对话框

  - 用于修改图层透明度的滑块

  - 具有更多选项的更多操作（三个点）按钮：

      - **数据表**切换按钮以显示或隐藏数据表
        与图层关联

      - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

      - **编辑图层**与上方的编辑按钮相同

      - **移除图层**将从当前地图中移除该图层。


### 创建设施层 { #create-a-facility-layer } 

要创建设施层，请在**添加上选择**设施**
层**选择。这将打开“设施层”配置对话框。

1.  在**组集**标签中：

    ![](resources/images/maps/maps_facility_layer_dialog_GROUPSET.png)

      - 从组织单位组列表中选择一个**组集**
        为DHIS2实例定义的集。

2.  在**组织单位**标签中

    ![](resources/images/maps/maps_facility_layer_dialog_ORG_UNITS.png)

      - 从中选择组织单位级别和/或组
        右侧的选择字段。

      - 选择要包含在图层中的组织单位。
        可以选择

          - 一个或多个特定的组织单位，或

          - 组织单位层次结构中的相对级别，包括
            尊重用户。通过选择**用户组织
            单位**，地图数据对用户的显示方式会有所不同
            组织单位层次结构中的不同级别。

3.  在**样式**标签中：

    ![](resources/images/maps/maps_facility_layer_dialog_STYLE.png)

      - 选择您想要应用于设施的任何样式。

          - 显示标签

            允许在图层上显示标签。字体大小，粗细
            颜色可以在这里修改。

          - 显示缓冲区

            允许在周围的图层上显示可视缓冲区
            每个设施。缓冲区的半径可以修改
            这里。

4.  点击**添加图层**。

### 创建或修改设施层 { #create-or-modify-a-facility-layer } 

1.  在图层面板中，单击工具上的编辑（铅笔）图标
    层卡。

2.  修改“组设置”，“组织单位”和“样式”上的设置
    选项卡。

3.  点击**更新图层**。

### 过滤设施层中的值 { #filter-values-in-a-facility-layer } 

设施层具有**数据表**选项，可以在
离开设施层卡。

![](resources/images/maps/maps_facility_layer_data_table.png)

数据表显示构成设施层的数据。

  - 单击标题将根据该列对表格进行排序；
    在上升和下降之间切换。

  - 在标题下方的过滤器字段中输入文本或表达式
    将这些过滤器应用于数据，并且显示屏将进行调整
    根据过滤器。过滤器的应用如下：

      - 名称

        按包含给定文本的名称过滤

      - ID

        按包含给定文本的ID进行过滤

      - 类型

        按包含给定文本的GIS显示类型过滤

> **注意**
>
>数据表过滤器是临时的，不会与地图图层一起保存
>作为收藏夹的一部分。

### 搜索设施 { #search-for-a-facility } 

数据表中的NAME过滤器字段提供了一种有效的方法
寻找个人设施。

### 删除设施层 { #remove-facility-layer } 

要清除设施层中的所有数据：

1.  在左侧的图层卡中，点击*更多操作*（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

### 分层管理设施 { #manage-facilities-in-a-layer } 

您可以在**设施**、**边界**和**主题**拥有设施
层。

#### 搬迁设施 { #relocate-a-facility } 

1.  右键单击设施，然后单击**重新定位**。

2.  将光标放在新位置。

    新坐标将永久存储。这不能被撤消。

#### 交换设施的经度和纬度 { #swap-longitude-and-latitude-of-a-facility } 

1.  右键单击设施，然后单击**交换经度/纬度**。

    如果用户颠倒了经纬度坐标，这将非常有用
    创建组织单位时。

#### 显示设施信息 { #display-facility-information } 

您可以按以下方式查看管理员设置的组织单位信息：
如下：

 <table>
 <caption>查看组织单位信息</caption>
 <colgroup>
 <col style="width: 40%" />
 <col style="width: 59%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th>功能</th>
 <th>操作</th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p>查看当前期间的信息</p> </td>
  <ol type="1"><td>
 <li><p>单击设施。 </p></li>
 </ol> </td>
 </tr>
 <tr class="even">
 <td> <p>查看选定时间段的信息 </p></td>
 <td> <ol type="1">
  <li><p>右键单击设施，然后单击<strong>显示信息</strong></p>
</li>  
<li><p> 在<strong>基础数据</strong>部分中，选择一个周期。 </p></li>
 </ol>
 <blockquote>
 <p><strong>注意</strong></p>
 <p>您可以在<strong>系统设置</strong>应用中配置显示的基础数据。 </p>
 </blockquote> </td>
 </tr>
 </tbody>
 </table>

## 管理边界层 { #using_maps_boundary_layer } 

 <!--DHIS2-SECTION-ID:using_maps_boundary_layer-->

边界层显示您的边界和位置
组织单位。如果您处于离线状态，则此层特别有用
并且无权访问背景图。


![](resources/images/maps/maps_bound_layers.png)

边界层在图层面板中由图层* card *表示，例如
如：

边界卡的顶部从左到右分别是：

  - 抓取字段，允许使用鼠标拖动和重新排序图层

  - **边界**标题

  - 箭头符号，用于折叠和展开边界卡

边界卡的底部从左到右分别是：

  - 编辑（铅笔）按钮以打开图层配置对话框

  - 用于切换图层可见性的眼睛符号

  - 用于修改图层透明度的滑块

  - 具有更多选项的更多操作（三个点）按钮：

      - **数据表**切换按钮以显示或隐藏数据表
        与图层关联

      - **下载数据**允许您以GeoJSON格式下载此图层的数据，以供其他地图软件使用

      - **编辑图层**与上方的编辑按钮相同

      - **移除图层**将从当前地图中移除该图层。

### 创建边界层 { #create-a-boundary-layer } 

要创建边界层，请在 **Add
图层**选择**边界**。这将打开边界层配置对话框。

1.  在**组织单位**标签中

    ![](resources/images/maps/maps_boundary_layer_dialog_ORG_UNITS.png)

      - 从中选择组织单位级别和/或组
        右侧的选择字段。

      - 选择要包含在图层中的组织单位。
        可以选择

          - 一个或多个特定的组织单位，或

          - 组织单位层次结构中的相对级别，包括
            尊重用户。通过选择**用户组织
            单位**，地图数据对用户的显示方式会有所不同
            组织单位层次结构中的不同级别。

2.  在**样式**标签中：

    ![](resources/images/maps/maps_boundary_layer_dialog_STYLE.png)

      - 选择要应用于边界的任何样式。

          - 显示标签

            允许在图层上显示标签。字体大小和粗细
            可以在这里修改。

          - 点半径

            设置点型元素时的基本半径，例如
            设施，显示在边界层上。

3.  点击**添加图层**。

### 修改边界层 { #modify-a-boundary-layer } 

1.  在图层面板中，单击边界上的编辑（铅笔）图标
    层卡。

2.  将“组织单位”和“样式”选项卡上的设置修改为
    想要的。

3.  点击**更新图层**。

### 过滤边界层中的值 { #filter-values-in-a-boundary-layer } 

边界层具有**数据表**选项，可以在
离开边界层卡。

![](resources/images/maps/maps_bound_layer_data_table.png)

数据表显示构成边界层的数据。

  - 单击标题将根据该列对表格进行排序；
    在上升和下降之间切换。

  - 在标题下方的过滤器字段中输入文本或表达式
    将这些过滤器应用于数据，并且显示屏将进行调整
    根据过滤器。过滤器的应用如下：

      - 名称

        按包含给定文本的名称过滤

      - 水平

        按数字和/或范围过滤级别，例如：2，\> 3＆\ <8

      - 父母

        按包含给定文本的父项名称过滤

      - ID

        按包含给定文本的ID进行过滤

      - 类型

        按包含给定文本的GIS显示类型过滤

> **注意**
>
>数据表过滤器是临时的，不会与地图图层一起保存
>作为收藏夹的一部分。

### 搜索组织单位 { #search-for-an-organisational-unit } 

数据表中的NAME过滤器字段提供了一种有效的方法
搜索边界中显示的各个组织单位
层。

### 在组织层次结构之间导航 { #navigate-between-organisation-hierarchies } 

您可以修改层次结构中边界层的目标，而无需
使用级别/父级用户界面。

1.  用鼠标右键单击边界之一。

2.  选择**向上钻取一级**或**向下钻取一级**。

    如果您处于最低级别，则向下钻取选项将被禁用。
    同样，从最高级别禁用向上钻取选项。

### 移除边界层 { #remove-boundary-layer } 

要清除边界层中的所有数据：

1.  在左侧的图层卡中，点击*更多操作*（三个点）图标
    然后在**删除图层**。

    该图层将从当前地图中删除。

## 管理地球引擎层 { #using_maps_gee } 

 <!--DHIS2-SECTION-ID:using_maps_gee-->


![](resources/images/maps/maps_earth_eng_layer.png)

Google Earth Engine图层可让您显示卫星图像和
Google庞大目录中的地理空间数据集。这些层很有用
结合主题和事件层以增强分析。的
支持以下层：

  - 人口密度估计值与全国总数进行了调整以匹配
    联合国人口司估计。 100 x 100 m网格中的人口
    单元（2010年起）。

  - 海拔高于海平面。您可以调整最小值和最大值，以便
    它可以更好地代表您所在地区的地形。

  - 温度：从卫星收集的地面温度。
    在持续云量覆盖的区域将出现空白点。

  - 从卫星和气象站收集的降水
    地面。该值在5天内以毫米为单位。更新
    每月，在下个月的第3周。

  - 土地覆盖：从卫星收集的17种不同的土地覆盖类型。

  - 夜间照明：来自城市，城镇和其他地点的照明
    持续照明，包括火炬（自2013年起）。

### 创建地球引擎图层 { #create-an-earth-engine-layer } 

要创建地球引擎图层，请从**添加中选择所需的图层
层**选择。这将打开图层配置对话框。

1.  在**样式**标签中

    ![](resources/images/maps/maps_ee_layer_dialog_POPULATION.png)

      - 修改特定于图层类型的参数。

      - 根据需要调整图例范围，步长和颜色。

2.  点击**添加图层**。

## 添加外部地图图层 { #using_maps_external_map_layers } 

 <!--DHIS2-SECTION-ID:using_maps_external_map_layers-->

外部地图图层表示为：

  - 底图

    这些在图层面板的 **底图** 卡中可用，并且
    被选为其他底图。

  - 叠加层

    这些在**添加图层** 选项中可用。与底图不同的是，
    叠加层可以放置在任何其他叠加层的上方或下方。

叠加层由该层中的附加层*卡*表示
面板，例如：

覆盖卡的顶部从左到右分别是：

  - 抓取字段，允许使用鼠标拖动和重新排序图层

  - 外部地图图层的标题

  - 折叠和展开覆盖卡的箭头符号

覆盖卡的底部从左到右分别是：

  - 用于修改图层透明度的滑块

  - 删除（垃圾桶）图标可将图层从当前图层中删除
    专题图。

以下是一些外部层的示例：


![](resources/images/maps/maps_black_basemap_and_nighttime_lights.png)

![](resources/images/maps/maps_terrain_imagery.png)

![](resources/images/maps/maps_aerial_imagery.png)

## 文件菜单 { #using_maps_file_menu } 

 <!--DHIS2-SECTION-ID:using_maps_file_menu-->

使用**文件菜单**管理您的地图。几个菜单项将是
禁用，直到您打开或保存地图。

保存地图可以方便以后进行还原。它也给你
有机会与其他用户分享作为解释，或
放在仪表板上。您可以保存所有类型的图层配置
作为最爱。

### 建立新地图 { #create-a-new-map } 

点击**文件** \> **新建**。

注意！这将清除您当前拥有的地图图层，而不进行保存。

### 开启新地图 { #open-a-new-map } 

1.  点击**文件** \> **打开**。将打开一个对话框，其中包含地图列表。

2.  查找您要打开的收藏夹。您可以使用\ < and \>或
    在搜索字段中查找保存的地图。该列表在每个
    您输入的字符。您可以通过选择过滤列表
    **显示全部**，**由我创建**或**由他人创建**。

3.  点击要打开的地图的名称。

### 保存地图 { #save-a-map } 

创建地图后，可以方便地将其保存以备后用：

1.  单击**文件** \> **保存**。

2.  输入**名称**（必填）和**说明**（可选），然后输入
    第一次保存地图。

3.  点击**保存**。

### 保存地图副本 { #save-a-copy-of-a-map } 

1.  单击**文件** \> **另存为... **

2.  输入**名称**（必填）和**描述**（可选）。
    地图。

3.  点击**保存**。

### 重命名地图 { #rename-a-map } 

1.  点击**文件** \> **重命名**。

2.  为您的地图输入新的**名称**和/或**描述**。

3.  点击**重命名**。地图已更新。

### 翻译地图 { #translate-a-map } 

1.  点击**文件** \>**翻译**。

2.  选择您的翻译的**地方语言**（语言）。

3.  输入翻译后的 **Name** 和 **Description**。原文
    将显示在字段下方。

4.  点击**保存**。

### 修改地图的共享设置 { #modify-sharing-settings-for-a-map } 

创建地图并保存后，您可以与
每个人或用户组。修改共享设置：

1.  点击**文件** \>**共享**。共享设置对话框打开。

2.  在文本框中，搜索所需的用户或组的名称
    与您分享您的收藏夹并选择它。

    所选的用户或组将添加到收件人列表中。

    重复该步骤以添加更多用户组。

3.  如果要允许外部访问，请选择相应的框。

4.  对于每个用户组，选择一个访问设置。选项包括：

      - 无（仅适用于默认组，因为它们无法删除）

      - 可以查看

      - 可以编辑和查看

5.  单击**关闭**以关闭对话框。

### 获取地图链接 { #get-the-link-to-a-map } 

1.  点击**文件** \> **获取链接**。将打开一个链接对话框。

2.  复制链接。

### 删除地图 { #delete-a-map } 

1.  点击**文件** \>**删除**。显示确认对话框。

2.  单击**删除**以确认您要删除收藏夹。
    您的地图被删除，并且从视图中清除了图层。

## 地图解译 { #mapsInterpretation } 

 <!--DHIS2-SECTION-ID:mapsInterpretation-->

解释是在给定时期对地图的描述。这
信息在 **仪表板应用** 中可见。点击
**Interpretations** 在工作区的右上角打开
解释面板。该按钮仅在保存地图时才可点击。

![](resources/images/maps/maps_interpretations_panel.png)

### 查看基于相对期间的解释 { #view-interpretations-based-on-relative-periods } 

要查看相对时期的解释，例如一年前：

1.  用解释打开收藏夹。

2.  点击工作区右上角的**Interpretations**打开
    解释面板。

3.  单击一个解释。您的地图显示数据和日期
    基于创建解释的时间。查看其他
    解释，请单击它们。

### 为地图写解释 { #write-interpretation-for-a-map } 

要创建解释，您首先需要创建地图并保存。
如果您已与其他人共享地图，则说明您
写给那些人看。

1.  用解释打开收藏夹。

2.  点击工作区右上角的**Interpretations**打开
    解释面板。

3.  将为用户显示一个带有占位符“写解释”的文本字段
    拥有对收藏夹的读取权限。

4.  在文本字段中，输入评论，问题或解释。您
    也可以使用“ @username”提及其他用户。首先输入“ @”
    加上用户名或真实姓名的首字母以及提及
    栏将显示可用的用户。提及的用户将收到
    内部DHIS2消息及其解释或注释。您
    可以在 **Dashboard app** 中看到解释。

5.  如果您希望您的解释具有相同的效果，请单击 **SAVE**
    将设置共享为地图。

    如果您想更改共享设置，请单击 **SAVE & SHARE**
    （请参见下文）进行解释。

### 更改解释的共享设置 { #change-sharing-settings-for-an-interpretation } 

1.  单击一个解释（请参阅上面的查看解释）。

2.  点击解释下方的**分享**。共享设置
    对话框打开。

3.  搜索并添加您要共享的用户和用户组
    您的地图。

4.  更改要修改的用户的共享设置：

      - **可以编辑和查看**：每个人都可以查看和编辑对象。

      - **只能查看**：每个人都可以查看对象。

      - **无权访问**：公众将无法访问该对象。这个
        设置仅适用于公共访问。

5.  共享设置更新后，单击**关闭**。

## 将地图另存为图像 { #using_maps_image_export } 

 <!--DHIS2-SECTION-ID:using_maps_image_export-->

您可以通过单击顶部菜单中的“下载”按钮将地图下载为图像

![](resources/images/maps/maps_download.png)

Internet Explorer或Safari不支持地图下载，我们建议您
使用Google Chrome和Firefox。

1.  选择是否要包含地图名称。此选项仅
    保存地图时可用。

2.  选择是否要倾斜地图图例。您可以放置图例
    在地图的四个角之一中。

3.  点击**下载**以下载地图。

## 搜索位置 { #using_maps_search } 

 <!--DHIS2-SECTION-ID:using_maps_search-->

地点搜索功能可让您搜索几乎所有位置
或地址。此功能对于定位例如
网站上的地点，设施，村庄或城镇。


![](resources/images/maps/maps_place_search.png)

1.  在“地图”窗口的右侧，单击放大镜图标。

2.  输入您要查找的位置。

    键入时会显示匹配位置的列表。

3.  从列表中选择一个位置。图钉指示位置
    地图。

## 测量地图中的距离和面积 { #using_maps_measure_distance } 

 <!--DHIS2-SECTION-ID:using_maps_measure_distance-->

1.  在地图的左上角，将光标放在**Measure
    距离和区域**（标尺）图标，然后点击**新建
    测量**。

2.  在地图上添加点。

3.  点击**完成测量**。


![](resources/images/maps/maps_measure_distance.png)

## 获取任意位置的纬度和经度 { #using_maps_latitude_longitude } 

 <!--DHIS2-SECTION-ID:using_maps_latitude_longitude-->

右键单击地图上的一个点并选择**显示经度/纬度**。
值显示在弹出窗口中。

## 也可以看看 { #see-also } 

  - [管理
    图例]（https://docs.dhis2.org/master/zh/user/html/manage_legend.html）
