---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/master/src/implementation/offline-data-entry.md"
revision_date: "2021-06-14"
---

# 使用DHIS 2进行脱机数据输入的准则 { #offline_data_entry }

<!--DHIS2-SECTION-ID:offline_data_entry-->

DHIS 2 部署事实上的标准方式已成为_在线_，这意味着应用程序的单个实例设置在连接到 Internet 的服务器上，并且所有用户都使用 Internet 上的 Web 浏览器连接到该应用程序。这之所以成为可能，要归功于互联网可用性（主要是移动互联网）的稳步增长、易于获得且廉价的云计算资源的提供，以及 DHIS 2 不需要大量带宽的事实。这些发展使得即使在大多数农村地区也可以使用移动互联网调制解调器（也称为加密狗）访问在线服务器。

这种在线部署方式对
实施过程和应用程序维护相比
传统的离线独立风格：

**硬件**：最终用户端的硬件要求仅限于相当现代的计算机/笔记本电脑和互联网<！-- 提及电话，因为 android 被列为
选择？ --> 通过固定线路或移动调制解调器进行连接。不需要为每个用户配备专门的服务器，任何支持互联网的计算机就足够了。在线部署需要一台服务器，但由于只需要采购和维护一台（或几台）服务器，这比在不同位置维护许多单独的服务器要简单（且便宜）。鉴于云计算资源的价格持续稳定下降，同时计算能力不断增强，在云中设置强大的服务器比采购硬件便宜得多。

**软件平台**：最终用户只需要一个网络浏览器即可连接到在线服务器。当今所有流行的操作系统都附带网络浏览器，并且对类型或版本没有特殊要求<!--I’m not sure this is true, at least in practice -->。这意味着，如果发生病毒感染或软件损坏等严重问题，人们总是可以重新格式化并安装计算机操作系统或购买一台新计算机/笔记本电脑。用户可以从原来的位置继续输入数据，并且不会丢失任何数据。

**软件应用**：集中服务器部署方式意味着应用可以集中升级和维护。当发布具有新功能和错误修复的新版本应用程序时，可以将其部署到单个在线服务器。下次最终用户通过 Internet 连接时，所有更改都将反映在客户端上。这显然对改进系统的过程产生了巨大的积极影响，因为新功能可以立即分发给用户，所有用户将访问相同的应用程序版本，并且可以即时整理和部署错误和问题<!-- Bugs can be deployed on-the-fly! -->。

**数据库维护**：与上一点类似，元数据的更改可以集中方式在在线服务器上完成，并将在下次连接到服务器时自动传播到所有客户端。这有效地消除了与维护与传统离线部署方式相关的升级和标准化元数据集相关的巨大问题。例如，在初始数据库开发阶段和年度数据库修订过程中，它非常方便，因为即使更改频繁发生，最终用户也将访问一致且标准化的数据库。

尽管 DHIS 2 实施可以标记为在线，但值得注意的是，此类部署可能不是纯粹在线，并且可能会根据本地限制而出现一些本地变化。例如，虽然各国的大多数用户都可以使用移动互联网或更好的<!-- Other? Fixed might not be better... -->连接方式轻松访问其国家 DHIS 2 实例，但不幸的是，有些用户仍然难以访问该系统以获取数据在互联网连接长时间不稳定或丢失的地方进行输入或分析。对于这些苦苦挣扎的用户来说，需要找到与系统交互的替代方法。

本指南旨在就如何减轻在充满挑战的环境中缺乏可靠互联网的影响提供建议。

## 案例及相应的解决方案 { #offline_data_entry_cases }

<!--DHIS2-SECTION-ID:offline_data_entry_cases-->

在本节中，我们将研究可能具有挑战性的案例，并描述解决这些问题或在短期内尽量减少其对用户和整个系统的影响的可能方法。显然，本指南中提出的可能解决方案应考虑到许多其他参数（例如安全性、当地实践和规则等），在每种情况下进行调整。本指南的想法不是规定可以在任何地方使用的防弹解决方案，而是提出解决该国某些地方的连通性问题的方法。

我们确定了三（3）个主要方案：

1. 有限的互联网可用性和数据输入表格很小
1. 有限的互联网可用性和数据输入形式非常庞大
1. 互联网根本不可用

我们认识到这些情景非常简单，因为在实践中，卫生机构可以有一份用于疾病监测的小型每周表格、一份用于每月进展报告的大表格和一份用于健康计划的中型表格。这使得给定设置的可能场景数量大于此处列出的数量。因此，每个实施团队都需要与利益相关者讨论，做出简单的选择来解决给定环境中的所有场景。在大多数情况下，大约 80% 至 95% 的地区<!-- Do we have a source for this? -->（或医疗机构，如果在此级别完成数据输入）将具有相同的互联网可用性配置，只有其余 5 个地区20% 的人需要其他方式在 DHIS 2 中获取数据。

### 1.有限的互联网可用性（信号不稳定或有限的移动数据）和数据输入表格很小 { #offline_data_entry_cases_small }

<!--DHIS2-SECTION-ID:offline_data_entry_cases_small-->

通过有限的互联网可用性，我们的意思是：

- 网络信号可用且良好，但没有足够的资源购买足够的移动数据来连续在线工作
- 网络状况良好，但不稳定或仅在一天中的特定时段可用
- 网络信号较弱，但会不时改善以允许连接到 DHIS 2

数据输入表单小是指数据输入表单少于一百<！--如果我猜到“小”是什么意思，我会说
10-20 --> 字段。

因此，如果互联网连接有限且数据输入表单很小，则有两种可能性可以解决连接问题：Android 数据捕获应用程序和 Web 数据输入离线功能。

#### 使用Android数据捕获应用程序： { #use-of-android-data-capture-app }

<！-需要确保此版本已随着新版本的发布而更新
应用程序->

Data Capture for DHIS 2 应用程序允许用户使用 Android 设备将数据输入 DHIS 2 服务器。该应用程序从服务器下载输入数据所需的表单实例，并将其存储在设备上。这意味着用户可以离线输入分配给他们的设施的数据，然后在有网络覆盖时将其上传到 DHIS 2 服务器。

为此，系统将要求用户从 Android 设备访问 Google Play 并输入 DHIS 2 data capture 并获得以下屏幕。

然后安装名为 **Data Capture for DHIS 2** 的应用程序。

![](resources/images/offline_data_entry/image5.png)

安装并启动应用程序后，系统将要求用户提供其国家 DHIS 2 的 URL、用户名和密码，然后点击“登录”。

<table style="border:1px;">
<tr>
<td style="width:40%;padding: 5 20 5 20;border:1px;">

![](resources/images/offline_data_entry/image4.jpg)

</td>
<td style="width:40%;padding: 5 20 5 20;border:0px;">
</td>
</tr>
</table>

成功登录后，应用程序将自动下载用户分配到的表单和组织单位，并将其存储在本地以供数据输入。从这里开始，任何后续使用该应用程序进行数据输入都不需要互联网连接，因为表单实例已经存储在本地。仅需要互联网连接来与服务器同步数据。当本地有互联网时可以完成此操作。

<table style="border:0px;">
<tr>
<td style="width:40%;padding: 5 20 5 20 ;border:0px;">

![](resources/images/offline_data_entry/image9.jpg)

</td>
<td style="width:40%;padding: 5 20 5 20 ;border:0px;">

![](resources/images/offline_data_entry/image7.jpg)

</td>
</tr>
</table>

在系统管理方面，将数据输入表单组织到 DHIS 2 中的各个部分将使数据输入体验更加流畅和愉快。

至于同步，当需要时互联网连接不可用时，用户将移动设备带到该地区（在地区会议期间）或到最近的有互联网连接的区域。

#### 脱机使用DHIS 2 Web数据输入模块的功能 { #use-of-the-offline-capability-of-dhis-2-web-data-entry-module }

Web 数据输入模块是 DHIS 2 内部的模块，允许使用浏览器输入数据。这是 DHIS 2 中在线数据输入的常规方式。然而，它确实还具有“离线”功能，即使在互联网中断时也支持继续输入数据。这意味着，如果用户想要在月底立即进行数据输入，他必须首先连接到互联网，登录 DHIS 2 并打开至少一个他分配到的设施的数据输入表格。从该步骤开始，只要网络浏览器中的数据输入网页窗口未关闭，他就可以断开互联网并在他想要的时间段内继续其所有设施的数据输入。完成数据输入后，他可以关闭浏览器并关闭计算机。输入的数据将存储在本地浏览器的缓存中，下次用户上网并登录 DHIS 2 时，系统会要求他单击按钮上传数据。

对于这种情况，可以使用DHIS 2中的android数据输入应用程序或基于半脱机Web的功能，或同时使用这两种功能，具体取决于数据输入表单的大小。但是，清除浏览器的缓存将导致本地存储的数据丢失。因此，建议不要在未确保本地存储的数据同步的情况下清除缓存。<>

当用户登录并且互联网被切断时（有意或无意）

![](resources/images/offline_data_entry/image1.png) <!-- PALD：此屏幕截图是
当主页图标（）左上角）损坏时拍摄。我建议我们更换这张图片！ -->

当互联网重新连接并且用户登录DHIS 2时

![](resources/images/offline_data_entry/image6.png)

### 2.有限的互联网可用性和数据输入形式非常庞大 { #offline_data_entry_cases_huge }

<!--DHIS2-SECTION-ID:offline_data_entry_cases_huge-->

<!-- Does the PDF data entry option still exist? Where you could generate PDF-based data entry forms that could be managed offline and then be uploaded?-->

当互联网的可用性有限但数据输入表单包含数百个字段时，它限制了可能的解决方案。在这种情况下，不建议使用 android capture，原因有两个：

- 它经常会崩溃，因为它不是为处理非常大的表单而设计的<!-- We could perhaps de-emphasise this point.. -->
- 由于屏幕很小并且无法快速输入数据，因此对于用户来说可能会变得乏味且费眼

因此，唯一可用的选择是使用上述网络数据输入模块离线功能，或者当用户无法等待下一次互联网在他的区域可用时移动到互联网可用的最近的地方。

### 3.互联网根本不可用 { #offline_data_entry_cases_no_available }

<!--DHIS2-SECTION-ID:offline_data_entry_cases_no_available-->

在这种情况下，有三个选项：

- 如果用户参加定期会议，则使用 Android 捕获应用程序在本地输入数据，并在有互联网可用的上层同步数据。这仅在表格很小的情况下才可行
- 移动到最近的地方（如果负担得起）或利用上层定期会议的机会，通过网络数据输入模块捕获数据。在这种情况下，根据互联网连接，用户可以在线工作或使用[上面](#offline_data_entry_cases_small)部分中描述的离线功能。
- 询问上层哪里可以通过互联网进行数据输入，无论表格大小如何。尽管此数据输入发生在上层，但仍然可以输入每个医疗机构的数据。

<！-看起来很自然，带有某种结论或
摘要->
