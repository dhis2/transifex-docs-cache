---
edit_url: "https://github.com/dhis2/training-docs/blob/main/content/tracker_use/lg_maps.md"
revision_date: '2024-07-30'
tags:
- 培训文件
---

# 地图学习指南 - 事件和 TEI 图层{ #learners-guide-to-maps-event-and-tei-layer } 

## 这本指南是什么？ { #what-is-this-guide } 

本指南包含跟踪器使用一级课程中与***地图--事件和被跟踪实体层***使用相关的所有练习和详细操作步骤。请在教师提示下完成每个练习。

## 本环节的学习目标{ #learning-objectives-for-this-session } 

1. 描述地图应用程序与跟踪器数据的关系
2. 描述使用跟踪器数据时地图的局限性
3. 使用其中的跟踪器数据创建地图：
   1. 事件层
   2. 被跟踪实体层

## 练习 1{ #exercise-1 } 

### 使用事件图层创建地图{ #create-a-map-using-the-event-layer } 

作为回顾，您可以使用事件图层创建地图。

我们可以利用病例监测计划中的数据，根据诊断和临床信息绘制发烧病例地图。

点击文件 -> 新建，清除输入内容（如果有）。

使用事件层创建地图，输入内容如下：

- 层类型 ：机关单位
  - 第 3 级（地区）
- 图层类型 ：事件（CBS 位置）
- 数据
  - 计划 ：病例监测
  - 阶段：第 1 阶段--诊断和临床信息
  - 坐标区域 ：CBS 位置
  - 事件状态：全部
- 时期 ：今年
- 组织单位 ：用户子 x2 单位
- 过滤器 ：
  - 数据项 ：发烧 = 是
- 风格 ：
  - 团体活动
  - GEN - 性别

地图应该是这样的

![](resources/images/maps/map1new.png)

**数据标签**

![](resources/images/maps/map1_datanew.png)

**期标签**

![](resources/images/maps/map1_period.png)

**组织单位选项卡**

![](resources/images/maps/map1_OUsnew.png)

**过滤器选项卡**

![](resources/images/maps/map1_filternew.png)

**风格标签**

![](resources/images/maps/map1_stylenew.png)

由于这些事件被组合在一起，而且您选择了按性别对它们进行排版，因此我们在放大时看到的是甜甜圈图。不过，当您放大时，您将开始看到这些事件的各个位置。选择一个事件查看详细信息。 

![](resources/images/maps/map1_zoomednew.png)

正如我们所见，无论使用的是事件数据还是跟踪数据，使用该图层的方法都是一样的。与其他分析一样，我们必须记住，事件层将在地图上显示一个程序中的所有事件；因此，在重复事件数据的情况下，您可以在地图上显示多个事件，分别代表这些事件。

#### 查看如何保存地图{ #review-how-to-save-a-map } 

进入文件菜单，选择 "保存 "选项

![](resources/images/maps/map1_save.png)

为地图命名并编写说明，然后选择 "保存"。

![](resources/images/maps/map1_save_dialognew.png)

#### 查看如何下载地图{ #review-how-to-download-a-map } 

在应用程序中选择下载选项。这将打开一个新对话框。将图例放置在您想要的位置，然后选择 "下载 "下载地图。这将把地图的 PNG 文件下载到您的下载文件夹中。

## 练习 2{ #exercise-2 } 

### 使用具有关系的 TEI 图层创建地图{ #create-a-map-using-the-tei-layer-with-relationships } 

### 使用具有关系的 TEI 图层创建地图{ #create-a-map-using-the-tei-layer-with-relationships } 

现在，我们将利用病例监测计划的数据绘制地图，在地图上显示各种关系。

通过文件 -> 新建清除输入。

使用跟踪实体图层创建地图，输入内容如下：

- 第 1 层类型 ：机构单位 - 用户子单位
- 第 2 层类型 ：跟踪实体
- 数据
  - 跟踪实体类型 ：个人
  - 计划 ：病例监测
  - 程序状态：全部
- 关系 ： 
  - 显示跟踪的实体关系 = 是
  - 关系类型 : 曾有联系
- 时期 ：
  - 选择上次更新的时间段
    - 被跟踪实体注册或加入计划的日期：2023 年 12 月 31 日 - 2024 年 7 月 13 日
- 机关单位 : 12 Khammouan
- 选择模式 ：选定及以下所有

地图应该是这样的

![](resources/images/maps/contactsnew1.png)

**边界层**

![](resources/images/maps/mapboundarytei.png)

***Tracked Entity Layer***

**数据标签**

![](resources/images/maps/mapteidata.png)

**关系选项卡**

![](resources/images/maps/mapteirelationship.png)

**期标签**

![](resources/images/maps/mapteiperiod.png)

**组织单位选项卡**

![](resources/images/maps/mapteiou.png)

**风格标签**

![map2_style](resources/images/maps/mapteistyle.png)

在查看样式选项卡时，请再详细解释一下。您可以在这里选择跟踪实体、其相关实体的颜色，以及用于表示关系的线条。

样式选项卡中的 "缓冲区 "选项用于在地理点、线或区域（多边形）周围创建缓冲区。该缓冲区直观地表示与所选地理特征的指定距离，可用于各种分析目的。

这样，在创建地图图层时，就可以对这些关系输出稍作定制。

#### 查看地图输出以及该图层的限制{ #review-the-map-output-along-with-limitations-of-this-layer } 

As we can see, we are able to display tracked entities along with their relationships using this layer. We have already discussed that we are only able to display relationships within the same program currently, but in addition you are not able to apply any event data to filter out the tracked entities that you are showing. Therefore, ***the tracked entity layer can not be combined with any information from the events within a program stage.***

这很不幸，因为它要求我们在跟踪程序中为每个事件收集坐标，而不是只收集一次坐标，并与我们的事件数据结合使用。

不过，我们正在努力解决这个问题，并有望在未来的版本中实现。

