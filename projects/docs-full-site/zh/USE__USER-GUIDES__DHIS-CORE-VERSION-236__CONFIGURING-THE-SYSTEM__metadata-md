---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/2.36/src/user/configure-metadata.md"
revision_date: "2021-11-10"
tags:
    - 使用
    - DHIS 核心 2.36 版
---

# 配置元数据 { #maintenance_app }

## 关于维护应用 { #about_maintenance_app }

In the **Maintenance** app you configure all the metadata objects you need to collect and analyze data:

-   分类目录

-   资料元素

-   数据集和数据输入表格

-   指标

-   组织单位

-   程序元数据：跟踪实体、跟踪实体属性和关系类型

-   验证规则

-   属性

-   常数

-   选项集

-   传说

-   预测变量

-   推送报告

-   外部地图图层

> **注**
>
> 您可以访问的功能取决于您的用户角色访问权限。

### 导航元数据对象 { #navigating_metadata }

元数据对象以列表的形式显示，其中包含与每个对象相关的预定义列。
您可以自定义当前对象列表中显示的列。这些自定义是针对每个用户的，因此不会影响其他用户。请注意，这些更改不会编辑任何元数据，只会编辑列表的显示方式。

#### 管理可见列 { #managing-visible-columns }

![](resources/images/maintainence/configurable_columns_dialog.png)

1. 单击要配置的对象列表右上方的 ![settings-icon](resources/images/maintainence/icon_settings.png) -图标。
2. A dropdown-menu will appear, select **Manage columns**.
3. 将出现一个对话框，并选择默认列。
4. Click any column-name in the list of **Available columns** to add them to the list of selected columns.
5. 您可以通过拖放 ![reorder-icon](resources/images/maintainence/icon_reorder.png) 图标来重新排列所选列的顺序。
6. 您也可以通过单击名称旁边的X图标，从视图中删除任何列。
7. Click **Save** once you are satisified with your changes.

You may easily reset to the default values by clicking the **Reset to default** button.

##### 下载元数据 { #download-metadata }

您可以下载当前正在查看的对象的元数据。元数据下载将遵守您对该列表有效的所有过滤器。

1. 单击要配置的对象列表右上方的 ![settings-icon](resources/images/maintainence/icon_settings.png) -图标。
2. 将会出现一个下拉菜单，选择**下载**。
3. 将出现一个对话框，您可以在其中选择所需的格式和压缩率。
4. 可以选择**具有共享**以包括元数据的共享数据。

## 管理类别 { #manage_category }

### 关于类别 { #about_category }

类别通常是一个概念，例如“性别”，“年龄”或“
“疾病状态”。数据元素，例如“已确认病例数
疟疾”通常分为较小的组成部分，以便确定
例如，已确认的特定年龄组的疟疾病例数。

使用类别将数据元素分解为单个组件。
您还可以使用类别为所有数据分配元数据属性
记录在特定的数据集中，例如“实施伙伴”或
“资金代理机构。”

创建三个类别：“ 1岁以下”，“ 1-5”和“ 5岁以上”。将它们分配为
数据元素的类别。这将为创建三个单独的字段
此数据以数据输入形式：

-   确诊的疟疾病例数（1岁以下）

-   确诊的疟疾病例数（1-5）

-   确诊的疟疾病例数（5例以上）

没有类别，您将不得不创建每个数据
上面单独列出的元素。

In the **Maintenance** app, you manage the following and category objects:

<table>
<caption>Category objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Category option</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Category</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Category combination</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Category option combination</p></td>
<td><p>Edit and show details</p></td>
</tr>
<tr class="odd">
<td><p>Category option group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Category option group set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_category }

1.  创建所有类别选项。

2.  创建由您创建的多个类别选项组成的类别。

3.  创建由一个或多个类别组成的类别组合。

4.  创建数据元素并将其分配给类别组合。

### 创建或编辑类别选项 { #create_category_option }

如果可能，请回收类别选项。例如，可能有
可能共享特定类别选项的两个类别（对于
例如\ <1岁）。创建类别时，此类别
选项可以重复使用。如果特定类别选项很重要
（或类别选项组合）需要一起分析。

1.  Open the **Maintenance** app and click **Category** \> **Category option**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **开始日期**

    3.  **结束日期**

4.  选择组织单位并分配它们。

    > **Tip**
    >
    > You can automatically select all organisation units that belong to an organisation unit level or organisation unit group, for example "Chiefdom" or "Urban. To do this:
    >
    > Select an **Organisation unit level** or **Organisation unit group** and click **Select**.

5.  点击**保存**。 

### 创建或编辑类别 { #create_category }

为特定类别创建所有类别选项后，
您可以创建该类别。

1.  Open the **Maintenance** app and click **Category** \> **Category**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **码**

    3.  **数据维度类型**

        类别可以是 "分类 "或 "属性 "类型。要对数据元素进行分类，请选择**分类**。数据维度类型为 "属性 "时，类别可用于为通过数据集或程序（事件或跟踪器）记录的数据分配类别组合。

    4.  **数据尺寸**

        If you select **Data dimension**, the category will be available to the analytics as another dimension, in addition to the standard dimensions of "Period" and "Organisation unit".

4.  选择类别选项并分配它们。

5.  点击**保存**。 

### 创建或编辑类别组合 { #create_category_combination }

类别组合可让您将多个类别组合成一个
相关集。

您可以分解数据元素“新感染艾滋病毒的数量”
分为以下几类：

-   艾滋病毒服务：“其他”，“ PMTCT”，“结核病”

-   性别：“男”，“女”

在此示例中，有两个分解级别，包括
两个单独的数据元素类别。每个数据元素类别包括
几个数据元素类别选项。

在DHIS2中，根据
常见的一组类别。通过将这些不同的类别合并为一个
类别组合并将这些组合分配给数据元素，
您可以将适当的分类级别快速应用于大型
数据元素数。

1.  Open the **Maintenance** app and click **Category** \> **Category combination**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **码**

    3.  **数据维度类型**

    4.  **报告中的跳过类别总计**

4.  选择类别并分配它们。

5.  点击**保存**。 

### 创建或编辑类别选项组 { #create_category_option_group }

您可以使用类别选项对类别选项进行分组和分类
组。类别选项组集的主要目的是添加更多
您捕获的数据的维数，以便在例如
**数据透视表**或**数据可视化器**应用。

考虑一个由“项目”收集数据并为项目建模的系统
作为类别选项。系统必须能够基于
哪个捐助者支持该项目。在这种情况下，创建一个类别
选项组集称为“捐赠者”。每个捐赠者都可以创建为一个类别
选项组，其中每个类别选项/项目都放在
适当的组。在数据分析应用程序中，“捐赠者”组
集将显示为数据维度，而每个供体显示为
尺寸项目，准备包含在报告中。

要创建类别选项组：

1.  Open the **Maintenance** app and click **Category** \> **Category option group**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **短名称**：为数据元素定义一个短名称。

    3.  **码**

    4.  **数据维度类型**

4.  选择**类别选项**并分配它们。

5.  点击**保存**。 

### 创建或编辑类别选项组集 { #create_category_option_group_set }

您可以将类别选项组分组在类别选项组集中。的
类别选项组集的主要目的是添加更多
您捕获的数据的维数，以便在例如
**数据透视表**或**数据可视化器**应用。

1.  Open the **Maintenance** app and click **Category** \> **Category option group set**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **描述**

    3.  **数据尺寸**

    4.  **数据维度类型**

4.  Select **Category option groups** and assign them.

5.  点击**保存**。 

### 对数据集使用类别组合 { #use_category_combo_for_data_set }

当类别和类别组合具有数据维类型时
“属性”，他们可以将一组通用属性应用于相关的一组
包含在数据集中的数据值。当类别组合为
用作属性，它们用作另一个维度（类似于
您可以在分析中使用的“期间”和“组织单位”。

假设非政府组织在给定的设施中提供ART服务。他们
需要每个月在“ ART每月摘要”中进行报告，
将包含许多数据元素。非政府组织和项目可以
可能会随着时间而改变。为了将数据归因于给定的NGO
和项目在任何时间点，您需要记录此信息
在输入数据时使用每个数据值。

1.  创建两个数据维度类型为 "属性 "的类别："实施伙伴 "和 "项目"。

2.  创建一个数据维度类型为 "属性 "的类别组合："实施伙伴和项目"。

3.  将您创建的类别分配给类别组合。

4.  创建名为 "ART 每月摘要 "的数据集，并选择 "实施伙伴和项目 "类别组合。

When you enter data in the **Data entry** app, you can select an "Implementing partner" and a "Project". Each recorded data value, is assigned a specific combination of these categories as an attribute. These attributes (when specified as a dimension) can be used in the analysis applications similar to other dimensions, for example the period and organisation unit.

![](resources/images/maintainence/categories_dataset_attributes.png)

### 将代码分配给类别选项组合 { #assign_code_category_option_combo }

您可以将代码分配给类别选项组合。这使得数据
DHIS2与外部系统之间的交换更加容易。系统创建
类别选项组合自动。

1.  打开**维护**应用程序，点击**类别** （> **类别选项组合**。

2.  在列表中，找到要修改的对象。

3.  点击选项菜单，然后选择**编辑**。

4.  输入验证码。

5.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注**
>
> 默认设置是每个人（**公共访问权限**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  (可选）添加用户或用户组：搜索用户或用户组并选择。用户或用户组将被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **无访问权限**（仅适用于**公共访问权限**）：公众无法访问对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理数据元素 { #manage_data_element }

### 关于数据元素 { #about_data_element }

数据元素是DHIS2的基础。数据元素定义什么
实际记录在系统中，例如免疫接种次数或
疟疾病例数。

诸如“确诊疟疾病例数”之类的数据元素通常
分解成较小的组成部分，例如确定
特定年龄段已确诊的疟疾病例数。

In the **Maintenance** app, you manage the following data elements objects:

<table>
<caption>Data element objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Data element</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Data element group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Data element group set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_data_element }

1.  创建所有类别选项。

2.  创建由您创建的多个类别选项组成的类别。

3.  创建由一个或多个类别组成的类别组合。

4.  创建数据元素并将其分配给类别组合。

### 创建或编辑数据元素 { #create_data_element }

![](resources/images/maintainence/create_data_element.png)

1.  Open the **Maintenance** app and click **Data elements** \> **Data element**.

2.  点击添加按钮。

3.  In the **Name** field, define the precise name of the data element.

    每个数据元素必须具有唯一的名称。

4.  In the **Short name** field, define a short name for the data element.

    通常情况下，简称是数据元素全名的缩写。在篇幅有限的情况下，该属性通常用于在报告中显示数据元素的名称。

5.  （可选）在 **Code** 字段中，分配一个代码。 

    在许多国家/地区，为数据元素分配了代码。

6.  (Optional) In the **Color** field, assign a color which will be used for this data element in the data capture apps.

7.  (Optional) In the **Icon** field, assign an icon which will be used for this data element in the data capture apps.

8.  In the **Description** field, type a description of the data element. Be as precise as possible and include complete information about how the data element is measured and what its purpose is.

9.  (Optional) In the **Field mask** field, you may type a template that's used to provide hints for correct formatting of the data element.

    > **NOTE**
    >
    > So far this is only implemented in the DHIS2 Android Capture app; not in the Capture and Tracker Capture web apps.

    以下是可在遮罩中使用的特殊字符。特殊字符与给定类型的一个字符完全匹配。

    |性格匹配|
    | --------- | -------------------------- |
    | \\ d |数字|
    | \\ x |小写字母|
    | \\ X |大写字母|
    | \\ w |任何字母数字字符|

    例如，该模式可用于在数据元素的输入字段中根据需要显示连字符。例如，"\d\d\d\d\d\d "将在每三个数字中显示一个连字符。

10. In the **Form name** field, type an alternative name of the data element. This name can be used in either section or automatic data entry forms. The form name is applied automatically.

11. In the **Domain type** field, select whether the data element is an aggregate or tracker type of data element.

12. In the **Value type** field, select the type of data that the data element will record.

    <table>
    <caption>Value types</caption>
    <colgroup>
    <col style="width: 53%" />
    <col style="width: 46%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Value type</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Age</p></td>
    <td><p>-</p></td>
    </tr>
    <tr class="even">
    <td><p>Coordinate</p></td>
    <td><p>A point coordinate specified as longitude and latitude in decimal degrees. All coordinate should be specified in the format &quot;-19.23 , 56.42&quot; with a comma separating the longitude and latitude.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Date</p></td>
    <td><p>Dates rendered as calendar widget in data entry.</p></td>
    </tr>
    <tr class="even">
    <td><p>Date &amp; time</p></td>
    <td><p>Is a combination of the <strong>DATE</strong> and <strong>TIME</strong> data elements.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Email</p></td>
    <td><p>Email.</p></td>
    </tr>
    <tr class="even">
    <td><p>File</p></td>
    <td><p>A file resource where you can store external files, for example documents and photos.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Image</p></td>
    <td><p>A file resource where you can store photos.</p>
    <p>Unlike the <strong>FILE</strong> data element, the <strong>IMAGE</strong> data element can display the uploaded image directly in forms.</p></td>
    </tr>
    <tr class="even">
    <td><p>Integer</p></td>
    <td><p>Any whole number (positive and negative), including zero.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Letter</p></td>
    <td><p>A single letter.</p></td>
    </tr>
    <tr class="even">
    <td><p>Long text</p></td>
    <td><p>Textual value. Renders as text area with no length constraint in forms.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Negative integer</p></td>
    <td><p>Any whole number less than (but not including) zero.</p></td>
    </tr>
    <tr class="even">
    <td><p>Number</p></td>
    <td><p>Any real numeric value with a single decimal point. Thousands separators and scientific notation is not supported.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Percentage</p></td>
    <td><p>Whole numbers inclusive between 0 and 100.</p></td>
    </tr>
    <tr class="even">
    <td><p>Phone number</p></td>
    <td><p>Phone number.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Positive integer</p></td>
    <td><p>Any whole number greater than (but not including) zero.</p></td>
    </tr>
    <tr class="even">
    <td><p>Positive or zero integer</p></td>
    <td><p>Any positive whole number, including zero.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Organisation unit</p></td>
    <td><p>Organisation units rendered as a hierarchy tree widget.</p>
    <p>If the user has assigned &quot;search organisation units&quot;, these will be displayed instead of the assigned organisation units.</p></td>
    </tr>
    <tr class="even">
    <td><p>Unit interval</p></td>
    <td><p>Any real number greater than or equal to 0 and less than or equal to 1.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Text</p></td>
    <td><p>Textual value. The maximum number of allowed characters per value is 50,000.</p></td>
    </tr>
    <tr class="even">
    <td><p>Time</p></td>
    <td><p>Time is stored in HH:mm format.</p>
    <p>HH is a number between 0 and 23</p>
    <p>mm is a number between 00 and 59</p></td>
    </tr>
    <tr class="odd">
    <td><p>Tracker associate</p></td>
    <td><p>Tracked entity instance. Rendered as dialog with a list of tracked entity instances and a search field.</p></td>
    </tr>
    <tr class="even">
    <td><p>Username</p></td>
    <td><p>DHIS2 user. Rendered as a dialog with a list of users and a search field. The user will need the "View User" authority to be able to utilise this data type</p></td>
    </tr>
    <tr class="odd">
    <td><p>Yes/No</p></td>
    <td><p>Boolean values, renders as drop-down lists in data entry.</p></td>
    </tr>
    <tr class="even">
    <td><p>Yes only</p></td>
    <td><p>True values, renders as check-boxes in data entry.</p></td>
    </tr>
    </tbody>
    </table>

13. In the **Aggregation type** field, select the default aggregation operation that will be used on the data element.

    Most data elements should have the **Sum** operator. This includes all data elements which should be added together. Other data elements, such as staffing levels, should be set to use the **Average** operator, when values along the time dimension should not be added together, but rather averaged.

    <table>
    <caption>Aggregation operators</caption>
    <colgroup>
    <col style="width: 50%" />
    <col style="width: 50%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th><p>Aggregation operator</p></th>
    <th><p>Description</p></th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><p>Average</p></td>
    <td><p>Average the values in both the period as and the organisation unit dimensions.</p></td>
    </tr>
    <tr class="even">
    <td><p>Average (sum in organisation unit hierarchy)</p></td>
    <td><p>Average of data values in the period dimension, sum in the organisation unit dimensions.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Count</p></td>
    <td><p>Count of data values.</p></td>
    </tr>
    <tr class="even">
    <td><p>Min</p></td>
    <td><p>Minimum of data values.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Max</p></td>
    <td><p>Maximum of data values.</p></td>
    </tr>
    <tr class="even">
    <td><p>None</p></td>
    <td><p>No aggregation is performed in any dimension.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Sum</p></td>
    <td><p>Sum of data values in the period and organisation unit dimension.</p></td>
    </tr>
    <tr class="even">
    <td><p>Standard deviation</p></td>
    <td><p>Standard deviation (population-based) of data values.</p></td>
    </tr>
    <tr class="odd">
    <td><p>Variance</p></td>
    <td><p>Variance (population-based) of data values.</p></td>
    </tr>
    </tbody>
    </table>

14. If you want to save zeros for a particular reason, select **Store zero data values**. By default, DHIS2 does not store zeros entered in the data entry module.

15. In the **URL** field, enter a link to an in-depth description of the data element.

    例如，指向元数据存储库或登记处的链接，其中包含有关数据元素定义和测量的详细技术信息。

16. In the **Category combination** field, define which category combination the data element should have. This is also known as the "disaggregation".

17. 选择**选项集**。

    选项集是预定义的选项列表，可用于数据输入。

18. Select an **Option set for comments**.

    注释选项集是预定义的选项列表，可用于在数据输入中为数据值指定标准化注释。

19. 分配一个或多个**传奇**。

    Legends are used in for example the **Maps** app to display certain data elements with certain icons.

20. Set the **Aggregation levels** to allow the data element to be aggregated at one or more levels:

    1.  在左窗格中，选择要分配给数据元素的级别。

    2.  单击右箭头以指定聚合级别。

    默认情况下，汇总将从分配的最低组织单位开始。例如，如果您选择 "酋长领地"，这意味着 "酋长领地"、"地区 "和 "国家 "汇总将使用 "酋长领地"（可用的最高汇总级别）作为数据源，而 PHU 数据将不包括在内。PHU 数据仍可用于 PHU 级别，但不包括在以上级别的汇总中。

    如果同时选择 "地区 "和 "酋长领地"，则表示 "地区 "和 "国家 "级别的总体数据将使用地区数据作为来源，"酋长领地 "将使用酋长领地数据，而 "公共卫生单位 "将使用公共卫生单位数据。

21. 如果适用，请输入自定义属性值，例如 **分类** 或 **收集方法**。

    > **Note**
    >
    > You create custom attributes in the **Maintenance** app: **Other** > \> **Attributes**.

22. 如果适用，请选择强制性数据元素组，例如 **主要数据元素组** 或 **基于跟踪器的数据**。

    > **Note**
    >
    > You'll only see data element group sets in this form if you've created them and set them to **Compulsory**.
    >
    > You create data element group sets in the **Maintenance** app: **Data element** \> **Date element group set**.

23. 点击**保存**。 

### 创建或编辑数据元素组 { #create_data_element_group }

数据元素组可让您将相关数据元素分类为
共同的主题。例如，两个数据元素“麻疹免疫”和
“ BCG免疫”可以分组为一个数据元素组
“儿童免疫”。

要创建数据元素组：

1.  Open the **Maintenance** app and click **Data elements** \> **Data element group**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **简称**

    3.  **码**

4.  选择数据元素并分配它们。

5.  点击**保存**。 

### 创建或编辑数据元素组集 { #create_data_element_group_set }

数据元素组集可让您对多个数据元素进行分类
组成一组。系统在以下过程中使用数据元素组集
分析和报告，以将相似的数据元素组合并为一个
共同的主题。一个数据元素组可以是多个数据元素的一部分
组集。

1.  Open the **Maintenance** app and click **Data elements** \> **Data element group set**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **码**

    3.  **描述**

    4.  **必修**

    5.  **数据尺寸**

4.  选择数据元素组并分配它们。

    可用的数据元素组显示在左侧面板中。右侧面板显示当前数据元素组集中的数据元素组。

5.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注**
>
> 默认设置是每个人（**公共访问权限**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  (可选）添加用户或用户组：搜索用户或用户组并选择。用户或用户组将被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **无访问权限**（仅适用于**公共访问权限**）：公众无法访问对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理数据集和数据输入表单 { #manage_data_set }

### 关于数据集和数据输入表格 { #about_dataset_dataform }

All data entry in DHIS2 is organised in data sets. A data set is a collection of data elements grouped together for data entry and data export between instances of DHIS2. To use a data set to collect data for a specific organisation unit, you must assign the organisation unit to the data set. Once you have assigned the data set to an organisation unit, that data set is available in the **Data entry** app. Only the organisation units that you have assigned the data set to can use the data set for data entry.

A category combination can link to both data elements and data sets. If you use a category combination for a data set, the category combinations is applicable for the whole form. This means that you can use categories to capture information which is common to an entire form, for example the name of the a project or grant. When a data set is linked to a category combination, those categories will be displayed as drop-down boxes in the **Data entry** app. Data captured in the form will then be linked to the selected category options from those drop-down boxes. For information about how to create categories and category combinations, see section "Manage data elements and categories". Make sure that you set the type of categories and category combinations to "Attribute".

类别有用的一种情况是您需要捕获一个类别
实施伙伴组织和项目的数据输入表。
在这种情况下：

1.  为所有伙伴机构和项目创建类别选项和类别，并将其链接到新的类别组合中。

2.  将类别组合分配给需要获取此信息的数据集（表单）。

    在数据录入模块中打开该数据集时，伙伴组织和项目类别将自动显示为下拉框，您可以在继续进行数据录入之前选择特定的实施伙伴组织和项目。

You create and edit data sets in the **Maintenance** app. Here you define, for example, which data elements you want to include in the data set and the data collection frequency.

You enter data in the **Data entry** app. The **Data entry** app uses data entry forms to display the data sets. There are three types of data entry forms:

<table>
<caption>Data entry form types</caption>
<colgroup>
<col style="width: 37%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="header">
<th>Data entry form type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Default form</p></td>
<td><p>Once you have assigned a data set to an organisation unit, a default form is created automatically. The default form is then available in the <strong>Data entry</strong> app for the organisation units you have assigned it to.</p>
<p>A default form consist of a list of the data elements belonging to the data set together with a column for inputting the values. If your data set contains data elements with a non-default category combination, for example age groups or gender, additional columns are automatically created in the default form based on the different categories.</p>
<p>If you use more than one category combination you get multiple columns in the default form with different column headings for the options.</p></td>
</tr>
<tr class="even">
<td><p>Section form</p></td>
<td><p>If the default form doesn't meet your needs, you can modify it to create a section form. Section forms give you more flexibility when it comes to using tabular forms.</p>
<p>In a section form you can, for example, create multiple tables with subheadings and disable (grey out) cells in a table.</p>
<p>When you have added a section form to a data set, the section form is available in the <strong>Data entry</strong> app.</p></td>
</tr>
<tr class="odd">
<td><p>Custom form</p></td>
<td><p>If the form you want to design is too complicated for default or section forms, you can create a custom form. A custom form takes more time to create than a section form, but you have full control over the design.</p>
<p>You can, for example, mimic an existing paper aggregation form with a custom form. This makes data entry easier, and should reduce the number incorrectly entered data elements.</p>
<p>When you have added a custom form to a data set, the custom form is available in the <strong>Data entry</strong> app.</p></td>
</tr>
</tbody>
</table>

> **注**
>
> 如果数据集既有部分表单又有自定义表单，系统会在输入数据时显示自定义表单。输入数据的用户无法选择使用哪种表单。在基于网络的数据录入中，显示首选项的顺序是：
>
> 1.  自定义表单（如果存在）
>
> 2.  科室表单（如果存在）
>
> 默认表单
>
> 移动设备不支持自定义表单。在基于移动设备的数据录入中，显示首选项的顺序是
>
> 1.部分表单（如果存在的话）
>
> 2.  默认表格

In the **Maintenance** app, you manage the following data set objects:

<table>
<caption>Data set objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Data set</p></td>
<td><p>Create, assign to organisation units, edit, share, delete, show details and translate</p>
<p>Edit compulsory data elements</p>
<p>Add and remove multiple data sets to organisation units at once</p></td>
</tr>
<tr class="even">
<td><p>Section form</p></td>
<td><p>Create, edit and manage grey fields</p></td>
</tr>
<tr class="odd">
<td><p>Section</p></td>
<td><p>Change display order, delete and translate</p></td>
</tr>
<tr class="even">
<td><p>Custom form</p></td>
<td><p>Create, edit and script</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_data_set }

您需要具有数据元素和类别才能创建数据集和
数据输入表格。

1.  创建一个数据集。

2.  将数据集分配给组织单位。

    默认形式是自动创建的。

3.  创建节形式或自定义形式。

    Now you can register data in the **Data entry** app.

### 创建或编辑数据集 { #create_data_set }

![](resources/images/datasets/data_set_create.png)

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  点击添加按钮。

3.  In the **Name** field, type the precise name of the data set.

4.  In the **Short name** field, define a short name for the data set.

    通常情况下，简称是数据集全名的缩写。在空间有限的情况下，该属性通常用于显示数据集的名称。

5.  （可选）在 **Code** 字段中，分配一个代码。 

6.  In the **Description** field, type a description of the data set.

7.  Enter the number of **Expiry days**.

    The number of expiry days controls for how long it should be possible to enter data in the **Data entry** app for this data set. Expiry days refer to the number of days after the end date of the selected data entry period where the data entry form should be open for entry. After the number of days has expired, the data set will be locked for further entry.

    You can set manual exceptions to this using the lock exception functionality in the **Data Administration** app.

    > **Note**
    >
    > To allow data entry into all possible historical time periods, set the number of expiry days to zero.

8.  If you want it to be possible to enter data for future periods, type the number of periods in the **Open future periods for data entry** field.

    该值是可用于输入数据的未来时段数。

    对于月度数据集，如果数值为 2，则可以提前 2 个月输入数据。例如，这对人口、目标和规划数据非常有用。

9.  In the **Days after period to qualify for timely submission** field, type the number of days in which data can be entered to be considered reported on time.

    要核实及时提交报告的数量，请访问 **Reports** （报告）> **Reporting rate summary**。

10. Select a **Period type**.

    周期类型定义了特定数据集的报告频率。例如，频率可以是每天、每季度或每年。

11. Select a **Category combination** to assign it to the data set.

    > **Tip**
    >
    > Click **Add new** to create category combinations that you're missing. In the form that opens, create the category combinations you need. When you're done, click **Refresh values**.

12. If you selected a category combination other than **None**, you may enter zero or a positive number for **Open periods after category option end date**. This lets you enter data in this data set for a category option up to the specified number of periods after that category option's end date.

13. In the **Complete notification recipients** list, select a user group that should receive a message when the data set is marked as complete in the **Data Entry** app.

    该消息是通过DHIS2消息传递系统传递的。

14. If you want the user who entered the data to receive a message when the data set is marked as complete in the **Data entry** app, select **Send notification to completing user**.

    该消息是通过DHIS2消息传递系统传递的。

15. If applicable, select, a **Data approval workflow**.

16. If you want it to be possible to use the data set within the Java mobile DHIS2 application, select **Enable for Java mobile client**.

17. If you want it to be mandatory to fill all values for a data element in data entry if one or more values have been filled, select **All fields for data elements required**.

    这意味着，如果您在一个输入字段（即一个类别选项组合）中为一个数据元素输入了一个数据值，那么您就必须为属于该数据元素的所有字段（即所有类别选项组合）输入数据。

18. If you want it to be possible to mark a data entry form as complete only if the validation of that form is successful, select **Complete allowed only if validation passes**.

    如果选择此选项，则在验证失败时无法将表单标记为 "完成"。

19. If you want it to be mandatory that any missing values require a comment to justify their absence, select **Missing values requires comment on complete**.

20. （可选）分配一个或多个**传奇**。

21. If applicable, select **Skip offline**.

    This option controls whether this data entry form should be downloaded and saved in the user's web browser. Normally you shouldn't select **Skip offline**. This is the default setting. If you have big forms which are rarely used you can consider selecting this option to speed up initial loading in the data entry module.

22. If applicable, select **Data element decoration**

    If you select this option, descriptions of data elements render in call-outs in downloaded data sets in offline mode in the **Data entry** app.

23. If applicable, select **Render sections as tabs**.

    该选项仅适用于分节表单。通过该选项，可以在数据集上方以水平选项卡的形式显示每个部分。这对较长的数据集非常有用，因为它允许快速选择适当的部分，而无需浏览整个表单。

24. If applicable, select **Render vertically**.

    此选项仅适用于部分表格。

25. 选择数据元素并分配它们。

    点击所选数据元素列表上方的齿轮图标，可覆盖每个所选数据集的类别组合。这样，您就可以使用当前数据集中的特定类别组合（分解），而不是直接与数据元素本身相关的类别组合。

26. 选择指标并分配它们。

27. 在组织单位树中，选择要将数据集分配给的组织单位。

    > **Tip**
    >
    > -   Click **Organisation unit level** to select all organisation units that belong to a certain organisation level.
    >
    > -   Click **Organisation unit group** to select all organisation units that belong to a certain organisation unit group.

28. 点击**保存**。 

You can now use the data set in the **Data Entry** app for the organisation units that you have assigned to and for periods according to the selected frequency (period type).

### 创建或编辑数据集通知 { #create_data_set_notification }

1.  Open the **Maintenance** app and click **Data set** \> **Data set notification**.

2.  点击添加按钮。

#### 发送什么？ { #what-to-send }

![](resources/images/datasets/dataset_notification_create.png)

1.  In the **Name** field, type the precise name of the data set notification.

2.  （可选）在 **Code** 字段中，分配一个代码。 

3.  输入**数据集**。

    这些数据集将与此通知相关联。如果其中任何一个数据集在一定时期和组织单位内完成，系统就会生成通知。

    > **Note**
    >
    > Nothing will happen if no data set is selected

4.  In **Message template** section there are two parameters.

    -   **主题模板**通知中发送的通知的主题。它可以从右侧的变量列表中取值。

    -   **Message template** actual message sent in notification. It can have values from the list of variables available on the right side.

    > **Note**
    >
    > Subject is only relevant in case of Email and internal DHIS2 messages. It is ignored in case of SMS.

#### 何时发送？ { #when-to-send }

![](resources/images/datasets/when_to_send.png)

1.  **数据集通知触发器**字段决定何时发送通知。

    -   **Data Set Completion** will trigger notification as soon as data set is completed.

    -   ** 计划天数** 将根据与计划日期相关的天数安排通知。计划日期由与数据集相关的周期决定。

        -   作为**发送通知**提供两种不同类型的通知

            -   **汇总摘要**以摘要心情发送通知

            -   **单一通知**以单一情绪发送通知

    > **Note**
    >
    > **Send notification as** option is only available in case of scheduled notification. This option is set to default which is **Single notification** in case of completion notification

#### 寄给谁？ { #who-to-send }

![](resources/images/datasets/who_to_send.png)

1.  **通知收件人**字段确定通知的收件人。

    -   **组织单位联系人**将向分配给收集数据的组织单位的联系人发送通知。

    -   **用户组**将向所选用户组的所有成员发送通知。

    > **Note**
    >
    > An internal DHIS2 message will be sent in case if recipient is UserGroup. Moreover user will also receive SMS/EMAIL if phone number and email address exist for that user and SMS/EMAIL notifications are enabled in SystemSettings

### 覆盖数据集中的数据元素的类别组合 { #override_dataelement_catcombo_in_dataset }

您可以覆盖要用于数据元素的类别组合
在数据集范围内。这意味着数据元素可以使用
不同数据集内的不同类别组合。这是
当您想重复使用数据元素时很有用，因为您不必
复制数据元素以允许多个类别组合。

如果组织单位层次结构中的不同区域使用
不同的分类，或者如果分类随时间变化，
您可以通过创建不同的数据集来表示
适当的类别组合。

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要修改的数据集。

3.  点击选项菜单，然后选择**编辑**。

4.  转到数据元素部分，然后单击扳手图标。

5.  选择新的类别组合，然后单击**关闭**。

6.  点击**保存**。 

### 编辑数据集中的强制数据元素 { #edit_compulsory_dataelement_in_dataset }

您可以添加或删除将被标记为强制性的数据元素
在数据输入期间。

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要编辑的数据集。

3.  Click the options menu and select **Edit compulsory data elements**.

4.  分配必填数据元素。

5.  点击**保存**。 

### 下载PDF格式的默认数据表格 { #download_defaultform_pdf }

您可以从PDF格式下载默认数据以获取离线数据
条目。

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要下载的对象。

3.  Click the options menu and select **Get PDF for data entry**.

### 管理板块表格 { #manage_section_form }

#### 创建部分表格 { #create-a-section-form }

截面表单按数据元素类别自动分隔
组合，从而为每个表单生成电子表格，例如数据输入表单
部分。

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中找到要创建分节表单的数据集。

3.  Click the options menu and select **Manage sections**.

4.  点击添加按钮。

5.  (Optional) In the **Name** field, type the name of the section.

6.  (Optional) In the **Description** field, type a description of the section.

7.  (Optional) To display totals for rows in the section form during data entry, select **Show row totals**.

8.  (Optional) To display totals for columns in the section form during data entry, select **Show column totals**.

9.  将数据元素分配给该部分：

    1.  (Optional) Select a **Category combination filter**.

        > **Note**
        >
        > You can only use one category combination per section.

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Option</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p><strong>None</strong></p></td>
        <td><p>Displays all data elements that don't have a category combination.</p></td>
        </tr>
        <tr class="even">
        <td><p><strong>&lt;No filter&gt;</strong></p></td>
        <td><p>Displays all data elements.</p></td>
        </tr>
        </tbody>
        </table>

    2.  选择数据元素并分配它们。

10. (可选）使用指定数据元素字段左侧的上下箭头对该部分内的数据元素进行排序。

11. 点击**保存**。 

12. 重复添加章节的步骤，在章节表格中添加您想要的每个章节。

    In the **Data Entry** app you can now use the section form. The section form appears automatically when sections are available for the selected data set. Data sets which have section forms will automatically display the section form.

注意如何将每个数据元素类别都分为一个单独的
部分，并且数据输入表已由
系统。将节形式与数据元素类别结合使用
可以大大减少创建所需的时间
数据集的数据输入表单。

![](resources/images/dhis2UserManual/section_form.png)

#### 编辑部分表格 { #edit-a-section-form }

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到您要为其编辑部分表单的数据集。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要编辑的部分。

5.  点击选项菜单，然后选择**编辑**。

6.  Edit the section and click **Save**.

7.  对要编辑的每个节重复编辑节的步骤。

#### 管理分区表单中的灰色字段 { #manage-grey-fields-in-a-section-form }

您可以禁用数据输入的数据元素和类别选项。那
表示在数据处理期间将无法在这些字段中输入数据
条目。

![](resources/images/datasets/section_form_grey_fields.png)

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到您要为其编辑部分表单的数据集。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要编辑的部分。

5.  Click the options menu and select **Manage grey fields**.

6.  选择要禁用的字段。

    > **Note**
    >
    > If you've sections that contain data elements assigned to multiple category combinations, switch between the category combinations to view all fields.

7.  点击**保存**。 

#### 在部分表格中更改部分显示顺序 { #change-section-display-order-in-a-section-form }

您可以控制以节形式显示节的顺序。

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到您要为其编辑部分表单的数据集。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要移动的部分。

5.  点击选项菜单，然后选择**上移**或**下移**。

    如果要移动的部分是列表中的第一个或最后一个部分，则只能看到其中一个移动选项。

#### 删除部分表格中的部分 { #delete-a-section-in-a-section-form }

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到您要为其编辑部分表单的数据集。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要删除的部分。

5.  Click the options menu and select **Delete**.

#### 以节形式翻译节 { #translate-a-section-in-a-section-form }

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到您要为其编辑部分表单的数据集。

3.  Click the options menu and select **Translate**.

4.  选择一个语言环境。

5.  输入所需的信息。

6.  点击**关闭**。

### 管理自定义表单 { #manage_customform }

#### 创建一个自定义表格 { #create-a-custom-form }

您可以在内置的WYSIWYG HTML编辑器中设计自定义表单。如果选择
**来源**，您可以直接将HTML代码粘贴到编辑区域中。为一个
有关如何使用编辑器的完整指南，请参阅
 <http://docs.ckeditor.com/>。

![](resources/images/datasets/data_set_custom_form_create.png)

创建自定义表单：

1.  Open the **Maintenance** app and click **Data set**.

2.  在列表中，找到要添加自定义表单的数据集。

3.  Click the options menu and select **Design data entry form**.

4.  在编辑区域中，创建自定义表单。

    -   双击左侧列表中的对象，将其插入表格。

    -   If you already have the HTML code for your form, click **Source** and paste the code.

5.  Select a **Form display style**.

6.  点击**保存**。 

#### 自定义形式的脚本 { #scripting-in-custom-forms }

在自定义数据输入表单中，您可以使用JavaScript创建动态
行为和自定义。例如，您可以隐藏表单部分
根据数据元素的特定用户输入，或显示特定
表单加载时的信息。

##### 大事记 { #events }

DHIS2数据输入模块提供了一系列事件，您可以
注册并用于在特定时间执行操作。这些事件是
注册在document元素上。 jQuery事件对象和数据
集标识符始终是提供给
回调函数。下表概述了事件
以及何时触发它们。

 <table>
 <caption>数据输入事件</caption>
 <colgroup>
 <col style="width: 32%" />
 <col style="width: 39%" />
 <col style="width: 27%" />
 </colgroup>
 <thead>
 <tr class="header">
 <th>键</th>
 <th>说明</th>
 <th>参数</th>
 </tr>
 </thead>
 <tbody>
 <tr class="odd">
 <td> <p> dhis2.de.event.formLoaded </p> </td>
 <td> <p>在呈现数据输入表单之后但在输入字段中设置数据值之前触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="even">
 <td> <p> dhis2.de.event.dataValuesLoaded </p> </td>
 <td> <p>在输入字段中设置数据值后触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> dhis2.de.event.formReady </p> </td>
 <td> <p>当数据输入表单完全呈现并加载了所有元素时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="even">
 <td> <p> dhis2.de.event.dataValueSaved </p> </td>
 <td> <p>成功保存数据值时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID |数据值对象</p> </td>
 </tr>
 <tr class="odd">
 <td> <p> dhis2.de.event.completed </p> </td>
 <td> <p>当数据集成功标记为完成时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID |完成注册对象</p> </td>
 </tr>
 <tr class="even">
 <td> <p> dhis2.de.event.uncompleted </p> </td>
 <td> <p>将数据集成功标记为不完整时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> dhis2.de.event.validation成功</p> </td>
 <td> <p>在完成验证并且没有违规时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="even">
 <td> <p> dhis2.de.event.validationError </p> </td>
 <td> <p>完成验证并存在一个或多个违规时触发。 </p> </td>
 事件| <td> <p>事件|数据集ID </p> </td>
 </tr>
 <tr class="odd">
 <td> <p> dhis2.ou.event.orgUnitSelected </p> </td>
 <td> <p>在组织单位网页树中选择一个或多个组织单位时触发。 </p> </td>
 事件| <td> <p>事件|组织单位编号|组织单位名称|子单位部门ID </p> </td>
 </tr>
 </tbody>
 </table>

要注册活动：

     <script type="text/javascript">

    dhis2.util.on（'dhis2.de.event.formReady'，function（event，ds）{
      console.log（'ID为'+ ds +'的表单已加载！'）;
    }）；

    dhis2.util.on（'dhis2.de.event.dataValueSaved'，function（event，ds，dv）{
      console.log（'数据值：'+ dv.value +'与数据元素：'+ dv.de一起保存）;
    }）；

    dhis2.util.on（'dhis2.de.event.completed'，function（event，ds，cr）{
      console.log（'组织单位的表格已完成：'+ cr.ou）;
    }）；

     </script>

> **注**
>
> 注意只使用 "namespaced "事件，如上面例子中的事件，而不要使用 "click "等一般事件，因为 dhis2.util.on 方法会首先注销事件。

如果您的功能仅适用于某些数据集，则可以使用
提供的数据集标识符和快捷方式，可避免不必要的功能
像这样的数据集
    这个：

    dhis2.de.on（'dhis2.de.event.validationSuccess'，function（event，ds）{
      if（$ .inArray（ds，['utXOiGbEj14'，'Re7qzHEThSC']）== -1）{
        返回false；
      }
      console.log（'ID为：'+ ds +'的表单已成功验证！'）;
    }）；

数据输入表单中输入字段的标识符位于
格式如下所述。此格式可用于选择输入
脚本中的字段并对其执行操作：

     <dataelementid>-<optioncomboid> -val

由于为所有事件提供了数据集标识符，因此可行
另一种方法是利用“文件” Web API资源并保留您的
回调函数在一个文件中，您可以在其中让JavaScript代码
根据当前加载的数据集采取措施。

##### 职能 { #functions }

DHIS2数据输入模块包含JavaScript API函数，该函数可以
可从自定义数据输入表单访问。

** dhis2.de.api.getSelections **：此函数返回一个JavaScript
包含所有尺寸的属性以及相应属性的对象
所选选项的标识符的值。它包含
“ ds”（数据集），“ pe”（句号），“ ou”（组织单位）的属性
和所有数据集类别的标识符。

一个示例响应如下所示：

    {
     + ds：“ lyLU2wR22tC”，
     + pe：“ 201605”，
     + ou：“ g8upMTyEZGZ”，
     + LFsZ8v5v7rq：“ CW81uF03hvV”，
     + yY2bQYqNt0o：“ yMj2MnmNI8L”
     +}

此功能的示例JavaScript用法：

    var sel = dhis2.de.api.getSelections（）;
     + var orgUnit = sel [“ ou”];
     + var partner = sel [“ LFsZ8v5v7rq”];

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注**
>
> 默认设置是每个人（**公共访问权限**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  (可选）添加用户或用户组：搜索用户或用户组并选择。用户或用户组将被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **无访问权限**（仅适用于**公共访问权限**）：公众无法访问对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理指标 { #manage_indicator }

### 关于指标 { #about_indicator }

指标是一个可以包含多个数据元素的公式，
常数，组织单位组数和数学运算符。
指标通常由分子和分母组成。你用
用于计算覆盖率，发生率和其他值的指标
是已输入到数据元素值的结果
系统。计算得出的总数没有分母。

> **注意**
>
>您永远不会直接在DHIS2中输入指标值，而是进行计算。

指标公式可以包含数学运算符，例如
加号和减号；功能（见下文）；和以下元素：

<table>
<caption>Indicator elements</caption>
<colgroup>
<col style="width: 36%" />
<col style="width: 30%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>Indicator element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Constant</p></td>
<td><p>Component</p></td>
<td><p>Constants are numerical values which remain the same for all indicator calculations. This is useful in order to have a single place to change values that might change over time.</p>
<p>Constants are applied AFTER data element values have been aggregated.</p></td>
</tr>
<tr class="even">
<td><p>Data elements</p></td>
<td><p>Component</p></td>
<td><p>Data elements are substituted by the data value captured for the data element.</p></td>
</tr>
<tr class="odd">
<td><p>Days</p></td>
<td><p>Operator</p></td>
<td><p>&quot;Days&quot; is special operator that always provides the number of days for a given indicator calculation.</p>
<p>For example: if you want to calculate the &quot;Percentage of time vaccine refrigerator was non-functional&quot;, you could define the numerator as:</p>
<p>(&quot;Days-&quot;Number of days vaccine refrigerator was available&quot;&quot;)/&quot;Days&quot;</p>
<p>If the fridge was available 25 days in June, the indicator would be calculated as:</p>
<p>(30-25/25)*100 = 17 %</p>
<p>If you want to calculate the total for Quarter 1, the number of days (&quot;Days&quot;) would be:</p>
<p>31+28+31 = 90</p>
<p>The &quot;Days&quot; parameter will always be the number of days in the period of interest.</p></td>
</tr>
<tr class="even">
<td><p>Organisation unit counts</p></td>
<td><p>Component</p></td>
<td><p>You can use organisation unit groups in formulas. They will be replaced by the number of organisation units in the group. During aggregation, the organisation units in the group will be intersected with the part of the organisation unit hierarchy being requested.</p>
<p>This lets you use the number of public facilities in a specific district in indicators. This is useful for example when you create facility infrastructure surveys and reports.</p></td>
</tr>
<tr class="odd">
<td><p>Programs</p></td>
<td><p>Component</p></td>
<td><p>Click <strong>Programs</strong> and select a program to view all data elements, attributes and indicators related to a specific program.</p>
<p>The program components you include in your formula will have a program tag assigned to them.</p></td>
</tr>
</tbody>
</table>

您可以在指标公式中使用以下功能：

<table>
<caption>指示器功能</caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><p>指标函数</p></th>
<th><p>参数</p></th>
<th><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>如果</p></td>
<td><p>(布尔表达式，true-expr，false-expr）</p></td>
<td><p>评估布尔表达式，如果为 true，返回表达式的 true 值，如果为 false，返回表达式的 false 值。参数必须遵循任何指示符表达式的规则。</p></td>
</tr>
<tr class="even">
<td><p>isNull</p></td>
<td><p>元素</p></td>
<td><p>如果元素值缺失（空），则返回 true，否则返回 false。</p></td>
</tr>
<tr class="odd">
<td><p>isNotNull</p></td>
<td><p>元素</p></td>
<td><p>如果元素值未丢失（非空），则返回 true，否则返回 false。</p></td>
</tr>
<tr class="even">
<td><p>firstNonNull</p></td>
<td><p>(元素 [, 元素 ...])</p></td>
<td><p>返回第一个未丢失（非空）元素的值。可以提供任意数量的参数。任何参数也可以是数字或字符串字面形式，如果前面的对象都有缺失值，则将返回缺失值。</p></td>
</tr>
<tr class="odd">
<td><p>最大</p></td>
<td><p>(表达式 [, 表达式 ...])</p></td>
<td><p>返回所给表达式的最大（最高）值。参数个数不限。</p></td>
</tr>
<tr class="even">
<td><p>最小值</p></td>
<td><p>(表达式 [, 表达式 ...])</p></td>
<td><p>返回给定表达式中最小（最低）的值。可提供任意数量的参数。</p></td>
</tr>
<tr class="odd">
<td><p>log</p></td>
<td><p>(表达式[, 基数 ])</p></td>
<td><p>返回数字表达式的自然对数（以 e 为底）。如果第二个参数是整数，则返回以整数为底的对数。</p></td>
</tr>
<tr class="even">
<td><p>log10</p></td>
<td><p>(表达式）</p></td>
<td><p>返回数字表达式的公共对数（以 10 为底）。</p></td>
</tr>
<tr class="odd">
<td><p>.periodOffset</p></td>
<td><p>(整数常量）</p></td>
<td><p>放在数据值或表达式之后，返回相对于报告周期的周期偏移值。它可以嵌套。请参阅下面的示例。</p></td>
</tr>
</tbody>
</table>

指标表达式中的.periodOffset（）函数示例：

| 指标表达 | 手段 |
| --- | --- |
| ＃ | 前一时期的数据元素FH8ab5Rog83 |
| ＃ | 之后的数据元素FH8ab5Rog83 |
| ＃ | 之后的数据元素FH8ab5Rog83 |
| #{FH8ab5Rog83}- 2 * D{IpHINAT79UW.uf3svrmp8Oj}.periodOffset(-1) | 报告期间的数据元素FH8ab5Rog83减去前一时期的程序数据元素IpHINAT79UW.uf3svrmp8Oj的两倍 |
| （＃{FH8ab5Rog83}-<br />＃{QOlfIKgNJ3D2}）.periodOffset（-2） | 前2个周期的数据元素FH8ab5Rog83减去前2个周期的数据元素QOlfIKgNJ3D2 |
| ＃ | 前2个周期的数据元素FH8ab5Rog83加前1个周期的值 |
| （＃{FH8ab5Rog83} .periodOffset（-1）+ <br />＃{FH8ab5Rog83}）.periodOffset（-1） | 前2个周期的数据元素FH8ab5Rog83加上前1个周期的值（请注意，函数是嵌套的） |

 <br />

In the **Maintenance** app, you manage the following indicator objects:

<table>
<caption>Indicator objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Indicator</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Indicator type</p></td>
<td><p>Create, edit, clone, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Indicator group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Indicator group set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_indicator }

1.  创建指标类型。

2.  创建指标。

3.  创建指标组。

4.  创建指标组集。

### 创建或编辑指标类型 { #create_indicator_type }

![](resources/images/maintainence/indicator_type_create.png)

指标类型定义了在聚合期间应用的因素。
在数据集市导出或报告期间计算的指标值
表生成过程将显示正确的格式，并且
因此不需要额外的乘法器（例如，
百分比），以使值显示正确的格式。

> **注**
>
> 从 DHIS2 的 2.4 版开始，"计算数据元素 "对象已被弃用。取而代之的是，您可以通过创建系数为 "1 "的指标类型并将 "数值 "选项设为 "是 "来创建计算数据元素。将 "数值 "选项设置为 "是 "的效果是，指标实际上没有分母。因此，您只能定义分子，作为计算数据元素的公式。

1.  Open the **Maintenance** app and click **Indicator** \> **Indicator type**.

2.  点击添加按钮。

3.  In the **Name** field, type the name of the indicator type, for example "Per cent", "Per thousand", "Per ten thousand".

4.  键入**系数**。

    系数是在计算指标过程中将乘以指标公式的数字系数。

5.  点击**保存**。 

### 创建或编辑指标 { #create_indicator }

![](resources/images/maintainence/indicator_create.png)

1.  打开 **Maintenance** 应用程序，然后单击 **Indicator** （> **Indicator** ）。

2.  点击添加按钮。

3.  In the **Name** field, type the full name of the indicator, for example "Incidence of confirmed malaria cases per 1000 population".

4.  In the **Short name** field, type an abbreviated name of the indicator, for example "Inc conf. malaria per 1000 pop".

    简称必须少于或等于 25 个字符（包括空格）。

5.  （可选）在 **Code** 字段中，分配一个代码。 

    在许多国家/地区，指标均分配有代码。

6.  (Optional) In the **Color** field, assign a color to reprersent the indicator.

7.  (Optional) In the **Icon** field, assign an icon to illustrate the meaning of the indicator.

8.  In the **Description** field, type a brief, informative description of the indicator and how it is calculated.

9.  If you want to apply an annualization factor during the calculation of the indicator, select **Annualized**.

    通常，年化指标的分子乘以因子 12，分母是例如年度人口数字。这允许使用年度人口数字计算每月覆盖值。

10. Select the number of **Decimals in data output**.

11. 选择**指标类型**。

    该字段用于确定在计算指标时自动应用的系数。可选项由指标类型决定。例如，"百分比 "指标在导出到数据集市时将自动乘以系数 100，从而显示为百分比。

12. （可选）分配一个或多个**传奇**。

13. In the **URL** field, enter a link, for example a link to an indicator registry, where a full metadata description of the indicator can be made available.

14. (可选）输入用于导出汇总数据的**类别选项组合**。

    使用此设置可将作为原始数据导出的汇总数据映射到另一台服务器。通常情况下，当您想从程序（事件数据）中记录的患者数据创建匿名汇总数据时，就需要进行这种数据交换映射。

15. (可选）输入汇总数据导出的**属性选项组合**。

    使用此设置可将作为原始数据导出的汇总数据映射到另一台服务器。通常情况下，当您想从程序（事件数据）中记录的患者数据创建匿名汇总数据时，就需要进行这种数据交换映射。

16. 如果适用，请输入自定义属性值，例如 **分类** 或 **收集方法**。

    > **Note**
    >
    > You create custom attributes in the **Maintenance** app: **Other** > \> **Attributes**.

17. 点击**编辑分子**。

    1.  键入分子的清晰描述。

    2.  双击右侧字段中的成分，定义分子。然后，元件就会作为公式的一部分出现在左侧字段中。双击左侧字段下方的图标，添加数学运算符。

        您的公式必须在数学上有效。这包括在必要时正确使用括号。

    3.  Click **Done** to save all changes to the numerator.

18. Click **Edit denominator**.

    1.  键入分母的清晰描述。

    2.  通过双击右侧字段中的成分来定义分母。然后，元件就会作为公式的一部分出现在左侧字段中。双击左侧字段下方的图标，添加数学运算符。

        您的公式必须在数学上有效。这包括在必要时正确使用括号。

    3.  Click **Done** to save all changes to the denominator.

19. 如果适用，请选择强制性指标组套，例如**人力资源**。

    > **Note**
    >
    > You'll only see indicator group sets in this form if you've created them and set them to **Compulsory**.
    >
    > You create indicator group sets in the **Maintenance** app: **Indicator** \> **Indicator group set**.

20. 点击**保存**。 

### 创建或编辑指标组 { #create_indicator_group }

![](resources/images/maintainence/indicator_group_create.png)

1.  Open the **Maintenance** app and click **Indicator** \> **Indicator group**.

2.  点击添加按钮。

3.  输入名称。

4.  选择指标并分配它们。

5.  点击**保存**。 

### 创建或编辑指标组集 { #create_indicator_group_set }

![](resources/images/maintainence/indicator_group_set_create.png)

指标组集创建相似指标的组合组。对于
例如，您可能有一组称为“疟疾”的指标，
“利什曼病”。这两个组可以合并为一组
称为“媒介传播疾病”。指标组集用于
数据分析以结合指标的相似主题。

1.  打开 **Maintenance** 应用程序，然后单击 **Indicators** （> **Indicator group**）。

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **描述**

    3.  **必修**

4.  选择指标组并分配它们。

    左侧面板显示可用的指标组。右侧面板显示当前指标组设置中的指标组。

5.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注**
>
> 默认设置是每个人（**公共访问权限**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  (可选）添加用户或用户组：搜索用户或用户组并选择。用户或用户组将被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **无访问权限**（仅适用于**公共访问权限**）：公众无法访问对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理组织单位 { #manage_organisation_unit }

在本节中，您将学习如何：

-   创建新的组织单位并建立组织单位层次结构

-   创建组织单位组、组套，并将组织单位分配给它们

-   修改组织单位的层次结构

### 关于组织单位 { #about_organisation_unit }

组织单位层次结构定义了 DHIS2 的组织结构，例如卫生机构、行政区域和其他地理区域是如何相互排列的。它是 DHIS2 的_where_维度，类似于时段代表_when_维度。

组织单位层次结构是通过父子关系建立的。
在DHIS2中，每个节点都是一个组织单位。一个国家可能
例如有八个省，每个省可能有一个
地区的儿童。通常，最低级别包括
收集数据的设施。数据收集设施也可以
位于较高的级别，例如国家或省级
医院。因此，您可以在DHIS2中创建倾斜的组织树。

-   您一次只能拥有一个组织层次结构。

-   层次结构中可以有任意多个级别。

    通常情况下，公共卫生领域的国家组织等级分为四至六级。

-   您可以使用组织组和组织组集创建其他分类。

    例如，建立与医疗保健部门平行的行政边界。

-   建议使用组织单位组来创建非地理层次结构。

-   在一个组织单位组集中，一个组织单位只能是一个组织单位组的成员。

-   一个组织单位组可以是多个组织单位组集的一部分。

-   组织单位层次结构是地理维度数据汇总的主要载体。

-   When you close an organisation unit, you can't register or edit events to this organisation unit in the **Event Capture** and **Tracker Capture** apps.

> **Important**
>
> You can change the organisation unit hierarchy after you've created it, even organisation units that collect data. However, DHIS2 always uses the latest hierarchy for data aggregation. So if you change the hierarchy, you loose the temporal representation of the hierarchy across time.
>
> District A is sub-divided into District B and District C. Facilities which belonged to District A are reassigned to District B and C. Any historical data, which you entered before the split occurred, is still registered as belonging to District B and C, not to the obsolete District A.

In the **Maintenance** app, you manage the following organisation unit objects:

<table>
<caption>Organisation unit objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Organisation unit</p></td>
<td><p>Create, edit, clone, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Organisation unit group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Organisation unit group set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="even">
<td><p>Organisation unit level</p></td>
<td><p>Edit and translate</p></td>
</tr>
<tr class="odd">
<td><p>Hierarchy operations</p></td>
<td><p>Move organisation units</p></td>
</tr>
</tbody>
</table>

### 工作流程 { #workflow_organisation_unit }

推荐的工作流程是：

1.  创建组织单位。

2.  创建组织单位组。

3.  创建组织单位组集。

### 创建或编辑组织单位 { #create_organisation_unit }

![](resources/images/orgunits/create_new_orgunit.png)

您可以将组织单位一个或一个地添加到层次结构中
单位或作为所选组织单位的子级。你只能有
一个根单元。

1.  Open the **Maintenance** app and click **Organisation unit** \> **Organisation unit**.

2.  点击添加按钮。

3.  选择新组织单位所属的组织单位：

    1.  点击**父组织单位**。

    2.  在组织单位树中，找到父组织单位并将其选中。您的选择将以黄色标记。

        > **Tip**
        >
        > Click the arrows to expand the organisation unit tree.

    3.  点击**选择**。

4.  Enter a **Name** of the organisation unit.

    每个组织单位必须具有唯一的名称。

5.  Enter a **Short name** for the organisation unit.

    通常，简称是组织单位全称的缩写。由于篇幅有限，该属性通常用于在报告中显示组织单位名称。

6.  （可选）分配**代码**。

    在许多国家/地区，为组织单位分配了代码。

7.  (Optional) Type a **Description** of the organisation unit.

8.  Select an **Opening date**.

    例如，在分析历史数据时，开放日期可以控制在某个时间点存在的组织单位。

9.  If applicable, select a **Closed date**.

10. In the **Comment** field, enter any additional information that you would like to add.

11. (Optional) In the **URL** field, enter a link to an external web site that has additional information about the organisation unit.

12. 输入联系信息：

    -   联系人

    -   地址

    -   电子邮件

    -   电话号码

13. (Optional) Enter **Latitude** and **Longitude**.

    You must have latitude and longitude values to create maps in the **Maps** app. Then your organisation units can be represented as points on a map, for example a health facility. Without this information, the **Maps** app will not work.

    It might be more efficient to import coordinates later as a batch job for all organisation units using the **Import-Export** app. You also use the **Import-Export** app to create polygons. A polygon is an organisation unit that represent an administrative boundary.

14. If applicable, select **Data sets** and assign them.

    > **Note**
    >
    > You control whether a user should be able to assign data sets to an organisation unit in the **System Settings** app:
    >
    > Open the **System Settings** app, click **Access** and select **Allow assigning object to related objects during add or update**.

15. If applicable, select **Programs** and assign them.

    > **Note**
    >
    > You control whether a user should be able to assign programs to an organisation unit in the **System Settings** app:
    >
    > Open the **System Settings** app, click **Access** and select **Allow assigning object to related objects during add or update**.

16. If applicable, enter custom attributes values, for example **HR identifier**.

    > **Note**
    >
    > You configure the custom attributes in the **Maintenance** app:
    >
    > Open the **Maintenance** app and click **Other** \> **Attribute**.

17. 点击**保存**。 

### 创建或编辑组织单位组 { #create_organisation_unit_group }

Organisation unit groups allow you to classify related organisation units into a common theme. You can for example group all organisation units that are hospitals in an **Hospital** group.

1.  Open the **Maintenance** app and click **Organisation unit** \> **Organisation unit group**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**：为组织单位组提供一个准确、唯一和描述性的名称。

    2.  **简称**：简称应少于 25 个字符。通常，简称是组织单位全称的缩写。该属性用于 DHIS2 中空间有限的某些地方。

    3.  **码**

    4.  **符号**：选择一个符号，该符号将用于在**地图**应用中显示图层时显示组织单位（仅限点）。

4.  在组织树中，单击要添加到组织单位组的组织单位。

    您可以通过扩展分支（单击箭头符号）或通过名称搜索来查找组织单位。

    所选组织单位显示为橙色。

5.  点击**保存**。 

### 创建或编辑组织单位组集 { #create_organisation_unit_group_set }

组织单位组集允许您创建其他
组织单位的分类。组集创建新
尺寸，以便您可以进行更详细的数据分析。你一个
轻松按组集中的组过滤，组织或汇总数据。

-   您可以具有任意数量的组织单位组集。

-   The default organisation unit group sets are **Type** and **Ownership**.

-   在一个组织单位组集中，一个组织单位只能是一个组织单位组的成员。

-   一个组织单位组可以是多个组织单位组集的一部分。

-   您可以定义组织单位组集是否为必填组，这将影响数据的完整性。必须是指所有组织单位都必须是该组集中某个组的成员。

> **Note**
>
> In the **Data integrity** part of the **Data administration** app you can verify if you've accidentally assigned the same organisation unit to multiple groups within the same group set. In this app you also find information about organisation units that are not members of a compulsory organisation unit group set.

1.  Open the **Maintenance** app and click **Organisation unit** \> **Organisation unit group set**.

2.  点击添加按钮。

3.  填写：

    1.  **名称**：为组织单位组集提供准确的名称。

    2.  **码**

    3.  **描述**：描述组织单位组套所衡量或捕捉的内容。

4.  如果希望所有组织单位都是组集中某个组的成员，请选择 **强制**。

5.  (Optional) Select **Data dimension**.

6.  (Optional) Select **Include subhierarchy in analytics**.

    如果选择此项，子组织单位将从最接近的 "父 "组织单位继承组织单位组属性。子组织单位上的任何属性都将覆盖继承值。

    如果一个组织单位没有相关的组织单位组，则该组织单位可以继承其最接近的父组织单位组。如果在给定的组织单位组集合中，父组织单位组都没有组织单位组，结果仍然是 "空白"，但如果至少有一个父组织单位组有组织单位组，子组织单位就会继承它。

    如果启用了 "include subhierarchy in analytics（在分析中包含子层次结构）"，即如果组织单位是白色的（没有与之相关的组织单位组），则该组织单位继承其最接近的父组织单位组。

7.  选择组织单位组并分配它们。

    在左侧列表中，您可以找到可用的组织单位组。使用箭头在两个列表之间移动选定的组。

    If there are no organisation unit groups in the left-hand list, click **Add new**. In the form that opens, create the organisation units group you need. When you're done, click **Refresh values**.

    > **Note**
    >
    > An organisation unit can only be a member of a single organisation unit group within an organisation unit group set.

8.  点击**保存**。 

![](resources/images/implementation_guide/organisation_unit_hiearchy.png)

您希望根据设施的所有权来分析数据。所有设施都有一个所有者，因此您需要确保所有组织单位都有这个分类。为此，您可以使用**强制**选项：

1.  为每种所有权类型创建一个组，例如 "卫生部"、"私人 "和 "宗教"。

2.  将数据库中的所有设施分配给这些组之一。

3.  Create an organisation unit group set called "Ownership" and select **Compulsory**.

4.  将组织单位组 "卫生部"、"私营 "和 "信仰 "分配到 "所有权 "组织组集中。

！[]（资源/图像/维护/analytics-include-org-unit-subhierarchy.png）

![](resources/images/maintainence/include-subhierarchy-analytics.png)

通过两种方式对组织单位进行分组，并汇总这两种数据
并行层次结构

用于汇总数据（仅在分析应用程序中）

组织单位组设置的附加设置将创建一个
动态“成员资格”到组织单位组的集合。

您无需更改组织单位的层次结构

可扩展和动态

动态包含层次

动态附加分类

### 为组织单位级别分配名称 { #name_organisation_unit_level }

当您将子女添加到一个组织单位时，DHIS2 会根据需要自动创建一个新的组织单位级别。系统还会为该级别指定一个通用名称，如 "第 5 级"。您可以用上下文名称（如 "国家"、"省"、"区 "或 "医疗机构"）来替代通用名称。DHIS2 会在任何提及级别的地方使用上下文名称，例如在**地图**应用程序中。

1.  Open the **Maintenance** app and click **Organisation unit** \> **Organisation unit level**.

    列表的加载时间取决于组织单位层次树的深度。

2.  对于要修改的组织单位级别，输入名称。

3.  选择离线级别的数量。

    > **Note**
    >
    > You configure the default value in the **System Settings** app:
    >
    > Open the **System Settings** app, click **General** and select a level in the **Max offline organisation unit levels** list.

4.  点击**保存**。 

### 在层次结构中移动组织单位 { #move_organisation_unit }

您可以通过以下方式在层次结构中移动组织单位：
所选组织单位的父级。

1.  Open the **Maintenance** app and click **Organisation unit** \> **Hierarchy operations**.

2.  在左侧层次树中，选择要移动的组织单位。

    > **Note**
    >
    > If the selected organisation unit is has sub-organisation units, all of them move to the new parent organisation unit.

3.  在右侧层次树中，选择要将所选组织单位移动到哪个组织单位。

4.  Click **Move x organisation units**, where x stands for the number of organisation units you have selected.

    您的更改会立即反映在左侧的层次结构树中。

### 关闭组织单位 { #close_organisation_unit }

When you close an organisation unit, you can't register or edit events to this organisation unit in the **Event Capture** and **Tracker Capture** apps.

1.  Open the **Maintenance** app and click **Organisation unit** \> **Organisation unit**.

2.  In the object list, click the options menu and select **Edit**.

3.  Select a **Closed date**.

4.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注**
>
> 默认设置是每个人（**公共访问权限**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  (可选）添加用户或用户组：搜索用户或用户组并选择。用户或用户组将被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **无访问权限**（仅适用于**公共访问权限**）：公众无法访问对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理验证规则{ #manage_validation_rule }

### 关于验证规则 { #about_validation_rule }

验证规则基于表达式。该表达式定义了一个
数据元素值之间的关系。该表达式形成一个
条件符合某些逻辑条件。

该表达式包括：

-   左侧

-   右边

-   操作员

验证规则断言所接种的疫苗总数
婴儿小于或等于婴儿总数。

左侧和右侧必须返回数字值。

In the **Maintenance** app, you manage the following validation rule objects:

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>What you can do</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Validation rule</p></td>
<td><p>Create, edit, clone, delete, show details, and translate</p></td>
</tr>
<tr class="even">
<td><p>Validation rule group</p></td>
<td><p>Create, edit, clone, delete, share, show details, and translate</p></td>
</tr>
<tr class="odd">
<td><p>Validation notification</p></td>
<td><p>Create, edit, clone, delete, show details, and translate</p></td>
</tr>
</tbody>
</table>

#### 关于推拉窗 { #sliding_windows }

You can use sliding windows to group data _across multiple periods_ as opposed to selecting data for _a single period_. Sliding windows have a size, that is to say, the number of days to cover, a starting point and an end point. The example below shows disease surveillance data:.

-   橙色部分的数据根据当前时段选择数据。有一个阈值，每周或每期计算一次，显示在 "结果 "部分。

-   蓝色部分的数据是滑动窗口。它选择过去 7 天的数据。结果 "显示某种疾病的确诊病例总数。

-   验证规则可确保在案件总数超过该期间的阈值时通知用户。

![](resources/images/maintainence/validation_rules_sliding_window.gif)

<table>
<caption>Different behaviour of validation rules</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>With sliding windows</p></th>
<th><p>Without sliding windows</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Used only for event data.</p></td>
<td><p>Used for event data and aggregate data.</p></td>
</tr>
<tr class="even">
<td><p>Data selection is based on a fixed number of days (periodType).</p></td>
<td><p>Data selection is always based on a period.</p></td>
</tr>
<tr class="odd">
<td><p>The position of the sliding window is always<em>relative to</em> the period being compared.</p></td>
<td><p>Data is always selected for the <em>same period</em> as the period being compared.</p></td>
</tr>
</tbody>
</table>

另请参阅：[创建或编辑广告时，如何使用滑动窗口
验证
规则]（https://docs.dhis2.org/master/en/user/html/manage_validation_rule.html#create_validation_rule）。

#### 关于验证规则组 { #about-validation-rule-groups }

验证规则组允许您对相关的验证规则进行分组。在运行 _[验证规则分析](https://docs.dhis2.org/master/en/user/html/validation_rule_analysis.html)_ 时，您可以选择运行系统中的所有验证规则，或者只运行一个组中的验证规则。

#### 关于验证通知 { #validation_notifications }

您可以配置验证规则分析，向选定的用户组自动发送验证错误通知。这些信息称为_验证通知_。它们通过内部 DHIS2 消息系统发送。

您可以将验证规则通知作为单独的消息或作为
消息摘要。这很有用，例如，如果您要发送
有关高优先级疾病暴发的个别消息和摘要
用于低优先级常规数据验证错误。

#### 关于验证规则功能{ #about-validation-rule-functions }

您可以在验证规则的左侧或右侧使用以下功能：

<table>
<caption>验证规则功能</caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><p>验证规则函数</p></th>
<th><p>参数</p></th>
<th><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>如果</p></td>
<td><p>(布尔表达式，true-expr，false-expr）</p></td>
<td><p>评估布尔表达式，如果为 true，返回表达式的 true 值，如果为 false，返回表达式的 false 值。参数必须遵循任何指示符表达式的规则。</p></td>
</tr>
<tr class="even">
<td><p>isNull</p></td>
<td><p>元素</p></td>
<td><p>如果元素值缺失（空），则返回 true，否则返回 false。</p></td>
</tr>
<tr class="odd">
<td><p>isNotNull</p></td>
<td><p>元素</p></td>
<td><p>如果元素值未丢失（非空），则返回 true，否则返回 false。</p></td>
</tr>
<tr class="even">
<td><p>firstNonNull</p></td>
<td><p>(元素 [, 元素 ...])</p></td>
<td><p>返回第一个未丢失（非空）元素的值。可以提供任意数量的参数。任何参数也可以是数字或字符串字面形式，如果前面的对象都有缺失值，则将返回缺失值。</p></td>
</tr>
<tr class="odd">
<td><p>最大</p></td>
<td><p>(表达式 [, 表达式 ...])</p></td>
<td><p>返回所给表达式的最大（最高）值。参数个数不限。</p></td>
</tr>
<tr class="even">
<td><p>最小值</p></td>
<td><p>(表达式 [, 表达式 ...])</p></td>
<td><p>返回给定表达式中最小（最低）的值。可提供任意数量的参数。</p></td>
</tr>
<tr class="odd">
<td><p>log</p></td>
<td><p>(表达式[, 基数 ])</p></td>
<td><p>返回数字表达式的自然对数（以 e 为底）。如果第二个参数是整数，则返回以整数为底的对数。</p></td>
</tr>
<tr class="even">
<td><p>log10</p></td>
<td><p>(表达式）</p></td>
<td><p>返回数字表达式的公共对数（以 10 为底）。</p></td>
</tr>
</tbody>
</table>

### 创建或编辑验证规则 { #create_validation_rule }

1.  Open the **Maintenance** app and click **Validation** \> **Validation rule**.

2.  点击添加按钮。

3.  Type a **Name**.

    在验证规则中，名称必须唯一。

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  （可选）输入**说明**。

6.  选择**重要性**：**高**，**中**或**低**。

7.  Select a **Period type**.

8.  选择一个**操作符**：**强制配对**、**等于**、**排他性配对**、**大于**、**大于或等于**或**不等于**。

    ** 强制对** 操作符允许要求在表达式的左右两边都必须输入数据值，或者两边都不输入。这就意味着，如果填写了表格中的一个字段，就必须同时填写一个或多个其他字段。

    The **Exclusive pair** allows to assert that if any value exist on the left side then there should be no values on the right side (or vice versa). This means that data elements which compose the rule on either side should be mutually exclusive from each other, for a given time period / organisation unit /attribute option combo.

9.  创建表达式的左侧：

    1.  Click **Left side**.

    2.  Select **Sliding window** if you want to view data relative to the period you are comparing. See also [About validation rules](https://docs.dhis2.org/master/en/user/html/manage_validation_rule.html#about_validation_rule).

    3.  Select a **Missing value strategy**. This selection sets how the system evaluates a validation rule if data is missing.

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Option</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>Skip if any value is missing</p></td>
        <td><p>The validation rule will be skipped if any of the values which compose the expression are missing. This is the default option.</p>
        <p>Always select this option you use the <strong>Exclusive pair</strong> or <strong>Compulsory pair</strong> operator.</p></td>
        </tr>
        <tr class="even">
        <td><p>Skip if all values are missing</p></td>
        <td><p>The validation rule will be skipped only if all of the operands which compose it are missing.</p></td>
        </tr>
        <tr class="odd">
        <td><p>Never skip</p></td>
        <td><p>The validation rule will never be skipped in case of missing data, and all missing operands will be treated effectively as a zero.</p></td>
        </tr>
        </tbody>
        </table>

    4.  输入**说明**。

    5.  根据可用的数据元素、程序对象、组织单位、计数和常量建立表达式。

        在右窗格中，双击要包含在表达式中的数据对象。结合左窗格下方的数学运算符。

    6.  点击**保存**。 

10. 创建表达式的右侧：

    1.  Click **Right side**.

    2.  Select a **Missing value strategy**. This selection sets how the system evaluates a validation rule if data is missing.

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Option</p></th>
        <th><p>Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>Skip if any value is missing</p></td>
        <td><p>The validation rule will be skipped if any of the values which compose the expression are missing. This is the default option.</p>
        <p>Always select this option you use the <strong>Exclusive pair</strong> or <strong>Compulsory pair</strong> operator.</p></td>
        </tr>
        <tr class="even">
        <td><p>Skip if all values are missing</p></td>
        <td><p>The validation rule will be skipped only if all of the operands which compose it are missing.</p></td>
        </tr>
        <tr class="odd">
        <td><p>Never skip</p></td>
        <td><p>The validation rule will never be skipped in case of missing data, and all missing operands will be treated effectively as a zero.</p></td>
        </tr>
        </tbody>
        </table>

    3.  Select **Sliding window** if you want to view data relative to the period you are comparing. See also [About validation rules](https://docs.dhis2.org/master/en/user/html/manage_validation_rule.html#about_validation_rule).

    4.  输入**说明**。

    5.  根据可用的数据元素、程序对象、组织单位、计数和常量建立表达式。

        在右窗格中，双击要包含在表达式中的数据对象。结合左窗格下方的数学运算符。

    6.  点击**保存**。 

11. (可选）选择该规则应针对哪些 ** 组织单位级别** 进行评估。留空将导致验证规则在所有级别上进行评估。

12. (Optional) Click **Skip this rule during form validation** to avoid triggering this rule while doing data entry

13. 点击**保存**。 

### 创建或编辑验证规则组 { #create_validation_rule_group }

1.  Open the **Maintenance** app and click **Validation** \> **Validation rule group**.

2.  点击添加按钮。

3.  Type a **Name**.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  （可选）输入**说明**。

6.  Double-click the **Validation rules** you want to assign to the group.

7.  点击**保存**。 

### 创建或编辑验证通知 { #create_validation_notification }

1.  打开 **Maintenance** 应用程序，点击 **Validation** （> **Validation notification**）。

2.  点击添加按钮。

3.  Type a **Name**.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  Select **Validation rules**.

6.  Select **Recipient user groups**.

7.  (Optional) Select **Notify users in hierarchy only**.

    如果选择此选项，系统将过滤收件人用户。(系统会从收件人用户组中筛选出收件人用户）。筛选的依据是收件人用户所属的组织单位。链接到发生违规的组织单位的组织单位的用户将收到验证通知。系统将忽略其他用户，这些用户不会收到验证通知。

8.  创建消息模板：

    1.  创建**主题模板**。

        Double-click the parameters in the **Template variables** field to add them to your subject.

    2.  创建**消息模板**。

        Double-click the parameter names in the **Template variables** field to add them to your message.

9.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注**
>
> 默认设置是每个人（**公共访问权限**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  (可选）添加用户或用户组：搜索用户或用户组并选择。用户或用户组将被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **无访问权限**（仅适用于**公共访问权限**）：公众无法访问对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理属性 { #manage_attribute }

### 关于属性 { #about_attribute }

您可以使用元数据属性将其他信息添加到
元数据对象。除了每个标准属性
这些对象可能有助于存储其他信息
属性，例如数据元素的收集方法。

![](resources/images/maintainence/attribute_create.png)

In the **Maintenance** app, you manage the following attribute objects:

<table> 
<caption>维护应用中的属性对象</caption> 
<colgroup> 
<col style="width: 50%" /> 
<col style="width: 50%" /> 
</colgroup> 
<thead> 
<tr class="header"> 
<th><p>对象类型</p></th> 
<th><p>可用函数</p></th> 
</tr> 
</thead> 
<tbody > 
<tr class="odd"> 
<td><p>属性</p></td> 
<td><p>创建、编辑、克隆、删除、显示详细信息和翻译</p></td > 
</tr> 
</tbody> 
</table>

### 创建或编辑属性 { #create-or-edit-an-attribute }

1.  打开**维护**应用程序并点击**属性**。

2.  点击添加按钮。

3.  在 **名称** 字段中，输入属性的名称。

    每个属性必须具有唯一的名称

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  选择**值类型**。

    如果为属性提供的值与值类型不匹配，则会收到警告。

6.  选择**选项集**。

7.  选择所需的选项，例如：

    -   如果您希望对象始终具有动态属性，请选择 **强制**。

    -   如果您希望系统强制特定对象类型的值是唯一的，请选择**唯一**。

8.  点击**保存**。 

    动态属性现在可用于您为其分配的对象。

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理常数 { #manage_constant }

### 关于常数 { #about_constant }

常量是可以供用户使用的静态值
在数据元素和指标中。一些指标，例如“夫妇年
保护率”取决于通常不会转换的常数
时间。

![](resources/images/maintainence/constant_create.png)

在 **维护** 应用程序中，您管理以下常量对象：

<table> 
<caption>维护应用中的常量对象</caption> 
<colgroup> 
<col style="width: 50%" /> 
<col style="width: 50%" /> 
</colgroup> 
<thead> 
<tr class="header"> 
<th><p>对象类型</p></th> 
<th><p>可用函数</p></th> 
</tr> 
</thead> 
<tbody > 
<tr class="odd"> 
<td><p>常量</p></td> 
<td><p>创建、编辑、克隆、共享、删除、显示详细信息和翻译</p></td> 
</tr>
</tbody> 
</table>

### 创建或编辑常量 { #create_constant }

1.  打开 **Maintenance** 应用程序，然后单击 **Other** （> **Constant** ）。

2.  点击添加按钮。

3.  在 **名称** 字段中，输入常量的名称。

4.  （可选）在 **简称** 字段中，键入常量的缩写名称。

5.  （可选）在 **Code** 字段中，分配一个代码。 

6.  在 **描述** 字段中，键入常量的简短信息说明。

7.  在 **值** 字段中，定义常量的值。

8.  点击**保存**。 

    现在可以使用该常数。

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注**
>
> 默认设置是每个人（**公共访问权限**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  (可选）添加用户或用户组：搜索用户或用户组并选择。用户或用户组将被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **无访问权限**（仅适用于**公共访问权限**）：公众无法访问对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理选项集 { #manage_option_set }

### 关于选项集 { #about_option_set }

选项集提供了一个预定义的下拉列表（枚举），用于
DHIS2。您可以定义任何类型的选项。

一个名为“投放类型”的选项集将具有以下选项：“普通”，
“违反”，“剖腹产”和“协助”。

![](resources/images/maintainence/option_set_create.png)

<table>
<caption>Option set objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Option set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Option group</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
<tr class="odd">
<td><p>Option group set</p></td>
<td><p>Create, edit, clone, share, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 创建或编辑选项集 { #create_option_set }

> **Important**
>
> Option sets must have a code as well as a name. You can change the names but you can't change the codes. Both names and codes of all options must be unique, even across different option sets.

1.  打开**维护**应用程序，点击**其他** （> **选项集**）。

2.  点击添加按钮。

3.  In the **Primary details** tab, define the option set:

    1.  在 **名称** 字段中，输入常量的名称。

    2.  In the **Code** field, assign a code.

    3.  选择**值类型**。

    4.  点击**保存**。 

4.  对于您需要的每个选项，执行以下任务：

    1.  Click the **Options** tab.

    2.  点击添加按钮。

    3.  Type a **Name** and a **Code**. Optionally also select a **Color** and an **Icon** which will be used for this option in the data capture apps.

    4.  按名称，代码/值或手动对选项进行排序。

    5.  点击**保存**。 

### 创建或编辑选项组 { #create_option_group }

You can group and classify **options** within an **option set** by using **option groups**. This way you can create a subset of options in an option set. The main purpose of this is to be able to filter huge option sets into smaller, related parts.

可以通过程序规则在跟踪器和事件捕获中将分组的选项隐藏或一起显示。

> **Note**
>
> You cannot change the **Option set** selected in an **Option group** once it has been created.

1. 打开**维护**应用程序，点击**其他** （> **选项组**。

2. 点击添加按钮。

3. 填写表格：

    1. **名称**
    2. **简称**
    3. **码**
    4. **选项集**

4. 选择**选项集**后，您可以分配要分组的**选项**。

5. 点击**保存**。 

### 创建或编辑选项组集 { #create_option_group_set }

**选项组集**允许您将多个**选项组**归为一组。
选项组集的主要目的是为捕获的数据添加更多维度以进行分析。

> **Note**
>
> You cannot change the **Option set** selected in an **Option group set** once it has been created.

1. 打开** Maintenance **应用程序，然后单击** Other ** \> ** Option group set **。

2. 点击添加按钮。

3. 填写表格：

    1. **名称**
    2. **码**
    3. **描述**
    4. **选项集**
    5. **数据尺寸**

       如果选择 "**数据维度**"，则除 "期间 "和 "组织单位 "这两个标准维度外，组集还将作为另一个维度提供给分析。

4. 选择选项组并分配它们。

   可用选项组显示在左面板中。当前为选项组集成员的选项组显示在右侧面板中。

5. 点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注**
>
> 默认设置是每个人（**公共访问权限**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  (可选）添加用户或用户组：搜索用户或用户组并选择。用户或用户组将被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **无访问权限**（仅适用于**公共访问权限**）：公众无法访问对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理图例 { #manage_legend }

### 关于传说 { #about_legend }

You can create, edit, clone, delete, show details and translate legends to make the maps you're setting up for your users meaningful. You create maps in the **Maps** app.

> **注**
>
> 连续图例必须由以相同值结束和开始的图例项组成，例如：0-50 和 50-80。请勿这样设置图例项：0-50 和 51-80。这样会在图例中产生间隙。

### 创建或编辑图例 { #create_legend }

> **注意**
>
>不允许在图例中留有空白。
>
>不允许有重复的图例项。

1.  打开** Maintenance **应用程序，然后单击** Other ** \> ** Legend **。

2.  点击添加按钮。

3.  In the **Name** field, type the legend name.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  创建您想在图例中包含的图例项：

    1.  选择**起始值**和**结束值**。

    2.  Select **Number of legend items**.

    3.  选择一种配色方案。

    4.  点击**创建图例项**。

    > **Tip**
    >
    > Click the options menu to edit or delete a legend item.

6.  （可选）添加更多图例项：

    1.  点击添加按钮。

    2.  输入名称，然后选择一个开始值，一个结束值和一种颜色。

    3.  点击**确定**。

7.  （可选）更改色阶。

    1.  单击色标查看色标选项列表，然后选择色标。

    2.  To customize a color scale, click the add button. In the **Edit legend item** dialog, click the color scale button and hand-pick colors, or enter your color values.

8.  点击**保存**。 

<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>Legend item</th>
<th>Start value</th>
<th>End value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Low bad</td>
<td>0</td>
<td>50</td>
</tr>
<tr class="even">
<td>Medium</td>
<td>50</td>
<td>80</td>
</tr>
<tr class="odd">
<td>High good</td>
<td>80</td>
<td>100</td>
</tr>
<tr class="even">
<td>Too high</td>
<td>100</td>
<td>1000</td>
</tr>
</tbody>
</table>

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects }

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注**
>
> 默认设置是每个人（**公共访问权限**）都可以查找、查看和编辑元数据对象。

1.  打开 **维护** 应用程序并找到您要修改的元数据对象的类型。

2.  在对象列表中，单击上下文菜单并选择**共享设置**。

3.  (可选）添加用户或用户组：搜索用户或用户组并选择。用户或用户组将被添加到列表中。

4.  更改要修改的访问组的共享设置。

    -   **可以编辑和查看**：访问组可以查看和编辑对象。

    -   **只能查看**：访问组可以查看对象。

    -   **无访问权限**（仅适用于**公共访问权限**）：公众无法访问对象。

5.  更改要修改的访问组的数据共享设置。

    -   **可以捕获数据**：访问组可以查看和捕获对象的数据。

    -   **可以查看数据**：访问组可以查看对象的数据。

    -   **无访问权限**：访问组无权访问对象的数据。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

### 将图例分配给指标或数据元素 { #assign-a-legend-to-indicator-or-data-element }

You can assign a legend to an indicator or a data element in the **Maintenance** app, either when you create the object or edit it. When you then select the indicator or data element in the **Maps** app, the system automatically selects the assigned legend.

### 也可以看看 { #see_also_legend }

-   [使用地理信息系统应用程序](https://docs.dhis2.org/master/en/user/html/using_gis.html)

## 管理预测变量 { #manage_predictor }

### 关于预测变量 { #about-predictors }

预测变量定义如何从表达式生成聚合数据值
包含汇总和/或事件数据。预测值可以基于：

-   来自与预测值相同时期的数据，和/或

-   来自预测值之前期间的数据

#### 同期数据 { #data_from_the_same_period }

预测器可以使用与预测值相同周期的数据。
例如，您可以计算具有
通过使用预测器表达式，例如：数据元素的非零值：

 <pre> <code> if（＃{ji7o0ILHuU2}！= 0，1，0）</code> </pre>

在数据所在的组织单位级别运行此预测变量时
收集的数据，如果数据元素具有
该组织单位的非零值，否则为0。
（如果您预测的数据元素未存储零，则
zeors不会存储在数据库中，以节省空间。）
然后，您可以在更高的分析中将这个预测值求和
组织单位级别，以计算组织单位的数量
报告中每个组织单位下的非零值。

#### 前期数据 { #data_from_previous_periods }

当您指定汇总时，预测变量将使用以前期间的数据
函数，例如sum（）或avg（）。例如，以下生成器表达式
标识一个值，该值是平均值加上标准偏差的两倍
前期数据：

 <pre> <code> avg（＃{ji7o0ILHuU2}）+ 2 * stddev（＃{ji7o0ILHuU2}）</code> </pre>

#### 上一时期的数据 { #data_from_the_same_and_previous_periods }

预测变量表达式可以访问与
通过访问两个
汇总函数（针对先前期间），以及任何汇总函数之外
（同一时期）。例如，如下所示的表达式可以是
用来平衡上一时期（＃{KOh02hHko7C}）
加上此期间的净变化（＃{ji7o0ILHuU2}），
得出此期间的余额：

 <pre> <code> sum（＃{KOh02hHko7C}）+＃{ji7o0ILHuU2} </code> </pre>

第一个数据值在聚合表达式（总和）内，以指示
它正在采样前一时期的数据（即使只有一个前一时期），
而第二个数据值不在聚合函数中以表明它
正在引用同一时期的数据。

如果需要，可以在同一引用中引用预测变量的输出数据元素
预测变量的表达。例如，此示例中的表达式可以
用于预测一段时间内的余额，然后将该值与
下一个期间的变化以计算下一个期间的余额。
当预测变量跨多个期间运行时，将在以下期间处理这些期间
按时间顺序排列，可以使用较早时期的结果
作为以后的输入。

#### 预测器组织单位级别 { #predictor_organisation_unit_levels }

您需要为预测变量的输出选择一个或多个组织单位级别。
预测变量生成的所有值都存储在组织单位的
您选择的级别。预测变量表达式中的每个项目都是值的总和
为该组织单位存储的信息（如果有的话）以及组织中存储的所有值
低于该单位（如果有）的单位。

> **Note**
>
> In configuring a predictor, you must choose one or more organisation unit levels at which predicted data will be output. If no level is selected, no predicted values will be generated.

> **Warning**
>
> If you want to use the predicted values in analytics reporting, or to make other predictions, _do not select more than one organisation unit level_. When you select more than one level, predictions at the higher level(s) will also include any data used in lower level(s) predictions. If the predictions from multiple levels are subsequently used in analytics, or in the expressions of other predictors, this can result in double counting because the predicted values for a higher level include the predicted values from a lower level.

如果使用预测的组织单位级别，则可以选择多个组织单位级别
值仅在验证规则中。例如在疾病监测中，您
如果实际值高于
根据上一期间数据得出的该期间的期望值范围。
为此，您可以创建一个预测变量以计算平均值加上两倍的
前期数据的标准偏差。您可以使用验证
将该最高期望值与实际值进行比较的规则。
您可以在多个级别上运行预测变量和验证规则
以检测不同的爆发情况。在一种情况下，可能会有
一个设施的显着增加超出了预期范围，但是
包含该设施的地区可能不会超出其预期范围
因为地区价值与许多其他设施结合在一起。
但在另一种情况下，
设施不超出每个设施的预期范围（因为
每个设施的标准偏差可能很高），但确实超过了
该地区的预期范围（因为
整个地区的标准偏差可能会更低）。

如果要生成多个级别的预测，则还可以
在不同级别使用不同的预测变量。例如，您可能想要
如果某一级别的值超过平均值再加上标准的两倍，则会收到警报
偏差，但如果超出平均值加1.8倍，则会在另一个级别发出警报
标准偏差。如果需要，可以配置不同的预测变量
具有相同的输出数据元素。如果您使用相同的输出数据元素，
这仍然适用于不同组织单位级别的有效规则，
但您也必须注意不要在分析或其他结果中使用结果
预测器计算以避免重复计算。

In the **Maintenance** app, you manage the following predictor objects:

<table>
<caption>Predictor objects in the Maintenance app</caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Object type</p></th>
<th><p>Available functions</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Predictor</p></td>
<td><p>Create, edit, clone, delete, show details and translate</p></td>
</tr>
</tbody>
</table>

### 抽样前期 { #sampling-previous-periods }

预测变量可以生成过去一段时间的数据值，
现在或将来。这些值基于预测期间的数据，
和/或来自预测时期之前的时期的采样数据。

如果您只需要进行预测的同一时期的数据，
那么您无需阅读本节。本节介绍如何
从预测周期之前的周期中采样数据。

#### 顺序样本计数 { #sequential_sample_count }

预测器的_连续采样次数_给出了要采样的紧接其前的周期数。例如，如果预测器的周期类型是_Weekly_，_Sequential sample count_ 是 4，这意味着要对预测值周之前的四个周进行采样。因此，第 9 周的预测值将使用第 5、6、7 和 8 周的样本：

![](resources/images/maintainence/predictor_sequential.png){.center width=50% }

If a predictor's period type is _Monthly_ and the _Sequential sample count_ is 4, this means to sample four previous months immediately preceding the predicted value month. So the predicted value for May would use samples from weeks January, February, March, and April:

![](resources/images/maintainence/predictor_sequential_month.png){.center width=51% }

The _Sequential sample count_ can be greater than the number of periods in a year. For example, if you want to sample the 24 months immediately preceding the predicted value month, set the _Sequential sample count_ to 24:

![](resources/images/maintainence/predictor_24_months.png){.center width=57% }

#### 顺序跳过计数 { #sequential_skip_count }

A predictor's _Sequential skip count_ tells how many periods should be skipped immediately previous to the predicted value period, within the _Sequential sample count_. This could be used, for instance, in outbreak detection to skip one or more immediately preceding samples that might in fact contain values from the beginning of an outbreak that you are trying to detect.

例如，如果 _Sequential sample count_ 为 4，但 _Sequential skip count_ 为 2，则将跳过紧接预测周期之前的两个采样，从而只对两个周期进行采样：

![](resources/images/maintainence/predictor_skip.png){.center width=50% }

#### 年度样本数 { #annual_sample_count }

A predictor's _Annual sample count_ gives the number of previous years for which samples should be collected at the same time of year. This could be used, for instance, for disease surveillance in cases where the expected incidence of the disease varies during the year and can best be compared with the same relative period in previous years. For example, if the _Annual sample count_ is 2 (and the _Sequential sample count_ is zero), then samples would be collected from periods in the immediately preceding two years, at the same time of year.

![](resources/images/maintainence/predictor_annual.png){.center width=53% }

#### 顺序和年度样本计数一起 { #sequential_annual_sample_count }

您可以同时使用连续样本计数和年度样本计数，从过去几年中的多个连续时段采集样本。这样做时，将在与预测值时间段相同的时间段内的前几年，以及在相同时间段之前和之后的前几年采集样本，具体时间段由_连续样本计数_编号决定。

例如，如果_连续采样次数_为 4，_每年采样次数_为 2，则将从预测值时段之前的 4 个时段采集样本。此外，还将在相应时段的前 2 年以及两侧的 4 个时段采集样本：

![](resources/images/maintainence/predictor_sequential_annual.png){.center width=66% }

#### 顺序，年度和跳过样本计数一起 { #sequential_annual_skip_sample_count }

您可以将_连续跳过计数_与连续样本计数和年度样本计数一起使用。这样做时，_连续跳过计数_会告诉您在预测值周期的同一年中要跳过多少个周期。例如，如果 _Sequential sample count_ 为 4，而 _Sequential skip count_ 为 2，则紧接预测值周期之前的两个周期将被跳过，但之前的两个周期将被采样：

![](resources/images/maintainence/predictor_skip_2_weeks.png){.center width=66% }

如果_Sequential 跳过计数_ 等于或大于_Sequential 样本计数_，则将不收集包含预测值周期的年份的样本；仅对过去几年的时期进行抽样：

![](resources/images/maintainence/predictor_skip_current_year.png){.center width=66% }

#### 样品跳过测试 { #sample_skip_test }

您可以使用样本跳过测试（_Sample skip test_）来跳过某些时期的样本，否则这些样本会根据这些时期内的表达式测试结果被包含在内。例如，在疾病爆发检测中，跳过样本测试可以识别出以前爆发的疾病，从而在预测非爆发基线预期值时排除这些样本。

_Sample skip test_ 是一个表达式，返回值为 true 或 false，表示是否跳过该周期。它可以是一个表达式，用于测试上一期的任何数据值。例如，它可以测试一个明确输入的数据值，以指示应跳过上一期。或者，它可以将之前预测的某一期间的值与该期间记录的实际值进行比较，以确定是否跳过该期间。

如果_跳过抽样检验_为_真_，则不会对任何时段进行抽样。例如

![](resources/images/maintainence/predictor_sample_skip_test.png){.center width=66% }

### 创建或编辑预测变量 { #create_predictor }

1.  打开** Maintenance **应用程序，然后单击** Other ** \> ** Predictor **。

2.  点击添加按钮。

3.  In the **Name** field, type the predictor name.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  （可选）输入**说明**。

6.  Select an **Output data element**. Values generated by this predictor are stored as aggregate data associated with this data element and the predicted period.

    根据数据元素的值类型对值进行四舍五入：如果值类型是整数类型，预测值四舍五入到最接近的整数。对于所有其他值类型，数值四舍五入到四位有效数字。(但是，如果小数位左边的数字超过四位，则不会用零代替）。

7.  (Optional) Select an **Output category combo**. This dropdown will only show if the selected data element has categoryCombos attached to it. If this is the case, you can select which categoryCombo you would like to use.

8.  Select a **Period type**.

9.  指定一个或多个组织单位级别。输出值将分配给此级别（或这些级别）的组织单位。输入值将来自分配输出的组织单位，或输出组织单位下的任何较低层级。

10. 创建一个**生成器**。生成器是用于计算预测值的表达式。

    1.  Type a **Description** of the generator expression.

    2.  Select a **Missing value strategy**. This selection sets how the system evaluates a validation rule if data is missing.

        |选项|说明|
        | --- | --- |
        | 如果缺少任何值，则跳过 | 如果缺少构成表达式的任何值，则跳过验证规则。这是默认选项。<br><br> 使用**独占配对**或**强制配对**运算符时，请务必选择此选项。|
        |如果所有值均缺失，则跳过|仅当组成该值的所有值均缺失时，才跳过验证规则。
        |永不跳过|如果缺少数据，将永远不会跳过验证规则，并且所有缺失值都将被有效地视为零。

    3.  输入生成器表达式。您可以通过选择聚合数据的数据元素或程序数据元素，属性或指标来构建表达式。尚不支持组织单位计数。

        要使用过去的采样数据，应将选择的所有项目包含在以下聚合函数之一中（请注意，这些函数名区分大小写）：
        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Aggregate function</p></th>
        <th><p>Means</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>avg(x)</p></td>
        <td><p>Average (mean) value of x</p></td>
        </tr>
        <tr class="even">
        <td><p>count(x)</p></td>
        <td><p>Count of the values of x</p></td>
        </tr>
        <tr class="odd">
        <td><p>max(x)</p></td>
        <td><p>Maximum value of x</p></td>
        </tr>
        <tr class="even">
        <td><p>median(x)</p></td>
        <td><p>Median value of x</p></td>
        </tr>
        <tr class="odd">
        <td><p>min(x)</p></td>
        <td><p>Minimum value of x</p></td>
        </tr>
        <tr class="even">
        <td><p>percentileCont(p, x)</p></td>
        <td><p>Continuous percentile of x, where p is the percentile as a floating point number between 0 and 1. For example, p = 0 will return the lowest value, p = 0.5 will return the median, p = 0.75 will return the 75th percentile, p = 1 will return the highest value, etc. Continuous means that the value will be interpolated if necessary. For example, percentileCont( 0.5, #{FTRrcoaog83} ) will return 2.5 if the sampled values of data element FTRrcoaog83 are 1, 2, 3, and 4.</p></td>
        </tr>
        <tr class="odd">
        <td><p>stddev(x)</p></td>
        <td><p>Standard deviation of x. This function is eqivalent to stddevSamp. It's suggested that you use the function stddevSamp instead for greater clarity.</p></td>
        </tr>
        <tr class="even">
        <td><p>stddevPop(x)</p></td>
        <td><p>Population standard deviation of x: sqrt( sum( (x - avg(x))^2 ) / n )</p></td>
        </tr>
        <tr class="even">
        <td><p>stddevSamp(x)</p></td>
        <td><p>Sample standard deviation of x: sqrt( sum( (x - avg(x))^2 ) / ( n - 1 ) ). Note that this value is not computed when there is only one sample.</p></td>
        </tr>
        <tr class="odd">
        <td><p>sum(x)</p></td>
        <td><p>Sum of the values of x</p></td>
        </tr>
        </tbody>
        </table>

        汇总函数内的任何项目都将对过去所有采样时段进行评估，然后根据汇总函数内的公式进行合并。汇总函数之外的任何项目都将针对预测的时段进行评估。

        通过点击（或键入）表达式字段下方的任何元素，可以建立更复杂的表达式： ( ) \* / + - 日。常量数字可以通过键入来添加。天数选项在表达式中插入 \[天数\]，解析为数据来源期间的天数。

        您还可以在表达式中使用以下非聚合函数，它们可以位于聚合函数内部，也可以包含聚合函数，还可以独立于聚合函数：

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Function</p></th>
        <th><p>Means</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>if(test, valueIfTrue, valueIfFalse)</p></td>
        <td><p>Evaluates <strong>test</strong> which is an expression that evaluates to a boolean value -- see <strong>Boolean expression notes</strong> below. If the test is <strong>true</strong>, returns the <strong>valueIfTrue</strong> expression. If it is <strong>false</strong>, returns the <strong>valueIfFalse</strong> expression.</p></td>
        </tr>
        <tr class="even">
        <td><p>isNull(item)</p></td>
        <td><p>Returns the boolean value <strong>true</strong> if the <strong>item</strong> is null (missing), otherwise returns <strong>false</strong>. The <strong>item</strong> can be any selected item from the right (data element, program data element, etc.).</p></td>
        </tr>
        <tr class="odd">
        <td><p>isNotNull(item)</p></td>
        <td><p>Returns <strong>true</strong> if the <strong>item</strong> value is not missing (not null), otherwise <strong>false</strong>.</p></td>
        </tr>
        <tr class="even">
        <td><p>firstNonNull(item [, item ...])</p></td>
        <td><p>Returns the value of the first <strong>item</strong> that is not missing (not null). Can be provided any number of arguments. Any argument may also be a numeric or string literal, which will be returned if all the previous items have missing values.</p></td>
        </tr>
        <tr class="odd">
        <td><p>greatest(expression [, expression ...])</p></td>
        <td><p>Returns the greatest (highest) value of the expressions given. Can be provided any number of arguments.</p></td>
        </tr>
        <tr class="even">
        <td><p>least(expression [, expression ...])</p></td>
        <td><p>Returns the least (lowest) value of the expressions given. Can be provided any number of arguments.</p></td>
        </tr>
        <tr class="odd">
        <td><p>log(expression [, base ])</p></td>
        <td><p>Returns the natural logarithm (base e) of the numeric expression. If an integer is given as a second argument, returns the logarithm using that base.</p></td>
        </tr>
        <tr class="even">
        <td><p>log10(expression)</p></td>
        <td><p>Returns the common logarithm (base 10) of the numeric expression.</p></td>
        </tr>
        </tbody>
        </table>

        **Boolean expression notes:** A boolean expression must evaluate to **true** or **false**. The following operators may be used to compare two values resulting in a boolean expression: \<, \>, \!=, ==, \>=, and \<=. The following operators may be used to combine two boolean expressions: && (logical and), and || (logical or). The unary operator \! may be used to negate a boolean expression.

        生成器表达式示例：

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Generator expression</p></th>
        <th><p>Means</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>sum(#{FTRrcoaog83.tMwM3ZBd7BN})</p></td>
        <td><p>Sum of the sampled values of data element FTRrcoaog83 and category option combination (disaggregation) tMwM3ZBd7BN</p></td>
        </tr>
        <tr class="even">
        <td><p>avg(I{GSae40Fyppf}) + 2 * stddevSamp(I{GSae40Fyppf})</p></td>
        <td><p>Average of the sampled values of of program indicator GSae40Fyppf plus twice its sample standard deviation</p></td>
        </tr>
        <tr class="odd">
        <td><p>sum(D{IpHINAT79UW.eMyVanycQSC}) / sum([days])</p></td>
        <td><p>Sum of all sampled values of data element eMyVanycQSC from porgram IpHINAT79UW divided by the number of days in all sample periods (resulting in the overall average daily value)</p></td>
        </tr>
        <tr class="even">
        <td><p>sum(#{FTRrcoaog83}) + #{T7OyqQpUpNd}</p></td>
        <td><p>Sum of all sampled values of data element FTRrcoaog83 plus the value of data element T7OyqQpUpNd in the period being predicted for (includes all disaggregations)</p></td>
        </tr>
        <tr class="odd">
        <td><p>1.2 * A{IpHINAT79UW.RKLKz1H20EE}</p></td>
        <td><p>1.2 times the value of attribute RKLKz1H20EE of program IpHINAT79UW, in the period being predicted for</p></td>
        </tr>
        <tr class="even">
        <td><p>if(isNull(#{T7OyqQpUpNd}), 0, 1)</p></td>
        <td><p>If the data element T7OyqQpUpNd is null in the period being predicted, then 0, otherwise 1.</p></td>
        </tr>
        <tr class="odd">
        <td><p>percentileCont(0.5, #{T7OyqQpUpNd})</p></td>
        <td><p>Continuous 50th percentile of the sampled values for data element T7OyqQpUpNd. Note that this is the same as median(#{T7OyqQpUpNd})</p></td>
        </tr>
        <tr class="even">
        <td><p>if(count(#{T7OyqQpUpNd}) == 1, 0, stddevSamp(#{T7OyqQpUpNd}))</p></td>
        <td><p>If there is one sample value present for data element T7OyqQpUpNd, then 0, otherwise the sample standard deviation of these sample values. (Note that if no samples are present then the stddevSamp returns no value, so no value is predicted.)</p></td>
        </tr>
        </tbody>
        </table>

11. (Optional) Create a **Sample skip test**. The sample skip test tells which previous periods if any to exclude from the sample.

    1.  Type a **Description** of the skip test.

    2.  输入样本跳过测试表达式。您可以通过选择汇总数据的数据元素或程序数据元素、属性或指标来构建表达式。目前还不支持组织单位计数。与生成器功能一样，您可以点击（或键入）表达式字段下方的任何元素： ( ) \* / + - 日。

        上述非聚合函数也可用于跳过测试。

        The expression must evaluate to a boolean value of **true** or **false**. See **Boolean expression notes** above.

        跳过测试表达式示例：

        <table>
        <colgroup>
        <col style="width: 50%" />
        <col style="width: 50%" />
        </colgroup>
        <thead>
        <tr class="header">
        <th><p>Skip test expression</p></th>
        <th><p>Means</p></th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td><p>#{FTRrcoaog83} &gt; #{M62VHgYT2n0}</p></td>
        <td><p>The value of data element FTRrcoaog83 (sum of all disaggregations) is greater than the value of data element M62VHgYT2n0 (sum of all disaggregations)</p></td>
        </tr>
        <tr class="even">
        <td><p>#{uF1DLnZNlWe} &gt; 0</p></td>
        <td><p>The value of data element uF1DLnZNlWe (sum of all disaggregations) is greater than the zero</p></td>
        </tr>
        <tr class="odd">
        <td><p>#{FTRrcoaog83} &gt; #{M62VHgYT2n0} || #{uF1DLnZNlWe} &gt; 0</p></td>
        <td><p>The value of data element FTRrcoaog83 (sum of all disaggregations) is greater than the value of data element M62VHgYT2n0 (sum of all disaggregations) or the value of data element uF1DLnZNlWe (sum of all disaggregations) is greater than the zero</p></td>
        </tr>
        </tbody>
        </table>

12. Enter a **Sequential sample count** value.

    这是指计算应回溯多少个连续时段，以获取计算所需的数据样本。

13. Enter an **Annual sample count** value.

    这是计算应追溯到多少年以前的数据样本。

14. (Optional) Enter a **Sequential skip count** value.

    这是在对数据进行采样之前，应跳过预测值周期之前的多少个连续周期。

15. 点击**保存**。 

### 创建或编辑预测变量组 { #create_predictor_group }

1.  打开 **Maintenance** 应用程序，然后单击 **Other** （> **Predictor group**）。

2.  点击添加按钮。

3.  Type a **Name**. This field needs to be unique.

4.  (Optional) In the **Code** field, assign a code. This field needs to be unique.

5.  （可选）输入**说明**。

6.  Double-click the **Predictors** you want to assign to the group.

7.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理推送报告 { #manage_push_report }

### 关于推送报告 { #about_push_report }

推送报告使您可以提高对数据分析的认识和使用
通过将带有图表，表格和地图的报告直接发送到用户电子邮件
地址。

-   推送报告从现有仪表板获取其内容。

-   推送报告按照与仪表盘上相同的顺序列出仪表盘项目。

-   推送报告只能包含带有图表、地图或表格的仪表板项目。

-   You create the push report and its schedule in the **Maintenance** app.

-   您在**维护**应用程序中设置的**标题**和**消息** 有参数可以在每个报告中。您为报告提供的**名称**不包括在报告中。相反，应该名称用于标识系统中的分析对象。这样，报告可以为一件事，而报告的标题可以是另一件事。

-   运行推送报告任务时，系统会从所选用户组中编译一份收件人列表。然后，系统会为所选用户组的每个成员生成一份报告。每个仪表板项目都是专门为每个用户生成的。这意味着报告中包含的数据反映了用户可以访问的数据。因此，所有用户都可以获得相同的报告（如果所有数据都是 "静态 "的）或自定义报告（如果所有数据都是 "动态 "的），或两者的组合。

-   推送报告通过电子邮件发送给收件人，而不是通过内部 DHIS2 消息系统。如果用户没有有效的电子邮件，或者任务失败，则不会发送电子邮件。在这种情况下，问题会记录在服务器上。

> **注**
>
> 推送报告中生成的数据是公开的，因此请确保不包含任何敏感数据。

![](resources/images/maintainence/push_report_ex.png)

In the **Maintenance** app, you manage the following push reports objects:

<table> 
<caption>发送维护应用中的报告对象</caption> 
<colgroup> 
<col style="width: 50%" /> 
<col style="width: 50%" /> 
</colgroup> 
<thead > 
<tr class="header"> 
<th><p>对象类型</p></th> 
<th><p>可用函数</p></th> 
</tr> 
</thead> 
<tbody> 
<tr class="odd"> 
<td><p>翻译分析</p></td> 
<td><p>创建、编辑、克隆、删除、显示细节、预览和运行</p></td> 
</tr> 
</tbody> 
</table>

### 创建或编辑推送报告 { #create_push_report }

1.  打开 **Maintenance** 应用程序，然后单击 **Other** （> **Push analysis**）。

2.  点击添加按钮。

3.  在**名称** 字段中，输入计划报告的名称。

    该名称不包含在报告电子邮件中。相反，该名称用于识别系统中的推送分析对象。

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  添加报告**标题**。

    该标题包含在报告电子邮件中。

6.  （可选）添加**消息**。

    此消息包含在报告电子邮件中。

7.  选择一个 **仪表板** 作为报告的基础。

8.  选择并分配您要向其发送报告的用户组。

9.  Select a **Scheduling frequency**: **Daily**, **Weekly** or **Monthly**.

    > **Note**
    >
    > If you schedule a push report to "Monthly" and "31", the scheduled report job will not run if the month has less than 31 days.

10. （可选）选择**启用**以激活推送报告作业。

    作业只有激活后才能运行。

11. 点击**保存**。 

### 预览推送报告 { #preview_push_report }

1.  打开 **Maintenance** 应用程序，然后单击 **Other** （> **Push analysis**）。

2.  在推送报告列表中，找到要预览的推送报告。

3.  单击选项菜单并选择**预览**。

    推送报告的预览在新窗口中打开。

### 运行推送报告作业 { #run_push_report }

1.  打开 **Maintenance** 应用程序，然后单击 **Other** （> **Push analysis**）。

2.  在推送报告列表中，找到要运行的推送报告。

3.  单击选项菜单并选择 **立即运行**。

    推送报告作业立即运行。

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理外部地图图层 { #manage_external_maplayer }

### 关于外部地图图层 { #about_gis_map_layers }

您可以通过包含来自各种来源和
将它们与您在DHIS2中的数据结合起来。 DHIS2支持通用地图
服务格式，例如Web Map Service（WMS），Tile Map Service（TMS）
和XYZ磁贴。

### 创建或编辑外部地图图层 { #create_external_map_layer }

> **注**
>
> DHIS2 仅支持网络墨卡托投影（[EPSG:3857](https://epsg.io/3857)），因此请确保外部服务支持该投影。

<table> 
<caption>维护应用中的外部地图图层对象</caption> 
<colgroup> 
<col style="width: 50%" /> 
<col style="width: 50%" /> 
</colgroup> 
<thead> 
<tr class="header"> 
<th><p>对象类型</p></th> 
<th><p>可用函数</p></th> 
</tr> 
</thead> 
<tbody> 
<tr class="odd"> 
<td><p>外部地图层</p></td> 
<td><p>创建、编辑、克隆、删除、显示细节和翻译</p > </td> 
</tr> 
</tbody> 
</table>

1.  打开**维护**应用程序，点击**其他** （> **外部地图层**。

2.  点击添加按钮。

3.  在 **Name** 字段中，输入描述外部地图层内容的名称。 

    这是您将在 **Maps** 应用程序中看到的名称。 

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  选择 **地图服务** 格式。 

    DHIS2支持三种常见的地图服务格式：

    -   网络地图服务（WMS）

        **图像格式**：PNG 格式允许图层透明，JPG 格式提供更好的压缩效果，通常加载速度更快。

        **图层**：一个 WMS 可以包含多个单独的图层，您可以指定要包括哪些图层（用逗号分隔）。请参阅 WMS GetCapabilities 文档查看可用图层。

    -   平铺地图服务（TMS）

    -   XYZ磁贴（也可用于WMTS）

6.  输入地图服务的**URL**。

    > **Note**
    >
    > XYZ and TMS URLs must contain placeholders {}, for example: http://{s}.tile.osm.org/{z}/{x}/{y}.png.

7.  （可选）输入地图图层的**来源**。如果您想链接到源，该字段可以包含 HTML 标记。

    当您使用外部地图服务时，必须强调数据的来源。

8.  选择一个**放置**：

    -   **底部 - 底图**：对于 "地图 "应用程序，这将使外部地图层可被选作底图（即作为 DHIS2 底图的替代）。

    -   **顶部 - 叠加**：对于 "地图 "应用程序，这允许从 "添加图层 "选择中添加外部地图，并将其放置在基础地图上方的任何位置。

9.  （可选）添加图例。

    您可以通过两种方式添加图例：

    -   选择预定义的 **Legend** 来描述地图图层的颜色。

        > **Tip**
        >
        > Click **Add new** to create legends that you're missing. In the form that opens, create the legends you need. When you're done, click **Refresh values**.

    -   在 **图例图像URL** 中输入指向外部图像图例的链接。

        这些通常是为 WMS 提供的。请参阅 WMS GetCapabilites 文档中的 LegendURL。

10. 点击**保存**。 

### 克隆元数据对象 { #clone_metadata }

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开 **维护** 应用程序并找到要克隆的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects }

> **Note**
>
> You can only delete a data element and other data element objects if no data is associated to the data element itself.

> **Warning**
>
> Any data set that you delete from the system is irrevocably lost. All data entry forms, and section forms which may have been developed will also be removed. Make sure that you have made a backup of your database before deleting any data set in case you need to restore it at some point in time.

1.  打开**维护**应用程序并找到您要删除的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects }

1.  打开 **维护** 应用程序并找到您要查看的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**显示详细信息**。 

### 翻译元数据对象 { #translate-metadata-objects }

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **提示** 
> 
> 要激活翻译，请打开 **系统设置** 应用程序，单击 \> > **外观** 并选择一种语言。 

1.  打开 **维护** 应用程序并找到您要翻译的元数据对象的类型。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理SQL视图 { #maintenance_sql_view }

DHIS2的SQL View功能将存储SQL视图定义
内部，然后在需要时实例化视图。

数据库管理员在创建数据库视图时必须小心
直接在DHIS2数据库中。例如，当资源表
生成，所有这些都将首先被删除然后重新创建。如果
任何SQL视图都依赖于这些表，完整性违规异常
将被抛出并且该过程将被中止。

SQL视图基于它们的反向字母顺序删除
DHIS2中的名称，并按常规字母顺序创建。这允许
您要在SQL视图之间具有依赖关系，因为视图仅取决于
其他按字母顺序排列的观点。对于
例如，“ ViewB”可以安全地依赖于“ ViewA”。否则，有意见
取决于其他视图会导致完整性违规错误。

### 创建一个新的SQL视图 { #creating-a-new-sql-view }

要创建新的 SQL 视图，请单击 **Apps** \> **维护** \> **其它** \> **SQL View** 并单击 添加 **+** 按钮。

![](resources/images/maintainence/create_sql_view.PNG)

SQL视图的“名称”属性将用于确定名称
当视图实现时，DHIS2将创建的表的
用户。 “描述”属性允许提供一些描述性的
有关SQL视图实际功能的文本。最后，“ SQL查询”
应该包含SQL视图定义。只有SQL“ SELECT”语句是
允许，某些敏感表（即用户信息）不是
可访问按“保存”以存储SQL视图定义。

请记住，使用 SELECT 语句返回的列将成为表列，这意味着它们必须是有效的表列类型。在使用函数时，可能需要在函数后添加 `::{TYPE}`，明确地将结果转换为一种类型。

例如，使用 `jsonb_each_text` 代替 `jsonb_each`（这将返回一个不能是列类型的记录类型）并将结果转换为 `text`，如下例所示：

```sql
select jsonb_each_text(eventdatavalues)::text from ...
```

### SQL视图管理 { #sql-view-management }

为了利用SQL视图，只需点击视图，然后从
在上下文菜单中，选择“执行查询”。该过程完成后，您将
系统将通知您已创建一个表。表格名称
将由“描述”属性提供
在SQL视图定义中提供。生成视图后，
您可以通过再次单击视图并选择“显示SQL
视图”。

> **提示**
>
> 如果某个视图依赖于另一个视图，则应注意视图的命名方式。在 DHIS2 服务器上运行分析时，必须删除并重新创建所有视图。当分析开始时，视图会按字母顺序丢弃，然后按相反的字母顺序重新创建。因此，如果视图 A 依赖于视图 B，它必须按字母顺序出现在视图 B 之前。如果它按字母顺序出现在视图 B 之后，分析可能会失败，因为有依赖关系的视图不会按正确顺序丢弃。

## 管理语言环境 { #maintenance_locale_management }

可以在DHIS2中创建自定义语言环境。除了
系统提供的语言环境，您可能需要添加自定义
系统的语言环境（例如“英语”和“赞比亚”）。这将允许
您可以将元数据对象翻译成本地语言，或解决
使用共同元数据的国家之间的细微差异
定义。

![](resources/images/maintainence/locale_management.png)

语言环境由语言和国家/地区组成。选择
所需的值，然后按“添加”。此自定义语言环境现已可用
作为系统中的翻译语言环境之一。

## 一次编辑多个对象组 { #edit_multiple_object_groups }

**维护**应用程序中的**元数据组编辑器**可让您
同时编辑多个对象组。您可以编辑以下内容
对象类型：

<table> 
<caption>元数据组编辑器中的对象类型</caption> 
<colgroup> 
<col style="width: 50%" /> 
<col style="width: 50%" /> 
</colgroup> 
<thead> 
<tr class="header"> 
<th><p>对象类型</p></th> 
<th><p>可用函数</p></th> 
</tr> 
</thead > 
<tbody> 
<tr class="odd"> 
<td><p>类别选项</p></td> 
<td></td> 
</tr> 
<tr class="even"> 
<td> <p>类别选项组</p></td> 
<td></td> 
</tr> 
<tr class="odd"> 
<td><p>数据元素</p></td> 
<td><p>将一个数据元素添加到多个数据元素组</p> 
<p>从多个数据元素组中删除一个数据元素</p></td> 
</tr> 
<tr class="even"> 
<td><p>数据元素组</p></td>
<td><p>将多个数据元素添加到一个数据元素组</p> 
<p>从一个数据元素组中删除多个数据元素</p></td> 
</tr> 
<tr class ="odd"> 
<td><p>指标</p></td> 
<td><p>将一个指标添加到多个指标组</p> 
<p>从多个指标组中删除一个指标</p></td> 
</tr> 
<tr class="even"> 
<td><p>指标组</p></td> 
<td><p>将多个指标添加到一个指标组</p> 
<p>从一个指标组中删除一些指标</p></td> 
</tr> 
</tbody> 
</table>

### 编辑对象组中的多个对象 { #edit-multiple-objects-in-an-object-group }

1.  打开 **维护** 应用程序并单击 **元数据组编辑器**。

2.  单击**管理组中的项目**。 

3.  选择对象组类型，例如**指示器组**。

4.  选择一个对象组，例如** HIV **。

5.  在左侧列表中，选择要添加到对象组的对象，然后单击向右箭头。

6.  在右侧列表中，选择要从对象组中删除的对象，然后单击向左箭头。

### 编辑多个对象组中的一个对象 { #edit-an-object-in-multiple-object-groups }

1.  打开 **维护** 应用程序并单击 **元数据组编辑器**。

2.  单击**管理组条目**。

3.  选择一个对象类型，例如**指标**。

4.  选择一个对象，例如 **ANC LLITN 覆盖范围**。 

5.  在左侧列表中，选择要添加对象的对象组，然后单击向右箭头。

6.  在右侧列表中，选择要移除对象的对象组，然后单击向左箭头。
