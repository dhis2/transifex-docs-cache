---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/2.39/src/user/configure-metadata.md"
revision_date: '2022-10-28'
tags:
- DHIS core version 2.39
- 使用
---

# 配置元数据 { #maintenance_app } 

## 关于维护应用 { #about_maintenance_app } 

在**维护**应用程序中，您可以配置所需的所有元数据对象。
收集和分析数据所需的所有元数据对象：

  - 分类目录

  - 资料元素

  - 数据集和数据输入表格

  - 指标

  - 组织单位

  - 程序元数据：跟踪的实体，跟踪的实体属性和
    关系类型

  - 验证规则

  - 属性

  - 常数

  - 选项集

  - 传说

  - 预测变量

  - 推送报告

  - 外部地图图层

> **注意**
>
>您有权访问的功能取决于用户角色的访问权限
>权限。



### 导航元数据对象 { #navigating_metadata } 

元数据对象以列表的形式显示，其中包含与每个对象相关的预定义列。
您可以自定义当前对象列表中显示的列。这些自定义是针对每个用户的，因此不会影响其他用户。请注意，这些更改不会编辑任何元数据，只会编辑列表的显示方式。

#### 管理可见列 { #managing-visible-columns } 

![](resources/images/maintenance/configurable_columns_dialog.png)

1. 单击要配置的对象列表右上方的![](resources/images/maintenance/icon_settings.png) 图标。
2. A dropdown-menu will appear, select **Manage columns**.
3. 将出现一个对话框，并选择默认列。
3. Click any column-name in the list of **Available columns** to add them to the list of selected columns.
4. 您可以通过拖放![](resources/images/maintenance/icon_reorder.png) 图标来重新排列所选列的顺序。
5. 您也可以通过单击名称旁边的X图标，从视图中删除任何列。
6. Click **Save** once you are satisified with your changes.

You may easily reset to the default values by clicking the **Reset to default** button.

##### 下载元数据 { #download-metadata } 

您可以下载当前正在查看的对象的元数据。元数据下载将遵守您对该列表有效的所有过滤器。

1. 单击要配置的对象列表右上方的![](resources/images/maintenance/icon_settings.png) 图标。
2. 将会出现一个下拉菜单，选择**下载**。
3. 将出现一个对话框，您可以在其中选择所需的格式和压缩率。
4. 可以选择**具有共享**以包括元数据的共享数据。

## 管理类别 { #manage_category } 

### 关于类别 { #about_category } 

类别通常是一个概念，例如“性别”，“年龄”或“
“疾病状态”。数据元素，例如“已确认病例数
疟疾”通常分为较小的组成部分，以便确定
例如，已确认的特定年龄组的疟疾病例数。

使用类别将数据元素分解为单个组件。
您还可以使用类别为所有数据分配元数据属性
记录在特定的数据集中，例如“实施伙伴”或
“资金代理机构。”

创建三个类别：“ 1岁以下”，“ 1-5”和“ 5岁以上”。将它们分配为
数据元素的类别。这将为创建三个单独的字段
此数据以数据输入形式：

  - 确诊的疟疾病例数（1岁以下）

  - 确诊的疟疾病例数（1-5）

  - 确诊的疟疾病例数（5例以上）

没有类别，您将不得不创建每个数据
上面单独列出的元素。

在**维护**应用程序中，您可以管理以下对象和类别
对象：



表格：维护应用程序中的类别对象

| 对象类型 | 可用功能 |
|---|---|
| 类别选项 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 类别 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 类别组合 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 类别选项组合 | 编辑和显示详细信息 |
| 类别选项组 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 类别选项组设置 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |

### 工作流程 { #workflow_category } 

1.  创建所有类别选项。

2.  创建由您拥有的多个类别选项组成的类别
    创建。

3.  创建由一个或多个组成的类别组合
    类别。

4.  创建数据元素并将其分配给类别组合。

### 创建或编辑类别选项 { #create_category_option } 

如果可能，请回收类别选项。例如，可能有
可能共享特定类别选项的两个类别（对于
例如\ <1岁）。创建类别时，此类别
选项可以重复使用。如果特定类别选项很重要
（或类别选项组合）需要一起分析。

1.  打开 **Maintenance** 应用程序，点击 **Category** （> **Category
    选项**。

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **开始日期**（可选）

    3.  **结束日期**（可选）

    4.  **简称**（可选）

    4.  **代码**（可选）

    5.  **表格名称**（可选）  
        类别选项可以有一个表格名称。这些名称将显示在
        数据录入应用程序的列标题，而不是显示名称。
        相应类别选项。

4.  选择组织单位并分配它们。

    > **Tip**
    >
    > You can automatically select all organisation units that belong to
    > an organisation unit level or organisation unit group, for example
    > "Chiefdom" or "Urban. To do this:
    >
    > Select an **Organisation unit level** or **Organisation unit
    > group** and click **Select**.

5.  点击**保存**。 

### 创建或编辑类别 { #create_category } 

为特定类别创建所有类别选项后，
您可以创建该类别。

1.  Open the **Maintenance** app and click **Category** \> **Category**.

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **码**

    3.  **数据维度类型**

        类别可以是“分类”或“属性”类型。
        要分解数据元素，请选择
        **分类**。数据维度类型“属性”允许
        用于将类别组合分配给的类别
        通过数据集记录的数据。

    4.  **数据尺寸**

        如果选择 "**数据维度**"，类别将可用
        除了其他方面，
        “期间”和“组织单位”的标准尺寸。

4.  选择类别选项并分配它们。

5.  点击**保存**。 

### 创建或编辑类别组合 { #create_category_combination } 

类别组合可让您将多个类别组合成一个
相关集。

您可以分解数据元素“新感染艾滋病毒的数量”
分为以下几类：

  - 艾滋病毒服务：“其他”，“ PMTCT”，“结核病”

  - 性别：“男”，“女”

在此示例中，有两个分解级别，包括
两个单独的数据元素类别。每个数据元素类别包括
几个数据元素类别选项。

在DHIS2中，根据
常见的一组类别。通过将这些不同的类别合并为一个
类别组合并将这些组合分配给数据元素，
您可以将适当的分类级别快速应用于大型
数据元素数。

1.  打开 **Maintenance** 应用程序，点击 **Category** （> **Category
    组合**。

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **码**

    3.  **数据维度类型**

    4.  **报告中的跳过类别总计**

4.  选择类别并分配它们。

5.  点击**保存**。 

### 创建或编辑类别选项组 { #create_category_option_group } 

您可以使用类别选项对类别选项进行分组和分类
组。类别选项组集的主要目的是添加更多
您捕获的数据的维数，以便在例如
**数据透视表**或**数据可视化器**应用。

考虑一个由“项目”收集数据并为项目建模的系统
作为类别选项。系统必须能够基于
哪个捐助者支持该项目。在这种情况下，创建一个类别
选项组集称为“捐赠者”。每个捐赠者都可以创建为一个类别
选项组，其中每个类别选项/项目都放在
适当的组。在数据分析应用程序中，“捐赠者”组
集将显示为数据维度，而每个供体显示为
尺寸项目，准备包含在报告中。

要创建类别选项组：

1.  打开 **Maintenance** 应用程序，点击 **Category** （> **Category
    选项组**。

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **短名称**：为数据元素定义一个短名称。

    3.  **码**

    4.  **数据维度类型**

4.  选择**类别选项**并分配它们。

5.  点击**保存**。 

### 创建或编辑类别选项组集 { #create_category_option_group_set } 

您可以将类别选项组分组在类别选项组集中。的
类别选项组集的主要目的是添加更多
您捕获的数据的维数，以便在例如
**数据透视表**或**数据可视化器**应用。

1.  打开 **Maintenance** 应用程序，点击 **Category** （> **Category
    选项组集**。

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **描述**

    3.  **数据尺寸**

    4.  **数据维度类型**

4.  Select **Category option groups** and assign them.

5.  点击**保存**。 

### 对数据集使用类别组合 { #use_category_combo_for_data_set } 

当类别和类别组合具有数据维类型时
“属性”，他们可以将一组通用属性应用于相关的一组
包含在数据集中的数据值。当类别组合为
用作属性，它们用作另一个维度（类似于
您可以在分析中使用的“期间”和“组织单位”。

假设非政府组织在给定的设施中提供ART服务。他们
需要每个月在“ ART每月摘要”中进行报告，
将包含许多数据元素。非政府组织和项目可以
可能会随着时间而改变。为了将数据归因于给定的NGO
和项目在任何时间点，您需要记录此信息
在输入数据时使用每个数据值。

1.  使用数据维度类型“属性”创建两个类别：
    “实施伙伴”和“项目”。

2.  创建具有数据维类型的类别组合
    “属性”：“实施合作伙伴和项目”。

3.  将您创建的类别分配给类别组合。

4.  创建一个称为“ ART每月摘要”的数据集，然后选择
    “实施合作伙伴和项目”类别组合。

在**数据录入**应用程序中输入数据时，您可以选择 "实施伙伴 "和 "项目"。
"实施伙伴 "和 "项目"。每个记录的数据值
指定这些类别的特定组合作为属性。
这些属性（指定为维度时）可在分析应用程序中使用，类似于其他维度。
分析应用程序中使用，类似于其他维度，例如
期间和组织单位。

![](resources/images/maintenance/categories_dataset_attributes.png)

### 将代码分配给类别选项组合 { #assign_code_category_option_combo } 

您可以将代码分配给类别选项组合。这使得数据
DHIS2与外部系统之间的交换更加容易。系统创建
类别选项组合自动。

1.  打开 **Maintenance** 应用程序，点击 **Category** （> **Category
    选项组合**。

2.  在列表中，找到要修改的对象。

3.  点击选项菜单，然后选择**编辑**。

4.  输入验证码。

5.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects } 

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
>默认设置是所有人（**公共访问权限**）都可以找到，
>查看和编辑元数据对象。

1.  打开**维护**应用程序，找到元数据对象类型
    您要修改。

2.  在对象列表中，单击右键菜单并选择 **共享
    设置**。

3.  （可选）添加用户或用户组：搜索一个或多个用户
    分组并选择它。用户或用户组已添加到列表中。

4.  更改要修改的访问组的共享设置。

      - **可以编辑和查看**：访问组可以查看和编辑
        目的。

      - **只能查看**：访问组可以查看对象。

      - **禁止访问**（仅适用于**公共访问**）：公众
        将无法访问该对象。

5.  更改您要访问的访问组的数据共享设置
    修改。

      - **可以捕获数据**：访问组可以查看和捕获数据
        为对象。

      - **可以查看数据**：访问组可以查看以下数据：
        目的。

      - **无访问权限**：访问组将无法访问以下数据：
        物体。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理数据元素 { #manage_data_element } 

### 关于数据元素 { #about_data_element } 

数据元素是DHIS2的基础。数据元素定义什么
实际记录在系统中，例如免疫接种次数或
疟疾病例数。

诸如“确诊疟疾病例数”之类的数据元素通常
分解成较小的组成部分，例如确定
特定年龄段已确诊的疟疾病例数。

在**维护**应用程序中，您可以管理以下数据元素
对象：



表：维护应用程序中的数据元素对象

| 对象类型 | 可用功能 |
|---|---|
| 数据元素 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 数据元素组 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 数据元素组集 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |

### 工作流程 { #workflow_data_element } 

1.  创建所有类别选项。

2.  创建由您拥有的多个类别选项组成的类别
    创建。

3.  创建由一个或多个组成的类别组合
    类别。

4.  创建数据元素并将其分配给类别组合。

### 创建或编辑数据元素 { #create_data_element } 

![](resources/images/maintenance/create_data_element.png)

1.  打开**维护**应用程序，点击**数据元素** \> **数据
    元件**。

2.  点击添加按钮。

3.  In the **Name** field, define the precise name of the data element.

    每个数据元素必须具有唯一的名称。

4.  在**简短名称**字段中，定义数据的简短名称
    元件。

    通常，简称是完整数据的缩写
    元素名称。此属性通常用于报表中以显示
    数据元素的名称，其中空间有限。

5.  （可选）在 **Code** 字段中，分配一个代码。 

    在许多国家/地区，为数据元素分配了代码。

6.  (可选） 在**颜色**字段中，指定将使用的颜色
    数据捕获应用程序中的此数据元素。

7.  (可选） 在**图标**字段中，指定一个将使用的图标
    数据捕获应用程序中的此数据元素。

8.  在**描述**字段中，键入数据描述
    元件。尽可能精确并包含完整的信息
    关于如何测量数据元素以及其目的是什么。

8. (可选）在**字段掩码**字段中，您可以键入一个模板，用于提供
   提示数据元素的正确格式。

     > **NOTE**
     >
     > So far this is only implemented in the DHIS2 Android Capture app; not in the Capture and Tracker Capture web apps.

   以下是可在遮罩中使用的特殊字符。特殊字符与给定类型的一个字符完全匹配。

   |性格匹配|
   | ------------- | ---------------- |
   | \\ d |数字|
   | \\ x |小写字母|
   | \\ X |大写字母|
   | \\ w |任何字母数字字符|

   例如，该模式可用于在数据元素的输入字段中根据需要显示连字符。例如“ \ d \ d \ d- \ d \ d \ d- \ d \ d \ d，
   每三位数显示一个连字符。

9.  在**表格名称**字段中，键入数据的替代名称
    元件。此名称可以在部分或自动数据中使用
    报名表。表单名称将自动应用。

10. In the **Domain type** field, select whether the data element is an
    数据元素的聚合或跟踪器类型。

11. 在**值类型**字段中，选择数据的类型。
    元素将记录。



    表：值类型

    | 值类型
    |---|---|
    | 年龄
    | 坐标 | 以十进制度表示的经度和纬度点坐标。所有坐标都应以"-19.23 , 56.42 "格式指定，经度和纬度之间用逗号隔开。|
    | 日期 | 在数据输入中以日历部件形式显示的日期。|
    | 日期和时间 | 是 **DATE** 和 **TIME** 数据元素的组合。|
    | 电子邮件|
    | 文件 | 可以存储外部文件（如文档和照片）的文件资源。|
    | 图片 | 用于存储照片的文件资源。<br>   <br>与 **FILE** 数据元素不同，**IMAGE** 数据元素可在表单中直接显示上传的图片。|
    | 整数 | 任何整数（正数和负数），包括零。|
    | 字母 | 单个字母。|
    | 长文本 | 文本值。渲染为文本区域，表格中没有长度限制。|
    | 负整数 | 任何小于（但不包括）零的整数。|
    | 数字 | 任何带小数点的实数值。不支持千位分隔符和科学记数法。|
    | 百分比 | 0 到 100 之间的整数。|
    | 电话号码 | 电话号码。|
    | 正整数 | 任何大于（但不包括）0 的整数。|
    | 正整数或零整数 | 任何正整数，包括零。|
    | 组织单位 | 组织单位以层次树 widget 的形式呈现。<br>   <br>如果用户指定了 "搜索组织单位"，则将显示这些组织单位，而不是指定的组织单位。|
    | 单位间隔 | 任何大于等于 0 且小于等于 1 的实数。|
    | 文本 | 文本值。每个值允许的最大字符数为 50,000。|
    | 时间 | 时间以 HH:mm 格式存储。<br>   <br>HH 是介于 0 和 23 之间的数字<br> <br> mm 是介于 00 和 59 之间的数字。
    | Tracker associate | 跟踪实体实例。显示为带有跟踪实体实例列表和搜索字段的对话框。|
    | 用户名 | DHIS2 用户。显示为包含用户列表和搜索字段的对话框。用户需要有 "查看用户 "权限才能使用该数据类型。
    | 布尔值，在数据输入时显示为下拉列表。|
    | 仅是 | 真值，在数据录入中显示为复选框。|

12. 在**聚合类型**字段中，选择默认聚合
    将在数据元素上使用的操作。

    大多数数据元素应具有** Sum **运算符。这包括
    所有应加在一起的数据元素。其他资料
    人员等级别的元素应设置为使用
    ** Average **运算符，当沿时间维度的值应
    不加在一起，而是取平均值。



    表格聚合运算符

    | 聚合操作符 | 说明 |
    |---|---|
    | 平均 | 将期间和组织单位两个维度的值进行平均。|
    | Average (sum in organisation unit hierarchy) 平均（组织单位层次中的和） | 期间维度中数据值的平均值，组织单位维度中的和。|
    | 计数 | 数据值的计数。|
    | 数据值的最小值。|
    | 数据值的最大值。|
    | None | 在任何维度中都不执行聚合。|
    | Sum | 期间和组织单位维度中数据值的总和。|
    | 标准偏差 | 数据值的标准偏差（基于人口）。|
    | 数据值的方差（基于人口）。|

13. 如果您出于特定原因要保存零，请选择**存储
    零数据值**。默认情况下，DHIS2不存储输入的零
    在数据输入模块中。

14. 在**URL**字段中，输入一个链接，以深入描述
    数据元素。

    例如，指向元数据存储库或注册表的链接
    包含有关定义的详细技术信息，以及
    数据元素的测量。

15. 在**类别组合**字段中，定义哪个类别
    数据元素应具有的组合。这也称为
    “分类”。

16. 选择**选项集**。

    选项集是选项的预定义列表，可用于
    数据输入。

17. Select an **Option set for comments**.

    注释的选项集是预定义的选项列表，可以
    用于指定数据中数据值的标准化注释
    条目。

18. 分配一个或多个**传奇**。

    图例用于** Maps **应用中，以显示某些
    带有某些图标的数据元素。

19. 设置**聚合级别**，以允许数据元素被
    汇总在一个或多个级别：

    1.  在左窗格中，选择要分配给
        数据元素。

    2.  单击右箭头以指定聚合级别。

    默认情况下，聚合将从分配的最低点开始
    组织单位。例如，如果您选择“ Chiefdom”，则表示
    “酋长”，“地区”和“国家”聚合使用
    作为数据的“首要”（可用的最高聚合级别）
    源，PHU数据将不包括在内。 PHU数据仍将是
    可用于PHU级别，但不包括在
    以上级别。

    如果您同时选择“地区”和“首席”，则表示
    “地区”和“国家”级别汇总使用地区数据作为
    他们的来源是“酋长”将使用“酋长国”，“ PHU”将使用PHU。

20. 如果适用，请输入自定义属性值，例如
    **分类**或**收集方法**。

    > **Note**
    >
    > You create custom attributes in the **Maintenance** app: **Other**
    > \> **Attributes**.

21. 如果适用，请选择强制性数据元素组集，用于
    例如**主数据元素组**或**基于跟踪器的数据**。

    > **Note**
    >
    > You'll only see data element group sets in this form if you've
    > created them and set them to **Compulsory**.
    >
    > You create data element group sets in the **Maintenance** app:
    > **Data element** \> **Date element group set**.

22. 点击**保存**。 

### 创建或编辑数据元素组 { #create_data_element_group } 

数据元素组可让您将相关数据元素分类为
共同的主题。例如，两个数据元素“麻疹免疫”和
“ BCG免疫”可以分组为一个数据元素组
“儿童免疫”。

要创建数据元素组：

1.  打开**维护**应用程序，点击**数据元素** \> **数据
    元素组**。

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**

    2.  **简称**

    3.  **码**

4.  选择数据元素并分配它们。

5.  点击**保存**。 

### 创建或编辑数据元素组集 { #create_data_element_group_set } 

数据元素组集可让您对多个数据元素进行分类
组成一组。系统在以下过程中使用数据元素组集
分析和报告，以将相似的数据元素组合并为一个
共同的主题。一个数据元素组可以是多个数据元素的一部分
组集。

1.  打开**维护**应用程序，点击**数据元素** \> **数据
    元素组集**。

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**
    2.  **简称**
    3.  **码**
    4.  **描述**
    5.  **必修**
    5.  **数据尺寸**

4.  选择数据元素组并分配它们。

    可用的数据元素组显示在左侧面板中。数据
    当前是数据元素组成员的元素组
    设置显示在右侧面板中。

5.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects } 

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
>默认设置是所有人（**公共访问权限**）都可以找到，
>查看和编辑元数据对象。

1.  打开**维护**应用程序，找到元数据对象类型
    您要修改。

2.  在对象列表中，单击右键菜单并选择 **共享
    设置**。

3.  （可选）添加用户或用户组：搜索一个或多个用户
    分组并选择它。用户或用户组已添加到列表中。

4.  更改要修改的访问组的共享设置。

      - **可以编辑和查看**：访问组可以查看和编辑
        目的。

      - **只能查看**：访问组可以查看对象。

      - **禁止访问**（仅适用于**公共访问**）：公众
        将无法访问该对象。

5.  更改您要访问的访问组的数据共享设置
    修改。

      - **可以捕获数据**：访问组可以查看和捕获数据
        为对象。

      - **可以查看数据**：访问组可以查看以下数据：
        目的。

      - **无访问权限**：访问组将无法访问以下数据：
        物体。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理数据集和数据输入表单 { #manage_data_set } 

### 关于数据集和数据输入表格 { #about_dataset_dataform } 

DHIS2 中的所有数据录入都以数据集为单位。数据集是
数据集是数据元素的集合，用于数据录入和 DHIS2 实例之间的数据导出。
DHIS2 实例之间的数据导出。要使用数据集为
要使用数据集收集特定组织单位的数据，您必须将该组织单位分配给
数据集。一旦您将数据集分配给一个组织单位
单位，该数据集就可在**数据录入**应用程序中使用。只有
数据集的组织单位才能使用该数据集进行数据录入。
数据集进行数据录入。

类别组合可以链接到数据元素和数据集。如果
您将类别组合用于数据集，类别组合
适用于整个表格。这意味着您可以使用类别
捕获整个表格共有的信息，例如
项目或拨款的名称。当数据集链接到
类别组合，这些类别将显示为下拉列表
**数据输入**应用中的框。表格中捕获的数据将被
链接到从这些下拉框中选择的类别选项。对于
有关如何创建类别和类别组合的信息，
请参阅“管理数据元素和类别”一节。确保你
将类别和类别组合的类型设置为“属性”。

类别有用的一种情况是您需要捕获一个类别
实施伙伴组织和项目的数据输入表。
在这种情况下：

1.  为所有合作伙伴组织创建类别选项和类别
    和项目，并将它们链接到新的类别组合中。

2.  将类别组合分配给要为其的数据集（窗体）
    需要捕获此信息。

    在数据输入模块中打开此数据集时，伙伴
    组织和项目类别将自动呈现
    作为下拉框，允许您选择特定的实施
    合作伙伴组织和项目，然后继续进行数据输入。

您可以在**维护**应用程序中创建和编辑数据集。在这里
例如，您要在数据集中定义哪些数据元素以及数据收集频率。
和数据收集频率。

You enter data in the **Data entry** app. The **Data entry** app uses
data entry forms to display the data sets. There are three types of data
entry forms:



表格数据输入表格类型

| 数据输入表格类型 | 描述 |
|---|---|
| 默认表格 | 将数据集分配给组织单位后，会自动创建一个默认表单。默认表格可在 ** 数据录入** 应用程序中使用，适用于您为其分配的组织单位。<br> <br>默认表格由属于数据集的数据元素列表和用于输入数值的列组成。如果您的数据集包含非默认类别组合的数据元素，例如年龄组或性别，则会根据不同的类别在默认表格中自动创建附加列。<br> <br>如果使用一个以上的类别组合，默认表格中就会出现多个列，并为选项设置不同的列标题。 |
| 科室表格 | 如果默认表单不能满足你的需求，你可以修改它来创建一个分节表单。在使用表格表单时，分节表单会给你更大的灵活性。<br> <br>例如，在分节表单中，你可以创建带有小标题的多个表格，也可以禁用表格中的单元格（使其变灰）。<br> <br>在数据集中添加分节表单后，分节表单就可以在**数据录入**应用程序中使用。 |
| 自定义表格 | 如果要设计的表单过于复杂，无法使用默认表单或分节表单，可以创建自定义表单。创建自定义表单比创建分节表单花费更多时间，但你可以完全控制设计。<br> <br>例如，你可以用自定义表单模仿现有的纸质汇总表单。这样可以使数据输入更容易，并减少错误输入数据元素的数量。<br> <br>在数据集中添加自定义表单后，自定义表单就可以在**数据录入**应用程序中使用。 |

> **注意**
>
>如果数据集同时具有部分表单和自定义表单，则系统
>在数据输入期间显示自定义表格。输入数据的用户不能
>选择他们要使用的表格。在基于Web的数据输入中的顺序
>显示首选项：
>
> 1.自定义表单（如果存在）
>
> 2.部分表格（如果存在）
>
> 3.默认格式
>
>移动设备不支持自定义表格。在基于移动的数据输入中
>显示首选项的顺序为：
>
> 1.部分表格（如果存在）
>
> 2.默认格式

In the **Maintenance** app, you manage the following data set objects:



表格维护应用程序中的数据集对象

| 对象类型 | 可用功能 |
|---|---|
| 资料集 | 创建、分配给组织单位、编辑、共享、删除、显示详细信息和翻译 <br> <br> 编辑强制性数据元素 <br> <br> 一次向组织单位添加和删除多个数据集 |
| 科室表格 | 创建、编辑和管理灰色字段 |
| 部门 | 更改显示顺序、删除和翻译 |
| 自定义表格 | 创建、编辑和编写脚本 |

### 工作流程 { #workflow_data_set } 

您需要具有数据元素和类别才能创建数据集和
数据输入表格。

1.  创建一个数据集。

2.  将数据集分配给组织单位。

    默认形式是自动创建的。

3.  创建节形式或自定义形式。

    Now you can register data in the **Data entry** app.

### 创建或编辑数据集 { #create_data_set } 

![](resources/images/datasets/data_set_create.png)

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  点击添加按钮。

3.  In the **Name** field, type the precise name of the data set.

4.  In the **Short name** field, define a short name for the data set.

    通常，简称是完整数据集的缩写
    名称。此属性通常用于显示数据名称
    设置空间有限的地方。

5.  （可选）在 **Code** 字段中，分配一个代码。 

6.  In the **Description** field, type a description of the data set.

7.  Enter the number of **Expiry days**.

    到期天数控制应该持续多长时间
    可以在**数据录入**应用程序中为该数据集输入数据。
    到期天数指的是结束日期之后的天数
    选定的数据输入期间，应打开数据输入表单
    进入。天数到期后，数据集将
    被锁定以进一步进入。

    您可以使用锁定异常为此设置手动异常
    functionality in the **Data Administration** app.

    > **Note**
    >
    > To allow data entry into all possible historical time periods, set
    > the number of expiry days to zero.

8.  如果希望将来可以输入数据，请键入
    **开放将来的数据输入期间**中的期间数
    领域。

    该值是可用于
    数据输入。

    对于每月数据集，值2允许您输入2的数据
    提前几个月。例如，这对于人口有用，
    目标和计划数据。

9.  In the **Days after period to qualify for timely submission** field,
    输入可以输入数据的天数
    考虑及时报到。

    要核实及时提交的报告数量，请访问 **报告**
    \> **报告率摘要**。

10. Select a **Period type**.

    期间类型定义了报告的频率
    特定的数据集。例如，频率可以是每天
    每季度或每年。

11. Select a **Category combination** to assign it to the data set.

    > **Tip**
    >
    > Click **Add new** to create category combinations that you're
    > missing. In the form that opens, create the category combinations
    > you need. When you're done, click **Refresh values**.

12. 如果您选择的类别组合不是 **无**、
    您可以在**开放时间之后输入零或正数
    类别选项的结束日期**。这使您可以在此数据中输入数据
    为类别选项设置最多指定的周期数
    该类别选项的结束日期之后。

13. 在**完整的通知接收者**列表中，选择一个用户
    数据集标记为时应接收消息的组
    在**数据录入**应用程序中完成。

    该消息是通过DHIS2消息传递系统传递的。

14. 如果您希望输入数据的用户在以下情况下收到消息
    在**数据录入**应用程序中将数据集标记为已完成，选择
    **发送通知给完成用户**。

    该消息是通过DHIS2消息传递系统传递的。

15. If applicable, select, a **Data approval workflow**.

16. 如果您希望可以在Java中使用数据集
    移动 DHIS2 应用程序时，选择 ** 启用 Java 移动客户端**。

17. 如果您要强制填写数据元素的所有值
    在数据输入中，如果已填写一个或多个值，请选择**全部
    必填数据元素的字段**。

    这意味着，如果您在
    输入字段（用于类别选项组合），然后您
    必须输入属于该数据元素的所有字段的数据（即
    是所有类别选项组合）。

18. 如果希望将数据输入表单标记为已完成
    只有当表单验证成功时，才选择 **完成
    仅当验证通过时才允许**。

    如果选择此选项，则无法将表单标记为已完成
    验证失败。

19. 如果您要强制要求所有缺失值都需要一个
    评论以说明其缺席，请选择**缺少值要求
    评论完成**。

20. （可选）分配一个或多个**传奇**。

21. If applicable, select **Skip offline**.

    此选项控制是否应将此数据输入表单
    下载并保存在用户的网络浏览器中。通常你
    不应选择**脱机**。这是默认设置。如果
    您有一些很少使用的大型表格，可以考虑选择
    此选项可加快数据输入模块中的初始加载速度。

22. If applicable, select **Data element decoration**

    如果选择此选项，则数据元素的描述将以
    脱机模式下**数据中的已下载数据集中的标注
    入门**应用。

23. If applicable, select **Render sections as tabs**.

    此选项仅适用于部分表格。该选项允许
    您可以将每个部分呈现为数据集水平上方的选项卡。
    这对于较长的数据集很有用，因为它允许适当的部分
    无需快速浏览整个表格即可快速选择。

24. If applicable, select **Render vertically**.

    此选项仅适用于部分表格。

25. 选择数据元素并分配它们。

    您可以覆盖每个选定数据集的类别组合
    通过点击所选数据列表上方的齿轮图标
    元素。这使您可以利用特定的类别组合
    （分解）在当前数据集中而不是类别中
    直接与数据元素本身关联的组合。

26. 选择指标并分配它们。

27. 在组织单位树中，选择您要使用的组织单位
    想要将数据集分配给。

    > **Tip**
    >
    >   - Click **Organisation unit level** to select all organisation
    >     units that belong to a certain organisation level.
    >
    >   - Click **Organisation unit group** to select all organisation
    >     units that belong to a certain organisation unit group.

28. 点击**保存**。 

现在，您可以在 **数据录入** 应用程序中将数据集用于
组织单位的数据集。
选择的频率（周期类型）。

### 创建或编辑数据集通知 { #create_data_set_notification } 

1.  打开**维护**应用程序，点击**数据集** \> **数据集
    通知**。

2.  点击添加按钮。

#### 发送什么？ { #what-to-send } 

![](resources/images/datasets/dataset_notification_create.png)

1.  在**名称**字段中，键入数据集的准确名称
    通知。

2.  （可选）在 **Code** 字段中，分配一个代码。 

3.  输入**数据集**。

    这些数据集将与此通知关联。如果有的话
    他们完成了一定时期和组织单位，
    通知将由系统生成。

    > **Note**
    >
    > Nothing will happen if no data set is selected

4.  In **Message template** section there are two parameters.

      - **主题模板**发送的通知主题
        通知。它可以具有变量列表中的值
        右侧可用。

      - **消息模板**通知中发送的实际消息。它可以
        具有右侧可用变量列表中的值
        侧。

    > **Note**
    >
    > Subject is only relevant in case of Email and internal DHIS2
    > messages. It is ignored in case of SMS.

#### 何时发送？ { #when-to-send } 

![](resources/images/datasets/when_to_send.png)

1.  **数据集通知触发器**字段确定何时发送
    通知。

      - **数据集完成**将立即触发通知
        数据集完成。

      - **计划天数**将根据天数安排通知时间
        相对于预定日期。预定日期将由
        与数据集关联的期间。

          - **发送通知为**提供两种不同类型的
            通知

              - **汇总摘要**以摘要心情发送通知

              - **单一通知**单一发送通知
                心情

    > **Note**
    >
    > **Send notification as** option is only available in case of
    > scheduled notification. This option is set to default which is
    > **Single notification** in case of completion notification

#### 寄给谁？ { #who-to-send } 

![](resources/images/datasets/who_to_send.png)

1.  **“通知收件人” **字段确定
    通知。

      - **组织单位联系人**将向联系人发送通知
        分配给已收集数据的组织单位
        从。

      - ** UserGroup **将向所有会员发送通知
        选择的用户组。

    > **Note**
    >
    > An internal DHIS2 message will be sent in case if recipient is
    > UserGroup. Moreover user will also receive SMS/EMAIL if phone
    > number and email address exist for that user and SMS/EMAIL
    > notifications are enabled in SystemSettings

### 覆盖数据集中的数据元素的类别组合 { #override_dataelement_catcombo_in_dataset } 

您可以覆盖要用于数据元素的类别组合
在数据集范围内。这意味着数据元素可以使用
不同数据集内的不同类别组合。这是
当您想重复使用数据元素时很有用，因为您不必
复制数据元素以允许多个类别组合。

如果组织单位层次结构中的不同区域使用
不同的分类，或者如果分类随时间变化，
您可以通过创建不同的数据集来表示
适当的类别组合。

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要修改的数据集。

3.  点击选项菜单，然后选择**编辑**。

4.  转到数据元素部分，然后单击扳手图标。

5.  选择新的类别组合，然后单击**关闭**。

6.  点击**保存**。 

### 编辑数据集中的强制数据元素 { #edit_compulsory_dataelement_in_dataset } 

您可以添加或删除将被标记为强制性的数据元素
在数据输入期间。

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要编辑的数据集。

3.  Click the options menu and select **Edit compulsory data elements**.

4.  分配必填数据元素。

5.  点击**保存**。 

### 下载PDF格式的默认数据表格 { #download_defaultform_pdf } 

您可以从PDF格式下载默认数据以获取离线数据
条目。

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要下载的对象。

3.  Click the options menu and select **Get PDF for data entry**.

### 管理板块表格 { #manage_section_form } 

#### 创建部分表格 { #create-a-section-form } 

截面表单按数据元素类别自动分隔
组合，从而为每个表单生成电子表格，例如数据输入表单
部分。

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要创建节形式的数据集
    为了。

3.  Click the options menu and select **Manage sections**.

4.  点击添加按钮。

5.  (Optional) In the **Name** field, type the name of the section.

6.  (可选） 在**描述**字段中，键入对该文件的描述。
    部分。

7.  （可选）在以下期间显示节表中各行的总计
    数据输入，选择**显示行总计**。

8.  （可选）在显示期间在部分表格中显示列的总计
    数据输入，选择**显示列总计**。

9.  将数据元素分配给该部分：

    1.  (Optional) Select a **Category combination filter**.

        > **Note**
        >
        > You can only use one category combination per section.


        | 选项 | 说明 |
        |---|---|
        **None** | 显示没有类别组合的所有数据元素。|
        | **<No filter\>** | 显示所有数据元素。|

    2.  选择数据元素并分配它们。

10. （可选）使用向上键对部分中的数据元素进行排序
    分配的数据元素字段左侧的向下箭头和向下箭头。

11. 点击**保存**。 

12. 对您要包含的每个部分重复添加部分步骤
    部分表格。

    在**数据录入**应用程序中，您现在可以使用分栏表单。表格
    当部分可用时，部分表格会自动出现
    选定的数据集。具有部分表格的数据集将
    自动显示剖面图。

注意如何将每个数据元素类别都分为一个单独的
部分，并且数据输入表已由
系统。将节形式与数据元素类别结合使用
可以大大减少创建所需的时间
数据集的数据输入表单。


![](resources/images/dhis2UserManual/section_form.png)

#### 编辑部分表格 { #edit-a-section-form } 

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要编辑节形式的数据集
    为了。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要编辑的部分。

5.  点击选项菜单，然后选择**编辑**。

6.  Edit the section and click **Save**.

7.  对要编辑的每个节重复编辑节的步骤。

#### 管理分区表单中的灰色字段 { #manage-grey-fields-in-a-section-form } 

您可以禁用数据输入的数据元素和类别选项。那
表示在数据处理期间将无法在这些字段中输入数据
条目。

![](resources/images/datasets/section_form_grey_fields.png)

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要编辑节形式的数据集
    为了。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要编辑的部分。

5.  Click the options menu and select **Manage grey fields**.

6.  选择要禁用的字段。

    > **Note**
    >
    > If you've sections that contain data elements assigned to multiple
    > category combinations, switch between the category combinations to
    > view all fields.

7.  点击**保存**。 

#### 在部分表格中更改部分显示顺序 { #change-section-display-order-in-a-section-form } 

您可以控制以节形式显示节的顺序。

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要编辑节形式的数据集
    为了。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要移动的部分。

5.  点击选项菜单，然后选择**上移**或**下移**。

    如果您要移动的部分是菜单中的第一部分或最后部分
    列表中，您只会看到其中一个移动选项。

#### 删除部分表格中的部分 { #delete-a-section-in-a-section-form } 

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要编辑节形式的数据集
    为了。

3.  Click the options menu and select **Manage sections**.

4.  在列表中，找到要删除的部分。

5.  Click the options menu and select **Delete**.

#### 以节形式翻译节 { #translate-a-section-in-a-section-form } 

1.  打开 **Maintenance** 应用程序，然后单击 **Data set** （> **Data set**）。

2.  在列表中，找到要编辑节形式的数据集
    为了。

3.  Click the options menu and select **Translate**.

4.  选择一个语言环境。

5.  输入所需的信息。

6.  点击**关闭**。

### 管理自定义表单 { #manage_customform } 

#### 创建一个自定义表格 { #create-a-custom-form } 

您可以在内置的WYSIWYG HTML编辑器中设计自定义表单。如果选择
**来源**，您可以直接将HTML代码粘贴到编辑区域中。为一个
有关如何使用编辑器的完整指南，请参阅
 <http://docs.ckeditor.com/>。


![](resources/images/datasets/data_set_custom_form_create.png)

创建自定义表单：

1.  Open the **Maintenance** app and click **Data set**.

2.  在列表中，找到要添加自定义表单的数据集。

3.  Click the options menu and select **Design data entry form**.

4.  在编辑区域中，创建自定义表单。

      - 双击左侧列表中的对象以将其插入
        表格。

      - 如果您已经有了表单的HTML代码，请单击
        **来源**并粘贴代码。

5.  Select a **Form display style**.

6.  点击**保存**。 

#### 自定义形式的脚本 { #scripting-in-custom-forms } 

在自定义数据输入表单中，您可以使用JavaScript创建动态
行为和自定义。例如，您可以隐藏表单部分
根据数据元素的特定用户输入，或显示特定
表单加载时的信息。

##### 大事记 { #events } 

DHIS2数据输入模块提供了一系列事件，您可以
注册并用于在特定时间执行操作。这些事件是
注册在document元素上。 jQuery事件对象和数据
集标识符始终是提供给
回调函数。下表概述了事件
以及何时触发它们。



表格数据录入事件

| 键 | 描述 | 论据 |
|---|---|---|
| dhis2.de.event.formLoaded | 在数据输入表单渲染后，但在输入字段中设置数据值之前触发。 | 事件 | 数据集 ID |
| dhis2.de.event.dataValuesLoaded | 在输入字段中设置数据值后触发。 | 事件 | 数据集 ID |
| dhis2.de.event.formReady | 当数据输入表单完全呈现并加载所有元素时触发。 | 事件 | 数据集 ID |
| dhis2.de.event.dataValueSaved | 成功保存数据值时触发。 | 事件 | 数据集 ID | 数据值对象 |
| dhis2.de.event.completed | 当数据集成功标记为完成时触发。 | 事件 | 数据集 ID | 完整注册对象 |
| dhis2.de.event.uncompleted | 当数据集被成功标记为不完整时触发。 | 事件 | 数据集 ID |
| dhis2.de.event.validationSuccess | 验证完成且无违规时触发。 | 事件 | 数据集 ID |
| dhis2.de.event.validationError | 当验证完成且存在一个或多个违规时触发。 | 事件 | 数据集 ID |
| dhis2.ou.event.orgUnitSelected | 在组织单位网络树中选择一个或多个组织单位时触发。 | 事件 | 机构单位 ID | 机构单位名称 | 子机构单位 ID |

要注册活动：

     <script type="text/javascript">

    dhis2.util.on（'dhis2.de.event.formReady'，function（event，ds）{
      console.log（'ID为'+ ds +'的表单已加载！'）;
    }）；

    dhis2.util.on（'dhis2.de.event.dataValueSaved'，function（event，ds，dv）{
      console.log（'数据值：'+ dv.value +'与数据元素：'+ dv.de一起保存）;
    }）；

    dhis2.util.on（'dhis2.de.event.completed'，function（event，ds，cr）{
      console.log（'组织单位的表格已完成：'+ cr.ou）;
    }）；

     </script>

> **注意**
>
>请注意仅使用“命名空间”事件，例如
>上面的示例，而不是一般的示例，例如dhis2.util.on中的“ click”
>方法将首先注销事件。

如果您的功能仅适用于某些数据集，则可以使用
提供的数据集标识符和快捷方式，可避免不必要的功能
像这样的数据集
    这个：

    dhis2.de.on（'dhis2.de.event.validationSuccess'，function（event，ds）{
      if（$ .inArray（ds，['utXOiGbEj14'，'Re7qzHEThSC']）== -1）{
        返回false；
      }
      console.log（'ID为：'+ ds +'的表单已成功验证！'）;
    }）；

数据输入表单中输入字段的标识符位于
格式如下所述。此格式可用于选择输入
脚本中的字段并对其执行操作：

     <dataelementid>-<optioncomboid> -val

由于为所有事件提供了数据集标识符，因此可行
另一种方法是利用“文件” Web API资源并保留您的
回调函数在一个文件中，您可以在其中让JavaScript代码
根据当前加载的数据集采取措施。

##### 职能 { #functions } 

DHIS2数据输入模块包含JavaScript API函数，该函数可以
可从自定义数据输入表单访问。

** dhis2.de.api.getSelections **：此函数返回一个JavaScript
包含所有尺寸的属性以及相应属性的对象
所选选项的标识符的值。它包含
“ ds”（数据集），“ pe”（句号），“ ou”（组织单位）的属性
和所有数据集类别的标识符。

一个示例响应如下所示：

    {
     + ds：“ lyLU2wR22tC”，
     + pe：“ 201605”，
     + ou：“ g8upMTyEZGZ”，
     + LFsZ8v5v7rq：“ CW81uF03hvV”，
     + yY2bQYqNt0o：“ yMj2MnmNI8L”
     +}

此功能的示例JavaScript用法：

    var sel = dhis2.de.api.getSelections（）;
     + var orgUnit = sel [“ ou”];
     + var partner = sel [“ LFsZ8v5v7rq”];

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects } 

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
>默认设置是所有人（**公共访问权限**）都可以找到，
>查看和编辑元数据对象。

1.  打开**维护**应用程序，找到元数据对象类型
    您要修改。

2.  在对象列表中，单击右键菜单并选择 **共享
    设置**。

3.  （可选）添加用户或用户组：搜索一个或多个用户
    分组并选择它。用户或用户组已添加到列表中。

4.  更改要修改的访问组的共享设置。

      - **可以编辑和查看**：访问组可以查看和编辑
        目的。

      - **只能查看**：访问组可以查看对象。

      - **禁止访问**（仅适用于**公共访问**）：公众
        将无法访问该对象。

5.  更改您要访问的访问组的数据共享设置
    修改。

      - **可以捕获数据**：访问组可以查看和捕获数据
        为对象。

      - **可以查看数据**：访问组可以查看以下数据：
        目的。

      - **无访问权限**：访问组将无法访问以下数据：
        物体。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理指标 { #manage_indicator } 

### 关于指标 { #about_indicator } 

指标是一个可以包含多个数据元素的公式，
常数，组织单位组数和数学运算符。
指标通常由分子和分母组成。你用
用于计算覆盖率，发生率和其他值的指标
是已输入到数据元素值的结果
系统。计算得出的总数没有分母。

> **注意**
>
>您永远不会直接在DHIS2中输入指标值，而是进行计算。

指标公式可以包含数学运算符，例如
加号和减号；功能（见下文）；和以下元素：



表：指标要素

| 指标元素 | 类型 | 描述 |
|---|---|---|
| 不变 | 零件 | 常量是在所有指标计算中保持不变的数值。这有助于在一个地方更改可能随时间变化的值。<br> <br>常量是在汇总数据元素值之后应用的。 |
| 资料元素 | 零件 | 数据元素由为数据元素捕获的数据值替代。 |
| 天数 | 操作员 | "天数 "是一个特殊运算符，它总是为给定的指标计算提供天数。<br> <br>例如：如果要计算 "疫苗冰箱无法使用的时间百分比"，可以将分子定义为：<br> <br> （"天数-"疫苗冰箱可用天数"）/"天数"<br> <br> 如果 6 月份冰箱可用了 25 天，则指标计算公式为<br> <br>(30-25/25)\*100 = 17%<br><br>如果要计算第一季度的总数，天数（"天"）将为<br> <br>31+28+31 = 90<br> <br> "天数 "参数将始终是相关期间的天数。 |
| 组织单位数 | 零件 | 您可以在公式中使用组织单位组。它们将被组中的组织单位数量取代。在汇总过程中，组中的组织单位将与申请的组织单位层次结构部分相交。<br> <br>这样就可以在指标中使用特定地区的公共设施数量。例如，这在创建设施基础设施调查和报告时非常有用。 |
| 程式 | 零件 | 点击 **计划**，选择一个计划，查看与特定计划相关的所有数据元素、属性和指标。<br> <br>您在公式中包含的程序组件将有一个程序标签。 |

您可以在指标公式中使用以下功能：


表：指标功能

| 指示器功能 | 论据 | 描述 |
|---|---|---|
| 如果 | (布尔-expr、true-expr、false-expr）。 | 对布尔表达式进行求值，若为 true 则返回表达式的 true 值，若为 false 则返回表达式的 false 值。参数必须遵循任何指标表达式的规则。 |
| 一片空白 | (元素) | 如果元素值缺失（空），则返回 true，否则返回 false。 |
| isNotNull | (元素) | 如果元素值没有丢失（非空），则返回 true，否则返回 false。 |
| firstNonNull | (元素 [, 元素 ...]) | 返回第一个未丢失（非空）元素的值。可提供任意数量的参数。任何参数也可以是数字或字符串字面形式，如果前面的对象都有缺失值，则将返回该值。 |
| 最伟大的 | (表达式 [, 表达式 ...]) | 返回所给表达式的最大（最高）值。可提供任意数量的参数。 |
| 最小 | (表达式 [, 表达式 ...]) | 返回给定表达式中最小（最低）的值。可提供任意数量的参数。 |
| 登录 | (表达式[, 基数]) | 返回数字表达式的自然对数（以 e 为底数）。如果第二个参数是整数，则返回以整数为底数的对数。 |
| log10 | （表情） | 返回数字表达式的公共对数（以 10 为底）。 |
| 无效 | | 不返回任何结果。例如，_if( #{FH8ab5Rog83} <0, null, 1 )_ 如果数据元素值小于 0，则不返回任何结果，否则返回 1。 |
| 删除零 | （表情） | 如果表达式值为 0，则不返回任何内容，否则返回表达式值。 |
| 子表达式 | （表情） | 在汇总前对表达式的一部分进行评估。请参阅下面的指标子表达式。 |
| [年度期间] | | 年度内该时段的编号（1、2、3......）。有关示例，请参阅下面的 "指标年度至今 "部分。 |
| [年度周期数] | | 年度内该类型时段的计数。有关示例，请参阅下面的 "指标年初至今 "部分。 |
| .聚合类型 | (汇总类型） | 覆盖汇总数据（非程序数据）的默认数据元素汇总类型。 |
| .maxDate | (年-月-日) | 对于数据元素（非程序数据），最大日期当日或之前结束的期间的值。 |
| .minDate | (年-月-日) | 对于数据元素（非程序数据），最小日期当日或之后开始的期间的值。 |
| .periodOffset | (整数常数） | 放在数据值或表达式之后，返回相对于报告期的偏移周期的值。可以嵌套。请参阅下面的示例。 |
| .yearToDate() | | 求和从年初到当前周期的所有周期值。请注意，如果任何周期间在当年的天数达到或超过 4 天，则该周期间被视为当年的一部分。有关示例，请参阅下面的指标年初至今部分。 |

有效的聚合类型：

| 聚集类型 | 描述 |
|---|---|
| 平均值 | 期间和组织单位等级的平均值 |
| AVERAGE_SUM_ORG_UNIT | 平均值，组织单位层次结构中的总和 |
| COUNT | 数值计数 |
| 第一 | 第一个值，组织单位层次结构中的总和 |
| FIRST_AVERAGE_ORG_UNIT | 第一值，组织单位等级中的平均值 |
| 最后 | 最后一个值，组织单位层次结构中的总和 |
| LAST_AVERAGE_ORG_UNIT | 最后一个值，组织单位层次结构中的平均值 |
| LAST_IN_PERIOD | 期末数值，组织单位层次结构中的总和
| LAST_IN_PERIOD_AVERAGE_ORG_UNIT | 期间最后数值，组织单位等级平均值 |
| 最大 | 最大值 |
| MIN | 最小值 |
| 无 | 不对任何维度进行汇总 |
| 总计 | 时期和组织单位等级中的数值总和 |
| STDEEV | 数值的标准偏差（基于人口 |
| 差异 | 数值方差（基于人口 |

.aggregationType、.maxDate、.minDate 和 .periodOffset 函数的示例：

| 指标表达            | 手段                                           |
| ------------------------------- | ----------------------------------------------- |
| #{FH8ab5Rog83}.aggregationType(COUNT) | 数值计数 |
| #{FH8ab5Rog83}.aggregationType(LAST) - #{FH8ab5Rog83}.aggregationType(FIRST) | 首尾值之差 |
| #{FH8ab5Rog83}.maxDate(2021-6-30) | 截至 2021 年 6 月 30 日的数值 |
| #{FH8ab5Rog83}.minDate(2021-1-1) | 自 2021 年 1 月 1 日起的数值 |
| #{FH8ab5Rog83}.minDate(2021-1-1)<br />.maxDate(2021-6-30) | 2021 年 1 月 1 日至 2021 年 6 月 30 日期间的数值 |
| ＃ | 前的价值 |
| ＃ | 后的数值  |
| ＃  | 后的数值  |
| ＃  | 报告期间的数据元素FH8ab5Rog83减去前一时期的程序数据元素IpHINAT79UW.uf3svrmp8Oj的两倍 |
| （＃{FH8ab5Rog83}-<br />＃{QOlfIKgNJ3D2}）.periodOffset（-2） | 前2个周期的数据元素FH8ab5Rog83减去前2个周期的数据元素QOlfIKgNJ3D2 |
| ＃ | 前2个周期的数据元素FH8ab5Rog83加前1个周期的值 |
| （＃{FH8ab5Rog83} .periodOffset（-1）+ <br />＃{FH8ab5Rog83}）.periodOffset（-1） | 前2个周期的数据元素FH8ab5Rog83加上前1个周期的值（请注意，函数是嵌套的） |

### 指标子表达式{ #indicator_subexpressions }

在获取数据元素的数据时，指标通常先汇总数据，然后再在表达式中进行评估。例如，请看指标表达式

    if( #{nYahlae7fe6} > 10, 1, 0 )

如果数据元素的聚合类型为 SUM，则将对相关期间内数据元素 nYahlae7fe6 的所有值求和，然后测试总和是否大于 10。如果所有数据元素值的总和大于 10，则返回 1，否则返回 0。

有时，您可能希望先评估表达式中的数据值，然后再进行汇总。例如，您可能希望在地区一级显示该地区有多少设施的数据值大于 10。使用 `subExpression` 函数可以实现这一目的，如下所示：

    subExpression( if( #{nYahlae7fe6} > 10, 1, 0 ) )

这将测试每个数据元素的值是否大于 10。如果大于 10，_if_ 语句将返回 1，否则返回 0。然后，假设数据元素 nYahlae7fe6 的聚合类型为 SUM，它将对 1 和 0 求和，从而计算出有多少数据元素的值大于 10。

子表达式说明：

1. 仅当数据元素的聚合类型为 SUM 时，上述示例才会将 1 和 0 相加。如果数据元素具有不同的聚合类型，并且您希望将 1 和 0 相加，则可以使用 `.aggregationType()` 函数覆盖子表达式内的聚合类型，如下所示：

       subExpression( if( #{nYahlae7fe6} > 10, 1, 0 ) ).aggregationType(SUM)

2. SubExpression 只能引用一个数据元素，但可以多次引用。例如

       subExpression( if( #{nYahlae7fe6} > 10 && #{nYahlae7fe6} <= 20, 1, 0 ) )

3. SubExpression 可以使用类别选项组合和/或属性选项组合引用数据元素，但每次引用的内容必须完全相同。例如

       subExpression( if( #{nYahlae7fe6.beec4Dewah8} > 10 && #{nYahlae7fe6.beec4Dewah8} <= 20, 1, 0 ) )

4. 如果您希望在聚合前评估一个表达式，该表达式涉及其他类型的数据（如程序数据），或涉及多个数据元素、类别选项组合或属性选项组合，您可以使用预测器来进行评估，并将结果存储为不同的数据元素。然后，您就可以在指标或分析中直接引用预测的数据元素。

### 指标 年初至今{ #indicator_yeartodate }

指标可以使用表达式元素 _yearToDate()_、_[periodInYear]_ 和 _[yearlyPeriodCount]_来计算年初至今的数值。

在下面的示例中，#{a} 可以是#{dataElementUID} 或任何返回数据值的有效指标表达式项，如 #{dataElementUID.catOptionComboUid}、I{programIndicatorUID}、N{indicatorUID} 等。

| 指标表达 | 手段 |
| --- | --- |
| #{a} | 本期价值 |
| #{a}.yearToDate() | 年度至今的数值总和。例如，如果时间段为 3 月，则 1 月+2 月+3 月的值为  |
| #{a}.yearToDate() / [periodInYear] (年) | 年初至今的平均值。例如，如果时间段为 3 月，则 1 月+2 月+3 月的值为 /3 |
| #{a} -<nobr>#{a}.yearToDate()</nobr> / [periodInYear] / [periodInYear] 。 | 本期与年初至今平均值之间的差额 |
| #{b} * [periodInYear] / [yearlyPeriodCount] [年周期数] | 如果 #{b} 代表年度目标人群（例如，本年度应接种疫苗的人数），那么就可以显示本期应接种疫苗的人数。例如，二月份的数据为 #{b} * 2 / 12。

#### 关于 [yearlyPeriodCount]{ #notes-on-yearlyperiodcount } 的说明 

对于月度，[yearlyPeriodCount] 总是 12，对于季度，总是 4，等等。使用 [yearlyPeriodCount] 而不是硬编码 12 或 4 这样的数字有两个好处：

1. 对于周周期，[yearlyPeriodCount] 将是 52 或 53（取决于年份）。对于双周周期，则为 26 或 27。

2. 如果用户在分析中选择了不同的周期类型，[periodInYear] 和 [yearlyPeriodCount] 将相应调整。例如，如果收集的是月度数据，用户可以选择按月报告，其中 [periodInYear] 为 1：1 月，2：2 月，......，[yearlyPeriodCount] 为 12；或者用户可以选择按季度报告，其中 [periodInYear] 为 1：Q1，2：Q2，......，[yearlyPeriodCount] 为 4。

#### 关于缺失数据的说明{ #notes-on-missing-data } 

.yearToDate() 如果在该年份之前或期间有任何数据，就会返回一个值。
例如，如果 #{a} 的值是

    一月: （无数据）
    二月1
    三月: 2
    四月：（无数据）
    五月3
    6 月：（无数据）

那么 #{a}.yearToDate() 的值为

    一月: （无数据）
    二月1
    三月: 3
    四月： 3
    五月6
    六月： 6

 <br />

In the **Maintenance** app, you manage the following indicator objects:



表：维护应用程序中的指标对象

| 对象类型 | 可用功能 |
|---|---|
| 指示符 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 指标类型 | 创建、编辑、克隆、删除、显示详情和翻译 |
| 指标组 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 指标组设置 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |

### 工作流程 { #workflow_indicator } 

1.  创建指标类型。

2.  创建指标。

3.  创建指标组。

4.  创建指标组集。

### 创建或编辑指标类型 { #create_indicator_type } 

![](resources/images/maintenance/indicator_type_create.png)

指标类型定义了在聚合期间应用的因素。
在数据集市导出或报告期间计算的指标值
表生成过程将显示正确的格式，并且
因此不需要额外的乘法器（例如，
百分比），以使值显示正确的格式。

> **注意**
>
>从DHIS2版本2.4开始，“计算数据元素”对象具有
>已弃用。相反，您可以通过以下方式创建计算所得的数据元素：
>创建因子类型为“ 1”的指标类型，并通过设置
>“数字”选项为“是”。将“数字”选项设置为的效果
>“是”将表示该指标实际上没有
>分母。因此，您将只能定义一个分子，
>，它将用作计算的数据元素的公式。

1.  打开** Maintenance **应用程序，然后单击** Indicator ** \> ** Indicator
    类型**。

2.  点击添加按钮。

3.  在**名称**字段中，键入指标类型的名称，例如
    例如“百分比”，“每千”，“每万”。

4.  键入**系数**。

    该系数是数值系数，将乘以
    指标计算过程中的指标公式。

5.  点击**保存**。 

### 创建或编辑指标 { #create_indicator } 

![](resources/images/maintenance/indicator_create.png)

1.  打开** Maintenance **应用程序，然后单击** Indicator ** \>
    **指示符**。

2.  点击添加按钮。

3.  在**名称**字段中，键入指标的全名，例如
    例如：“每千人确诊的疟疾发病率”。

4.  在**简短名称**字段中，键入"...... "的缩写名称。
    指标，例如“每千次弹出记录的疟疾传播控制数”。

    简称必须少于或等于25个字符，
    包括空格。

5.  （可选）在 **Code** 字段中，分配一个代码。 

    在许多国家/地区，指标均分配有代码。

5.  (Optional) In the **Color** field, assign a color to reprersent the indicator.

5.  (Optional) In the **Icon** field, assign an icon to illustrate the meaning of the indicator.

6.  在**描述**字段中，键入简短、翔实的描述
    指标及其计算方式。

7.  如果要在计算过程中应用年化系数
    选择 "**年化**"。

    通常，将年化指标的分子乘以
    因数是12，而分母例如是每年
    人口数字。这允许每月的覆盖值是
    用年度人口数字计算。

8.  Select the number of **Decimals in data output**.

9.  选择**指标类型**。

    该字段确定将自动应用的因子
    在指标计算中。可能的选择是
    由指标类型决定。例如，“百分比”
    指标将自动乘以100，
    导出到数据集市，以便将其显示为百分比。

10. （可选）分配一个或多个**传奇**。

11. 在 **URL**字段中输入一个链接，例如一个指向
    指标注册表，其中完整的元数据描述
    指示器可用。

12. （可选）输入汇总数据的** Category选项组合
    出口。**。

    您可以使用此设置将作为原始数据导出的聚合数据映射到
    另一台服务器。通常，您会进行这种类型的数据交换映射
    当您想根据患者数据创建匿名汇总数据时
    记录在程序中（事件数据）。

13. （可选）输入汇总的**属性选项组合
    数据导出。**。

    您可以使用此设置将作为原始数据导出的聚合数据映射到
    另一台服务器。通常，您会进行这种类型的数据交换映射
    当您想根据患者数据创建匿名汇总数据时
    记录在程序中（事件数据）。

14. 如果适用，请输入自定义属性值，例如
    **分类**或**收集方法**。

    > **Note**
    >
    > You create custom attributes in the **Maintenance** app: **Other**
    > \> **Attributes**.

15. 点击**编辑分子**。

    1.  键入分子的清晰描述。

    2.  通过双击分子来定义分子
        右侧字段。然后，这些组件将作为
        左侧字段中的公式。通过添加数学运算符
        双击左侧字段下方的图标。

        您的公式必须在数学上有效。这包括正确的
        必要时使用括号。

    3.  Click **Done** to save all changes to the numerator.

16. Click **Edit denominator**.

    1.  键入分母的清晰描述。

    2.  通过双击组件中的组件来定义分母
        右侧字段。然后，这些组件将作为
        左侧字段中的公式。通过添加数学运算符
        双击左侧字段下方的图标。

        您的公式必须在数学上有效。这包括正确的
        必要时使用括号。

    3.  Click **Done** to save all changes to the denominator.

17. 如果适用，请选择强制性指标组集，例如
    **人力资源**。

    > **Note**
    >
    > You'll only see indicator group sets in this form if you've
    > created them and set them to **Compulsory**.
    >
    > You create indicator group sets in the **Maintenance** app:
    > **Indicator** \> **Indicator group set**.

18. 点击**保存**。 

### 创建或编辑指标组 { #create_indicator_group } 

![](resources/images/maintenance/indicator_group_create.png)

1.  打开** Maintenance **应用程序，然后单击** Indicator ** \> ** Indicator
    组**。

2.  点击添加按钮。

3.  输入名称。

4.  选择指标并分配它们。

5.  点击**保存**。 

### 创建或编辑指标组集 { #create_indicator_group_set } 

![](resources/images/maintenance/indicator_group_set_create.png)

指标组集创建相似指标的组合组。对于
例如，您可能有一组称为“疟疾”的指标，
“利什曼病”。这两个组可以合并为一组
称为“媒介传播疾病”。指标组集用于
数据分析以结合指标的相似主题。

1.  打开** Maintenance **应用程序，然后单击** Indicators ** \> ** Indicator
    组**。

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**
2.  **简称**
    3.  **码**
4.  **描述**
    3.  **必修**

4.  选择指标组并分配它们。

    可用的指示器组显示在左侧面板中。
    当前是指标组成员的指标组
    设置显示在右侧面板中。

5.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects } 

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
>默认设置是所有人（**公共访问权限**）都可以找到，
>查看和编辑元数据对象。

1.  打开**维护**应用程序，找到元数据对象类型
    您要修改。

2.  在对象列表中，单击右键菜单并选择 **共享
    设置**。

3.  （可选）添加用户或用户组：搜索一个或多个用户
    分组并选择它。用户或用户组已添加到列表中。

4.  更改要修改的访问组的共享设置。

      - **可以编辑和查看**：访问组可以查看和编辑
        目的。

      - **只能查看**：访问组可以查看对象。

      - **禁止访问**（仅适用于**公共访问**）：公众
        将无法访问该对象。

5.  更改您要访问的访问组的数据共享设置
    修改。

      - **可以捕获数据**：访问组可以查看和捕获数据
        为对象。

      - **可以查看数据**：访问组可以查看以下数据：
        目的。

      - **无访问权限**：访问组将无法访问以下数据：
        物体。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理组织单位 { #manage_organisation_unit } 

在本节中，您将学习如何：

  - 创建一个新的组织单位并建立该组织单位
    等级制

  - 创建组织单位组，组集并分配组织
    他们的单位

  - 修改组织单位的层次结构

### 关于组织单位 { #about_organisation_unit } 

组织单位层次结构定义了 DHIS2 的组织结构。
例如，卫生设施、行政区域和其他地理区域如何相互排列。
例如，医疗机构、行政区域和其他地理区域如何相互排列。它是
它是 DHIS2 的*where*维度，类似于时期代表*when*维度。
维度。

组织单位层次结构是通过父子关系建立的。
在DHIS2中，每个节点都是一个组织单位。一个国家可能
例如有八个省，每个省可能有一个
地区的儿童。通常，最低级别包括
收集数据的设施。数据收集设施也可以
位于较高的级别，例如国家或省级
医院。因此，您可以在DHIS2中创建倾斜的组织树。

  - 您一次只能拥有一个组织层次结构。

  - 层次结构中可以有任意多个级别。

    通常，公共卫生中的国家组织层次结构具有
    四到六个级别。

  - 您可以通过使用组织来创建其他分类
    组和组织组集。

    例如，创建与
    卫生保健部门。

  - 建议使用组织单位组来创建
    非地理层次结构。

  - 组织单位只能是单个组织的成员
    组织单位组集中的单位组。

  - 一个组织单位组可以是多个组织单位的一部分
    组集。

  - 组织单位层次结构是数据的主要载体
    地理维度上的汇总。

  - 当您关闭组织单位时，您无法注册或编辑
    events to this organisation unit in the **Event Capture** and
    ** Tracker Capture **应用程序。

> **Important**
>
> You can change the organisation unit hierarchy after you've created
> it, even organisation units that collect data. However, DHIS2 always
> uses the latest hierarchy for data aggregation. So if you change the
> hierarchy, you loose the temporal representation of the hierarchy
> across time.
>
> District A is sub-divided into District B and District C. Facilities
> which belonged to District A are reassigned to District B and C. Any
> historical data, which you entered before the split occurred, is still
> registered as belonging to District B and C, not to the obsolete
> District A.

在**维护**应用程序中，您可以管理以下组织单位
对象：



表：维护应用程序中的组织单位对象

| 对象类型 | 可用功能 |
|---|---|
| 组织单位 | 创建、编辑、克隆、删除、显示详情和翻译 |
| 组织单位组 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 组织单位组套 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 组织单位层面 | 编辑和翻译 |
| 层次结构操作 | 移动组织单位 |

### 工作流程 { #workflow_organisation_unit } 

推荐的工作流程是：

1.  创建组织单位。

2.  创建组织单位组。

3.  创建组织单位组集。

### 创建或编辑组织单位 { #create_organisation_unit } 

![](resources/images/orgunits/create_new_orgunit.png)

您可以将组织单位一个或一个地添加到层次结构中
单位或作为所选组织单位的子级。你只能有
一个根单元。

1.  打开**维护**应用程序，点击**组织单位** （>）。
    **组织单位**。

2.  点击添加按钮。

3.  选择您的新组织单位将使用的组织单位
    属于：

    1.  点击**父组织单位**。

    2.  在组织单位树中，找到上级组织
        单位并选择它。您的选择以黄色标记。

        > **Tip**
        >
        > Click the arrows to expand the organisation unit tree.

    3.  点击**选择**。

4.  Enter a **Name** of the organisation unit.

    每个组织单位必须具有唯一的名称。

5.  Enter a **Short name** for the organisation unit.

    通常，简称是全称的缩写
    组织单位名称。此属性通常用于报表中
    显示单位单位的名称，该单位的空间有限。

6.  （可选）分配**代码**。

    在许多国家/地区，为组织单位分配了代码。

7.  (可选）上传/删除**组织单位图像**

8.  (Optional) Type a **Description** of the organisation unit.

9.  Select an **Opening date**.

    开幕日期控制着一个组织中存在的组织单位
    时间点，例如在分析历史数据时。

10. If applicable, select a **Closed date**.

11. 在**评论**字段中，输入您想了解的任何其他信息。
    要添加。

12. (可选） 在 **URL**字段中，输入外部网络的链接。
    具有有关组织单位的其他信息的站点。

13. 输入联系信息：

      - 联系人

      - 地址

      - 电子邮件

      - 电话号码

14. (Optional) Enter **Latitude** and **Longitude**.

    您必须具有经度和纬度值才能在地图中创建地图
    **地图**应用。然后，您的组织单位可以表示为
    点在地图上，例如医疗机构。没有这个
    信息，**地图**应用程序将无法使用。

    以后批量导入坐标可能会更有效
    使用**导入-导出**应用程序为所有组织单位执行任务。您
    还可以使用 ** 导入-导出** 应用程序来创建多边形。多边形是
    代表行政边界的组织单位。

15. If applicable, select **Data sets** and assign them.

    > **Note**
    >
    > You control whether a user should be able to assign data sets to
    > an organisation unit in the **System Settings** app:
    >
    > Open the **System Settings** app, click **Access** and select
    > **Allow assigning object to related objects during add or
    > update**.

16. If applicable, select **Programs** and assign them.

    > **Note**
    >
    > You control whether a user should be able to assign programs to an
    > organisation unit in the **System Settings** app:
    >
    > Open the **System Settings** app, click **Access** and select
    > **Allow assigning object to related objects during add or
    > update**.

17. 如果适用，输入自定义属性值，例如** HR
    标识符**。

    > **Note**
    >
    > You configure the custom attributes in the **Maintenance** app:
    >
    > Open the **Maintenance** app and click **Other** \> **Attribute**.

18. 点击**保存**。 

### 创建或编辑组织单位组 { #create_organisation_unit_group } 

Organisation unit groups allow you to classify related organisation
units into a common theme. You can for example group all organisation
units that are hospitals in an **Hospital** group.

1.  打开**维护**应用程序，点击**组织单位** （>）。
    **单位部门**。

2.  点击添加按钮。

3.  填写表格：

    1.  **名称**：为以下内容提供准确，唯一和描述性的名称：
        组织单位组。

    2.  **简称**：简称应小于25
        字符。通常，简称是的缩写。
        完整的单位部门名称。在某些情况下使用此属性
        DHIS2中空间有限的地方。

    3.  **码**

    4.  **符号**：选择将用于显示符号的符号
        显示图层时的组织单位（仅点）
        **地图**应用。

4.  在组织树中，单击您想要的组织单位
    添加到组织单位组。

    您可以通过展开目录树来在树中找到组织单位
    分支（单击箭头符号），或通过搜索
    名称。

    所选组织单位显示为橙色。

5.  点击**保存**。 

### 创建或编辑组织单位组集 { #create_organisation_unit_group_set } 

组织单位组集允许您创建其他
组织单位的分类。组集创建新
尺寸，以便您可以进行更详细的数据分析。你一个
轻松按组集中的组过滤，组织或汇总数据。

  - 您可以具有任意数量的组织单位组集。

  - 默认的组织单位组集是**类型**和
    **所有权**。

  - 组织单位只能是单个组织的成员
    组织单位组集中的单位组。

  - 一个组织单位组可以是多个组织单位的一部分
    组集。

  - 您可以定义组织单位组集是否是强制性的
    是否会影响数据的完整性。必修
    表示所有组织单位必须是该组中的成员
    组集。

> **Note**
>
> In the **Data integrity** part of the **Data administration** app you
> can verify if you've accidentally assigned the same organisation unit
> to multiple groups within the same group set. In this app you also
> find information about organisation units that are not members of a
> compulsory organisation unit group set.

1.  打开**维护**应用程序，点击**组织单位** （>）。
    **组织单位组集**。

2.  点击添加按钮。

3.  填写：

    1.  **名称**：为组织单位组提供准确的名称
        组。

    2.  **码**

    3.  **说明**：说明组织单位组设置了什么
        测量或捕获。

4.  如果您希望所有组织单位成为该组中的成员
    组设置，选择 **强制**。

5.  (Optional) Select **Data dimension**.

6.  (Optional) Select **Include subhierarchy in analytics**.

    如果您选择此选项，则子单位部门将继承
    最接近的“父级”的组织单位组属性
    组织单位。子组织单位的任何财产将
    覆盖继承值。

    如果单位部门没有关联的单位部门组，
    组织单位可以继承其最接近的上级组织
    单位组。如果上级组织单位组都没有
    给定组织单位组集的组织单位组，结果
    仍然是“空白”，但如果至少有一个父母有
    组织单位组，子组织单位将继承它。

    在分析中包含子层次结构”已启用，这意味着组织
    单位继承了最亲密的父母单位
    为白色（没有与之关联的单位部门组）。

7.  选择组织单位组并分配它们。

    在左侧列表中，找到可用的组织单位
    组。使用箭头在两个组之间移动选定的组
    列表。

    如果左侧列表中没有组织单位组，
    点击**添加新**。在打开的表单中，创建组织
    单位组。完成后，点击**刷新值**。

    > **Note**
    >
    > An organisation unit can only be a member of a single organisation
    > unit group within an organisation unit group set.

8.  请点击
**保存**。

![](resources/images/implementation_guide/organisation_unit_hiearchy.png)

您希望根据设施的所有权来分析数据。所有
设施都有所有者，因此您需要确保所有组织
单位都有这个分类。为此，您可以使用**强制**
选项：

1.  为每种所有权类型创建一个组，例如“ MoH”，“私有”
    和“基于信仰”。

2.  将数据库中的所有设施分配给这些组之一。

3.  创建一个名为“所有权”的组织单位组集，然后选择
    **必修**。

4.  分配组织单位组“ MoH”，“私人”和
    从“基于信仰”到“所有权”组织组
    组。

![](resources/images/maintenance/analytics-include-org-unit-subhierarchy.png)

![](resources/images/maintenance/include-subhierarchy-analytics.png)

通过两种方式对组织单位进行分组，并汇总这两种数据
并行层次结构

用于汇总数据（仅在分析应用程序中）

组织单位组设置的附加设置将创建一个
动态“成员资格”到组织单位组的集合。

您无需更改组织单位的层次结构

可扩展和动态

动态包含层次

动态附加分类

### 为组织单位级别分配名称 { #name_organisation_unit_level } 

当您将子女添加到一个组织单位时，DHIS2 会自动
会自动创建一个新的组织单位级别（如有必要）。系统还会
为该级别指定一个通用名称，如 "第 5 级"。您可以
用上下文名称代替通用名称，如 "国家"、"省"、"区 "或 "县"、
省"、"区 "或 "卫生机构"。DHIS2 使用上下文名称
名称，例如在**地图**应用程序中。

1.  打开**维护**应用程序，点击**组织单位** （>）。
    **组织单位级别**。

    列表的加载时间取决于列表的深度
    组织单位层次结构树。

2.  对于要修改的组织单位级别，输入名称。

3.  选择离线级别的数量。

    > **Note**
    >
    > You configure the default value in the **System Settings** app:
    >
    > Open the **System Settings** app, click **General** and select a
    > level in the **Max offline organisation unit levels** list.

4.  点击**保存**。 

### 在层次结构中移动组织单位 { #move_organisation_unit } 

您可以通过以下方式在层次结构中移动组织单位：
所选组织单位的父级。

1.  打开**维护**应用程序，点击**组织单位** （>）。
    **等级操作**。

2.  在左侧的层次结构树中，选择您要使用的组织单位
    想搬家。

    > **Note**
    >
    > If the selected organisation unit is has sub-organisation units,
    > all of them move to the new parent organisation unit.

3.  在右侧的层次结构树中，选择您要使用的组织单位
    想要将选定的组织单位移动到。

4.  点击 **移动 x 个组织单位**，其中 x 代表数量
    您选择的组织单位数。

    您的更改将立即反映在左侧
    层次树。

### 关闭组织单位 { #close_organisation_unit } 

When you close an organisation unit, you can't register or edit events
to this organisation unit in the **Event Capture** and **Tracker
Capture** apps.

1.  打开**维护**应用程序，点击**组织单位** （>）。
    **组织单位**。

2.  In the object list, click the options menu and select **Edit**.

3.  Select a **Closed date**.

4.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects } 

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
>默认设置是所有人（**公共访问权限**）都可以找到，
>查看和编辑元数据对象。

1.  打开**维护**应用程序，找到元数据对象类型
    您要修改。

2.  在对象列表中，单击右键菜单并选择 **共享
    设置**。

3.  （可选）添加用户或用户组：搜索一个或多个用户
    分组并选择它。用户或用户组已添加到列表中。

4.  更改要修改的访问组的共享设置。

      - **可以编辑和查看**：访问组可以查看和编辑
        目的。

      - **只能查看**：访问组可以查看对象。

      - **禁止访问**（仅适用于**公共访问**）：公众
        将无法访问该对象。

5.  更改您要访问的访问组的数据共享设置
    修改。

      - **可以捕获数据**：访问组可以查看和捕获数据
        为对象。

      - **可以查看数据**：访问组可以查看以下数据：
        目的。

      - **无访问权限**：访问组将无法访问以下数据：
        物体。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理验证规则{ #manage_validation_rule } 

### 关于验证规则 { #about_validation_rule } 

验证规则基于表达式。该表达式定义了一个
数据元素值之间的关系。该表达式形成一个
条件符合某些逻辑条件。

该表达式包括：

  - 左侧

  - 右边

  - 操作员

验证规则断言所接种的疫苗总数
婴儿小于或等于婴儿总数。

左侧和右侧必须返回数字值。

在**维护**应用程序中，您需要管理以下验证规则
对象：


| 对象类型 | 您可以做些什么 |
|---|---|
| 验证规则 | 创建、编辑、克隆、删除、显示详情和翻译 |
| 验证规则组 | 创建、编辑、克隆、删除、共享、显示详细信息和翻译 |
| 验证通知 | 创建、编辑、克隆、删除、显示详情和翻译 |

#### 关于推拉窗 { #sliding_windows } 

You can use sliding windows to group data *across multiple periods* as
opposed to selecting data for *a single period*. Sliding windows have a
size, that is to say, the number of days to cover, a starting point and
an end point. The example below shows disease surveillance data:.

  - 橙色部分中的数据，根据当前数据选择数据
    期。有一个阈值，每周计算一次
    或期间，并显示在“结果”部分中。

  - 蓝色部分中的数据是滑动窗口。它选择数据
    从过去7天开始。 “结果”显示了总数
    确诊病例。

  - 验证规则可确保在总数达到
    案例数超出了该时间段的阈值。

![](resources/images/maintenance/validation_rules_sliding_window.gif)



表：验证规则的不同行为

| 带推拉窗 | 无推拉窗 |
|---|---|
| 仅用于事件数据。 | 用于事件数据和汇总数据。 |
| 数据选择基于固定天数（periodType）。 | 数据选择总是基于周期。 |
| 滑动窗口的位置总是*相对于*比较的周期。 | Data is always selected for the *same period* as the period being compared. |

另请参阅：[创建或编辑广告时，如何使用滑动窗口
验证
规则]（https://docs.dhis2.org/master/en/user/html/manage_validation_rule.html#create_validation_rule）。

#### 关于验证规则组 { #about-validation-rule-groups } 

验证规则组使您可以对相关的验证规则进行分组。
当您运行* [验证规则
分析]（https://docs.dhis2.org/master/zh/user/html/validation_rule_analysis.html）*，
您可以选择运行系统中的所有验证规则，或者
只是一组验证规则。

#### 关于验证通知 { #validation_notifications } 

您可以配置验证规则分析，以自动向选定的用户组发送验证错误通知。
验证错误通知给选定的用户组。这些
信息称为 * 验证通知*。它们通过
内部 DHIS2 消息系统发送。

您可以将验证规则通知作为单独的消息或作为
消息摘要。这很有用，例如，如果您要发送
有关高优先级疾病暴发的个别消息和摘要
用于低优先级常规数据验证错误。

#### 关于验证规则功能{ #about-validation-rule-functions } 

您可以在验证规则的左侧
或右侧：



表：验证规则功能

| 验证规则功能 | 论据 | 描述 |
|---|---|---|
| 如果 | (布尔-expr、true-expr、false-expr）。 | 对布尔表达式进行求值，若为 true 则返回表达式的 true 值，若为 false 则返回表达式的 false 值。参数必须遵循任何指标表达式的规则。 |
| 一片空白 | (元素) | 如果元素值缺失（空），则返回 true，否则返回 false。 |
| isNotNull | (元素) | 如果元素值没有丢失（非空），则返回 true，否则返回 false。 |
| firstNonNull | (元素 [, 元素 ...]) | 返回第一个未丢失（非空）元素的值。可提供任意数量的参数。任何参数也可以是数字或字符串字面形式，如果前面的对象都有缺失值，则将返回该值。 |
| 最伟大的 | (表达式 [, 表达式 ...]) | 返回所给表达式的最大（最高）值。可提供任意数量的参数。 |
| 最小 | (表达式 [, 表达式 ...]) | 返回给定表达式中最小（最低）的值。可提供任意数量的参数。 |
| 登录 | (表达式[, 基数]) | 返回数字表达式的自然对数（以 e 为底数）。如果第二个参数是整数，则返回以整数为底数的对数。 |
| log10 | （表情） | 返回数字表达式的公共对数（以 10 为底）。 |
| 无效 | | 不返回任何结果。例如，_if( #{FH8ab5Rog83} <0, null, 1 )_ 如果数据元素值小于 0，则不返回任何结果，否则返回 1。 |
| orgUnit.ancestor | (orgUnitUid [, orgUnitUid ...]) | 如果组织单位是任何（1 个或多个）组织单位的后代，则返回 true，否则返回 false。 |
| orgUnit.dataSet | (dataSetUid [, dataSetUid ...]) | 如果组织单位分配给任何（1 个或多个）数据集，则返回 true，否则返回 false。 |
| orgUnit.group | (ouGroupUid [, ouGroupUid ...]) | 如果组织单位是任何（1 个或多个）组织单位组的成员，则返回 true，否则返回 false。 |
| orgUnit.program | (programUid [, programUid ...]) | 如果组织单位被分配给任何（1 个或多个）程序，则返回 true，否则返回 false。 |
| 删除零 | （表情） | 如果表达式值为 0，则不返回任何内容，否则返回表达式值。 |

### 创建或编辑验证规则 { #create_validation_rule } 

1.  打开**维护**应用程序，点击**验证** （>）。
    **验证规则**。

2.  点击添加按钮。

3.  Type a **Name**.

    在验证规则中，名称必须唯一。

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  （可选）输入**说明**。

6.  选择**重要性**：**高**，**中**或**低**。

7.  Select a **Period type**.

8.  选择一个**操作员**：**必填项**，**等于**，
    **独家配对**，**大于**，**大于或等于**
    或**不等于**。

    **必填对**运算符允许要求该数据值
    必须为表格的左侧和右侧输入表格
    表情，还是双方都没有。这意味着您可以要求
    如果填写表单中的一个字段，则一个或多个其他字段
    还必须填写。

    **独占对**可以断言是否存在任何值
    左侧，则右侧应没有值（或
    反之亦然）。这意味着构成规则的数据元素
    任何一方都应相互排斥，因为
    给定的时间段/组织单位/属性选项组合。

9.  创建表达式的左侧：

    1.  Click **Left side**.

    2.  如果您想查看相对于以下位置的数据，请选择**滑动窗口**
        您比较的时期。另请参见[关于验证
        规则]（https://docs.dhis2.org/master/zh/user/html/manage_validation_rule.html#about_validation_rule）。

    3.  选择**缺失值策略**。该选项设置了
        如果数据丢失，系统将评估验证规则。


        | 选项 | 说明 |
        |---|---|
        | 如果缺少任何值，则跳过验证规则。这是默认选项。<br>       <br>在使用**独占配对**或**强制配对**操作符时，请务必选择此选项。|
        | 如果所有值都缺失则跳过 | 只有当组成表达式的所有操作数都缺失时，才跳过验证规则。|
        | 从不跳过 | 在数据缺失的情况下不会跳过验证规则，所有缺失的操作数都将被视为 0。|

    4.  输入**描述**。

    5.  根据可用的数据元素建立表达式、
        5. 根据可用的数据元素、程序对象、组织单位、计数和常量建立表达式。

        在右窗格中，双击要包含在表达式中的数据对象。
        双击要包含在表达式中的数据对象。与左窗格下方的数学
        运算符。

    6.  点击**保存**。

10. 创建表达式的右侧：

    1.  Click **Right side**.

    2.  选择**缺失值策略**。该选项设置了
        如果数据丢失，系统将评估验证规则。


        | Option | Description |
        |---|---|
        | Skip if any value is missing | The validation rule will be skipped if any of the values which compose the expression are missing. This is the default option.<br>         <br>Always select this option you use the **Exclusive pair** or **Compulsory pair** operator. |
        | Skip if all values are missing | The validation rule will be skipped only if all of the operands which compose it are missing. |
        | Never skip | The validation rule will never be skipped in case of missing data, and all missing operands will be treated effectively as a zero. |

    3.  Select **Sliding window** if you want to view data relative to
        the period you are comparing. See also [About validation
        rules](https://docs.dhis2.org/master/en/user/html/manage_validation_rule.html#about_validation_rule).

    4.  Type a **Description**.

    5.  Build an expression based on the available data elements,
        program objects, organisation units, counts and constants.

        In the right pane, double-click the data objects you want to
        include in the expression. Combine with the mathematical
        operators located below the left pane.

    6.  Click **Save**.

11. (可选）选择该规则的**组织单位级别**
    应该进行评估。将此留空将导致
    要在所有级别上评估的验证规则。

12. (可选）单击 **在表单验证时跳过该规则**，以避免
    进行数据输入时触发此规则

13. 点击**保存**。 

### 创建或编辑验证规则组 { #create_validation_rule_group } 

1.  打开**维护**应用程序，点击**验证** （>）。
    **验证规则组**。

2.  点击添加按钮。

3.  Type a **Name**.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  （可选）输入**说明**。

6.  双击要分配给"...... "的**验证规则**。
    组。

7.  点击**保存**。 

### 创建或编辑验证通知 { #create_validation_notification } 

1.  打开**维护**应用程序，点击**验证** （>）。
    **验证通知**。

2.  点击添加按钮。

3.  Type a **Name**.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  Select **Validation rules**.

6.  Select **Recipient user groups**.

7.  (Optional) Select **Notify users in hierarchy only**.

    如果选择此选项，系统将过滤收件人
    用户。 （系统从收件人那里获取收件人用户
    用户组。）过滤器基于
    收件人用户所属。链接到组织单位的用户
    是违规组织单位的祖先
    发生后将收到验证通知。系统将
    忽略其他用户，这些用户将不会收到验证
    通知。

8.  创建消息模板：

    1.  创建**主题模板**。

        双击**模板变量**字段中的参数
        将它们添加到您的主题。

    2.  创建**消息模板**。

        双击**模板变量**中的参数名称
        字段以将其添加到您的消息中。

9.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects } 

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
>默认设置是所有人（**公共访问权限**）都可以找到，
>查看和编辑元数据对象。

1.  打开**维护**应用程序，找到元数据对象类型
    您要修改。

2.  在对象列表中，单击右键菜单并选择 **共享
    设置**。

3.  （可选）添加用户或用户组：搜索一个或多个用户
    分组并选择它。用户或用户组已添加到列表中。

4.  更改要修改的访问组的共享设置。

      - **可以编辑和查看**：访问组可以查看和编辑
        目的。

      - **只能查看**：访问组可以查看对象。

      - **禁止访问**（仅适用于**公共访问**）：公众
        将无法访问该对象。

5.  更改您要访问的访问组的数据共享设置
    修改。

      - **可以捕获数据**：访问组可以查看和捕获数据
        为对象。

      - **可以查看数据**：访问组可以查看以下数据：
        目的。

      - **无访问权限**：访问组将无法访问以下数据：
        物体。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理属性 { #manage_attribute } 

### 关于属性 { #about_attribute } 

您可以使用元数据属性将其他信息添加到
元数据对象。除了每个标准属性
这些对象可能有助于存储其他信息
属性，例如数据元素的收集方法。


![](resources/images/maintenance/attribute_create.png)

In the **Maintenance** app, you manage the following attribute objects:



表格：维护应用程序中的属性对象

| 对象类型 | 可用功能 |
|---|---|
| 属性 | 创建、编辑、克隆、删除、显示详情和翻译 |

### 创建或编辑属性 { #create-or-edit-an-attribute } 

1.  打开**维护**应用程序并点击**属性**。

2.  点击添加按钮。

3.  在 **名称** 字段中，输入属性的名称。

    每个属性必须具有唯一的名称

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  选择**值类型**。

    如果为属性提供的值与该值不匹配
    键入您将收到警告。

6.  选择**选项集**。

7.  选择所需的选项，例如：

      - Select **Mandatory** if you want an object to always have the
        动态属性。

      - 如果希望系统强制执行该值，请选择 **独特**。
        对于特定的对象类型是唯一的。

8.  点击**保存**。 

    动态属性现在可用于您分配的对象
    它来。

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理常数 { #manage_constant } 

### 关于常数 { #about_constant } 

常量是可以供用户使用的静态值
在数据元素和指标中。一些指标，例如“夫妇年
保护率”取决于通常不会转换的常数
时间。


![](resources/images/maintenance/constant_create.png)

在 **维护** 应用程序中，您管理以下常量对象：



表格：维护应用程序中的常量对象

| 对象类型 | 可用功能 |
|---|---|
| 不变 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |

### 创建或编辑常量 { #create_constant } 

1.  打开 **Maintenance** 应用程序，然后单击 **Other** （> **Constant** ）。

2.  点击添加按钮。

3.  在 **名称** 字段中，输入常量的名称。

4.  (可选） 在**简短名称**字段中，键入以下内容的缩写名称："......"。
    常数。

5.  （可选）在 **Code** 字段中，分配一个代码。 

6.  在**描述**字段中，键入简短、翔实的描述
    常数。

7.  在 **值** 字段中，定义常量的值。

8.  点击**保存**。 

    现在可以使用该常数。

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects } 

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
>默认设置是所有人（**公共访问权限**）都可以找到，
>查看和编辑元数据对象。

1.  打开**维护**应用程序，找到元数据对象类型
    您要修改。

2.  在对象列表中，单击右键菜单并选择 **共享
    设置**。

3.  （可选）添加用户或用户组：搜索一个或多个用户
    分组并选择它。用户或用户组已添加到列表中。

4.  更改要修改的访问组的共享设置。

      - **可以编辑和查看**：访问组可以查看和编辑
        目的。

      - **只能查看**：访问组可以查看对象。

      - **禁止访问**（仅适用于**公共访问**）：公众
        将无法访问该对象。

5.  更改您要访问的访问组的数据共享设置
    修改。

      - **可以捕获数据**：访问组可以查看和捕获数据
        为对象。

      - **可以查看数据**：访问组可以查看以下数据：
        目的。

      - **无访问权限**：访问组将无法访问以下数据：
        物体。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理选项集 { #manage_option_set } 

### 关于选项集 { #about_option_set } 

选项集提供了一个预定义的下拉列表（枚举），用于
DHIS2。您可以定义任何类型的选项。

一个名为“投放类型”的选项集将具有以下选项：“普通”，
“违反”，“剖腹产”和“协助”。


![](resources/images/maintenance/option_set_create.png)



表格维护应用程序中的选项集对象

| 对象类型 | 可用功能 |
|---|---|
| 选项集 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 选项组 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |
| 选项组设置 | 创建、编辑、克隆、共享、删除、显示详情和翻译 |

### 创建或编辑选项集 { #create_option_set } 

> **重要**
>
>选项集必须具有代码和名称。您可以更改
>名称，但是您无法更改代码。所有的名称和代码
>选项即使在不同的选项集之间也必须是唯一的。

1.  打开**维护**应用程序，点击**其他** （> **选项集**）。

2.  点击添加按钮。

3.  In the **Primary details** tab, define the option set:

    1.  在 **名称** 字段中，输入常量的名称。

    2.  In the **Code** field, assign a code.

    3.  选择**值类型**。

    4.  点击**保存**。 

4.  对于您需要的每个选项，执行以下任务：

    1.  Click the **Options** tab.

    2.  点击添加按钮。

    3.  输入**名称**和**代码**。也可选择
        **颜色**和**图标**将用于此选项
        数据捕获应用程序。

    4.  按名称，代码/值或手动对选项进行排序。

    5.  点击**保存**。 



### 创建或编辑选项组 { #create_option_group } 

You can group and classify **options** within an **option set** by using **option groups**.
This way you can create a subset of options in an option set. The main purpose of this is to be able to filter huge option sets into smaller, related parts.

可以通过程序规则在跟踪器和事件捕获中将分组的选项隐藏或一起显示。

> **Note**
>
> You cannot change the **Option set** selected in an **Option group** once it has been created.

1. 打开**维护**应用程序，点击**其他** （> **选项组**。

2. 点击添加按钮。

3. 填写表格：
    1. **名称**
    2. **简称**
    2. **码**
    4. **选项集**

4. 选择**选项集**后，您可以分配要分组的**选项**。

6. 点击**保存**。 

### 创建或编辑选项组集 { #create_option_group_set } 

**选项组集**允许您将多个**选项组**归为一组。
选项组集的主要目的是为捕获的数据添加更多维度以进行分析。

> **Note**
>
> You cannot change the **Option set** selected in an **Option group set** once it has been created.

1. 打开** Maintenance **应用程序，然后单击** Other ** \> ** Option group set **。

2. 点击添加按钮。

3. 填写表格：
    1. **名称**
    2. **码**
    3. **描述**
    4. **选项集**
    5. **数据尺寸**

       如果选择 "**数据维度**"，则除 "期间 "和 "组织单位 "这两个标准维度外，组集还将作为另一个维度提供给分析。

4. 选择选项组并分配它们。

   可用选项组显示在左面板中。当前为选项组集成员的选项组显示在右侧面板中。

5. 点击**保存**。 

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects } 

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
>默认设置是所有人（**公共访问权限**）都可以找到，
>查看和编辑元数据对象。

1.  打开**维护**应用程序，找到元数据对象类型
    您要修改。

2.  在对象列表中，单击右键菜单并选择 **共享
    设置**。

3.  （可选）添加用户或用户组：搜索一个或多个用户
    分组并选择它。用户或用户组已添加到列表中。

4.  更改要修改的访问组的共享设置。

      - **可以编辑和查看**：访问组可以查看和编辑
        目的。

      - **只能查看**：访问组可以查看对象。

      - **禁止访问**（仅适用于**公共访问**）：公众
        将无法访问该对象。

5.  更改您要访问的访问组的数据共享设置
    修改。

      - **可以捕获数据**：访问组可以查看和捕获数据
        为对象。

      - **可以查看数据**：访问组可以查看以下数据：
        目的。

      - **无访问权限**：访问组将无法访问以下数据：
        物体。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理图例 { #manage_legend } 

### 关于传说 { #about_legend } 

您可以创建，编辑，克隆，删除，显示详细信息和翻译图例
使您为用户设置的地图有意义。您创建
**地图**应用中的地图。

> **注意**
>
>连续图例必须包含结束和开始的图例项
>具有相同值，例如：0-50和50-80。不设置图例
>像这样的项目：0-50和51-80。这将在您的图例中造成空白。

### 创建或编辑图例 { #create_legend } 

> **注意**
>
>不允许在图例中留有空白。
>
>不允许有重复的图例项。

1.  打开** Maintenance **应用程序，然后单击** Other ** \> ** Legend **。

2.  点击添加按钮。

3.  In the **Name** field, type the legend name.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  创建您想在图例中包含的图例项：

    1.  选择**起始值**和**结束值**。

    2.  Select **Number of legend items**.

    3.  选择一种配色方案。

    4.  点击**创建图例项**。

    > **Tip**
    >
    > Click the options menu to edit or delete a legend item.

6.  （可选）添加更多图例项：

    1.  点击添加按钮。

    2.  输入名称，然后选择一个开始值，一个结束值和一种颜色。

    3.  点击**确定**。

7.  （可选）更改色阶。

    1.  单击色阶以查看色阶选项列表，
        并选择一个色标。

    2.  要自定义色标，请单击添加按钮。在**编辑
        图例项**对话框，单击色阶按钮并手动选择
        颜色，或输入您的颜色值。

8.  点击**保存**。 


| 图例项 | 起始值 | 结束值 |
|---|---|---|
| 低劣 | 0 | 50 |
| 中 | 50 | 80 |
| 好 | 80 | 100 |
| 太高 | 100 | 1000 |

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 更改元数据对象的共享设置 { #change-sharing-settings-for-metadata-objects } 

您可以为元数据对象分配不同的共享设置，例如
示例组织单位和跟踪的实体属性。这些分享
设置可控制哪些用户和用户组可以查看或编辑
元数据对象。

一些元数据对象还允许您更改共享设置
对象的数据输入。这些附加设置控制谁可以
使用元数据查看或在表单字段中输入数据。

> **注意**
>
>默认设置是所有人（**公共访问权限**）都可以找到，
>查看和编辑元数据对象。

1.  打开**维护**应用程序，找到元数据对象类型
    您要修改。

2.  在对象列表中，单击右键菜单并选择 **共享
    设置**。

3.  （可选）添加用户或用户组：搜索一个或多个用户
    分组并选择它。用户或用户组已添加到列表中。

4.  更改要修改的访问组的共享设置。

      - **可以编辑和查看**：访问组可以查看和编辑
        目的。

      - **只能查看**：访问组可以查看对象。

      - **禁止访问**（仅适用于**公共访问**）：公众
        将无法访问该对象。

5.  更改您要访问的访问组的数据共享设置
    修改。

      - **可以捕获数据**：访问组可以查看和捕获数据
        为对象。

      - **可以查看数据**：访问组可以查看以下数据：
        目的。

      - **无访问权限**：访问组将无法访问以下数据：
        物体。

6.  点击**关闭**。

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

### 将图例分配给指标或数据元素 { #assign-a-legend-to-indicator-or-data-element } 

You can assign a legend to an indicator or a data element in the
**Maintenance** app, either when you create the object or edit it. When
you then select the indicator or data element in the **Maps** app, the
system automatically selects the assigned legend.

### 也可以看看 { #see_also_legend } 

  - [使用GIS
    应用]（https://docs.dhis2.org/master/zh/user/html/using_gis.html）

## 管理预测变量 { #manage_predictor } 

### 关于预测变量 { #about-predictors } 

预测变量定义如何从表达式生成聚合数据值
包含汇总和/或事件数据。预测值可以基于：

- 来自与预测值相同时期的数据，和/或

- 来自预测值之前期间的数据

#### 同期数据 { #data_from_the_same_period } 

预测器可以使用与预测值相同周期的数据。
例如，您可以计算具有
通过使用预测器表达式，例如：数据元素的非零值：

 <pre> <code> if（＃{ji7o0ILHuU2}！= 0，1，0）</code> </pre>

在收集数据的组织单位层面运行该预测器时
时，如果数据元素在该组织单位中的值为非零，则预测值为 1，否则为 0。
则预测值为 1，否则为 0。
(如果您预测的数据元素不存储零，那么
为节省空间，数据库中将不存储零）。
然后，您可以在较高的
然后，您可以在更高的组织单位层级的分析中对该预测值进行求和，以计算组织单位中
在报告中每个组织单位下具有非零值的组织单位数量。

#### 前期数据 { #data_from_previous_periods } 

当您指定汇总时，预测变量将使用以前期间的数据
函数，例如sum（）或avg（）。例如，以下生成器表达式
标识一个值，该值是平均值加上标准偏差的两倍
前期数据：

 <pre> <code> avg（＃{ji7o0ILHuU2}）+ 2 * stddev（＃{ji7o0ILHuU2}）</code> </pre>

#### 上一时期的数据 { #data_from_the_same_and_previous_periods } 

预测变量表达式可以访问与
通过访问两个
汇总函数（针对先前期间），以及任何汇总函数之外
（同一时期）。例如，如下所示的表达式可以是
用来平衡上一时期（＃{KOh02hHko7C}）
加上此期间的净变化（＃{ji7o0ILHuU2}），
得出此期间的余额：

 <pre> <code> sum（＃{KOh02hHko7C}）+＃{ji7o0ILHuU2} </code> </pre>

第一个数据值在聚合表达式（总和）内，以指示
它正在采样前一时期的数据（即使只有一个前一时期），
而第二个数据值不在聚合函数中以表明它
正在引用同一时期的数据。

如果需要，可以在同一引用中引用预测变量的输出数据元素
预测变量的表达。例如，此示例中的表达式可以
用于预测一段时间内的余额，然后将该值与
下一个期间的变化以计算下一个期间的余额。
当预测变量跨多个期间运行时，将在以下期间处理这些期间
按时间顺序排列，可以使用较早时期的结果
作为以后的输入。

#### 预测器组织单位级别 { #predictor_organisation_unit_levels } 

您需要为预测变量的输出选择一个或多个组织单位级别。
预测变量生成的所有值都存储在组织单位的
您选择的级别。预测变量表达式中的每个项目都是值的总和
为该组织单位存储的信息（如果有的话）以及组织中存储的所有值
低于该单位（如果有）的单位。

> **注意**
>
>在配置预测变量时，必须选择一个或多个组织单位级别
>将输出预测数据。如果未选择任何级别，则不会预测
>将生成值。

> **警告**
>
>如果您想在分析报告中使用预测值或
>其他预测，*请勿选择多个组织单位级别*。
>当您选择多个级别时，较高级别的预测将
>还包括在较低级别的预测中使用的任何数据。如果预测
>随后从多个级别将其用于分析或表达式中
>其他预测变量，这可能会导致重复计算，因为
>较高级别的值包括较低级别的预测值。

如果使用预测的组织单位级别，则可以选择多个组织单位级别
值仅在验证规则中。例如在疾病监测中，您
如果实际值高于
根据上一期间数据得出的该期间的期望值范围。
为此，您可以创建一个预测变量以计算平均值加上两倍的
前期数据的标准偏差。您可以使用验证
将该最高期望值与实际值进行比较的规则。
您可以在多个级别上运行预测变量和验证规则
以检测不同的爆发情况。在一种情况下，可能会有
一个设施的显着增加超出了预期范围，但是
包含该设施的地区可能不会超出其预期范围
因为地区价值与许多其他设施结合在一起。
但在另一种情况下，
设施不超出每个设施的预期范围（因为
每个设施的标准偏差可能很高），但确实超过了
该地区的预期范围（因为
整个地区的标准偏差可能会更低）。

如果要生成多个级别的预测，则还可以
在不同级别使用不同的预测变量。例如，您可能想要
如果某一级别的值超过平均值再加上标准的两倍，则会收到警报
偏差，但如果超出平均值加1.8倍，则会在另一个级别发出警报
标准偏差。如果需要，可以配置不同的预测变量
具有相同的输出数据元素。如果您使用相同的输出数据元素，
这仍然适用于不同组织单位级别的有效规则，
但您也必须注意不要在分析或其他结果中使用结果
预测器计算以避免重复计算。

In the **Maintenance** app, you manage the following predictor objects:



表格维护应用程序中的预测对象

| 对象类型 | 可用功能 |
|---|---|
| 预测变量 | 创建、编辑、克隆、删除、显示详情和翻译 |

### 抽样前期 { #sampling-previous-periods } 

预测变量可以生成过去一段时间的数据值，
现在或将来。这些值基于预测期间的数据，
和/或来自预测时期之前的时期的采样数据。

如果您只需要进行预测的同一时期的数据，
那么您无需阅读本节。本节介绍如何
从预测周期之前的周期中采样数据。

#### 顺序样本计数 { #sequential_sample_count } 

A predictor's *Sequential sample count* gives the number of immediate
previous periods to sample. For example, if a predictor's period type is
*Weekly* and the *Sequential sample count* is 4, this means to sample
four previous weeks immediately preceding the predicted value week. So the
predicted value for week 9 would use samples from weeks 5, 6, 7, and 8:

![](resources/images/maintenance/predictor_sequential.png){.center width=50% }

如果预测变量的周期类型是* Monthly *和* Sequential sample
count *为4，这意味着立即采样前四个月
在预测值月份之前。所以五月的预测值
将使用一月，二月，三月和四月的样本：

![](resources/images/maintenance/predictor_sequential_month.png){.center width=51% }

The *Sequential sample count* can be greater than the number of periods
in a year. For example, if you want to sample the 24 months immediately
preceding the predicted value month, set the *Sequential sample count*
to 24:

![](resources/images/maintenance/predictor_24_months.png){.center width=57% }

#### 顺序跳过计数 { #sequential_skip_count } 

A predictor's *Sequential skip count* tells how many periods should be
skipped immediately previous to the predicted value period, within the
*Sequential sample count*. This could be used, for instance, in outbreak
detection to skip one or more immediately preceding samples that might
in fact contain values from the beginning of an outbreak that you are
trying to detect.

例如，如果 *顺序采样计数* 为 4，但 *顺序
跳过次数*为 2，那么紧接着预测周期之前的两个采样将被跳过，从而只显示两个周期。
将被跳过，结果只有两个周期被采样。
采样：


![](resources/images/maintenance/predictor_skip.png){.center width=50% }

#### 年度样本数 { #annual_sample_count } 

A predictor's *Annual sample count* gives the number of previous years for
which samples should be collected at the same time of year. This could
be used, for instance, for disease surveillance in cases where the
expected incidence of the disease varies during the year and can best be
compared with the same relative period in previous years. For example,
if the *Annual sample count* is 2 (and the *Sequential sample count* is
zero), then samples would be collected from periods in the immediately
preceding two years, at the same time of year.


![](resources/images/maintenance/predictor_annual.png){.center width=53% }

#### 顺序和年度样本计数一起 { #sequential_annual_sample_count } 

您可以同时使用连续样本计数和年度样本计数来采集
从过去几年的多个连续时段采集样本。
当您这样做时，将在与预测值时期相同的时间段内收集前几年的样本。
期间采集的样本，以及在预测值期间之前和之后的前几年采集的样本。
同时也会在同一时间段之前和之后的前几年采集样本。
由 *顺序样本计数 * 数字决定。

For example, if the *Sequential sample count* is 4 and the *Annual
sample count* is 2, samples will be collected from the 4 periods
immediately preceding the predicted value period. In addition samples
will be collected in the previous 2 years for the corresponding period, as
well as 4 periods on either side:


![](resources/images/maintenance/predictor_sequential_annual.png){.center width=66% }

#### 顺序，年度和跳过样本计数一起 { #sequential_annual_skip_sample_count } 

You can use the *Sequential skip count* together with the sequential and
annual sample counts. When you do this, the *Sequential skip count*
tells how many periods to skip in the same year as the predicted value
period. For example, if the *Sequential sample count* is 4 and the
*Sequential skip count* is 2, then the two periods immediately preceding
the predicted value period period will be skipped, but the two periods
before that will be sampled:


![](resources/images/maintenance/predictor_skip_2_weeks.png){.center width=66% }

If the *Sequential skip count* is equal to or greater than the
*Sequential sample count*, then no samples will be collected for the
year containing the predicted value period; only periods from past years
will be sampled:

![](resources/images/maintenance/predictor_skip_current_year.png){.center width=66% }

#### 样品跳过测试 { #sample_skip_test } 

您可以使用* Sample skip test *（样本跳过测试）来跳过某些时段的样本
根据测试结果，
在那些时期内表达。例如，可以在
疾病暴发检测，样本跳过测试可以识别
以前的疾病暴发，将那些样本从预测中排除
非爆发基准期望值。

* Sample skip test *是一个应返回值的表达式
是或否，表示是否应跳过该时间段。
它可以是一个测试上一时期中任何数据值的表达式。
例如，它可以测试是否有明确输入的数据值
表示应跳过上一个期间。或者可以
将一段时间内的先前预测值与实际值进行比较
记录该时间段，以确定是否应跳过该时间段。

*样本跳过测试*为*真*的任何时期都不会
采样。例如：


![](resources/images/maintenance/predictor_sample_skip_test.png){.center width=66% }

### 创建或编辑预测变量 { #create_predictor } 

1.  打开** Maintenance **应用程序，然后单击** Other ** \> ** Predictor **。

2.  点击添加按钮。

3.  In the **Name** field, type the predictor name.

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  （可选）输入**说明**。

6.  选择一个**输出数据元素**。由该
    预测变量存储为与此数据关联的聚合数据
    元素和预测周期。

    该值根据数据的值类型四舍五入
    元素：如果值类型是整数类型，则预测值
    舍入到最接近的整数。对于所有其他值类型，
    数字四舍五入到四位有效数字。 （但是，如果有
    小数点左边多于四位数，它们不是
    替换为零。）

7.  (可选）选择**输出类别组合**。此下拉菜单只会显示
    如果所选数据元素已附加categoryCombos。如果这是
    在这种情况下，您可以选择要使用的类别组合。

8.  Select a **Period type**.

9.  指定一个或多个 ** 组织单位级别**。输出值将是
    分配给此级别（或这些级别）的组织单位。
    对于**综合**数据，输入值取决于以下选择；**提供数据的组织单位**。
    对于基于**跟踪器**的数据，输入值将来自组织单位。
    分配了输出，或从输出下方的任何较低级别进行分配
    组织单位。

10. 提供数据的**组织单位**控制**汇总**数据的输入值来源。如果选择 "仅在所选级别"，则只包括所选级别的组织单位。如果选择 "在选定的层级和下面的所有层级"，则也包括选定层级的组织单位和下面的所有组织单位。
11. 创建一个**生成器**。生成器是用于计算预测值的表达式。

    1.  Type a **Description** of the generator expression.

    2.  Select a **Missing value strategy**. This selection sets how the system evaluates a validation rule if data is missing.

        |选项|说明|
        | --- | --- |
        |如果缺少任何值，则跳过验证规则|如果缺少构成表达式的任何值，则跳过验证规则。这是默认选项。<br><br> 在使用**独占配对**或**强制配对**运算符时，请务必选择此选项。
        |如果所有值均缺失，则跳过|仅当组成该值的所有值均缺失时，才跳过验证规则。
        |永不跳过|如果缺少数据，将永远不会跳过验证规则，并且所有缺失值都将被有效地视为零。

    3.  输入生成器表达式。您可以通过选择聚合数据的数据元素或程序数据元素，属性或指标来构建表达式。尚不支持组织单位计数。

        要使用过去的采样数据，应将选择的所有项目包含在以下聚合函数之一中（请注意，这些函数名区分大小写）：

        | 平均值
        | --- | --- |
        | x 的平均（均值）值 | | x 的平均（均值）值
        | count(x) | x 值的计数 | count(x) | count(x)
        | max(x) | x 的最大值 | Maximum value of x
        | 中值（x） | x 的中值 | 中值（x
        | min(x) | x 的最小值
        | 例如，p = 0 将返回最低值，p = 0.5 将返回中位数，p = 0.75 将返回第 75 百分位数，p = 1 将返回最高值，等等。连续表示在必要时对数值进行内插。例如，如果数据元素 FTRrcoaog83 的采样值为 1、2、3 和 4，则 percentileCont( 0.5, #{FTRrcoaog83} ) 将返回 2.5。|
        | 此函数等同于 stddevSamp。建议使用 stddevSamp 函数，这样会更清晰。|
        | stddevPop(x) | x 的人口标准偏差：sqrt( sum( (x - avg(x))^2 ) / n )|
        | stddevSamp(x) | x 的样本标准差：sqrt( sum( (x - avg(x))^2 ) / ( n - 1 ) )。请注意，当只有一个样本时不会计算此值。 |
        | sum(x) | x 值的总和 | sum(x)

        > **Note**
        >
        > Any items inside an aggregate function will be evaluated for all
        > sampled past periods, and then combined according to the formula
        > inside the aggregate function. Any items outside an aggregate
        > function will be evaluated for the period in which the
        > prediction is being made.

        您可以通过单击（或
        输入）表达式字段下方的任何元素：
        （）\ * / +-天数。
        可以通过键入常数来添加常数。那些日子
        选项将\ [days \]插入到解析为
        数据来源期间的天数。

        您还可以在您的计算机中使用以下非聚合函数
        表达式，在聚合函数内部或包含
        聚合函数，或独立于聚合函数：


        | Function | Means |
        |---|---|
        | if(test, valueIfTrue, valueIfFalse) | Evaluates **test** which is an expression that evaluates to a boolean value -- see **Boolean expression notes** below. If the test is **true**, returns the **valueIfTrue** expression. If it is **false**, returns the **valueIfFalse** expression. |
        | isNull(item) | Returns the boolean value **true** if the **item** is null (missing), otherwise returns **false**. The **item** can be any selected item from the right (data element, program data element, etc.). |
        | isNotNull(item) | Returns **true** if the **item** value is not missing (not null), otherwise **false**. |
        | firstNonNull(item [, item ...]) | Returns the value of the first **item** that is not missing (not null). Can be provided any number of arguments. Any argument may also be a numeric or string literal, which will be returned if all the previous items have missing values. |
        | greatest(expression [, expression ...]) | Returns the greatest (highest) value of the expressions given. Can be provided any number of arguments. |
        | least(expression [, expression ...]) | Returns the least (lowest) value of the expressions given. Can be provided any number of arguments. |
        | log(expression [, base ]) | Returns the natural logarithm (base e) of the numeric expression. If an integer is given as a second argument, returns the logarithm using that base. |
        | log10(expression) | Returns the common logarithm (base 10) of the numeric expression. |
        | null | Returns no result. For example, _if( #{FH8ab5Rog83}<0, null, 1 )_ returns nothing if the data element value is less than 0, otherwise 1. |
        | orgUnit.ancestor(orgUnitUid [, orgUnitUid ...]) | Returns true if the organisation unit is a descendant of any of the (1 or more) organisation units, otherwise false. |
        | orgUnit.dataSet(dataSetUid [, dataSetUid ...]) | Returns true if the organisation unit is assigned to any of the (1 or more) data sets, otherwise false. |
        | orgUnit.group(ouGroupUid [, ouGroupUid ...]) | Returns true if the organisation unit is a member of any of the (1 or more) organisation unit groups, otherwise false. |
        | orgUnit.program(programUid [, programUid ...]) | Returns true if the organisation unit is assigned to any of the (1 or more) programs, otherwise false. |
        | removeZeros(expression) | Returns nothing if the expression value is 0, otherwise returns the expression value. |
        | .maxDate(yyyy-mm-dd) | For a data element (not program data), value from periods ending on or before a maximum date. |
        | .minDate(yyyy-mm-dd) | For a data element (not program data), value from periods starting on or after a minimum date. |

        **Boolean expression notes:** A boolean expression must evaluate
        to **true** or **false**. The following operators may be used to
        compare two values resulting in a boolean expression: \<, \>,
        \!=, ==, \>=, and \<=. The following operators may be used to
        combine two boolean expressions: && (logical and), and ||
        (logical or). The unary operator \! may be used to negate a
        boolean expression.

        Generator expression examples:


        | Generator expression | Means |
        |---|---|
        | sum(#{FTRrcoaog83.tMwM3ZBd7BN}) | Sum of the sampled values of data element FTRrcoaog83 and category option combination (disaggregation) tMwM3ZBd7BN |
        | avg(I{GSae40Fyppf}) + 2 \* stddevSamp(I{GSae40Fyppf}) | Average of the sampled values of of program indicator GSae40Fyppf plus twice its sample standard deviation |
        | sum(D{IpHINAT79UW.eMyVanycQSC}) / sum([days]) | Sum of all sampled values of data element eMyVanycQSC from porgram IpHINAT79UW divided by the number of days in all sample periods (resulting in the overall average daily value) |
        | sum(#{FTRrcoaog83}) + #{T7OyqQpUpNd} | Sum of all sampled values of data element FTRrcoaog83 plus the value of data element T7OyqQpUpNd in the period being predicted for (includes all disaggregations) |
        | 1.2 \* A{IpHINAT79UW.RKLKz1H20EE} | 1.2 times the value of attribute RKLKz1H20EE of program IpHINAT79UW, in the period being predicted for |
        | if(isNull(#{T7OyqQpUpNd}), 0, 1) | If the data element T7OyqQpUpNd is null in the period being predicted, then 0, otherwise 1. |
        | percentileCont(0.5, #{T7OyqQpUpNd}) | Continuous 50th percentile of the sampled values for data element T7OyqQpUpNd. Note that this is the same as median(#{T7OyqQpUpNd}) |
        | if(count(#{T7OyqQpUpNd}) == 1, 0, stddevSamp(#{T7OyqQpUpNd})) | If there is one sample value present for data element T7OyqQpUpNd, then 0, otherwise the sample standard deviation of these sample values. (Note that if no samples are present then the stddevSamp returns no value, so no value is predicted.) |
        | #{T7OyqQpUpNd}.minDate(2022-10-1) | Value on or after 1-Oct-2022 |
        | #{T7OyqQpUpNd}.maxDate(2022-12-31) | Value on or before 31-Dec-2022 |
        | #{T7OyqQpUpNd}.minDate(2022-10-1).maxDate(2022-12-31) | Value bewteen 1-Oct-2022 and 31-Dec-2022 |

12. (可选）创建**跳过样本测试**。跳过样本测试告诉
    从样本中排除哪个先前时段（如果有）。

    1.  Type a **Description** of the skip test.

    2.  输入样本跳过测试表达式。您可以建立
        通过选择用于聚合数据的数据元素来表达，或
        程序数据元素，属性或指标。组织
        尚不支持单位计数。与发电机一样
        功能，您可以单击（或键入）以下任何元素
        表达式字段：（）\ * / +-天。

        也可使用上述用于生成器表达式的非聚合函数
        在跳过测试中。

        该表达式的计算结果必须为布尔值** true **或
        **假**。参见上文**布尔表达式注意事项**。

        跳过测试表达式示例：


        | Skip test expression | Means |
        |---|---|
        | #{FTRrcoaog83} \> #{M62VHgYT2n0} | The value of data element FTRrcoaog83 (sum of all disaggregations) is greater than the value of data element M62VHgYT2n0 (sum of all disaggregations) |
        | #{uF1DLnZNlWe} \> 0 | The value of data element uF1DLnZNlWe (sum of all disaggregations) is greater than the zero |
        | #{FTRrcoaog83} \> #{M62VHgYT2n0} &#124;&#124; #{uF1DLnZNlWe} \> 0 | The value of data element FTRrcoaog83 (sum of all disaggregations) is greater than the value of data element M62VHgYT2n0 (sum of all disaggregations) or the value of data element uF1DLnZNlWe (sum of all disaggregations) is greater than the zero |

13. Enter a **Sequential sample count** value.

    这是计算应该进行多少个连续周期
    及时返回样本数据进行计算。

14. Enter an **Annual sample count** value.

    这是计算应该追溯到多少年
    用于计算的样本数据。

15. (Optional) Enter a **Sequential skip count** value.

    这是紧接在
    采样值之前，应跳过预测值周期。

16. 点击**保存**。 

### 创建或编辑预测变量组 { #create_predictor_group } 

1.  打开** Maintenance **应用程序，然后单击** Other ** \> ** Predictor
    组**。

2.  点击添加按钮。

3.  Type a **Name**. This field needs to be unique.

4.  (可选）在**代码**字段中，指定一个代码。该字段需要
    独一无二。

5.  （可选）输入**说明**。

6.  Double-click the **Predictors** you want to assign to the group.

7.  点击**保存**。 

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理推送报告 { #manage_push_report } 

### 关于推送报告 { #about_push_report } 

推送报告使您可以提高对数据分析的认识和使用
通过将带有图表，表格和地图的报告直接发送到用户电子邮件
地址。

  - 推送报告从现有仪表板获取其内容。

  - 推送报告以与
    仪表板。

  - 推送报告只能包含带有图表，地图或
    表。

  - 您可以在**维护**中创建推送报告及其计划。
    应用程序。

  - 您在上设置的**标题**和**消息**参数
    每个报告中都包含** Maintenance **应用程序。 **名字**你
    给出报告不包括在报告中。取而代之的是
    用于识别系统中的推送分析对象。这样一来
    报告可以命名为一件事，报告的标题可以为
    另一个。

  - 当您运行推送报告作业时，系统会编译以下列表：
    您选择的用户组中的收件人。然后系统
    为所选用户组的每个成员生成报告。每
    仪表板项目中的一个是专门为每个用户生成的。
    这意味着报告中包含的数据反映了该数据
    用户有权访问。因此，所有用户都可以得到相同的
    报告（如果所有数据均为“静态”）或自定义报告（如果所有
    数据是“动态的”），或两者结合。

  - 推送报告通过电子邮件而不是通过电子邮件发送给收件人
    内部DHIS2消息传递系统。如果用户没有有效的
    电子邮件，或者如果作业失败，则不会发送电子邮件。在这种情况下，
    问题记录在服务器上。

> **注意**
>
>推送报告中生成的数据是公开的，因此请确认您
>不要包含任何敏感数据。


![](resources/images/maintenance/push_report_ex.png)

在**维护**应用程序中，您可以管理以下推送报告
对象：



表格维护应用程序中的推送报告对象

| 对象类型 | 可用功能 |
|---|---|
| 推动分析 | 创建、编辑、克隆、删除、显示详情、翻译、预览和运行 |

### 创建或编辑推送报告 { #create_push_report } 

1.  打开** Maintenance **应用程序，然后单击** Other ** \> ** Push
    分析**。

2.  点击添加按钮。

3.  在**名称** 字段中，输入计划报告的名称。

    此名称不包括在报告电子邮件中。取而代之的是
    用于识别系统中的推送分析对象。

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  添加报告**标题**。

    该标题包含在报告电子邮件中。

6.  （可选）添加**消息**。

    此消息包含在报告电子邮件中。

7.  选择一个 **仪表板** 作为报告的基础。

8.  选择并分配您要向其发送报告的用户组。

9.  Select a **Scheduling frequency**: **Daily**, **Weekly** or
    **每月**。

    > **Note**
    >
    > If you schedule a push report to "Monthly" and "31", the scheduled
    > report job will not run if the month has less than 31 days.

10. （可选）选择**启用**以激活推送报告作业。

    作业只有激活后才能运行。

11. 点击**保存**。 

### 预览推送报告 { #preview_push_report } 

1.  打开** Maintenance **应用程序，然后单击** Other ** \> ** Push
    分析**。

2.  在推送报告列表中，找到要预览的推送报告。

3.  单击选项菜单并选择**预览**。

    推送报告的预览在新窗口中打开。

### 运行推送报告作业 { #run_push_report } 

1.  打开** Maintenance **应用程序，然后单击** Other ** \> ** Push
    分析**。

2.  在推送报告列表中，找到要运行的推送报告。

3.  单击选项菜单并选择 **立即运行**。

    推送报告作业立即运行。

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理外部地图图层 { #manage_external_maplayer } 

### 关于外部地图图层 { #about_gis_map_layers } 

您可以自定义 GIS，将各种来源的地图图层纳入其中，并在 DHIS2 中将它们与您自己的数据结合起来。
在 DHIS2 中将它们与您自己的数据相结合。DHIS2 支持这些常见的地图
服务格式：网络地图服务（WMS）、瓦片地图服务（TMS）、XYZ 瓦片和矢量瓦片（矢量样式）。

### 创建或编辑外部地图图层 { #create_external_map_layer } 

> **注意**
>
> DHIS2仅支持Web Mercator投影
>（[[EPSG：3857]（https://epsg.io/3857）），因此请确保
>服务支持此预测。



表：维护应用程序中的外部地图图层对象

| 对象类型 | 可用功能 |
|---|---|
| 外部地图层 | 创建、编辑、克隆、删除、显示详情和翻译 |

1.  打开** Maintenance **应用程序，然后单击** Other ** \> **外部地图
    层**。

2.  点击添加按钮。

3.  在**名称**字段中，键入一个能描述该文件内容的名称。
    外部地图图层。

    这是您将在 **Maps** 应用程序中看到的名称。 

4.  （可选）在 **Code** 字段中，分配一个代码。 

5.  选择 **地图服务** 格式。 

    DHIS2 支持四种常见的地图服务格式：

      - 网络地图服务（WMS）

        **图片格式**：PNG格式允许图层透明，
        JPG格式可提供更好的压缩效果，并且通常更快
        加载。

        **图层**：WMS可以包含多个单独的图层，您可以
        可以指定要包含的内容（以逗号分隔）。参考
        WMS GetCapabilities文档以查看可用图层。

      - 平铺地图服务（TMS）

      - XYZ磁贴（也可用于WMTS）

      - 矢量瓷砖（矢量风格）

      选择矢量样式后，可以为 "图层 ID 前 "添加一个值。它表示用户的图层（如主题、事件）将插入的矢量平铺（图层）堆栈中的图层 id。如果没有设置该值，用户的图层将被放置在矢量样式中图层的顶部。地图服务 URL 应该是遵循[Mapbox GL 样式规范](https://docs.mapbox.com/mapbox-gl-js/style-spec/)的 JSON 文档。 

6.  输入地图服务的**URL**。

    > **Note**
    >
    > XYZ and TMS URLs must contain placeholders {}, for example:
    > http://{s}.tile.osm.org/{z}/{x}/{y}.png.

7.  (可选） 输入地图图层的**来源**。该字段可以包含
    HTML标记（如果要链接到源）。

    使用外部地图服务时，突出显示
    数据来自哪里。

8.  选择一个**放置**：

      - **底部-底图**：对于“地图”应用，这将使外部地图图层
        可选择作为基图（即替代 DHIS2
        基图）。

      - **顶部-重叠**：对于“地图”应用，这允许外部地图
        从“添加图层”选择中添加并放置在上方的任何位置
        基图。

    请注意，矢量样式图层只能作为基图添加。

9.  （可选）添加图例。

    您可以通过两种方式添加图例：

      - 选择预定义的**图例**以描述地图的颜色
        层。

        > **Tip**
        >
        > Click **Add new** to create legends that you're missing. In
        > the form that opens, create the legends you need. When you're
        > done, click **Refresh values**.

      - 在**传奇图像中输入指向外部图像图例的链接
        网址**。

        这些通常是为WMS提供的。请参阅WMS中的LegendURL下
        GetCapabilites文档。

10. 点击**保存**。 

### 克隆元数据对象 { #clone_metadata } 

克隆数据元素或其他对象可以在创建时节省时间
许多相似的对象。

1.  打开**维护**应用程序，找到元数据对象类型
    你想克隆。

2.  在对象列表中，单击选项菜单并选择**克隆**。 

3.  修改所需的选项。

4.  点击**保存**。 

### 删除元数据对象 { #delete-metadata-objects } 

> **注意**
>
>您只能在以下情况下删除数据元素和其他数据元素对象：
>没有数据与数据元素本身关联。

> **警告**
>
>从系统删除的所有数据集都将不可避免地丢失。所有
>数据输入表格，以及可能已经制定的部分表格
>也将被删除。确保您已经备份了您的
>数据库，然后删除任何数据集，以防您需要还原它
>在某个时间点。

1.  打开**维护**应用程序，找到元数据对象类型
    您要删除。

2.  在对象列表中，单击选项菜单并选择**删除**。 

3.  点击**确认**。

### 显示元数据对象的详细信息 { #display-details-of-metadata-objects } 

1.  打开**维护**应用程序，找到元数据对象类型
    您想查看。

2.  在对象列表中，单击选项菜单并选择 **显示
    细节**。

### 翻译元数据对象 { #translate-metadata-objects } 

DHIS2提供了用于翻译数据库内容的功能，
示例数据元素，数据元素组，指标，指标组
或组织单位。您可以将这些元素转换为任意数量的
语言环境。地区代表特定的地理，政治或
文化区。

> **Tip**
>
> To activate a translation, open the **System Settings** app, click \>
> **Appearance** and select a language.

1.  打开**维护**应用程序，找到元数据对象类型
    您要翻译。

2.  在对象列表中，单击选项菜单并选择**翻译**。 

    > **Tip**
    >
    > If you want to translate an organisation unit level, click
    > directly on the **Translate** icon next to each list item.

3.  选择一个语言环境。

4.  输入**名称**、**简称**和**说明**。 

5.  点击**保存**。 

## 管理SQL视图 { #maintenance_sql_view } 

DHIS2的SQL View功能将存储SQL视图定义
内部，然后在需要时实例化视图。

数据库管理员在创建数据库视图时必须小心
直接在DHIS2数据库中。例如，当资源表
生成，所有这些都将首先被删除然后重新创建。如果
任何SQL视图都依赖于这些表，完整性违规异常
将被抛出并且该过程将被中止。

SQL视图基于它们的反向字母顺序删除
DHIS2中的名称，并按常规字母顺序创建。这允许
您要在SQL视图之间具有依赖关系，因为视图仅取决于
其他按字母顺序排列的观点。对于
例如，“ ViewB”可以安全地依赖于“ ViewA”。否则，有意见
取决于其他视图会导致完整性违规错误。

### 创建一个新的SQL视图 { #creating-a-new-sql-view } 

要创建新的SQL视图，请点击** Apps ** \> ** Maintenance **
\> **其他** \> ** SQL View **，然后单击添加** + **按钮。


![](resources/images/maintenance/create_sql_view.PNG)

SQL 视图的 "名称 "属性将用于确定
DHIS2 将创建的表的名称。
表的名称。描述 "属性允许用户提供一些关于 SQL 视图实际功能的描述性文本。
描述 "属性允许提供一些有关 SQL 视图实际功能的描述性文本。

SQL 类型 "属性允许创建三种视图：
  - 视图 "存储在数据库中，并在查询时重新生成
  - 物化视图 "存储在数据库中，其结果
    缓存在数据库中
  - 查询 "未存储在数据库中

最后，"SQL 查询 "应包含 SQL 视图定义。

只允许使用 SQL "SELECT "语句，某些敏感表（如用户信息 
(即用户信息）是不可访问的。

按 "保存 "存储 SQL 视图定义。如果创建了 "视图
或 "物化视图"，还必须 "执行查询 "才能完成 SQL 视图的创建。
创建 SQL 视图。

请记住，使用 SELECT 语句返回的列
将成为表列，这意味着它们必须是有效的表列类型。
类型。在使用函数时，可能需要在函数后添加
通过在函数后添加 `::{TYPE}`，将结果明确转换为一种类型。

For example, instead of `jsonb_each` (which would return a record type
that cannot be a column type) use `jsonb_each_text` and cast the result
to `text`, like in the below sample:

```sql
select jsonb_each_text(eventdatavalues)::text from ...
```

### 调用其他 SQL 视图的 SQL 视图{ #sql-views-that-call-other-sql-views } 

如果您想创建一个可被其他 SQL 视图调用的 SQL 视图、
那么其**SQL 类型**必须是 "视图 "或 "物化视图"（而不是 "查询"）。
(而不是 "查询"）。在调用视图之前，还必须对其执行**执行查询**。
被调用。

例如，如果您创建了一个名为 "**数据元素计数**"的视图，其 SQL 类型为 "视图
的视图，其 SQL 类型为 "视图"，并使用以下 SQL：

```sql
select count(*) as count from dataelement;
```

......然后，您可以从上下文菜单中运行**执行查询**，并
创建名为**100 多个数据元素**的第二个 SQL 视图。
的第二个 SQL 视图：

```sql
select case when count > 100 then 1 else 0 end as result from _view_data_element_count;
```

### SQL视图管理 { #sql-view-management } 

为了利用SQL视图，只需点击视图，然后从
在上下文菜单中，选择“执行查询”。该过程完成后，您将
系统将通知您已创建一个表。表格名称
将由“描述”属性提供
在SQL视图定义中提供。生成视图后，
您可以通过再次单击视图并选择“显示SQL
视图”。

> **提示**
>
>如果您有一个依赖于其他视图的视图，则应
>注意视图的命名方式。当在
> DHIS2服务器，必须删除所有视图，然后重新创建。什么时候
>分析开始，按字母顺序删除视图，然后
>然后以相反的字母顺序重新创建。因此，如果视图A取决于
>在视图B上，它必须按字母顺序显示在视图B之前。如果它
>会按字母顺序在视图B之后出现，分析可能会失败，因为
>带有依存关系的视图将不会以正确的顺序删除。

## 管理语言环境 { #maintenance_locale_management } 

可以在DHIS2中创建自定义语言环境。除了
系统提供的语言环境，您可能需要添加自定义
系统的语言环境（例如“英语”和“赞比亚”）。这将允许
您可以将元数据对象翻译成本地语言，或解决
使用共同元数据的国家之间的细微差异
定义。


![](resources/images/maintenance/locale_management.png)

语言环境由语言和国家/地区组成。选择
所需的值，然后按“添加”。此自定义语言环境现已可用
作为系统中的翻译语言环境之一。

## 一次编辑多个对象组 { #edit_multiple_object_groups } 

**维护**应用程序中的**元数据组编辑器**可让您
同时编辑多个对象组。您可以编辑以下内容
对象类型：



表：元数据组编辑器中的对象类型

| 对象类型 | 可用功能 |
|---|---|
| 类别选项 ||
| 类别选项组 ||
| 数据元素 | 在多个数据元素组中添加一个数据元素<br> <br> 从多个数据元素组中删除一个数据元素 |
| 数据元素组 | 将多个数据元素添加到一个数据元素组<br> <br> 从一个数据元素组中删除多个数据元素 |
| 指示符 | 将一个指标添加到多个指标组<br> <br> 从多个指标组中删除一个指标 |
| 指标组 | 将多个指标添加到一个指标组<br> <br> 从一个指标组中删除多个指标 |

### 编辑对象组中的多个对象 { #edit-multiple-objects-in-an-object-group } 

1.  打开 **维护** 应用程序并单击 **元数据组编辑器**。

2.  单击**管理组中的项目**。 

3.  选择对象组类型，例如**指示器组**。

4.  选择一个对象组，例如** HIV **。

5.  在左侧列表中，选择要添加到对象中的对象。
    对象组，然后单击向右箭头。

6.  在右侧列表中，选择要从中删除的对象
    对象组，然后单击左箭头。

### 编辑多个对象组中的一个对象 { #edit-an-object-in-multiple-object-groups } 

1.  打开 **维护** 应用程序并单击 **元数据组编辑器**。

2.  单击**管理组条目**。

3.  选择一个对象类型，例如**指标**。

4.  选择一个对象，例如 **ANC LLITN 覆盖范围**。 

5.  在左侧列表中，选择要添加的对象组
    对象，然后单击向右箭头。

6.  在右侧列表中，选择您想要的对象组
    从中删除对象，然后单击左箭头。

