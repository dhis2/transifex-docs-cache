---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/2.38/src/user/control-data-quality.md"
revision_date: '2021-11-04'
tags:
- 使用
- DHIS core version 2.38
---

# 控制数据质量 { #control_data_quality } 

## 关于数据质量检查 { #about_data_quality } 

**数据质量**应用程序包含用于验证准确性和
系统中数据的可靠性。您可以评估的不同维度
数据质量如下表所示：


| 尺寸 | 描述 |
|---|---|
| 正确性 | 数据应在该机构所收集数据的正常范围内。与相关数据元素的数据相比，不应存在严重差异。 |
| 完整性 | 应提交所有报告组织单位所有数据元素的数据。 |
| 一致性 | 数据应与前几个月和前几年输入的数据保持一致，同时考虑到重组、工作量增加等因素的变化，并与其他类似设施保持一致。 |
| 及时性 | 所有报告组织单位应在指定时间提交所有数据。 |

您可以通过多种方式验证数据质量，例如：

  - 在数据输入时，DHIS 2可以检查输入的数据以查看是否
    它落在该数据的最小最大值范围内
    元素（基于所有先前注册的数据）。

  - 通过定义验证规则，该规则可以在用户具有以下条件时运行
    完成数据输入。用户还可以检查输入的数据是否存在
    验证的特定时期和组织单位
    规则，并显示这些验证规则的违反情况。

  - 通过分析数据集，即检查数据中的差距。

  - 通过数据三角剖分，即比较相同的数据或指标
    来自不同的来源。

## 验证规则分析 { #validation_rule_analysis } 

### 关于验证规则分析 { #about-validation-rule-analysis } 

验证规则基于一个表达式，该表达式定义了数据元素值之间的数值关系。
数据元素值之间的数值关系。表达式构成一个条件，它
应断言符合某些逻辑标准。

该表达式包括：

  - 左侧

  - 右边

  - 操作员

验证规则可以断言 "疑似疟疾病例检测"\>= "确诊疟疾病例"。
"疟疾确诊病例"。

左侧和右侧必须返回数字值。

验证规则分析针对数据测试验证规则
在系统中注册。当
验证规则表达式中定义的条件不满足，其中
表示条件为假时。

You can configure a validation rule analysis to automatically send out
information about validation violations to selected user groups. These
messages are called *validation notifications* and you create them in
the **Maintenance** app. Validation notifications are sent via the
internal DHIS 2 messaging system.

### 工作流程 { #workflow } 

1.  在**维护**应用程序中，创建验证规则和验证
    规则组。

2.  (可选）在**维护**应用程序中，创建验证
    通知。

3.  自动或手动运行验证规则分析。

      - 在**日程安排**应用程序中，您可以安排验证工作
        规则分析可针对所有验证规则自动运行
        包括在一个或多个验证规则组中。在
        系统已运行分析，您将看到验证
        透过（
        内部DHIS 2消息传递系统。

      - 在**数据质量**应用程序中，运行验证规则
        手动分析选定的验证规则。之后
        分析过程已完成，您将看到验证列表
        违规行为（如果有）。

### 安排验证规则分析以自动运行 { #schedule-a-validation-rule-analysis-to-run-automatically } 

> **注意**
>
>仅一次或多次验证中包含的验证规则
>通知将成为验证规则分析的一部分。如果
>没有用于验证的相应验证通知
>规则，将不会发送任何通知。

> **注意**
>
>在自动运行验证规则分析时，任何结果都不会
>已保留，将在此运行期间保留。坚持不懈
>结果目前只能通过API访问。请教
>开发人员指南，了解有关持久性的更多信息
>可以访问违反验证规则的信息。

1.  确认您已创建所有验证规则，验证
    规则组和所需的验证通知。

2.  打开** Scheduler **应用程序，然后单击右下角的添加按钮。

3.  为新作业选择合适的名称。

4. 使用下拉菜单选择**监控**任务类型。 

5. 选择作业的运行频率，即作业应在何时以及多久运行一次。

6. 填写**参数**部分，包括 验证 规则组。

7. 按**添加作业**按钮以确认作业创建。有关添加作业的更多信息，请参见[Scheduling]（data-administration.html＃scheduling）。

### 手动运行验证规则分析 { #run-a-validation-rule-analysis-manually } 

![](resources/images/data_quality/validation_rule_analysis.png)

1.  确认您已创建所有验证规则，验证
    规则组和所需的验证通知。

2.  打开**数据质量**应用程序，然后单击**验证规则
    分析**。

3.  选择**开始日期**和**结束日期**。

4.  选择您要包括在其中的**验证规则组**
    分析。

    您可以从以下选项中选择所有验证规则或所有验证规则：
    单个验证规则组。

5.  (可选）选择 **发送通知**以触发验证
    通知。

    > **Note**
    >
    > If you want to send out validation notifications, you must first
    > create them in the **Maintenance** app.

6.  （可选）选择*保留新结果*以保留所有未保留的结果
    分析过程中发现的结果

7.  选择一个**父级组织单位**。

8.  点击**验证**。

    分析过程的持续时间取决于要处理的数据量。
    被分析。如果没有违反验证规则，
    you'll see a message saying *Validation passed successfully*. If
    有验证违规行为，它们会在
    列表。

    ![](resources/images/data_quality/validation_rule_analysis_result.png)

9.  （可选）单击显示详细信息图标以获取有关的更多信息
    验证违规。在弹出窗口中，您将找到信息
    关于验证规则中包含的数据元素及其
    相应的数据值。您可以使用此信息来识别
    验证规则违反的来源。

10. （可选）单击**下载为PDF **，**下载为Excel **或
    **下载为CSV **，以下载以下内容中的验证违规列表：
    PDF，Excel或CSV格式。

### 也可以看看 { #see-also } 

  - [管理验证
    规则]（https://docs.dhis2.org/master/zh/user/html/manage_validation_rule.html）

  - [数据管理
    应用]]（https://docs.dhis2.org/master/zh/user/html/data_admin.html）

## 离群点检测{ #outlier_detection } 

### 关于离群点检测{ #about-outlier-detection } 

离群值检测工具可识别出与其他数据在数值上相差较远的值。
在数值上与其他数据相去甚远的值，这可能表明它们是离群值。
该分析基于标准正态分布。DHIS 2 会计算
组织单位、数据元素、类别选项组合和属性选项组合的所有值的平均值。
和属性选项组合的所有值的平均值。

> **Note**
>
>  As indicated above, this data quality analysis is only appropriate for 
>  data which is normally distributed. Data with large seasonal
>  variation, or which may be distributed according to other statistical models
>  (e.g. logistical ) may lead values being flagged which actually should be considered valid. 
>  It is therefore recommended to first confirm whether the data actually is normally 
>  distributed before running a standard deviation outlier analysis.

### 运行离群点检测{ #run-outlier-detection } 

![](resources/images/data_quality/std_dev_analysis.png)

1.  打开**数据质量**应用程序，然后单击**异常值检测**。

2.  选择一个或多个数据集。

3.  选择 **组织单位**。

    可选择多个组织单位。分析依据的是所选单位的子层级中所有组织单位的原始数据，而不是汇总数据。

4.  选择**从日期**和**到日期**。

5.  设置要使用的**算法**。 

    **Z-score**（基于数据值的平均值）、**修正 Z-score**（基于数据值的中位数）和**最小-最大值**（基于存储的最小-最大数据值）是可用的算法。

6. 选择**阈值**。

   这是指在将数据归类为离群值之前，允许数据偏离平均值的标准差个数。

7. 选择 ** 最大结果**。

   这是指结果中列出的离群值的最大数量。

8. (可选）选择**数据开始日期**和**数据结束日期**

   这些字段可用于对所提供日期范围内的数据子集进行离群值检测分析。留空时，将使用数据集的自然开始和结束日期 _（在高级部分）_。

9. (Optional) Select a measure to **Sort by**.

   离群值可按**Z-score**或按**与平均值的绝对偏差**_（高级部分）_进行排序。

10. 点击**开始**
    分析过程的持续时间取决于分析的数据量。如果存在标准偏差异常值，将以列表形式显示。
    ![](resources/images/data_quality/std_dev_analysis_outlier_result.png)
    对于每个离群值，您将看到数据元素、周期、组织单位、值、Z 值、偏差、标准偏差、平均值、最小值和最大值。最小值和最大值指的是根据分析所选标准差的数量得出的边界值。

11. (可选）点击 **下载为 CSV**，以 CSV 格式下载列表。

> **提示**
>
> 点击复选框标记异常值，以便进一步跟进。

## 最小最大离群点检测{ #min_max_outlier_detection } 

### 关于基于最小最大值的离群点检测{ #about-minimum-maximum-value-based-outlier-detection } 

您可以通过设置一个
每个数据值的最小/最大值范围。您可以定义值
手动设置范围或自动生成它们。

The auto-generated minimum maximum value range is suitable only for
normally distributed data. DHIS2 will determine the arithmetic mean and
standard deviation of all values for a given data element, category
option, organisation unit and attribute combination. Then the system
will calculate the minimum maximum value range based on the **Data
analysis std dev factor** specified in the **System Settings** app.

对于高度偏斜或零膨胀的数据（通常是这种情况）
包含汇总数据），DHIS2自动生成的值可能不会
提供准确的最小最大值范围。这可能导致
过多的虚假违规行为，例如，如果您分析与
季节性疾病。

> **注意**
>
>计算所有属性的最小最大值范围
>给定数据元素的组合选项，类别选项和
>组织单位组合。

### 工作流程 { #workflow } 

1.  自动或自动创建一个最小值最大值范围
    手动。

      - 在**数据管理**应用程序中，您可以生成数值范围
        自动。

      - 在**数据录入**应用程序中，您可以手动设置数值范围。 

2.  在**数据质量**应用中，运行**最小-最大离群值分析**。

### 配置最小最大离群点检测{ #configure-a-minimum-maximum-outlier-detection } 

#### 自动创建最小值最大值范围 { #create-minimum-maximum-value-range-automatically } 

> **注意**
>
>自动生成的最小最大值范围可能对许多人有用
>情况，但建议验证数据是否确实
>使用此功能前呈正态分布。

您会生成最小最大值范围，该最小值最大值范围是根据
**数据管理**应用程序。新值范围将覆盖任何值
系统先前计算的范围。

1.  设置**数据分析标准偏差（std dev）系数**：

    1.  打开**系统设置**应用，然后单击**常规**。

    2.  在“**数据分析标准差因子**字段中，输入一个值。

        这设置了要在
        离群值分析。默认值为2。更高的值
        表示分布范围较广，可能导致异常值
        没有被分析正确标记。

2.  打开**数据管理**应用程序，然后单击**最小-最大值生成**。

3.  选择数据集。

4.  选择一个**组织机构**。

5.  点击**生成**。

    数据集中所有数据元素的新的最小最大值范围
    所有组织单位（包括
    所选组织单位的后代）。

#### 手动创建最小值/最大值范围 { #create-minimummaximum-value-range-manually } 

![](resources/images/data_quality/set_min_max_manually.png)

1.  在**数据输入**应用中，打开一个数据输入表单。

2.  双击要为其设置最小/最大值范围的字段。

3.  在出现的对话框中输入**最小限制**和**最大限制**。

4.  点击**保存**。 

    如果下次您的值不在新值范围内
    输入数据，数据输入单元格将出现橙色
    背景。

5.  （可选）键入注释以解释差异的原因，
    例如，在设施中发生的事件可能会产生大量
    客户数量。

6.  （可选）点击**保存评论**。

> **提示**
>
>单击星号图标以标记该值以进行进一步跟踪。

#### 删除最小最大值范围 { #delete-minimum-maximum-value-range } 

You can permanently delete all minimum maximum value ranges for selected
data sets and organisation units in the **Data Administration** app.

1.  打开**数据管理**应用程序，然后单击**最小-最大值生成**。

2.  选择数据集。

3.  选择一个**组织单位**。请注意，该选择会级联到 
    后裔组织单位！

4.  点击**删除**。

### 运行最小最大离群点检测{ #run-a-minimum-maximum-outlier-detection } 

![](resources/images/data_quality/min_max_analysis.png)

1.  确认您已创建最小最大值范围。

2.  打开**数据质量**应用程序，然后单击**异常值检测**。

3.  选择数据集。

4.  选择**父组织单位**。

    可选择多个组织单位。分析依据的是所选单位的子层级中所有组织单位的原始数据，而不是汇总数据。

5.  选择**从日期**和**到日期**。

6.  将**算法**设置为**最小-最大值**。

7.  选择 ** 最大结果**

    这是指结果中列出的离群值的最大数量。

8.  点击**开始**

    分析过程的持续时间取决于要处理的数据量。
    被分析。如果存在标准偏差离群值，它们将
    以列表形式呈现。

    ![](resources/images/data_quality/min_max_result.png)

    对于每个离群值，您将看到数据元素、时间段和组织单位、
    值、偏差、最小值和最大值。

9.  (可选）点击 **下载为 CSV**，以 CSV 格式下载列表。

> **提示**
>
> 点击复选框，标记该值，以便进一步跟进。

## 后续分析 { #follow_up_analysis } 

### 关于后续分析 { #about-follow-up-analysis } 

跟进分析会创建一个列表，列出所有标记为跟进的数据值。
后续分析。您可以在**数据录入**应用程序和标准偏差离群值或异常值的结果列表中标记要跟进的数据值。
应用程序以及标准偏差离群值分析或最小最大离群值分析的结果列表中，标记需要跟进的数据值。
最小值最大值离群值分析的结果列表。

### 创建标记为后续数据值的列表 { #create-list-of-data-values-marked-for-follow-up } 

![](resources/images/data_quality/follow_up_analysis.png)

1.  打开**数据质量**应用，然后单击**后续分析**。

2.  选择一个或多个数据集。

3.  选择 **组织单位**。

    可选择多个组织单位。分析依据的是组织单位 "下 "的原始数据，而不是汇总数据。

4. 选择**开始日期**和**结束日期**，这两个日期定义了您有兴趣查找已标记为要跟进的值的时段。 

4. 按**跟进**，生成已标记为需要跟进的数值列表。 

5.  (可选）单击 **下载为 PDF**、**下载为 Excel** 或 **下载为 CSV**，以 PDF、Excel 或 CSV 格式下载验证违规列表。

![](resources/images/data_quality/follow_up_analysis_result.png)

> **提示**
>
> 选中列表中的**取消跟踪**复选框，并点击**取消跟踪**按钮，即可从标记的数据值中删除跟踪标记。
> 您还可以在该字段中输入注释，以显示有关该值的任何其他信息。 
> 有关该值的其他信息。

