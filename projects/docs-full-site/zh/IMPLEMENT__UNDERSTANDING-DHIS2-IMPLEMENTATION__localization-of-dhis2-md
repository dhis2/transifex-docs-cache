---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/master/src/implementation/localization-of-dhis2.md"
revision_date: "2021-06-14"
---

# DHIS 2的本地化 { #localization-of-dhis-2 }

## DHIS 2本地化概念 { #localization-intro }

本地化涉及使应用程序适应特定位置。在特定国家/地区实施 DHIS 2 时，应分配足够的资源来翻译和本地化应用程序（如果需要）。必须考虑用户界面元素、消息、布局、日期和时间格式、货币和其他方面的翻译。除了用户界面本身的翻译之外，还必须考虑翻译数据库中包含的元数据内容。

接口翻译被编译到系统本身中，因此只能通过较新版本的 DHIS 2 来访问新翻译。另一方面，数据库翻译特定于您的实施，可以添加到现有的 DHIS 2 实例中。

这两个方面是独立管理的，流程和工具概述如下。

## 用户界面本地化 { #user-interface-localization }

### 总览 { #overview }

DHIS 2 通过使用 Java 属性字符串和 PO 文件支持用户界面的国际化 (i18n)。当消息源自后端 Java 服务器时，将使用 Java 属性文件，而 PO 文件则用于用 JavaScript 编写的前端应用程序。 DHIS 2 Android 应用程序使用特定的 XML 格式。

> **注意**
>
> 翻译者无需担心资源文件格式不同；翻译平台隐藏细节，只显示需要翻译的字符串。
> 例如，下图显示了将资源翻译为法语时的源字符串和目标字符串。
>
> ![](resources/images/i18n/translation_ui.jpg)

DHIS 2 中的所有消息都应始终有一个英文字符串。当用户选择给定语言并且存在该语言的翻译时，将显示该翻译。但是，如果所需语言的字符串丢失，则将应用后备规则。如果两个给定翻译（例如葡萄牙语和巴西葡萄牙语）共享共同消息，则不需要以变体语言执行完整翻译。仅应翻译不同的消息。
然后按以下方式应用后备规则（假设用户选择巴西葡萄牙语作为其语言：

1.  如果存在，则以巴西葡萄牙语显示消息。

2.  如果变体语言中不存在该消息，则使用葡萄牙语消息（如果存在）。

3.  如果基本语言或变体语言都没有消息，请选择最终后备语言英语。

> **重要**
>
> 在 DHIS 2 的各个部分中，有许多源字符串，例如 "dd MMM yyyy 'to '" 用于日期/时间格式。部分值不应翻译，因为它实际上是使用的特殊格式字段通过 Java 或 JavaScript 插入或格式化字符串。在此示例中，**可以**翻译的值部分将是“to”，例如西班牙语中的“a”。应该**不**翻译的特殊字符串是“dd MMM yyyy”。如果翻译这些日期格式模板字符串，可能会导致应用项目出错！

> **重要**
>
> 一些特殊变量（例如 {0} ）使用大括号。这表示将由应用项目替换为数字或其他值的变量。您必须将此变量表示法放在正确的位置，并确保不要修改它。

### 翻译平台 { #translation-server }

DHIS2 现在使用 [transifex](www.transifex.com) 作为我们管理翻译的主要平台。您可以通过 [translate.dhis2.org](https://translate.dhis2.org) 或直接访问 https://www.transifex.com/hisp-uio/public 访问 DHIS2 资源。

### 我如何为翻译做贡献？ { #how-do-i-contribute-to-translations }

#### 注册为翻译 { #register-as-a-translator }

第一步是访问该项目。有两种方法可以做到这一点：

1. 导航到该平台并创建一个 transifex 帐户，然后 - 请求作为“DHIS 2 Core Apps”翻译团队的成员访问我们的组织“HISP UiO”。
    Transifex 这里有一些有用的说明：[翻译入门](https://docs.transifex.com/getting-started-1/translators)

1. 向DHIS 2小组发送电子邮件，电子邮件地址为translate@dhis2.org，以请求访问权限。
   请提供： - 您希望我们授予访问权限的用户的姓名、电子邮件地址和翻译语言，以及 - 有关您为何有兴趣为 DHIS 2 翻译做出贡献的一些信息

#### 编辑翻译 { #edit-translations }

拥有翻译权限后，就可以开始通过transifex Web编辑器进行翻译了。

Transifex 这里有一个有用的指南：[使用 Web 编辑器进行在线翻译](https://docs.transifex.com/translation/translated-with-the-web-editor)

这些项目尽可能一对一地代表DHIS 2应用程序。例如，** APP：Data Visualizer **项目包含Data Visualizer应用程序的翻译字符串。

我们针对DHIS2用户界面的transifex项目均从以下一项开始：

- ** APP：**表示项目包含特定应用程序的字符串
- ** APP-COMPONENT：**表示项目是应用程序使用的组件库
- ** ANDROID：**表示该项目是Andriod应用

另外，** APP：服务器端资源**包含一些字符串，供多个应用程序使用；即：

- “数据输入”
- “保养”
- “数据透视表”
- “报告”

> **提示**
>
> 确保特定应用程序有完整翻译，例如“追踪器捕获”，您需要确保翻译完成：
>
> - 应用程序项目：**APP：跟踪器捕获**
> - 以 **APP-COMPONENTS** 开头的任何项目
> - **APP：服务器端资源**（如果需要）。对于跟踪器捕获来说，这是**不需要**。

在项目中，我们拥有资源，这些资源在源代码中表示本地化文件。为了支持具有相同本地化文件的多个DHIS2版本，_version_与文件的每个实例关联。因此，对于** APP：Data Visualizer **，资源列表在Web编辑器中如下所示：

![](resources/images/implementation_guide/transifex_data_vis.jpg)

即该应用程序只有一个源资源（`en.pot`），但我们添加了从 2.31 (v31) 到最新开发版本 (master) 的版本。版本显示在“类别”字段中，并且也作为资源名称的前缀可见，例如`v31--en-pot`。

> **注意**
>
>通常，我们要求翻译人员专注于“ **主**”资源；它通常包含以前版本的所有字符串，并且在添加翻译时，平台也会在以前版本中填写匹配的翻译。

### 系统何时会提供新翻译？ { #when-will-new-translations-be-available-in-the-system }

我们提供夜间服务，该服务从transifex平台提取新翻译并在源代码上打开提取请求。

该服务遍历所有项目和受支持的语言，并执行以下操作：

1. 从Transifex中提取本地化文件（**完成翻译20％以上的**）
2. 如果找到语言的更改，则在源代码上引发拉取请求

作为正常开发过程的一部分，对拉取请求进行审查并将其合并到代码库中。

> **信息**
>
> 一般来说，transifex 的翻译将出现在所有受支持的 DHIS 2 版本的下一个可用稳定版本中
>
> _如果您需要确保您的翻译包含在下一个稳定版本中，请联系我们 (translate@dhis2.org) 说明您的需求，我们会让您知道我们可以做什么。_

> **提示**
>
> 在大多数情况下，您在 transifex 中添加的翻译应该会在几天内在我们的游戏服务器 (https://play.dhis2.org) 上的所有开发演示版本中可见。

### 如何添加新语言？ { #how-do-i-add-a-new-language }

请通过电子邮件translate@dhis2.org或在[实践社区]（https://community.dhis2.org/c/translation）与我们联系，我们将在Transifex的项目中添加该语言。

一旦该语言的资源翻译超过 20%，它们将开始被拉入系统。然后，它们将在开发演示版本中可见，并在未来的版本中提供。

> **注意**
>
> DHIS 2独立于UI来管理元数据（数据库）语言环境。 _请参阅以下部分。_

## 元数据/数据库翻译 { #metadata-database-translations }

除了用户界面的翻译之外，DHIS 2 还支持数据库中元数据内容的本地化。可以通过**维护应用程序**翻译单个对象，但为了更好地支持标准翻译工作流程，我们为此开发了专门的应用程序。

可以在**维护应用程序>区域设置**中添加新的元数据区域设置。

### DHIS 2 Translations应用程序 { #translations-app }

DHIS 2 **翻译应用程序**可用于将所有元数据（数据元素、类别、组织单位等）翻译为数据库中存在的任何语言环境。

首先，只需从顶级菜单中选择 **翻译应用程序**。

![](resources/images/i18n/translations_app.png)

1.  从 **对象** 下拉菜单中选择要转换的对象类型，例如“数据元素”。

2.  确保您已将 **目标区域设置** 设置为正确的语言。

3.  选择您想要翻译的特定对象，然后翻译每个属性（名称、简称、描述等）。这些属性因对象而异。

4.  完成特定对象的翻译后，按“保存”以保存更改。

> **注意**
>
>您可以使用
该应用程序的右上角。
