---
edit_url: "https://github.com/dhis2/dhis2-android-sdk/blob/master/docs/content/developer/dhis2-services.md"
revision_date: '2023-11-17'
tags:
- Develop
---

# DHIS2 服务{ #android_sdk_dhis2_services }

## DHIS2 业务逻辑{ #dhis2-business-logic } 

SDK 资源库提供元数据访问权限，允许创建和修改数据，但在数据验证方面比较懒惰。例如，如果注册已完成，就不允许用户创建新事件。SDK 资源库不会对此进行验证，而是直接创建新事件；应用程序负责阻止创建新事件。

为了让这项任务变得更容易，SDK 包含了一些评估纯 DHIS2 业务逻辑的服务。这些服务位于相关模块中，通常以 `Service` 作为后缀。例如

```java
// Event services
d2.eventModule().eventService()
    | .canAddEventToEnrollment("enrollment_uid", "program_stage_uid")
    | .getEditableStatus("event_uid")
    | .isEditable("event_uid") 
    | .hasDataWriteAccess("event_uid")

// Enrollment services
d2.enrollmentModule().enrollmentService()
    | .getEnrollmentAccess("tracked_entity_instance_uid", "program_uid")
    | .isOpen("enrollment_uid")

// Tracked entity instance services
d2.trackedEntityModule().trackedEntityInstanceService()
    | .inheritAttributes("from_tei_uid", "to_tei_uid", "program_uid")
```

请查看集成开发环境中的 javadoc 文档，了解每个方法的详细信息。

## 值类型助手{ #value-type-helper } 

The SDK include a enum helper class called `ValueType`. This class defines all the different types of values that you can find in DHIS2. In addition, for each of them you can find a validator for the type of value and information about the type of value it is, whether it is a date, a string, a boolean or other type.

要访问值的类型，只需通过 valueType 的方法即可。

```Java
    valueType.isInteger()；
    valueType.isDecimal()；
    valueType.isNumeric()；
    valueType.isBoolean()；
    valueType.isText()；
    valueType.isDate()；
    valueType.isFile()；
    valueType.isCoordinate()；
    valueType.isGeo()；
    valueType.isJson()；
```

从 valueType 开始验证一个值的方法如下：

```java
    valueType.getValidator().validate("value");
```

该验证器将返回一个 `Result` 结果，可以是 `Success` 或 `Failure`。此外，每种 `ValueType` 都会返回不同类型的错误，这样如果值没有通过验证，就能更容易地找出问题所在。

