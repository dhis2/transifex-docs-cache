---
edit_url: "https://github.com/dhis2/dhis2-android-docs/blob/main/content/capture-app/app-android-settings-configuration.md"
revision_date: '2024-05-28'
tags:
- 用
---

# Android 设置 Web 应用程序 { #capture_app_android_settings_webapp }
## 概览 { #capture_app_android_settings_webapp_overview }

本部分重点介绍 [Android 设置 Web 应用程序](https://apps.dhis2.org/app/a1bd6b5b-de8c-4998-8d34-56c18a139683) 实现。


[Android 设置 Web 应用程序](https://apps.dhis2.org/app/a1bd6b5b-de8c-4998-8d34-56c18a139683) 允许管理员为 DHIS2 Android 应用程序配置同步参数，加密 Android 设备的本地数据库，自定义程序、数据集和主屏幕的外观，并添加 TEI Analytics 项目。此 Web 应用程序中定义的配置参数将覆盖使用 DHIS2 Android Capture 应用程序的所有 Android 设备的设置。

请注意，在此版本的 Web App（2.3）中，如果 DHIS2 版本等于或高于 2.40，则只有具有“M_androidsettingsapp”或“ALL”权限的用户才能在配置中定义这些参数。访问 Web 应用程序的其他用户可以看到参数的值，但无法编辑它们。

> **警告**
>
> 如果DHIS2 版本不高于2.40，则只有具有“ALL”权限的用户才能在配置中定义这些参数。
>


## 常规设置{ #capture_app_android_settings_webapp_general }

包括 Matomo URL 和项目 ID、每个 TEI 下载的保留值数量以及加密设备数据库等配置。

![](resources/images/capture-app-general-settings.png)

### Matomo 配置{ #capture_app_android_settings_webapp_general_matomo }

DHIS2 Android 应用程序发送匿名分析，可用于评估性能和/或在早期阶段检测问题。 [Matomo](https://matomo.org) 是用于此目的的工具，并在公众无法访问的特定服务器上运行。但是，实现可以设置自己的
 Matomo 实例（或使用云版本）以收集和分析统计数据。

准备好 Matomo 实例后，您应该会获得 URL 和项目 ID，如下图（左）所示。 ID可以直接传入，但URL后面需要带*/matomo.php*，并以*https*或*http*开头，如下图（右）。

![](resources/images/capture-app-matomo-instance.png){width=33%}
![](resources/images/capture-app-matomo-settings.png){width=33%}


### 移动配置{ #capture_app_android_settings_webapp_generalmobile_configuration }
此部分允许管理员用户编辑短信网关广告结果发送者电话号码。
此配置可以在 Android 应用程序中找到。
- 点击设置
- 点击短信设置

![](resources/images/capture-app-sms-settings.png){width=33%}

### 保留值{ #capture_app_android_settings_webapp_general_reserved_values }
这将指定为在设备中下载而保留的每个 TEI 属性的值的数量。默认情况下，Android 应用程序保留 100 个 Id，但可以添加或减少此数量。

要在 Android 应用程序中找到此配置：
- 点击设置
- 单击保留值
- 要重新填充它们，请单击*管理保留值*

![](resources/images/capture-app-reserved-values.png){width=33%}
![](resources/images/capture-app-reserved-values-refill.png){width=33%}

### 加密设备数据库{ #capture_app_android_settings_webapp_general_encrypt_database }
这将迫使所有设备加密存储数据库，从而提高针对数据盗窃攻击的安全级别。

默认情况下，DHIS2 Android 应用程序数据库未加密，但管理员可以检查*加密设备数据库*以加密每个设备中存储的元数据和数据。加密数据库会对 Android 应用的数据库容量和性能产生影响（降低 10-15%）。请注意，选择或取消选择此选项时，不会丢失任何数据（即使之前尚未与服务器同步）

> **警告**
>
> 这是一个关键操作，将影响所有与服务器同步的 Android 设备的本地数据库（不会影响服务器 DHIS2 数据库）。
>
> 默认情况下，Android 应用程序数据库未加密，但管理员可以检查*加密设备数据库*以加密每个设备中存储的元数据和数据。加密数据库会对数据库容量和Android应用程序的性能产生影响。请注意，选择或取消选择此选项时，不会丢失任何数据（即使之前尚未与服务器同步）

### 允许截图{ #capture_app_android_settings_webapp_general_screenshots }
本部分允许配置使用 Android 捕捉应用程序截图或屏幕共享的可能性（使用 Teamviewer、Teams 等应用程序进行远程支持时需要使用该应用程序）。请注意，默认情况下屏幕截图是关闭的。

> **警告**
>
> 按照安全和隐私建议，DHIS2 Android 应用程序默认禁用截取屏幕截图（以及从其他应用程序捕获屏幕）的可能性。在相同情况下，允许屏幕截图可能有助于支持和/或共享目的，但在启用之前请确保您了解此设置的安全和隐私影响。
>


### 跳过 DHIS2 版本验证（**新 2.4**）{ #capture_app_android_settings_webapp_general_skip_version_validation }
在连接 DHIS2 实例时，应用程序通常会验证与支持版本的兼容性。不过，在某些情况下，连接到不支持的实例可能是必要或有用的。请注意，默认行为是执行严格的版本验证。要跳过 DHIS2 版本兼容性验证过程，请选择复选框。

![](resources/images/capture-app-skip-version-validation.png)

> **警告**
>
> 此选项仅适用于使用 Android Capture 应用程序 3.0 或更高版本。
>


### 选择加入功能（**v2.3.1**）{ #capture_app_android_settings_webapp_general_optin_features }
选择启用功能是应用程序中的附加功能或设置，用户可根据喜好选择启用。与默认设置不同，这些功能需要用户的明确同意或操作（"选择加入"）才能激活。
选择加入允许用户通过向应用程序添加额外功能来定制体验。请记住，这些功能可能会有特定的注意事项，因此建议在选择加入前查看任何相关信息。

要启用一项功能：

- 点击 *选项功能*。 
- 将显示可用的选择进入设置列表。
- 单击功能复选框启用该功能。

**数据输入表单（**新 2.4**）：** Android 捕捉应用程序重新设计了所有值类型的输入，改进了选择模式，增加了可点击区域和文本，以提供更简洁、更直观的用户体验。默认情况下，Android Capture App 将显示新表单。管理员用户可单击复选框选项，选择不使用新版表单。

![](resources/images/capture-app-optin-features.png)

### 禁用所有设置{ #capture_app_android_settings_webapp_general_disable_settings }
单击此按钮，用户将删除所有 Android 配置设置。任何配置都不会应用到 Android 应用（如果是这种情况，应用的同步参数就是 Android 捕捉应用中定义的参数）。


## 同步{ #capture_app_android_settings_webapp_synchronization }

它提供了控制元数据/数据同步的附加参数。


### 全球{ #capture_app_android_settings_webapp_synchronization_global }

元数据同步
:   管理员用户可以选择元数据的同步频率，例如每 24 小时同步一次元数据。

数据同步
:   管理员用户可以选择数据同步的频率，例如每 6 小时同步一次数据。

![](resources/images/capture-app-sync-global.png){width=50%}
![](resources/images/capture-app-sync-global-app.png){width=33%}


使用新的跟踪器导入器
:   管理员用户可以选择使用哪个跟踪器导入端点。

> **警告**
>
> 该选项仅适用于从 2.38 版 DHIS2 API 开始使用的安卓设置网络应用程序。
>
> 默认情况下，如果 DHIS2 API 版本为 2.38 或更高，安卓应用程序将使用 2.37 */api/tracker* 端点中引入的导入器，但管理员可以取消选择此选项，并使用传统的跟踪器导入器 */api/trackedEntityInstances*。
> 
>![](resources/images/capture-app-sync-global-importer.png){width=50%}
>

使用新的 Tracker 输出程序（**v2.3**）
:   管理员用户可选择使用哪个跟踪器输出端点。

> **警告**
>
> 该选项仅适用于从 2.40 版 DHIS2 API 开始使用的安卓设置网络应用程序。 
> 
> 默认情况下，如果 DHIS2 API 版本为 2.40 或更高，安卓应用程序将使用 2.37 */api/tracker* 端点中引入的导出器，但管理员可以取消选择此选项，并使用传统的跟踪器导入器 */api/trackedEntityInstances*。
>
>
>![](resources/images/capture-app-sync-global-exporter.png){width=50%}
>

限制下载文件大小 (**v2.3**)
:   管理员用户可限制下载文件资源的最大大小（以 KB 为单位）。

![](resources/images/capture-app-sync-download-file-size.png){width=33%}



### 计划{ #capture_app_android_settings_webapp_synchronization_program }

该部分控制程序数据同步参数。其中有一部分用于定义全局或默认参数，以用于所有程序的同步。

#### 全局设置{ #capture_app_android_settings_webapp_synchronization_program_global }

全局设置适用于 Android 用户可以访问的所有程序。这些设置可以在全局、每个组织单位、每个程序或每个组织单位和程序中启用。

![](resources/images/capture-app-program-global-settings.png){width=50%}

TEI 下载
:   从服务器下载 TEI 的最大数量。

TEI 下载期
:   它下载在某段时间内更新过的 TEI，例如上个月更新过的 TEI。

活动下载
:   要下载的事件的最大数量（从事件程序中下载，见下文注释）。

活动下载时间
:   它下载事件日期属于特定时期的事件。

> **注**
>
> 当设置 TEI 数量和事件数量时，用户可能会对下载的数据量产生误解。安卓应用程序将下载在字段中设置的 TEI 数量之后的 TEI 数量及其所有事件。Android 应用程序将根据字段限制仅针对 * 事件程序*（而非 * 跟踪程序*）下载的事件数量。 
>
> 例如，假设服务器中的*跟踪程序*有几个程序阶段，每个 TEI 有 5 个事件（注册和程序阶段）。要下载的 *TEI* 值设置为 100。此外，服务器中还有一个*事件程序*，其中包含 1000 个事件。要下载的*事件*值已设置为 200。安卓应用程序将下载以下内容：从跟踪器程序中下载 100 x 5 个事件，从事件程序中下载 200 个事件，因此 Android 应用程序最终将下载 700 个事件。
>


#### 具体设置{ #capture_app_android_settings_webapp_synchronization_program_specific }

本部分允许管理员用户在同步数据时指定特定程序的行为。特定配置会覆盖本部分所列程序的常规设置。要为特定程序添加设置，请

- Click on *Add a Program-specific setting*, a Dialog will appear. 
- 单击 "每个程序的值 "标题下方的程序列表。
- 点击程序将显示需要配置的不同参数。参数数量取决于程序类型（带或不带注册）。 

**无需注册的程序设置**

![](resources/images/capture-app-program-specific-dialog-without_registration.png){width=50%}

**注册程序的设置**

![](resources/images/capture-app-program-specific-dialog-with_registration.png){width=50%}

如果保存了任何特定设置，则会有一个表格显示每个程序的特定配置摘要，以及编辑或删除这些设置的选项。

![](resources/images/capture-app-program-specific-table.png){width=50%}

> **注意事项**
>
> 使用每个程序的特定设置可能会对下载的 TEI 数量产生意想不到的结果，总数量可能会超过全局设置中定义的数量。这是应用程序从服务器下载 TEI 的方式造成的。Android 客户端将首先根据用户可访问的组织单位和最后更新字段从服务器下载最大数量的 TEI。然后，它将从特定程序中下载最大数量的 TEI。因此，如果从全局设置中下载的 TEI（上例中为 500）比从特定程序中下载的 TEI（500 用于疟疾病例诊断、治疗和调查）更新得更快，Android 客户端最终将下载 1000 个 TEI。
> 
> 这初看起来可能令人困惑，但一旦理解后，就可以用来确保下载特定程序的最少（和最多）TEI，这在特定实施中非常有用。
>
> 试想一下，在实施过程中，必须确保 Android 用户拥有特定程序服务器中的所有 TEI，而同一用户可以访问其他组织单位，其中其他 TEI 可能注册了另一个程序。该程序名为 "社区关怀"，有 17 个 TEI，这些 TEI 很久以前就已更新。管理员可以通过在 "全局设置 "中进行任意设置（如果需要减少带宽，应设置非常低的值）来确保下载 17 个 TEI，并为特定程序设置至少 17 个 TEI，如下图所示：
>
>![](resources/images/capture-app-program-specific-example-web.png){width=50%}
>
> 初始同步触发后，安卓设备将首先下载服务器上最后更新的 TEI（根据我们的示例，这些 TEI 不属于特定程序），然后下载特定程序中最多 20 个 TEI，结果如下（注意，该程序的所有 TEI 都已下载）：
>
>![](resources/images/capture-app-program-specific-example-mobile1.png){width=33%}
>
> 通过查看设置，可以了解到 TEI 的总数是如何达到预期的 37 个，其中 20 个来自全局设置，17 个来自特定程序。
>
>![](resources/images/capture-app-program-specific-example-mobile2.png){width=33%}
>

#### 重置所有数值{ #capture_app_android_settings_webapp_synchronization_program_reset_all }

点击 *Reset all values* 后，管理员用户将恢复程序部分的默认设置值。请注意，在这种情况下，每个程序都没有特定的设置。 

要保存任何配置，管理员用户需要点击 *Save* 按钮（没有 "ALL "或 "M_androidsettingsapp "权限的用户不能使用该按钮）


### 数据集{ #capture_app_android_settings_webapp_synchronization_data }

本节控制汇总数据同步参数。

#### 全局设置{ #capture_app_android_settings_webapp_synchronization_data_global }

第一部分是全局设置，适用于 Android 用户可以访问的所有数据集。 

![](resources/images/capture-app-dataset-global-settings.png){width=50%}

最大周期数定义了应用程序在数据同步过程中下载的过去周期数。

如果数据集有未来时段（"开放未来时段 "配置），应用程序在限制下载时段数量时不会将其考虑在内。

例如，在 "未来开放期数"=2 和 "最大下载期数"=1 的数据集中，应用程序将下载 3 期。

#### 具体设置{ #capture_app_android_settings_webapp_synchronization_data_specific }

要添加特定设置：

- 单击 * 添加数据集特定设置*，会出现一个包含数据集列表的对话框。 
- 单击数据集，该字段将根据数据集时间类型自动填写默认值。

![](resources/images/capture-app-dataset-specific-dialog.png){width=50%}

![](resources/images/capture-app-dataset-specific-table.png){width=50%}


### 用户同步测试{ #capture_app_android_settings_webapp_synchronization_user_sync_test }

本部分检查用户同步到其设备的数据和元数据的数量。您可以在任何有访问权限的用户身上运行此测试。此测试将显示安卓用户可访问的组织单位、数据集、程序规则、程序等的数量（因此安卓应用程序将下载的资源），以及元数据和数据的下载大小（大致估算）。请注意，用户无需拥有 "ALL "或 "M_androidsettingsapp "权限即可运行此测试。

![](resources/images/capture-app-user-sync-test.png){width=50%}

> **注：** 
>
> 红色高亮显示的值是因为该值被认为大于建议的最大值。


## 外观{ #capture_app_android_settings_webapp_appearance }

这些设置可以控制数据输入和列表表单的外观。

- 过滤器：它定义了可在不同应用程序菜单中启用的过滤器。
- 完成旋转器：打开/关闭显示数据输入表单进度的完成旋转器。

这些设置涉及可视化组件，因此必须由应用程序使用。
有关过滤器的更多信息，请查阅过滤器 [文档](https://docs.dhis2.org/en/use/android-app/android-specific-features.html#capture_app_generic_filter)。 

### 主屏幕{ #capture_app_android_settings_webapp_appearance_home_screen }

它允许管理员用户启用或禁用在主屏幕上显示与日期、组织单位、同步状态和分配给我相关的筛选器选项。

![](resources/images/capture-app-appearance-home.png){width=75%}


### 计划{ #capture_app_android_settings_webapp_appearance_program }

程序外观允许根据配置需要在程序中隐藏/显示功能。这些更改可以是全局性的，适用于所有程序，也可以是单个程序。

#### 全局设置{ #capture_app_android_settings_webapp_appearance_program_global }

全局设置适用于android用户有权访问的所有程序。

![](resources/images/capture-app-appearance-program-global.png){width=75%}

程序中的完成百分比 (%)： 
启用或禁用显示数据输入表格完成百分比的选项。

TEI 引用（**v2.3.1**）： 
它允许关闭/打开 TEI 引用选项。

折叠表格中的部分（**v2.3.1**）：  
当前行为允许各部分以手风琴样式折叠和展开。该选项可覆盖该行为，使表单（注册和活动）的所有部分保持打开状态，并移除每个部分的 "下一步 "按钮。 


#### 具体设置{ #capture_app_android_settings_webapp_appearance_program_specific }

该部分允许管理员用户自定义表单中的过滤器、完成百分比、强制搜索、推荐、TEI 标题、推荐选项和折叠部分等功能。下文将逐一说明。

要添加特定设置：

- Click on *Add a Program Settings*, and a dialog will appear.
- 点击显示程序列表的下拉菜单。
- 单击程序将显示需要配置的不同筛选器。类别组合过滤器取决于类别组合名称。

![](resources/images/capture-app-appearance-program-specific.png){width=75%}

![](resources/images/capture-app-appearance-program-specific-advanced.png){width=75%}

无需搜索的 TEI：
提供在线和离线搜索，并允许用户在没有事先搜索的情况下创建 TEI。

TEI 标头（**v2.3.1**）：
指定一个特定的属性或表达式，在 TEI 卡中显示为标题。 

添加 TEI 标头

- 选择计划指标
- 将显示与程序指示符相关的表达式

![](resources/images/capture-app-appearance-program-specific-tei-header.png)


> **注：**
>
> 如果所选程序缺乏与程序指标相关的表达式，而这些表达式对 Android 有效，则会显示一个通知框。 
> 
> 只有完全由属性和/或函数组成的表达式才被视为对 Android 有效。
> 
>![](resources/images/capture-app-appearance-program-specific-expression-valid.png)
> 
>![](resources/images/capture-app-appearance-program-specific-expression-invalid.png)
> 


如果保存了任何特定设置，则会有一个表格汇总每个程序的特定配置，以及编辑或删除这些设置的选项。 

![](resources/images/capture-app-appearance-program-table.png)

选项 "在程序工具栏中显示完成百分比 (%) "指的是 
![](resources/images/capture-app-appearance-programs-spinner.png){width=50%}

**搜索跟踪实体（v2.2）**

在输入新的 TEI 之前必须先进行搜索，以避免可能出现的重复，DHIS2 安卓应用程序就是这样设计的。新版本允许用户选择保留这一过程，或允许用户在不进行搜索的情况下创建 TEI。
默认情况下，允许用户在不进行搜索的情况下创建 TEI 的功能被禁用。



### 数据集{ #capture_app_android_settings_webapp_appearance_data }

它允许管理员启用/禁用数据集部分的筛选器

#### 全局设置{ #capture_app_android_settings_webapp_appearance_data_global }

第一部分是适用于android用户有权访问的所有数据集的全局设置。

![](resources/images/capture-app-appearance-dataset-global.png){width=75%}

#### 具体设置{ #capture_app_android_settings_webapp_appearance_data_specific }

要添加特定设置：

- 点击 *添加数据集设置*。将弹出一个对话框，其中有一个数据集列表下拉菜单。
- 点击数据集，将显示启用或禁用筛选器的选项列表。

![](resources/images/capture-app-appearance-dataset-specific.png){width=75%}

![](resources/images/capture-app-appearance-dataset-table.png){width=75%}


## 分析{ #capture_app_android_settings_webapp_analytics }

分析设置可定义将显示给用户的 TEI、主页、程序和数据集分析项目（图表、表格）。设置应用中定义的任何项目都将覆盖 Android 应用的默认行为，只显示设置应用中定义的项目。 

此外，尽管这些分析是使用安卓设置网络应用程序创建的，但数据聚合仅使用设备中存储的数据离线进行。

### TEI{ #capture_app_android_settings_webapp_analytics_tei }

分析范围是 TEI，因此可视化结果将显示在安卓应用程序的 TEI 面板中。

本节的目的是定义可视化方法，以显示*数据元素*和*计划指标*随时间的演变。在此基础上，它将只考虑属于可重复计划阶段的数据元素，或公式中至少包含一个属于可重复计划阶段的数据元素的计划指标。

创建**TEI 分析**项目：

1. 单击 *添加 TEI 分析*。将弹出一个对话框，其中包含一个小表格。
2. Choose a program and a repeatable program stage, and fill the form. The **Short name** is the only optional field.
3. 如果选择的是世卫组织营养以外的项目可视化，接下来要选择的字段是周期类型（每月、 每周、每天）、要素类型（计划指标、数据要素）和基于之前选择的要素类型的要素。请记住，这些要素与开始时选择的计划和可重复计划阶段有关。

![](resources/images/capture-app-analytics-item.png)

创建**世卫组织营养分析**项目：

1. 选择计划、计划阶段和世卫组织营养作为可视化类型。
2. 选择世卫组织可视化类型，可以是年龄对应身高 (HFA)、年龄对应体重 (WFA) 或身高对应体重 (WFH)。
3. 选择代表性别的跟踪实体属性。然后，您必须为男性指定 "男性头衔 "选项，为女性指定 "女性头衔 "选项。通常它们都是选项代码。
4. 选择将显示在水平 (x) 轴上的数据元素/程序指示器
5. 选择将显示在垂直（y）轴上的数据元素/程序指示符


![](resources/images/capture-app-analytics-who-item.png)

如果创建了任何 TEI 分析项目，则会有一个表格显示该项目的标题和程序名称，以及删除或编辑该项目的操作按钮。

![](resources/images/capture-app-analytics-table.png)

### 首页{ #capture_app_android_settings_webapp_analytics_home }

主页可视化显示在 Android 应用程序的主屏幕（"分析 "选项卡）上。

所有可用的项目都首先在 DHIS2 的 "数据可视化器 "或 "行列表 "应用程序中创建，并在 "安卓设置 "应用程序中进行配置。

> **注：**
>
> 可视化项目可从**数据展示台**或**行列表**应用程序中获取。 
> 
> 选择可视化类型时，显示的项目会自动更改；如果选择 "数据可视化"，则只会显示在数据可视化应用程序中创建的可视化。 
> 
> 当选择 "事件可视化"（**2.4**新功能）时，可视化搜索框中只会显示在 "线路列表 "应用程序中创建的元素。
>

创建**主页**项目：

1. 点击 "添加主页可视化 "按钮。
2. 选择 "可视化类型"（**2.4**新功能）
3. 点击搜索框，从列表中选择可视化项目或输入可视化项目的名称。
4. 添加替代标题，否则应用程序将显示可视化名称。
5. 默认情况下，应用程序将启用群组可视化设置。
   1. 创建一个新组：将弹出一个自由文本框，输入名称或组名称。
   2. 选择已创建的组可视化：从列表中选择一个选项来添加可视化或
   3. 点击复选框，禁用分组可视化。
6. 点击 "保存 "按钮。

![](resources/images/capture-app-analytics-home-newGroup.png)

![](resources/images/capture-app-analytics-home-createdGroup.png)

> **注：**
>
> 在未选择组的情况下添加的可视化将在一个共同的 "组 "中显示
>
>![](resources/images/capture-app-analytics-default-group.png)
>

编辑**主页**项的标题（**v2.2.1**）：

1. 通过扩展组搜索项目。
2. 点击项目名称旁边的 "编辑 "按钮。
3. 弹出窗口中只有可视化标题可用，其他字段将被禁用。如果需要，可以更改可视化标题。
4. 点击 "保存 "按钮。

![](resources/images/capture-app-analytics-home-editVisualization.png)


要删除**主页**项目：

1. 通过扩展组搜索项目
2. 点击项目名称旁边的 "删除 "按钮
3. 点击 "删除
4. 点击 "保存 "按钮

![](resources/images/capture-app-analytics-home-deleteVisualization.png)

要删除**主页**组：

1. 搜索要删除的特定组
2. 点击 "删除组
3. 点击 "删除
4. 点击 "保存 "按钮

将删除与该组相关的所有项目

![](resources/images/capture-app-analytics-home-deleteGroup.png)

重置所有数值：

1. 点击 "将所有值重置为默认值"。
2. 点击 "保存 "按钮

### 计划{ #capture_app_android_settings_webapp_analytics_program }

程序可视化显示在跟踪程序的搜索界面（分析选项卡）或安卓应用程序事件程序的列表界面（分析选项卡）中。

所有可用的项目都首先在 DHIS2 的数据可视化器或行列表（**新 2.4**）应用程序中创建，并在安卓设置应用程序中进行配置。

> **注：**
>
> 可视化项目可从**数据展示台**或**行列表**应用程序中获取。
>
> 选择可视化类型时，显示的项目会自动更改；如果选择 "数据可视化"，则只会显示在数据可视化应用程序中创建的可视化。
>
> 当选择 "事件可视化"（**2.4**新功能）时，可视化搜索框中只会显示在 "线路列表 "应用程序中创建的元素。
>
>![](resources/images/capture-app-analytics-program-visualization-type.png)
> 

创建**程序**项目：

1. 点击 "添加程序可视化 "按钮。
2. 选择可视化类型（**新 2.4**）。
3. 选择计划。
4. 点击搜索框，从列表中选择可视化项目或输入可视化项目的名称。
5. 添加替代标题，否则应用程序将显示可视化名称
6. 默认情况下，应用程序将启用群组可视化设置。
   1. 创建一个新组：将弹出一个自由文本框，输入名称或组名称。
   2. 选择已创建的组可视化：从列表中选择一个选项来添加可视化或
   3. 点击复选框，禁用分组可视化。
7. 点击 "保存 "按钮。

![](resources/images/capture-app-analytics-program-add.png)

编辑**程序**项的标题（**v2.2.1**）：

1. 通过扩展组搜索项目。
2. 点击项目名称旁边的 "编辑 "按钮。
3. 弹出窗口中只有可视化标题可用，其他字段将被禁用。如果需要，可以更改可视化标题。
4. 点击 "保存 "按钮。

![](resources/images/capture-app-analytics-program-editVisualization.png)

删除**程序**项目：

1. 通过扩展程序和组来搜索项目
2. 点击项目名称旁边的 "删除 "按钮
3. 点击 "删除
4. 点击 "保存 "按钮

![](resources/images/capture-app-analytics-program-deleteVisualization.png)

删除**程序**组：

1. 在相应程序中搜索要删除的特定组
2. 点击 "删除组
3. 点击 "删除
4. 点击 "保存 "按钮

将删除与该组相关的所有项目

![](resources/images/capture-app-analytics-program-deleteGroup.png)

重置所有数值：

1. 点击 "将所有值重置为默认值"。
2. 点击 "保存 "按钮

### 数据集{ #capture_app_android_settings_webapp_analytics_data }

数据集可视化显示在安卓应用程序数据集的列表屏幕（分析选项卡）中。

所有可用的项目都首先在 DHIS2 的数据可视化器应用程序中创建，并在安卓设置应用程序中进行配置。

创建**数据集**项目：

1. 点击 "添加数据集可视化
2. 选择数据集
3. 点击搜索框，从列表中选择可视化项目或输入可视化项目的名称。
4. 添加替代标题，否则应用程序将显示可视化名称
5. 默认情况下，应用程序将启用群组可视化设置。
   1. 创建一个新组：将弹出一个自由文本框，输入名称或组名称。
   2. 选择已创建的组可视化：从列表中选择一个选项来添加可视化或
   3. 点击复选框，禁用分组可视化。
6. 点击 "保存 "按钮。

![](resources/images/capture-app-analytics-dataset-add.png)

编辑**数据集**项的标题（**v2.2.1**）：

1. 通过扩展组搜索项目。
2. 点击项目名称旁边的 "编辑 "按钮。
3. 弹出窗口中只有可视化标题可用，其他字段将被禁用。如果需要，可以更改可视化标题。
4. 点击 "保存 "按钮。

![](resources/images/capture-app-analytics-dataset-editVisualization.png)

删除**数据集**项目：

1. 通过展开数据集和分组搜索项目
2. 点击项目名称旁边的 "删除 "按钮
3. 点击 "删除
4. 点击 "保存 "按钮

![](resources/images/capture-app-analytics-dataset-deleteVisualization.png)

删除**数据集**组：

1. 在相应的数据集中搜索要删除的特定组
2. 点击 "删除组
3. 点击 "删除
4. 点击 "保存 "按钮

将删除与该组相关的所有项目

![](resources/images/capture-app-analytics-dataset-deleteGroup.png)

重置所有数值：

1. 点击 "将所有值重置为默认值"。
2. 点击 "保存 "按钮

### 可视化用户测试{ #capture_app_android_settings_webapp_analytics_visualization_user_test }

可视化用户测试是 "主页"、"程序 "和 "数据集分析 "设置中的一项功能，可帮助管理员用户识别是否有特定用户可以查看可视化。

安卓设置程序会检查这三种权限中的至少一种：

1. 可视化是公开的
2. 用户可单独访问可视化系统
3. 用户所在的组有可视化访问权限

运行测试：

1. 从列表中选择用户
2. 点击 "运行测试

![](resources/images/capture-app-analytics-usertest-access.png)

![](resources/images/capture-app-analytics-usertest-access-visualization.png)

![](resources/images/capture-app-analytics-usertest-noaccess.png)

![](resources/images/capture-app-analytics-usertest-noaccess-visualization.png)

### 分析的局限性{ #capture_app_android_settings_analytics_limitations }

由于显示的汇总和计算是在设备中进行的，因此与网络相比，分析的实施受到了限制。 

总之，数据可视化兼容和支持的对象和功能有

- 完善的分析对象（序列、类别、筛选器）
- 使用相对时段（不支持固定时段）
- 用户有查看权限
- 透视表的限制
  - 标题行数：1 或 2 (*v2.3*)
  - 标题栏数量：2
- 图表的限制
  - 系列数量：无限制（但请记住，您是在小屏幕上进行渲染）
  - 类别数（不适用于饼图）无限制

关于网络展示台中的许多配置选项以及与指标和程序指标相关的支持功能和计算，还有许多限制适用于 Android Analytics。[本表](https://docs.google.com/spreadsheets/d/1127cz7M0K4fux5CU0V54V2Z77NZWCr0BTrZ6jcCec4Q) 总结了所有支持的功能。

同样，事件可视化在以下情况下被视为有效：

- 使用线条列表应用程序创建可视化
- 可视化类型为线条列表
- 使用相对时期
- 表格的限制
  - 列数15


> **Note (v2.2.1)**
>
> When searching for a visualization to add as part of the Analytics visualizations, all visualizations will be listed, but visualizations that don't meet the above restrictions will be disabled. 
>
> ![](resources/images/capture-app-analytics-visualization-search.png)
>


## 安装{ #capture_app_android_settings_webapp_installation }

用户可以登录DHIS2并转到**应用程序管理**来轻松安装Android设置网络应用程序。

- 点击 ** 应用程序中心**
- 进入 *安卓设置应用程序*。
- 点击 *安装 V2.X.X*

![](resources/images/capture-app-app-hub-install.png)
![](resources/images/capture-app-app-hub-install-webapp.png)


## 登录和首次设置{ #capture_app_android_settings_webapp_login }

用户首次安装并启动安卓设置 Web 应用程序后，Web 应用程序将要求设置并保存配置的默认值。这将对连接到实例的所有安卓设备应用默认设置。 

![](resources/images/capture-app-first-time-setup.png){width=50%}

> **警告**
>
> 请注意，以前的版本已经过时，因此您将从新的默认配置开始。

![](resources/images/capture-app-first-setup-with-deprecation-message.png){width=50%}

> **Warning (v2.3)** 
>
> When using DHIS2 version equal to or higher to 2.40, only users with "M_androidsettingsapp" or "ALL" authority can *save or update* the configuration, but any user will have *view* access once it is created.
> 


![](resources/images/capture-app-first-setup-no-authorities.png){width=50%}


## 输入并保存配置参数{ #capture_app_android_settings_webapp_enter_and_save }

### 数据存储{ #capture_app_android_settings_webapp_datastore }

在内部，所有设置都以 JSON 格式存储在 [Datastore](https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-240/data-store.html) 中。

数据存储结构：

| 项目      | 描述                                 | 数据类型 |
|-----------|---------------------------------------------|-----------|
| 命名空间 | 条目组织的命名空间       | 串    |
| 键       | 识别价值的钥匙            | 串    |
| 值     | 包含条目信息的值 | JSON格式      |

### 保存配置参数{ #capture_app_android_settings_webapp_save_config }

在所有设置部分的表单页脚，管理员用户可以找到一个*保存*按钮。

![](resources/images/capture-app-save_button.png)

只有当管理员用户单击此按钮时，对当前部分所做的所有更改才会保存在数据存储中。这些更改将在同步配置时应用到 Android 捕捉应用程序。

未保存的更改
:   如果管理员用户想转到另一个部分，但仍有一些未保存的更改，则在离开当前部分前会显示提示。如果用户接受离开页面，则未保存的更改将丢失。

![](resources/images/capture-app-unsaved-changes.png)

#### 将所有值重置为默认值{ #capture_app_android_settings_webapp_reset_all }

管理员用户可以随时恢复设置。所有设置部分的表单页脚都有一个*将所有值还原为默认值*按钮。 

![](resources/images/capture-app-reset-default.png)

默认值只会在数据存储上恢复，并在点击*保存*后应用。 


## 卸载应用程序{ #capture_app_android_settings_webapp_uninstall_app }

如果需要卸载 Android 设置应用程序，建议同时删除保留数据存储命名空间中的所有数据。

#### 删除数据{ #capture_app_android_settings_webapp_delete_data }

- 转到*常规*部分
- 点击 *禁用所有设置*。
- 将弹出一个模式窗口，点击*禁用*。

![](resources/images/capture-app-unistall-delete-namespace.png)

![](resources/images/capture-app-unistall-delete-namespace-modal.png)

#### 卸载应用程序{ #capture_app_android_settings_webapp_uninstall_app }

- 转到 **应用程序管理**
- 点击**自定义应用程序**
- 进入 *安卓设置应用程序*。
- 点击 * 卸载 V2.X.X*

![](resources/images/capture-app-unistall-custom-app.png)

![](resources/images/capture-app-unistall-aswa.png)

> **警告**
>
> 这是一项关键操作，请注意，执行此操作后，之前的所有配置都将被永久删除。

