---
edit_url: "https://github.com/dhis2/dhis2-docs/blob/2.37/src/user/control-data-quality.md"
revision_date: '2021-10-14'
tags:
- 使用
- DHIS core version 2.37
---

# 控制数据质量 { #control_data_quality } 

## 关于数据质量检查 { #about_data_quality } 

**数据质量**应用程序包含用于验证准确性和
系统中数据的可靠性。您可以评估的不同维度
数据质量如下表所示：


| 尺寸 | 描述 |
|---|---|
| 正确性 | 数据应在该设施收集的数据的正常范围内。与相关数据元素的数据相比不应存在明显差异。 |
| 完整性 | 所有报告组织单位的所有数据元素的数据均应已提交。 |
| 一致性 | 数据应与前几个月和前几年输入的数据一致，同时允许因重组、工作量增加等而发生变化，并与其他类似设施一致。 |
| 时效性 | 各报告单位应按规定时间报送全部数据。 |

您可以通过多种方式验证数据质量，例如：

  - 在数据输入时，DHIS 2可以检查输入的数据以查看是否
    它落在该数据的最小最大值范围内
    元素（基于所有先前注册的数据）。

  - 通过定义验证规则，该规则可以在用户具有以下条件时运行
    完成数据输入。用户还可以检查输入的数据是否存在
    验证的特定时期和组织单位
    规则，并显示这些验证规则的违反情况。

  - 通过分析数据集，即检查数据中的差距。

  - 通过数据三角剖分，即比较相同的数据或指标
    来自不同的来源。

## 验证规则分析 { #validation_rule_analysis } 

### 关于验证规则分析 { #about-validation-rule-analysis } 

验证规则基于定义数字关系的表达式
数据元素值之间。该表达式形成一个条件
应该断言满足某些逻辑标准。

该表达式包括：

  - 左侧

  - 右边

  - 操作员

验证规则可以断言“已测试疑似疟疾病例”\>=
“确诊的疟疾病例”。

左侧和右侧必须返回数字值。

验证规则分析针对数据测试验证规则
在系统中注册。当
验证规则表达式中定义的条件不满足，其中
表示条件为假时。

You can configure a validation rule analysis to automatically send out
information about validation violations to selected user groups. These
messages are called *validation notifications* and you create them in
the **Maintenance** app. Validation notifications are sent via the
internal DHIS 2 messaging system.

### 工作流程 { #workflow } 

1.  在**维护**应用程序中，创建验证规则和验证
    规则组。

2.  （可选）在 **Maintenance** 应用程序中，创建验证
    通知。

3.  自动或手动运行验证规则分析。

      - 在 **Scheduler** 应用程序中，您可以安排验证
        规则分析可针对所有验证规则自动运行
        包含在一个或多个验证规则组中。之后
        系统已运行分析，您将看到验证
        透过（
        内部DHIS 2消息传递系统。

      - 在 **数据质量** 应用程序中，您运行验证规则
        手动分析选定的验证规则。之后
        分析过程已完成，您将看到验证列表
        违规行为（如果有）。

### 安排验证规则分析以自动运行 { #schedule-a-validation-rule-analysis-to-run-automatically } 

> **注意**
>
>仅一次或多次验证中包含的验证规则
>通知将成为验证规则分析的一部分。如果
>没有用于验证的相应验证通知
>规则，将不会发送任何通知。

> **注意**
>
>在自动运行验证规则分析时，任何结果都不会
>已保留，将在此运行期间保留。坚持不懈
>结果目前只能通过API访问。请教
>开发人员指南，了解有关持久性的更多信息
>可以访问违反验证规则的信息。

1.  确认您已创建所有验证规则，验证
    规则组和所需的验证通知。

2.  打开** Scheduler **应用程序，然后单击右下角的添加按钮。

3.  为新作业选择合适的名称。

4. 使用下拉菜单选择 **监控** 作业类型。

5. 选择作业的运行频率，即作业应在何时以及多久运行一次。

6. 填写**参数**部分，包括 验证 规则组。

7. 按**添加作业**按钮以确认作业创建。有关添加作业的更多信息，请参见[Scheduling]（data-administration.html＃scheduling）。

### 手动运行验证规则分析 { #run-a-validation-rule-analysis-manually } 

![](resources/images/data_quality/validation_rule_analysis.png)

1.  确认您已创建所有验证规则，验证
    规则组和所需的验证通知。

2.  打开 **数据质量** 应用程序并单击 **验证规则
    分析**。

3.  选择**开始日期**和**结束日期**。

4.  选择您要包括在其中的**验证规则组**
    分析。

    您可以从以下选项中选择所有验证规则或所有验证规则：
    单个验证规则组。

5.  （可选）选择 **发送通知** 以触发验证
    通知。

    > **Note**
    >
    > If you want to send out validation notifications, you must first
    > create them in the **Maintenance** app.

6.  （可选）选择*保留新结果*以保留所有未保留的结果
    分析过程中发现的结果

7.  选择一个**父级组织单位**。

8.  点击**验证**。

    分析过程的持续时间取决于要处理的数据量。
    被分析。如果没有违反验证规则，
    you'll see a message saying *Validation passed successfully*. If
    有验证违规行为，它们会在
    列表。

    ![](resources/images/data_quality/validation_rule_analysis_result.png)

9.  （可选）单击显示详细信息图标以获取有关的更多信息
    验证违规。在弹出窗口中，您将找到信息
    关于验证规则中包含的数据元素及其
    相应的数据值。您可以使用此信息来识别
    验证规则违反的来源。

10. （可选）单击**下载为PDF **，**下载为Excel **或
    **下载为CSV **，以下载以下内容中的验证违规列表：
    PDF，Excel或CSV格式。

### 也可以看看 { #see-also } 

  - [管理验证
    规则]（https://docs.dhis2.org/master/zh/user/html/manage_validation_rule.html）

  - [数据管理
    应用]]（https://docs.dhis2.org/master/zh/user/html/data_admin.html）

## 标准差离群分析 { #standard_deviation_analysis } 

### 关于标准偏差离群分析 { #about-standard-deviation-outlier-analysis } 

标准偏差离群分析确定的值是
与其余数据在数值上相距遥远，可能表明它们是异常值。
该分析基于标准正态分布。 DHIS 2计算
组织单位，数据元素，类别选项的所有值
组合和属性选项组合。异常可能发生
当然有机会，但可能表示测量或数据输入错误。

> **注意**
>
>如上所述，此数据质量分析仅适用于
>实际正态分布的数据。季节性较大的数据
>变异，或者可以根据其他统计模型进行分布
>（例如logistical）可能会导致标记值，这些值实际上应被视为有效。
>因此，建议先确认数据实际是否正常
>在运行标准偏差离群分析之前已分布。

### 运行标准偏差离群分析 { #run-a-standard-deviation-outlier-analysis } 

![](resources/images/data_quality/std_dev_analysis.png)

1.  打开 **数据质量** 应用程序并单击 **异常值检测**。

2.  选择数据集。

3.  选择**组织单位**。

    可以选择多个组织单位。分析是对选定单位的子层次结构中所有组织单位的原始数据进行的，而不是对聚合数据进行的。

4.  选择**从日期**和**到日期**。

5.  将 **算法** 设置为 **Z 分数**

    也可以选择修改后的 Z 分数。如果选择，则使用值的中位数而不是平均值。

6.  选择**阈值**。

    这是指允许数据的标准偏差数
    在平均值被分类为离群值之前偏离均值。

7.  选择**最大结果**

    这是指结果中列出的异常值的最大数量。

8.  （可选）选择 **数据开始日期** 和 **数据结束日期**

    这些字段可用于对提供的日期范围内的数据子集执行异常值检测分析。如果留空，将使用数据集的自然开始和结束日期_（在高级部分）_。

9.  （可选）选择一个度量**排序依据**

    异常值可以按 **Z 分数** 或 **相对平均值的绝对偏差** _（在高级部分）_ 进行排序。

10.  单击**开始**
    分析过程持续时间取决于正在分析的数据量。如果存在标准差异常值，它们将显示在列表中。
    ![](resources/images/data_quality/std_dev_analysis_outlier_result.png)
    对于每个异常值，您将看到数据元素、周期、组织单位、值、z 分数、偏差、标准差、平均值、最小值和最大值。最小值和最大值是指从为分析选择的标准差数量得出的边界值。

11.  （可选）单击“**下载为 CSV**”以下载 CSV 格式的列表。

> **提示**
>
> 单击复选框标记异常值以供进一步跟进。

## 最小最大离群值分析 { #min_max_analysis } 

### 关于基于最小最大值的离群分析 { #about-minimum-maximum-value-based-outlier-analysis } 

您可以通过设置一个
每个数据值的最小/最大值范围。您可以定义值
手动设置范围或自动生成它们。

自动生成的最小最大值范围仅适用于
正态分布的数据。 DHIS2 将确定算术平均值和
给定数据元素、类别的所有值的标准差
选项、组织单位和属性组合。然后系统
将根据**数据计算最小最大值范围
分析在**系统设置**应用程序中指定的标准偏差因子**。

对于高度偏斜或零膨胀的数据（通常是这种情况）
包含汇总数据），DHIS2自动生成的值可能不会
提供准确的最小最大值范围。这可能导致
过多的虚假违规行为，例如，如果您分析与
季节性疾病。

> **注意**
>
>计算所有属性的最小最大值范围
>给定数据元素的组合选项，类别选项和
>组织单位组合。

### 工作流程 { #workflow } 

1.  自动或自动创建一个最小值最大值范围
    手动。

      - 在**数据管理**应用程序中，您可以生成值范围
        自动。

      - 在**数据输入**应用程序中，您可以手动设置值范围。

2.  在**数据质量**应用中，运行**最小-最大离群值分析**。

### 配置最小最大离群值分析 { #configure-a-minimum-maximum-outlier-analysis } 

#### 自动创建最小值最大值范围 { #create-minimum-maximum-value-range-automatically } 

![](resources/images/data_quality/generate_min_max.png)

> **注意**
>
>自动生成的最小最大值范围可能对许多人有用
>情况，但建议验证数据是否确实
>使用此功能前呈正态分布。

您会生成最小最大值范围，该最小值最大值范围是根据
**数据管理**应用程序。新值范围将覆盖任何值
系统先前计算的范围。

1.  设置**数据分析标准偏差（std dev）系数**：

    1.  打开**系统设置**应用，然后单击**常规**。

    2.  在“**数据分析标准差因子**字段中，输入一个值。

        这设置了要在
        离群值分析。默认值为2。更高的值
        表示分布范围较广，可能导致异常值
        没有被分析正确标记。

2.  打开**数据管理**应用程序，然后单击**最小-最大值生成**。

3.  选择数据集。

4.  选择一个**组织机构**。

5.  点击**生成**。

    数据集中所有数据元素的新的最小最大值范围
    所有组织单位（包括
    所选组织单位的后代）。

#### 手动创建最小值/最大值范围 { #create-minimummaximum-value-range-manually } 

![](resources/images/data_quality/set_min_max_manually.png)

1.  在**数据输入**应用中，打开一个数据输入表单。

2.  双击要为其设置最小/最大值范围的字段。

3.  在出现的对话框中输入**最小限制**和**最大限制**。

4.  点击**保存**。 

    如果下次您的值不在新值范围内
    输入数据，数据输入单元格将出现橙色
    背景。

5.  （可选）键入注释以解释差异的原因，
    例如，在设施中发生的事件可能会产生大量
    客户数量。

6.  （可选）点击**保存评论**。

> **提示**
>
>单击星号图标以标记该值以进行进一步跟踪。

#### 删除最小最大值范围 { #delete-minimum-maximum-value-range } 

您可以永久删除所选的所有最小最大值范围
**数据管理**应用程序中的数据集和组织单位。

1.  打开**数据管理**应用程序，然后单击**最小-最大值生成**。

2.  选择数据集。

3.  选择**组织单位**。请注意，选择会级联到
    后裔组织单位！

4.  点击**删除**。

### 运行最小最大离群值分析 { #run-a-minimum-maximum-outlier-analysis } 

![](resources/images/data_quality/min_max_analysis.png)

1.  确认您已创建最小最大值范围。

2.  打开 **数据质量** 应用程序并单击 **异常值检测**。

3.  选择数据集。

4.  选择**父组织单位**。

    可以选择多个组织单位。分析是对选定单位的子层次结构中所有组织单位的原始数据进行的，而不是对聚合数据进行的。

5.  选择**从日期**和**到日期**。

6.  将 **算法** 设置为 **最小-最大值**。

7.  选择**最大结果**

    这是指结果中列出的异常值的最大数量。

8.  单击**开始**

    分析过程的持续时间取决于要处理的数据量。
    被分析。如果存在标准偏差离群值，它们将
    以列表形式呈现。

    ![](resources/images/data_quality/min_max_result.png)

    对于每个异常值，您将看到数据元素、期间、组织单位、
    值、偏差、最小值和最大值。

9.  （可选）单击“**下载为 CSV**”以下载 CSV 格式的列表。

> **提示**
>
> 单击复选框标记该值以供进一步跟进。

## 后续分析 { #follow_up_analysis } 

### 关于后续分析 { #about-follow-up-analysis } 

后续分析会创建一个包含所有标记的数据值的列表
跟进。您可以在**数据录入**中标记后续的数据值
应用程序并在结果列表中您从标准差异常值获得或
最小最大异常值分析。

### 创建标记为后续数据值的列表 { #create-list-of-data-values-marked-for-follow-up } 

![](resources/images/data_quality/follow_up_analysis.png)

1.  打开**数据质量**应用，然后单击**后续分析**。

2.  选择一个或多个数据集。

3.  选择**组织单位**。

    可以选择多个组织单位。分析是对组织单位“下”的原始数据进行的，而不是对汇总数据进行的。

4. 选择 **开始日期** 和 **结束日期**，定义您有兴趣查找已标记为后续的值的时间段。

4. 按 **跟进** 生成已标记为跟进的值列表。

5.  （可选）单击 **下载为 PDF**、**下载为 Excel** 或 **下载为 CSV** 以下载 PDF、Excel 或 CSV 格式的验证违规列表。

![](resources/images/data_quality/follow_up_analysis_result.png)

> **提示**
>
> 选中列表中的 **取消关注** 复选框，然后单击 **取消关注** 按钮以从标记的数据值中删除后续标签。
> 您还可以在字段中输入注释以指示任何其他内容
> 有关价值的信息。

